(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function s(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(o){if(o.ep)return;o.ep=!0;const h=s(o);fetch(o.href,h)}})();var Qf={exports:{}},ko={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function H2(){if(Zy)return ko;Zy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,o,h){var m=null;if(h!==void 0&&(m=""+h),o.key!==void 0&&(m=""+o.key),"key"in o){h={};for(var p in o)p!=="key"&&(h[p]=o[p])}else h=o;return o=h.ref,{$$typeof:i,type:r,key:m,ref:o!==void 0?o:null,props:h}}return ko.Fragment=e,ko.jsx=s,ko.jsxs=s,ko}var Jy;function F2(){return Jy||(Jy=1,Qf.exports=H2()),Qf.exports}var c=F2(),$f={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ev;function G2(){if(ev)return Ie;ev=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),m=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),R=Symbol.iterator;function q(C){return C===null||typeof C!="object"?null:(C=R&&C[R]||C["@@iterator"],typeof C=="function"?C:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,Z={};function ce(C,z,ne){this.props=C,this.context=z,this.refs=Z,this.updater=ne||ee}ce.prototype.isReactComponent={},ce.prototype.setState=function(C,z){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,z,"setState")},ce.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function re(){}re.prototype=ce.prototype;function pe(C,z,ne){this.props=C,this.context=z,this.refs=Z,this.updater=ne||ee}var ue=pe.prototype=new re;ue.constructor=pe,Q(ue,ce.prototype),ue.isPureReactComponent=!0;var xe=Array.isArray;function he(){}var j={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function N(C,z,ne){var ae=ne.ref;return{$$typeof:i,type:C,key:z,ref:ae!==void 0?ae:null,props:ne}}function k(C,z){return N(C.type,z,C.props)}function I(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function M(C){var z={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ne){return z[ne]})}var E=/\/+/g;function le(C,z){return typeof C=="object"&&C!==null&&C.key!=null?M(""+C.key):z.toString(36)}function oe(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(he,he):(C.status="pending",C.then(function(z){C.status==="pending"&&(C.status="fulfilled",C.value=z)},function(z){C.status==="pending"&&(C.status="rejected",C.reason=z)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function U(C,z,ne,ae,P){var X=typeof C;(X==="undefined"||X==="boolean")&&(C=null);var fe=!1;if(C===null)fe=!0;else switch(X){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(C.$$typeof){case i:case e:fe=!0;break;case _:return fe=C._init,U(fe(C._payload),z,ne,ae,P)}}if(fe)return P=P(C),fe=ae===""?"."+le(C,0):ae,xe(P)?(ne="",fe!=null&&(ne=fe.replace(E,"$&/")+"/"),U(P,z,ne,"",function(rt){return rt})):P!=null&&(I(P)&&(P=k(P,ne+(P.key==null||C&&C.key===P.key?"":(""+P.key).replace(E,"$&/")+"/")+fe)),z.push(P)),1;fe=0;var Ee=ae===""?".":ae+":";if(xe(C))for(var Re=0;Re<C.length;Re++)ae=C[Re],X=Ee+le(ae,Re),fe+=U(ae,z,ne,X,P);else if(Re=q(C),typeof Re=="function")for(C=Re.call(C),Re=0;!(ae=C.next()).done;)ae=ae.value,X=Ee+le(ae,Re++),fe+=U(ae,z,ne,X,P);else if(X==="object"){if(typeof C.then=="function")return U(oe(C),z,ne,ae,P);throw z=String(C),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return fe}function W(C,z,ne){if(C==null)return C;var ae=[],P=0;return U(C,ae,"","",function(X){return z.call(ne,X,P++)}),ae}function V(C){if(C._status===-1){var z=C._result;z=z(),z.then(function(ne){(C._status===0||C._status===-1)&&(C._status=1,C._result=ne)},function(ne){(C._status===0||C._status===-1)&&(C._status=2,C._result=ne)}),C._status===-1&&(C._status=0,C._result=z)}if(C._status===1)return C._result.default;throw C._result}var me=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Ae={map:W,forEach:function(C,z,ne){W(C,function(){z.apply(this,arguments)},ne)},count:function(C){var z=0;return W(C,function(){z++}),z},toArray:function(C){return W(C,function(z){return z})||[]},only:function(C){if(!I(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Ie.Activity=S,Ie.Children=Ae,Ie.Component=ce,Ie.Fragment=s,Ie.Profiler=o,Ie.PureComponent=pe,Ie.StrictMode=r,Ie.Suspense=v,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(C){return j.H.useMemoCache(C)}},Ie.cache=function(C){return function(){return C.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(C,z,ne){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var ae=Q({},C.props),P=C.key;if(z!=null)for(X in z.key!==void 0&&(P=""+z.key),z)!w.call(z,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&z.ref===void 0||(ae[X]=z[X]);var X=arguments.length-2;if(X===1)ae.children=ne;else if(1<X){for(var fe=Array(X),Ee=0;Ee<X;Ee++)fe[Ee]=arguments[Ee+2];ae.children=fe}return N(C.type,P,ae)},Ie.createContext=function(C){return C={$$typeof:m,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:h,_context:C},C},Ie.createElement=function(C,z,ne){var ae,P={},X=null;if(z!=null)for(ae in z.key!==void 0&&(X=""+z.key),z)w.call(z,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(P[ae]=z[ae]);var fe=arguments.length-2;if(fe===1)P.children=ne;else if(1<fe){for(var Ee=Array(fe),Re=0;Re<fe;Re++)Ee[Re]=arguments[Re+2];P.children=Ee}if(C&&C.defaultProps)for(ae in fe=C.defaultProps,fe)P[ae]===void 0&&(P[ae]=fe[ae]);return N(C,X,P)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(C){return{$$typeof:p,render:C}},Ie.isValidElement=I,Ie.lazy=function(C){return{$$typeof:_,_payload:{_status:-1,_result:C},_init:V}},Ie.memo=function(C,z){return{$$typeof:y,type:C,compare:z===void 0?null:z}},Ie.startTransition=function(C){var z=j.T,ne={};j.T=ne;try{var ae=C(),P=j.S;P!==null&&P(ne,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(he,me)}catch(X){me(X)}finally{z!==null&&ne.types!==null&&(z.types=ne.types),j.T=z}},Ie.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Ie.use=function(C){return j.H.use(C)},Ie.useActionState=function(C,z,ne){return j.H.useActionState(C,z,ne)},Ie.useCallback=function(C,z){return j.H.useCallback(C,z)},Ie.useContext=function(C){return j.H.useContext(C)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(C,z){return j.H.useDeferredValue(C,z)},Ie.useEffect=function(C,z){return j.H.useEffect(C,z)},Ie.useEffectEvent=function(C){return j.H.useEffectEvent(C)},Ie.useId=function(){return j.H.useId()},Ie.useImperativeHandle=function(C,z,ne){return j.H.useImperativeHandle(C,z,ne)},Ie.useInsertionEffect=function(C,z){return j.H.useInsertionEffect(C,z)},Ie.useLayoutEffect=function(C,z){return j.H.useLayoutEffect(C,z)},Ie.useMemo=function(C,z){return j.H.useMemo(C,z)},Ie.useOptimistic=function(C,z){return j.H.useOptimistic(C,z)},Ie.useReducer=function(C,z,ne){return j.H.useReducer(C,z,ne)},Ie.useRef=function(C){return j.H.useRef(C)},Ie.useState=function(C){return j.H.useState(C)},Ie.useSyncExternalStore=function(C,z,ne){return j.H.useSyncExternalStore(C,z,ne)},Ie.useTransition=function(){return j.H.useTransition()},Ie.version="19.2.0",Ie}var tv;function Um(){return tv||(tv=1,$f.exports=G2()),$f.exports}var de=Um(),Xf={exports:{}},Do={},Wf={exports:{}},Zf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function Y2(){return nv||(nv=1,(function(i){function e(U,W){var V=U.length;U.push(W);e:for(;0<V;){var me=V-1>>>1,Ae=U[me];if(0<o(Ae,W))U[me]=W,U[V]=Ae,V=me;else break e}}function s(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],V=U.pop();if(V!==W){U[0]=V;e:for(var me=0,Ae=U.length,C=Ae>>>1;me<C;){var z=2*(me+1)-1,ne=U[z],ae=z+1,P=U[ae];if(0>o(ne,V))ae<Ae&&0>o(P,ne)?(U[me]=P,U[ae]=V,me=ae):(U[me]=ne,U[z]=V,me=z);else if(ae<Ae&&0>o(P,V))U[me]=P,U[ae]=V,me=ae;else break e}}return W}function o(U,W){var V=U.sortIndex-W.sortIndex;return V!==0?V:U.id-W.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;i.unstable_now=function(){return h.now()}}else{var m=Date,p=m.now();i.unstable_now=function(){return m.now()-p}}var v=[],y=[],_=1,S=null,R=3,q=!1,ee=!1,Q=!1,Z=!1,ce=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function ue(U){for(var W=s(y);W!==null;){if(W.callback===null)r(y);else if(W.startTime<=U)r(y),W.sortIndex=W.expirationTime,e(v,W);else break;W=s(y)}}function xe(U){if(Q=!1,ue(U),!ee)if(s(v)!==null)ee=!0,he||(he=!0,M());else{var W=s(y);W!==null&&oe(xe,W.startTime-U)}}var he=!1,j=-1,w=5,N=-1;function k(){return Z?!0:!(i.unstable_now()-N<w)}function I(){if(Z=!1,he){var U=i.unstable_now();N=U;var W=!0;try{e:{ee=!1,Q&&(Q=!1,re(j),j=-1),q=!0;var V=R;try{t:{for(ue(U),S=s(v);S!==null&&!(S.expirationTime>U&&k());){var me=S.callback;if(typeof me=="function"){S.callback=null,R=S.priorityLevel;var Ae=me(S.expirationTime<=U);if(U=i.unstable_now(),typeof Ae=="function"){S.callback=Ae,ue(U),W=!0;break t}S===s(v)&&r(v),ue(U)}else r(v);S=s(v)}if(S!==null)W=!0;else{var C=s(y);C!==null&&oe(xe,C.startTime-U),W=!1}}break e}finally{S=null,R=V,q=!1}W=void 0}}finally{W?M():he=!1}}}var M;if(typeof pe=="function")M=function(){pe(I)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,le=E.port2;E.port1.onmessage=I,M=function(){le.postMessage(null)}}else M=function(){ce(I,0)};function oe(U,W){j=ce(function(){U(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return R},i.unstable_next=function(U){switch(R){case 1:case 2:case 3:var W=3;break;default:W=R}var V=R;R=W;try{return U()}finally{R=V}},i.unstable_requestPaint=function(){Z=!0},i.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var V=R;R=U;try{return W()}finally{R=V}},i.unstable_scheduleCallback=function(U,W,V){var me=i.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?me+V:me):V=me,U){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=V+Ae,U={id:_++,callback:W,priorityLevel:U,startTime:V,expirationTime:Ae,sortIndex:-1},V>me?(U.sortIndex=V,e(y,U),s(v)===null&&U===s(y)&&(Q?(re(j),j=-1):Q=!0,oe(xe,V-me))):(U.sortIndex=Ae,e(v,U),ee||q||(ee=!0,he||(he=!0,M()))),U},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(U){var W=R;return function(){var V=R;R=W;try{return U.apply(this,arguments)}finally{R=V}}}})(Zf)),Zf}var sv;function K2(){return sv||(sv=1,Wf.exports=Y2()),Wf.exports}var Jf={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function Q2(){if(iv)return en;iv=1;var i=Um();function e(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(v,y,_){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:v,containerInfo:y,implementation:_}}var m=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,en.createPortal=function(v,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return h(v,y,null,_)},en.flushSync=function(v){var y=m.T,_=r.p;try{if(m.T=null,r.p=2,v)return v()}finally{m.T=y,r.p=_,r.d.f()}},en.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(v,y))},en.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},en.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var _=y.as,S=p(_,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,q=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?r.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:R,fetchPriority:q}):_==="script"&&r.d.X(v,{crossOrigin:S,integrity:R,fetchPriority:q,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},en.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=p(y.as,y.crossOrigin);r.d.M(v,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(v)},en.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,S=p(_,y.crossOrigin);r.d.L(v,_,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},en.preloadModule=function(v,y){if(typeof v=="string")if(y){var _=p(y.as,y.crossOrigin);r.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(v)},en.requestFormReset=function(v){r.d.r(v)},en.unstable_batchedUpdates=function(v,y){return v(y)},en.useFormState=function(v,y,_){return m.H.useFormState(v,y,_)},en.useFormStatus=function(){return m.H.useHostTransitionStatus()},en.version="19.2.0",en}var rv;function $2(){if(rv)return Jf.exports;rv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Jf.exports=Q2(),Jf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function X2(){if(av)return Do;av=1;var i=K2(),e=Um(),s=$2();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function m(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(h(t)!==t)throw Error(r(188))}function y(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,l=n;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return v(d),t;if(f===l)return v(d),n;f=f.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=f;else{for(var x=!1,T=d.child;T;){if(T===a){x=!0,a=d,l=f;break}if(T===l){x=!0,l=d,a=f;break}T=T.sibling}if(!x){for(T=f.child;T;){if(T===a){x=!0,a=f,l=d;break}if(T===l){x=!0,l=f,a=d;break}T=T.sibling}if(!x)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var S=Object.assign,R=Symbol.for("react.element"),q=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var E=Symbol.for("react.client.reference");function le(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===E?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Q:return"Fragment";case ce:return"Profiler";case Z:return"StrictMode";case xe:return"Suspense";case he:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ee:return"Portal";case pe:return t.displayName||"Context";case re:return(t._context.displayName||"Context")+".Consumer";case ue:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return n=t.displayName||null,n!==null?n:le(t.type)||"Memo";case w:n=t._payload,t=t._init;try{return le(t(n))}catch{}}return null}var oe=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},me=[],Ae=-1;function C(t){return{current:t}}function z(t){0>Ae||(t.current=me[Ae],me[Ae]=null,Ae--)}function ne(t,n){Ae++,me[Ae]=t.current,t.current=n}var ae=C(null),P=C(null),X=C(null),fe=C(null);function Ee(t,n){switch(ne(X,n),ne(P,t),ne(ae,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?_y(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=_y(n),t=wy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}z(ae),ne(ae,t)}function Re(){z(ae),z(P),z(X)}function rt(t){t.memoizedState!==null&&ne(fe,t);var n=ae.current,a=wy(n,t.type);n!==a&&(ne(P,t),ne(ae,a))}function qt(t){P.current===t&&(z(ae),z(P)),fe.current===t&&(z(fe),Co._currentValue=V)}var Jt,Hs;function Rn(t){if(Jt===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Jt=n&&n[1]||"",Hs=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jt+t+Hs}var Fs=!1;function ds(t,n){if(!t||Fs)return"";Fs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(K){var G=K}Reflect.construct(t,[],te)}else{try{te.call()}catch(K){G=K}t.call(te.prototype)}}else{try{throw Error()}catch(K){G=K}(te=t())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),x=f[0],T=f[1];if(x&&T){var D=x.split(`
`),F=T.split(`
`);for(d=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(l===D.length||d===F.length)for(l=D.length-1,d=F.length-1;1<=l&&0<=d&&D[l]!==F[d];)d--;for(;1<=l&&0<=d;l--,d--)if(D[l]!==F[d]){if(l!==1||d!==1)do if(l--,d--,0>d||D[l]!==F[d]){var $=`
`+D[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=d);break}}}finally{Fs=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Rn(a):""}function Er(t,n){switch(t.tag){case 26:case 27:case 5:return Rn(t.type);case 16:return Rn("Lazy");case 13:return t.child!==n&&n!==null?Rn("Suspense Fallback"):Rn("Suspense");case 19:return Rn("SuspenseList");case 0:case 15:return ds(t.type,!1);case 11:return ds(t.type.render,!1);case 1:return ds(t.type,!0);case 31:return Rn("Activity");default:return""}}function jn(t){try{var n="",a=null;do n+=Er(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var mt=Object.prototype.hasOwnProperty,Ot=i.unstable_scheduleCallback,Ti=i.unstable_cancelCallback,$h=i.unstable_shouldYield,gc=i.unstable_requestPaint,an=i.unstable_now,Sr=i.unstable_getCurrentPriorityLevel,jl=i.unstable_ImmediatePriority,Il=i.unstable_UserBlockingPriority,Ei=i.unstable_NormalPriority,Xh=i.unstable_LowPriority,pc=i.unstable_IdlePriority,yc=i.log,vc=i.unstable_setDisableYieldValue,Wn=null,Ht=null;function In(t){if(typeof yc=="function"&&vc(t),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(Wn,t)}catch{}}var yt=Math.clz32?Math.clz32:bc,xc=Math.log,ya=Math.LN2;function bc(t){return t>>>=0,t===0?32:31-(xc(t)/ya|0)|0}var fs=256,Ar=262144,Tt=4194304;function ms(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function gs(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?d=ms(l):(x&=T,x!==0?d=ms(x):a||(a=T&~t,a!==0&&(d=ms(a))))):(T=l&~f,T!==0?d=ms(T):x!==0?d=ms(x):a||(a=l&~t,a!==0&&(d=ms(a)))),d===0?0:n!==0&&n!==d&&(n&f)===0&&(f=d&-d,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:d}function Zn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Wh(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _c(){var t=Tt;return Tt<<=1,(Tt&62914560)===0&&(Tt=4194304),t}function ps(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function Nr(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Zh(t,n,a,l,d,f){var x=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,D=t.expirationTimes,F=t.hiddenUpdates;for(a=x&~a;0<a;){var $=31-yt(a),te=1<<$;T[$]=0,D[$]=-1;var G=F[$];if(G!==null)for(F[$]=null,$=0;$<G.length;$++){var K=G[$];K!==null&&(K.lane&=-536870913)}a&=~te}l!==0&&Cr(t,l,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(x&~n))}function Cr(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-yt(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function kl(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-yt(a),d=1<<l;d&n|t[l]&n&&(t[l]|=n),a&=~d}}function Dl(t,n){var a=n&-n;return a=(a&42)!==0?1:Rr(a),(a&(t.suspendedLanes|n))!==0?0:a}function Rr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Gs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function wc(){var t=W.p;return t!==0?t:(t=window.event,t===void 0?32:Gy(t.type))}function Jn(t,n){var a=W.p;try{return W.p=t,n()}finally{W.p=a}}var es=Math.random().toString(36).slice(2),Et="__reactFiber$"+es,Pt="__reactProps$"+es,ys="__reactContainer$"+es,va="__reactEvents$"+es,Jh="__reactListeners$"+es,Tc="__reactHandles$"+es,Ec="__reactResources$"+es,vs="__reactMarker$"+es;function xa(t){delete t[Et],delete t[Pt],delete t[va],delete t[Jh],delete t[Tc]}function xs(t){var n=t[Et];if(n)return n;for(var a=t.parentNode;a;){if(n=a[ys]||a[Et]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Ry(t);t!==null;){if(a=t[Et])return a;t=Ry(t)}return n}t=a,a=t.parentNode}return null}function kn(t){if(t=t[Et]||t[ys]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function xn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function bs(t){var n=t[Ec];return n||(n=t[Ec]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function St(t){t[vs]=!0}var Ol=new Set,Ml={};function _s(t,n){ws(t,n),ws(t+"Capture",n)}function ws(t,n){for(Ml[t]=n,t=0;t<n.length;t++)Ol.add(n[t])}var Vl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ll={},Pl={};function Sc(t){return mt.call(Pl,t)?!0:mt.call(Ll,t)?!1:Vl.test(t)?Pl[t]=!0:(Ll[t]=!0,!1)}function ba(t,n,a){if(Sc(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function bn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function At(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function Ut(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Si(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ul(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return d.call(this)},set:function(x){a=""+x,f.call(this,x)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function We(t){if(!t._valueTracker){var n=Si(t)?"checked":"value";t._valueTracker=Ul(t,n,""+t[n])}}function jr(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Si(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Ts(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ir=/[\n"\\]/g;function un(t){return t.replace(Ir,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function _a(t,n,a,l,d,f,x,T){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),n!=null?x==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Ut(n)):t.value!==""+Ut(n)&&(t.value=""+Ut(n)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),n!=null?zl(t,x,Ut(n)):a!=null?zl(t,x,Ut(a)):l!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Ut(T):t.removeAttribute("name")}function Ac(t,n,a,l,d,f,x,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){We(t);return}a=a!=null?""+Ut(a):"",n=n!=null?""+Ut(n):a,T||n===t.value||(t.value=n),t.defaultValue=n}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),We(t)}function zl(t,n,a){n==="number"&&Ts(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ai(t,n,a,l){if(t=t.options,n){n={};for(var d=0;d<a.length;d++)n["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=n.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ut(a),n=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}n!==null||t[d].disabled||(n=t[d])}n!==null&&(n.selected=!0)}}function Nc(t,n,a){if(n!=null&&(n=""+Ut(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+Ut(a):""}function Ni(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(oe(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Ut(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),We(t)}function hn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Cc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bl(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||Cc.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function ql(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in n)l=n[d],n.hasOwnProperty(d)&&a[d]!==l&&Bl(t,d,l)}else for(var f in n)n.hasOwnProperty(f)&&Bl(t,f,n[f])}function wa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ci=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ta(t){return Ci.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ts(){}var Hl=null;function Dn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ri=null,Es=null;function kr(t){var n=kn(t);if(n&&(t=n.stateNode)){var a=t[Pt]||null;e:switch(t=n.stateNode,n.type){case"input":if(_a(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+un(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var d=l[Pt]||null;if(!d)throw Error(r(90));_a(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&jr(l)}break e;case"textarea":Nc(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Ai(t,!!a.multiple,n,!1)}}}var Ea=!1;function ji(t,n,a){if(Ea)return t(n,a);Ea=!0;try{var l=t(n);return l}finally{if(Ea=!1,(Ri!==null||Es!==null)&&(wu(),Ri&&(n=Ri,t=Es,Es=Ri=null,kr(n),t)))for(n=0;n<t.length;n++)kr(t[n])}}function ns(t,n){var a=t.stateNode;if(a===null)return null;var l=a[Pt]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dr=!1;if(On)try{var et={};Object.defineProperty(et,"passive",{get:function(){Dr=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Dr=!1}var Ss=null,Fl=null,Or=null;function Gl(){if(Or)return Or;var t,n=Fl,a=n.length,l,d="value"in Ss?Ss.value:Ss.textContent,f=d.length;for(t=0;t<a&&n[t]===d[t];t++);var x=a-t;for(l=1;l<=x&&n[a-l]===d[f-l];l++);return Or=d.slice(t,1<l?1-l:void 0)}function Mr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ys(){return!0}function ss(){return!1}function Ft(t){function n(a,l,d,f,x){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=x,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ys:ss,this.isPropagationStopped=ss,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),n}var Ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},As=Ft(Ks),Ii=S({},Ks,{view:0,detail:0}),Yl=Ft(Ii),ki,Sa,Ns,Aa=S({},Ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Di,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ns&&(Ns&&t.type==="mousemove"?(ki=t.screenX-Ns.screenX,Sa=t.screenY-Ns.screenY):Sa=ki=0,Ns=t),ki)},movementY:function(t){return"movementY"in t?t.movementY:Sa}}),Kl=Ft(Aa),Vr=S({},Aa,{dataTransfer:0}),jc=Ft(Vr),Ic=S({},Ii,{relatedTarget:0}),Lr=Ft(Ic),Ql=S({},Ks,{animationName:0,elapsedTime:0,pseudoElement:0}),kc=Ft(Ql),Na=S({},Ks,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dc=Ft(Na),Oc=S({},Ks,{data:0}),Cs=Ft(Oc),Mc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Lc[t])?!!n[t]:!1}function Di(){return Pc}var ln=S({},Ii,{key:function(t){if(t.key){var n=Mc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Mr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Di,charCode:function(t){return t.type==="keypress"?Mr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Uc=Ft(ln),zc=S({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qs=Ft(zc),u=S({},Ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Di}),g=Ft(u),b=S({},Ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Ft(b),B=S({},Aa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Ft(B),ge=S({},Ks,{newState:0,oldState:0}),De=Ft(ge),vt=[9,13,27,32],Qe=On&&"CompositionEvent"in window,ut=null;On&&"documentMode"in document&&(ut=document.documentMode);var Mn=On&&"TextEvent"in window&&!ut,Rs=On&&(!Qe||ut&&8<ut&&11>=ut),is=" ",rs=!1;function Pr(t,n){switch(t){case"keyup":return vt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ca(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ra=!1;function f1(t,n){switch(t){case"compositionend":return Ca(n);case"keypress":return n.which!==32?null:(rs=!0,is);case"textInput":return t=n.data,t===is&&rs?null:t;default:return null}}function m1(t,n){if(Ra)return t==="compositionend"||!Qe&&Pr(t,n)?(t=Gl(),Or=Fl=Ss=null,Ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Rs&&n.locale!=="ko"?null:n.data;default:return null}}var g1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!g1[t.type]:n==="textarea"}function Dg(t,n,a,l){Ri?Es?Es.push(l):Es=[l]:Ri=l,n=Ru(n,"onChange"),0<n.length&&(a=new As("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var $l=null,Xl=null;function p1(t){gy(t,0)}function Bc(t){var n=xn(t);if(jr(n))return t}function Og(t,n){if(t==="change")return n}var Mg=!1;if(On){var ed;if(On){var td="oninput"in document;if(!td){var Vg=document.createElement("div");Vg.setAttribute("oninput","return;"),td=typeof Vg.oninput=="function"}ed=td}else ed=!1;Mg=ed&&(!document.documentMode||9<document.documentMode)}function Lg(){$l&&($l.detachEvent("onpropertychange",Pg),Xl=$l=null)}function Pg(t){if(t.propertyName==="value"&&Bc(Xl)){var n=[];Dg(n,Xl,t,Dn(t)),ji(p1,n)}}function y1(t,n,a){t==="focusin"?(Lg(),$l=n,Xl=a,$l.attachEvent("onpropertychange",Pg)):t==="focusout"&&Lg()}function v1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bc(Xl)}function x1(t,n){if(t==="click")return Bc(n)}function b1(t,n){if(t==="input"||t==="change")return Bc(n)}function _1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var _n=typeof Object.is=="function"?Object.is:_1;function Wl(t,n){if(_n(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!mt.call(n,d)||!_n(t[d],n[d]))return!1}return!0}function Ug(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zg(t,n){var a=Ug(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ug(a)}}function Bg(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Bg(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function qg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ts(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Ts(t.document)}return n}function nd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var w1=On&&"documentMode"in document&&11>=document.documentMode,ja=null,sd=null,Zl=null,id=!1;function Hg(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;id||ja==null||ja!==Ts(l)||(l=ja,"selectionStart"in l&&nd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Zl&&Wl(Zl,l)||(Zl=l,l=Ru(sd,"onSelect"),0<l.length&&(n=new As("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=ja)))}function Ur(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Ia={animationend:Ur("Animation","AnimationEnd"),animationiteration:Ur("Animation","AnimationIteration"),animationstart:Ur("Animation","AnimationStart"),transitionrun:Ur("Transition","TransitionRun"),transitionstart:Ur("Transition","TransitionStart"),transitioncancel:Ur("Transition","TransitionCancel"),transitionend:Ur("Transition","TransitionEnd")},rd={},Fg={};On&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function zr(t){if(rd[t])return rd[t];if(!Ia[t])return t;var n=Ia[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in Fg)return rd[t]=n[a];return t}var Gg=zr("animationend"),Yg=zr("animationiteration"),Kg=zr("animationstart"),T1=zr("transitionrun"),E1=zr("transitionstart"),S1=zr("transitioncancel"),Qg=zr("transitionend"),$g=new Map,ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ad.push("scrollEnd");function as(t,n){$g.set(t,n),_s(n,[t])}var qc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Vn=[],ka=0,ld=0;function Hc(){for(var t=ka,n=ld=ka=0;n<t;){var a=Vn[n];Vn[n++]=null;var l=Vn[n];Vn[n++]=null;var d=Vn[n];Vn[n++]=null;var f=Vn[n];if(Vn[n++]=null,l!==null&&d!==null){var x=l.pending;x===null?d.next=d:(d.next=x.next,x.next=d),l.pending=d}f!==0&&Xg(a,d,f)}}function Fc(t,n,a,l){Vn[ka++]=t,Vn[ka++]=n,Vn[ka++]=a,Vn[ka++]=l,ld|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function od(t,n,a,l){return Fc(t,n,a,l),Gc(t)}function Br(t,n){return Fc(t,null,null,n),Gc(t)}function Xg(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&n!==null&&(d=31-yt(a),t=f.hiddenUpdates,l=t[d],l===null?t[d]=[n]:l.push(n),n.lane=a|536870912),f):null}function Gc(t){if(50<_o)throw _o=0,vf=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Da={};function A1(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,n,a,l){return new A1(t,n,a,l)}function cd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $s(t,n){var a=t.alternate;return a===null?(a=wn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Wg(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Yc(t,n,a,l,d,f){var x=0;if(l=t,typeof t=="function")cd(t)&&(x=1);else if(typeof t=="string")x=I2(t,a,ae.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=wn(31,a,n,d),t.elementType=N,t.lanes=f,t;case Q:return qr(a.children,d,f,n);case Z:x=8,d|=24;break;case ce:return t=wn(12,a,n,d|2),t.elementType=ce,t.lanes=f,t;case xe:return t=wn(13,a,n,d),t.elementType=xe,t.lanes=f,t;case he:return t=wn(19,a,n,d),t.elementType=he,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pe:x=10;break e;case re:x=9;break e;case ue:x=11;break e;case j:x=14;break e;case w:x=16,l=null;break e}x=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return n=wn(x,a,n,d),n.elementType=t,n.type=l,n.lanes=f,n}function qr(t,n,a,l){return t=wn(7,t,l,n),t.lanes=a,t}function ud(t,n,a){return t=wn(6,t,null,n),t.lanes=a,t}function Zg(t){var n=wn(18,null,null,0);return n.stateNode=t,n}function hd(t,n,a){return n=wn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Jg=new WeakMap;function Ln(t,n){if(typeof t=="object"&&t!==null){var a=Jg.get(t);return a!==void 0?a:(n={value:t,source:n,stack:jn(n)},Jg.set(t,n),n)}return{value:t,source:n,stack:jn(n)}}var Oa=[],Ma=0,Kc=null,Jl=0,Pn=[],Un=0,Oi=null,js=1,Is="";function Xs(t,n){Oa[Ma++]=Jl,Oa[Ma++]=Kc,Kc=t,Jl=n}function ep(t,n,a){Pn[Un++]=js,Pn[Un++]=Is,Pn[Un++]=Oi,Oi=t;var l=js;t=Is;var d=32-yt(l)-1;l&=~(1<<d),a+=1;var f=32-yt(n)+d;if(30<f){var x=d-d%5;f=(l&(1<<x)-1).toString(32),l>>=x,d-=x,js=1<<32-yt(n)+d|a<<d|l,Is=f+t}else js=1<<f|a<<d|l,Is=t}function dd(t){t.return!==null&&(Xs(t,1),ep(t,1,0))}function fd(t){for(;t===Kc;)Kc=Oa[--Ma],Oa[Ma]=null,Jl=Oa[--Ma],Oa[Ma]=null;for(;t===Oi;)Oi=Pn[--Un],Pn[Un]=null,Is=Pn[--Un],Pn[Un]=null,js=Pn[--Un],Pn[Un]=null}function tp(t,n){Pn[Un++]=js,Pn[Un++]=Is,Pn[Un++]=Oi,js=n.id,Is=n.overflow,Oi=t}var Gt=null,lt=null,Fe=!1,Mi=null,zn=!1,md=Error(r(519));function Vi(t){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw eo(Ln(n,t)),md}function np(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Et]=t,n[Pt]=l,a){case"dialog":Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":case"embed":Pe("load",n);break;case"video":case"audio":for(a=0;a<To.length;a++)Pe(To[a],n);break;case"source":Pe("error",n);break;case"img":case"image":case"link":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"input":Pe("invalid",n),Ac(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Pe("invalid",n);break;case"textarea":Pe("invalid",n),Ni(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||xy(n.textContent,a)?(l.popover!=null&&(Pe("beforetoggle",n),Pe("toggle",n)),l.onScroll!=null&&Pe("scroll",n),l.onScrollEnd!=null&&Pe("scrollend",n),l.onClick!=null&&(n.onclick=ts),n=!0):n=!1,n||Vi(t,!0)}function sp(t){for(Gt=t.return;Gt;)switch(Gt.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Gt=Gt.return}}function Va(t){if(t!==Gt)return!1;if(!Fe)return sp(t),Fe=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Df(t.type,t.memoizedProps)),a=!a),a&&lt&&Vi(t),sp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));lt=Cy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));lt=Cy(t)}else n===27?(n=lt,Xi(t.type)?(t=Pf,Pf=null,lt=t):lt=n):lt=Gt?qn(t.stateNode.nextSibling):null;return!0}function Hr(){lt=Gt=null,Fe=!1}function gd(){var t=Mi;return t!==null&&(gn===null?gn=t:gn.push.apply(gn,t),Mi=null),t}function eo(t){Mi===null?Mi=[t]:Mi.push(t)}var pd=C(null),Fr=null,Ws=null;function Li(t,n,a){ne(pd,n._currentValue),n._currentValue=a}function Zs(t){t._currentValue=pd.current,z(pd)}function yd(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function vd(t,n,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var x=d.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=d;for(var D=0;D<n.length;D++)if(T.context===n[D]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),yd(f.return,a,t),l||(x=null);break e}f=T.next}}else if(d.tag===18){if(x=d.return,x===null)throw Error(r(341));x.lanes|=a,f=x.alternate,f!==null&&(f.lanes|=a),yd(x,a,t),x=null}else x=d.child;if(x!==null)x.return=d;else for(x=d;x!==null;){if(x===t){x=null;break}if(d=x.sibling,d!==null){d.return=x.return,x=d;break}x=x.return}d=x}}function La(t,n,a,l){t=null;for(var d=n,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var x=d.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var T=d.type;_n(d.pendingProps.value,x.value)||(t!==null?t.push(T):t=[T])}}else if(d===fe.current){if(x=d.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Co):t=[Co])}d=d.return}t!==null&&vd(n,t,a,l),n.flags|=262144}function Qc(t){for(t=t.firstContext;t!==null;){if(!_n(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Gr(t){Fr=t,Ws=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Yt(t){return ip(Fr,t)}function $c(t,n){return Fr===null&&Gr(t),ip(t,n)}function ip(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Ws===null){if(t===null)throw Error(r(308));Ws=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Ws=Ws.next=n;return a}var N1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},C1=i.unstable_scheduleCallback,R1=i.unstable_NormalPriority,Nt={$$typeof:pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xd(){return{controller:new N1,data:new Map,refCount:0}}function to(t){t.refCount--,t.refCount===0&&C1(R1,function(){t.controller.abort()})}var no=null,bd=0,Pa=0,Ua=null;function j1(t,n){if(no===null){var a=no=[];bd=0,Pa=Ef(),Ua={status:"pending",value:void 0,then:function(l){a.push(l)}}}return bd++,n.then(rp,rp),n}function rp(){if(--bd===0&&no!==null){Ua!==null&&(Ua.status="fulfilled");var t=no;no=null,Pa=0,Ua=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function I1(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var d=0;d<a.length;d++)(0,a[d])(n)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var ap=U.S;U.S=function(t,n){H0=an(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&j1(t,n),ap!==null&&ap(t,n)};var Yr=C(null);function _d(){var t=Yr.current;return t!==null?t:it.pooledCache}function Xc(t,n){n===null?ne(Yr,Yr.current):ne(Yr,n.pool)}function lp(){var t=_d();return t===null?null:{parent:Nt._currentValue,pool:t}}var za=Error(r(460)),wd=Error(r(474)),Wc=Error(r(542)),Zc={then:function(){}};function op(t){return t=t.status,t==="fulfilled"||t==="rejected"}function cp(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(ts,ts),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,hp(t),t;default:if(typeof n.status=="string")n.then(ts,ts);else{if(t=it,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=l}},function(l){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,hp(t),t}throw Qr=n,za}}function Kr(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Qr=a,za):a}}var Qr=null;function up(){if(Qr===null)throw Error(r(459));var t=Qr;return Qr=null,t}function hp(t){if(t===za||t===Wc)throw Error(r(483))}var Ba=null,so=0;function Jc(t){var n=so;return so+=1,Ba===null&&(Ba=[]),cp(Ba,t,n)}function io(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function eu(t,n){throw n.$$typeof===R?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function dp(t){function n(L,O){if(t){var H=L.deletions;H===null?(L.deletions=[O],L.flags|=16):H.push(O)}}function a(L,O){if(!t)return null;for(;O!==null;)n(L,O),O=O.sibling;return null}function l(L){for(var O=new Map;L!==null;)L.key!==null?O.set(L.key,L):O.set(L.index,L),L=L.sibling;return O}function d(L,O){return L=$s(L,O),L.index=0,L.sibling=null,L}function f(L,O,H){return L.index=H,t?(H=L.alternate,H!==null?(H=H.index,H<O?(L.flags|=67108866,O):H):(L.flags|=67108866,O)):(L.flags|=1048576,O)}function x(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function T(L,O,H,J){return O===null||O.tag!==6?(O=ud(H,L.mode,J),O.return=L,O):(O=d(O,H),O.return=L,O)}function D(L,O,H,J){var we=H.type;return we===Q?$(L,O,H.props.children,J,H.key):O!==null&&(O.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===w&&Kr(we)===O.type)?(O=d(O,H.props),io(O,H),O.return=L,O):(O=Yc(H.type,H.key,H.props,null,L.mode,J),io(O,H),O.return=L,O)}function F(L,O,H,J){return O===null||O.tag!==4||O.stateNode.containerInfo!==H.containerInfo||O.stateNode.implementation!==H.implementation?(O=hd(H,L.mode,J),O.return=L,O):(O=d(O,H.children||[]),O.return=L,O)}function $(L,O,H,J,we){return O===null||O.tag!==7?(O=qr(H,L.mode,J,we),O.return=L,O):(O=d(O,H),O.return=L,O)}function te(L,O,H){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=ud(""+O,L.mode,H),O.return=L,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case q:return H=Yc(O.type,O.key,O.props,null,L.mode,H),io(H,O),H.return=L,H;case ee:return O=hd(O,L.mode,H),O.return=L,O;case w:return O=Kr(O),te(L,O,H)}if(oe(O)||M(O))return O=qr(O,L.mode,H,null),O.return=L,O;if(typeof O.then=="function")return te(L,Jc(O),H);if(O.$$typeof===pe)return te(L,$c(L,O),H);eu(L,O)}return null}function G(L,O,H,J){var we=O!==null?O.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return we!==null?null:T(L,O,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case q:return H.key===we?D(L,O,H,J):null;case ee:return H.key===we?F(L,O,H,J):null;case w:return H=Kr(H),G(L,O,H,J)}if(oe(H)||M(H))return we!==null?null:$(L,O,H,J,null);if(typeof H.then=="function")return G(L,O,Jc(H),J);if(H.$$typeof===pe)return G(L,O,$c(L,H),J);eu(L,H)}return null}function K(L,O,H,J,we){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(H)||null,T(O,L,""+J,we);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case q:return L=L.get(J.key===null?H:J.key)||null,D(O,L,J,we);case ee:return L=L.get(J.key===null?H:J.key)||null,F(O,L,J,we);case w:return J=Kr(J),K(L,O,H,J,we)}if(oe(J)||M(J))return L=L.get(H)||null,$(O,L,J,we,null);if(typeof J.then=="function")return K(L,O,H,Jc(J),we);if(J.$$typeof===pe)return K(L,O,H,$c(O,J),we);eu(O,J)}return null}function be(L,O,H,J){for(var we=null,Ye=null,_e=O,Me=O=0,ze=null;_e!==null&&Me<H.length;Me++){_e.index>Me?(ze=_e,_e=null):ze=_e.sibling;var Ke=G(L,_e,H[Me],J);if(Ke===null){_e===null&&(_e=ze);break}t&&_e&&Ke.alternate===null&&n(L,_e),O=f(Ke,O,Me),Ye===null?we=Ke:Ye.sibling=Ke,Ye=Ke,_e=ze}if(Me===H.length)return a(L,_e),Fe&&Xs(L,Me),we;if(_e===null){for(;Me<H.length;Me++)_e=te(L,H[Me],J),_e!==null&&(O=f(_e,O,Me),Ye===null?we=_e:Ye.sibling=_e,Ye=_e);return Fe&&Xs(L,Me),we}for(_e=l(_e);Me<H.length;Me++)ze=K(_e,L,Me,H[Me],J),ze!==null&&(t&&ze.alternate!==null&&_e.delete(ze.key===null?Me:ze.key),O=f(ze,O,Me),Ye===null?we=ze:Ye.sibling=ze,Ye=ze);return t&&_e.forEach(function(tr){return n(L,tr)}),Fe&&Xs(L,Me),we}function Se(L,O,H,J){if(H==null)throw Error(r(151));for(var we=null,Ye=null,_e=O,Me=O=0,ze=null,Ke=H.next();_e!==null&&!Ke.done;Me++,Ke=H.next()){_e.index>Me?(ze=_e,_e=null):ze=_e.sibling;var tr=G(L,_e,Ke.value,J);if(tr===null){_e===null&&(_e=ze);break}t&&_e&&tr.alternate===null&&n(L,_e),O=f(tr,O,Me),Ye===null?we=tr:Ye.sibling=tr,Ye=tr,_e=ze}if(Ke.done)return a(L,_e),Fe&&Xs(L,Me),we;if(_e===null){for(;!Ke.done;Me++,Ke=H.next())Ke=te(L,Ke.value,J),Ke!==null&&(O=f(Ke,O,Me),Ye===null?we=Ke:Ye.sibling=Ke,Ye=Ke);return Fe&&Xs(L,Me),we}for(_e=l(_e);!Ke.done;Me++,Ke=H.next())Ke=K(_e,L,Me,Ke.value,J),Ke!==null&&(t&&Ke.alternate!==null&&_e.delete(Ke.key===null?Me:Ke.key),O=f(Ke,O,Me),Ye===null?we=Ke:Ye.sibling=Ke,Ye=Ke);return t&&_e.forEach(function(q2){return n(L,q2)}),Fe&&Xs(L,Me),we}function st(L,O,H,J){if(typeof H=="object"&&H!==null&&H.type===Q&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case q:e:{for(var we=H.key;O!==null;){if(O.key===we){if(we=H.type,we===Q){if(O.tag===7){a(L,O.sibling),J=d(O,H.props.children),J.return=L,L=J;break e}}else if(O.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===w&&Kr(we)===O.type){a(L,O.sibling),J=d(O,H.props),io(J,H),J.return=L,L=J;break e}a(L,O);break}else n(L,O);O=O.sibling}H.type===Q?(J=qr(H.props.children,L.mode,J,H.key),J.return=L,L=J):(J=Yc(H.type,H.key,H.props,null,L.mode,J),io(J,H),J.return=L,L=J)}return x(L);case ee:e:{for(we=H.key;O!==null;){if(O.key===we)if(O.tag===4&&O.stateNode.containerInfo===H.containerInfo&&O.stateNode.implementation===H.implementation){a(L,O.sibling),J=d(O,H.children||[]),J.return=L,L=J;break e}else{a(L,O);break}else n(L,O);O=O.sibling}J=hd(H,L.mode,J),J.return=L,L=J}return x(L);case w:return H=Kr(H),st(L,O,H,J)}if(oe(H))return be(L,O,H,J);if(M(H)){if(we=M(H),typeof we!="function")throw Error(r(150));return H=we.call(H),Se(L,O,H,J)}if(typeof H.then=="function")return st(L,O,Jc(H),J);if(H.$$typeof===pe)return st(L,O,$c(L,H),J);eu(L,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,O!==null&&O.tag===6?(a(L,O.sibling),J=d(O,H),J.return=L,L=J):(a(L,O),J=ud(H,L.mode,J),J.return=L,L=J),x(L)):a(L,O)}return function(L,O,H,J){try{so=0;var we=st(L,O,H,J);return Ba=null,we}catch(_e){if(_e===za||_e===Wc)throw _e;var Ye=wn(29,_e,null,L.mode);return Ye.lanes=J,Ye.return=L,Ye}finally{}}}var $r=dp(!0),fp=dp(!1),Pi=!1;function Td(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ed(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ui(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function zi(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,($e&2)!==0){var d=l.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),l.pending=n,n=Gc(t),Xg(t,null,a),n}return Fc(t,l,n,a),Gc(t)}function ro(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,kl(t,a)}}function Sd(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=x:f=f.next=x,a=a.next}while(a!==null);f===null?d=f=n:f=f.next=n}else d=f=n;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Ad=!1;function ao(){if(Ad){var t=Ua;if(t!==null)throw t}}function lo(t,n,a,l){Ad=!1;var d=t.updateQueue;Pi=!1;var f=d.firstBaseUpdate,x=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var D=T,F=D.next;D.next=null,x===null?f=F:x.next=F,x=D;var $=t.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==x&&(T===null?$.firstBaseUpdate=F:T.next=F,$.lastBaseUpdate=D))}if(f!==null){var te=d.baseState;x=0,$=F=D=null,T=f;do{var G=T.lane&-536870913,K=G!==T.lane;if(K?(Ue&G)===G:(l&G)===G){G!==0&&G===Pa&&(Ad=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var be=t,Se=T;G=n;var st=a;switch(Se.tag){case 1:if(be=Se.payload,typeof be=="function"){te=be.call(st,te,G);break e}te=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Se.payload,G=typeof be=="function"?be.call(st,te,G):be,G==null)break e;te=S({},te,G);break e;case 2:Pi=!0}}G=T.callback,G!==null&&(t.flags|=64,K&&(t.flags|=8192),K=d.callbacks,K===null?d.callbacks=[G]:K.push(G))}else K={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(F=$=K,D=te):$=$.next=K,x|=G;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;K=T,T=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);$===null&&(D=te),d.baseState=D,d.firstBaseUpdate=F,d.lastBaseUpdate=$,f===null&&(d.shared.lanes=0),Gi|=x,t.lanes=x,t.memoizedState=te}}function mp(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function gp(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)mp(a[t],n)}var qa=C(null),tu=C(0);function pp(t,n){t=li,ne(tu,t),ne(qa,n),li=t|n.baseLanes}function Nd(){ne(tu,li),ne(qa,qa.current)}function Cd(){li=tu.current,z(qa),z(tu)}var Tn=C(null),Bn=null;function Bi(t){var n=t.alternate;ne(xt,xt.current&1),ne(Tn,t),Bn===null&&(n===null||qa.current!==null||n.memoizedState!==null)&&(Bn=t)}function Rd(t){ne(xt,xt.current),ne(Tn,t),Bn===null&&(Bn=t)}function yp(t){t.tag===22?(ne(xt,xt.current),ne(Tn,t),Bn===null&&(Bn=t)):qi()}function qi(){ne(xt,xt.current),ne(Tn,Tn.current)}function En(t){z(Tn),Bn===t&&(Bn=null),z(xt)}var xt=C(0);function nu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Vf(a)||Lf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Js=0,Oe=null,tt=null,Ct=null,su=!1,Ha=!1,Xr=!1,iu=0,oo=0,Fa=null,k1=0;function gt(){throw Error(r(321))}function jd(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!_n(t[a],n[a]))return!1;return!0}function Id(t,n,a,l,d,f){return Js=f,Oe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,U.H=t===null||t.memoizedState===null?e0:Yd,Xr=!1,f=a(l,d),Xr=!1,Ha&&(f=xp(n,a,l,d)),vp(t),f}function vp(t){U.H=ho;var n=tt!==null&&tt.next!==null;if(Js=0,Ct=tt=Oe=null,su=!1,oo=0,Fa=null,n)throw Error(r(300));t===null||Rt||(t=t.dependencies,t!==null&&Qc(t)&&(Rt=!0))}function xp(t,n,a,l){Oe=t;var d=0;do{if(Ha&&(Fa=null),oo=0,Ha=!1,25<=d)throw Error(r(301));if(d+=1,Ct=tt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}U.H=t0,f=n(a,l)}while(Ha);return f}function D1(){var t=U.H,n=t.useState()[0];return n=typeof n.then=="function"?co(n):n,t=t.useState()[0],(tt!==null?tt.memoizedState:null)!==t&&(Oe.flags|=1024),n}function kd(){var t=iu!==0;return iu=0,t}function Dd(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Od(t){if(su){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}su=!1}Js=0,Ct=tt=Oe=null,Ha=!1,oo=iu=0,Fa=null}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Oe.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function bt(){if(tt===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var n=Ct===null?Oe.memoizedState:Ct.next;if(n!==null)Ct=n,tt=t;else{if(t===null)throw Oe.alternate===null?Error(r(467)):Error(r(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Ct===null?Oe.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function ru(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function co(t){var n=oo;return oo+=1,Fa===null&&(Fa=[]),t=cp(Fa,t,n),n=Oe,(Ct===null?n.memoizedState:Ct.next)===null&&(n=n.alternate,U.H=n===null||n.memoizedState===null?e0:Yd),t}function au(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return co(t);if(t.$$typeof===pe)return Yt(t)}throw Error(r(438,String(t)))}function Md(t){var n=null,a=Oe.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=ru(),Oe.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=k;return n.index++,a}function ei(t,n){return typeof n=="function"?n(t):n}function lu(t){var n=bt();return Vd(n,tt,t)}function Vd(t,n,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=t.baseQueue,f=l.pending;if(f!==null){if(d!==null){var x=d.next;d.next=f.next,f.next=x}n.baseQueue=d=f,l.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{n=d.next;var T=x=null,D=null,F=n,$=!1;do{var te=F.lane&-536870913;if(te!==F.lane?(Ue&te)===te:(Js&te)===te){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),te===Pa&&($=!0);else if((Js&G)===G){F=F.next,G===Pa&&($=!0);continue}else te={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=te,x=f):D=D.next=te,Oe.lanes|=G,Gi|=G;te=F.action,Xr&&a(f,te),f=F.hasEagerState?F.eagerState:a(f,te)}else G={lane:te,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=G,x=f):D=D.next=G,Oe.lanes|=te,Gi|=te;F=F.next}while(F!==null&&F!==n);if(D===null?x=f:D.next=T,!_n(f,t.memoizedState)&&(Rt=!0,$&&(a=Ua,a!==null)))throw a;t.memoizedState=f,t.baseState=x,t.baseQueue=D,l.lastRenderedState=f}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ld(t){var n=bt(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,f=n.memoizedState;if(d!==null){a.pending=null;var x=d=d.next;do f=t(f,x.action),x=x.next;while(x!==d);_n(f,n.memoizedState)||(Rt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,l]}function bp(t,n,a){var l=Oe,d=bt(),f=Fe;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=n();var x=!_n((tt||d).memoizedState,a);if(x&&(d.memoizedState=a,Rt=!0),d=d.queue,zd(Tp.bind(null,l,d,t),[t]),d.getSnapshot!==n||x||Ct!==null&&Ct.memoizedState.tag&1){if(l.flags|=2048,Ga(9,{destroy:void 0},wp.bind(null,l,d,a,n),null),it===null)throw Error(r(349));f||(Js&127)!==0||_p(l,n,a)}return a}function _p(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Oe.updateQueue,n===null?(n=ru(),Oe.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function wp(t,n,a,l){n.value=a,n.getSnapshot=l,Ep(n)&&Sp(t)}function Tp(t,n,a){return a(function(){Ep(n)&&Sp(t)})}function Ep(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!_n(t,a)}catch{return!0}}function Sp(t){var n=Br(t,2);n!==null&&pn(n,t,2)}function Pd(t){var n=on();if(typeof t=="function"){var a=t;if(t=a(),Xr){In(!0);try{a()}finally{In(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:t},n}function Ap(t,n,a,l){return t.baseState=a,Vd(t,tt,typeof l=="function"?l:ei)}function O1(t,n,a,l,d){if(uu(t))throw Error(r(485));if(t=n.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){f.listeners.push(x)}};U.T!==null?a(!0):f.isTransition=!1,l(f),a=n.pending,a===null?(f.next=n.pending=f,Np(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Np(t,n){var a=n.action,l=n.payload,d=t.state;if(n.isTransition){var f=U.T,x={};U.T=x;try{var T=a(d,l),D=U.S;D!==null&&D(x,T),Cp(t,n,T)}catch(F){Ud(t,n,F)}finally{f!==null&&x.types!==null&&(f.types=x.types),U.T=f}}else try{f=a(d,l),Cp(t,n,f)}catch(F){Ud(t,n,F)}}function Cp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Rp(t,n,l)},function(l){return Ud(t,n,l)}):Rp(t,n,a)}function Rp(t,n,a){n.status="fulfilled",n.value=a,jp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Np(t,a)))}function Ud(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,jp(n),n=n.next;while(n!==l)}t.action=null}function jp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Ip(t,n){return n}function kp(t,n){if(Fe){var a=it.formState;if(a!==null){e:{var l=Oe;if(Fe){if(lt){t:{for(var d=lt,f=zn;d.nodeType!==8;){if(!f){d=null;break t}if(d=qn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){lt=qn(d.nextSibling),l=d.data==="F!";break e}}Vi(l)}l=!1}l&&(n=a[0])}}return a=on(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ip,lastRenderedState:n},a.queue=l,a=Wp.bind(null,Oe,l),l.dispatch=a,l=Pd(!1),f=Gd.bind(null,Oe,!1,l.queue),l=on(),d={state:n,dispatch:null,action:t,pending:null},l.queue=d,a=O1.bind(null,Oe,d,f,a),d.dispatch=a,l.memoizedState=t,[n,a,!1]}function Dp(t){var n=bt();return Op(n,tt,t)}function Op(t,n,a){if(n=Vd(t,n,Ip)[0],t=lu(ei)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=co(n)}catch(x){throw x===za?Wc:x}else l=n;n=bt();var d=n.queue,f=d.dispatch;return a!==n.memoizedState&&(Oe.flags|=2048,Ga(9,{destroy:void 0},M1.bind(null,d,a),null)),[l,f,t]}function M1(t,n){t.action=n}function Mp(t){var n=bt(),a=tt;if(a!==null)return Op(n,a,t);bt(),n=n.memoizedState,a=bt();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function Ga(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=Oe.updateQueue,n===null&&(n=ru(),Oe.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Vp(){return bt().memoizedState}function ou(t,n,a,l){var d=on();Oe.flags|=t,d.memoizedState=Ga(1|n,{destroy:void 0},a,l===void 0?null:l)}function cu(t,n,a,l){var d=bt();l=l===void 0?null:l;var f=d.memoizedState.inst;tt!==null&&l!==null&&jd(l,tt.memoizedState.deps)?d.memoizedState=Ga(n,f,a,l):(Oe.flags|=t,d.memoizedState=Ga(1|n,f,a,l))}function Lp(t,n){ou(8390656,8,t,n)}function zd(t,n){cu(2048,8,t,n)}function V1(t){Oe.flags|=4;var n=Oe.updateQueue;if(n===null)n=ru(),Oe.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Pp(t){var n=bt().memoizedState;return V1({ref:n,nextImpl:t}),function(){if(($e&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function Up(t,n){return cu(4,2,t,n)}function zp(t,n){return cu(4,4,t,n)}function Bp(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function qp(t,n,a){a=a!=null?a.concat([t]):null,cu(4,4,Bp.bind(null,n,t),a)}function Bd(){}function Hp(t,n){var a=bt();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&jd(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function Fp(t,n){var a=bt();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&jd(n,l[1]))return l[0];if(l=t(),Xr){In(!0);try{t()}finally{In(!1)}}return a.memoizedState=[l,n],l}function qd(t,n,a){return a===void 0||(Js&1073741824)!==0&&(Ue&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=G0(),Oe.lanes|=t,Gi|=t,a)}function Gp(t,n,a,l){return _n(a,n)?a:qa.current!==null?(t=qd(t,a,l),_n(t,n)||(Rt=!0),t):(Js&42)===0||(Js&1073741824)!==0&&(Ue&261930)===0?(Rt=!0,t.memoizedState=a):(t=G0(),Oe.lanes|=t,Gi|=t,n)}function Yp(t,n,a,l,d){var f=W.p;W.p=f!==0&&8>f?f:8;var x=U.T,T={};U.T=T,Gd(t,!1,n,a);try{var D=d(),F=U.S;if(F!==null&&F(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=I1(D,l);uo(t,n,$,Nn(t))}else uo(t,n,l,Nn(t))}catch(te){uo(t,n,{then:function(){},status:"rejected",reason:te},Nn())}finally{W.p=f,x!==null&&T.types!==null&&(x.types=T.types),U.T=x}}function L1(){}function Hd(t,n,a,l){if(t.tag!==5)throw Error(r(476));var d=Kp(t).queue;Yp(t,d,n,V,a===null?L1:function(){return Qp(t),a(l)})}function Kp(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:V},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Qp(t){var n=Kp(t);n.next===null&&(n=t.alternate.memoizedState),uo(t,n.next.queue,{},Nn())}function Fd(){return Yt(Co)}function $p(){return bt().memoizedState}function Xp(){return bt().memoizedState}function P1(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Nn();t=Ui(a);var l=zi(n,t,a);l!==null&&(pn(l,n,a),ro(l,n,a)),n={cache:xd()},t.payload=n;return}n=n.return}}function U1(t,n,a){var l=Nn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},uu(t)?Zp(n,a):(a=od(t,n,a,l),a!==null&&(pn(a,t,l),Jp(a,n,l)))}function Wp(t,n,a){var l=Nn();uo(t,n,a,l)}function uo(t,n,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(uu(t))Zp(n,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var x=n.lastRenderedState,T=f(x,a);if(d.hasEagerState=!0,d.eagerState=T,_n(T,x))return Fc(t,n,d,0),it===null&&Hc(),!1}catch{}finally{}if(a=od(t,n,d,l),a!==null)return pn(a,t,l),Jp(a,n,l),!0}return!1}function Gd(t,n,a,l){if(l={lane:2,revertLane:Ef(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},uu(t)){if(n)throw Error(r(479))}else n=od(t,a,l,2),n!==null&&pn(n,t,2)}function uu(t){var n=t.alternate;return t===Oe||n!==null&&n===Oe}function Zp(t,n){Ha=su=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function Jp(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,kl(t,a)}}var ho={readContext:Yt,use:au,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};ho.useEffectEvent=gt;var e0={readContext:Yt,use:au,useCallback:function(t,n){return on().memoizedState=[t,n===void 0?null:n],t},useContext:Yt,useEffect:Lp,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,ou(4194308,4,Bp.bind(null,n,t),a)},useLayoutEffect:function(t,n){return ou(4194308,4,t,n)},useInsertionEffect:function(t,n){ou(4,2,t,n)},useMemo:function(t,n){var a=on();n=n===void 0?null:n;var l=t();if(Xr){In(!0);try{t()}finally{In(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=on();if(a!==void 0){var d=a(n);if(Xr){In(!0);try{a(n)}finally{In(!1)}}}else d=n;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=U1.bind(null,Oe,t),[l.memoizedState,t]},useRef:function(t){var n=on();return t={current:t},n.memoizedState=t},useState:function(t){t=Pd(t);var n=t.queue,a=Wp.bind(null,Oe,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Bd,useDeferredValue:function(t,n){var a=on();return qd(a,t,n)},useTransition:function(){var t=Pd(!1);return t=Yp.bind(null,Oe,t.queue,!0,!1),on().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=Oe,d=on();if(Fe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),it===null)throw Error(r(349));(Ue&127)!==0||_p(l,n,a)}d.memoizedState=a;var f={value:a,getSnapshot:n};return d.queue=f,Lp(Tp.bind(null,l,f,t),[t]),l.flags|=2048,Ga(9,{destroy:void 0},wp.bind(null,l,f,a,n),null),a},useId:function(){var t=on(),n=it.identifierPrefix;if(Fe){var a=Is,l=js;a=(l&~(1<<32-yt(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=iu++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=k1++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Fd,useFormState:kp,useActionState:kp,useOptimistic:function(t){var n=on();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Gd.bind(null,Oe,!0,a),a.dispatch=n,[t,n]},useMemoCache:Md,useCacheRefresh:function(){return on().memoizedState=P1.bind(null,Oe)},useEffectEvent:function(t){var n=on(),a={impl:t};return n.memoizedState=a,function(){if(($e&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Yd={readContext:Yt,use:au,useCallback:Hp,useContext:Yt,useEffect:zd,useImperativeHandle:qp,useInsertionEffect:Up,useLayoutEffect:zp,useMemo:Fp,useReducer:lu,useRef:Vp,useState:function(){return lu(ei)},useDebugValue:Bd,useDeferredValue:function(t,n){var a=bt();return Gp(a,tt.memoizedState,t,n)},useTransition:function(){var t=lu(ei)[0],n=bt().memoizedState;return[typeof t=="boolean"?t:co(t),n]},useSyncExternalStore:bp,useId:$p,useHostTransitionStatus:Fd,useFormState:Dp,useActionState:Dp,useOptimistic:function(t,n){var a=bt();return Ap(a,tt,t,n)},useMemoCache:Md,useCacheRefresh:Xp};Yd.useEffectEvent=Pp;var t0={readContext:Yt,use:au,useCallback:Hp,useContext:Yt,useEffect:zd,useImperativeHandle:qp,useInsertionEffect:Up,useLayoutEffect:zp,useMemo:Fp,useReducer:Ld,useRef:Vp,useState:function(){return Ld(ei)},useDebugValue:Bd,useDeferredValue:function(t,n){var a=bt();return tt===null?qd(a,t,n):Gp(a,tt.memoizedState,t,n)},useTransition:function(){var t=Ld(ei)[0],n=bt().memoizedState;return[typeof t=="boolean"?t:co(t),n]},useSyncExternalStore:bp,useId:$p,useHostTransitionStatus:Fd,useFormState:Mp,useActionState:Mp,useOptimistic:function(t,n){var a=bt();return tt!==null?Ap(a,tt,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Md,useCacheRefresh:Xp};t0.useEffectEvent=Pp;function Kd(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:S({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Qd={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Nn(),d=Ui(l);d.payload=n,a!=null&&(d.callback=a),n=zi(t,d,l),n!==null&&(pn(n,t,l),ro(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Nn(),d=Ui(l);d.tag=1,d.payload=n,a!=null&&(d.callback=a),n=zi(t,d,l),n!==null&&(pn(n,t,l),ro(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Nn(),l=Ui(a);l.tag=2,n!=null&&(l.callback=n),n=zi(t,l,a),n!==null&&(pn(n,t,a),ro(n,t,a))}};function n0(t,n,a,l,d,f,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,x):n.prototype&&n.prototype.isPureReactComponent?!Wl(a,l)||!Wl(d,f):!0}function s0(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&Qd.enqueueReplaceState(n,n.state,null)}function Wr(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=S({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function i0(t){qc(t)}function r0(t){console.error(t)}function a0(t){qc(t)}function hu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function l0(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function $d(t,n,a){return a=Ui(a),a.tag=3,a.payload={element:null},a.callback=function(){hu(t,n)},a}function o0(t){return t=Ui(t),t.tag=3,t}function c0(t,n,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;t.payload=function(){return d(f)},t.callback=function(){l0(n,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){l0(n,a,l),typeof d!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function z1(t,n,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&La(n,a,d,!0),a=Tn.current,a!==null){switch(a.tag){case 31:case 13:return Bn===null?Tu():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Zc?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),_f(t,l,d)),!1;case 22:return a.flags|=65536,l===Zc?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),_f(t,l,d)),!1}throw Error(r(435,a.tag))}return _f(t,l,d),Tu(),!1}if(Fe)return n=Tn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,l!==md&&(t=Error(r(422),{cause:l}),eo(Ln(t,a)))):(l!==md&&(n=Error(r(423),{cause:l}),eo(Ln(n,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Ln(l,a),d=$d(t.stateNode,l,d),Sd(t,d),pt!==4&&(pt=2)),!1;var f=Error(r(520),{cause:l});if(f=Ln(f,a),bo===null?bo=[f]:bo.push(f),pt!==4&&(pt=2),n===null)return!0;l=Ln(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=$d(a.stateNode,l,t),Sd(a,t),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Yi===null||!Yi.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=o0(d),c0(d,t,a,l),Sd(a,d),!1}a=a.return}while(a!==null);return!1}var Xd=Error(r(461)),Rt=!1;function Kt(t,n,a,l){n.child=t===null?fp(n,null,a,l):$r(n,t.child,a,l)}function u0(t,n,a,l,d){a=a.render;var f=n.ref;if("ref"in l){var x={};for(var T in l)T!=="ref"&&(x[T]=l[T])}else x=l;return Gr(n),l=Id(t,n,a,x,f,d),T=kd(),t!==null&&!Rt?(Dd(t,n,d),ti(t,n,d)):(Fe&&T&&dd(n),n.flags|=1,Kt(t,n,l,d),n.child)}function h0(t,n,a,l,d){if(t===null){var f=a.type;return typeof f=="function"&&!cd(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,d0(t,n,f,l,d)):(t=Yc(a.type,null,l,n,n.mode,d),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!rf(t,d)){var x=f.memoizedProps;if(a=a.compare,a=a!==null?a:Wl,a(x,l)&&t.ref===n.ref)return ti(t,n,d)}return n.flags|=1,t=$s(f,l),t.ref=n.ref,t.return=n,n.child=t}function d0(t,n,a,l,d){if(t!==null){var f=t.memoizedProps;if(Wl(f,l)&&t.ref===n.ref)if(Rt=!1,n.pendingProps=l=f,rf(t,d))(t.flags&131072)!==0&&(Rt=!0);else return n.lanes=t.lanes,ti(t,n,d)}return Wd(t,n,a,l,d)}function f0(t,n,a,l){var d=l.children,f=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=n.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,n.child=null;return m0(t,n,f,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Xc(n,f!==null?f.cachePool:null),f!==null?pp(n,f):Nd(),yp(n);else return l=n.lanes=536870912,m0(t,n,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(Xc(n,f.cachePool),pp(n,f),qi(),n.memoizedState=null):(t!==null&&Xc(n,null),Nd(),qi());return Kt(t,n,d,a),n.child}function fo(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function m0(t,n,a,l,d){var f=_d();return f=f===null?null:{parent:Nt._currentValue,pool:f},n.memoizedState={baseLanes:a,cachePool:f},t!==null&&Xc(n,null),Nd(),yp(n),t!==null&&La(t,n,l,!0),n.childLanes=d,null}function du(t,n){return n=mu({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function g0(t,n,a){return $r(n,t.child,null,a),t=du(n,n.pendingProps),t.flags|=2,En(n),n.memoizedState=null,t}function B1(t,n,a){var l=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(Fe){if(l.mode==="hidden")return t=du(n,l),n.lanes=536870912,fo(null,t);if(Rd(n),(t=lt)?(t=Ny(t,zn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Oi!==null?{id:js,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},a=Zg(t),a.return=n,n.child=a,Gt=n,lt=null)):t=null,t===null)throw Vi(n);return n.lanes=536870912,null}return du(n,l)}var f=t.memoizedState;if(f!==null){var x=f.dehydrated;if(Rd(n),d)if(n.flags&256)n.flags&=-257,n=g0(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(r(558));else if(Rt||La(t,n,a,!1),d=(a&t.childLanes)!==0,Rt||d){if(l=it,l!==null&&(x=Dl(l,a),x!==0&&x!==f.retryLane))throw f.retryLane=x,Br(t,x),pn(l,t,x),Xd;Tu(),n=g0(t,n,a)}else t=f.treeContext,lt=qn(x.nextSibling),Gt=n,Fe=!0,Mi=null,zn=!1,t!==null&&tp(n,t),n=du(n,l),n.flags|=4096;return n}return t=$s(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function fu(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function Wd(t,n,a,l,d){return Gr(n),a=Id(t,n,a,l,void 0,d),l=kd(),t!==null&&!Rt?(Dd(t,n,d),ti(t,n,d)):(Fe&&l&&dd(n),n.flags|=1,Kt(t,n,a,d),n.child)}function p0(t,n,a,l,d,f){return Gr(n),n.updateQueue=null,a=xp(n,l,a,d),vp(t),l=kd(),t!==null&&!Rt?(Dd(t,n,f),ti(t,n,f)):(Fe&&l&&dd(n),n.flags|=1,Kt(t,n,a,f),n.child)}function y0(t,n,a,l,d){if(Gr(n),n.stateNode===null){var f=Da,x=a.contextType;typeof x=="object"&&x!==null&&(f=Yt(x)),f=new a(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Qd,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},Td(n),x=a.contextType,f.context=typeof x=="object"&&x!==null?Yt(x):Da,f.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(Kd(n,a,x,l),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(x=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),x!==f.state&&Qd.enqueueReplaceState(f,f.state,null),lo(n,l,f,d),ao(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){f=n.stateNode;var T=n.memoizedProps,D=Wr(a,T);f.props=D;var F=f.context,$=a.contextType;x=Da,typeof $=="object"&&$!==null&&(x=Yt($));var te=a.getDerivedStateFromProps;$=typeof te=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||F!==x)&&s0(n,f,l,x),Pi=!1;var G=n.memoizedState;f.state=G,lo(n,l,f,d),ao(),F=n.memoizedState,T||G!==F||Pi?(typeof te=="function"&&(Kd(n,a,te,l),F=n.memoizedState),(D=Pi||n0(n,a,D,l,G,F,x))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=F),f.props=l,f.state=F,f.context=x,l=D):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,Ed(t,n),x=n.memoizedProps,$=Wr(a,x),f.props=$,te=n.pendingProps,G=f.context,F=a.contextType,D=Da,typeof F=="object"&&F!==null&&(D=Yt(F)),T=a.getDerivedStateFromProps,(F=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==te||G!==D)&&s0(n,f,l,D),Pi=!1,G=n.memoizedState,f.state=G,lo(n,l,f,d),ao();var K=n.memoizedState;x!==te||G!==K||Pi||t!==null&&t.dependencies!==null&&Qc(t.dependencies)?(typeof T=="function"&&(Kd(n,a,T,l),K=n.memoizedState),($=Pi||n0(n,a,$,l,G,K,D)||t!==null&&t.dependencies!==null&&Qc(t.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,K,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,K,D)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=K),f.props=l,f.state=K,f.context=D,l=$):(typeof f.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),l=!1)}return f=l,fu(t,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&l?(n.child=$r(n,t.child,null,d),n.child=$r(n,null,a,d)):Kt(t,n,a,d),n.memoizedState=f.state,t=n.child):t=ti(t,n,d),t}function v0(t,n,a,l){return Hr(),n.flags|=256,Kt(t,n,a,l),n.child}var Zd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jd(t){return{baseLanes:t,cachePool:lp()}}function ef(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=An),t}function x0(t,n,a){var l=n.pendingProps,d=!1,f=(n.flags&128)!==0,x;if((x=f)||(x=t!==null&&t.memoizedState===null?!1:(xt.current&2)!==0),x&&(d=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,t===null){if(Fe){if(d?Bi(n):qi(),(t=lt)?(t=Ny(t,zn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Oi!==null?{id:js,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},a=Zg(t),a.return=n,n.child=a,Gt=n,lt=null)):t=null,t===null)throw Vi(n);return Lf(t)?n.lanes=32:n.lanes=536870912,null}var T=l.children;return l=l.fallback,d?(qi(),d=n.mode,T=mu({mode:"hidden",children:T},d),l=qr(l,d,a,null),T.return=n,l.return=n,T.sibling=l,n.child=T,l=n.child,l.memoizedState=Jd(a),l.childLanes=ef(t,x,a),n.memoizedState=Zd,fo(null,l)):(Bi(n),tf(n,T))}var D=t.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(f)n.flags&256?(Bi(n),n.flags&=-257,n=nf(t,n,a)):n.memoizedState!==null?(qi(),n.child=t.child,n.flags|=128,n=null):(qi(),T=l.fallback,d=n.mode,l=mu({mode:"visible",children:l.children},d),T=qr(T,d,a,null),T.flags|=2,l.return=n,T.return=n,l.sibling=T,n.child=l,$r(n,t.child,null,a),l=n.child,l.memoizedState=Jd(a),l.childLanes=ef(t,x,a),n.memoizedState=Zd,n=fo(null,l));else if(Bi(n),Lf(T)){if(x=T.nextSibling&&T.nextSibling.dataset,x)var F=x.dgst;x=F,l=Error(r(419)),l.stack="",l.digest=x,eo({value:l,source:null,stack:null}),n=nf(t,n,a)}else if(Rt||La(t,n,a,!1),x=(a&t.childLanes)!==0,Rt||x){if(x=it,x!==null&&(l=Dl(x,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,Br(t,l),pn(x,t,l),Xd;Vf(T)||Tu(),n=nf(t,n,a)}else Vf(T)?(n.flags|=192,n.child=t.child,n=null):(t=D.treeContext,lt=qn(T.nextSibling),Gt=n,Fe=!0,Mi=null,zn=!1,t!==null&&tp(n,t),n=tf(n,l.children),n.flags|=4096);return n}return d?(qi(),T=l.fallback,d=n.mode,D=t.child,F=D.sibling,l=$s(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?T=$s(F,T):(T=qr(T,d,a,null),T.flags|=2),T.return=n,l.return=n,l.sibling=T,n.child=l,fo(null,l),l=n.child,T=t.child.memoizedState,T===null?T=Jd(a):(d=T.cachePool,d!==null?(D=Nt._currentValue,d=d.parent!==D?{parent:D,pool:D}:d):d=lp(),T={baseLanes:T.baseLanes|a,cachePool:d}),l.memoizedState=T,l.childLanes=ef(t,x,a),n.memoizedState=Zd,fo(t.child,l)):(Bi(n),a=t.child,t=a.sibling,a=$s(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(x=n.deletions,x===null?(n.deletions=[t],n.flags|=16):x.push(t)),n.child=a,n.memoizedState=null,a)}function tf(t,n){return n=mu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function mu(t,n){return t=wn(22,t,null,n),t.lanes=0,t}function nf(t,n,a){return $r(n,t.child,null,a),t=tf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function b0(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),yd(t.return,n,a)}function sf(t,n,a,l,d,f){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:f}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=d,x.treeForkCount=f)}function _0(t,n,a){var l=n.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var x=xt.current,T=(x&2)!==0;if(T?(x=x&1|2,n.flags|=128):x&=1,ne(xt,x),Kt(t,n,l,a),l=Fe?Jl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&b0(t,a,n);else if(t.tag===19)b0(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=n.child,d=null;a!==null;)t=a.alternate,t!==null&&nu(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=n.child,n.child=null):(d=a.sibling,a.sibling=null),sf(n,!1,d,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=n.child,n.child=null;d!==null;){if(t=d.alternate,t!==null&&nu(t)===null){n.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}sf(n,!0,a,null,f,l);break;case"together":sf(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function ti(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),Gi|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(La(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=$s(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=$s(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function rf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Qc(t)))}function q1(t,n,a){switch(n.tag){case 3:Ee(n,n.stateNode.containerInfo),Li(n,Nt,t.memoizedState.cache),Hr();break;case 27:case 5:rt(n);break;case 4:Ee(n,n.stateNode.containerInfo);break;case 10:Li(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Rd(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Bi(n),n.flags|=128,null):(a&n.child.childLanes)!==0?x0(t,n,a):(Bi(n),t=ti(t,n,a),t!==null?t.sibling:null);Bi(n);break;case 19:var d=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(La(t,n,a,!1),l=(a&n.childLanes)!==0),d){if(l)return _0(t,n,a);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ne(xt,xt.current),l)break;return null;case 22:return n.lanes=0,f0(t,n,a,n.pendingProps);case 24:Li(n,Nt,t.memoizedState.cache)}return ti(t,n,a)}function w0(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Rt=!0;else{if(!rf(t,a)&&(n.flags&128)===0)return Rt=!1,q1(t,n,a);Rt=(t.flags&131072)!==0}else Rt=!1,Fe&&(n.flags&1048576)!==0&&ep(n,Jl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=Kr(n.elementType),n.type=t,typeof t=="function")cd(t)?(l=Wr(t,l),n.tag=1,n=y0(null,n,t,l,a)):(n.tag=0,n=Wd(null,n,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===ue){n.tag=11,n=u0(null,n,t,l,a);break e}else if(d===j){n.tag=14,n=h0(null,n,t,l,a);break e}}throw n=le(t)||t,Error(r(306,n,""))}}return n;case 0:return Wd(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,d=Wr(l,n.pendingProps),y0(t,n,l,d,a);case 3:e:{if(Ee(n,n.stateNode.containerInfo),t===null)throw Error(r(387));l=n.pendingProps;var f=n.memoizedState;d=f.element,Ed(t,n),lo(n,l,null,a);var x=n.memoizedState;if(l=x.cache,Li(n,Nt,l),l!==f.cache&&vd(n,[Nt],a,!0),ao(),l=x.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=v0(t,n,l,a);break e}else if(l!==d){d=Ln(Error(r(424)),n),eo(d),n=v0(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(lt=qn(t.firstChild),Gt=n,Fe=!0,Mi=null,zn=!0,a=fp(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Hr(),l===d){n=ti(t,n,a);break e}Kt(t,n,l,a)}n=n.child}return n;case 26:return fu(t,n),t===null?(a=Dy(n.type,null,n.pendingProps,null))?n.memoizedState=a:Fe||(a=n.type,t=n.pendingProps,l=ju(X.current).createElement(a),l[Et]=n,l[Pt]=t,Qt(l,a,t),St(l),n.stateNode=l):n.memoizedState=Dy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return rt(n),t===null&&Fe&&(l=n.stateNode=jy(n.type,n.pendingProps,X.current),Gt=n,zn=!0,d=lt,Xi(n.type)?(Pf=d,lt=qn(l.firstChild)):lt=d),Kt(t,n,n.pendingProps.children,a),fu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Fe&&((d=l=lt)&&(l=v2(l,n.type,n.pendingProps,zn),l!==null?(n.stateNode=l,Gt=n,lt=qn(l.firstChild),zn=!1,d=!0):d=!1),d||Vi(n)),rt(n),d=n.type,f=n.pendingProps,x=t!==null?t.memoizedProps:null,l=f.children,Df(d,f)?l=null:x!==null&&Df(d,x)&&(n.flags|=32),n.memoizedState!==null&&(d=Id(t,n,D1,null,null,a),Co._currentValue=d),fu(t,n),Kt(t,n,l,a),n.child;case 6:return t===null&&Fe&&((t=a=lt)&&(a=x2(a,n.pendingProps,zn),a!==null?(n.stateNode=a,Gt=n,lt=null,t=!0):t=!1),t||Vi(n)),null;case 13:return x0(t,n,a);case 4:return Ee(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=$r(n,null,l,a):Kt(t,n,l,a),n.child;case 11:return u0(t,n,n.type,n.pendingProps,a);case 7:return Kt(t,n,n.pendingProps,a),n.child;case 8:return Kt(t,n,n.pendingProps.children,a),n.child;case 12:return Kt(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,Li(n,n.type,l.value),Kt(t,n,l.children,a),n.child;case 9:return d=n.type._context,l=n.pendingProps.children,Gr(n),d=Yt(d),l=l(d),n.flags|=1,Kt(t,n,l,a),n.child;case 14:return h0(t,n,n.type,n.pendingProps,a);case 15:return d0(t,n,n.type,n.pendingProps,a);case 19:return _0(t,n,a);case 31:return B1(t,n,a);case 22:return f0(t,n,a,n.pendingProps);case 24:return Gr(n),l=Yt(Nt),t===null?(d=_d(),d===null&&(d=it,f=xd(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),n.memoizedState={parent:l,cache:d},Td(n),Li(n,Nt,d)):((t.lanes&a)!==0&&(Ed(t,n),lo(n,null,null,a),ao()),d=t.memoizedState,f=n.memoizedState,d.parent!==l?(d={parent:l,cache:l},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),Li(n,Nt,l)):(l=f.cache,Li(n,Nt,l),l!==d.cache&&vd(n,[Nt],a,!0))),Kt(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function ni(t){t.flags|=4}function af(t,n,a,l,d){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if($0())t.flags|=8192;else throw Qr=Zc,wd}else t.flags&=-16777217}function T0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Py(n))if($0())t.flags|=8192;else throw Qr=Zc,wd}function gu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?_c():536870912,t.lanes|=n,$a|=n)}function mo(t,n){if(!Fe)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ot(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function H1(t,n,a){var l=n.pendingProps;switch(fd(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(n),null;case 1:return ot(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Zs(Nt),Re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Va(n)?ni(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,gd())),ot(n),null;case 26:var d=n.type,f=n.memoizedState;return t===null?(ni(n),f!==null?(ot(n),T0(n,f)):(ot(n),af(n,d,null,l,a))):f?f!==t.memoizedState?(ni(n),ot(n),T0(n,f)):(ot(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&ni(n),ot(n),af(n,d,t,l,a)),null;case 27:if(qt(n),a=X.current,d=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&ni(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return ot(n),null}t=ae.current,Va(n)?np(n):(t=jy(d,l,a),n.stateNode=t,ni(n))}return ot(n),null;case 5:if(qt(n),d=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&ni(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return ot(n),null}if(f=ae.current,Va(n))np(n);else{var x=ju(X.current);switch(f){case 1:f=x.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=x.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=x.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?x.createElement(d,{is:l.is}):x.createElement(d)}}f[Et]=n,f[Pt]=l;e:for(x=n.child;x!==null;){if(x.tag===5||x.tag===6)f.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===n)break e;for(;x.sibling===null;){if(x.return===null||x.return===n)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}n.stateNode=f;e:switch(Qt(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ni(n)}}return ot(n),af(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&ni(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(t=X.current,Va(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,d=Gt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[Et]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||xy(t.nodeValue,a)),t||Vi(n,!0)}else t=ju(t).createTextNode(l),t[Et]=n,n.stateNode=t}return ot(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Va(n),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Et]=n}else Hr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ot(n),t=!1}else a=gd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(En(n),n):(En(n),null);if((n.flags&128)!==0)throw Error(r(558))}return ot(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Va(n),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Et]=n}else Hr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ot(n),d=!1}else d=gd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(En(n),n):(En(n),null)}return En(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),gu(n,n.updateQueue),ot(n),null);case 4:return Re(),t===null&&Cf(n.stateNode.containerInfo),ot(n),null;case 10:return Zs(n.type),ot(n),null;case 19:if(z(xt),l=n.memoizedState,l===null)return ot(n),null;if(d=(n.flags&128)!==0,f=l.rendering,f===null)if(d)mo(l,!1);else{if(pt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=nu(t),f!==null){for(n.flags|=128,mo(l,!1),t=f.updateQueue,n.updateQueue=t,gu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)Wg(a,t),a=a.sibling;return ne(xt,xt.current&1|2),Fe&&Xs(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&an()>bu&&(n.flags|=128,d=!0,mo(l,!1),n.lanes=4194304)}else{if(!d)if(t=nu(f),t!==null){if(n.flags|=128,d=!0,t=t.updateQueue,n.updateQueue=t,gu(n,t),mo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Fe)return ot(n),null}else 2*an()-l.renderingStartTime>bu&&a!==536870912&&(n.flags|=128,d=!0,mo(l,!1),n.lanes=4194304);l.isBackwards?(f.sibling=n.child,n.child=f):(t=l.last,t!==null?t.sibling=f:n.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=an(),t.sibling=null,a=xt.current,ne(xt,d?a&1|2:a&1),Fe&&Xs(n,l.treeForkCount),t):(ot(n),null);case 22:case 23:return En(n),Cd(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(ot(n),n.subtreeFlags&6&&(n.flags|=8192)):ot(n),a=n.updateQueue,a!==null&&gu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&z(Yr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Zs(Nt),ot(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function F1(t,n){switch(fd(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Zs(Nt),Re(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return qt(n),null;case 31:if(n.memoizedState!==null){if(En(n),n.alternate===null)throw Error(r(340));Hr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(En(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Hr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return z(xt),null;case 4:return Re(),null;case 10:return Zs(n.type),null;case 22:case 23:return En(n),Cd(),t!==null&&z(Yr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Zs(Nt),null;case 25:return null;default:return null}}function E0(t,n){switch(fd(n),n.tag){case 3:Zs(Nt),Re();break;case 26:case 27:case 5:qt(n);break;case 4:Re();break;case 31:n.memoizedState!==null&&En(n);break;case 13:En(n);break;case 19:z(xt);break;case 10:Zs(n.type);break;case 22:case 23:En(n),Cd(),t!==null&&z(Yr);break;case 24:Zs(Nt)}}function go(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var f=a.create,x=a.inst;l=f(),x.destroy=l}a=a.next}while(a!==d)}}catch(T){Je(n,n.return,T)}}function Hi(t,n,a){try{var l=n.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&t)===t){var x=l.inst,T=x.destroy;if(T!==void 0){x.destroy=void 0,d=n;var D=a,F=T;try{F()}catch($){Je(d,D,$)}}}l=l.next}while(l!==f)}}catch($){Je(n,n.return,$)}}function S0(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{gp(n,a)}catch(l){Je(t,t.return,l)}}}function A0(t,n,a){a.props=Wr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Je(t,n,l)}}function po(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){Je(t,n,d)}}function ks(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Je(t,n,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Je(t,n,d)}else a.current=null}function N0(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Je(t,t.return,d)}}function lf(t,n,a){try{var l=t.stateNode;d2(l,t.type,a,n),l[Pt]=n}catch(d){Je(t,t.return,d)}}function C0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Xi(t.type)||t.tag===4}function of(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||C0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Xi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ts));else if(l!==4&&(l===27&&Xi(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(cf(t,n,a),t=t.sibling;t!==null;)cf(t,n,a),t=t.sibling}function pu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&Xi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(pu(t,n,a),t=t.sibling;t!==null;)pu(t,n,a),t=t.sibling}function R0(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);Qt(n,l,a),n[Et]=t,n[Pt]=a}catch(f){Je(t,t.return,f)}}var si=!1,jt=!1,uf=!1,j0=typeof WeakSet=="function"?WeakSet:Set,zt=null;function G1(t,n){if(t=t.containerInfo,If=Lu,t=qg(t),nd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var x=0,T=-1,D=-1,F=0,$=0,te=t,G=null;t:for(;;){for(var K;te!==a||d!==0&&te.nodeType!==3||(T=x+d),te!==f||l!==0&&te.nodeType!==3||(D=x+l),te.nodeType===3&&(x+=te.nodeValue.length),(K=te.firstChild)!==null;)G=te,te=K;for(;;){if(te===t)break t;if(G===a&&++F===d&&(T=x),G===f&&++$===l&&(D=x),(K=te.nextSibling)!==null)break;te=G,G=te.parentNode}te=K}a=T===-1||D===-1?null:{start:T,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(kf={focusedElem:t,selectionRange:a},Lu=!1,zt=n;zt!==null;)if(n=zt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,zt=t;else for(;zt!==null;){switch(n=zt,f=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=n,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var be=Wr(a.type,d);t=l.getSnapshotBeforeUpdate(be,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Se){Je(a,a.return,Se)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Mf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Mf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,zt=t;break}zt=n.return}}function I0(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:ri(t,a),l&4&&go(5,a);break;case 1:if(ri(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(x){Je(a,a.return,x)}else{var d=Wr(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(d,n,t.__reactInternalSnapshotBeforeUpdate)}catch(x){Je(a,a.return,x)}}l&64&&S0(a),l&512&&po(a,a.return);break;case 3:if(ri(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{gp(t,n)}catch(x){Je(a,a.return,x)}}break;case 27:n===null&&l&4&&R0(a);case 26:case 5:ri(t,a),n===null&&l&4&&N0(a),l&512&&po(a,a.return);break;case 12:ri(t,a);break;case 31:ri(t,a),l&4&&O0(t,a);break;case 13:ri(t,a),l&4&&M0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=e2.bind(null,a),b2(t,a))));break;case 22:if(l=a.memoizedState!==null||si,!l){n=n!==null&&n.memoizedState!==null||jt,d=si;var f=jt;si=l,(jt=n)&&!f?ai(t,a,(a.subtreeFlags&8772)!==0):ri(t,a),si=d,jt=f}break;case 30:break;default:ri(t,a)}}function k0(t){var n=t.alternate;n!==null&&(t.alternate=null,k0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&xa(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ht=null,dn=!1;function ii(t,n,a){for(a=a.child;a!==null;)D0(t,n,a),a=a.sibling}function D0(t,n,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Wn,a)}catch{}switch(a.tag){case 26:jt||ks(a,n),ii(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:jt||ks(a,n);var l=ht,d=dn;Xi(a.type)&&(ht=a.stateNode,dn=!1),ii(t,n,a),So(a.stateNode),ht=l,dn=d;break;case 5:jt||ks(a,n);case 6:if(l=ht,d=dn,ht=null,ii(t,n,a),ht=l,dn=d,ht!==null)if(dn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(f){Je(a,n,f)}else try{ht.removeChild(a.stateNode)}catch(f){Je(a,n,f)}break;case 18:ht!==null&&(dn?(t=ht,Sy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),sl(t)):Sy(ht,a.stateNode));break;case 4:l=ht,d=dn,ht=a.stateNode.containerInfo,dn=!0,ii(t,n,a),ht=l,dn=d;break;case 0:case 11:case 14:case 15:Hi(2,a,n),jt||Hi(4,a,n),ii(t,n,a);break;case 1:jt||(ks(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&A0(a,n,l)),ii(t,n,a);break;case 21:ii(t,n,a);break;case 22:jt=(l=jt)||a.memoizedState!==null,ii(t,n,a),jt=l;break;default:ii(t,n,a)}}function O0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{sl(t)}catch(a){Je(n,n.return,a)}}}function M0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{sl(t)}catch(a){Je(n,n.return,a)}}function Y1(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new j0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new j0),n;default:throw Error(r(435,t.tag))}}function yu(t,n){var a=Y1(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var d=t2.bind(null,t,l);l.then(d,d)}})}function fn(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=t,x=n,T=x;e:for(;T!==null;){switch(T.tag){case 27:if(Xi(T.type)){ht=T.stateNode,dn=!1;break e}break;case 5:ht=T.stateNode,dn=!1;break e;case 3:case 4:ht=T.stateNode.containerInfo,dn=!0;break e}T=T.return}if(ht===null)throw Error(r(160));D0(f,x,d),ht=null,dn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)V0(n,t),n=n.sibling}var ls=null;function V0(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:fn(n,t),mn(t),l&4&&(Hi(3,t,t.return),go(3,t),Hi(5,t,t.return));break;case 1:fn(n,t),mn(t),l&512&&(jt||a===null||ks(a,a.return)),l&64&&si&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=ls;if(fn(n,t),mn(t),l&512&&(jt||a===null||ks(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[vs]||f[Et]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),Qt(f,l,a),f[Et]=t,St(f),l=f;break e;case"link":var x=Vy("link","href",d).get(l+(a.href||""));if(x){for(var T=0;T<x.length;T++)if(f=x[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(T,1);break t}}f=d.createElement(l),Qt(f,l,a),d.head.appendChild(f);break;case"meta":if(x=Vy("meta","content",d).get(l+(a.content||""))){for(T=0;T<x.length;T++)if(f=x[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(T,1);break t}}f=d.createElement(l),Qt(f,l,a),d.head.appendChild(f);break;default:throw Error(r(468,l))}f[Et]=t,St(f),l=f}t.stateNode=l}else Ly(d,t.type,t.stateNode);else t.stateNode=My(d,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?Ly(d,t.type,t.stateNode):My(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&lf(t,t.memoizedProps,a.memoizedProps)}break;case 27:fn(n,t),mn(t),l&512&&(jt||a===null||ks(a,a.return)),a!==null&&l&4&&lf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(fn(n,t),mn(t),l&512&&(jt||a===null||ks(a,a.return)),t.flags&32){d=t.stateNode;try{hn(d,"")}catch(be){Je(t,t.return,be)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,lf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(uf=!0);break;case 6:if(fn(n,t),mn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(be){Je(t,t.return,be)}}break;case 3:if(Du=null,d=ls,ls=Iu(n.containerInfo),fn(n,t),ls=d,mn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{sl(n.containerInfo)}catch(be){Je(t,t.return,be)}uf&&(uf=!1,L0(t));break;case 4:l=ls,ls=Iu(t.stateNode.containerInfo),fn(n,t),mn(t),ls=l;break;case 12:fn(n,t),mn(t);break;case 31:fn(n,t),mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,yu(t,l)));break;case 13:fn(n,t),mn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xu=an()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,yu(t,l)));break;case 22:d=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=si,$=jt;if(si=F||d,jt=$||D,fn(n,t),jt=$,si=F,mn(t),l&8192)e:for(n=t.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(a===null||D||si||jt||Zr(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(f=D.stateNode,d)x=f.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{T=D.stateNode;var te=D.memoizedProps.style,G=te!=null&&te.hasOwnProperty("display")?te.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(be){Je(D,D.return,be)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(be){Je(D,D.return,be)}}}else if(n.tag===18){if(a===null){D=n;try{var K=D.stateNode;d?Ay(K,!0):Ay(D.stateNode,!1)}catch(be){Je(D,D.return,be)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,yu(t,a))));break;case 19:fn(n,t),mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,yu(t,l)));break;case 30:break;case 21:break;default:fn(n,t),mn(t)}}function mn(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(C0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,f=of(t);pu(t,f,d);break;case 5:var x=a.stateNode;a.flags&32&&(hn(x,""),a.flags&=-33);var T=of(t);pu(t,T,x);break;case 3:case 4:var D=a.stateNode.containerInfo,F=of(t);cf(t,F,D);break;default:throw Error(r(161))}}catch($){Je(t,t.return,$)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function L0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;L0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function ri(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)I0(t,n.alternate,n),n=n.sibling}function Zr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Hi(4,n,n.return),Zr(n);break;case 1:ks(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&A0(n,n.return,a),Zr(n);break;case 27:So(n.stateNode);case 26:case 5:ks(n,n.return),Zr(n);break;case 22:n.memoizedState===null&&Zr(n);break;case 30:Zr(n);break;default:Zr(n)}t=t.sibling}}function ai(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,d=t,f=n,x=f.flags;switch(f.tag){case 0:case 11:case 15:ai(d,f,a),go(4,f);break;case 1:if(ai(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){Je(l,l.return,F)}if(l=f,d=l.updateQueue,d!==null){var T=l.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)mp(D[d],T)}catch(F){Je(l,l.return,F)}}a&&x&64&&S0(f),po(f,f.return);break;case 27:R0(f);case 26:case 5:ai(d,f,a),a&&l===null&&x&4&&N0(f),po(f,f.return);break;case 12:ai(d,f,a);break;case 31:ai(d,f,a),a&&x&4&&O0(d,f);break;case 13:ai(d,f,a),a&&x&4&&M0(d,f);break;case 22:f.memoizedState===null&&ai(d,f,a),po(f,f.return);break;case 30:break;default:ai(d,f,a)}n=n.sibling}}function hf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&to(a))}function df(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&to(t))}function os(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)P0(t,n,a,l),n=n.sibling}function P0(t,n,a,l){var d=n.flags;switch(n.tag){case 0:case 11:case 15:os(t,n,a,l),d&2048&&go(9,n);break;case 1:os(t,n,a,l);break;case 3:os(t,n,a,l),d&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&to(t)));break;case 12:if(d&2048){os(t,n,a,l),t=n.stateNode;try{var f=n.memoizedProps,x=f.id,T=f.onPostCommit;typeof T=="function"&&T(x,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){Je(n,n.return,D)}}else os(t,n,a,l);break;case 31:os(t,n,a,l);break;case 13:os(t,n,a,l);break;case 23:break;case 22:f=n.stateNode,x=n.alternate,n.memoizedState!==null?f._visibility&2?os(t,n,a,l):yo(t,n):f._visibility&2?os(t,n,a,l):(f._visibility|=2,Ya(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),d&2048&&hf(x,n);break;case 24:os(t,n,a,l),d&2048&&df(n.alternate,n);break;default:os(t,n,a,l)}}function Ya(t,n,a,l,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=t,x=n,T=a,D=l,F=x.flags;switch(x.tag){case 0:case 11:case 15:Ya(f,x,T,D,d),go(8,x);break;case 23:break;case 22:var $=x.stateNode;x.memoizedState!==null?$._visibility&2?Ya(f,x,T,D,d):yo(f,x):($._visibility|=2,Ya(f,x,T,D,d)),d&&F&2048&&hf(x.alternate,x);break;case 24:Ya(f,x,T,D,d),d&&F&2048&&df(x.alternate,x);break;default:Ya(f,x,T,D,d)}n=n.sibling}}function yo(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,d=l.flags;switch(l.tag){case 22:yo(a,l),d&2048&&hf(l.alternate,l);break;case 24:yo(a,l),d&2048&&df(l.alternate,l);break;default:yo(a,l)}n=n.sibling}}var vo=8192;function Ka(t,n,a){if(t.subtreeFlags&vo)for(t=t.child;t!==null;)U0(t,n,a),t=t.sibling}function U0(t,n,a){switch(t.tag){case 26:Ka(t,n,a),t.flags&vo&&t.memoizedState!==null&&k2(a,ls,t.memoizedState,t.memoizedProps);break;case 5:Ka(t,n,a);break;case 3:case 4:var l=ls;ls=Iu(t.stateNode.containerInfo),Ka(t,n,a),ls=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=vo,vo=16777216,Ka(t,n,a),vo=l):Ka(t,n,a));break;default:Ka(t,n,a)}}function z0(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function xo(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];zt=l,q0(l,t)}z0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)B0(t),t=t.sibling}function B0(t){switch(t.tag){case 0:case 11:case 15:xo(t),t.flags&2048&&Hi(9,t,t.return);break;case 3:xo(t);break;case 12:xo(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,vu(t)):xo(t);break;default:xo(t)}}function vu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];zt=l,q0(l,t)}z0(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Hi(8,n,n.return),vu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,vu(n));break;default:vu(n)}t=t.sibling}}function q0(t,n){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:Hi(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:to(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,zt=l;else e:for(a=t;zt!==null;){l=zt;var d=l.sibling,f=l.return;if(k0(l),l===a){zt=null;break e}if(d!==null){d.return=f,zt=d;break e}zt=f}}}var K1={getCacheForType:function(t){var n=Yt(Nt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return Yt(Nt).controller.signal}},Q1=typeof WeakMap=="function"?WeakMap:Map,$e=0,it=null,Le=null,Ue=0,Ze=0,Sn=null,Fi=!1,Qa=!1,ff=!1,li=0,pt=0,Gi=0,Jr=0,mf=0,An=0,$a=0,bo=null,gn=null,gf=!1,xu=0,H0=0,bu=1/0,_u=null,Yi=null,Mt=0,Ki=null,Xa=null,oi=0,pf=0,yf=null,F0=null,_o=0,vf=null;function Nn(){return($e&2)!==0&&Ue!==0?Ue&-Ue:U.T!==null?Ef():wc()}function G0(){if(An===0)if((Ue&536870912)===0||Fe){var t=Ar;Ar<<=1,(Ar&3932160)===0&&(Ar=262144),An=t}else An=536870912;return t=Tn.current,t!==null&&(t.flags|=32),An}function pn(t,n,a){(t===it&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(Wa(t,0),Qi(t,Ue,An,!1)),Nr(t,a),(($e&2)===0||t!==it)&&(t===it&&(($e&2)===0&&(Jr|=a),pt===4&&Qi(t,Ue,An,!1)),Ds(t))}function Y0(t,n,a){if(($e&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||Zn(t,n),d=l?W1(t,n):bf(t,n,!0),f=l;do{if(d===0){Qa&&!l&&Qi(t,n,0,!1);break}else{if(a=t.current.alternate,f&&!$1(a)){d=bf(t,n,!1),f=!1;continue}if(d===2){if(f=n,t.errorRecoveryDisabledLanes&f)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var T=t;d=bo;var D=T.current.memoizedState.isDehydrated;if(D&&(Wa(T,x).flags|=256),x=bf(T,x,!1),x!==2){if(ff&&!D){T.errorRecoveryDisabledLanes|=f,Jr|=f,d=4;break e}f=gn,gn=d,f!==null&&(gn===null?gn=f:gn.push.apply(gn,f))}d=x}if(f=!1,d!==2)continue}}if(d===1){Wa(t,0),Qi(t,n,0,!0);break}e:{switch(l=t,f=d,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Qi(l,n,An,!Fi);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(d=xu+300-an(),10<d)){if(Qi(l,n,An,!Fi),gs(l,0,!0)!==0)break e;oi=n,l.timeoutHandle=Ty(K0.bind(null,l,a,gn,_u,gf,n,An,Jr,$a,Fi,f,"Throttled",-0,0),d);break e}K0(l,a,gn,_u,gf,n,An,Jr,$a,Fi,f,null,-0,0)}}break}while(!0);Ds(t)}function K0(t,n,a,l,d,f,x,T,D,F,$,te,G,K){if(t.timeoutHandle=-1,te=n.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ts},U0(n,f,te);var be=(f&62914560)===f?xu-an():(f&4194048)===f?H0-an():0;if(be=D2(te,be),be!==null){oi=f,t.cancelPendingCommit=be(ty.bind(null,t,n,f,a,l,d,x,T,D,$,te,null,G,K)),Qi(t,f,x,!F);return}}ty(t,n,f,a,l,d,x,T,D)}function $1(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!_n(f(),d))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Qi(t,n,a,l){n&=~mf,n&=~Jr,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var d=n;0<d;){var f=31-yt(d),x=1<<f;l[f]=-1,d&=~x}a!==0&&Cr(t,a,n)}function wu(){return($e&6)===0?(wo(0),!1):!0}function xf(){if(Le!==null){if(Ze===0)var t=Le.return;else t=Le,Ws=Fr=null,Od(t),Ba=null,so=0,t=Le;for(;t!==null;)E0(t.alternate,t),t=t.return;Le=null}}function Wa(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,g2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),oi=0,xf(),it=t,Le=a=$s(t.current,null),Ue=n,Ze=0,Sn=null,Fi=!1,Qa=Zn(t,n),ff=!1,$a=An=mf=Jr=Gi=pt=0,gn=bo=null,gf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var d=31-yt(l),f=1<<d;n|=t[d],l&=~f}return li=n,Hc(),a}function Q0(t,n){Oe=null,U.H=ho,n===za||n===Wc?(n=up(),Ze=3):n===wd?(n=up(),Ze=4):Ze=n===Xd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Sn=n,Le===null&&(pt=1,hu(t,Ln(n,t.current)))}function $0(){var t=Tn.current;return t===null?!0:(Ue&4194048)===Ue?Bn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?t===Bn:!1}function X0(){var t=U.H;return U.H=ho,t===null?ho:t}function W0(){var t=U.A;return U.A=K1,t}function Tu(){pt=4,Fi||(Ue&4194048)!==Ue&&Tn.current!==null||(Qa=!0),(Gi&134217727)===0&&(Jr&134217727)===0||it===null||Qi(it,Ue,An,!1)}function bf(t,n,a){var l=$e;$e|=2;var d=X0(),f=W0();(it!==t||Ue!==n)&&(_u=null,Wa(t,n)),n=!1;var x=pt;e:do try{if(Ze!==0&&Le!==null){var T=Le,D=Sn;switch(Ze){case 8:xf(),x=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(n=!0);var F=Ze;if(Ze=0,Sn=null,Za(t,T,D,F),a&&Qa){x=0;break e}break;default:F=Ze,Ze=0,Sn=null,Za(t,T,D,F)}}X1(),x=pt;break}catch($){Q0(t,$)}while(!0);return n&&t.shellSuspendCounter++,Ws=Fr=null,$e=l,U.H=d,U.A=f,Le===null&&(it=null,Ue=0,Hc()),x}function X1(){for(;Le!==null;)Z0(Le)}function W1(t,n){var a=$e;$e|=2;var l=X0(),d=W0();it!==t||Ue!==n?(_u=null,bu=an()+500,Wa(t,n)):Qa=Zn(t,n);e:do try{if(Ze!==0&&Le!==null){n=Le;var f=Sn;t:switch(Ze){case 1:Ze=0,Sn=null,Za(t,n,f,1);break;case 2:case 9:if(op(f)){Ze=0,Sn=null,J0(n);break}n=function(){Ze!==2&&Ze!==9||it!==t||(Ze=7),Ds(t)},f.then(n,n);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:op(f)?(Ze=0,Sn=null,J0(n)):(Ze=0,Sn=null,Za(t,n,f,7));break;case 5:var x=null;switch(Le.tag){case 26:x=Le.memoizedState;case 5:case 27:var T=Le;if(x?Py(x):T.stateNode.complete){Ze=0,Sn=null;var D=T.sibling;if(D!==null)Le=D;else{var F=T.return;F!==null?(Le=F,Eu(F)):Le=null}break t}}Ze=0,Sn=null,Za(t,n,f,5);break;case 6:Ze=0,Sn=null,Za(t,n,f,6);break;case 8:xf(),pt=6;break e;default:throw Error(r(462))}}Z1();break}catch($){Q0(t,$)}while(!0);return Ws=Fr=null,U.H=l,U.A=d,$e=a,Le!==null?0:(it=null,Ue=0,Hc(),pt)}function Z1(){for(;Le!==null&&!$h();)Z0(Le)}function Z0(t){var n=w0(t.alternate,t,li);t.memoizedProps=t.pendingProps,n===null?Eu(t):Le=n}function J0(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=p0(a,n,n.pendingProps,n.type,void 0,Ue);break;case 11:n=p0(a,n,n.pendingProps,n.type.render,n.ref,Ue);break;case 5:Od(n);default:E0(a,n),n=Le=Wg(n,li),n=w0(a,n,li)}t.memoizedProps=t.pendingProps,n===null?Eu(t):Le=n}function Za(t,n,a,l){Ws=Fr=null,Od(n),Ba=null,so=0;var d=n.return;try{if(z1(t,d,n,a,Ue)){pt=1,hu(t,Ln(a,t.current)),Le=null;return}}catch(f){if(d!==null)throw Le=d,f;pt=1,hu(t,Ln(a,t.current)),Le=null;return}n.flags&32768?(Fe||l===1?t=!0:Qa||(Ue&536870912)!==0?t=!1:(Fi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Tn.current,l!==null&&l.tag===13&&(l.flags|=16384))),ey(n,t)):Eu(n)}function Eu(t){var n=t;do{if((n.flags&32768)!==0){ey(n,Fi);return}t=n.return;var a=H1(n.alternate,n,li);if(a!==null){Le=a;return}if(n=n.sibling,n!==null){Le=n;return}Le=n=t}while(n!==null);pt===0&&(pt=5)}function ey(t,n){do{var a=F1(t.alternate,t);if(a!==null){a.flags&=32767,Le=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Le=t;return}Le=t=a}while(t!==null);pt=6,Le=null}function ty(t,n,a,l,d,f,x,T,D){t.cancelPendingCommit=null;do Su();while(Mt!==0);if(($e&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=ld,Zh(t,a,f,x,T,D),t===it&&(Le=it=null,Ue=0),Xa=n,Ki=t,oi=a,pf=f,yf=d,F0=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,n2(Ei,function(){return ay(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=U.T,U.T=null,d=W.p,W.p=2,x=$e,$e|=4;try{G1(t,n,a)}finally{$e=x,W.p=d,U.T=l}}Mt=1,ny(),sy(),iy()}}function ny(){if(Mt===1){Mt=0;var t=Ki,n=Xa,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var l=W.p;W.p=2;var d=$e;$e|=4;try{V0(n,t);var f=kf,x=qg(t.containerInfo),T=f.focusedElem,D=f.selectionRange;if(x!==T&&T&&T.ownerDocument&&Bg(T.ownerDocument.documentElement,T)){if(D!==null&&nd(T)){var F=D.start,$=D.end;if($===void 0&&($=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min($,T.value.length);else{var te=T.ownerDocument||document,G=te&&te.defaultView||window;if(G.getSelection){var K=G.getSelection(),be=T.textContent.length,Se=Math.min(D.start,be),st=D.end===void 0?Se:Math.min(D.end,be);!K.extend&&Se>st&&(x=st,st=Se,Se=x);var L=zg(T,Se),O=zg(T,st);if(L&&O&&(K.rangeCount!==1||K.anchorNode!==L.node||K.anchorOffset!==L.offset||K.focusNode!==O.node||K.focusOffset!==O.offset)){var H=te.createRange();H.setStart(L.node,L.offset),K.removeAllRanges(),Se>st?(K.addRange(H),K.extend(O.node,O.offset)):(H.setEnd(O.node,O.offset),K.addRange(H))}}}}for(te=[],K=T;K=K.parentNode;)K.nodeType===1&&te.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<te.length;T++){var J=te[T];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Lu=!!If,kf=If=null}finally{$e=d,W.p=l,U.T=a}}t.current=n,Mt=2}}function sy(){if(Mt===2){Mt=0;var t=Ki,n=Xa,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var l=W.p;W.p=2;var d=$e;$e|=4;try{I0(t,n.alternate,n)}finally{$e=d,W.p=l,U.T=a}}Mt=3}}function iy(){if(Mt===4||Mt===3){Mt=0,gc();var t=Ki,n=Xa,a=oi,l=F0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Mt=5:(Mt=0,Xa=Ki=null,ry(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Yi=null),Gs(a),n=n.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Wn,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=U.T,d=W.p,W.p=2,U.T=null;try{for(var f=t.onRecoverableError,x=0;x<l.length;x++){var T=l[x];f(T.value,{componentStack:T.stack})}}finally{U.T=n,W.p=d}}(oi&3)!==0&&Su(),Ds(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===vf?_o++:(_o=0,vf=t):_o=0,wo(0)}}function ry(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,to(n)))}function Su(){return ny(),sy(),iy(),ay()}function ay(){if(Mt!==5)return!1;var t=Ki,n=pf;pf=0;var a=Gs(oi),l=U.T,d=W.p;try{W.p=32>a?32:a,U.T=null,a=yf,yf=null;var f=Ki,x=oi;if(Mt=0,Xa=Ki=null,oi=0,($e&6)!==0)throw Error(r(331));var T=$e;if($e|=4,B0(f.current),P0(f,f.current,x,a),$e=T,wo(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Wn,f)}catch{}return!0}finally{W.p=d,U.T=l,ry(t,n)}}function ly(t,n,a){n=Ln(a,n),n=$d(t.stateNode,n,2),t=zi(t,n,2),t!==null&&(Nr(t,2),Ds(t))}function Je(t,n,a){if(t.tag===3)ly(t,t,a);else for(;n!==null;){if(n.tag===3){ly(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Yi===null||!Yi.has(l))){t=Ln(a,t),a=o0(2),l=zi(n,a,2),l!==null&&(c0(a,l,n,t),Nr(l,2),Ds(l));break}}n=n.return}}function _f(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Q1;var d=new Set;l.set(n,d)}else d=l.get(n),d===void 0&&(d=new Set,l.set(n,d));d.has(a)||(ff=!0,d.add(a),t=J1.bind(null,t,n,a),n.then(t,t))}function J1(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,it===t&&(Ue&a)===a&&(pt===4||pt===3&&(Ue&62914560)===Ue&&300>an()-xu?($e&2)===0&&Wa(t,0):mf|=a,$a===Ue&&($a=0)),Ds(t)}function oy(t,n){n===0&&(n=_c()),t=Br(t,n),t!==null&&(Nr(t,n),Ds(t))}function e2(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),oy(t,a)}function t2(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),oy(t,a)}function n2(t,n){return Ot(t,n)}var Au=null,Ja=null,wf=!1,Nu=!1,Tf=!1,$i=0;function Ds(t){t!==Ja&&t.next===null&&(Ja===null?Au=Ja=t:Ja=Ja.next=t),Nu=!0,wf||(wf=!0,i2())}function wo(t,n){if(!Tf&&Nu){Tf=!0;do for(var a=!1,l=Au;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var x=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-yt(42|t)+1)-1,f&=d&~(x&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,dy(l,f))}else f=Ue,f=gs(l,l===it?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Zn(l,f)||(a=!0,dy(l,f));l=l.next}while(a);Tf=!1}}function s2(){cy()}function cy(){Nu=wf=!1;var t=0;$i!==0&&m2()&&(t=$i);for(var n=an(),a=null,l=Au;l!==null;){var d=l.next,f=uy(l,n);f===0?(l.next=null,a===null?Au=d:a.next=d,d===null&&(Ja=a)):(a=l,(t!==0||(f&3)!==0)&&(Nu=!0)),l=d}Mt!==0&&Mt!==5||wo(t),$i!==0&&($i=0)}function uy(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var x=31-yt(f),T=1<<x,D=d[x];D===-1?((T&a)===0||(T&l)!==0)&&(d[x]=Wh(T,n)):D<=n&&(t.expiredLanes|=T),f&=~T}if(n=it,a=Ue,a=gs(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ti(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Zn(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&Ti(l),Gs(a)){case 2:case 8:a=Il;break;case 32:a=Ei;break;case 268435456:a=pc;break;default:a=Ei}return l=hy.bind(null,t),a=Ot(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&Ti(l),t.callbackPriority=2,t.callbackNode=null,2}function hy(t,n){if(Mt!==0&&Mt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Su()&&t.callbackNode!==a)return null;var l=Ue;return l=gs(t,t===it?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Y0(t,l,n),uy(t,an()),t.callbackNode!=null&&t.callbackNode===a?hy.bind(null,t):null)}function dy(t,n){if(Su())return null;Y0(t,n,!0)}function i2(){p2(function(){($e&6)!==0?Ot(jl,s2):cy()})}function Ef(){if($i===0){var t=Pa;t===0&&(t=fs,fs<<=1,(fs&261888)===0&&(fs=256)),$i=t}return $i}function fy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ta(""+t)}function my(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function r2(t,n,a,l,d){if(n==="submit"&&a&&a.stateNode===d){var f=fy((d[Pt]||null).action),x=l.submitter;x&&(n=(n=x[Pt]||null)?fy(n.formAction):x.getAttribute("formAction"),n!==null&&(f=n,x=null));var T=new As("action","action",null,l,d);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if($i!==0){var D=x?my(d,x):new FormData(d);Hd(a,{pending:!0,data:D,method:d.method,action:f},null,D)}}else typeof f=="function"&&(T.preventDefault(),D=x?my(d,x):new FormData(d),Hd(a,{pending:!0,data:D,method:d.method,action:f},f,D))},currentTarget:d}]})}}for(var Sf=0;Sf<ad.length;Sf++){var Af=ad[Sf],a2=Af.toLowerCase(),l2=Af[0].toUpperCase()+Af.slice(1);as(a2,"on"+l2)}as(Gg,"onAnimationEnd"),as(Yg,"onAnimationIteration"),as(Kg,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(T1,"onTransitionRun"),as(E1,"onTransitionStart"),as(S1,"onTransitionCancel"),as(Qg,"onTransitionEnd"),ws("onMouseEnter",["mouseout","mouseover"]),ws("onMouseLeave",["mouseout","mouseover"]),ws("onPointerEnter",["pointerout","pointerover"]),ws("onPointerLeave",["pointerout","pointerover"]),_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_s("onBeforeInput",["compositionend","keypress","textInput","paste"]),_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(To));function gy(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var f=void 0;if(n)for(var x=l.length-1;0<=x;x--){var T=l[x],D=T.instance,F=T.currentTarget;if(T=T.listener,D!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=F;try{f(d)}catch($){qc($)}d.currentTarget=null,f=D}else for(x=0;x<l.length;x++){if(T=l[x],D=T.instance,F=T.currentTarget,T=T.listener,D!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=F;try{f(d)}catch($){qc($)}d.currentTarget=null,f=D}}}}function Pe(t,n){var a=n[va];a===void 0&&(a=n[va]=new Set);var l=t+"__bubble";a.has(l)||(py(n,t,2,!1),a.add(l))}function Nf(t,n,a){var l=0;n&&(l|=4),py(a,t,l,n)}var Cu="_reactListening"+Math.random().toString(36).slice(2);function Cf(t){if(!t[Cu]){t[Cu]=!0,Ol.forEach(function(a){a!=="selectionchange"&&(o2.has(a)||Nf(a,!1,t),Nf(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Cu]||(n[Cu]=!0,Nf("selectionchange",!1,n))}}function py(t,n,a,l){switch(Gy(n)){case 2:var d=V2;break;case 8:d=L2;break;default:d=Hf}a=d.bind(null,n,a,t),d=void 0,!Dr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(n,a,{capture:!0,passive:d}):t.addEventListener(n,a,!0):d!==void 0?t.addEventListener(n,a,{passive:d}):t.addEventListener(n,a,!1)}function Rf(t,n,a,l,d){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var T=l.stateNode.containerInfo;if(T===d)break;if(x===4)for(x=l.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===d)return;x=x.return}for(;T!==null;){if(x=xs(T),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){l=f=x;continue e}T=T.parentNode}}l=l.return}ji(function(){var F=f,$=Dn(a),te=[];e:{var G=$g.get(t);if(G!==void 0){var K=As,be=t;switch(t){case"keypress":if(Mr(a)===0)break e;case"keydown":case"keyup":K=Uc;break;case"focusin":be="focus",K=Lr;break;case"focusout":be="blur",K=Lr;break;case"beforeblur":case"afterblur":K=Lr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=jc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=g;break;case Gg:case Yg:case Kg:K=kc;break;case Qg:K=A;break;case"scroll":case"scrollend":K=Yl;break;case"wheel":K=Y;break;case"copy":case"cut":case"paste":K=Dc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Qs;break;case"toggle":case"beforetoggle":K=De}var Se=(n&4)!==0,st=!Se&&(t==="scroll"||t==="scrollend"),L=Se?G!==null?G+"Capture":null:G;Se=[];for(var O=F,H;O!==null;){var J=O;if(H=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||H===null||L===null||(J=ns(O,L),J!=null&&Se.push(Eo(O,J,H))),st)break;O=O.return}0<Se.length&&(G=new K(G,be,null,a,$),te.push({event:G,listeners:Se}))}}if((n&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",G&&a!==Hl&&(be=a.relatedTarget||a.fromElement)&&(xs(be)||be[ys]))break e;if((K||G)&&(G=$.window===$?$:(G=$.ownerDocument)?G.defaultView||G.parentWindow:window,K?(be=a.relatedTarget||a.toElement,K=F,be=be?xs(be):null,be!==null&&(st=h(be),Se=be.tag,be!==st||Se!==5&&Se!==27&&Se!==6)&&(be=null)):(K=null,be=F),K!==be)){if(Se=Kl,J="onMouseLeave",L="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(Se=Qs,J="onPointerLeave",L="onPointerEnter",O="pointer"),st=K==null?G:xn(K),H=be==null?G:xn(be),G=new Se(J,O+"leave",K,a,$),G.target=st,G.relatedTarget=H,J=null,xs($)===F&&(Se=new Se(L,O+"enter",be,a,$),Se.target=H,Se.relatedTarget=st,J=Se),st=J,K&&be)t:{for(Se=c2,L=K,O=be,H=0,J=L;J;J=Se(J))H++;J=0;for(var we=O;we;we=Se(we))J++;for(;0<H-J;)L=Se(L),H--;for(;0<J-H;)O=Se(O),J--;for(;H--;){if(L===O||O!==null&&L===O.alternate){Se=L;break t}L=Se(L),O=Se(O)}Se=null}else Se=null;K!==null&&yy(te,G,K,Se,!1),be!==null&&st!==null&&yy(te,st,be,Se,!0)}}e:{if(G=F?xn(F):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var Ye=Og;else if(kg(G))if(Mg)Ye=b1;else{Ye=v1;var _e=y1}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&wa(F.elementType)&&(Ye=Og):Ye=x1;if(Ye&&(Ye=Ye(t,F))){Dg(te,Ye,a,$);break e}_e&&_e(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&zl(G,"number",G.value)}switch(_e=F?xn(F):window,t){case"focusin":(kg(_e)||_e.contentEditable==="true")&&(ja=_e,sd=F,Zl=null);break;case"focusout":Zl=sd=ja=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,Hg(te,a,$);break;case"selectionchange":if(w1)break;case"keydown":case"keyup":Hg(te,a,$)}var Me;if(Qe)e:{switch(t){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Ra?Pr(t,a)&&(ze="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ze="onCompositionStart");ze&&(Rs&&a.locale!=="ko"&&(Ra||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Ra&&(Me=Gl()):(Ss=$,Fl="value"in Ss?Ss.value:Ss.textContent,Ra=!0)),_e=Ru(F,ze),0<_e.length&&(ze=new Cs(ze,t,null,a,$),te.push({event:ze,listeners:_e}),Me?ze.data=Me:(Me=Ca(a),Me!==null&&(ze.data=Me)))),(Me=Mn?f1(t,a):m1(t,a))&&(ze=Ru(F,"onBeforeInput"),0<ze.length&&(_e=new Cs("onBeforeInput","beforeinput",null,a,$),te.push({event:_e,listeners:ze}),_e.data=Me)),r2(te,t,F,a,$)}gy(te,n)})}function Eo(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Ru(t,n){for(var a=n+"Capture",l=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=ns(t,a),d!=null&&l.unshift(Eo(t,d,f)),d=ns(t,n),d!=null&&l.push(Eo(t,d,f))),t.tag===3)return l;t=t.return}return[]}function c2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function yy(t,n,a,l,d){for(var f=n._reactName,x=[];a!==null&&a!==l;){var T=a,D=T.alternate,F=T.stateNode;if(T=T.tag,D!==null&&D===l)break;T!==5&&T!==26&&T!==27||F===null||(D=F,d?(F=ns(a,f),F!=null&&x.unshift(Eo(a,F,D))):d||(F=ns(a,f),F!=null&&x.push(Eo(a,F,D)))),a=a.return}x.length!==0&&t.push({event:n,listeners:x})}var u2=/\r\n?/g,h2=/\u0000|\uFFFD/g;function vy(t){return(typeof t=="string"?t:""+t).replace(u2,`
`).replace(h2,"")}function xy(t,n){return n=vy(n),vy(t)===n}function nt(t,n,a,l,d,f){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||hn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&hn(t,""+l);break;case"className":bn(t,"class",l);break;case"tabIndex":bn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":bn(t,a,l);break;case"style":ql(t,l,f);break;case"data":if(n!=="object"){bn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ta(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&nt(t,n,"name",d.name,d,null),nt(t,n,"formEncType",d.formEncType,d,null),nt(t,n,"formMethod",d.formMethod,d,null),nt(t,n,"formTarget",d.formTarget,d,null)):(nt(t,n,"encType",d.encType,d,null),nt(t,n,"method",d.method,d,null),nt(t,n,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ta(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ts);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ta(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),ba(t,"popover",l);break;case"xlinkActuate":At(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":At(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":At(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":At(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":At(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":At(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":At(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":At(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":At(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ba(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rc.get(a)||a,ba(t,a,l))}}function jf(t,n,a,l,d,f){switch(a){case"style":ql(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?hn(t,l):(typeof l=="number"||typeof l=="bigint")&&hn(t,""+l);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ts);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ml.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),n=a.slice(2,d?a.length-7:void 0),f=t[Pt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(n,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ba(t,a,l)}}}function Qt(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var x=a[f];if(x!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:nt(t,n,f,x,a,null)}}d&&nt(t,n,"srcSet",a.srcSet,a,null),l&&nt(t,n,"src",a.src,a,null);return;case"input":Pe("invalid",t);var T=f=x=d=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":d=$;break;case"type":x=$;break;case"checked":D=$;break;case"defaultChecked":F=$;break;case"value":f=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,n));break;default:nt(t,n,l,$,a,null)}}Ac(t,f,T,D,F,x,d,!1);return;case"select":Pe("invalid",t),l=x=f=null;for(d in a)if(a.hasOwnProperty(d)&&(T=a[d],T!=null))switch(d){case"value":f=T;break;case"defaultValue":x=T;break;case"multiple":l=T;default:nt(t,n,d,T,a,null)}n=f,a=x,t.multiple=!!l,n!=null?Ai(t,!!l,n,!1):a!=null&&Ai(t,!!l,a,!0);return;case"textarea":Pe("invalid",t),f=d=l=null;for(x in a)if(a.hasOwnProperty(x)&&(T=a[x],T!=null))switch(x){case"value":l=T;break;case"defaultValue":d=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:nt(t,n,x,T,a,null)}Ni(t,l,d,f);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:nt(t,n,D,l,a,null)}return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(l=0;l<To.length;l++)Pe(To[l],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:nt(t,n,F,l,a,null)}return;default:if(wa(n)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&jf(t,n,$,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&nt(t,n,T,l,a,null))}function d2(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,x=null,T=null,D=null,F=null,$=null;for(K in a){var te=a[K];if(a.hasOwnProperty(K)&&te!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=te;default:l.hasOwnProperty(K)||nt(t,n,K,null,l,te)}}for(var G in l){var K=l[G];if(te=a[G],l.hasOwnProperty(G)&&(K!=null||te!=null))switch(G){case"type":f=K;break;case"name":d=K;break;case"checked":F=K;break;case"defaultChecked":$=K;break;case"value":x=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,n));break;default:K!==te&&nt(t,n,G,K,l,te)}}_a(t,x,T,D,F,$,f,d);return;case"select":K=x=T=G=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":K=D;default:l.hasOwnProperty(f)||nt(t,n,f,null,l,D)}for(d in l)if(f=l[d],D=a[d],l.hasOwnProperty(d)&&(f!=null||D!=null))switch(d){case"value":G=f;break;case"defaultValue":T=f;break;case"multiple":x=f;default:f!==D&&nt(t,n,d,f,l,D)}n=T,a=x,l=K,G!=null?Ai(t,!!a,G,!1):!!l!=!!a&&(n!=null?Ai(t,!!a,n,!0):Ai(t,!!a,a?[]:"",!1));return;case"textarea":K=G=null;for(T in a)if(d=a[T],a.hasOwnProperty(T)&&d!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:nt(t,n,T,null,l,d)}for(x in l)if(d=l[x],f=a[x],l.hasOwnProperty(x)&&(d!=null||f!=null))switch(x){case"value":G=d;break;case"defaultValue":K=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==f&&nt(t,n,x,d,l,f)}Nc(t,G,K);return;case"option":for(var be in a)if(G=a[be],a.hasOwnProperty(be)&&G!=null&&!l.hasOwnProperty(be))switch(be){case"selected":t.selected=!1;break;default:nt(t,n,be,null,l,G)}for(D in l)if(G=l[D],K=a[D],l.hasOwnProperty(D)&&G!==K&&(G!=null||K!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:nt(t,n,D,G,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)G=a[Se],a.hasOwnProperty(Se)&&G!=null&&!l.hasOwnProperty(Se)&&nt(t,n,Se,null,l,G);for(F in l)if(G=l[F],K=a[F],l.hasOwnProperty(F)&&G!==K&&(G!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,n));break;default:nt(t,n,F,G,l,K)}return;default:if(wa(n)){for(var st in a)G=a[st],a.hasOwnProperty(st)&&G!==void 0&&!l.hasOwnProperty(st)&&jf(t,n,st,void 0,l,G);for($ in l)G=l[$],K=a[$],!l.hasOwnProperty($)||G===K||G===void 0&&K===void 0||jf(t,n,$,G,l,K);return}}for(var L in a)G=a[L],a.hasOwnProperty(L)&&G!=null&&!l.hasOwnProperty(L)&&nt(t,n,L,null,l,G);for(te in l)G=l[te],K=a[te],!l.hasOwnProperty(te)||G===K||G==null&&K==null||nt(t,n,te,G,l,K)}function by(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function f2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],f=d.transferSize,x=d.initiatorType,T=d.duration;if(f&&T&&by(x)){for(x=0,T=d.responseEnd,l+=1;l<a.length;l++){var D=a[l],F=D.startTime;if(F>T)break;var $=D.transferSize,te=D.initiatorType;$&&by(te)&&(D=D.responseEnd,x+=$*(D<T?1:(T-F)/(D-F)))}if(--l,n+=8*(f+x)/(d.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var If=null,kf=null;function ju(t){return t.nodeType===9?t:t.ownerDocument}function _y(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Df(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Of=null;function m2(){var t=window.event;return t&&t.type==="popstate"?t===Of?!1:(Of=t,!0):(Of=null,!1)}var Ty=typeof setTimeout=="function"?setTimeout:void 0,g2=typeof clearTimeout=="function"?clearTimeout:void 0,Ey=typeof Promise=="function"?Promise:void 0,p2=typeof queueMicrotask=="function"?queueMicrotask:typeof Ey<"u"?function(t){return Ey.resolve(null).then(t).catch(y2)}:Ty;function y2(t){setTimeout(function(){throw t})}function Xi(t){return t==="head"}function Sy(t,n){var a=n,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),sl(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")So(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,So(a);for(var f=a.firstChild;f;){var x=f.nextSibling,T=f.nodeName;f[vs]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=x}}else a==="body"&&So(t.ownerDocument.body);a=d}while(a);sl(n)}function Ay(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Mf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Mf(a),xa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function v2(t,n,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[vs])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=qn(t.nextSibling),t===null)break}return null}function x2(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=qn(t.nextSibling),t===null))return null;return t}function Ny(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=qn(t.nextSibling),t===null))return null;return t}function Vf(t){return t.data==="$?"||t.data==="$~"}function Lf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function b2(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function qn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Pf=null;function Cy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return qn(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function Ry(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function jy(t,n,a){switch(n=ju(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function So(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);xa(t)}var Hn=new Map,Iy=new Set;function Iu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ci=W.d;W.d={f:_2,r:w2,D:T2,C:E2,L:S2,m:A2,X:C2,S:N2,M:R2};function _2(){var t=ci.f(),n=wu();return t||n}function w2(t){var n=kn(t);n!==null&&n.tag===5&&n.type==="form"?Qp(n):ci.r(t)}var el=typeof document>"u"?null:document;function ky(t,n,a){var l=el;if(l&&typeof n=="string"&&n){var d=un(n);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Iy.has(d)||(Iy.add(d),t={rel:t,crossOrigin:a,href:n},l.querySelector(d)===null&&(n=l.createElement("link"),Qt(n,"link",t),St(n),l.head.appendChild(n)))}}function T2(t){ci.D(t),ky("dns-prefetch",t,null)}function E2(t,n){ci.C(t,n),ky("preconnect",t,n)}function S2(t,n,a){ci.L(t,n,a);var l=el;if(l&&t&&n){var d='link[rel="preload"][as="'+un(n)+'"]';n==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+un(a.imageSizes)+'"]')):d+='[href="'+un(t)+'"]';var f=d;switch(n){case"style":f=tl(t);break;case"script":f=nl(t)}Hn.has(f)||(t=S({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Hn.set(f,t),l.querySelector(d)!==null||n==="style"&&l.querySelector(Ao(f))||n==="script"&&l.querySelector(No(f))||(n=l.createElement("link"),Qt(n,"link",t),St(n),l.head.appendChild(n)))}}function A2(t,n){ci.m(t,n);var a=el;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+un(l)+'"][href="'+un(t)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=nl(t)}if(!Hn.has(f)&&(t=S({rel:"modulepreload",href:t},n),Hn.set(f,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(No(f)))return}l=a.createElement("link"),Qt(l,"link",t),St(l),a.head.appendChild(l)}}}function N2(t,n,a){ci.S(t,n,a);var l=el;if(l&&t){var d=bs(l).hoistableStyles,f=tl(t);n=n||"default";var x=d.get(f);if(!x){var T={loading:0,preload:null};if(x=l.querySelector(Ao(f)))T.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Hn.get(f))&&Uf(t,a);var D=x=l.createElement("link");St(D),Qt(D,"link",t),D._p=new Promise(function(F,$){D.onload=F,D.onerror=$}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ku(x,n,l)}x={type:"stylesheet",instance:x,count:1,state:T},d.set(f,x)}}}function C2(t,n){ci.X(t,n);var a=el;if(a&&t){var l=bs(a).hoistableScripts,d=nl(t),f=l.get(d);f||(f=a.querySelector(No(d)),f||(t=S({src:t,async:!0},n),(n=Hn.get(d))&&zf(t,n),f=a.createElement("script"),St(f),Qt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function R2(t,n){ci.M(t,n);var a=el;if(a&&t){var l=bs(a).hoistableScripts,d=nl(t),f=l.get(d);f||(f=a.querySelector(No(d)),f||(t=S({src:t,async:!0,type:"module"},n),(n=Hn.get(d))&&zf(t,n),f=a.createElement("script"),St(f),Qt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function Dy(t,n,a,l){var d=(d=X.current)?Iu(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=tl(a.href),a=bs(d).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=tl(a.href);var f=bs(d).hoistableStyles,x=f.get(t);if(x||(d=d.ownerDocument||d,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,x),(f=d.querySelector(Ao(t)))&&!f._p&&(x.instance=f,x.state.loading=5),Hn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Hn.set(t,a),f||j2(d,t,a,x.state))),n&&l===null)throw Error(r(528,""));return x}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=nl(a),a=bs(d).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function tl(t){return'href="'+un(t)+'"'}function Ao(t){return'link[rel="stylesheet"]['+t+"]"}function Oy(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function j2(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Qt(n,"link",a),St(n),t.head.appendChild(n))}function nl(t){return'[src="'+un(t)+'"]'}function No(t){return"script[async]"+t}function My(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+un(a.href)+'"]');if(l)return n.instance=l,St(l),l;var d=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),St(l),Qt(l,"style",d),ku(l,a.precedence,t),n.instance=l;case"stylesheet":d=tl(a.href);var f=t.querySelector(Ao(d));if(f)return n.state.loading|=4,n.instance=f,St(f),f;l=Oy(a),(d=Hn.get(d))&&Uf(l,d),f=(t.ownerDocument||t).createElement("link"),St(f);var x=f;return x._p=new Promise(function(T,D){x.onload=T,x.onerror=D}),Qt(f,"link",l),n.state.loading|=4,ku(f,a.precedence,t),n.instance=f;case"script":return f=nl(a.src),(d=t.querySelector(No(f)))?(n.instance=d,St(d),d):(l=a,(d=Hn.get(f))&&(l=S({},a),zf(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),St(d),Qt(d,"link",l),t.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,ku(l,a.precedence,t));return n.instance}function ku(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,x=0;x<l.length;x++){var T=l[x];if(T.dataset.precedence===n)f=T;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Uf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function zf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Du=null;function Vy(t,n,a){if(Du===null){var l=new Map,d=Du=new Map;d.set(a,l)}else d=Du,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[vs]||f[Et]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var x=f.getAttribute(n)||"";x=t+x;var T=l.get(x);T?T.push(f):l.set(x,[f])}}return l}function Ly(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function I2(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Py(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function k2(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=tl(l.href),f=n.querySelector(Ao(d));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Ou.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=f,St(f);return}f=n.ownerDocument||n,l=Oy(l),(d=Hn.get(d))&&Uf(l,d),f=f.createElement("link"),St(f);var x=f;x._p=new Promise(function(T,D){x.onload=T,x.onerror=D}),Qt(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ou.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var Bf=0;function D2(t,n){return t.stylesheets&&t.count===0&&Vu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Vu(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+n);0<t.imgBytes&&Bf===0&&(Bf=62500*f2());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Vu(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>Bf?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Ou(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Mu=null;function Vu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Mu=new Map,n.forEach(O2,t),Mu=null,Ou.call(t))}function O2(t,n){if(!(n.state.loading&4)){var a=Mu.get(t);if(a)var l=a.get(null);else{a=new Map,Mu.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var x=d[f];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}d=n.instance,x=d.getAttribute("data-precedence"),f=a.get(x)||l,f===l&&a.set(null,d),a.set(x,d),this.count++,l=Ou.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),n.state.loading|=4}}var Co={$$typeof:pe,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function M2(t,n,a,l,d,f,x,T,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ps(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ps(0),this.hiddenUpdates=ps(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Uy(t,n,a,l,d,f,x,T,D,F,$,te){return t=new M2(t,n,a,x,D,F,$,te,T),n=1,f===!0&&(n|=24),f=wn(3,null,null,n),t.current=f,f.stateNode=t,n=xd(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:n},Td(f),t}function zy(t){return t?(t=Da,t):Da}function By(t,n,a,l,d,f){d=zy(d),l.context===null?l.context=d:l.pendingContext=d,l=Ui(n),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=zi(t,l,n),a!==null&&(pn(a,t,n),ro(a,t,n))}function qy(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function qf(t,n){qy(t,n),(t=t.alternate)&&qy(t,n)}function Hy(t){if(t.tag===13||t.tag===31){var n=Br(t,67108864);n!==null&&pn(n,t,67108864),qf(t,67108864)}}function Fy(t){if(t.tag===13||t.tag===31){var n=Nn();n=Rr(n);var a=Br(t,n);a!==null&&pn(a,t,n),qf(t,n)}}var Lu=!0;function V2(t,n,a,l){var d=U.T;U.T=null;var f=W.p;try{W.p=2,Hf(t,n,a,l)}finally{W.p=f,U.T=d}}function L2(t,n,a,l){var d=U.T;U.T=null;var f=W.p;try{W.p=8,Hf(t,n,a,l)}finally{W.p=f,U.T=d}}function Hf(t,n,a,l){if(Lu){var d=Ff(l);if(d===null)Rf(t,n,l,Pu,a),Yy(t,l);else if(U2(d,t,n,a,l))l.stopPropagation();else if(Yy(t,l),n&4&&-1<P2.indexOf(t)){for(;d!==null;){var f=kn(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var x=ms(f.pendingLanes);if(x!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;x;){var D=1<<31-yt(x);T.entanglements[1]|=D,x&=~D}Ds(f),($e&6)===0&&(bu=an()+500,wo(0))}}break;case 31:case 13:T=Br(f,2),T!==null&&pn(T,f,2),wu(),qf(f,2)}if(f=Ff(l),f===null&&Rf(t,n,l,Pu,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else Rf(t,n,l,null,a)}}function Ff(t){return t=Dn(t),Gf(t)}var Pu=null;function Gf(t){if(Pu=null,t=xs(t),t!==null){var n=h(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=m(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Pu=t,null}function Gy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sr()){case jl:return 2;case Il:return 8;case Ei:case Xh:return 32;case pc:return 268435456;default:return 32}default:return 32}}var Yf=!1,Wi=null,Zi=null,Ji=null,Ro=new Map,jo=new Map,er=[],P2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yy(t,n){switch(t){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":Ro.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":jo.delete(n.pointerId)}}function Io(t,n,a,l,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},n!==null&&(n=kn(n),n!==null&&Hy(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),t)}function U2(t,n,a,l,d){switch(n){case"focusin":return Wi=Io(Wi,t,n,a,l,d),!0;case"dragenter":return Zi=Io(Zi,t,n,a,l,d),!0;case"mouseover":return Ji=Io(Ji,t,n,a,l,d),!0;case"pointerover":var f=d.pointerId;return Ro.set(f,Io(Ro.get(f)||null,t,n,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,jo.set(f,Io(jo.get(f)||null,t,n,a,l,d)),!0}return!1}function Ky(t){var n=xs(t.target);if(n!==null){var a=h(n);if(a!==null){if(n=a.tag,n===13){if(n=m(a),n!==null){t.blockedOn=n,Jn(t.priority,function(){Fy(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,Jn(t.priority,function(){Fy(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Ff(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Hl=l,a.target.dispatchEvent(l),Hl=null}else return n=kn(a),n!==null&&Hy(n),t.blockedOn=a,!1;n.shift()}return!0}function Qy(t,n,a){Uu(t)&&a.delete(n)}function z2(){Yf=!1,Wi!==null&&Uu(Wi)&&(Wi=null),Zi!==null&&Uu(Zi)&&(Zi=null),Ji!==null&&Uu(Ji)&&(Ji=null),Ro.forEach(Qy),jo.forEach(Qy)}function zu(t,n){t.blockedOn===n&&(t.blockedOn=null,Yf||(Yf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,z2)))}var Bu=null;function $y(t){Bu!==t&&(Bu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Bu===t&&(Bu=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],d=t[n+2];if(typeof l!="function"){if(Gf(l||a)===null)continue;break}var f=kn(a);f!==null&&(t.splice(n,3),n-=3,Hd(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function sl(t){function n(D){return zu(D,t)}Wi!==null&&zu(Wi,t),Zi!==null&&zu(Zi,t),Ji!==null&&zu(Ji,t),Ro.forEach(n),jo.forEach(n);for(var a=0;a<er.length;a++){var l=er[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<er.length&&(a=er[0],a.blockedOn===null);)Ky(a),a.blockedOn===null&&er.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],x=d[Pt]||null;if(typeof f=="function")x||$y(a);else if(x){var T=null;if(f&&f.hasAttribute("formAction")){if(d=f,x=f[Pt]||null)T=x.formAction;else if(Gf(d)!==null)continue}else T=x.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),$y(a)}}}function Xy(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(x){return d=x})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function Kf(t){this._internalRoot=t}qu.prototype.render=Kf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=Nn();By(a,l,t,n,null,null)},qu.prototype.unmount=Kf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;By(t.current,2,null,t,null,null),wu(),n[ys]=null}};function qu(t){this._internalRoot=t}qu.prototype.unstable_scheduleHydration=function(t){if(t){var n=wc();t={blockedOn:null,target:t,priority:n};for(var a=0;a<er.length&&n!==0&&n<er[a].priority;a++);er.splice(a,0,t),a===0&&Ky(t)}};var Wy=e.version;if(Wy!=="19.2.0")throw Error(r(527,Wy,"19.2.0"));W.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var B2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{Wn=Hu.inject(B2),Ht=Hu}catch{}}return Do.createRoot=function(t,n){if(!o(t))throw Error(r(299));var a=!1,l="",d=i0,f=r0,x=a0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError)),n=Uy(t,1,!1,null,null,a,l,null,d,f,x,Xy),t[ys]=n.current,Cf(t),new Kf(n)},Do.hydrateRoot=function(t,n,a){if(!o(t))throw Error(r(299));var l=!1,d="",f=i0,x=r0,T=a0,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=Uy(t,1,!0,n,a??null,l,d,D,f,x,T,Xy),n.context=zy(null),a=n.current,l=Nn(),l=Rr(l),d=Ui(l),d.callback=null,zi(a,d,l),a=l,n.current.lanes=a,Nr(n,a),Ds(n),t[ys]=n.current,Cf(t),new qu(n)},Do.version="19.2.0",Do}var lv;function W2(){if(lv)return Xf.exports;lv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Xf.exports=X2(),Xf.exports}var Z2=W2();const J2=()=>{};var ov={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=function(i){const e=[];let s=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},ew=function(i){const e=[];let s=0,r=0;for(;s<i.length;){const o=i[s++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const h=i[s++];e[r++]=String.fromCharCode((o&31)<<6|h&63)}else if(o>239&&o<365){const h=i[s++],m=i[s++],p=i[s++],v=((o&7)<<18|(h&63)<<12|(m&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const h=i[s++],m=i[s++];e[r++]=String.fromCharCode((o&15)<<12|(h&63)<<6|m&63)}}return e.join("")},Hx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const h=i[o],m=o+1<i.length,p=m?i[o+1]:0,v=o+2<i.length,y=v?i[o+2]:0,_=h>>2,S=(h&3)<<4|p>>4;let R=(p&15)<<2|y>>6,q=y&63;v||(q=64,m||(R=64)),r.push(s[_],s[S],s[R],s[q])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(qx(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):ew(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const h=s[i.charAt(o++)],p=o<i.length?s[i.charAt(o)]:0;++o;const y=o<i.length?s[i.charAt(o)]:64;++o;const S=o<i.length?s[i.charAt(o)]:64;if(++o,h==null||p==null||y==null||S==null)throw new tw;const R=h<<2|p>>4;if(r.push(R),y!==64){const q=p<<4&240|y>>2;if(r.push(q),S!==64){const ee=y<<6&192|S;r.push(ee)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class tw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nw=function(i){const e=qx(i);return Hx.encodeByteArray(e,!0)},oh=function(i){return nw(i).replace(/\./g,"")},Fx=function(i){try{return Hx.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=()=>sw().__FIREBASE_DEFAULTS__,rw=()=>{if(typeof process>"u"||typeof ov>"u")return;const i=ov.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},aw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Fx(i[1]);return e&&JSON.parse(e)},Ch=()=>{try{return J2()||iw()||rw()||aw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Gx=i=>Ch()?.emulatorHosts?.[i],lw=i=>{const e=Gx(i);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},Yx=()=>Ch()?.config,Kx=i=>Ch()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qx(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,h=i.sub||i.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...i};return[oh(JSON.stringify(s)),oh(JSON.stringify(m)),""].join(".")}const Bo={};function uw(){const i={prod:[],emulator:[]};for(const e of Object.keys(Bo))Bo[e]?i.emulator.push(e):i.prod.push(e);return i}function hw(i){let e=document.getElementById(i),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),s=!0),{created:s,element:e}}let cv=!1;function $x(i,e){if(typeof window>"u"||typeof document>"u"||!wl(window.location.host)||Bo[i]===e||Bo[i]||cv)return;Bo[i]=e;function s(R){return`__firebase__banner__${R}`}const r="__firebase__banner",h=uw().prod.length>0;function m(){const R=document.getElementById(r);R&&R.remove()}function p(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function v(R,q){R.setAttribute("width","24"),R.setAttribute("id",q),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function y(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{cv=!0,m()},R}function _(R,q){R.setAttribute("id",q),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function S(){const R=hw(r),q=s("text"),ee=document.getElementById(q)||document.createElement("span"),Q=s("learnmore"),Z=document.getElementById(Q)||document.createElement("a"),ce=s("preprendIcon"),re=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const pe=R.element;p(pe),_(Z,Q);const ue=y();v(re,ce),pe.append(re,ee,Z,ue),document.body.appendChild(pe)}h?(ee.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ee.innerText="Preview backend running in this workspace."),ee.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function fw(){const i=Ch()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function pw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yw(){const i=rn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function vw(){return!fw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xw(){try{return typeof indexedDB=="object"}catch{return!1}}function bw(){return new Promise((i,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="FirebaseError";class bi extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=_w,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sc.prototype.create)}}class sc{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},o=`${this.service}/${e}`,h=this.errors[e],m=h?ww(h,r):"Error",p=`${this.serviceName}: ${m} (${o}).`;return new bi(o,p,r)}}function ww(i,e){return i.replace(Tw,(s,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Tw=/\{\$([^}]+)}/g;function Ew(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function aa(i,e){if(i===e)return!0;const s=Object.keys(i),r=Object.keys(e);for(const o of s){if(!r.includes(o))return!1;const h=i[o],m=e[o];if(uv(h)&&uv(m)){if(!aa(h,m))return!1}else if(h!==m)return!1}for(const o of r)if(!s.includes(o))return!1;return!0}function uv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(i){const e=[];for(const[s,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mo(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,h]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(h)}}),e}function Vo(i){const e=i.indexOf("?");if(!e)return"";const s=i.indexOf("#",e);return i.substring(e,s>0?s:void 0)}function Sw(i,e){const s=new Aw(i,e);return s.subscribe.bind(s)}class Aw{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let o;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");Nw(e,["next","error","complete"])?o=e:o={next:e,error:s,complete:r},o.next===void 0&&(o.next=em),o.error===void 0&&(o.error=em),o.complete===void 0&&(o.complete=em);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),h}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nw(i,e){if(typeof i!="object"||i===null)return!1;for(const s of e)if(s in i&&typeof i[s]=="function")return!0;return!1}function em(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(i){return i&&i._delegate?i._delegate:i}class la{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new ow;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jw(e))try{this.getOrInitializeService({instanceIdentifier:na})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const h=this.getOrInitializeService({instanceIdentifier:o});r.resolve(h)}catch{}}}}clearInstance(e=na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=na){return this.instances.has(e)}getOptions(e=na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[h,m]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(h);r===p&&m.resolve(o)}return o}onInit(e,s){const r=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const h=this.instances.get(r);return h&&e(h,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const o of r)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Rw(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=na){return this.component?this.component.multipleInstances?e:na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Rw(i){return i===na?void 0:i}function jw(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Cw(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Be||(Be={}));const kw={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},Dw=Be.INFO,Ow={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},Mw=(i,e,...s)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=Ow[e];if(o)console[o](`[${r}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zm{constructor(e){this.name=e,this._logLevel=Dw,this._logHandler=Mw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const Vw=(i,e)=>e.some(s=>i instanceof s);let hv,dv;function Lw(){return hv||(hv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pw(){return dv||(dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xx=new WeakMap,fm=new WeakMap,Wx=new WeakMap,tm=new WeakMap,Bm=new WeakMap;function Uw(i){const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("success",h),i.removeEventListener("error",m)},h=()=>{s(cr(i.result)),o()},m=()=>{r(i.error),o()};i.addEventListener("success",h),i.addEventListener("error",m)});return e.then(s=>{s instanceof IDBCursor&&Xx.set(s,i)}).catch(()=>{}),Bm.set(e,i),e}function zw(i){if(fm.has(i))return;const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("complete",h),i.removeEventListener("error",m),i.removeEventListener("abort",m)},h=()=>{s(),o()},m=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",h),i.addEventListener("error",m),i.addEventListener("abort",m)});fm.set(i,e)}let mm={get(i,e,s){if(i instanceof IDBTransaction){if(e==="done")return fm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Wx.get(i);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return cr(i[e])},set(i,e,s){return i[e]=s,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Bw(i){mm=i(mm)}function qw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=i.call(nm(this),e,...s);return Wx.set(r,e.sort?e.sort():[e]),cr(r)}:Pw().includes(i)?function(...e){return i.apply(nm(this),e),cr(Xx.get(this))}:function(...e){return cr(i.apply(nm(this),e))}}function Hw(i){return typeof i=="function"?qw(i):(i instanceof IDBTransaction&&zw(i),Vw(i,Lw())?new Proxy(i,mm):i)}function cr(i){if(i instanceof IDBRequest)return Uw(i);if(tm.has(i))return tm.get(i);const e=Hw(i);return e!==i&&(tm.set(i,e),Bm.set(e,i)),e}const nm=i=>Bm.get(i);function Fw(i,e,{blocked:s,upgrade:r,blocking:o,terminated:h}={}){const m=indexedDB.open(i,e),p=cr(m);return r&&m.addEventListener("upgradeneeded",v=>{r(cr(m.result),v.oldVersion,v.newVersion,cr(m.transaction),v)}),s&&m.addEventListener("blocked",v=>s(v.oldVersion,v.newVersion,v)),p.then(v=>{h&&v.addEventListener("close",()=>h()),o&&v.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const Gw=["get","getKey","getAll","getAllKeys","count"],Yw=["put","add","delete","clear"],sm=new Map;function fv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(sm.get(e))return sm.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,o=Yw.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Gw.includes(s)))return;const h=async function(m,...p){const v=this.transaction(m,o?"readwrite":"readonly");let y=v.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[s](...p),o&&v.done]))[0]};return sm.set(e,h),h}Bw(i=>({...i,get:(e,s,r)=>fv(e,s)||i.get(e,s,r),has:(e,s)=>!!fv(e,s)||i.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(Qw(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function Qw(i){return i.getComponent()?.type==="VERSION"}const gm="@firebase/app",mv="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new zm("@firebase/app"),$w="@firebase/app-compat",Xw="@firebase/analytics-compat",Ww="@firebase/analytics",Zw="@firebase/app-check-compat",Jw="@firebase/app-check",eT="@firebase/auth",tT="@firebase/auth-compat",nT="@firebase/database",sT="@firebase/data-connect",iT="@firebase/database-compat",rT="@firebase/functions",aT="@firebase/functions-compat",lT="@firebase/installations",oT="@firebase/installations-compat",cT="@firebase/messaging",uT="@firebase/messaging-compat",hT="@firebase/performance",dT="@firebase/performance-compat",fT="@firebase/remote-config",mT="@firebase/remote-config-compat",gT="@firebase/storage",pT="@firebase/storage-compat",yT="@firebase/firestore",vT="@firebase/ai",xT="@firebase/firestore-compat",bT="firebase",_T="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",wT={[gm]:"fire-core",[$w]:"fire-core-compat",[Ww]:"fire-analytics",[Xw]:"fire-analytics-compat",[Jw]:"fire-app-check",[Zw]:"fire-app-check-compat",[eT]:"fire-auth",[tT]:"fire-auth-compat",[nT]:"fire-rtdb",[sT]:"fire-data-connect",[iT]:"fire-rtdb-compat",[rT]:"fire-fn",[aT]:"fire-fn-compat",[lT]:"fire-iid",[oT]:"fire-iid-compat",[cT]:"fire-fcm",[uT]:"fire-fcm-compat",[hT]:"fire-perf",[dT]:"fire-perf-compat",[fT]:"fire-rc",[mT]:"fire-rc-compat",[gT]:"fire-gcs",[pT]:"fire-gcs-compat",[yT]:"fire-fst",[xT]:"fire-fst-compat",[vT]:"fire-vertex","fire-js":"fire-js",[bT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new Map,TT=new Map,ym=new Map;function gv(i,e){try{i.container.addComponent(e)}catch(s){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,s)}}function gl(i){const e=i.name;if(ym.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;ym.set(e,i);for(const s of ch.values())gv(s,i);for(const s of TT.values())gv(s,i);return!0}function qm(i,e){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(e)}function Gn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ur=new sc("app","Firebase",ET);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,s,r){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new la("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=_T;function Zx(i,e={}){let s=i;typeof e!="object"&&(e={name:e});const r={name:pm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw ur.create("bad-app-name",{appName:String(o)});if(s||(s=Yx()),!s)throw ur.create("no-options");const h=ch.get(o);if(h){if(aa(s,h.options)&&aa(r,h.config))return h;throw ur.create("duplicate-app",{appName:o})}const m=new Iw(o);for(const v of ym.values())m.addComponent(v);const p=new ST(s,r,m);return ch.set(o,p),p}function Jx(i=pm){const e=ch.get(i);if(!e&&i===pm&&Yx())return Zx();if(!e)throw ur.create("no-app",{appName:i});return e}function hr(i,e,s){let r=wT[i]??i;s&&(r+=`-${s}`);const o=r.match(/\s|\//),h=e.match(/\s|\//);if(o||h){const m=[`Unable to register library "${r}" with version "${e}":`];o&&m.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(m.join(" "));return}gl(new la(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="firebase-heartbeat-database",NT=1,Ko="firebase-heartbeat-store";let im=null;function eb(){return im||(im=Fw(AT,NT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Ko)}catch(s){console.warn(s)}}}}).catch(i=>{throw ur.create("idb-open",{originalErrorMessage:i.message})})),im}async function CT(i){try{const s=(await eb()).transaction(Ko),r=await s.objectStore(Ko).get(tb(i));return await s.done,r}catch(e){if(e instanceof bi)gi.warn(e.message);else{const s=ur.create("idb-get",{originalErrorMessage:e?.message});gi.warn(s.message)}}}async function pv(i,e){try{const r=(await eb()).transaction(Ko,"readwrite");await r.objectStore(Ko).put(e,tb(i)),await r.done}catch(s){if(s instanceof bi)gi.warn(s.message);else{const r=ur.create("idb-set",{originalErrorMessage:s?.message});gi.warn(r.message)}}}function tb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=1024,jT=30;class IT{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new DT(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=yv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>jT){const o=OT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){gi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yv(),{heartbeatsToSend:s,unsentEntries:r}=kT(this._heartbeatsCache.heartbeats),o=oh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return gi.warn(e),""}}}function yv(){return new Date().toISOString().substring(0,10)}function kT(i,e=RT){const s=[];let r=i.slice();for(const o of i){const h=s.find(m=>m.agent===o.agent);if(h){if(h.dates.push(o.date),vv(s)>e){h.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),vv(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class DT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xw()?bw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await CT(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function vv(i){return oh(JSON.stringify({version:2,heartbeats:i})).length}function OT(i){if(i.length===0)return-1;let e=0,s=i[0].date;for(let r=1;r<i.length;r++)i[r].date<s&&(s=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(i){gl(new la("platform-logger",e=>new Kw(e),"PRIVATE")),gl(new la("heartbeat",e=>new IT(e),"PRIVATE")),hr(gm,mv,i),hr(gm,mv,"esm2020"),hr("fire-js","")}MT("");function nb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VT=nb,sb=new sc("auth","Firebase",nb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new zm("@firebase/auth");function LT(i,...e){uh.logLevel<=Be.WARN&&uh.warn(`Auth (${Tl}): ${i}`,...e)}function Wu(i,...e){uh.logLevel<=Be.ERROR&&uh.error(`Auth (${Tl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(i,...e){throw Hm(i,...e)}function Ms(i,...e){return Hm(i,...e)}function ib(i,e,s){const r={...VT(),[e]:s};return new sc("auth","Firebase",r).create(e,{appName:i.name})}function mi(i){return ib(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hm(i,...e){if(typeof i!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(s,...r)}return sb.create(i,...e)}function Ne(i,e,...s){if(!i)throw Hm(e,...s)}function di(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Wu(e),new Error(e)}function pi(i,e){i||di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(){return typeof self<"u"&&self.location?.href||""}function PT(){return xv()==="http:"||xv()==="https:"}function xv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PT()||gw()||"connection"in navigator)?navigator.onLine:!0}function zT(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,s){this.shortDelay=e,this.longDelay=s,pi(s>e,"Short delay should be less than long delay!"),this.isMobile=dw()||pw()}get(){return UT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(i,e){pi(i.emulator,"Emulator should always be set here");const{url:s}=i.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HT=new rc(3e4,6e4);function _i(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function wi(i,e,s,r,o={}){return ab(i,o,async()=>{let h={},m={};r&&(e==="GET"?m=r:h={body:JSON.stringify(r)});const p=ic({key:i.config.apiKey,...m}).slice(1),v=await i._getAdditionalHeaders();v["Content-Type"]="application/json",i.languageCode&&(v["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:v,...h};return mw()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&wl(i.emulatorConfig.host)&&(y.credentials="include"),rb.fetch()(await lb(i,i.config.apiHost,s,p),y)})}async function ab(i,e,s){i._canInitEmulator=!1;const r={...BT,...e};try{const o=new GT(i),h=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const m=await h.json();if("needConfirmation"in m)throw Fu(i,"account-exists-with-different-credential",m);if(h.ok&&!("errorMessage"in m))return m;{const p=h.ok?m.errorMessage:m.error.message,[v,y]=p.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fu(i,"credential-already-in-use",m);if(v==="EMAIL_EXISTS")throw Fu(i,"email-already-in-use",m);if(v==="USER_DISABLED")throw Fu(i,"user-disabled",m);const _=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw ib(i,_,y);us(i,_)}}catch(o){if(o instanceof bi)throw o;us(i,"network-request-failed",{message:String(o)})}}async function ac(i,e,s,r,o={}){const h=await wi(i,e,s,r,o);return"mfaPendingCredential"in h&&us(i,"multi-factor-auth-required",{_serverResponse:h}),h}async function lb(i,e,s,r){const o=`${e}${s}?${r}`,h=i,m=h.config.emulator?Fm(i.config,o):`${i.config.apiScheme}://${o}`;return qT.includes(s)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(m).toString():m}function FT(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(Ms(this.auth,"network-request-failed")),HT.get())})}}function Fu(i,e,s){const r={appName:i.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const o=Ms(i,e,r);return o.customData._tokenResponse=s,o}function bv(i){return i!==void 0&&i.enterprise!==void 0}class YT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return FT(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KT(i,e){return wi(i,"GET","/v2/recaptchaConfig",_i(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QT(i,e){return wi(i,"POST","/v1/accounts:delete",e)}async function hh(i,e){return wi(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $T(i,e=!1){const s=Lt(i),r=await s.getIdToken(e),o=Gm(r);Ne(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const h=typeof o.firebase=="object"?o.firebase:void 0,m=h?.sign_in_provider;return{claims:o,token:r,authTime:qo(rm(o.auth_time)),issuedAtTime:qo(rm(o.iat)),expirationTime:qo(rm(o.exp)),signInProvider:m||null,signInSecondFactor:h?.sign_in_second_factor||null}}function rm(i){return Number(i)*1e3}function Gm(i){const[e,s,r]=i.split(".");if(e===void 0||s===void 0||r===void 0)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{const o=Fx(s);return o?JSON.parse(o):(Wu("Failed to decode base64 JWT payload"),null)}catch(o){return Wu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function _v(i){const e=Gm(i);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(i,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof bi&&XT(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function XT({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=qo(this.lastLoginAt),this.creationTime=qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(i){const e=i.auth,s=await i.getIdToken(),r=await Qo(i,hh(e,{idToken:s}));Ne(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const h=o.providerUserInfo?.length?ob(o.providerUserInfo):[],m=JT(i.providerData,h),p=i.isAnonymous,v=!(i.email&&o.passwordHash)&&!m?.length,y=p?v:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:m,metadata:new xm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,_)}async function ZT(i){const e=Lt(i);await dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JT(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function ob(i){return i.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eE(i,e){const s=await ab(i,{},async()=>{const r=ic({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:h}=i.config,m=await lb(i,o,"/v1/token",`key=${h}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:p,body:r};return i.emulatorConfig&&wl(i.emulatorConfig.host)&&(v.credentials="include"),rb.fetch()(m,v)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function tE(i,e){return wi(i,"POST","/v2/accounts:revokeToken",_i(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_v(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const s=_v(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:o,expiresIn:h}=await eE(e,s);this.updateTokensAndExpiration(r,o,Number(h))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:o,expirationTime:h}=s,m=new ul;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),m.refreshToken=r),o&&(Ne(typeof o=="string","internal-error",{appName:e}),m.accessToken=o),h&&(Ne(typeof h=="number","internal-error",{appName:e}),m.expirationTime=h),m}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ul,this.toJSON())}_performRefresh(){return di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(i,e){Ne(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class cs{constructor({uid:e,auth:s,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new WT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await Qo(this,this.stsTokenManager.getToken(this.auth,e));return Ne(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return $T(this,e)}reload(){return ZT(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new cs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await dh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(mi(this.auth));const e=await this.getIdToken();return await Qo(this,QT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const r=s.displayName??void 0,o=s.email??void 0,h=s.phoneNumber??void 0,m=s.photoURL??void 0,p=s.tenantId??void 0,v=s._redirectEventId??void 0,y=s.createdAt??void 0,_=s.lastLoginAt??void 0,{uid:S,emailVerified:R,isAnonymous:q,providerData:ee,stsTokenManager:Q}=s;Ne(S&&Q,e,"internal-error");const Z=ul.fromJSON(this.name,Q);Ne(typeof S=="string",e,"internal-error"),nr(r,e.name),nr(o,e.name),Ne(typeof R=="boolean",e,"internal-error"),Ne(typeof q=="boolean",e,"internal-error"),nr(h,e.name),nr(m,e.name),nr(p,e.name),nr(v,e.name),nr(y,e.name),nr(_,e.name);const ce=new cs({uid:S,auth:e,email:o,emailVerified:R,displayName:r,isAnonymous:q,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:Z,createdAt:y,lastLoginAt:_});return ee&&Array.isArray(ee)&&(ce.providerData=ee.map(re=>({...re}))),v&&(ce._redirectEventId=v),ce}static async _fromIdTokenResponse(e,s,r=!1){const o=new ul;o.updateFromServerResponse(s);const h=new cs({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await dh(h),h}static async _fromGetAccountInfoResponse(e,s,r){const o=s.users[0];Ne(o.localId!==void 0,"internal-error");const h=o.providerUserInfo!==void 0?ob(o.providerUserInfo):[],m=!(o.email&&o.passwordHash)&&!h?.length,p=new ul;p.updateFromIdToken(r);const v=new cs({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:m}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new xm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!h?.length};return Object.assign(v,y),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=new Map;function fi(i){pi(i instanceof Function,"Expected a class definition");let e=wv.get(i);return e?(pi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,wv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}cb.type="NONE";const Tv=cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(i,e,s){return`firebase:${i}:${e}:${s}`}class hl{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:o,name:h}=this.auth;this.fullUserKey=Zu(this.userKey,o.apiKey,h),this.fullPersistenceKey=Zu("persistence",o.apiKey,h),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await hh(this.auth,{idToken:e}).catch(()=>{});return s?cs._fromGetAccountInfoResponse(this.auth,s,e):null}return cs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new hl(fi(Tv),e,r);const o=(await Promise.all(s.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let h=o[0]||fi(Tv);const m=Zu(r,e.config.apiKey,e.name);let p=null;for(const y of s)try{const _=await y._get(m);if(_){let S;if(typeof _=="string"){const R=await hh(e,{idToken:_}).catch(()=>{});if(!R)break;S=await cs._fromGetAccountInfoResponse(e,R,_)}else S=cs._fromJSON(e,_);y!==h&&(p=S),h=y;break}}catch{}const v=o.filter(y=>y._shouldAllowMigration);return!h._shouldAllowMigration||!v.length?new hl(h,e,r):(h=v[0],p&&await h._set(m,p.toJSON()),await Promise.all(s.map(async y=>{if(y!==h)try{await y._remove(m)}catch{}})),new hl(h,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ub(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gb(e))return"Blackberry";if(pb(e))return"Webos";if(hb(e))return"Safari";if((e.includes("chrome/")||db(e))&&!e.includes("edge/"))return"Chrome";if(mb(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(s);if(r?.length===2)return r[1]}return"Other"}function ub(i=rn()){return/firefox\//i.test(i)}function hb(i=rn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function db(i=rn()){return/crios\//i.test(i)}function fb(i=rn()){return/iemobile/i.test(i)}function mb(i=rn()){return/android/i.test(i)}function gb(i=rn()){return/blackberry/i.test(i)}function pb(i=rn()){return/webos/i.test(i)}function Ym(i=rn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function nE(i=rn()){return Ym(i)&&!!window.navigator?.standalone}function sE(){return yw()&&document.documentMode===10}function yb(i=rn()){return Ym(i)||mb(i)||pb(i)||gb(i)||/windows phone/i.test(i)||fb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(i,e=[]){let s;switch(i){case"Browser":s=Ev(rn());break;case"Worker":s=`${Ev(rn())}-${i}`;break;default:s=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Tl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=h=>new Promise((m,p)=>{try{const v=e(h);m(v)}catch(v){p(v)}});r.onAbort=s,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rE(i,e={}){return wi(i,"GET","/v2/passwordPolicy",_i(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=6;class lE{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??aE,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),o&&(s.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,o,h){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,s,r,o){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sv(this),this.idTokenSubscription=new Sv(this),this.beforeStateQueue=new iE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=fi(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await hl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await hh(this,{idToken:e}),r=await cs._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Gn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,m=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===m)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(h){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await dh(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(mi(this));const s=e?Lt(e):null;return s&&Ne(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rE(this),s=new lE(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sc("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await tE(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&fi(e)||this._popupRedirectResolver;Ne(s,this,"argument-error"),this.redirectPersistenceManager=await hl.create(this,[fi(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,o){if(this._deleted)return()=>{};const h=typeof s=="function"?s:s.next.bind(s);let m=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(p,this,"internal-error"),p.then(()=>{m||h(this.currentUser)}),typeof s=="function"){const v=e.addObserver(s,r,o);return()=>{m=!0,v()}}else{const v=e.addObserver(s);return()=>{m=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&LT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _r(i){return Lt(i)}class Sv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sw(s=>this.observer=s)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cE(i){Rh=i}function xb(i){return Rh.loadJS(i)}function uE(){return Rh.recaptchaEnterpriseScript}function hE(){return Rh.gapiScript}function dE(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class fE{constructor(){this.enterprise=new mE}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class mE{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const gE="recaptcha-enterprise",bb="NO_RECAPTCHA";class pE{constructor(e){this.type=gE,this.auth=_r(e)}async verify(e="verify",s=!1){async function r(h){if(!s){if(h.tenantId==null&&h._agentRecaptchaConfig!=null)return h._agentRecaptchaConfig.siteKey;if(h.tenantId!=null&&h._tenantRecaptchaConfigs[h.tenantId]!==void 0)return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(m,p)=>{KT(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new YT(v);return h.tenantId==null?h._agentRecaptchaConfig=y:h._tenantRecaptchaConfigs[h.tenantId]=y,m(y.siteKey)}}).catch(v=>{p(v)})})}function o(h,m,p){const v=window.grecaptcha;bv(v)?v.enterprise.ready(()=>{v.enterprise.execute(h,{action:e}).then(y=>{m(y)}).catch(()=>{m(bb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fE().execute("siteKey",{action:"verify"}):new Promise((h,m)=>{r(this.auth).then(p=>{if(!s&&bv(window.grecaptcha))o(p,h,m);else{if(typeof window>"u"){m(new Error("RecaptchaVerifier is only supported in browser"));return}let v=uE();v.length!==0&&(v+=p),xb(v).then(()=>{o(p,h,m)}).catch(y=>{m(y)})}}).catch(p=>{m(p)})})}}async function Av(i,e,s,r=!1,o=!1){const h=new pE(i);let m;if(o)m=bb;else try{m=await h.verify(s)}catch{m=await h.verify(s,!0)}const p={...e};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const v=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:y,captchaResponse:m,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const v=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:m,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:m}):Object.assign(p,{captchaResponse:m}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function fh(i,e,s,r,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await Av(i,e,s,s==="getOobCode");return r(i,h)}else return r(i,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Av(i,e,s,s==="getOobCode");return r(i,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(i,e){const s=qm(i,"auth");if(s.isInitialized()){const o=s.getImmediate(),h=s.getOptions();if(aa(h,e??{}))return o;us(o,"already-initialized")}return s.initialize({options:e})}function vE(i,e){const s=e?.persistence||[],r=(Array.isArray(s)?s:[s]).map(fi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function xE(i,e,s){const r=_r(i);Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,h=_b(e),{host:m,port:p}=bE(e),v=p===null?"":`:${p}`,y={url:`${h}//${m}${v}/`},_=Object.freeze({host:m,port:p,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ne(aa(y,r.config.emulator)&&aa(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,wl(m)?(Qx(`${h}//${m}${v}`),$x("Auth",!0)):_E()}function _b(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function bE(i){const e=_b(i),s=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const h=o[1];return{host:h,port:Nv(r.substr(h.length+1))}}else{const[h,m]=r.split(":");return{host:h,port:Nv(m)}}}function Nv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function _E(){function i(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,s){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}}async function wE(i,e){return wi(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TE(i,e){return ac(i,"POST","/v1/accounts:signInWithPassword",_i(i,e))}async function EE(i,e){return wi(i,"POST","/v1/accounts:sendOobCode",_i(i,e))}async function SE(i,e){return EE(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AE(i,e){return ac(i,"POST","/v1/accounts:signInWithEmailLink",_i(i,e))}async function NE(i,e){return ac(i,"POST","/v1/accounts:signInWithEmailLink",_i(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends Km{constructor(e,s,r,o=null){super("password",r),this._email=e,this._password=s,this._tenantId=o}static _fromEmailAndPassword(e,s){return new $o(e,s,"password")}static _fromEmailAndCode(e,s,r=null){return new $o(e,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fh(e,s,"signInWithPassword",TE);case"emailLink":return AE(e,{email:this._email,oobCode:this._password});default:us(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fh(e,r,"signUpPassword",wE);case"emailLink":return NE(e,{idToken:s,email:this._email,oobCode:this._password});default:us(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(i,e){return ac(i,"POST","/v1/accounts:signInWithIdp",_i(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="http://localhost";class oa extends Km{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):us("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...h}=s;if(!r||!o)return null;const m=new oa(r,o);return m.idToken=h.idToken||void 0,m.accessToken=h.accessToken||void 0,m.secret=h.secret,m.nonce=h.nonce,m.pendingToken=h.pendingToken||null,m}_getIdTokenResponse(e){const s=this.buildRequest();return dl(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,dl(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,dl(e,s)}buildRequest(){const e={requestUri:CE,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=ic(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jE(i){const e=Mo(Vo(i)).link,s=e?Mo(Vo(e)).deep_link_id:null,r=Mo(Vo(i)).deep_link_id;return(r?Mo(Vo(r)).link:null)||r||s||e||i}class Qm{constructor(e){const s=Mo(Vo(e)),r=s.apiKey??null,o=s.oobCode??null,h=RE(s.mode??null);Ne(r&&o&&h,"argument-error"),this.apiKey=r,this.operation=h,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(e){const s=jE(e);try{return new Qm(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.providerId=El.PROVIDER_ID}static credential(e,s){return $o._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const r=Qm.parseLink(s);return Ne(r,"argument-error"),$o._fromEmailAndCode(e,r.code,r.tenantId)}}El.PROVIDER_ID="password";El.EMAIL_PASSWORD_SIGN_IN_METHOD="password";El.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc extends wb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends lc{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return oa._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return rr.credential(s,r)}catch{return null}}}rr.GOOGLE_SIGN_IN_METHOD="google.com";rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends lc{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends lc{constructor(){super("twitter.com")}static credential(e,s){return oa._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return lr.credential(s,r)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(i,e){return ac(i,"POST","/v1/accounts:signUp",_i(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,o=!1){const h=await cs._fromIdTokenResponse(e,r,o),m=Cv(r);return new ca({user:h,providerId:m,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const o=Cv(r);return new ca({user:e,providerId:o,_tokenResponse:r,operationType:s})}}function Cv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends bi{constructor(e,s,r,o){super(s.code,s.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,mh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,o){return new mh(e,s,r,o)}}function Tb(i,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(i):s._getIdTokenResponse(i)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?mh._fromErrorAndOperation(i,h,e,r):h})}async function kE(i,e,s=!1){const r=await Qo(i,e._linkToIdToken(i.auth,await i.getIdToken()),s);return ca._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DE(i,e,s=!1){const{auth:r}=i;if(Gn(r.app))return Promise.reject(mi(r));const o="reauthenticate";try{const h=await Qo(i,Tb(r,o,e,i),s);Ne(h.idToken,r,"internal-error");const m=Gm(h.idToken);Ne(m,r,"internal-error");const{sub:p}=m;return Ne(i.uid===p,r,"user-mismatch"),ca._forOperation(i,o,h)}catch(h){throw h?.code==="auth/user-not-found"&&us(r,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(i,e,s=!1){if(Gn(i.app))return Promise.reject(mi(i));const r="signIn",o=await Tb(i,r,e),h=await ca._fromIdTokenResponse(i,r,o);return s||await i._updateCurrentUser(h.user),h}async function OE(i,e){return Eb(_r(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sb(i){const e=_r(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ME(i,e,s){const r=_r(i);await fh(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",SE)}async function VE(i,e,s){if(Gn(i.app))return Promise.reject(mi(i));const r=_r(i),m=await fh(r,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IE).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&Sb(i),v}),p=await ca._fromIdTokenResponse(r,"signIn",m);return await r._updateCurrentUser(p.user),p}function LE(i,e,s){return Gn(i.app)?Promise.reject(mi(i)):OE(Lt(i),El.credential(e,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Sb(i),r})}function PE(i,e,s,r){return Lt(i).onIdTokenChanged(e,s,r)}function UE(i,e,s){return Lt(i).beforeAuthStateChanged(e,s)}function zE(i,e,s,r){return Lt(i).onAuthStateChanged(e,s,r)}function BE(i){return Lt(i).signOut()}const gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=1e3,HE=10;class Nb extends Ab{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),o=this.localCache[s];r!==o&&e(s,o,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((m,p,v)=>{this.notifyListeners(m,v)});return}const r=e.key;s?this.detachListener():this.stopPolling();const o=()=>{const m=this.storage.getItem(r);!s&&this.localCache[r]===m||this.notifyListeners(r,m)},h=this.storage.getItem(r);sE()&&h!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,HE):o()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},qE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nb.type="LOCAL";const FE=Nb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb extends Ab{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Cb.type="SESSION";const Rb=Cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(o=>o.isListeningto(e));if(s)return s;const r=new jh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:o,data:h}=s.data,m=this.handlersMap[o];if(!m?.size)return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(m).map(async y=>y(s.origin,h)),v=await GE(p);s.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:v})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(i="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return i+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let h,m;return new Promise((p,v)=>{const y=$m("",20);o.port1.start();const _=setTimeout(()=>{v(new Error("unsupported_event"))},r);m={messageChannel:o,onMessage(S){const R=S;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(_),h=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),p(R.data.response);break;default:clearTimeout(_),clearTimeout(h),v(new Error("invalid_response"));break}}},this.handlers.add(m),o.port1.addEventListener("message",m.onMessage),this.target.postMessage({eventType:e,eventId:y,data:s},[o.port2])}).finally(()=>{m&&this.removeMessageHandler(m)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(){return window}function KE(i){Vs().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(){return typeof Vs().WorkerGlobalScope<"u"&&typeof Vs().importScripts=="function"}async function QE(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $E(){return navigator?.serviceWorker?.controller||null}function XE(){return jb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="firebaseLocalStorageDb",WE=1,ph="firebaseLocalStorage",kb="fbase_key";class oc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Ih(i,e){return i.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function ZE(){const i=indexedDB.deleteDatabase(Ib);return new oc(i).toPromise()}function bm(){const i=indexedDB.open(Ib,WE);return new Promise((e,s)=>{i.addEventListener("error",()=>{s(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(ph,{keyPath:kb})}catch(o){s(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(ph)?e(r):(r.close(),await ZE(),e(await bm()))})})}async function Rv(i,e,s){const r=Ih(i,!0).put({[kb]:e,value:s});return new oc(r).toPromise()}async function JE(i,e){const s=Ih(i,!1).get(e),r=await new oc(s).toPromise();return r===void 0?null:r.value}function jv(i,e){const s=Ih(i,!0).delete(e);return new oc(s).toPromise()}const eS=800,tS=3;class Db{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bm(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>tS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jh._getInstance(XE()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await QE(),!this.activeServiceWorker)return;this.sender=new YE(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$E()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bm();return await Rv(e,gh,"1"),await jv(e,gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rv(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>JE(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>jv(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const h=Ih(o,!1).getAll();return new oc(h).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:h}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(h)&&(this.notifyListeners(o,h),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Db.type="LOCAL";const nS=Db;new rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(i,e){return e?fi(e):(Ne(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends Km{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dl(e,this._buildIdpRequest())}_linkToIdToken(e,s){return dl(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function iS(i){return Eb(i.auth,new Xm(i),i.bypassAuthState)}function rS(i){const{auth:e,user:s}=i;return Ne(s,e,"internal-error"),DE(s,new Xm(i),i.bypassAuthState)}async function aS(i){const{auth:e,user:s}=i;return Ne(s,e,"internal-error"),kE(s,new Xm(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,s,r,o,h=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:o,tenantId:h,error:m,type:p}=e;if(m){this.reject(m);return}const v={auth:this.auth,requestUri:s,sessionId:r,tenantId:h||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(v))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iS;case"linkViaPopup":case"linkViaRedirect":return aS;case"reauthViaPopup":case"reauthViaRedirect":return rS;default:us(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=new rc(2e3,1e4);class cl extends Ob{constructor(e,s,r,o,h){super(e,s,o,h),this.provider=r,this.authWindow=null,this.pollId=null,cl.currentPopupAction&&cl.currentPopupAction.cancel(),cl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=$m();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lS.get())};e()}}cl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="pendingRedirect",Ju=new Map;class cS extends Ob{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=Ju.get(this.auth._key());if(!e){try{const r=await uS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}Ju.set(this.auth._key(),e)}return this.bypassAuthState||Ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uS(i,e){const s=fS(e),r=dS(i);if(!await r._isAvailable())return!1;const o=await r._get(s)==="true";return await r._remove(s),o}function hS(i,e){Ju.set(i._key(),e)}function dS(i){return fi(i._redirectPersistence)}function fS(i){return Zu(oS,i.config.apiKey,i.name)}async function mS(i,e,s=!1){if(Gn(i.app))return Promise.reject(mi(i));const r=_r(i),o=sS(r,e),m=await new cS(r,o,s).execute();return m&&!s&&(delete m.user._redirectEventId,await r._persistUserIfCurrent(m.user),await r._setRedirectUser(null,e)),m}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=600*1e3;class pS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yS(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!Mb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";s.onError(Ms(this.auth,r))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iv(e))}saveEventToCache(e){this.cachedEventUids.add(Iv(e)),this.lastProcessedEventTime=Date.now()}}function Iv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Mb({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function yS(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(i,e={}){return wi(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bS=/^https?/;async function _S(i){if(i.config.emulator)return;const{authorizedDomains:e}=await vS(i);for(const s of e)try{if(wS(s))return}catch{}us(i,"unauthorized-domain")}function wS(i){const e=vm(),{protocol:s,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const m=new URL(i);return m.hostname===""&&r===""?s==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&m.hostname===r}if(!bS.test(s))return!1;if(xS.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=new rc(3e4,6e4);function kv(){const i=Vs().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let s=0;s<i.CP.length;s++)i.CP[s]=null}}function ES(i){return new Promise((e,s)=>{function r(){kv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kv(),s(Ms(i,"network-request-failed"))},timeout:TS.get()})}if(Vs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Vs().gapi?.load)r();else{const o=dE("iframefcb");return Vs()[o]=()=>{gapi.load?r():s(Ms(i,"network-request-failed"))},xb(`${hE()}?onload=${o}`).catch(h=>s(h))}}).catch(e=>{throw eh=null,e})}let eh=null;function SS(i){return eh=eh||ES(i),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=new rc(5e3,15e3),NS="__/auth/iframe",CS="emulator/auth/iframe",RS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IS(i){const e=i.config;Ne(e.authDomain,i,"auth-domain-config-required");const s=e.emulator?Fm(e,CS):`https://${i.config.authDomain}/${NS}`,r={apiKey:e.apiKey,appName:i.name,v:Tl},o=jS.get(i.config.apiHost);o&&(r.eid=o);const h=i._getFrameworks();return h.length&&(r.fw=h.join(",")),`${s}?${ic(r).slice(1)}`}async function kS(i){const e=await SS(i),s=Vs().gapi;return Ne(s,i,"internal-error"),e.open({where:document.body,url:IS(i),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RS,dontclear:!0},r=>new Promise(async(o,h)=>{await r.restyle({setHideOnLeave:!1});const m=Ms(i,"network-request-failed"),p=Vs().setTimeout(()=>{h(m)},AS.get());function v(){Vs().clearTimeout(p),o(r)}r.ping(v).then(v,()=>{h(m)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OS=500,MS=600,VS="_blank",LS="http://localhost";class Dv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PS(i,e,s,r=OS,o=MS){const h=Math.max((window.screen.availHeight-o)/2,0).toString(),m=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const v={...DS,width:r.toString(),height:o.toString(),top:h,left:m},y=rn().toLowerCase();s&&(p=db(y)?VS:s),ub(y)&&(e=e||LS,v.scrollbars="yes");const _=Object.entries(v).reduce((R,[q,ee])=>`${R}${q}=${ee},`,"");if(nE(y)&&p!=="_self")return US(e||"",p),new Dv(null);const S=window.open(e||"",p,_);Ne(S,i,"popup-blocked");try{S.focus()}catch{}return new Dv(S)}function US(i,e){const s=document.createElement("a");s.href=i,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="__/auth/handler",BS="emulator/auth/handler",qS=encodeURIComponent("fac");async function Ov(i,e,s,r,o,h){Ne(i.config.authDomain,i,"auth-domain-config-required"),Ne(i.config.apiKey,i,"invalid-api-key");const m={apiKey:i.config.apiKey,appName:i.name,authType:s,redirectUrl:r,v:Tl,eventId:o};if(e instanceof wb){e.setDefaultLanguage(i.languageCode),m.providerId=e.providerId||"",Ew(e.getCustomParameters())||(m.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,S]of Object.entries({}))m[_]=S}if(e instanceof lc){const _=e.getScopes().filter(S=>S!=="");_.length>0&&(m.scopes=_.join(","))}i.tenantId&&(m.tid=i.tenantId);const p=m;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const v=await i._getAppCheckToken(),y=v?`#${qS}=${encodeURIComponent(v)}`:"";return`${HS(i)}?${ic(p).slice(1)}${y}`}function HS({config:i}){return i.emulator?Fm(i,BS):`https://${i.authDomain}/${zS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="webStorageSupport";class FS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rb,this._completeRedirectFn=mS,this._overrideRedirectResult=hS}async _openPopup(e,s,r,o){pi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const h=await Ov(e,s,r,vm(),o);return PS(e,h,$m())}async _openRedirect(e,s,r,o){await this._originValidation(e);const h=await Ov(e,s,r,vm(),o);return KE(h),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:o,promise:h}=this.eventManagers[s];return o?Promise.resolve(o):(pi(h,"If manager is not set, promise should be"),h)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await kS(e),r=new pS(e);return s.register("authEvent",o=>(Ne(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(am,{type:am},o=>{const h=o?.[0]?.[am];h!==void 0&&s(!!h),us(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=_S(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return yb()||hb()||Ym()}}const GS=FS;var Mv="@firebase/auth",Vv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QS(i){gl(new la("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),h=e.getProvider("app-check-internal"),{apiKey:m,authDomain:p}=r.options;Ne(m&&!m.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:m,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vb(i)},y=new oE(r,o,h,v);return vE(y,s),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),gl(new la("auth-internal",e=>{const s=_r(e.getProvider("auth").getImmediate());return(r=>new YS(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),hr(Mv,Vv,KS(i)),hr(Mv,Vv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=300,XS=Kx("authIdTokenMaxAge")||$S;let Lv=null;const WS=i=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>XS)return;const o=s?.token;Lv!==o&&(Lv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ZS(i=Jx()){const e=qm(i,"auth");if(e.isInitialized())return e.getImmediate();const s=yE(i,{popupRedirectResolver:GS,persistence:[nS,FE,Rb]}),r=Kx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(r,location.origin);if(location.origin===h.origin){const m=WS(h.toString());UE(s,m,()=>m(s.currentUser)),PE(s,p=>m(p))}}const o=Gx("auth");return o&&xE(s,`http://${o}`),s}function JS(){return document.getElementsByTagName("head")?.[0]??document}cE({loadJS(i){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const h=Ms("internal-error");h.customData=o,s(h)},r.type="text/javascript",r.charset="UTF-8",JS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QS("Browser");var eA="firebase",tA="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr(eA,tA,"app");var Pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dr,Vb;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,w){function N(){}N.prototype=w.prototype,j.F=w.prototype,j.prototype=new N,j.prototype.constructor=j,j.D=function(k,I,M){for(var E=Array(arguments.length-2),le=2;le<arguments.length;le++)E[le-2]=arguments[le];return w.prototype[I].apply(k,E)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(j,w,N){N||(N=0);const k=Array(16);if(typeof w=="string")for(var I=0;I<16;++I)k[I]=w.charCodeAt(N++)|w.charCodeAt(N++)<<8|w.charCodeAt(N++)<<16|w.charCodeAt(N++)<<24;else for(I=0;I<16;++I)k[I]=w[N++]|w[N++]<<8|w[N++]<<16|w[N++]<<24;w=j.g[0],N=j.g[1],I=j.g[2];let M=j.g[3],E;E=w+(M^N&(I^M))+k[0]+3614090360&4294967295,w=N+(E<<7&4294967295|E>>>25),E=M+(I^w&(N^I))+k[1]+3905402710&4294967295,M=w+(E<<12&4294967295|E>>>20),E=I+(N^M&(w^N))+k[2]+606105819&4294967295,I=M+(E<<17&4294967295|E>>>15),E=N+(w^I&(M^w))+k[3]+3250441966&4294967295,N=I+(E<<22&4294967295|E>>>10),E=w+(M^N&(I^M))+k[4]+4118548399&4294967295,w=N+(E<<7&4294967295|E>>>25),E=M+(I^w&(N^I))+k[5]+1200080426&4294967295,M=w+(E<<12&4294967295|E>>>20),E=I+(N^M&(w^N))+k[6]+2821735955&4294967295,I=M+(E<<17&4294967295|E>>>15),E=N+(w^I&(M^w))+k[7]+4249261313&4294967295,N=I+(E<<22&4294967295|E>>>10),E=w+(M^N&(I^M))+k[8]+1770035416&4294967295,w=N+(E<<7&4294967295|E>>>25),E=M+(I^w&(N^I))+k[9]+2336552879&4294967295,M=w+(E<<12&4294967295|E>>>20),E=I+(N^M&(w^N))+k[10]+4294925233&4294967295,I=M+(E<<17&4294967295|E>>>15),E=N+(w^I&(M^w))+k[11]+2304563134&4294967295,N=I+(E<<22&4294967295|E>>>10),E=w+(M^N&(I^M))+k[12]+1804603682&4294967295,w=N+(E<<7&4294967295|E>>>25),E=M+(I^w&(N^I))+k[13]+4254626195&4294967295,M=w+(E<<12&4294967295|E>>>20),E=I+(N^M&(w^N))+k[14]+2792965006&4294967295,I=M+(E<<17&4294967295|E>>>15),E=N+(w^I&(M^w))+k[15]+1236535329&4294967295,N=I+(E<<22&4294967295|E>>>10),E=w+(I^M&(N^I))+k[1]+4129170786&4294967295,w=N+(E<<5&4294967295|E>>>27),E=M+(N^I&(w^N))+k[6]+3225465664&4294967295,M=w+(E<<9&4294967295|E>>>23),E=I+(w^N&(M^w))+k[11]+643717713&4294967295,I=M+(E<<14&4294967295|E>>>18),E=N+(M^w&(I^M))+k[0]+3921069994&4294967295,N=I+(E<<20&4294967295|E>>>12),E=w+(I^M&(N^I))+k[5]+3593408605&4294967295,w=N+(E<<5&4294967295|E>>>27),E=M+(N^I&(w^N))+k[10]+38016083&4294967295,M=w+(E<<9&4294967295|E>>>23),E=I+(w^N&(M^w))+k[15]+3634488961&4294967295,I=M+(E<<14&4294967295|E>>>18),E=N+(M^w&(I^M))+k[4]+3889429448&4294967295,N=I+(E<<20&4294967295|E>>>12),E=w+(I^M&(N^I))+k[9]+568446438&4294967295,w=N+(E<<5&4294967295|E>>>27),E=M+(N^I&(w^N))+k[14]+3275163606&4294967295,M=w+(E<<9&4294967295|E>>>23),E=I+(w^N&(M^w))+k[3]+4107603335&4294967295,I=M+(E<<14&4294967295|E>>>18),E=N+(M^w&(I^M))+k[8]+1163531501&4294967295,N=I+(E<<20&4294967295|E>>>12),E=w+(I^M&(N^I))+k[13]+2850285829&4294967295,w=N+(E<<5&4294967295|E>>>27),E=M+(N^I&(w^N))+k[2]+4243563512&4294967295,M=w+(E<<9&4294967295|E>>>23),E=I+(w^N&(M^w))+k[7]+1735328473&4294967295,I=M+(E<<14&4294967295|E>>>18),E=N+(M^w&(I^M))+k[12]+2368359562&4294967295,N=I+(E<<20&4294967295|E>>>12),E=w+(N^I^M)+k[5]+4294588738&4294967295,w=N+(E<<4&4294967295|E>>>28),E=M+(w^N^I)+k[8]+2272392833&4294967295,M=w+(E<<11&4294967295|E>>>21),E=I+(M^w^N)+k[11]+1839030562&4294967295,I=M+(E<<16&4294967295|E>>>16),E=N+(I^M^w)+k[14]+4259657740&4294967295,N=I+(E<<23&4294967295|E>>>9),E=w+(N^I^M)+k[1]+2763975236&4294967295,w=N+(E<<4&4294967295|E>>>28),E=M+(w^N^I)+k[4]+1272893353&4294967295,M=w+(E<<11&4294967295|E>>>21),E=I+(M^w^N)+k[7]+4139469664&4294967295,I=M+(E<<16&4294967295|E>>>16),E=N+(I^M^w)+k[10]+3200236656&4294967295,N=I+(E<<23&4294967295|E>>>9),E=w+(N^I^M)+k[13]+681279174&4294967295,w=N+(E<<4&4294967295|E>>>28),E=M+(w^N^I)+k[0]+3936430074&4294967295,M=w+(E<<11&4294967295|E>>>21),E=I+(M^w^N)+k[3]+3572445317&4294967295,I=M+(E<<16&4294967295|E>>>16),E=N+(I^M^w)+k[6]+76029189&4294967295,N=I+(E<<23&4294967295|E>>>9),E=w+(N^I^M)+k[9]+3654602809&4294967295,w=N+(E<<4&4294967295|E>>>28),E=M+(w^N^I)+k[12]+3873151461&4294967295,M=w+(E<<11&4294967295|E>>>21),E=I+(M^w^N)+k[15]+530742520&4294967295,I=M+(E<<16&4294967295|E>>>16),E=N+(I^M^w)+k[2]+3299628645&4294967295,N=I+(E<<23&4294967295|E>>>9),E=w+(I^(N|~M))+k[0]+4096336452&4294967295,w=N+(E<<6&4294967295|E>>>26),E=M+(N^(w|~I))+k[7]+1126891415&4294967295,M=w+(E<<10&4294967295|E>>>22),E=I+(w^(M|~N))+k[14]+2878612391&4294967295,I=M+(E<<15&4294967295|E>>>17),E=N+(M^(I|~w))+k[5]+4237533241&4294967295,N=I+(E<<21&4294967295|E>>>11),E=w+(I^(N|~M))+k[12]+1700485571&4294967295,w=N+(E<<6&4294967295|E>>>26),E=M+(N^(w|~I))+k[3]+2399980690&4294967295,M=w+(E<<10&4294967295|E>>>22),E=I+(w^(M|~N))+k[10]+4293915773&4294967295,I=M+(E<<15&4294967295|E>>>17),E=N+(M^(I|~w))+k[1]+2240044497&4294967295,N=I+(E<<21&4294967295|E>>>11),E=w+(I^(N|~M))+k[8]+1873313359&4294967295,w=N+(E<<6&4294967295|E>>>26),E=M+(N^(w|~I))+k[15]+4264355552&4294967295,M=w+(E<<10&4294967295|E>>>22),E=I+(w^(M|~N))+k[6]+2734768916&4294967295,I=M+(E<<15&4294967295|E>>>17),E=N+(M^(I|~w))+k[13]+1309151649&4294967295,N=I+(E<<21&4294967295|E>>>11),E=w+(I^(N|~M))+k[4]+4149444226&4294967295,w=N+(E<<6&4294967295|E>>>26),E=M+(N^(w|~I))+k[11]+3174756917&4294967295,M=w+(E<<10&4294967295|E>>>22),E=I+(w^(M|~N))+k[2]+718787259&4294967295,I=M+(E<<15&4294967295|E>>>17),E=N+(M^(I|~w))+k[9]+3951481745&4294967295,j.g[0]=j.g[0]+w&4294967295,j.g[1]=j.g[1]+(I+(E<<21&4294967295|E>>>11))&4294967295,j.g[2]=j.g[2]+I&4294967295,j.g[3]=j.g[3]+M&4294967295}r.prototype.v=function(j,w){w===void 0&&(w=j.length);const N=w-this.blockSize,k=this.C;let I=this.h,M=0;for(;M<w;){if(I==0)for(;M<=N;)o(this,j,M),M+=this.blockSize;if(typeof j=="string"){for(;M<w;)if(k[I++]=j.charCodeAt(M++),I==this.blockSize){o(this,k),I=0;break}}else for(;M<w;)if(k[I++]=j[M++],I==this.blockSize){o(this,k),I=0;break}}this.h=I,this.o+=w},r.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var w=1;w<j.length-8;++w)j[w]=0;w=this.o*8;for(var N=j.length-8;N<j.length;++N)j[N]=w&255,w/=256;for(this.v(j),j=Array(16),w=0,N=0;N<4;++N)for(let k=0;k<32;k+=8)j[w++]=this.g[N]>>>k&255;return j};function h(j,w){var N=p;return Object.prototype.hasOwnProperty.call(N,j)?N[j]:N[j]=w(j)}function m(j,w){this.h=w;const N=[];let k=!0;for(let I=j.length-1;I>=0;I--){const M=j[I]|0;k&&M==w||(N[I]=M,k=!1)}this.g=N}var p={};function v(j){return-128<=j&&j<128?h(j,function(w){return new m([w|0],w<0?-1:0)}):new m([j|0],j<0?-1:0)}function y(j){if(isNaN(j)||!isFinite(j))return S;if(j<0)return Z(y(-j));const w=[];let N=1;for(let k=0;j>=N;k++)w[k]=j/N|0,N*=4294967296;return new m(w,0)}function _(j,w){if(j.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(j.charAt(0)=="-")return Z(_(j.substring(1),w));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=y(Math.pow(w,8));let k=S;for(let M=0;M<j.length;M+=8){var I=Math.min(8,j.length-M);const E=parseInt(j.substring(M,M+I),w);I<8?(I=y(Math.pow(w,I)),k=k.j(I).add(y(E))):(k=k.j(N),k=k.add(y(E)))}return k}var S=v(0),R=v(1),q=v(16777216);i=m.prototype,i.m=function(){if(Q(this))return-Z(this).m();let j=0,w=1;for(let N=0;N<this.g.length;N++){const k=this.i(N);j+=(k>=0?k:4294967296+k)*w,w*=4294967296}return j},i.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(ee(this))return"0";if(Q(this))return"-"+Z(this).toString(j);const w=y(Math.pow(j,6));var N=this;let k="";for(;;){const I=ue(N,w).g;N=ce(N,I.j(w));let M=((N.g.length>0?N.g[0]:N.h)>>>0).toString(j);if(N=I,ee(N))return M+k;for(;M.length<6;)M="0"+M;k=M+k}},i.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function ee(j){if(j.h!=0)return!1;for(let w=0;w<j.g.length;w++)if(j.g[w]!=0)return!1;return!0}function Q(j){return j.h==-1}i.l=function(j){return j=ce(this,j),Q(j)?-1:ee(j)?0:1};function Z(j){const w=j.g.length,N=[];for(let k=0;k<w;k++)N[k]=~j.g[k];return new m(N,~j.h).add(R)}i.abs=function(){return Q(this)?Z(this):this},i.add=function(j){const w=Math.max(this.g.length,j.g.length),N=[];let k=0;for(let I=0;I<=w;I++){let M=k+(this.i(I)&65535)+(j.i(I)&65535),E=(M>>>16)+(this.i(I)>>>16)+(j.i(I)>>>16);k=E>>>16,M&=65535,E&=65535,N[I]=E<<16|M}return new m(N,N[N.length-1]&-2147483648?-1:0)};function ce(j,w){return j.add(Z(w))}i.j=function(j){if(ee(this)||ee(j))return S;if(Q(this))return Q(j)?Z(this).j(Z(j)):Z(Z(this).j(j));if(Q(j))return Z(this.j(Z(j)));if(this.l(q)<0&&j.l(q)<0)return y(this.m()*j.m());const w=this.g.length+j.g.length,N=[];for(var k=0;k<2*w;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(let I=0;I<j.g.length;I++){const M=this.i(k)>>>16,E=this.i(k)&65535,le=j.i(I)>>>16,oe=j.i(I)&65535;N[2*k+2*I]+=E*oe,re(N,2*k+2*I),N[2*k+2*I+1]+=M*oe,re(N,2*k+2*I+1),N[2*k+2*I+1]+=E*le,re(N,2*k+2*I+1),N[2*k+2*I+2]+=M*le,re(N,2*k+2*I+2)}for(j=0;j<w;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=w;j<2*w;j++)N[j]=0;return new m(N,0)};function re(j,w){for(;(j[w]&65535)!=j[w];)j[w+1]+=j[w]>>>16,j[w]&=65535,w++}function pe(j,w){this.g=j,this.h=w}function ue(j,w){if(ee(w))throw Error("division by zero");if(ee(j))return new pe(S,S);if(Q(j))return w=ue(Z(j),w),new pe(Z(w.g),Z(w.h));if(Q(w))return w=ue(j,Z(w)),new pe(Z(w.g),w.h);if(j.g.length>30){if(Q(j)||Q(w))throw Error("slowDivide_ only works with positive integers.");for(var N=R,k=w;k.l(j)<=0;)N=xe(N),k=xe(k);var I=he(N,1),M=he(k,1);for(k=he(k,2),N=he(N,2);!ee(k);){var E=M.add(k);E.l(j)<=0&&(I=I.add(N),M=E),k=he(k,1),N=he(N,1)}return w=ce(j,I.j(w)),new pe(I,w)}for(I=S;j.l(w)>=0;){for(N=Math.max(1,Math.floor(j.m()/w.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),M=y(N),E=M.j(w);Q(E)||E.l(j)>0;)N-=k,M=y(N),E=M.j(w);ee(M)&&(M=R),I=I.add(M),j=ce(j,E)}return new pe(I,j)}i.B=function(j){return ue(this,j).h},i.and=function(j){const w=Math.max(this.g.length,j.g.length),N=[];for(let k=0;k<w;k++)N[k]=this.i(k)&j.i(k);return new m(N,this.h&j.h)},i.or=function(j){const w=Math.max(this.g.length,j.g.length),N=[];for(let k=0;k<w;k++)N[k]=this.i(k)|j.i(k);return new m(N,this.h|j.h)},i.xor=function(j){const w=Math.max(this.g.length,j.g.length),N=[];for(let k=0;k<w;k++)N[k]=this.i(k)^j.i(k);return new m(N,this.h^j.h)};function xe(j){const w=j.g.length+1,N=[];for(let k=0;k<w;k++)N[k]=j.i(k)<<1|j.i(k-1)>>>31;return new m(N,j.h)}function he(j,w){const N=w>>5;w%=32;const k=j.g.length-N,I=[];for(let M=0;M<k;M++)I[M]=w>0?j.i(M+N)>>>w|j.i(M+N+1)<<32-w:j.i(M+N);return new m(I,j.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Vb=r,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=y,m.fromString=_,dr=m}).apply(typeof Pv<"u"?Pv:typeof self<"u"?self:typeof window<"u"?window:{});var Gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lb,Lo,Pb,th,_m,Ub,zb,Bb;(function(){var i,e=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gu=="object"&&Gu];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=s(this);function o(u,g){if(g)e:{var b=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var B=u[A];if(!(B in b))break e;b=b[B]}u=u[u.length-1],A=b[u],g=g(A),g!=A&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var b=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&b.push([A,g[A]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function v(u,g,b){return u.call.apply(u.bind,arguments)}function y(u,g,b){return y=v,y.apply(null,arguments)}function _(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function S(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(A,B,Y){for(var ge=Array(arguments.length-2),De=2;De<arguments.length;De++)ge[De-2]=arguments[De];return g.prototype[B].apply(A,ge)}}var R=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function q(u){const g=u.length;if(g>0){const b=Array(g);for(let A=0;A<g;A++)b[A]=u[A];return b}return[]}function ee(u,g){for(let A=1;A<arguments.length;A++){const B=arguments[A];var b=typeof B;if(b=b!="object"?b:B?Array.isArray(B)?"array":b:"null",b=="array"||b=="object"&&typeof B.length=="number"){b=u.length||0;const Y=B.length||0;u.length=b+Y;for(let ge=0;ge<Y;ge++)u[b+ge]=B[ge]}else u.push(B)}}class Q{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Z(u){m.setTimeout(()=>{throw u},0)}function ce(){var u=j;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class re{constructor(){this.h=this.g=null}add(g,b){const A=pe.get();A.set(g,b),this.h?this.h.next=A:this.g=A,this.h=A}}var pe=new Q(()=>new ue,u=>u.reset());class ue{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,he=!1,j=new re,w=()=>{const u=Promise.resolve(void 0);xe=()=>{u.then(N)}};function N(){for(var u;u=ce();){try{u.h.call(u.g)}catch(b){Z(b)}var g=pe;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}he=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};m.addEventListener("test",b,g),m.removeEventListener("test",b,g)}catch{}return u})();function E(u){return/^[\s\xa0]*$/.test(u)}function le(u,g){I.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}S(le,I),le.prototype.init=function(u,g){const b=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),U=0;function W(u,g,b,A,B){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!A,this.ha=B,this.key=++U,this.da=this.fa=!1}function V(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function me(u,g,b){for(const A in u)g.call(b,u[A],A,u)}function Ae(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function C(u){const g={};for(const b in u)g[b]=u[b];return g}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(u,g){let b,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(b in A)u[b]=A[b];for(let Y=0;Y<z.length;Y++)b=z[Y],Object.prototype.hasOwnProperty.call(A,b)&&(u[b]=A[b])}}function ae(u){this.src=u,this.g={},this.h=0}ae.prototype.add=function(u,g,b,A,B){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const ge=X(u,g,A,B);return ge>-1?(g=u[ge],b||(g.fa=!1)):(g=new W(g,this.src,Y,!!A,B),g.fa=b,u.push(g)),g};function P(u,g){const b=g.type;if(b in u.g){var A=u.g[b],B=Array.prototype.indexOf.call(A,g,void 0),Y;(Y=B>=0)&&Array.prototype.splice.call(A,B,1),Y&&(V(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function X(u,g,b,A){for(let B=0;B<u.length;++B){const Y=u[B];if(!Y.da&&Y.listener==g&&Y.capture==!!b&&Y.ha==A)return B}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),Ee={};function Re(u,g,b,A,B){if(Array.isArray(g)){for(let Y=0;Y<g.length;Y++)Re(u,g[Y],b,A,B);return null}return b=jn(b),u&&u[oe]?u.J(g,b,p(A)?!!A.capture:!1,B):rt(u,g,b,!1,A,B)}function rt(u,g,b,A,B,Y){if(!g)throw Error("Invalid event type");const ge=p(B)?!!B.capture:!!B;let De=ds(u);if(De||(u[fe]=De=new ae(u)),b=De.add(g,b,A,ge,Y),b.proxy)return b;if(A=qt(),b.proxy=A,A.src=u,A.listener=b,u.addEventListener)M||(B=ge),B===void 0&&(B=!1),u.addEventListener(g.toString(),A,B);else if(u.attachEvent)u.attachEvent(Rn(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function qt(){function u(b){return g.call(u.src,u.listener,b)}const g=Fs;return u}function Jt(u,g,b,A,B){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)Jt(u,g[Y],b,A,B);else A=p(A)?!!A.capture:!!A,b=jn(b),u&&u[oe]?(u=u.i,Y=String(g).toString(),Y in u.g&&(g=u.g[Y],b=X(g,b,A,B),b>-1&&(V(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[Y],u.h--)))):u&&(u=ds(u))&&(g=u.g[g.toString()],u=-1,g&&(u=X(g,b,A,B)),(b=u>-1?g[u]:null)&&Hs(b))}function Hs(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[oe])P(g.i,u);else{var b=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(b,A,u.capture):g.detachEvent?g.detachEvent(Rn(b),A):g.addListener&&g.removeListener&&g.removeListener(A),(b=ds(g))?(P(b,u),b.h==0&&(b.src=null,g[fe]=null)):V(u)}}}function Rn(u){return u in Ee?Ee[u]:Ee[u]="on"+u}function Fs(u,g){if(u.da)u=!0;else{g=new le(g,this);const b=u.listener,A=u.ha||u.src;u.fa&&Hs(u),u=b.call(A,g)}return u}function ds(u){return u=u[fe],u instanceof ae?u:null}var Er="__closure_events_fn_"+(Math.random()*1e9>>>0);function jn(u){return typeof u=="function"?u:(u[Er]||(u[Er]=function(g){return u.handleEvent(g)}),u[Er])}function mt(){k.call(this),this.i=new ae(this),this.M=this,this.G=null}S(mt,k),mt.prototype[oe]=!0,mt.prototype.removeEventListener=function(u,g,b,A){Jt(this,u,g,b,A)};function Ot(u,g){var b,A=u.G;if(A)for(b=[];A;A=A.G)b.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new I(g,u);else if(g instanceof I)g.target=g.target||u;else{var B=g;g=new I(A,u),ne(g,B)}B=!0;let Y,ge;if(b)for(ge=b.length-1;ge>=0;ge--)Y=g.g=b[ge],B=Ti(Y,A,!0,g)&&B;if(Y=g.g=u,B=Ti(Y,A,!0,g)&&B,B=Ti(Y,A,!1,g)&&B,b)for(ge=0;ge<b.length;ge++)Y=g.g=b[ge],B=Ti(Y,A,!1,g)&&B}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let A=0;A<b.length;A++)V(b[A]);delete u.g[g],u.h--}}this.G=null},mt.prototype.J=function(u,g,b,A){return this.i.add(String(u),g,!1,b,A)},mt.prototype.K=function(u,g,b,A){return this.i.add(String(u),g,!0,b,A)};function Ti(u,g,b,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let B=!0;for(let Y=0;Y<g.length;++Y){const ge=g[Y];if(ge&&!ge.da&&ge.capture==b){const De=ge.listener,vt=ge.ha||ge.src;ge.fa&&P(u.i,ge),B=De.call(vt,A)!==!1&&B}}return B&&!A.defaultPrevented}function $h(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:m.setTimeout(u,g||0)}function gc(u){u.g=$h(()=>{u.g=null,u.i&&(u.i=!1,gc(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class an extends k{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:gc(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(u){k.call(this),this.h=u,this.g={}}S(Sr,k);var jl=[];function Il(u){me(u.g,function(g,b){this.g.hasOwnProperty(b)&&Hs(g)},u),u.g={}}Sr.prototype.N=function(){Sr.Z.N.call(this),Il(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ei=m.JSON.stringify,Xh=m.JSON.parse,pc=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function yc(){}function vc(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ht(){I.call(this,"d")}S(Ht,I);function In(){I.call(this,"c")}S(In,I);var yt={},xc=null;function ya(){return xc=xc||new mt}yt.Ia="serverreachability";function bc(u){I.call(this,yt.Ia,u)}S(bc,I);function fs(u){const g=ya();Ot(g,new bc(g))}yt.STAT_EVENT="statevent";function Ar(u,g){I.call(this,yt.STAT_EVENT,u),this.stat=g}S(Ar,I);function Tt(u){const g=ya();Ot(g,new Ar(g,u))}yt.Ja="timingevent";function ms(u,g){I.call(this,yt.Ja,u),this.size=g}S(ms,I);function gs(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},g)}function Zn(){this.g=!0}Zn.prototype.ua=function(){this.g=!1};function Wh(u,g,b,A,B,Y){u.info(function(){if(u.g)if(Y){var ge="",De=Y.split("&");for(let Qe=0;Qe<De.length;Qe++){var vt=De[Qe].split("=");if(vt.length>1){const ut=vt[0];vt=vt[1];const Mn=ut.split("_");ge=Mn.length>=2&&Mn[1]=="type"?ge+(ut+"="+vt+"&"):ge+(ut+"=redacted&")}}}else ge=null;else ge=Y;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+g+`
`+b+`
`+ge})}function _c(u,g,b,A,B,Y,ge){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+g+`
`+b+`
`+Y+" "+ge})}function ps(u,g,b,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Zh(u,b)+(A?" "+A:"")})}function Nr(u,g){u.info(function(){return"TIMEOUT: "+g})}Zn.prototype.info=function(){};function Zh(u,g){if(!u.g)return g;if(!g)return null;try{const Y=JSON.parse(g);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var b=Y[u];if(!(b.length<2)){var A=b[1];if(Array.isArray(A)&&!(A.length<1)){var B=A[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ge=1;ge<A.length;ge++)A[ge]=""}}}}return Ei(Y)}catch{return g}}var Cr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},kl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Dl;function Rr(){}S(Rr,yc),Rr.prototype.g=function(){return new XMLHttpRequest},Dl=new Rr;function Gs(u){return encodeURIComponent(String(u))}function wc(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function Jn(u,g,b,A){this.j=u,this.i=g,this.l=b,this.S=A||1,this.V=new Sr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new es}function es(){this.i=null,this.g="",this.h=!1}var Et={},Pt={};function ys(u,g,b){u.M=1,u.A=jr(At(g)),u.u=b,u.R=!0,va(u,null)}function va(u,g){u.F=Date.now(),vs(u),u.B=At(u.A);var b=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),wa(b.i,"t",A),u.C=0,b=u.j.L,u.h=new es,u.g=Lc(u.j,b?g:null,!u.u),u.P>0&&(u.O=new an(y(u.Y,u,u.g),u.P)),g=u.V,b=u.g,A=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(jl[0]=B.toString()),B=jl);for(let Y=0;Y<B.length;Y++){const ge=Re(b,B[Y],A||g.handleEvent,!1,g.h||g);if(!ge)break;g.g[ge.key]=ge}g=u.J?C(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),fs(),Wh(u.i,u.v,u.B,u.l,u.S,u.u)}Jn.prototype.ba=function(u){u=u.target;const g=this.O;g&&ss(u)==3?g.j():this.Y(u)},Jn.prototype.Y=function(u){try{if(u==this.g)e:{const De=ss(this.g),vt=this.g.ya(),Qe=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Ft(this.g)))){this.K||De!=4||vt==7||(vt==8||Qe<=0?fs(3):fs(2)),xs(this);var g=this.g.ca();this.X=g;var b=Jh(this);if(this.o=g==200,_c(this.i,this.v,this.B,this.l,this.S,De,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,B=this.g;if((A=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(A)){var Y=A;break t}}Y=null}if(u=Y)ps(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bs(this,u);else{this.o=!1,this.m=3,Tt(12),xn(this),kn(this);break e}}if(this.R){u=!0;let ut;for(;!this.K&&this.C<b.length;)if(ut=Ec(this,b),ut==Pt){De==4&&(this.m=4,Tt(14),u=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==Et){this.m=4,Tt(15),ps(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else ps(this.i,this.l,ut,null),bs(this,ut);if(Tc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||b.length!=0||this.h.h||(this.m=1,Tt(16),u=!1),this.o=this.o&&u,!u)ps(this.i,this.l,b,"[Invalid Chunked Response]"),xn(this),kn(this);else if(b.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Ql(ge),ge.P=!0,Tt(11))}}else ps(this.i,this.l,b,null),bs(this,b);De==4&&xn(this),this.o&&!this.K&&(De==4?Dc(this.j,this):(this.o=!1,vs(this)))}else Ks(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),xn(this),kn(this)}}}catch{}finally{}};function Jh(u){if(!Tc(u))return u.g.la();const g=Ft(u.g);if(g==="")return"";let b="";const A=g.length,B=ss(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return xn(u),kn(u),"";u.h.i=new m.TextDecoder}for(let Y=0;Y<A;Y++)u.h.h=!0,b+=u.h.i.decode(g[Y],{stream:!(B&&Y==A-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function Tc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ec(u,g){var b=u.C,A=g.indexOf(`
`,b);return A==-1?Pt:(b=Number(g.substring(b,A)),isNaN(b)?Et:(A+=1,A+b>g.length?Pt:(g=g.slice(A,A+b),u.C=A+b,g)))}Jn.prototype.cancel=function(){this.K=!0,xn(this)};function vs(u){u.T=Date.now()+u.H,xa(u,u.H)}function xa(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=gs(y(u.aa,u),g)}function xs(u){u.D&&(m.clearTimeout(u.D),u.D=null)}Jn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Nr(this.i,this.B),this.M!=2&&(fs(),Tt(17)),xn(this),this.m=2,kn(this)):xa(this,this.T-u)};function kn(u){u.j.I==0||u.K||Dc(u.j,u)}function xn(u){xs(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Il(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function bs(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||ws(b.h,u))){if(!u.L&&ws(b.h,u)&&b.I==3){try{var A=b.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Na(b),ki(b);else break e;Lr(b),Tt(18)}}else b.xa=B[1],0<b.xa-b.K&&B[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=gs(y(b.Va,b),6e3));_s(b.h)<=1&&b.ta&&(b.ta=void 0)}else Cs(b,11)}else if((u.L||b.g==u)&&Na(b),!E(g))for(B=b.Ba.g.parse(g),g=0;g<B.length;g++){let Qe=B[g];const ut=Qe[0];if(!(ut<=b.K))if(b.K=ut,Qe=Qe[1],b.I==2)if(Qe[0]=="c"){b.M=Qe[1],b.ba=Qe[2];const Mn=Qe[3];Mn!=null&&(b.ka=Mn,b.j.info("VER="+b.ka));const Rs=Qe[4];Rs!=null&&(b.za=Rs,b.j.info("SVER="+b.za));const is=Qe[5];is!=null&&typeof is=="number"&&is>0&&(A=1.5*is,b.O=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const rs=u.g;if(rs){const Pr=rs.g?rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pr){var Y=A.h;Y.g||Pr.indexOf("spdy")==-1&&Pr.indexOf("quic")==-1&&Pr.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Vl(Y,Y.h),Y.h=null))}if(A.G){const Ca=rs.g?rs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ca&&(A.wa=Ca,We(A.J,A.G,Ca))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),A=b;var ge=u;if(A.na=Vc(A,A.L?A.ba:null,A.W),ge.L){Ll(A.h,ge);var De=ge,vt=A.O;vt&&(De.H=vt),De.D&&(xs(De),vs(De)),A.g=ge}else Ic(A);b.i.length>0&&Ns(b)}else Qe[0]!="stop"&&Qe[0]!="close"||Cs(b,7);else b.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Cs(b,7):Yl(b):Qe[0]!="noop"&&b.l&&b.l.qa(Qe),b.A=0)}}fs(4)}catch{}}var St=class{constructor(u,g){this.g=u,this.map=g}};function Ol(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ml(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _s(u){return u.h?1:u.g?u.g.size:0}function ws(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Vl(u,g){u.g?u.g.add(g):u.h=g}function Ll(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Ol.prototype.cancel=function(){if(this.i=Pl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Pl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return q(u.i)}var Sc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ba(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const A=u[b].indexOf("=");let B,Y=null;A>=0?(B=u[b].substring(0,A),Y=u[b].substring(A+1)):B=u[b],g(B,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function bn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof bn?(this.l=u.l,Ut(this,u.j),this.o=u.o,this.g=u.g,Si(this,u.u),this.h=u.h,Ul(this,Rc(u.i)),this.m=u.m):u&&(g=String(u).match(Sc))?(this.l=!1,Ut(this,g[1]||"",!0),this.o=Ts(g[2]||""),this.g=Ts(g[3]||"",!0),Si(this,g[4]),this.h=Ts(g[5]||"",!0),Ul(this,g[6]||"",!0),this.m=Ts(g[7]||"")):(this.l=!1,this.i=new Ni(null,this.l))}bn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Ir(g,_a,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Ir(g,_a,!0),"@"),u.push(Gs(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Ir(b,b.charAt(0)=="/"?zl:Ac,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Ir(b,Nc)),u.join("")},bn.prototype.resolve=function(u){const g=At(this);let b=!!u.j;b?Ut(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var A=u.h;if(b)Si(g,u.u);else if(b=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var B=g.h.lastIndexOf("/");B!=-1&&(A=g.h.slice(0,B+1)+A)}if(B=A,B==".."||B==".")A="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){A=B.lastIndexOf("/",0)==0,B=B.split("/");const Y=[];for(let ge=0;ge<B.length;){const De=B[ge++];De=="."?A&&ge==B.length&&Y.push(""):De==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&ge==B.length&&Y.push("")):(Y.push(De),A=!0)}A=Y.join("/")}else A=B}return b?g.h=A:b=u.i.toString()!=="",b?Ul(g,Rc(u.i)):b=!!u.m,b&&(g.m=u.m),g};function At(u){return new bn(u)}function Ut(u,g,b){u.j=b?Ts(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Si(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Ul(u,g,b){g instanceof Ni?(u.i=g,Ta(u.i,u.l)):(b||(g=Ir(g,Ai)),u.i=new Ni(g,u.l))}function We(u,g,b){u.i.set(g,b)}function jr(u){return We(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ts(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ir(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,un),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function un(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _a=/[#\/\?@]/g,Ac=/[#\?:]/g,zl=/[#\?]/g,Ai=/[#\?@]/g,Nc=/#/g;function Ni(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function hn(u){u.g||(u.g=new Map,u.h=0,u.i&&ba(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}i=Ni.prototype,i.add=function(u,g){hn(this),this.i=null,u=Ci(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Cc(u,g){hn(u),g=Ci(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Bl(u,g){return hn(u),g=Ci(u,g),u.g.has(g)}i.forEach=function(u,g){hn(this),this.g.forEach(function(b,A){b.forEach(function(B){u.call(g,B,A,this)},this)},this)};function ql(u,g){hn(u);let b=[];if(typeof g=="string")Bl(u,g)&&(b=b.concat(u.g.get(Ci(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}i.set=function(u,g){return hn(this),this.i=null,u=Ci(this,u),Bl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},i.get=function(u,g){return u?(u=ql(this,u),u.length>0?String(u[0]):g):g};function wa(u,g,b){Cc(u,g),b.length>0&&(u.i=null,u.g.set(Ci(u,g),q(b)),u.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var b=g[A];const B=Gs(b);b=ql(this,b);for(let Y=0;Y<b.length;Y++){let ge=B;b[Y]!==""&&(ge+="="+Gs(b[Y])),u.push(ge)}}return this.i=u.join("&")};function Rc(u){const g=new Ni;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Ci(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Ta(u,g){g&&!u.j&&(hn(u),u.i=null,u.g.forEach(function(b,A){const B=A.toLowerCase();A!=B&&(Cc(this,A),wa(this,B,b))},u)),u.j=g}function ts(u,g){const b=new Zn;if(m.Image){const A=new Image;A.onload=_(Dn,b,"TestLoadImage: loaded",!0,g,A),A.onerror=_(Dn,b,"TestLoadImage: error",!1,g,A),A.onabort=_(Dn,b,"TestLoadImage: abort",!1,g,A),A.ontimeout=_(Dn,b,"TestLoadImage: timeout",!1,g,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function Hl(u,g){const b=new Zn,A=new AbortController,B=setTimeout(()=>{A.abort(),Dn(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(Y=>{clearTimeout(B),Y.ok?Dn(b,"TestPingServer: ok",!0,g):Dn(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Dn(b,"TestPingServer: error",!1,g)})}function Dn(u,g,b,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(b)}catch{}}function Ri(){this.g=new pc}function Es(u){this.i=u.Sb||null,this.h=u.ab||!1}S(Es,yc),Es.prototype.g=function(){return new kr(this.i,this.h)};function kr(u,g){mt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(kr,mt),i=kr.prototype,i.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,ns(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||m).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ns(this)),this.g&&(this.readyState=3,ns(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ea(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ea(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?ji(this):ns(this),this.readyState==3&&Ea(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,ji(this))},i.Na=function(u){this.g&&(this.response=u,ji(this))},i.ga=function(){this.g&&ji(this)};function ji(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ns(u)}i.setRequestHeader=function(u,g){this.A.append(u,g)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function ns(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(kr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function On(u){let g="";return me(u,function(b,A){g+=A,g+=":",g+=b,g+=`\r
`}),g}function Dr(u,g,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=On(b),typeof u=="string"?b!=null&&Gs(b):We(u,g,b))}function et(u){mt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(et,mt);var Ss=/^https?$/i,Fl=["POST","PUT"];i=et.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,g,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Dl.g(),this.g.onreadystatechange=R(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Y){Or(this,Y);return}if(u=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)b.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())b.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=m.FormData&&u instanceof m.FormData,!(Array.prototype.indexOf.call(Fl,g,void 0)>=0)||A||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ge]of b)this.g.setRequestHeader(Y,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){Or(this,Y)}};function Or(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Gl(u),Ys(u)}function Gl(u){u.A||(u.A=!0,Ot(u,"complete"),Ot(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ot(this,"complete"),Ot(this,"abort"),Ys(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ys(this,!0)),et.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Mr(this):this.Xa())},i.Xa=function(){Mr(this)};function Mr(u){if(u.h&&typeof h<"u"){if(u.v&&ss(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ot(u,"readystatechange"),ss(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var A;if(A=Y===0){let ge=String(u.D).match(Sc)[1]||null;!ge&&m.self&&m.self.location&&(ge=m.self.location.protocol.slice(0,-1)),A=!Ss.test(ge?ge.toLowerCase():"")}b=A}if(b)Ot(u,"complete"),Ot(u,"success");else{u.o=6;try{var B=ss(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",Gl(u)}}finally{Ys(u)}}}}function Ys(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||Ot(u,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ss(u){return u.g?u.g.readyState:0}i.ca=function(){try{return ss(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Xh(g)}};function Ft(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ks(u){const g={};u=(u.g&&ss(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(E(u[A]))continue;var b=wc(u[A]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Y=g[B]||[];g[B]=Y,Y.push(b)}Ae(g,function(A){return A.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function As(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function Ii(u){this.za=0,this.i=[],this.j=new Zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=As("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=As("baseRetryDelayMs",5e3,u),this.Za=As("retryDelaySeedMs",1e4,u),this.Ta=As("forwardChannelMaxRetries",2,u),this.va=As("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ol(u&&u.concurrentRequestLimit),this.Ba=new Ri,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Ii.prototype,i.ka=8,i.I=1,i.connect=function(u,g,b,A){Tt(0),this.W=u,this.H=g||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.J=Vc(this,null,this.W),Ns(this)};function Yl(u){if(Sa(u),u.I==3){var g=u.V++,b=At(u.J);if(We(b,"SID",u.M),We(b,"RID",g),We(b,"TYPE","terminate"),Vr(u,b),g=new Jn(u,u.j,g),g.M=2,g.A=jr(At(b)),b=!1,m.navigator&&m.navigator.sendBeacon)try{b=m.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&m.Image&&(new Image().src=g.A,b=!0),b||(g.g=Lc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),vs(g)}Mc(u)}function ki(u){u.g&&(Ql(u),u.g.cancel(),u.g=null)}function Sa(u){ki(u),u.v&&(m.clearTimeout(u.v),u.v=null),Na(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&m.clearTimeout(u.m),u.m=null)}function Ns(u){if(!Ml(u.h)&&!u.m){u.m=!0;var g=u.Ea;xe||w(),he||(xe(),he=!0),j.add(g,u),u.D=0}}function Aa(u,g){return _s(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=gs(y(u.Ea,u,g),Oc(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new Jn(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=C(Y),ne(Y,this.U)):Y=this.U),this.u!==null||this.R||(B.J=Y,Y=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=jc(this,B,g),b=At(this.J),We(b,"RID",u),We(b,"CVER",22),this.G&&We(b,"X-HTTP-Session-Id",this.G),Vr(this,b),Y&&(this.R?g="headers="+Gs(On(Y))+"&"+g:this.u&&Dr(b,this.u,Y)),Vl(this.h,B),this.Ra&&We(b,"TYPE","init"),this.S?(We(b,"$req",g),We(b,"SID","null"),B.U=!0,ys(B,b,null)):ys(B,b,g),this.I=2}}else this.I==3&&(u?Kl(this,u):this.i.length==0||Ml(this.h)||Kl(this))};function Kl(u,g){var b;g?b=g.l:b=u.V++;const A=At(u.J);We(A,"SID",u.M),We(A,"RID",b),We(A,"AID",u.K),Vr(u,A),u.u&&u.o&&Dr(A,u.u,u.o),b=new Jn(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=jc(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Vl(u.h,b),ys(b,A,g)}function Vr(u,g){u.H&&me(u.H,function(b,A){We(g,A,b)}),u.l&&me({},function(b,A){We(g,A,b)})}function jc(u,g,b){b=Math.min(u.i.length,b);const A=u.l?y(u.l.Ka,u.l,u):null;e:{var B=u.i;let De=-1;for(;;){const vt=["count="+b];De==-1?b>0?(De=B[0].g,vt.push("ofs="+De)):De=0:vt.push("ofs="+De);let Qe=!0;for(let ut=0;ut<b;ut++){var Y=B[ut].g;const Mn=B[ut].map;if(Y-=De,Y<0)De=Math.max(0,B[ut].g-100),Qe=!1;else try{Y="req"+Y+"_"||"";try{var ge=Mn instanceof Map?Mn:Object.entries(Mn);for(const[Rs,is]of ge){let rs=is;p(is)&&(rs=Ei(is)),vt.push(Y+Rs+"="+encodeURIComponent(rs))}}catch(Rs){throw vt.push(Y+"type="+encodeURIComponent("_badmap")),Rs}}catch{A&&A(Mn)}}if(Qe){ge=vt.join("&");break e}}ge=void 0}return u=u.i.splice(0,b),g.G=u,ge}function Ic(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;xe||w(),he||(xe(),he=!0),j.add(g,u),u.A=0}}function Lr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=gs(y(u.Da,u),Oc(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,kc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=gs(y(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),ki(this),kc(this))};function Ql(u){u.B!=null&&(m.clearTimeout(u.B),u.B=null)}function kc(u){u.g=new Jn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=At(u.na);We(g,"RID","rpc"),We(g,"SID",u.M),We(g,"AID",u.K),We(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&We(g,"TO",u.ia),We(g,"TYPE","xmlhttp"),Vr(u,g),u.u&&u.o&&Dr(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=jr(At(g)),b.u=null,b.R=!0,va(b,u)}i.Va=function(){this.C!=null&&(this.C=null,ki(this),Lr(this),Tt(19))};function Na(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Dc(u,g){var b=null;if(u.g==g){Na(u),Ql(u),u.g=null;var A=2}else if(ws(u.h,g))b=g.G,Ll(u.h,g),A=1;else return;if(u.I!=0){if(g.o)if(A==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var B=u.D;A=ya(),Ot(A,new ms(A,b)),Ns(u)}else Ic(u);else if(B=g.m,B==3||B==0&&g.X>0||!(A==1&&Aa(u,g)||A==2&&Lr(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),B){case 1:Cs(u,5);break;case 4:Cs(u,10);break;case 3:Cs(u,6);break;default:Cs(u,2)}}}function Oc(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Cs(u,g){if(u.j.info("Error code "+g),g==2){var b=y(u.bb,u),A=u.Ua;const B=!A;A=new bn(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ut(A,"https"),jr(A),B?ts(A.toString(),b):Hl(A.toString(),b)}else Tt(2);u.I=0,u.l&&u.l.pa(g),Mc(u),Sa(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Mc(u){if(u.I=0,u.ja=[],u.l){const g=Pl(u.h);(g.length!=0||u.i.length!=0)&&(ee(u.ja,g),ee(u.ja,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.oa()}}function Vc(u,g,b){var A=b instanceof bn?At(b):new bn(b);if(A.g!="")g&&(A.g=g+"."+A.g),Si(A,A.u);else{var B=m.location;A=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;const Y=new bn(null);A&&Ut(Y,A),g&&(Y.g=g),B&&Si(Y,B),b&&(Y.h=b),A=Y}return b=u.G,g=u.wa,b&&g&&We(A,b,g),We(A,"VER",u.ka),Vr(u,A),A}function Lc(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new et(new Es({ab:b})):new et(u.ma),g.Fa(u.L),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pc(){}i=Pc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Di(){}Di.prototype.g=function(u,g){return new ln(u,g)};function ln(u,g){mt.call(this),this.g=new Ii(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!E(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!E(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Qs(this)}S(ln,mt),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Yl(this.g)},ln.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=Ei(u),u=b);g.i.push(new St(g.Ya++,u)),g.I==3&&Ns(g)},ln.prototype.N=function(){this.g.l=null,delete this.j,Yl(this.g),delete this.g,ln.Z.N.call(this)};function Uc(u){Ht.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}S(Uc,Ht);function zc(){In.call(this),this.status=1}S(zc,In);function Qs(u){this.g=u}S(Qs,Pc),Qs.prototype.ra=function(){Ot(this.g,"a")},Qs.prototype.qa=function(u){Ot(this.g,new Uc(u))},Qs.prototype.pa=function(u){Ot(this.g,new zc)},Qs.prototype.oa=function(){Ot(this.g,"b")},Di.prototype.createWebChannel=Di.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,Bb=function(){return new Di},zb=function(){return ya()},Ub=yt,_m={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Cr.NO_ERROR=0,Cr.TIMEOUT=8,Cr.HTTP_ERROR=6,th=Cr,kl.COMPLETE="complete",Pb=kl,vc.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Lo=vc,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,Lb=et}).apply(typeof Gu<"u"?Gu:typeof self<"u"?self:typeof window<"u"?window:{});const Uv="@firebase/firestore",zv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new zm("@firebase/firestore");function rl(){return ua.logLevel}function ve(i,...e){if(ua.logLevel<=Be.DEBUG){const s=e.map(Wm);ua.debug(`Firestore (${Sl}): ${i}`,...s)}}function yi(i,...e){if(ua.logLevel<=Be.ERROR){const s=e.map(Wm);ua.error(`Firestore (${Sl}): ${i}`,...s)}}function pl(i,...e){if(ua.logLevel<=Be.WARN){const s=e.map(Wm);ua.warn(`Firestore (${Sl}): ${i}`,...s)}}function Wm(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(i,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,qb(i,r,s)}function qb(i,e,s){let r=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw yi(r),new Error(r)}function Xe(i,e,s,r){let o="Unexpected state";typeof s=="string"?o=s:r=s,i||qb(e,o,r)}function ke(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends bi{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(nn.UNAUTHENTICATED)))}shutdown(){}}class sA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class iA{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){Xe(this.o===void 0,42304);let r=this.i;const o=v=>this.i!==r?(r=this.i,s(v)):Promise.resolve();let h=new ia;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new ia,e.enqueueRetryable((()=>o(this.currentUser)))};const m=()=>{const v=h;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},p=v=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((v=>p(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new ia)}}),0),m()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new Hb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class rA{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aA{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new rA(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lA{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){Xe(this.o===void 0,3512);const r=h=>{h.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const m=h.token!==this.m;return this.m=h.token,ve("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?s(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>r(h)))};const o=h=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>o(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?o(h):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Bv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(Xe(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new Bv(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<i;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=oA(40);for(let h=0;h<o.length;++h)r.length<20&&o[h]<s&&(r+=e.charAt(o[h]%62))}return r}}function qe(i,e){return i<e?-1:i>e?1:0}function wm(i,e){const s=Math.min(i.length,e.length);for(let r=0;r<s;r++){const o=i.charAt(r),h=e.charAt(r);if(o!==h)return lm(o)===lm(h)?qe(o,h):lm(o)?1:-1}return qe(i.length,e.length)}const cA=55296,uA=57343;function lm(i){const e=i.charCodeAt(0);return e>=cA&&e<=uA}function yl(i,e,s){return i.length===e.length&&i.every(((r,o)=>s(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="__name__";class Os{constructor(e,s,r){s===void 0?s=0:s>e.length&&Ce(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&Ce(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return Os.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Os?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let o=0;o<r;o++){const h=Os.compareSegments(e.get(o),s.get(o));if(h!==0)return h}return qe(e.length,s.length)}static compareSegments(e,s){const r=Os.isNumericId(e),o=Os.isNumericId(s);return r&&!o?-1:!r&&o?1:r&&o?Os.extractNumericId(e).compare(Os.extractNumericId(s)):wm(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return dr.fromString(e.substring(4,e.length-2))}}class at extends Os{construct(e,s,r){return new at(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((o=>o.length>0)))}return new at(s)}static emptyPath(){return new at([])}}const hA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Os{construct(e,s,r){return new Xt(e,s,r)}static isValidIdentifier(e){return hA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qv}static keyField(){return new Xt([qv])}static fromServerFormat(e){const s=[];let r="",o=0;const h=()=>{if(r.length===0)throw new ye(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let m=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ye(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ye(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else p==="`"?(m=!m,o++):p!=="."||m?(r+=p,o++):(h(),o++)}if(h(),m)throw new ye(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(s)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(at.fromString(e))}static fromName(e){return new Te(at.fromString(e).popFirst(5))}static empty(){return new Te(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return at.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(i,e,s){if(!s)throw new ye(se.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function dA(i,e,s,r){if(e===!0&&r===!0)throw new ye(se.INVALID_ARGUMENT,`${i} and ${s} cannot be used together.`)}function Hv(i){if(!Te.isDocumentKey(i))throw new ye(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Fv(i){if(Te.isDocumentKey(i))throw new ye(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Gb(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function kh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ce(12329,{type:typeof i})}function Ls(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ye(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=kh(i);throw new ye(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(i,e){const s={typeString:i};return e&&(s.value=e),s}function cc(i,e){if(!Gb(i))throw new ye(se.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const o=e[r].typeString,h="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){s=`JSON missing required field: '${r}'`;break}const m=i[r];if(o&&typeof m!==o){s=`JSON field '${r}' must be a ${o}.`;break}if(h!==void 0&&m!==h.value){s=`Expected '${r}' field to equal '${h.value}'`;break}}if(s)throw new ye(se.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=-62135596800,Yv=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*Yv);return new ct(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new ye(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new ye(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<Gv)throw new ye(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yv}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cc(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Dt("string",ct._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new ct(0,0))}static max(){return new je(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=-1;function fA(i,e){const s=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=je.fromTimestamp(r===1e9?new ct(s+1,0):new ct(s,r));return new mr(o,Te.empty(),e)}function mA(i){return new mr(i.readTime,i.key,Xo)}class mr{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new mr(je.min(),Te.empty(),Xo)}static max(){return new mr(je.max(),Te.empty(),Xo)}}function gA(i,e){let s=i.readTime.compareTo(e.readTime);return s!==0?s:(s=Te.comparator(i.documentKey,e.documentKey),s!==0?s:qe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(i){if(i.code!==se.FAILED_PRECONDITION||i.message!==pA)throw i;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new ie(((r,o)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(r,o)},this.catchCallback=h=>{this.wrapFailure(s,h).next(r,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof ie?s:ie.resolve(s)}catch(s){return ie.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):ie.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):ie.reject(s)}static resolve(e){return new ie(((s,r)=>{s(e)}))}static reject(e){return new ie(((s,r)=>{r(e)}))}static waitFor(e){return new ie(((s,r)=>{let o=0,h=0,m=!1;e.forEach((p=>{++o,p.next((()=>{++h,m&&h===o&&s()}),(v=>r(v)))})),m=!0,h===o&&s()}))}static or(e){let s=ie.resolve(!1);for(const r of e)s=s.next((o=>o?ie.resolve(o):r()));return s}static forEach(e,s){const r=[];return e.forEach(((o,h)=>{r.push(s.call(this,o,h))})),this.waitFor(r)}static mapArray(e,s){return new ie(((r,o)=>{const h=e.length,m=new Array(h);let p=0;for(let v=0;v<h;v++){const y=v;s(e[y]).next((_=>{m[y]=_,++p,p===h&&r(m)}),(_=>o(_)))}}))}static doWhile(e,s){return new ie(((r,o)=>{const h=()=>{e()===!0?s().next((()=>{h()}),o):r()};h()}))}}function vA(i){const e=i.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Nl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=-1;function Oh(i){return i==null}function yh(i){return i===0&&1/i==-1/0}function xA(i){return typeof i=="number"&&Number.isInteger(i)&&!yh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="";function bA(i){let e="";for(let s=0;s<i.length;s++)e.length>0&&(e=Kv(e)),e=_A(i.get(s),e);return Kv(e)}function _A(i,e){let s=e;const r=i.length;for(let o=0;o<r;o++){const h=i.charAt(o);switch(h){case"\0":s+="";break;case Yb:s+="";break;default:s+=h}}return s}function Kv(i){return i+Yb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(i){let e=0;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e++;return e}function wr(i,e){for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e(s,i[s])}function Kb(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,s){this.comparator=e,this.root=s||$t.EMPTY}insert(e,s){return new ft(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return s+r.left.size;o<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,r)=>(e(s,r),!1)))}toString(){const e=[];return this.inorderTraversal(((s,r)=>(e.push(`${s}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yu(this.root,e,this.comparator,!0)}}class Yu{constructor(e,s,r,o){this.isReverse=o,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=s?r(e.key,s):1,s&&o&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,s,r,o,h){this.key=e,this.value=s,this.color=r??$t.RED,this.left=o??$t.EMPTY,this.right=h??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,o,h){return new $t(e??this.key,s??this.value,r??this.color,o??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let o=this;const h=r(e,o.key);return o=h<0?o.copy(null,null,null,o.left.insert(e,s,r),null):h===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,s,r,o,h){return this}insert(e,s,r){return new $t(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,r)=>(e(s),!1)))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new $v(this.data.getIterator())}getIteratorFrom(e){return new $v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((r=>{s=s.add(r)})),s}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,h=r.getNext().key;if(this.comparator(o,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new Vt(this.comparator);return s.data=e,s}}class $v{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Cn([])}unionWith(e){let s=new Vt(Xt.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new Cn(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return yl(this.fields,e.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Qb("Invalid base64 string: "+h):h}})(e);return new Zt(s)}static fromUint8Array(e){const s=(function(o){let h="";for(let m=0;m<o.length;++m)h+=String.fromCharCode(o[m]);return h})(e);return new Zt(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const wA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(i){if(Xe(!!i,39018),typeof i=="string"){let e=0;const s=wA.exec(i);if(Xe(!!s,46558,{timestamp:i}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(i.seconds),nanos:_t(i.nanos)}}function _t(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function pr(i){return typeof i=="string"?Zt.fromBase64String(i):Zt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="server_timestamp",Xb="__type__",Wb="__previous_value__",Zb="__local_write_time__";function eg(i){return(i?.mapValue?.fields||{})[Xb]?.stringValue===$b}function Mh(i){const e=i.mapValue.fields[Wb];return eg(e)?Mh(e):e}function Wo(i){const e=gr(i.mapValue.fields[Zb].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,s,r,o,h,m,p,v,y,_){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=o,this.ssl=h,this.forceLongPolling=m,this.autoDetectLongPolling=p,this.longPollingOptions=v,this.useFetchStreams=y,this.isUsingEmulator=_}}const vh="(default)";class Zo{constructor(e,s){this.projectId=e,this.database=s||vh}static empty(){return new Zo("","")}get isDefaultDatabase(){return this.database===vh}isEqual(e){return e instanceof Zo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="__type__",EA="__max__",Ku={mapValue:{}},e_="__vector__",xh="value";function yr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?eg(i)?4:AA(i)?9007199254740991:SA(i)?10:11:Ce(28295,{value:i})}function qs(i,e){if(i===e)return!0;const s=yr(i);if(s!==yr(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Wo(i).isEqual(Wo(e));case 3:return(function(o,h){if(typeof o.timestampValue=="string"&&typeof h.timestampValue=="string"&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const m=gr(o.timestampValue),p=gr(h.timestampValue);return m.seconds===p.seconds&&m.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,h){return pr(o.bytesValue).isEqual(pr(h.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,h){return _t(o.geoPointValue.latitude)===_t(h.geoPointValue.latitude)&&_t(o.geoPointValue.longitude)===_t(h.geoPointValue.longitude)})(i,e);case 2:return(function(o,h){if("integerValue"in o&&"integerValue"in h)return _t(o.integerValue)===_t(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const m=_t(o.doubleValue),p=_t(h.doubleValue);return m===p?yh(m)===yh(p):isNaN(m)&&isNaN(p)}return!1})(i,e);case 9:return yl(i.arrayValue.values||[],e.arrayValue.values||[],qs);case 10:case 11:return(function(o,h){const m=o.mapValue.fields||{},p=h.mapValue.fields||{};if(Qv(m)!==Qv(p))return!1;for(const v in m)if(m.hasOwnProperty(v)&&(p[v]===void 0||!qs(m[v],p[v])))return!1;return!0})(i,e);default:return Ce(52216,{left:i})}}function Jo(i,e){return(i.values||[]).find((s=>qs(s,e)))!==void 0}function vl(i,e){if(i===e)return 0;const s=yr(i),r=yr(e);if(s!==r)return qe(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return qe(i.booleanValue,e.booleanValue);case 2:return(function(h,m){const p=_t(h.integerValue||h.doubleValue),v=_t(m.integerValue||m.doubleValue);return p<v?-1:p>v?1:p===v?0:isNaN(p)?isNaN(v)?0:-1:1})(i,e);case 3:return Xv(i.timestampValue,e.timestampValue);case 4:return Xv(Wo(i),Wo(e));case 5:return wm(i.stringValue,e.stringValue);case 6:return(function(h,m){const p=pr(h),v=pr(m);return p.compareTo(v)})(i.bytesValue,e.bytesValue);case 7:return(function(h,m){const p=h.split("/"),v=m.split("/");for(let y=0;y<p.length&&y<v.length;y++){const _=qe(p[y],v[y]);if(_!==0)return _}return qe(p.length,v.length)})(i.referenceValue,e.referenceValue);case 8:return(function(h,m){const p=qe(_t(h.latitude),_t(m.latitude));return p!==0?p:qe(_t(h.longitude),_t(m.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Wv(i.arrayValue,e.arrayValue);case 10:return(function(h,m){const p=h.fields||{},v=m.fields||{},y=p[xh]?.arrayValue,_=v[xh]?.arrayValue,S=qe(y?.values?.length||0,_?.values?.length||0);return S!==0?S:Wv(y,_)})(i.mapValue,e.mapValue);case 11:return(function(h,m){if(h===Ku.mapValue&&m===Ku.mapValue)return 0;if(h===Ku.mapValue)return 1;if(m===Ku.mapValue)return-1;const p=h.fields||{},v=Object.keys(p),y=m.fields||{},_=Object.keys(y);v.sort(),_.sort();for(let S=0;S<v.length&&S<_.length;++S){const R=wm(v[S],_[S]);if(R!==0)return R;const q=vl(p[v[S]],y[_[S]]);if(q!==0)return q}return qe(v.length,_.length)})(i.mapValue,e.mapValue);default:throw Ce(23264,{he:s})}}function Xv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return qe(i,e);const s=gr(i),r=gr(e),o=qe(s.seconds,r.seconds);return o!==0?o:qe(s.nanos,r.nanos)}function Wv(i,e){const s=i.values||[],r=e.values||[];for(let o=0;o<s.length&&o<r.length;++o){const h=vl(s[o],r[o]);if(h)return h}return qe(s.length,r.length)}function xl(i){return Tm(i)}function Tm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(s){const r=gr(s);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(s){return pr(s).toBase64()})(i.bytesValue):"referenceValue"in i?(function(s){return Te.fromName(s).toString()})(i.referenceValue):"geoPointValue"in i?(function(s){return`geo(${s.latitude},${s.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(s){let r="[",o=!0;for(const h of s.values||[])o?o=!1:r+=",",r+=Tm(h);return r+"]"})(i.arrayValue):"mapValue"in i?(function(s){const r=Object.keys(s.fields||{}).sort();let o="{",h=!0;for(const m of r)h?h=!1:o+=",",o+=`${m}:${Tm(s.fields[m])}`;return o+"}"})(i.mapValue):Ce(61005,{value:i})}function nh(i){switch(yr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mh(i);return e?16+nh(e):16;case 5:return 2*i.stringValue.length;case 6:return pr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,h)=>o+nh(h)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return wr(r.fields,((h,m)=>{o+=h.length+nh(m)})),o})(i.mapValue);default:throw Ce(13486,{value:i})}}function Zv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Em(i){return!!i&&"integerValue"in i}function tg(i){return!!i&&"arrayValue"in i}function Jv(i){return!!i&&"nullValue"in i}function ex(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function sh(i){return!!i&&"mapValue"in i}function SA(i){return(i?.mapValue?.fields||{})[Jb]?.stringValue===e_}function Ho(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return wr(i.mapValue.fields,((s,r)=>e.mapValue.fields[s]=Ho(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(i.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Ho(i.arrayValue.values[s]);return e}return{...i}}function AA(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===EA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!sh(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ho(s)}setAll(e){let s=Xt.emptyPath(),r={},o=[];e.forEach(((m,p)=>{if(!s.isImmediateParentOf(p)){const v=this.getFieldsMap(s);this.applyChanges(v,r,o),r={},o=[],s=p.popLast()}m?r[p.lastSegment()]=Ho(m):o.push(p.lastSegment())}));const h=this.getFieldsMap(s);this.applyChanges(h,r,o)}delete(e){const s=this.field(e.popLast());sh(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return qs(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=s.mapValue.fields[e.get(r)];sh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,r){wr(s,((o,h)=>e[o]=h));for(const o of r)delete e[o]}clone(){return new vn(Ho(this.value))}}function t_(i){const e=[];return wr(i.fields,((s,r)=>{const o=new Xt([s]);if(sh(r)){const h=t_(r.mapValue).fields;if(h.length===0)e.push(o);else for(const m of h)e.push(o.child(m))}else e.push(o)})),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,s,r,o,h,m,p){this.key=e,this.documentType=s,this.version=r,this.readTime=o,this.createTime=h,this.data=m,this.documentState=p}static newInvalidDocument(e){return new sn(e,0,je.min(),je.min(),je.min(),vn.empty(),0)}static newFoundDocument(e,s,r,o){return new sn(e,1,s,je.min(),r,o,0)}static newNoDocument(e,s){return new sn(e,2,s,je.min(),je.min(),vn.empty(),0)}static newUnknownDocument(e,s){return new sn(e,3,s,je.min(),je.min(),vn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,s){this.position=e,this.inclusive=s}}function tx(i,e,s){let r=0;for(let o=0;o<i.position.length;o++){const h=e[o],m=i.position[o];if(h.field.isKeyField()?r=Te.comparator(Te.fromName(m.referenceValue),s.key):r=vl(m,s.data.field(h.field)),h.dir==="desc"&&(r*=-1),r!==0)break}return r}function nx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let s=0;s<i.position.length;s++)if(!qs(i.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,s="asc"){this.field=e,this.dir=s}}function NA(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{}class kt extends n_{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new RA(e,s,r):s==="array-contains"?new kA(e,r):s==="in"?new DA(e,r):s==="not-in"?new OA(e,r):s==="array-contains-any"?new MA(e,r):new kt(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new jA(e,r):new IA(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(vl(s,this.value)):s!==null&&yr(this.value)===yr(s)&&this.matchesComparison(vl(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hs extends n_{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new hs(e,s)}matches(e){return s_(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function s_(i){return i.op==="and"}function i_(i){return CA(i)&&s_(i)}function CA(i){for(const e of i.filters)if(e instanceof hs)return!1;return!0}function Sm(i){if(i instanceof kt)return i.field.canonicalString()+i.op.toString()+xl(i.value);if(i_(i))return i.filters.map((e=>Sm(e))).join(",");{const e=i.filters.map((s=>Sm(s))).join(",");return`${i.op}(${e})`}}function r_(i,e){return i instanceof kt?(function(r,o){return o instanceof kt&&r.op===o.op&&r.field.isEqual(o.field)&&qs(r.value,o.value)})(i,e):i instanceof hs?(function(r,o){return o instanceof hs&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((h,m,p)=>h&&r_(m,o.filters[p])),!0):!1})(i,e):void Ce(19439)}function a_(i){return i instanceof kt?(function(s){return`${s.field.canonicalString()} ${s.op} ${xl(s.value)}`})(i):i instanceof hs?(function(s){return s.op.toString()+" {"+s.getFilters().map(a_).join(" ,")+"}"})(i):"Filter"}class RA extends kt{constructor(e,s,r){super(e,s,r),this.key=Te.fromName(r.referenceValue)}matches(e){const s=Te.comparator(e.key,this.key);return this.matchesComparison(s)}}class jA extends kt{constructor(e,s){super(e,"in",s),this.keys=l_("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class IA extends kt{constructor(e,s){super(e,"not-in",s),this.keys=l_("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function l_(i,e){return(e.arrayValue?.values||[]).map((s=>Te.fromName(s.referenceValue)))}class kA extends kt{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return tg(s)&&Jo(s.arrayValue,this.value)}}class DA extends kt{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&Jo(this.value.arrayValue,s)}}class OA extends kt{constructor(e,s){super(e,"not-in",s)}matches(e){if(Jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!Jo(this.value.arrayValue,s)}}class MA extends kt{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!tg(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>Jo(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,s=null,r=[],o=[],h=null,m=null,p=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=o,this.limit=h,this.startAt=m,this.endAt=p,this.Te=null}}function sx(i,e=null,s=[],r=[],o=null,h=null,m=null){return new VA(i,e,s,r,o,h,m)}function ng(i){const e=ke(i);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((r=>Sm(r))).join(","),s+="|ob:",s+=e.orderBy.map((r=>(function(h){return h.field.canonicalString()+h.dir})(r))).join(","),Oh(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((r=>xl(r))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((r=>xl(r))).join(",")),e.Te=s}return e.Te}function sg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<i.orderBy.length;s++)if(!NA(i.orderBy[s],e.orderBy[s]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let s=0;s<i.filters.length;s++)if(!r_(i.filters[s],e.filters[s]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!nx(i.startAt,e.startAt)&&nx(i.endAt,e.endAt)}function Am(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,s=null,r=[],o=[],h=null,m="F",p=null,v=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=o,this.limit=h,this.limitType=m,this.startAt=p,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function LA(i,e,s,r,o,h,m,p){return new Cl(i,e,s,r,o,h,m,p)}function ig(i){return new Cl(i)}function ix(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function o_(i){return i.collectionGroup!==null}function Fo(i){const e=ke(i);if(e.Ie===null){e.Ie=[];const s=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),s.add(h.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(m){let p=new Vt(Xt.comparator);return m.filters.forEach((v=>{v.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((h=>{s.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new ec(h,r))})),s.has(Xt.keyField().canonicalString())||e.Ie.push(new ec(Xt.keyField(),r))}return e.Ie}function Ps(i){const e=ke(i);return e.Ee||(e.Ee=PA(e,Fo(i))),e.Ee}function PA(i,e){if(i.limitType==="F")return sx(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const h=o.dir==="desc"?"asc":"desc";return new ec(o.field,h)}));const s=i.endAt?new bh(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new bh(i.startAt.position,i.startAt.inclusive):null;return sx(i.path,i.collectionGroup,e,i.filters,i.limit,s,r)}}function Nm(i,e){const s=i.filters.concat([e]);return new Cl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),s,i.limit,i.limitType,i.startAt,i.endAt)}function Cm(i,e,s){return new Cl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,s,i.startAt,i.endAt)}function Vh(i,e){return sg(Ps(i),Ps(e))&&i.limitType===e.limitType}function c_(i){return`${ng(Ps(i))}|lt:${i.limitType}`}function al(i){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((o=>a_(o))).join(", ")}]`),Oh(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((o=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(o))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((o=>xl(o))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((o=>xl(o))).join(",")),`Target(${r})`})(Ps(i))}; limitType=${i.limitType})`}function Lh(i,e){return e.isFoundDocument()&&(function(r,o){const h=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(h):Te.isDocumentKey(r.path)?r.path.isEqual(h):r.path.isImmediateParentOf(h)})(i,e)&&(function(r,o){for(const h of Fo(r))if(!h.field.isKeyField()&&o.data.field(h.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const h of r.filters)if(!h.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(m,p,v){const y=tx(m,p,v);return m.inclusive?y<=0:y<0})(r.startAt,Fo(r),o)||r.endAt&&!(function(m,p,v){const y=tx(m,p,v);return m.inclusive?y>=0:y>0})(r.endAt,Fo(r),o))})(i,e)}function UA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function u_(i){return(e,s)=>{let r=!1;for(const o of Fo(i)){const h=zA(o,e,s);if(h!==0)return h;r=r||o.field.isKeyField()}return 0}}function zA(i,e,s){const r=i.field.isKeyField()?Te.comparator(e.key,s.key):(function(h,m,p){const v=m.data.field(h),y=p.data.field(h);return v!==null&&y!==null?vl(v,y):Ce(42886)})(i.field,e,s);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[o,h]of r)if(this.equalsFn(o,e))return h}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return void(o[h]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[s]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){wr(this.inner,((s,r)=>{for(const[o,h]of r)e(o,h)}))}isEmpty(){return Kb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=new ft(Te.comparator);function vi(){return BA}const h_=new ft(Te.comparator);function Po(...i){let e=h_;for(const s of i)e=e.insert(s.key,s);return e}function d_(i){let e=h_;return i.forEach(((s,r)=>e=e.insert(s,r.overlayedDocument))),e}function sa(){return Go()}function f_(){return Go()}function Go(){return new ma((i=>i.toString()),((i,e)=>i.isEqual(e)))}const qA=new ft(Te.comparator),HA=new Vt(Te.comparator);function He(...i){let e=HA;for(const s of i)e=e.add(s);return e}const FA=new Vt(qe);function GA(){return FA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function m_(i){return{integerValue:""+i}}function YA(i,e){return xA(e)?m_(e):rg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this._=void 0}}function KA(i,e,s){return i instanceof _h?(function(o,h){const m={fields:{[Xb]:{stringValue:$b},[Zb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&eg(h)&&(h=Mh(h)),h&&(m.fields[Wb]=h),{mapValue:m}})(s,e):i instanceof tc?p_(i,e):i instanceof nc?y_(i,e):(function(o,h){const m=g_(o,h),p=rx(m)+rx(o.Ae);return Em(m)&&Em(o.Ae)?m_(p):rg(o.serializer,p)})(i,e)}function QA(i,e,s){return i instanceof tc?p_(i,e):i instanceof nc?y_(i,e):s}function g_(i,e){return i instanceof wh?(function(r){return Em(r)||(function(h){return!!h&&"doubleValue"in h})(r)})(e)?e:{integerValue:0}:null}class _h extends Ph{}class tc extends Ph{constructor(e){super(),this.elements=e}}function p_(i,e){const s=v_(e);for(const r of i.elements)s.some((o=>qs(o,r)))||s.push(r);return{arrayValue:{values:s}}}class nc extends Ph{constructor(e){super(),this.elements=e}}function y_(i,e){let s=v_(e);for(const r of i.elements)s=s.filter((o=>!qs(o,r)));return{arrayValue:{values:s}}}class wh extends Ph{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function rx(i){return _t(i.integerValue||i.doubleValue)}function v_(i){return tg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function $A(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof tc&&o instanceof tc||r instanceof nc&&o instanceof nc?yl(r.elements,o.elements,qs):r instanceof wh&&o instanceof wh?qs(r.Ae,o.Ae):r instanceof _h&&o instanceof _h})(i.transform,e.transform)}class XA{constructor(e,s){this.version=e,this.transformResults=s}}class Kn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ih(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Uh{}function x_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ag(i.key,Kn.none()):new uc(i.key,i.data,Kn.none());{const s=i.data,r=vn.empty();let o=new Vt(Xt.comparator);for(let h of e.fields)if(!o.has(h)){let m=s.field(h);m===null&&h.length>1&&(h=h.popLast(),m=s.field(h)),m===null?r.delete(h):r.set(h,m),o=o.add(h)}return new Tr(i.key,r,new Cn(o.toArray()),Kn.none())}}function WA(i,e,s){i instanceof uc?(function(o,h,m){const p=o.value.clone(),v=lx(o.fieldTransforms,h,m.transformResults);p.setAll(v),h.convertToFoundDocument(m.version,p).setHasCommittedMutations()})(i,e,s):i instanceof Tr?(function(o,h,m){if(!ih(o.precondition,h))return void h.convertToUnknownDocument(m.version);const p=lx(o.fieldTransforms,h,m.transformResults),v=h.data;v.setAll(b_(o)),v.setAll(p),h.convertToFoundDocument(m.version,v).setHasCommittedMutations()})(i,e,s):(function(o,h,m){h.convertToNoDocument(m.version).setHasCommittedMutations()})(0,e,s)}function Yo(i,e,s,r){return i instanceof uc?(function(h,m,p,v){if(!ih(h.precondition,m))return p;const y=h.value.clone(),_=ox(h.fieldTransforms,v,m);return y.setAll(_),m.convertToFoundDocument(m.version,y).setHasLocalMutations(),null})(i,e,s,r):i instanceof Tr?(function(h,m,p,v){if(!ih(h.precondition,m))return p;const y=ox(h.fieldTransforms,v,m),_=m.data;return _.setAll(b_(h)),_.setAll(y),m.convertToFoundDocument(m.version,_).setHasLocalMutations(),p===null?null:p.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((S=>S.field)))})(i,e,s,r):(function(h,m,p){return ih(h.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):p})(i,e,s)}function ZA(i,e){let s=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),h=g_(r.transform,o||null);h!=null&&(s===null&&(s=vn.empty()),s.set(r.field,h))}return s||null}function ax(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&yl(r,o,((h,m)=>$A(h,m)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class uc extends Uh{constructor(e,s,r,o=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Tr extends Uh{constructor(e,s,r,o,h=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=o,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function b_(i){const e=new Map;return i.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=i.data.field(s);e.set(s,r)}})),e}function lx(i,e,s){const r=new Map;Xe(i.length===s.length,32656,{Re:s.length,Ve:i.length});for(let o=0;o<s.length;o++){const h=i[o],m=h.transform,p=e.data.field(h.field);r.set(h.field,QA(m,p,s[o]))}return r}function ox(i,e,s){const r=new Map;for(const o of i){const h=o.transform,m=s.data.field(o.field);r.set(o.field,KA(h,m,e))}return r}class ag extends Uh{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JA extends Uh{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,s,r,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const h=this.mutations[o];h.key.isEqual(e.key)&&WA(h,e,r[o])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=Yo(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=Yo(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=f_();return this.mutations.forEach((o=>{const h=e.get(o.key),m=h.overlayedDocument;let p=this.applyToLocalView(m,h.mutatedFields);p=s.has(o.key)?null:p;const v=x_(m,p);v!==null&&r.set(o.key,v),m.isValidDocument()||m.convertToNoDocument(je.min())})),r}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),He())}isEqual(e){return this.batchId===e.batchId&&yl(this.mutations,e.mutations,((s,r)=>ax(s,r)))&&yl(this.baseMutations,e.baseMutations,((s,r)=>ax(s,r)))}}class lg{constructor(e,s,r,o){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=o}static from(e,s,r){Xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return qA})();const h=e.mutations;for(let m=0;m<h.length;m++)o=o.insert(h[m].key,r[m].version);return new lg(e,s,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Ge;function sN(i){switch(i){case se.OK:return Ce(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ce(15467,{code:i})}}function __(i){if(i===void 0)return yi("GRPC error has no .code"),se.UNKNOWN;switch(i){case It.OK:return se.OK;case It.CANCELLED:return se.CANCELLED;case It.UNKNOWN:return se.UNKNOWN;case It.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case It.INTERNAL:return se.INTERNAL;case It.UNAVAILABLE:return se.UNAVAILABLE;case It.UNAUTHENTICATED:return se.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case It.NOT_FOUND:return se.NOT_FOUND;case It.ALREADY_EXISTS:return se.ALREADY_EXISTS;case It.PERMISSION_DENIED:return se.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case It.ABORTED:return se.ABORTED;case It.OUT_OF_RANGE:return se.OUT_OF_RANGE;case It.UNIMPLEMENTED:return se.UNIMPLEMENTED;case It.DATA_LOSS:return se.DATA_LOSS;default:return Ce(39323,{code:i})}}(Ge=It||(It={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new dr([4294967295,4294967295],0);function cx(i){const e=iN().encode(i),s=new Vb;return s.update(e),new Uint8Array(s.digest())}function ux(i){const e=new DataView(i.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new dr([s,r],0),new dr([o,h],0)]}class og{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Uo(`Invalid padding: ${s}`);if(r<0)throw new Uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Uo(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Uo(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=dr.fromNumber(this.ge)}ye(e,s,r){let o=e.add(s.multiply(dr.fromNumber(r)));return o.compare(rN)===1&&(o=new dr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=cx(e),[r,o]=ux(s);for(let h=0;h<this.hashCount;h++){const m=this.ye(r,o,h);if(!this.we(m))return!1}return!0}static create(e,s,r){const o=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),m=new og(h,o,s);return r.forEach((p=>m.insert(p))),m}insert(e){if(this.ge===0)return;const s=cx(e),[r,o]=ux(s);for(let h=0;h<this.hashCount;h++){const m=this.ye(r,o,h);this.Se(m)}}Se(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Uo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,s,r,o,h){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const o=new Map;return o.set(e,hc.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new zh(je.min(),o,new ft(qe),vi(),He())}}class hc{constructor(e,s,r,o,h){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new hc(r,s,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,s,r,o){this.be=e,this.removedTargetIds=s,this.key=r,this.De=o}}class w_{constructor(e,s){this.targetId=e,this.Ce=s}}class T_{constructor(e,s,r=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=o}}class hx{constructor(){this.ve=0,this.Fe=dx(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),s=He(),r=He();return this.Fe.forEach(((o,h)=>{switch(h){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:r=r.add(o);break;default:Ce(38017,{changeType:h})}})),new hc(this.Me,this.xe,e,s,r)}qe(){this.Oe=!1,this.Fe=dx()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class aN{constructor(e){this.Ge=e,this.ze=new Map,this.je=vi(),this.Je=Qu(),this.He=Qu(),this.Ye=new ft(qe)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const r=this.nt(s);switch(e.state){case 0:this.rt(s)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((r,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,r=e.Ce.count,o=this.ot(s);if(o){const h=o.target;if(Am(h))if(r===0){const m=new Te(h.path);this.et(s,m,sn.newNoDocument(m,je.min()))}else Xe(r===1,20013,{expectedCount:r});else{const m=this._t(s);if(m!==r){const p=this.ut(e),v=p?this.ct(p,e,m):1;if(v!==0){this.it(s);const y=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,y)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:h=0}=s;let m,p;try{m=pr(r).toUint8Array()}catch(v){if(v instanceof Qb)return pl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{p=new og(m,o,h)}catch(v){return pl(v instanceof Uo?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return p.ge===0?null:p}ct(e,s,r){return s.Ce.count===r-this.Pt(e,s.targetId)?0:2}Pt(e,s){const r=this.Ge.getRemoteKeysForTarget(s);let o=0;return r.forEach((h=>{const m=this.Ge.ht(),p=`projects/${m.projectId}/databases/${m.database}/documents/${h.path.canonicalString()}`;e.mightContain(p)||(this.et(s,h,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((h,m)=>{const p=this.ot(m);if(p){if(h.current&&Am(p.target)){const v=new Te(p.target.path);this.It(v).has(m)||this.Et(m,v)||this.et(m,v,sn.newNoDocument(v,e))}h.Be&&(s.set(m,h.ke()),h.qe())}}));let r=He();this.He.forEach(((h,m)=>{let p=!0;m.forEachWhile((v=>{const y=this.ot(v);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(h))})),this.je.forEach(((h,m)=>m.setReadTime(e)));const o=new zh(e,s,this.Ye,this.je,r);return this.je=vi(),this.Je=Qu(),this.He=Qu(),this.Ye=new ft(qe),o}Xe(e,s){if(!this.rt(e))return;const r=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,r),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),r&&(this.je=this.je.insert(s,r))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new hx,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new Vt(qe),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new Vt(qe),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||ve("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hx),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function Qu(){return new ft(Te.comparator)}function dx(){return new ft(Te.comparator)}const lN={asc:"ASCENDING",desc:"DESCENDING"},oN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cN={and:"AND",or:"OR"};class uN{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Rm(i,e){return i.useProto3Json||Oh(e)?e:{value:e}}function Th(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function hN(i,e){return Th(i,e.toTimestamp())}function Us(i){return Xe(!!i,49232),je.fromTimestamp((function(s){const r=gr(s);return new ct(r.seconds,r.nanos)})(i))}function cg(i,e){return jm(i,e).canonicalString()}function jm(i,e){const s=(function(o){return new at(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?s:s.child(e)}function S_(i){const e=at.fromString(i);return Xe(j_(e),10190,{key:e.toString()}),e}function Im(i,e){return cg(i.databaseId,e.path)}function om(i,e){const s=S_(e);if(s.get(1)!==i.databaseId.projectId)throw new ye(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+i.databaseId.projectId);if(s.get(3)!==i.databaseId.database)throw new ye(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+i.databaseId.database);return new Te(N_(s))}function A_(i,e){return cg(i.databaseId,e)}function dN(i){const e=S_(i);return e.length===4?at.emptyPath():N_(e)}function km(i){return new at(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function N_(i){return Xe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function fx(i,e,s){return{name:Im(i,e),fields:s.value.mapValue.fields}}function fN(i,e){let s;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ce(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],h=(function(y,_){return y.useProto3Json?(Xe(_===void 0||typeof _=="string",58123),Zt.fromBase64String(_||"")):(Xe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Zt.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),m=e.targetChange.cause,p=m&&(function(y){const _=y.code===void 0?se.UNKNOWN:__(y.code);return new ye(_,y.message||"")})(m);s=new T_(r,o,h,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=om(i,r.document.name),h=Us(r.document.updateTime),m=r.document.createTime?Us(r.document.createTime):je.min(),p=new vn({mapValue:{fields:r.document.fields}}),v=sn.newFoundDocument(o,h,m,p),y=r.targetIds||[],_=r.removedTargetIds||[];s=new rh(y,_,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=om(i,r.document),h=r.readTime?Us(r.readTime):je.min(),m=sn.newNoDocument(o,h),p=r.removedTargetIds||[];s=new rh([],p,m.key,m)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=om(i,r.document),h=r.removedTargetIds||[];s=new rh([],h,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:h}=r,m=new nN(o,h),p=r.targetId;s=new w_(p,m)}}return s}function mN(i,e){let s;if(e instanceof uc)s={update:fx(i,e.key,e.value)};else if(e instanceof ag)s={delete:Im(i,e.key)};else if(e instanceof Tr)s={update:fx(i,e.key,e.data),updateMask:TN(e.fieldMask)};else{if(!(e instanceof JA))return Ce(16599,{Vt:e.type});s={verify:Im(i,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((r=>(function(h,m){const p=m.transform;if(p instanceof _h)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof tc)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof nc)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof wh)return{fieldPath:m.field.canonicalString(),increment:p.Ae};throw Ce(20930,{transform:m.transform})})(0,r)))),e.precondition.isNone||(s.currentDocument=(function(o,h){return h.updateTime!==void 0?{updateTime:hN(o,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:Ce(27497)})(i,e.precondition)),s}function gN(i,e){return i&&i.length>0?(Xe(e!==void 0,14353),i.map((s=>(function(o,h){let m=o.updateTime?Us(o.updateTime):Us(h);return m.isEqual(je.min())&&(m=Us(h)),new XA(m,o.transformResults||[])})(s,e)))):[]}function pN(i,e){return{documents:[A_(i,e.path)]}}function yN(i,e){const s={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=A_(i,o);const h=(function(y){if(y.length!==0)return R_(hs.create(y,"and"))})(e.filters);h&&(s.structuredQuery.where=h);const m=(function(y){if(y.length!==0)return y.map((_=>(function(R){return{field:ll(R.field),direction:bN(R.dir)}})(_)))})(e.orderBy);m&&(s.structuredQuery.orderBy=m);const p=Rm(i,e.limit);return p!==null&&(s.structuredQuery.limit=p),e.startAt&&(s.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:s,parent:o}}function vN(i){let e=dN(i.parent);const s=i.structuredQuery,r=s.from?s.from.length:0;let o=null;if(r>0){Xe(r===1,65062);const _=s.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let h=[];s.where&&(h=(function(S){const R=C_(S);return R instanceof hs&&i_(R)?R.getFilters():[R]})(s.where));let m=[];s.orderBy&&(m=(function(S){return S.map((R=>(function(ee){return new ec(ol(ee.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ee.direction))})(R)))})(s.orderBy));let p=null;s.limit&&(p=(function(S){let R;return R=typeof S=="object"?S.value:S,Oh(R)?null:R})(s.limit));let v=null;s.startAt&&(v=(function(S){const R=!!S.before,q=S.values||[];return new bh(q,R)})(s.startAt));let y=null;return s.endAt&&(y=(function(S){const R=!S.before,q=S.values||[];return new bh(q,R)})(s.endAt)),LA(e,o,m,h,p,"F",v,y)}function xN(i,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function C_(i){return i.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=ol(s.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ol(s.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=ol(s.unaryFilter.field);return kt.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=ol(s.unaryFilter.field);return kt.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(i):i.fieldFilter!==void 0?(function(s){return kt.create(ol(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(s){return hs.create(s.compositeFilter.filters.map((r=>C_(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(s.compositeFilter.op))})(i):Ce(30097,{filter:i})}function bN(i){return lN[i]}function _N(i){return oN[i]}function wN(i){return cN[i]}function ll(i){return{fieldPath:i.canonicalString()}}function ol(i){return Xt.fromServerFormat(i.fieldPath)}function R_(i){return i instanceof kt?(function(s){if(s.op==="=="){if(ex(s.value))return{unaryFilter:{field:ll(s.field),op:"IS_NAN"}};if(Jv(s.value))return{unaryFilter:{field:ll(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(ex(s.value))return{unaryFilter:{field:ll(s.field),op:"IS_NOT_NAN"}};if(Jv(s.value))return{unaryFilter:{field:ll(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(s.field),op:_N(s.op),value:s.value}}})(i):i instanceof hs?(function(s){const r=s.getFilters().map((o=>R_(o)));return r.length===1?r[0]:{compositeFilter:{op:wN(s.op),filters:r}}})(i):Ce(54877,{filter:i})}function TN(i){const e=[];return i.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function j_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,s,r,o,h=je.min(),m=je.min(),p=Zt.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=p,this.expectedCount=v}withSequenceNumber(e){return new or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.yt=e}}function SN(i){const e=vN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Cm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.Cn=new NN}addToCollectionParentIndex(e,s){return this.Cn.add(s),ie.resolve()}getCollectionParents(e,s){return ie.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return ie.resolve()}deleteFieldIndex(e,s){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,s){return ie.resolve()}getDocumentsMatchingTarget(e,s){return ie.resolve(null)}getIndexType(e,s){return ie.resolve(0)}getFieldIndexes(e,s){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,s){return ie.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,s){return ie.resolve(mr.min())}updateCollectionGroup(e,s,r){return ie.resolve()}updateIndexEntries(e,s){return ie.resolve()}}class NN{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s]||new Vt(at.comparator),h=!o.has(r);return this.index[s]=o.add(r),h}has(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Vt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},I_=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(I_,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new bl(0)}static cr(){return new bl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="LruGarbageCollector",CN=1048576;function px([i,e],[s,r]){const o=qe(i,s);return o===0?qe(e,r):o}class RN{constructor(e){this.Ir=e,this.buffer=new Vt(px),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();px(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class jN{constructor(e,s,r){this.garbageCollector=e,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(gx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Nl(s)?ve(gx,"Ignoring IndexedDB error during garbage collection: ",s):await Al(s)}await this.Vr(3e5)}))}}class IN{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(e,s){if(s===0)return ie.resolve(Dh.ce);const r=new RN(s);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,s,r){return this.mr.removeTargets(e,s,r)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(mx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mx):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let r,o,h,m,p,v,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,m=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,p=Date.now(),this.removeTargets(e,r,s)))).next((S=>(h=S,v=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(y=Date.now(),rl()<=Be.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-_}ms
	Determined least recently used ${o} in `+(p-m)+`ms
	Removed ${h} targets in `+(v-p)+`ms
	Removed ${S} documents in `+(y-v)+`ms
Total Duration: ${y-_}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:h,documentsRemoved:S}))))}}function kN(i,e){return new IN(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.changes=new ma((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?ie.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,s,r,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(r!==null&&Yo(r.mutation,o,Cn.empty(),ct.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.getLocalViewOfDocuments(e,r,He()).next((()=>r))))}getLocalViewOfDocuments(e,s,r=He()){const o=sa();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,r).next((h=>{let m=Po();return h.forEach(((p,v)=>{m=m.insert(p,v.overlayedDocument)})),m}))))}getOverlayedDocuments(e,s){const r=sa();return this.populateOverlays(e,r,s).next((()=>this.computeViews(e,s,r,He())))}populateOverlays(e,s,r){const o=[];return r.forEach((h=>{s.has(h)||o.push(h)})),this.documentOverlayCache.getOverlays(e,o).next((h=>{h.forEach(((m,p)=>{s.set(m,p)}))}))}computeViews(e,s,r,o){let h=vi();const m=Go(),p=(function(){return Go()})();return s.forEach(((v,y)=>{const _=r.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Tr)?h=h.insert(y.key,y):_!==void 0?(m.set(y.key,_.mutation.getFieldMask()),Yo(_.mutation,y,_.mutation.getFieldMask(),ct.now())):m.set(y.key,Cn.empty())})),this.recalculateAndSaveOverlays(e,h).next((v=>(v.forEach(((y,_)=>m.set(y,_))),s.forEach(((y,_)=>p.set(y,new ON(_,m.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,s){const r=Go();let o=new ft(((m,p)=>m-p)),h=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((m=>{for(const p of m)p.keys().forEach((v=>{const y=s.get(v);if(y===null)return;let _=r.get(v)||Cn.empty();_=p.applyToLocalView(y,_),r.set(v,_);const S=(o.get(p.batchId)||He()).add(v);o=o.insert(p.batchId,S)}))})).next((()=>{const m=[],p=o.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),y=v.key,_=v.value,S=f_();_.forEach((R=>{if(!h.has(R)){const q=x_(s.get(R),r.get(R));q!==null&&S.set(R,q),h=h.add(R)}})),m.push(this.documentOverlayCache.saveOverlays(e,y,S))}return ie.waitFor(m)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,s,r,o){return(function(m){return Te.isDocumentKey(m.path)&&m.collectionGroup===null&&m.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):o_(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,o):this.getDocumentsMatchingCollectionQuery(e,s,r,o)}getNextDocuments(e,s,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,o).next((h=>{const m=o-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,o-h.size):ie.resolve(sa());let p=Xo,v=h;return m.next((y=>ie.forEach(y,((_,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),h.get(_)?ie.resolve():this.remoteDocumentCache.getEntry(e,_).next((R=>{v=v.insert(_,R)}))))).next((()=>this.populateOverlays(e,y,h))).next((()=>this.computeViews(e,v,y,He()))).next((_=>({batchId:p,changes:d_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Te(s)).next((r=>{let o=Po();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,r,o){const h=s.collectionGroup;let m=Po();return this.indexManager.getCollectionParents(e,h).next((p=>ie.forEach(p,(v=>{const y=(function(S,R){return new Cl(R,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(s,v.child(h));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((_=>{_.forEach(((S,R)=>{m=m.insert(S,R)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(e,s,r,o){let h;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next((m=>(h=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,h,o)))).next((m=>{h.forEach(((v,y)=>{const _=y.getKey();m.get(_)===null&&(m=m.insert(_,sn.newInvalidDocument(_)))}));let p=Po();return m.forEach(((v,y)=>{const _=h.get(v);_!==void 0&&Yo(_.mutation,y,Cn.empty(),ct.now()),Lh(s,y)&&(p=p.insert(v,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return ie.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:Us(o.createTime)}})(s)),ie.resolve()}getNamedQuery(e,s){return ie.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:SN(o.bundledQuery),readTime:Us(o.readTime)}})(s)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.overlays=new ft(Te.comparator),this.qr=new Map}getOverlay(e,s){return ie.resolve(this.overlays.get(s))}getOverlays(e,s){const r=sa();return ie.forEach(s,(o=>this.getOverlay(e,o).next((h=>{h!==null&&r.set(o,h)})))).next((()=>r))}saveOverlays(e,s,r){return r.forEach(((o,h)=>{this.St(e,s,h)})),ie.resolve()}removeOverlaysForBatchId(e,s,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,s,r){const o=sa(),h=s.length+1,m=new Te(s.child("")),p=this.overlays.getIteratorFrom(m);for(;p.hasNext();){const v=p.getNext().value,y=v.getKey();if(!s.isPrefixOf(y.path))break;y.path.length===h&&v.largestBatchId>r&&o.set(v.getKey(),v)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,s,r,o){let h=new ft(((y,_)=>y-_));const m=this.overlays.getIterator();for(;m.hasNext();){const y=m.getNext().value;if(y.getKey().getCollectionGroup()===s&&y.largestBatchId>r){let _=h.get(y.largestBatchId);_===null&&(_=sa(),h=h.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const p=sa(),v=h.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((y,_)=>p.set(y,_))),!(p.size()>=o)););return ie.resolve(p)}St(e,s,r){const o=this.overlays.get(r.key);if(o!==null){const m=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,m)}this.overlays=this.overlays.insert(r.key,new tN(s,r));let h=this.qr.get(s);h===void 0&&(h=He(),this.qr.set(s,h)),this.qr.set(s,h.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this.Qr=new Vt(Bt.$r),this.Ur=new Vt(Bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const r=new Bt(e,s);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,s){e.forEach((r=>this.addReference(r,s)))}removeReference(e,s){this.Gr(new Bt(e,s))}zr(e,s){e.forEach((r=>this.removeReference(r,s)))}jr(e){const s=new Te(new at([])),r=new Bt(s,e),o=new Bt(s,e+1),h=[];return this.Ur.forEachInRange([r,o],(m=>{this.Gr(m),h.push(m.key)})),h}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new Te(new at([])),r=new Bt(s,e),o=new Bt(s,e+1);let h=He();return this.Ur.forEachInRange([r,o],(m=>{h=h.add(m.key)})),h}containsKey(e){const s=new Bt(e,0),r=this.Qr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return Te.comparator(e.key,s.key)||qe(e.Yr,s.Yr)}static Kr(e,s){return qe(e.Yr,s.Yr)||Te.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(Bt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,o){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new eN(h,s,r,o);this.mutationQueue.push(m);for(const p of o)this.Zr=this.Zr.add(new Bt(p.key,h)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ie.resolve(m)}lookupMutationBatch(e,s){return ie.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,o=this.ei(r),h=o<0?0:o;return ie.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Jm:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new Bt(s,0),o=new Bt(s,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([r,o],(m=>{const p=this.Xr(m.Yr);h.push(p)})),ie.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new Vt(qe);return s.forEach((o=>{const h=new Bt(o,0),m=new Bt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,m],(p=>{r=r.add(p.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,o=r.length+1;let h=r;Te.isDocumentKey(h)||(h=h.child(""));const m=new Bt(new Te(h),0);let p=new Vt(qe);return this.Zr.forEachWhile((v=>{const y=v.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(v.Yr)),!0)}),m),ie.resolve(this.ti(p))}ti(e){const s=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){Xe(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(s.mutations,(o=>{const h=new Bt(o.key,s.batchId);return r=r.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,s){const r=new Bt(s,0),o=this.Zr.firstAfterOrEqual(r);return ie.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.ri=e,this.docs=(function(){return new ft(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,o=this.docs.get(r),h=o?o.size:0,m=this.ri(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:m}),this.size+=m-h,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return ie.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(s))}getEntries(e,s){let r=vi();return s.forEach((o=>{const h=this.docs.get(o);r=r.insert(o,h?h.document.mutableCopy():sn.newInvalidDocument(o))})),ie.resolve(r)}getDocumentsMatchingQuery(e,s,r,o){let h=vi();const m=s.path,p=new Te(m.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:y,value:{document:_}}=v.getNext();if(!m.isPrefixOf(y.path))break;y.path.length>m.length+1||gA(mA(_),r)<=0||(o.has(_.key)||Lh(s,_))&&(h=h.insert(_.key,_.mutableCopy()))}return ie.resolve(h)}getAllFromCollectionGroup(e,s,r,o){Ce(9500)}ii(e,s){return ie.forEach(this.docs,(r=>s(r)))}newChangeBuffer(e){return new BN(this)}getSize(e){return ie.resolve(this.size)}}class BN extends DN{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ie.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.persistence=e,this.si=new ma((s=>ng(s)),sg),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new ug,this.targetCount=0,this.ai=bl.ur()}forEachTarget(e,s){return this.si.forEach(((r,o)=>s(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.oi&&(this.oi=s),ie.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new bl(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,ie.resolve()}updateTargetData(e,s){return this.Pr(s),ie.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,s,r){let o=0;const h=[];return this.si.forEach(((m,p)=>{p.sequenceNumber<=s&&r.get(p.targetId)===null&&(this.si.delete(m),h.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ie.waitFor(h).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,s){const r=this.si.get(s)||null;return ie.resolve(r)}addMatchingKeys(e,s,r){return this._i.Wr(s,r),ie.resolve()}removeMatchingKeys(e,s,r){this._i.zr(s,r);const o=this.persistence.referenceDelegate,h=[];return o&&s.forEach((m=>{h.push(o.markPotentiallyOrphaned(e,m))})),ie.waitFor(h)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),ie.resolve()}getMatchingKeysForTargetId(e,s){const r=this._i.Hr(s);return ie.resolve(r)}containsKey(e,s){return ie.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,s){this.ui={},this.overlays={},this.ci=new Dh(0),this.li=!1,this.li=!0,this.hi=new PN,this.referenceDelegate=e(this),this.Pi=new qN(this),this.indexManager=new AN,this.remoteDocumentCache=(function(o){return new zN(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new EN(s),this.Ii=new VN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new LN,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.ui[e.toKey()];return r||(r=new UN(s,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,r){ve("MemoryPersistence","Starting transaction:",e);const o=new HN(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((h=>this.referenceDelegate.di(o).next((()=>h)))).toPromise().then((h=>(o.raiseOnCommittedEvent(),h)))}Ai(e,s){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,s))))}}class HN extends yA{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Ri=new ug,this.Vi=null}static mi(e){return new hg(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,s,r){return this.Ri.addReference(r,s),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,s,r){return this.Ri.removeReference(r,s),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),ie.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((h=>this.fi.add(h.toString())))})).next((()=>r.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const o=Te.fromPath(r);return this.gi(e,o).next((h=>{h||s.removeEntry(o,je.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((r=>{r?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return ie.or([()=>ie.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class Eh{constructor(e,s){this.persistence=e,this.pi=new ma((r=>bA(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=kN(this,s)}static mi(e,s){return new Eh(e,s)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>s.next((o=>r+o))))}wr(e){let s=0;return this.pr(e,(r=>{s++})).next((()=>s))}pr(e,s){return ie.forEach(this.pi,((r,o)=>this.br(e,r,o).next((h=>h?ie.resolve():s(o)))))}removeTargets(e,s,r){return this.persistence.getTargetCache().removeTargets(e,s,r)}removeOrphanedDocuments(e,s){let r=0;const o=this.persistence.getRemoteDocumentCache(),h=o.newChangeBuffer();return o.ii(e,(m=>this.br(e,m,s).next((p=>{p||(r++,h.removeEntry(m,je.min()))})))).next((()=>h.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeTarget(e,s){const r=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=nh(e.data.value)),s}br(e,s,r){return ie.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return ie.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,s,r,o){this.targetId=e,this.fromCache=s,this.Es=r,this.ds=o}static As(e,s){let r=He(),o=He();for(const h of s.docChanges)switch(h.type){case 0:r=r.add(h.doc.key);break;case 1:o=o.add(h.doc.key)}return new dg(e,s.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vw()?8:vA(rn())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,r,o){const h={result:null};return this.ys(e,s).next((m=>{h.result=m})).next((()=>{if(!h.result)return this.ws(e,s,o,r).next((m=>{h.result=m}))})).next((()=>{if(h.result)return;const m=new FN;return this.Ss(e,s,m).next((p=>{if(h.result=p,this.Vs)return this.bs(e,s,m,p.size)}))})).next((()=>h.result))}bs(e,s,r,o){return r.documentReadCount<this.fs?(rl()<=Be.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",al(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(rl()<=Be.DEBUG&&ve("QueryEngine","Query:",al(s),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(rl()<=Be.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",al(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ps(s))):ie.resolve())}ys(e,s){if(ix(s))return ie.resolve(null);let r=Ps(s);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=Cm(s,null,"F"),r=Ps(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next((h=>{const m=He(...h);return this.ps.getDocuments(e,m).next((p=>this.indexManager.getMinOffset(e,r).next((v=>{const y=this.Ds(s,p);return this.Cs(s,y,m,v.readTime)?this.ys(e,Cm(s,null,"F")):this.vs(e,y,s,v)}))))})))))}ws(e,s,r,o){return ix(s)||o.isEqual(je.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((h=>{const m=this.Ds(s,h);return this.Cs(s,m,r,o)?ie.resolve(null):(rl()<=Be.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),al(s)),this.vs(e,m,s,fA(o,Xo)).next((p=>p)))}))}Ds(e,s){let r=new Vt(u_(e));return s.forEach(((o,h)=>{Lh(e,h)&&(r=r.add(h))})),r}Cs(e,s,r,o){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const h=e.limitType==="F"?s.last():s.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(o)>0)}Ss(e,s,r){return rl()<=Be.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",al(s)),this.ps.getDocumentsMatchingQuery(e,s,mr.min(),r)}vs(e,s,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((h=>(s.forEach((m=>{h=h.insert(m.key,m)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="LocalStore",YN=3e8;class KN{constructor(e,s,r,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new ft(qe),this.xs=new ma((h=>ng(h)),sg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function QN(i,e,s,r){return new KN(i,e,s,r)}async function D_(i,e){const s=ke(i);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return s.mutationQueue.getAllMutationBatches(r).next((h=>(o=h,s.Bs(e),s.mutationQueue.getAllMutationBatches(r)))).next((h=>{const m=[],p=[];let v=He();for(const y of o){m.push(y.batchId);for(const _ of y.mutations)v=v.add(_.key)}for(const y of h){p.push(y.batchId);for(const _ of y.mutations)v=v.add(_.key)}return s.localDocuments.getDocuments(r,v).next((y=>({Ls:y,removedBatchIds:m,addedBatchIds:p})))}))}))}function $N(i,e){const s=ke(i);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),h=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,v,y,_){const S=y.batch,R=S.keys();let q=ie.resolve();return R.forEach((ee=>{q=q.next((()=>_.getEntry(v,ee))).next((Q=>{const Z=y.docVersions.get(ee);Xe(Z!==null,48541),Q.version.compareTo(Z)<0&&(S.applyToRemoteDocument(Q,y),Q.isValidDocument()&&(Q.setReadTime(y.commitVersion),_.addEntry(Q)))}))})),q.next((()=>p.mutationQueue.removeMutationBatch(v,S)))})(s,r,e,h).next((()=>h.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let v=He();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(v=v.add(p.batch.mutations[y].key));return v})(e)))).next((()=>s.localDocuments.getDocuments(r,o)))}))}function O_(i){const e=ke(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function XN(i,e){const s=ke(i),r=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const m=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const p=[];e.targetChanges.forEach(((_,S)=>{const R=o.get(S);if(!R)return;p.push(s.Pi.removeMatchingKeys(h,_.removedDocuments,S).next((()=>s.Pi.addMatchingKeys(h,_.addedDocuments,S))));let q=R.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(S)!==null?q=q.withResumeToken(Zt.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):_.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(_.resumeToken,r)),o=o.insert(S,q),(function(Q,Z,ce){return Q.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=YN?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(R,q,_)&&p.push(s.Pi.updateTargetData(h,q))}));let v=vi(),y=He();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(h,_))})),p.push(WN(h,m,e.documentUpdates).next((_=>{v=_.ks,y=_.qs}))),!r.isEqual(je.min())){const _=s.Pi.getLastRemoteSnapshotVersion(h).next((S=>s.Pi.setTargetsMetadata(h,h.currentSequenceNumber,r)));p.push(_)}return ie.waitFor(p).next((()=>m.apply(h))).next((()=>s.localDocuments.getLocalViewOfDocuments(h,v,y))).next((()=>v))})).then((h=>(s.Ms=o,h)))}function WN(i,e,s){let r=He(),o=He();return s.forEach((h=>r=r.add(h))),e.getEntries(i,r).next((h=>{let m=vi();return s.forEach(((p,v)=>{const y=h.get(p);v.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),v.isNoDocument()&&v.version.isEqual(je.min())?(e.removeEntry(p,v.readTime),m=m.insert(p,v)):!y.isValidDocument()||v.version.compareTo(y.version)>0||v.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(v),m=m.insert(p,v)):ve(fg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",v.version)})),{ks:m,qs:o}}))}function ZN(i,e){const s=ke(i);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Jm),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function JN(i,e){const s=ke(i);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return s.Pi.getTargetData(r,e).next((h=>h?(o=h,ie.resolve(o)):s.Pi.allocateTargetId(r).next((m=>(o=new or(e,m,"TargetPurposeListen",r.currentSequenceNumber),s.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=s.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(r.targetId,r),s.xs.set(e,r.targetId)),r}))}async function Dm(i,e,s){const r=ke(i),o=r.Ms.get(e),h=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",h,(m=>r.persistence.referenceDelegate.removeTarget(m,o)))}catch(m){if(!Nl(m))throw m;ve(fg,`Failed to update sequence numbers for target ${e}: ${m}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function yx(i,e,s){const r=ke(i);let o=je.min(),h=He();return r.persistence.runTransaction("Execute query","readwrite",(m=>(function(v,y,_){const S=ke(v),R=S.xs.get(_);return R!==void 0?ie.resolve(S.Ms.get(R)):S.Pi.getTargetData(y,_)})(r,m,Ps(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(m,p.targetId).next((v=>{h=v}))})).next((()=>r.Fs.getDocumentsMatchingQuery(m,e,s?o:je.min(),s?h:He()))).next((p=>(e4(r,UA(e),p),{documents:p,Qs:h})))))}function e4(i,e,s){let r=i.Os.get(e)||je.min();s.forEach(((o,h)=>{h.readTime.compareTo(r)>0&&(r=h.readTime)})),i.Os.set(e,r)}class vx{constructor(){this.activeTargetIds=GA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t4{constructor(){this.Mo=new vx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,r){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vx,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="ConnectivityMonitor";class bx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(xx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(xx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u=null;function Om(){return $u===null?$u=(function(){return 268435456+Math.round(2147483648*Math.random())})():$u++,"0x"+$u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="RestConnection",s4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class i4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===vh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,s,r,o,h){const m=Om(),p=this.zo(e,s.toUriEncodedString());ve(cm,`Sending RPC '${e}' ${m}:`,p,r);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,h);const{host:y}=new URL(p),_=wl(y);return this.Jo(e,p,v,r,_).then((S=>(ve(cm,`Received RPC '${e}' ${m}: `,S),S)),(S=>{throw pl(cm,`RPC '${e}' ${m} failed with error: `,S,"url: ",p,"request:",r),S}))}Ho(e,s,r,o,h,m){return this.Go(e,s,r,o,h)}jo(e,s,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Sl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,h)=>e[h]=o)),r&&r.headers.forEach(((o,h)=>e[h]=o))}zo(e,s){const r=s4[e];return`${this.Uo}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class a4 extends i4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,r,o,h){const m=Om();return new Promise(((p,v)=>{const y=new Lb;y.setWithCredentials(!0),y.listenOnce(Pb.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case th.NO_ERROR:const S=y.getResponseJson();ve(tn,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(S)),p(S);break;case th.TIMEOUT:ve(tn,`RPC '${e}' ${m} timed out`),v(new ye(se.DEADLINE_EXCEEDED,"Request time out"));break;case th.HTTP_ERROR:const R=y.getStatus();if(ve(tn,`RPC '${e}' ${m} failed with status:`,R,"response text:",y.getResponseText()),R>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const ee=q?.error;if(ee&&ee.status&&ee.message){const Q=(function(ce){const re=ce.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(re)>=0?re:se.UNKNOWN})(ee.status);v(new ye(Q,ee.message))}else v(new ye(se.UNKNOWN,"Server responded with status "+y.getStatus()))}else v(new ye(se.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:m,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ve(tn,`RPC '${e}' ${m} completed.`)}}));const _=JSON.stringify(o);ve(tn,`RPC '${e}' ${m} sending request:`,o),y.send(s,"POST",_,r,15)}))}T_(e,s,r){const o=Om(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=Bb(),p=zb(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(v.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,s,r),v.encodeInitMessageHeaders=!0;const _=h.join("");ve(tn,`Creating RPC '${e}' stream ${o}: ${_}`,v);const S=m.createWebChannel(_,v);this.I_(S);let R=!1,q=!1;const ee=new r4({Yo:Z=>{q?ve(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,Z):(R||(ve(tn,`Opening RPC '${e}' stream ${o} transport.`),S.open(),R=!0),ve(tn,`RPC '${e}' stream ${o} sending:`,Z),S.send(Z))},Zo:()=>S.close()}),Q=(Z,ce,re)=>{Z.listen(ce,(pe=>{try{re(pe)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return Q(S,Lo.EventType.OPEN,(()=>{q||(ve(tn,`RPC '${e}' stream ${o} transport opened.`),ee.o_())})),Q(S,Lo.EventType.CLOSE,(()=>{q||(q=!0,ve(tn,`RPC '${e}' stream ${o} transport closed`),ee.a_(),this.E_(S))})),Q(S,Lo.EventType.ERROR,(Z=>{q||(q=!0,pl(tn,`RPC '${e}' stream ${o} transport errored. Name:`,Z.name,"Message:",Z.message),ee.a_(new ye(se.UNAVAILABLE,"The operation could not be completed")))})),Q(S,Lo.EventType.MESSAGE,(Z=>{if(!q){const ce=Z.data[0];Xe(!!ce,16349);const re=ce,pe=re?.error||re[0]?.error;if(pe){ve(tn,`RPC '${e}' stream ${o} received error:`,pe);const ue=pe.status;let xe=(function(w){const N=It[w];if(N!==void 0)return __(N)})(ue),he=pe.message;xe===void 0&&(xe=se.INTERNAL,he="Unknown error status: "+ue+" with message "+pe.message),q=!0,ee.a_(new ye(xe,he)),S.close()}else ve(tn,`RPC '${e}' stream ${o} received:`,ce),ee.u_(ce)}})),Q(p,Ub.STAT_EVENT,(Z=>{Z.stat===_m.PROXY?ve(tn,`RPC '${e}' stream ${o} detected buffering proxy`):Z.stat===_m.NOPROXY&&ve(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{ee.__()}),0),ee}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(i){return new uN(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,s,r=1e3,o=1.5,h=6e4){this.Mi=e,this.timerId=s,this.d_=r,this.A_=o,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-r);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="PersistentStream";class V_{constructor(e,s,r,o,h,m,p,v){this.Mi=e,this.S_=r,this.b_=o,this.connection=h,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new M_(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===se.RESOURCE_EXHAUSTED?(yi(s.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===s&&this.G_(r,o)}),(r=>{e((()=>{const o=new ye(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,s){const r=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(_x,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(ve(_x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class l4 extends V_{constructor(e,s,r,o,h,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,o,m),this.serializer=h}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=fN(this.serializer,e),r=(function(h){if(!("targetChange"in h))return je.min();const m=h.targetChange;return m.targetIds&&m.targetIds.length?je.min():m.readTime?Us(m.readTime):je.min()})(e);return this.listener.H_(s,r)}Y_(e){const s={};s.database=km(this.serializer),s.addTarget=(function(h,m){let p;const v=m.target;if(p=Am(v)?{documents:pN(h,v)}:{query:yN(h,v).ft},p.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){p.resumeToken=E_(h,m.resumeToken);const y=Rm(h,m.expectedCount);y!==null&&(p.expectedCount=y)}else if(m.snapshotVersion.compareTo(je.min())>0){p.readTime=Th(h,m.snapshotVersion.toTimestamp());const y=Rm(h,m.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=xN(this.serializer,e);r&&(s.labels=r),this.q_(s)}Z_(e){const s={};s.database=km(this.serializer),s.removeTarget=e,this.q_(s)}}class o4 extends V_{constructor(e,s,r,o,h,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,o,m),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=gN(e.writeResults,e.commitTime),r=Us(e.commitTime);return this.listener.na(r,s)}ra(){const e={};e.database=km(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((r=>mN(this.serializer,r)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{}class u4 extends c4{constructor(e,s,r,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ye(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Go(e,jm(s,r),o,h,m))).catch((h=>{throw h.name==="FirebaseError"?(h.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ye(se.UNKNOWN,h.toString())}))}Ho(e,s,r,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,p])=>this.connection.Ho(e,jm(s,r),o,m,p,h))).catch((m=>{throw m.name==="FirebaseError"?(m.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new ye(se.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class h4{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yi(s),this.aa=!1):ve("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="RemoteStore";class d4{constructor(e,s,r,o,h){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((m=>{r.enqueueAndForget((async()=>{ga(this)&&(ve(ha,"Restarting streams for network reachability change."),await(async function(v){const y=ke(v);y.Ea.add(4),await dc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await qh(y)})(this))}))})),this.Ra=new h4(r,o)}}async function qh(i){if(ga(i))for(const e of i.da)await e(!0)}async function dc(i){for(const e of i.da)await e(!1)}function L_(i,e){const s=ke(i);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),yg(s)?pg(s):Rl(s).O_()&&gg(s,e))}function mg(i,e){const s=ke(i),r=Rl(s);s.Ia.delete(e),r.O_()&&P_(s,e),s.Ia.size===0&&(r.O_()?r.L_():ga(s)&&s.Ra.set("Unknown"))}function gg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const s=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Rl(i).Y_(e)}function P_(i,e){i.Va.Ue(e),Rl(i).Z_(e)}function pg(i){i.Va=new aN({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Rl(i).start(),i.Ra.ua()}function yg(i){return ga(i)&&!Rl(i).x_()&&i.Ia.size>0}function ga(i){return ke(i).Ea.size===0}function U_(i){i.Va=void 0}async function f4(i){i.Ra.set("Online")}async function m4(i){i.Ia.forEach(((e,s)=>{gg(i,e)}))}async function g4(i,e){U_(i),yg(i)?(i.Ra.ha(e),pg(i)):i.Ra.set("Unknown")}async function p4(i,e,s){if(i.Ra.set("Online"),e instanceof T_&&e.state===2&&e.cause)try{await(async function(o,h){const m=h.cause;for(const p of h.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,m),o.Ia.delete(p),o.Va.removeTarget(p))})(i,e)}catch(r){ve(ha,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sh(i,r)}else if(e instanceof rh?i.Va.Ze(e):e instanceof w_?i.Va.st(e):i.Va.tt(e),!s.isEqual(je.min()))try{const r=await O_(i.localStore);s.compareTo(r)>=0&&await(function(h,m){const p=h.Va.Tt(m);return p.targetChanges.forEach(((v,y)=>{if(v.resumeToken.approximateByteSize()>0){const _=h.Ia.get(y);_&&h.Ia.set(y,_.withResumeToken(v.resumeToken,m))}})),p.targetMismatches.forEach(((v,y)=>{const _=h.Ia.get(v);if(!_)return;h.Ia.set(v,_.withResumeToken(Zt.EMPTY_BYTE_STRING,_.snapshotVersion)),P_(h,v);const S=new or(_.target,v,y,_.sequenceNumber);gg(h,S)})),h.remoteSyncer.applyRemoteEvent(p)})(i,s)}catch(r){ve(ha,"Failed to raise snapshot:",r),await Sh(i,r)}}async function Sh(i,e,s){if(!Nl(e))throw e;i.Ea.add(1),await dc(i),i.Ra.set("Offline"),s||(s=()=>O_(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ve(ha,"Retrying IndexedDB access"),await s(),i.Ea.delete(1),await qh(i)}))}function z_(i,e){return e().catch((s=>Sh(i,s,e)))}async function Hh(i){const e=ke(i),s=vr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jm;for(;y4(e);)try{const o=await ZN(e.localStore,r);if(o===null){e.Ta.length===0&&s.L_();break}r=o.batchId,v4(e,o)}catch(o){await Sh(e,o)}B_(e)&&q_(e)}function y4(i){return ga(i)&&i.Ta.length<10}function v4(i,e){i.Ta.push(e);const s=vr(i);s.O_()&&s.X_&&s.ea(e.mutations)}function B_(i){return ga(i)&&!vr(i).x_()&&i.Ta.length>0}function q_(i){vr(i).start()}async function x4(i){vr(i).ra()}async function b4(i){const e=vr(i);for(const s of i.Ta)e.ea(s.mutations)}async function _4(i,e,s){const r=i.Ta.shift(),o=lg.from(r,e,s);await z_(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Hh(i)}async function w4(i,e){e&&vr(i).X_&&await(async function(r,o){if((function(m){return sN(m)&&m!==se.ABORTED})(o.code)){const h=r.Ta.shift();vr(r).B_(),await z_(r,(()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o))),await Hh(r)}})(i,e),B_(i)&&q_(i)}async function wx(i,e){const s=ke(i);s.asyncQueue.verifyOperationInProgress(),ve(ha,"RemoteStore received new credentials");const r=ga(s);s.Ea.add(3),await dc(s),r&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await qh(s)}async function T4(i,e){const s=ke(i);e?(s.Ea.delete(2),await qh(s)):e||(s.Ea.add(2),await dc(s),s.Ra.set("Unknown"))}function Rl(i){return i.ma||(i.ma=(function(s,r,o){const h=ke(s);return h.sa(),new l4(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(i.datastore,i.asyncQueue,{Xo:f4.bind(null,i),t_:m4.bind(null,i),r_:g4.bind(null,i),H_:p4.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),yg(i)?pg(i):i.Ra.set("Unknown")):(await i.ma.stop(),U_(i))}))),i.ma}function vr(i){return i.fa||(i.fa=(function(s,r,o){const h=ke(s);return h.sa(),new o4(r,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:x4.bind(null,i),r_:w4.bind(null,i),ta:b4.bind(null,i),na:_4.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Hh(i)):(await i.fa.stop(),i.Ta.length>0&&(ve(ha,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,s,r,o,h){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=o,this.removalCallback=h,this.deferred=new ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,o,h){const m=Date.now()+r,p=new vg(e,s,m,o,h);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xg(i,e){if(yi("AsyncQueue",`${e}: ${i}`),Nl(i))return new ye(se.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{static emptySet(e){return new fl(e.comparator)}constructor(e){this.comparator=e?(s,r)=>e(s,r)||Te.comparator(s.key,r.key):(s,r)=>Te.comparator(s.key,r.key),this.keyedMap=Po(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,r)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof fl)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,h=r.getNext().key;if(!o.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new fl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.ga=new ft(Te.comparator)}track(e){const s=e.doc.key,r=this.ga.get(s);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(s,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(s):e.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,r)=>{e.push(r)})),e}}class _l{constructor(e,s,r,o,h,m,p,v,y){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=h,this.fromCache=m,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=y}static fromInitialDocuments(e,s,r,o,h){const m=[];return s.forEach((p=>{m.push({type:0,doc:p})})),new _l(e,s,fl.emptySet(s),m,r,o,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==r[o].type||!s[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class S4{constructor(){this.queries=Ex(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const o=ke(s),h=o.queries;o.queries=Ex(),h.forEach(((m,p)=>{for(const v of p.Sa)v.onError(r)}))})(this,new ye(se.ABORTED,"Firestore shutting down"))}}function Ex(){return new ma((i=>c_(i)),Vh)}async function A4(i,e){const s=ke(i);let r=3;const o=e.query;let h=s.queries.get(o);h?!h.ba()&&e.Da()&&(r=2):(h=new E4,r=e.Da()?0:1);try{switch(r){case 0:h.wa=await s.onListen(o,!0);break;case 1:h.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(m){const p=xg(m,`Initialization of query '${al(e.query)}' failed`);return void e.onError(p)}s.queries.set(o,h),h.Sa.push(e),e.va(s.onlineState),h.wa&&e.Fa(h.wa)&&bg(s)}async function N4(i,e){const s=ke(i),r=e.query;let o=3;const h=s.queries.get(r);if(h){const m=h.Sa.indexOf(e);m>=0&&(h.Sa.splice(m,1),h.Sa.length===0?o=e.Da()?0:1:!h.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function C4(i,e){const s=ke(i);let r=!1;for(const o of e){const h=o.query,m=s.queries.get(h);if(m){for(const p of m.Sa)p.Fa(o)&&(r=!0);m.wa=o}}r&&bg(s)}function R4(i,e,s){const r=ke(i),o=r.queries.get(e);if(o)for(const h of o.Sa)h.onError(s);r.queries.delete(e)}function bg(i){i.Ca.forEach((e=>{e.next()}))}var Mm,Sx;(Sx=Mm||(Mm={})).Ma="default",Sx.Cache="cache";class j4{constructor(e,s,r){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new _l(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=_l.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this.key=e}}class F_{constructor(e){this.key=e}}class I4{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=u_(e),this.tu=new fl(this.eu)}get nu(){return this.Ya}ru(e,s){const r=s?s.iu:new Tx,o=s?s.tu:this.tu;let h=s?s.mutatedKeys:this.mutatedKeys,m=o,p=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,S)=>{const R=o.get(_),q=Lh(this.query,S)?S:null,ee=!!R&&this.mutatedKeys.has(R.key),Q=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Z=!1;R&&q?R.data.isEqual(q.data)?ee!==Q&&(r.track({type:3,doc:q}),Z=!0):this.su(R,q)||(r.track({type:2,doc:q}),Z=!0,(v&&this.eu(q,v)>0||y&&this.eu(q,y)<0)&&(p=!0)):!R&&q?(r.track({type:0,doc:q}),Z=!0):R&&!q&&(r.track({type:1,doc:R}),Z=!0,(v||y)&&(p=!0)),Z&&(q?(m=m.add(q),h=Q?h.add(_):h.delete(_)):(m=m.delete(_),h=h.delete(_)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const _=this.query.limitType==="F"?m.last():m.first();m=m.delete(_.key),h=h.delete(_.key),r.track({type:1,doc:_})}return{tu:m,iu:r,Cs:p,mutatedKeys:h}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,o){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const m=e.iu.ya();m.sort(((_,S)=>(function(q,ee){const Q=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:Z})}};return Q(q)-Q(ee)})(_.type,S.type)||this.eu(_.doc,S.doc))),this.ou(r),o=o??!1;const p=s&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,y=v!==this.Za;return this.Za=v,m.length!==0||y?{snapshot:new _l(this.query,e.tu,h,m,e.mutatedKeys,v===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const s=[];return e.forEach((r=>{this.Xa.has(r)||s.push(new F_(r))})),this.Xa.forEach((r=>{e.has(r)||s.push(new H_(r))})),s}cu(e){this.Ya=e.Qs,this.Xa=He();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return _l.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _g="SyncEngine";class k4{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class D4{constructor(e){this.key=e,this.hu=!1}}class O4{constructor(e,s,r,o,h,m){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=o,this.currentUser=h,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new ma((p=>c_(p)),Vh),this.Iu=new Map,this.Eu=new Set,this.du=new ft(Te.comparator),this.Au=new Map,this.Ru=new ug,this.Vu={},this.mu=new Map,this.fu=bl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function M4(i,e,s=!0){const r=X_(i);let o;const h=r.Tu.get(e);return h?(r.sharedClientState.addLocalQueryTarget(h.targetId),o=h.view.lu()):o=await G_(r,e,s,!0),o}async function V4(i,e){const s=X_(i);await G_(s,e,!0,!1)}async function G_(i,e,s,r){const o=await JN(i.localStore,Ps(e)),h=o.targetId,m=i.sharedClientState.addLocalQueryTarget(h,s);let p;return r&&(p=await L4(i,e,h,m==="current",o.resumeToken)),i.isPrimaryClient&&s&&L_(i.remoteStore,o),p}async function L4(i,e,s,r,o){i.pu=(S,R,q)=>(async function(Q,Z,ce,re){let pe=Z.view.ru(ce);pe.Cs&&(pe=await yx(Q.localStore,Z.query,!1).then((({documents:j})=>Z.view.ru(j,pe))));const ue=re&&re.targetChanges.get(Z.targetId),xe=re&&re.targetMismatches.get(Z.targetId)!=null,he=Z.view.applyChanges(pe,Q.isPrimaryClient,ue,xe);return Nx(Q,Z.targetId,he.au),he.snapshot})(i,S,R,q);const h=await yx(i.localStore,e,!0),m=new I4(e,h.Qs),p=m.ru(h.documents),v=hc.createSynthesizedTargetChangeForCurrentChange(s,r&&i.onlineState!=="Offline",o),y=m.applyChanges(p,i.isPrimaryClient,v);Nx(i,s,y.au);const _=new k4(e,s,m);return i.Tu.set(e,_),i.Iu.has(s)?i.Iu.get(s).push(e):i.Iu.set(s,[e]),y.snapshot}async function P4(i,e,s){const r=ke(i),o=r.Tu.get(e),h=r.Iu.get(o.targetId);if(h.length>1)return r.Iu.set(o.targetId,h.filter((m=>!Vh(m,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Dm(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),s&&mg(r.remoteStore,o.targetId),Vm(r,o.targetId)})).catch(Al)):(Vm(r,o.targetId),await Dm(r.localStore,o.targetId,!0))}async function U4(i,e){const s=ke(i),r=s.Tu.get(e),o=s.Iu.get(r.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),mg(s.remoteStore,r.targetId))}async function z4(i,e,s){const r=K4(i);try{const o=await(function(m,p){const v=ke(m),y=ct.now(),_=p.reduce(((q,ee)=>q.add(ee.key)),He());let S,R;return v.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let ee=vi(),Q=He();return v.Ns.getEntries(q,_).next((Z=>{ee=Z,ee.forEach(((ce,re)=>{re.isValidDocument()||(Q=Q.add(ce))}))})).next((()=>v.localDocuments.getOverlayedDocuments(q,ee))).next((Z=>{S=Z;const ce=[];for(const re of p){const pe=ZA(re,S.get(re.key).overlayedDocument);pe!=null&&ce.push(new Tr(re.key,pe,t_(pe.value.mapValue),Kn.exists(!0)))}return v.mutationQueue.addMutationBatch(q,y,ce,p)})).next((Z=>{R=Z;const ce=Z.applyToLocalDocumentSet(S,Q);return v.documentOverlayCache.saveOverlays(q,Z.batchId,ce)}))})).then((()=>({batchId:R.batchId,changes:d_(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(m,p,v){let y=m.Vu[m.currentUser.toKey()];y||(y=new ft(qe)),y=y.insert(p,v),m.Vu[m.currentUser.toKey()]=y})(r,o.batchId,s),await fc(r,o.changes),await Hh(r.remoteStore)}catch(o){const h=xg(o,"Failed to persist write");s.reject(h)}}async function Y_(i,e){const s=ke(i);try{const r=await XN(s.localStore,e);e.targetChanges.forEach(((o,h)=>{const m=s.Au.get(h);m&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?m.hu=!0:o.modifiedDocuments.size>0?Xe(m.hu,14607):o.removedDocuments.size>0&&(Xe(m.hu,42227),m.hu=!1))})),await fc(s,r,e)}catch(r){await Al(r)}}function Ax(i,e,s){const r=ke(i);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const o=[];r.Tu.forEach(((h,m)=>{const p=m.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(m,p){const v=ke(m);v.onlineState=p;let y=!1;v.queries.forEach(((_,S)=>{for(const R of S.Sa)R.va(p)&&(y=!0)})),y&&bg(v)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function B4(i,e,s){const r=ke(i);r.sharedClientState.updateQueryState(e,"rejected",s);const o=r.Au.get(e),h=o&&o.key;if(h){let m=new ft(Te.comparator);m=m.insert(h,sn.newNoDocument(h,je.min()));const p=He().add(h),v=new zh(je.min(),new Map,new ft(qe),m,p);await Y_(r,v),r.du=r.du.remove(h),r.Au.delete(e),wg(r)}else await Dm(r.localStore,e,!1).then((()=>Vm(r,e,s))).catch(Al)}async function q4(i,e){const s=ke(i),r=e.batch.batchId;try{const o=await $N(s.localStore,e);Q_(s,r,null),K_(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await fc(s,o)}catch(o){await Al(o)}}async function H4(i,e,s){const r=ke(i);try{const o=await(function(m,p){const v=ke(m);return v.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return v.mutationQueue.lookupMutationBatch(y,p).next((S=>(Xe(S!==null,37113),_=S.keys(),v.mutationQueue.removeMutationBatch(y,S)))).next((()=>v.mutationQueue.performConsistencyCheck(y))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(y,_,p))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>v.localDocuments.getDocuments(y,_)))}))})(r.localStore,e);Q_(r,e,s),K_(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await fc(r,o)}catch(o){await Al(o)}}function K_(i,e){(i.mu.get(e)||[]).forEach((s=>{s.resolve()})),i.mu.delete(e)}function Q_(i,e,s){const r=ke(i);let o=r.Vu[r.currentUser.toKey()];if(o){const h=o.get(e);h&&(s?h.reject(s):h.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function Vm(i,e,s=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),s&&i.Pu.yu(r,s);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||$_(i,r)}))}function $_(i,e){i.Eu.delete(e.path.canonicalString());const s=i.du.get(e);s!==null&&(mg(i.remoteStore,s),i.du=i.du.remove(e),i.Au.delete(s),wg(i))}function Nx(i,e,s){for(const r of s)r instanceof H_?(i.Ru.addReference(r.key,e),F4(i,r)):r instanceof F_?(ve(_g,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||$_(i,r.key)):Ce(19791,{wu:r})}function F4(i,e){const s=e.key,r=s.path.canonicalString();i.du.get(s)||i.Eu.has(r)||(ve(_g,"New document in limbo: "+s),i.Eu.add(r),wg(i))}function wg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const s=new Te(at.fromString(e)),r=i.fu.next();i.Au.set(r,new D4(s)),i.du=i.du.insert(s,r),L_(i.remoteStore,new or(Ps(ig(s.path)),r,"TargetPurposeLimboResolution",Dh.ce))}}async function fc(i,e,s){const r=ke(i),o=[],h=[],m=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,v)=>{m.push(r.pu(v,e,s).then((y=>{if((y||s)&&r.isPrimaryClient){const _=y?!y.fromCache:s?.targetChanges.get(v.targetId)?.current;r.sharedClientState.updateQueryState(v.targetId,_?"current":"not-current")}if(y){o.push(y);const _=dg.As(v.targetId,y);h.push(_)}})))})),await Promise.all(m),r.Pu.H_(o),await(async function(v,y){const _=ke(v);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ie.forEach(y,(R=>ie.forEach(R.Es,(q=>_.persistence.referenceDelegate.addReference(S,R.targetId,q))).next((()=>ie.forEach(R.ds,(q=>_.persistence.referenceDelegate.removeReference(S,R.targetId,q)))))))))}catch(S){if(!Nl(S))throw S;ve(fg,"Failed to update sequence numbers: "+S)}for(const S of y){const R=S.targetId;if(!S.fromCache){const q=_.Ms.get(R),ee=q.snapshotVersion,Q=q.withLastLimboFreeSnapshotVersion(ee);_.Ms=_.Ms.insert(R,Q)}}})(r.localStore,h))}async function G4(i,e){const s=ke(i);if(!s.currentUser.isEqual(e)){ve(_g,"User change. New user:",e.toKey());const r=await D_(s.localStore,e);s.currentUser=e,(function(h,m){h.mu.forEach((p=>{p.forEach((v=>{v.reject(new ye(se.CANCELLED,m))}))})),h.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fc(s,r.Ls)}}function Y4(i,e){const s=ke(i),r=s.Au.get(e);if(r&&r.hu)return He().add(r.key);{let o=He();const h=s.Iu.get(e);if(!h)return o;for(const m of h){const p=s.Tu.get(m);o=o.unionWith(p.view.nu)}return o}}function X_(i){const e=ke(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=B4.bind(null,e),e.Pu.H_=C4.bind(null,e.eventManager),e.Pu.yu=R4.bind(null,e.eventManager),e}function K4(i){const e=ke(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H4.bind(null,e),e}class Ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return QN(this.persistence,new GN,e.initialUser,this.serializer)}Cu(e){return new k_(hg.mi,this.serializer)}Du(e){return new t4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ah.provider={build:()=>new Ah};class Q4 extends Ah{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){Xe(this.persistence.referenceDelegate instanceof Eh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jN(r,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new k_((r=>Eh.mi(r,s)),this.serializer)}}class Lm{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ax(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=G4.bind(null,this.syncEngine),await T4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new S4})()}createDatastore(e){const s=Bh(e.databaseInfo.databaseId),r=(function(h){return new a4(h)})(e.databaseInfo);return(function(h,m,p,v){return new u4(h,m,p,v)})(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return(function(r,o,h,m,p){return new d4(r,o,h,m,p)})(this.localStore,this.datastore,e.asyncQueue,(s=>Ax(this.syncEngine,s,0)),(function(){return bx.v()?new bx:new n4})())}createSyncEngine(e,s){return(function(o,h,m,p,v,y,_){const S=new O4(o,h,m,p,v,y);return _&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const r=ke(s);ve(ha,"RemoteStore shutting down."),r.Ea.add(5),await dc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Lm.provider={build:()=>new Lm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="FirestoreClient";class X4{constructor(e,s,r,o,h){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=Zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(r,(async m=>{ve(xr,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(r,(m=>(ve(xr,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=xg(s,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function hm(i,e){i.asyncQueue.verifyOperationInProgress(),ve(xr,"Initializing OfflineComponentProvider");const s=i.configuration;await e.initialize(s);let r=s.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await D_(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Cx(i,e){i.asyncQueue.verifyOperationInProgress();const s=await W4(i);ve(xr,"Initializing OnlineComponentProvider"),await e.initialize(s,i.configuration),i.setCredentialChangeListener((r=>wx(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>wx(e.remoteStore,o))),i._onlineComponents=e}async function W4(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ve(xr,"Using user provided OfflineComponentProvider");try{await hm(i,i._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===se.FAILED_PRECONDITION||o.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;pl("Error using user provided cache. Falling back to memory cache: "+s),await hm(i,new Ah)}}else ve(xr,"Using default OfflineComponentProvider"),await hm(i,new Q4(void 0));return i._offlineComponents}async function W_(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ve(xr,"Using user provided OnlineComponentProvider"),await Cx(i,i._uninitializedComponentsProvider._online)):(ve(xr,"Using default OnlineComponentProvider"),await Cx(i,new Lm))),i._onlineComponents}function Z4(i){return W_(i).then((e=>e.syncEngine))}async function Rx(i){const e=await W_(i),s=e.eventManager;return s.onListen=M4.bind(null,e.syncEngine),s.onUnlisten=P4.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=V4.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=U4.bind(null,e.syncEngine),s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="firestore.googleapis.com",Ix=!0;class kx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J_,this.ssl=Ix}else this.host=e.host,this.ssl=e.ssl??Ix;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=I_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CN)throw new ye(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z_(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,s,r,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new nA;switch(r.type){case"firstParty":return new aA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=jx.get(s);r&&(ve("ComponentProvider","Removing Datastore"),jx.delete(s),r.terminate())})(this),Promise.resolve()}}function J4(i,e,s,r={}){i=Ls(i,Fh);const o=wl(e),h=i._getSettings(),m={...h,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${s}`;o&&(Qx(`https://${p}`),$x("Firestore",!0)),h.host!==J_&&h.host!==p&&pl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...h,host:p,ssl:o,emulatorOptions:r};if(!aa(v,m)&&(i._setSettings(v),r.mockUserToken)){let y,_;if(typeof r.mockUserToken=="string")y=r.mockUserToken,_=nn.MOCK_USER;else{y=cw(r.mockUserToken,i._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new ye(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new nn(S)}i._authCredentials=new sA(new Hb(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pa(this.firestore,e,this._query)}}class wt{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(cc(s,wt._jsonSchema))return new wt(e,r||null,new Te(at.fromString(s.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:Dt("string",wt._jsonSchemaVersion),referencePath:Dt("string")};class fr extends pa{constructor(e,s,r){super(e,s,ig(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new Te(e))}withConverter(e){return new fr(this.firestore,e,this._path)}}function dt(i,e,...s){if(i=Lt(i),Fb("collection","path",e),i instanceof Fh){const r=at.fromString(e,...s);return Fv(r),new fr(i,null,r)}{if(!(i instanceof wt||i instanceof fr))throw new ye(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(at.fromString(e,...s));return Fv(r),new fr(i.firestore,null,r)}}function Wt(i,e,...s){if(i=Lt(i),arguments.length===1&&(e=Zm.newId()),Fb("doc","path",e),i instanceof Fh){const r=at.fromString(e,...s);return Hv(r),new wt(i,null,new Te(r))}{if(!(i instanceof wt||i instanceof fr))throw new ye(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(at.fromString(e,...s));return Hv(r),new wt(i.firestore,i instanceof fr?i.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="AsyncQueue";class Ox{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new M_(this,"async_queue_retry"),this._c=()=>{const r=um();r&&ve(Dx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const s=um();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=um();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new ia;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Nl(e))throw e;ve(Dx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,yi("INTERNAL UNHANDLED ERROR: ",Mx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(e,s,r){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=vg.createAndSchedule(this,e,s,r,(h=>this.hc(h)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:Mx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function Mx(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(i){return(function(s,r){if(typeof s!="object"||s===null)return!1;const o=s;for(const h of r)if(h in o&&typeof o[h]=="function")return!0;return!1})(i,["next","error","complete"])}class da extends Fh{constructor(e,s,r,o){super(e,s,r,o),this.type="firestore",this._queue=new Ox,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ox(e),this._firestoreClient=void 0,await e}}}function eC(i,e){const s=typeof i=="object"?i:Jx(),r=typeof i=="string"?i:vh,o=qm(s,"firestore").getImmediate({identifier:r});if(!o._initialized){const h=lw("firestore");h&&J4(o,...h)}return o}function e1(i){if(i._terminated)throw new ye(se.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||tC(i),i._firestoreClient}function tC(i){const e=i._freezeSettings(),s=(function(o,h,m,p){return new TA(o,h,m,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Z_(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new X4(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&(function(o){const h=o?._online.build();return{_offline:o?._offline.build(h),_online:h}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(Zt.fromBase64String(e))}catch(s){throw new ye(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Yn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cc(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Dt("string",Yn._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new ye(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new ye(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new ye(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zs._jsonSchemaVersion}}static fromJSON(e){if(cc(e,zs._jsonSchema))return new zs(e.latitude,e.longitude)}}zs._jsonSchemaVersion="firestore/geoPoint/1.0",zs._jsonSchema={type:Dt("string",zs._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let h=0;h<r.length;++h)if(r[h]!==o[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cc(e,Bs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Bs(e.vectorValues);throw new ye(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bs._jsonSchemaVersion="firestore/vectorValue/1.0",Bs._jsonSchema={type:Dt("string",Bs._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=/^__.*__$/;class sC{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,s,this.fieldTransforms):new uc(e,this.data,s,this.fieldTransforms)}}class t1{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Tr(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function n1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:i})}}class Eg{constructor(e,s,r,o,h,m){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=o,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Eg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.gc(e),r}yc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(n1(this.Ac)&&nC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class iC{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Bh(e)}Cc(e,s,r,o=!1){return new Eg({Ac:e,methodName:s,Dc:r,path:Xt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yh(i){const e=i._freezeSettings(),s=Bh(i._databaseId);return new iC(i._databaseId,!!e.ignoreUndefinedProperties,s)}function s1(i,e,s,r,o,h={}){const m=i.Cc(h.merge||h.mergeFields?2:0,e,s,o);Sg("Data must be an object, but it was:",m,r);const p=i1(r,m);let v,y;if(h.merge)v=new Cn(m.fieldMask),y=m.fieldTransforms;else if(h.mergeFields){const _=[];for(const S of h.mergeFields){const R=Pm(e,S,s);if(!m.contains(R))throw new ye(se.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);a1(_,R)||_.push(R)}v=new Cn(_),y=m.fieldTransforms.filter((S=>v.covers(S.field)))}else v=null,y=m.fieldTransforms;return new sC(new vn(p),v,y)}class Kh extends Tg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kh}}function rC(i,e,s,r){const o=i.Cc(1,e,s);Sg("Data must be an object, but it was:",o,r);const h=[],m=vn.empty();wr(r,((v,y)=>{const _=Ag(e,v,s);y=Lt(y);const S=o.yc(_);if(y instanceof Kh)h.push(_);else{const R=mc(y,S);R!=null&&(h.push(_),m.set(_,R))}}));const p=new Cn(h);return new t1(m,p,o.fieldTransforms)}function aC(i,e,s,r,o,h){const m=i.Cc(1,e,s),p=[Pm(e,r,s)],v=[o];if(h.length%2!=0)throw new ye(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<h.length;R+=2)p.push(Pm(e,h[R])),v.push(h[R+1]);const y=[],_=vn.empty();for(let R=p.length-1;R>=0;--R)if(!a1(y,p[R])){const q=p[R];let ee=v[R];ee=Lt(ee);const Q=m.yc(q);if(ee instanceof Kh)y.push(q);else{const Z=mc(ee,Q);Z!=null&&(y.push(q),_.set(q,Z))}}const S=new Cn(y);return new t1(_,S,m.fieldTransforms)}function lC(i,e,s,r=!1){return mc(s,i.Cc(r?4:3,e))}function mc(i,e){if(r1(i=Lt(i)))return Sg("Unsupported field value:",e,i),i1(i,e);if(i instanceof Tg)return(function(r,o){if(!n1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const h=r._toFieldTransform(o);h&&o.fieldTransforms.push(h)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const h=[];let m=0;for(const p of r){let v=mc(p,o.wc(m));v==null&&(v={nullValue:"NULL_VALUE"}),h.push(v),m++}return{arrayValue:{values:h}}})(i,e)}return(function(r,o){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const h=ct.fromDate(r);return{timestampValue:Th(o.serializer,h)}}if(r instanceof ct){const h=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Th(o.serializer,h)}}if(r instanceof zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:E_(o.serializer,r._byteString)};if(r instanceof wt){const h=o.databaseId,m=r.firestore._databaseId;if(!m.isEqual(h))throw o.Sc(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:cg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Bs)return(function(m,p){return{mapValue:{fields:{[Jb]:{stringValue:e_},[xh]:{arrayValue:{values:m.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return rg(p.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${kh(r)}`)})(i,e)}function i1(i,e){const s={};return Kb(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wr(i,((r,o)=>{const h=mc(o,e.mc(r));h!=null&&(s[r]=h)})),{mapValue:{fields:s}}}function r1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ct||i instanceof zs||i instanceof Yn||i instanceof wt||i instanceof Tg||i instanceof Bs)}function Sg(i,e,s){if(!r1(s)||!Gb(s)){const r=kh(s);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function Pm(i,e,s){if((e=Lt(e))instanceof Gh)return e._internalPath;if(typeof e=="string")return Ag(i,e);throw Nh("Field path arguments must be of type string or ",i,!1,void 0,s)}const oC=new RegExp("[~\\*/\\[\\]]");function Ag(i,e,s){if(e.search(oC)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,s);try{return new Gh(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,s)}}function Nh(i,e,s,r,o){const h=r&&!r.isEmpty(),m=o!==void 0;let p=`Function ${e}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(h||m)&&(v+=" (found",h&&(v+=` in field ${r}`),m&&(v+=` in document ${o}`),v+=")"),new ye(se.INVALID_ARGUMENT,p+i+v)}function a1(i,e){return i.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,s,r,o,h){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=o,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Ng("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class cC extends l1{data(){return super.data()}}function Ng(i,e){return typeof e=="string"?Ag(i,e):e instanceof Gh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ye(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cg{}class o1 extends Cg{}function $n(i,e,...s){let r=[];e instanceof Cg&&r.push(e),r=r.concat(s),(function(h){const m=h.filter((v=>v instanceof jg)).length,p=h.filter((v=>v instanceof Rg)).length;if(m>1||m>0&&p>0)throw new ye(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Rg extends o1{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new Rg(e,s,r)}_apply(e){const s=this._parse(e);return c1(e._query,s),new pa(e.firestore,e.converter,Nm(e._query,s))}_parse(e){const s=Yh(e.firestore);return(function(h,m,p,v,y,_,S){let R;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ye(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Px(S,_);const ee=[];for(const Q of S)ee.push(Lx(v,h,Q));R={arrayValue:{values:ee}}}else R=Lx(v,h,S)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Px(S,_),R=lC(p,m,S,_==="in"||_==="not-in");return kt.create(y,_,R)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}class jg extends Cg{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new jg(e,s)}_parse(e){const s=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:hs.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,h){let m=o;const p=h.getFlattenedFilters();for(const v of p)c1(m,v),m=Nm(m,v)})(e._query,s),new pa(e.firestore,e.converter,Nm(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ig extends o1{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new Ig(e,s)}_apply(e){const s=(function(o,h,m){if(o.startAt!==null)throw new ye(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ye(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ec(h,m)})(e._query,this._field,this._direction);return new pa(e.firestore,e.converter,(function(o,h){const m=o.explicitOrderBy.concat([h]);return new Cl(o.path,o.collectionGroup,m,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,s))}}function Xn(i,e="asc"){const s=e,r=Ng("orderBy",i);return Ig._create(r,s)}function Lx(i,e,s){if(typeof(s=Lt(s))=="string"){if(s==="")throw new ye(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o_(e)&&s.indexOf("/")!==-1)throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(at.fromString(s));if(!Te.isDocumentKey(r))throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zv(i,new Te(r))}if(s instanceof wt)return Zv(i,s._key);throw new ye(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kh(s)}.`)}function Px(i,e){if(!Array.isArray(i)||i.length===0)throw new ye(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function c1(i,e){const s=(function(o,h){for(const m of o)for(const p of m.getFlattenedFilters())if(h.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new ye(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class hC{convertValue(e,s="none"){switch(yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return wr(e,((o,h)=>{r[o]=this.convertValue(h,s)})),r}convertVectorValue(e){const s=e.fields?.[xh].arrayValue?.values?.map((r=>_t(r.doubleValue)));return new Bs(s)}convertGeoPoint(e){return new zs(_t(e.latitude),_t(e.longitude))}convertArray(e,s){return(e.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const r=Mh(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(Wo(e));default:return null}}convertTimestamp(e){const s=gr(e);return new ct(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=at.fromString(e);Xe(j_(r),9688,{name:e});const o=new Zo(r.get(1),r.get(3)),h=new Te(r.popFirst(5));return o.isEqual(s)||yi(`Document ${h} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(i,e,s){let r;return r=i?i.toFirestore(e):e,r}class zo{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ra extends l1{constructor(e,s,r,o,h,m){super(e,s,r,o,m),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(Ng("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=ra._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}ra._jsonSchemaVersion="firestore/documentSnapshot/1.0",ra._jsonSchema={type:Dt("string",ra._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class ah extends ra{data(e={}){return super.data(e)}}class ml{constructor(e,s,r,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new zo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new ah(this._firestore,this._userDataWriter,r.key,r,new zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new ye(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,h){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map((p=>{const v=new ah(o._firestore,o._userDataWriter,p.doc.key,p.doc,new zo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:v,oldIndex:-1,newIndex:m++}}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>h||p.type!==3)).map((p=>{const v=new ah(o._firestore,o._userDataWriter,p.doc.key,p.doc,new zo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return p.type!==0&&(y=m.indexOf(p.doc.key),m=m.delete(p.doc.key)),p.type!==1&&(m=m.add(p.doc),_=m.indexOf(p.doc.key)),{type:dC(p.type),doc:v,oldIndex:y,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ml._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],o=[];return this.docs.forEach((h=>{h._document!==null&&(s.push(h._document),r.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),o.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dC(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:i})}}ml._jsonSchemaVersion="firestore/querySnapshot/1.0",ml._jsonSchema={type:Dt("string",ml._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class h1 extends hC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,s)}}function fC(i,e,s){i=Ls(i,wt);const r=Ls(i.firestore,da),o=u1(i.converter,e);return Qh(r,[s1(Yh(r),"setDoc",i._key,o,i.converter!==null,s).toMutation(i._key,Kn.none())])}function br(i,e,s,...r){i=Ls(i,wt);const o=Ls(i.firestore,da),h=Yh(o);let m;return m=typeof(e=Lt(e))=="string"||e instanceof Gh?aC(h,"updateDoc",i._key,e,s,r):rC(h,"updateDoc",i._key,e),Qh(o,[m.toMutation(i._key,Kn.exists(!0))])}function fa(i){return Qh(Ls(i.firestore,da),[new ag(i._key,Kn.none())])}function xi(i,e){const s=Ls(i.firestore,da),r=Wt(i),o=u1(i.converter,e);return Qh(s,[s1(Yh(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Kn.exists(!1))]).then((()=>r))}function cn(i,...e){i=Lt(i);let s={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Vx(e[r])||(s=e[r++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Vx(e[r])){const v=e[r];e[r]=v.next?.bind(v),e[r+1]=v.error?.bind(v),e[r+2]=v.complete?.bind(v)}let h,m,p;if(i instanceof wt)m=Ls(i.firestore,da),p=ig(i._key.path),h={next:v=>{e[r]&&e[r](mC(m,i,v))},error:e[r+1],complete:e[r+2]};else{const v=Ls(i,pa);m=Ls(v.firestore,da),p=v._query;const y=new h1(m);h={next:_=>{e[r]&&e[r](new ml(m,y,v,_))},error:e[r+1],complete:e[r+2]},uC(i._query)}return(function(y,_,S,R){const q=new $4(R),ee=new j4(_,q,S);return y.asyncQueue.enqueueAndForget((async()=>A4(await Rx(y),ee))),()=>{q.Nu(),y.asyncQueue.enqueueAndForget((async()=>N4(await Rx(y),ee)))}})(e1(m),p,o,h)}function Qh(i,e){return(function(r,o){const h=new ia;return r.asyncQueue.enqueueAndForget((async()=>z4(await Z4(r),o,h))),h.promise})(e1(i),e)}function mC(i,e,s){const r=s.docs.get(e._key),o=new h1(i);return new ra(i,o,e._key,r,new zo(s.hasPendingWrites,s.fromCache),e.converter)}(function(e,s=!0){(function(o){Sl=o})(Tl),gl(new la("firestore",((r,{instanceIdentifier:o,options:h})=>{const m=r.getProvider("app").getImmediate(),p=new da(new iA(r.getProvider("auth-internal")),new lA(m,r.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ye(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zo(y.options.projectId,_)})(m,o),m);return h={useFetchStreams:s,...h},p._setSettings(h),p}),"PUBLIC").setMultipleInstances(!0)),hr(Uv,zv,e),hr(Uv,zv,"esm2020")})();const gC={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},d1=Zx(gC),Qn=ZS(d1),Ve=eC(d1);function pC(){const[i,e]=de.useState(!0),[s,r]=de.useState(""),[o,h]=de.useState(""),[m,p]=de.useState(""),[v,y]=de.useState(""),[_,S]=de.useState(!1),R=async Q=>{Q.preventDefault(),p(""),y(""),S(!0);try{if(i)await LE(Qn,s,o);else{const ce=(await VE(Qn,s,o)).user;await fC(Wt(Ve,"users",ce.uid),{email:ce.email,role:"user",createdAt:new Date().toISOString()}),y("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(Z){p(ee(Z.code))}finally{S(!1)}},q=async()=>{if(!s){p("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await ME(Qn,s),y("ifre sfrlama balants e-posta adresinize gnderildi."),p("")}catch(Q){p(ee(Q.code))}},ee=Q=>{switch(Q){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+Q}};return c.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"mt-2 text-3xl font-bold text-gray-900",children:i?"Stok Takip Giri":"Yeni Hesap Olutur"}),c.jsx("p",{className:"mt-2 text-sm text-gray-600",children:i?"Ynetim paneline erimek iin giri yapn.":"Sistem yetkilisi hesab oluturun."})]}),m&&c.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-md text-sm text-center border border-red-200",children:m}),v&&c.jsx("div",{className:"bg-green-50 text-green-600 p-3 rounded-md text-sm text-center border border-green-200",children:v}),c.jsxs("form",{className:"space-y-4",onSubmit:R,children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"E-posta Adresi"}),c.jsx("input",{id:"email",type:"email",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"ornek@sirket.com",value:s,onChange:Q=>r(Q.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"ifre"}),c.jsx("input",{id:"password",type:"password",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 transition-colors",value:o,onChange:Q=>h(Q.target.value)})]}),c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("div",{className:"text-sm",children:c.jsx("button",{type:"button",onClick:q,className:"font-medium text-indigo-600 hover:text-indigo-500",children:"ifremi unuttum?"})})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors ${_?"opacity-75 cursor-not-allowed":""}`,children:_?"leniyor...":i?"Giri Yap":"Kaydol"})]}),c.jsx("div",{className:"text-center mt-4",children:c.jsxs("p",{className:"text-sm text-gray-600",children:[i?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!i),className:"font-medium text-indigo-600 hover:text-indigo-500 font-bold",children:i?"Hemen kaydolun":"Giri yapn"})]})})]})})}const sr={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},yC=({data:i})=>{if(!i||i.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,s=600,r=20,o=Math.max(...i.map(p=>p.value))||100,h=i.map((p,v)=>{const y=i.length>1?v/(i.length-1)*(s-r*2)+r:s/2,_=e-r-p.value/o*(e-r*2),S=isNaN(y)?r:y,R=isNaN(_)?e-r:_;return`${S},${R}`}).join(" "),m=`${h} ${s-r},${e-r} ${r},${e-r}`;return c.jsxs("svg",{viewBox:`0 0 ${s} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:r,y1:e-r,x2:s-r,y2:e-r,stroke:"#e5e7eb",strokeWidth:"1"}),i.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${m}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:h,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),i.map((p,v)=>{const y=i.length>1?v/(i.length-1)*(s-r*2)+r:s/2,_=e-r-p.value/o*(e-r*2),S=isNaN(y)?r:y,R=isNaN(_)?e-r:_;return c.jsx("circle",{cx:S,cy:R,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},v)})]})},Xu=({title:i,value:e,subtext:s,icon:r,color:o})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:i}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(sr.TrendingUp,{})," ",s]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${o}`,children:c.jsx(r,{})})]});function Ux({onNavigate:i=()=>{}}){const[e,s]=de.useState(null),[r,o]=de.useState(!0),[h,m]=de.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[p,v]=de.useState([]),[y,_]=de.useState([]),[S,R]=de.useState([]),[q,ee]=de.useState([]);return de.useEffect(()=>{const Q=Qn.onAuthStateChanged(ue=>{s(ue),o(!1)}),Z=cn($n(dt(Ve,"siparisler"),Xn("createdAt","desc")),ue=>{const xe=ue.docs.map(w=>w.data());_(xe.slice(0,5));const he={};xe.forEach(w=>{const N=w.date?w.date.slice(0,7):"N/A";he[N]=(he[N]||0)+1});const j=Object.entries(he).map(([w,N])=>({label:w,value:N})).sort((w,N)=>w.label.localeCompare(N.label));ee(j),m(w=>({...w,activeOrders:xe.length}))}),ce=cn(dt(Ve,"teklifler"),ue=>{m(xe=>({...xe,pendingProposals:ue.size}))}),re=cn(dt(Ve,"employees"),ue=>{const xe=ue.docs.map(w=>w.data());m(w=>({...w,totalWorkers:xe.length}));const he=new Date().toISOString().split("T")[0],j=xe.filter(w=>{const N=w.attendance?.[he];return N&&["paid_leave","unpaid_leave","off"].includes(N.type)});v(j)}),pe=cn(dt(Ve,"inventory_movements"),ue=>{const xe=ue.docs.map(w=>w.data()),he={};xe.forEach(w=>{const N=Number(w.quantity)||0,k=w.action==="add"?N:-N;he[w.productName]||(he[w.productName]=0),he[w.productName]+=k});const j=Object.entries(he).filter(([w,N])=>N<100).map(([w,N])=>({name:w,qty:N}));R(j.slice(0,5)),m(w=>({...w,inventoryCount:Object.keys(he).length}))});return()=>{Q(),Z(),ce(),re(),pe()}},[]),r?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(sr.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(Xu,{title:"Aktif Sipariler",value:h.activeOrders,subtext:"Geen aya gre art",icon:sr.Cart,color:"bg-indigo-600"}),c.jsx(Xu,{title:"Bekleyen Teklifler",value:h.pendingProposals,subtext:"Onay bekleyen",icon:sr.Document,color:"bg-purple-600"}),c.jsx(Xu,{title:"Toplam Stok Kalemi",value:h.inventoryCount,subtext:"Kritik seviye kontrol",icon:sr.Box,color:"bg-emerald-600"}),c.jsx(Xu,{title:"Toplam Personel",value:h.totalWorkers,subtext:"Aktif alan",icon:sr.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(yC,{data:q})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>i("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[y.map((Q,Z)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",Q.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",Q.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:Q.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},Z)),y.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(sr.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:p.length>0?p.map((Q,Z)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:Q.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:Q.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:Q.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},Z)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(sr.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:S.length>0?S.map((Q,Z)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:Q.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[Q.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},Z)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>i("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const ui={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),User:()=>c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Calendar:()=>c.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},zx=({checked:i,onChange:e,label:s})=>c.jsxs("div",{className:"flex items-center cursor-pointer group",onClick:()=>e(!i),children:[c.jsx("div",{className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${i?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-5":"translate-x-0"}`})}),s&&c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 group-hover:text-indigo-600 transition-colors",children:s})]});function vC(){const[i,e]=de.useState(null),[s,r]=de.useState(!0),[o,h]=de.useState([]),[m,p]=de.useState([]),[v,y]=de.useState(!1),[_,S]=de.useState(""),[R,q]=de.useState(!1),[ee,Q]=de.useState(!1),[Z,ce]=de.useState(null),[re,pe]=de.useState(null),[ue,xe]=de.useState({docNo:"",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[he,j]=de.useState({name:"",company:"",phone:"",email:""});if(de.useEffect(()=>{const C=Qn.onAuthStateChanged(X=>{e(X),r(!1)}),z=$n(dt(Ve,"customers"),Xn("createdAt","desc")),ne=cn(z,X=>{h(X.docs.map(fe=>({id:fe.id,...fe.data()})))}),ae=$n(dt(Ve,"sales"),Xn("createdAt","desc")),P=cn(ae,X=>{p(X.docs.map(fe=>({id:fe.id,...fe.data()})))});return()=>{C(),ne(),P()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(ui.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]});const w=C=>(C.qty||0)*(C.unitPrice||0),N=C=>w(C)*(C.vatRate||0)/100,k=C=>{if(!C)return{subtotal:0,totalVAT:0,grandTotal:0};const z=C.reduce((ae,P)=>ae+w(P),0),ne=C.reduce((ae,P)=>ae+N(P),0);return{subtotal:z,totalVAT:ne,grandTotal:z+ne}},I=C=>m.filter(ae=>ae.customerId===C).reduce((ae,P)=>ae+k(P.items).grandTotal,0),M=async C=>{C.preventDefault();try{await xi(dt(Ve,"customers"),{...he,createdAt:new Date().toISOString()}),j({name:"",company:"",phone:"",email:""}),Q(!1)}catch(z){alert("Hata: "+z.message)}},E=C=>{ce(C),pe(null);const z="DOC-"+Date.now().toString().slice(-6);xe({docNo:z,date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{name:"",qty:1,unitPrice:0,vatRate:20}]}),q(!0)},le=(C,z)=>{ce(z),pe(C),xe({docNo:C.docNo,date:C.date,description:C.description,status:C.status,items:C.items||[]}),q(!0)},oe=async C=>{if(window.confirm("Bu sat silmek istediinize emin misiniz?"))try{await fa(Wt(Ve,"sales",C))}catch(z){alert("Hata: "+z.message)}},U=async C=>{C.preventDefault();try{const z={customerId:Z.id,...ue,createdAt:re?re.createdAt:new Date().toISOString()};re?await br(Wt(Ve,"sales",re.id),z):await xi(dt(Ve,"sales"),z),q(!1)}catch(z){alert("Hata: "+z.message)}},W=(C,z,ne)=>{const ae=[...ue.items];ae[C][z]=z==="name"?ne:Number(ne),xe({...ue,items:ae})},V=()=>xe({...ue,items:[...ue.items,{name:"",qty:1,unitPrice:0,vatRate:20}]}),me=C=>xe({...ue,items:ue.items.filter((z,ne)=>ne!==C)}),Ae=(C,z)=>{const{subtotal:ne,totalVAT:ae,grandTotal:P}=k(C.items),X=window.open("","","height=600,width=800");if(!X){alert("Pop-up engelleyiciyi kapatn.");return}const fe=`
      <html><head><title>Fatura - ${C.docNo}</title><style>body{font-family:'Helvetica',sans-serif;padding:40px;color:#333}.header{display:flex;justify-content:space-between;margin-bottom:40px;border-bottom:2px solid #eee;padding-bottom:20px}.company-name{font-size:24px;font-weight:bold;color:#4f46e5}.invoice-title{font-size:32px;font-weight:bold;color:#ccc;text-align:right}.info-grid{display:flex;justify-content:space-between;margin-bottom:40px}.box{width:45%}.box h3{font-size:14px;text-transform:uppercase;color:#888;border-bottom:1px solid #ddd;padding-bottom:5px}.table{width:100%;border-collapse:collapse;margin-bottom:30px}.table th{text-align:left;background:#f9fafb;padding:12px;font-size:12px;text-transform:uppercase;color:#666}.table td{padding:12px;border-bottom:1px solid #eee}.text-right{text-align:right}.totals{float:right;width:300px}.row{display:flex;justify-content:space-between;padding:8px 0}.total-row{font-weight:bold;font-size:18px;border-top:2px solid #333;padding-top:10px}.footer{margin-top:100px;text-align:center;font-size:12px;color:#999}</style></head><body><div class="header"><div class="company-name">irket Adnz A..</div><div class="invoice-title">FATURA</div></div><div class="info-grid"><div class="box"><h3>Sayn</h3><p><strong>${z.name}</strong><br>${z.company}<br>${z.phone}</p></div><div class="box text-right"><h3>Belge Detaylar</h3><p>Belge No: <strong>#${C.docNo}</strong><br>Tarih: ${C.date}<br>Aklama: ${C.description}</p></div></div><table class="table"><thead><tr><th style="width:40%">rn / Hizmet</th><th class="text-right">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-right">KDV (%)</th><th class="text-right">Toplam</th></tr></thead><tbody>${C.items.map(Ee=>`<tr><td>${Ee.name}</td><td class="text-right">${Ee.qty}</td><td class="text-right">${Ee.unitPrice.toFixed(2)} </td><td class="text-right">%${Ee.vatRate}</td><td class="text-right">${(Ee.qty*Ee.unitPrice).toFixed(2)} </td></tr>`).join("")}</tbody></table><div class="totals"><div class="row"><span>Ara Toplam:</span><span>${ne.toFixed(2)} </span></div><div class="row"><span>Toplam KDV:</span><span>${ae.toFixed(2)} </span></div><div class="row total-row"><span>Genel Toplam:</span><span>${P.toFixed(2)} </span></div></div><div style="clear:both"></div><div class="footer">Bu belge elektronik ortamda retilmitir.</div><script>window.onload=function(){window.print()}<\/script></body></html>
    `;X.document.write(fe),X.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri ynetimi ve hzl sat ilemleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 rounded-lg border border-gray-200",children:[c.jsx(ui.Calendar,{}),c.jsx("input",{type:"month",className:"ml-2 bg-transparent border-none focus:ring-0 text-sm text-gray-700 p-0",value:_,onChange:C=>S(C.target.value)})]}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(zx,{checked:v,onChange:y,label:"Bitmi Siparileri Gster"})}),c.jsxs("button",{onClick:()=>Q(!0),className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(ui.Plus,{})}),"Yeni Mteri"]})]})]}),c.jsxs("div",{className:"space-y-8",children:[o.map(C=>{const z=m.filter(ae=>{const P=ae.customerId===C.id,X=v?!0:ae.status==="active",fe=_?ae.date.startsWith(_):!0;return P&&X&&fe}),ne=I(C.id);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 sm:flex sm:items-center sm:justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 shadow-inner",children:c.jsx(ui.User,{})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:C.name}),c.jsxs("p",{className:"text-sm text-gray-500 font-medium",children:[C.company,"  ",C.phone]})]})]}),c.jsxs("div",{className:"mt-4 sm:mt-0 flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right mr-2",children:[c.jsx("span",{className:"text-xs text-gray-400 uppercase font-semibold tracking-wider block",children:"Toplam Sat Hacmi"}),c.jsxs("span",{className:"text-lg font-bold text-emerald-600",children:[ne.toLocaleString("tr-TR",{minimumFractionDigits:2})," "]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("button",{onClick:()=>E(C),className:"flex items-center px-4 py-2 border border-white/20 rounded-lg shadow-md text-sm font-medium text-white bg-emerald-500/90 hover:bg-emerald-600 backdrop-blur-sm transition-all",children:[c.jsx(ui.Plus,{}),c.jsx("span",{className:"ml-2",children:"Sat Yap"})]}),c.jsx("button",{className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:c.jsx(ui.Trash,{})})]})]})]}),z.length>0?c.jsx("div",{className:"bg-white",children:c.jsx("ul",{className:"divide-y divide-gray-100",children:z.map(ae=>{const P=k(ae.items),X=ae.status==="finished";return c.jsx("li",{className:`px-6 py-4 transition-colors ${X?"bg-gray-50/50":"hover:bg-gray-50"}`,children:c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start sm:items-center space-x-4",children:[c.jsx("div",{className:`flex-shrink-0 h-3 w-3 rounded-full mt-1.5 sm:mt-0 ${X?"bg-gray-300":"bg-emerald-400 shadow-[0_0_10px_rgba(52,211,153,0.5)]"}`}),c.jsxs("div",{children:[c.jsxs("p",{className:`text-sm font-bold ${X?"text-gray-500":"text-indigo-600"}`,children:["#",ae.docNo,X&&c.jsx("span",{className:"ml-2 text-[10px] uppercase tracking-wider text-gray-400 border border-gray-200 rounded px-1.5 py-0.5",children:"Tamamland"})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[ae.description,"  ",ae.date]})]})]}),c.jsxs("div",{className:"flex items-center justify-between sm:justify-end space-x-6 w-full sm:w-auto",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:`text-sm font-bold ${X?"text-gray-500":"text-gray-900"}`,children:[P.grandTotal.toLocaleString("tr-TR",{minimumFractionDigits:2})," "]}),c.jsxs("p",{className:"text-xs text-gray-400",children:[ae.items?.length||0," Kalem"]})]}),c.jsxs("div",{className:"flex items-center space-x-1 bg-gray-50 rounded-lg p-1 border border-gray-100",children:[c.jsx("button",{onClick:()=>Ae(ae,C),title:"Yazdr",className:"p-1.5 text-gray-400 hover:text-indigo-600 hover:bg-white rounded-md transition-all",children:c.jsx(ui.Printer,{})}),c.jsx("button",{onClick:()=>le(ae,C),title:"Dzenle",className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-white rounded-md transition-all",children:c.jsx(ui.Edit,{})}),c.jsx("button",{onClick:()=>oe(ae.id),title:"Sil",className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-white rounded-md transition-all",children:c.jsx(ui.Trash,{})})]})]})]})},ae.id)})})}):_?c.jsx("div",{className:"px-6 py-8 text-center text-gray-400 text-sm italic bg-gray-50/50",children:"Bu tarihte kayt bulunamad."}):!v&&c.jsx("div",{className:"px-6 py-4 text-center text-gray-400 text-sm italic bg-gray-50/50",children:"Aktif sipari yok."})]},C.id)}),o.length===0&&c.jsx("div",{className:"text-center text-gray-500 mt-10",children:"Henz mteri eklenmedi."})]}),ee&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsxs("div",{className:"w-full max-w-lg bg-white/80 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden transform transition-all",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Yeni Mteri Ekle"}),c.jsx("button",{onClick:()=>Q(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx("span",{className:"text-2xl",children:""})})]}),c.jsxs("form",{onSubmit:M,className:"p-8 space-y-5",children:[c.jsx("input",{required:!0,placeholder:"Ad Soyad",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:bg-white transition-all",value:he.name,onChange:C=>j({...he,name:C.target.value})}),c.jsx("input",{placeholder:"irket Ad",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:bg-white transition-all",value:he.company,onChange:C=>j({...he,company:C.target.value})}),c.jsx("input",{placeholder:"Telefon",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:bg-white transition-all",value:he.phone,onChange:C=>j({...he,phone:C.target.value})}),c.jsx("input",{type:"email",placeholder:"E-posta",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:bg-white transition-all",value:he.email,onChange:C=>j({...he,email:C.target.value})}),c.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:()=>Q(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg shadow-indigo-200 hover:bg-indigo-600 hover:shadow-indigo-300 backdrop-blur-sm transition-all",children:"Kaydet"})]})]})]})}),R&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-5xl h-[90vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:U,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:re?"Siparii Dzenle":"Yeni Sat Olutur"}),c.jsx("p",{className:"text-sm text-indigo-600 font-medium",children:Z?.name})]}),c.jsx("button",{type:"button",onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 mb-8",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5",children:"Belge No"}),c.jsx("input",{type:"text",disabled:!0,className:"w-full bg-gray-100/50 border border-gray-200 rounded-lg px-3 py-2 text-sm text-gray-500",value:ue.docNo})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,className:"w-full bg-white/50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all",value:ue.date,onChange:C=>xe({...ue,date:C.target.value})})]}),c.jsxs("div",{className:"md:col-span-7",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5",children:"Aklama"}),c.jsx("textarea",{rows:"1",className:"w-full bg-white/50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all resize-y min-h-[42px]",placeholder:"Sipari notlar...",value:ue.description,onChange:C=>xe({...ue,description:C.target.value})})]}),c.jsx("div",{className:"md:col-span-12 flex justify-end pt-2",children:c.jsx(zx,{checked:ue.status==="finished",onChange:C=>xe({...ue,status:C?"finished":"active"}),label:"Bu sipari tamamland (Bitmi Sipari)"})})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden mb-8 shadow-sm bg-white/40",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"rn / Hizmet"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24",children:"Adet"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider w-32",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider w-32",children:"Toplam"}),c.jsx("th",{className:"px-2 py-3 w-10"})]})}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:ue.items.map((C,z)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"px-4 py-2",children:c.jsx("input",{type:"text",placeholder:"rn ad...",className:"w-full border-none bg-transparent focus:ring-0 text-sm p-2 rounded hover:bg-gray-50 focus:bg-white transition-colors",value:C.name,onChange:ne=>W(z,"name",ne.target.value)})}),c.jsx("td",{className:"px-2 py-2",children:c.jsx("input",{type:"number",min:"1",className:"w-full text-center border border-transparent bg-gray-50 rounded px-2 py-1.5 text-sm focus:border-indigo-500 focus:bg-white transition-all",value:C.qty,onChange:ne=>W(z,"qty",ne.target.value)})}),c.jsx("td",{className:"px-2 py-2",children:c.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full text-right border border-transparent bg-gray-50 rounded px-2 py-1.5 text-sm focus:border-indigo-500 focus:bg-white transition-all",value:C.unitPrice,onChange:ne=>W(z,"unitPrice",ne.target.value)})}),c.jsx("td",{className:"px-2 py-2",children:c.jsxs("select",{className:"w-full text-center border-none bg-transparent focus:ring-0 text-sm cursor-pointer",value:C.vatRate,onChange:ne=>W(z,"vatRate",ne.target.value),children:[c.jsx("option",{value:"0",children:"0%"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"10%"}),c.jsx("option",{value:"20",children:"20%"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-gray-700",children:w(C).toFixed(2)}),c.jsx("td",{className:"px-2 py-2 text-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("button",{type:"button",onClick:()=>me(z),className:"text-gray-300 hover:text-red-500 transition-colors",children:c.jsx("span",{className:"text-xl",children:""})})})]},z))})]}),c.jsx("button",{type:"button",onClick:V,className:"w-full py-3 bg-gray-50/50 text-gray-500 text-sm font-medium hover:bg-gray-100 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/50 p-6 rounded-xl border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsxs("span",{className:"font-medium",children:[k(ue.items).subtotal.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsxs("span",{className:"font-medium",children:[k(ue.items).totalVAT.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 border-t border-gray-200 pt-3",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsxs("span",{className:"text-indigo-600",children:[k(ue.items).grandTotal.toFixed(2)," "]})]})]})})]}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg shadow-indigo-200 hover:bg-indigo-600 hover:shadow-indigo-300 backdrop-blur-sm transition-all",children:re?"Kaydet":"Tamamla"}),c.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})})]})}const hi={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),User:()=>c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Calendar:()=>c.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Upload:()=>c.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})};function xC(){const[i,e]=de.useState(null),[s,r]=de.useState(!0),[o,h]=de.useState([]),[m,p]=de.useState([]),[v,y]=de.useState(""),[_,S]=de.useState(!1),R=de.useRef(null),[q,ee]=de.useState(null),[Q,Z]=de.useState({en:6,boy:4}),[ce,re]=de.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],image:null,items:[]});if(de.useEffect(()=>{const E=Qn.onAuthStateChanged(V=>{e(V),r(!1)}),le=$n(dt(Ve,"customers"),Xn("name","asc")),oe=cn(le,V=>{p(V.docs.map(me=>({id:me.id,...me.data()})))}),U=$n(dt(Ve,"siparisler"),Xn("createdAt","desc")),W=cn(U,V=>{h(V.docs.map(me=>({id:me.id,...me.data()})))});return()=>{E(),oe(),W()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(hi.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]});const pe=E=>{const le=E.target.files[0];if(!le)return;const oe=new FileReader;oe.onload=U=>{const W=new Image;W.onload=()=>{const V=document.createElement("canvas");V.width=300,V.height=800,V.getContext("2d").drawImage(W,0,0,300,800);const Ae=V.toDataURL("image/jpeg",.8);re(C=>({...C,image:Ae}))},W.src=U.target.result},oe.readAsDataURL(le)},ue=()=>{ee(null);const E="SP-"+Date.now().toString().slice(-6);re({siparisNo:E,customerId:"",date:new Date().toISOString().split("T")[0],image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),Z({en:6,boy:4}),S(!0)},xe=E=>{ee(E),re({siparisNo:E.siparisNo,customerId:E.customerId,date:E.date,image:E.image,items:E.items||[]}),S(!0)},he=async E=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await fa(Wt(Ve,"siparisler",E))}catch(le){alert(le.message)}},j=async E=>{if(E.preventDefault(),!ce.customerId){alert("Ltfen bir mteri seiniz.");return}try{const le={...ce,createdAt:q?q.createdAt:new Date().toISOString()};q?await br(Wt(Ve,"siparisler",q.id),le):await xi(dt(Ve,"siparisler"),le),S(!1)}catch(le){alert(le.message)}},w=(E,le,oe)=>{const U=[...ce.items],W=U[E];if(W[le]=oe,le==="en1"){const V=parseFloat(oe);isNaN(V)?oe===""&&(W.en2=""):W.en2=V-Q.en}if(le==="boy1"){const V=parseFloat(oe);isNaN(V)?oe===""&&(W.boy2=""):W.boy2=V-Q.boy}re({...ce,items:U})},N=()=>{re({...ce,items:[...ce.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},k=E=>{const le=ce.items.filter((oe,U)=>U!==E);re({...ce,items:le})},I=(E,le)=>{const oe=parseFloat(le)||0,U={...Q,[E]:oe};Z(U);const W=ce.items.map(V=>({...V,en2:V.en1?parseFloat(V.en1)-U.en:V.en2,boy2:V.boy1?parseFloat(V.boy1)-U.boy:V.boy2}));re({...ce,items:W})},M=E=>{const le=m.find(W=>W.id===E.customerId)||{name:"Bilinmeyen Mteri"},oe=window.open("","","height=800,width=1000");if(!oe){alert("Pop-up engelleyiciyi kapatn.");return}const U=`
      <html><head><title>Sipari - ${E.siparisNo}</title>
      <style>
        body{font-family:'Helvetica',sans-serif;padding:20px;color:#333}
        .header{display:flex;justify-content:space-between;border-bottom:2px solid #333;padding-bottom:10px;margin-bottom:20px}
        .title{font-size:24px;font-weight:bold}
        .meta{text-align:right}
        .door-image{display:block;margin:0 auto 20px auto;max-height:400px;border:1px solid #ddd}
        table{width:100%;border-collapse:collapse;font-size:12px}
        th{background:#f0f0f0;border:1px solid #999;padding:5px;text-align:center}
        td{border:1px solid #999;padding:5px;text-align:center}
        .left-group{background:#eef2ff}
        .right-group{background:#fff}
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div class="title">Sipari Formu: ${le.name}</div>
          <div class="meta">
            Sipari No: <strong>${E.siparisNo}</strong><br>
            Tarih: ${E.date}
          </div>
        </div>

        ${E.image?`<img src="${E.image}" class="door-image" />`:""}

        <table>
          <thead>
            <tr>
              <th colspan="2" class="left-group">KABA L</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="left-group">NET L</th>
              <th></th>
            </tr>
            <tr>
              <th class="left-group">EN</th>
              <th class="left-group">BOY</th>
              <th>GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th class="left-group">EN</th>
              <th class="left-group">BOY</th>
              <th>EKL</th>
            </tr>
          </thead>
          <tbody>
            ${E.items.map(W=>`
              <tr>
                <td class="left-group">${W.en1||"-"}</td>
                <td class="left-group">${W.boy1||"-"}</td>
                <td>${W.genislik||""}</td>
                <td>${W.takim||""}</td>
                <td>${W.aciklama||""}</td>
                <td class="left-group"><strong>${W.en2||""}</strong></td>
                <td class="left-group"><strong>${W.boy2||""}</strong></td>
                <td>${W.sekil||""}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;oe.document.write(U),oe.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 rounded-lg border border-gray-200",children:[c.jsx(hi.Calendar,{}),c.jsx("input",{type:"month",className:"ml-2 bg-transparent border-none focus:ring-0 text-sm text-gray-700 p-0",value:v,onChange:E=>y(E.target.value)})]}),c.jsxs("button",{onClick:ue,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(hi.Plus,{})}),"Sipari Ekle"]})]})]}),c.jsxs("div",{className:"space-y-8",children:[m.map(E=>{const le=o.filter(oe=>{const U=oe.customerId===E.id,W=v?oe.date.startsWith(v):!0;return U&&W});return le.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(hi.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:E.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[le.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:le.map(oe=>c.jsxs("div",{className:"px-6 py-4 hover:bg-gray-50/50 transition-colors flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[oe.image?c.jsx("img",{src:oe.image,alt:"Door",className:"w-12 h-20 object-cover border rounded bg-gray-100"}):c.jsx("div",{className:"w-12 h-20 bg-gray-100 rounded border flex items-center justify-center text-gray-300",children:c.jsx(hi.User,{})}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",oe.siparisNo]}),c.jsx("p",{className:"text-xs text-gray-500",children:oe.date}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[oe.items?.length||0," Kalem rn"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsx("button",{onClick:()=>M(oe),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(hi.Printer,{})}),c.jsx("button",{onClick:()=>xe(oe),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(hi.Edit,{})}),c.jsx("button",{onClick:()=>he(oe.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(hi.Trash,{})})]})]},oe.id))})]},E.id)}),o.length===0&&c.jsx("div",{className:"text-center text-gray-500",children:"Kaytl sipari bulunamad."})]}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:j,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:q?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{disabled:!0,value:ce.siparisNo,className:"w-full bg-gray-100/50 border border-gray-200 rounded-lg px-3 py-2 text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri Se"}),c.jsxs("select",{required:!0,value:ce.customerId,onChange:E=>re({...ce,customerId:E.target.value}),className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-indigo-500 focus:border-indigo-500",children:[c.jsx("option",{value:"",children:"Seiniz..."}),m.map(E=>c.jsxs("option",{value:E.id,children:[E.name," (",E.company,")"]},E.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:ce.date,onChange:E=>re({...ce,date:E.target.value}),className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm"})]}),c.jsxs("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg hover:bg-gray-50 transition-colors relative h-full min-h-[80px]",children:[c.jsx("input",{ref:R,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:pe}),ce.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center",children:[c.jsx("img",{src:ce.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("span",{className:"absolute bottom-1 right-1 text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})]}):c.jsxs("div",{className:"text-center text-gray-400",children:[c.jsx(hi.Upload,{}),c.jsx("span",{className:"text-xs block",children:"Grsel (JPG)"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama Ayar:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En Dlecek:"}),c.jsx("input",{type:"number",value:Q.en,onChange:E=>I("en",E.target.value),className:"w-16 border rounded px-1 py-0.5 text-center"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy Dlecek:"}),c.jsx("input",{type:"number",value:Q.boy,onChange:E=>I("boy",E.target.value),className:"w-16 border rounded px-1 py-0.5 text-center"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KABA L"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 w-16 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 w-16 bg-orange-50/30 border-r border-gray-200",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 w-20",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2 w-20",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 w-16 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 w-16 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 w-24 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:ce.items.map((E,le)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-200 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300",value:E.en1,onChange:oe=>w(le,"en1",oe.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-200 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300",value:E.boy1,onChange:oe=>w(le,"boy1",oe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border-none bg-transparent focus:ring-0",value:E.genislik,onChange:oe=>w(le,"genislik",oe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border-none bg-transparent focus:ring-0",value:E.takim,onChange:oe=>w(le,"takim",oe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-left border-none bg-transparent focus:ring-0",value:E.aciklama,onChange:oe=>w(le,"aciklama",oe.target.value)})}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1",value:E.en2,onChange:oe=>w(le,"en2",oe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1",value:E.boy2,onChange:oe=>w(le,"boy2",oe.target.value)})}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border-none bg-transparent focus:ring-0",value:E.sekil,onChange:oe=>w(le,"sekil",oe.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>k(le),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},le))})]}),c.jsx("button",{type:"button",onClick:N,className:"w-full py-2 bg-gray-50/50 text-gray-500 text-xs font-bold uppercase tracking-wide hover:bg-indigo-50 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:q?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})})]})}const ea={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Calendar:()=>c.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),ArrowUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),ArrowDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})},bC=({checked:i,onChange:e,label:s,leftLabel:r,rightLabel:o})=>c.jsxs("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!i),children:[r&&c.jsx("span",{className:`mr-3 text-sm font-medium transition-colors ${i?"text-gray-500":"text-indigo-600 font-bold"}`,children:r}),c.jsx("div",{className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${i?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-5":"translate-x-0"}`})}),o&&c.jsx("span",{className:`ml-3 text-sm font-medium transition-colors ${i?"text-indigo-600 font-bold":"text-gray-500"}`,children:o}),s&&c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 group-hover:text-indigo-600 transition-colors",children:s})]});function _C(){const[i,e]=de.useState(null),[s,r]=de.useState([]),[o,h]=de.useState([]),[m,p]=de.useState(""),[v,y]=de.useState("raw"),[_,S]=de.useState(!1),[R,q]=de.useState(!1),[ee,Q]=de.useState(""),[Z,ce]=de.useState(null),[re,pe]=de.useState({category:"",productType:"raw",productName:"",action:"add",quantity:"",unit:"adet",company:"",date:new Date().toISOString().split("T")[0]}),ue=de.useMemo(()=>[...new Set(s.map(E=>E.category))],[s]),xe=de.useMemo(()=>[...new Set(s.map(E=>E.productName))],[s]);de.useEffect(()=>{const E=Qn.onAuthStateChanged(e),le=$n(dt(Ve,"inventory_movements"),Xn("date","desc")),oe=cn(le,V=>{r(V.docs.map(me=>({id:me.id,...me.data()})))}),U=$n(dt(Ve,"companies"),Xn("name","asc")),W=cn(U,V=>{h(V.docs.map(me=>({id:me.id,...me.data()})))});return()=>{E(),oe(),W()}},[]);const he=E=>{const le={};return E.forEach(oe=>{le[oe.unit]||(le[oe.unit]=0);const U=Number(oe.quantity)||0;oe.action==="add"?le[oe.unit]+=U:le[oe.unit]-=U}),Object.entries(le).map(([oe,U])=>`${U.toLocaleString("tr-TR")} ${oe}`).join(", ")},w=(()=>{const E=s.filter(oe=>{const U=m?oe.date.startsWith(m):!0,W=oe.productType===v;return U&&W}),le={};return E.forEach(oe=>{le[oe.category]||(le[oe.category]=[]),le[oe.category].push(oe)}),le})(),N=async E=>{E.preventDefault();try{const le={...re,quantity:Number(re.quantity),createdAt:new Date().toISOString()};re.company&&!o.find(oe=>oe.name===re.company)&&await xi(dt(Ve,"companies"),{name:re.company}),Z?await br(Wt(Ve,"inventory_movements",Z),le):await xi(dt(Ve,"inventory_movements"),le),M()}catch(le){alert("Hata: "+le.message)}},k=async E=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await fa(Wt(Ve,"inventory_movements",E))},I=E=>{ce(E.id),pe({category:E.category,productType:E.productType,productName:E.productName,action:E.action,quantity:E.quantity,unit:E.unit,company:E.company,date:E.date}),S(!0)},M=()=>{S(!1),ce(null),pe({category:"",productType:"raw",productName:"",action:"add",quantity:"",unit:"adet",company:"",date:new Date().toISOString().split("T")[0]})};return i?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"rn & Stok Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn giri/k hareketleri ve envanter takibi"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 rounded-lg border border-gray-200",children:[c.jsx(ea.Calendar,{}),c.jsx("input",{type:"month",className:"ml-2 bg-transparent border-none focus:ring-0 text-sm text-gray-700 p-0",value:m,onChange:E=>p(E.target.value)})]}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(bC,{checked:v==="manufactured",onChange:E=>y(E?"manufactured":"raw"),leftLabel:"Ham",rightLabel:"retilmi"})}),c.jsxs("button",{onClick:()=>S(!0),className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(ea.Plus,{})}),"rn Hareketi Ekle"]})]})]}),c.jsxs("div",{className:"space-y-8",children:[Object.keys(w).length===0&&c.jsx("div",{className:"text-center py-12 text-gray-500",children:"Kaytl rn hareketi bulunamad."}),Object.entries(w).map(([E,le])=>{const oe=he(le);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(ea.Box,{})}),c.jsx("h3",{className:"ml-3 text-xl font-bold text-gray-800",children:E})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"text-sm font-bold text-emerald-600 bg-emerald-50 px-3 py-1 rounded-lg border border-emerald-100",children:["Toplam: ",oe]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:[le.length," Hareket"]})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:le.map(U=>{const W=U.action==="add";return c.jsxs("div",{className:"px-6 py-4 hover:bg-gray-50/50 transition-colors flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center ${W?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:W?c.jsx(ea.ArrowUp,{}):c.jsx(ea.ArrowDown,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-900",children:U.productName}),c.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-gray-200 text-gray-500 bg-gray-50",children:U.productType==="raw"?"Ham":"retilmi"})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[U.company,"  ",U.date]})]})]}),c.jsxs("div",{className:"flex items-center justify-between w-full md:w-auto gap-8",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("span",{className:`text-lg font-bold ${W?"text-emerald-600":"text-red-600"}`,children:[W?"+":"-",U.quantity," ",U.unit]}),c.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider font-semibold",children:W?"Stok Girii":"Stok k"})]}),c.jsxs("div",{className:"flex items-center space-x-1 bg-white border border-gray-100 rounded-lg p-1 shadow-sm",children:[c.jsx("button",{onClick:()=>I(U),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-all",children:c.jsx(ea.Edit,{})}),c.jsx("button",{onClick:()=>k(U.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all",children:c.jsx(ea.Trash,{})})]})]})]},U.id)})})]},E)})]}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-2xl flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden max-h-[90vh]",children:c.jsxs("form",{onSubmit:N,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Z?"Hareketi Dzenle":"rn Kaydet"}),c.jsx("button",{type:"button",onClick:M,className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-8 overflow-y-auto custom-scrollbar space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Kategorisi"}),c.jsx("input",{list:"category-options",required:!0,placeholder:"rn: MDF, Tutkal",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all",value:re.category,onChange:E=>pe({...re,category:E.target.value})}),c.jsx("datalist",{id:"category-options",children:ue.map((E,le)=>c.jsx("option",{value:E},le))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tr"}),c.jsxs("div",{className:"flex bg-white rounded-lg p-1 border border-gray-200 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>pe({...re,productType:"raw"}),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-colors ${re.productType==="raw"?"bg-indigo-100 text-indigo-700":"text-gray-500 hover:bg-gray-50"}`,children:"HAM"}),c.jsx("button",{type:"button",onClick:()=>pe({...re,productType:"manufactured"}),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-colors ${re.productType==="manufactured"?"bg-purple-100 text-purple-700":"text-gray-500 hover:bg-gray-50"}`,children:"RETLM"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Ad"}),c.jsx("input",{list:"product-options",required:!0,placeholder:"rn: 18mm MDF Levha",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all",value:re.productName,onChange:E=>pe({...re,productName:E.target.value})}),c.jsx("datalist",{id:"product-options",children:xe.map((E,le)=>c.jsx("option",{value:E},le))})]}),c.jsxs("div",{className:"bg-gray-50/50 p-4 rounded-xl border border-gray-200/50 grid grid-cols-1 sm:grid-cols-12 gap-4 items-end",children:[c.jsxs("div",{className:"sm:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"lem"}),c.jsxs("div",{className:"flex bg-white rounded-lg p-1 border border-gray-200 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>pe({...re,action:"add"}),className:`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${re.action==="add"?"bg-emerald-100 text-emerald-700":"text-gray-500 hover:bg-gray-50"}`,children:"EKLE"}),c.jsx("button",{type:"button",onClick:()=>pe({...re,action:"remove"}),className:`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${re.action==="remove"?"bg-red-100 text-red-700":"text-gray-500 hover:bg-gray-50"}`,children:"IKART"})]})]}),c.jsxs("div",{className:"sm:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Miktar"}),c.jsx("input",{type:"number",required:!0,min:"0",className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm font-bold text-gray-800",value:re.quantity,onChange:E=>pe({...re,quantity:E.target.value})})]}),c.jsxs("div",{className:"sm:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim"}),c.jsxs("select",{className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm",value:re.unit,onChange:E=>pe({...re,unit:E.target.value}),children:[c.jsx("option",{value:"adet",children:"Adet"}),c.jsx("option",{value:"kg",children:"Kg"}),c.jsx("option",{value:"m2",children:"m"}),c.jsx("option",{value:"m3",children:"m"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Firma"}),c.jsx("input",{list:"company-options",placeholder:"Firma Seiniz veya Yaznz...",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all",value:re.company,onChange:E=>pe({...re,company:E.target.value})}),c.jsx("datalist",{id:"company-options",children:o.map((E,le)=>c.jsx("option",{value:E.name},le))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"lem Tarihi"}),c.jsx("input",{type:"date",required:!0,className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-2.5 text-sm",value:re.date,onChange:E=>pe({...re,date:E.target.value})})]})]}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:Z?"Deiiklikleri Kaydet":"Kaydet"}),c.jsx("button",{type:"button",onClick:M,className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const lh={Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})})},wC=({data:i,categories:e})=>{if(!i||i.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"Veri Yok"});const s=300,r=800,o=40,h=r-o*2,m=s-o*2,p=i.flatMap(_=>e.map(S=>_[S]||0)),v=Math.max(...p,100),y=["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${r} ${s}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const S=s-o-_*(m/4);return c.jsxs("g",{children:[c.jsx("line",{x1:o,y1:S,x2:r-o,y2:S,stroke:"#e5e7eb",strokeWidth:"1"}),c.jsx("text",{x:o-10,y:S+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(v/4*_)})]},_)}),e.map((_,S)=>{const R=y[S%y.length],q=i.map((ee,Q)=>{const Z=o+Q*(h/(i.length-1||1)),ce=ee[_]||0,re=s-o-ce/v*m;return`${Z},${re}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:R,strokeWidth:"3",points:q,strokeLinecap:"round",strokeLinejoin:"round"}),i.map((ee,Q)=>{const Z=o+Q*(h/(i.length-1||1)),ce=ee[_]||0,re=s-o-ce/v*m;return c.jsx("circle",{cx:Z,cy:re,r:"4",fill:"white",stroke:R,strokeWidth:"2",children:c.jsx("title",{children:`${ee.month}: ${ce}`})},Q)})]},_)}),i.map((_,S)=>{const R=o+S*(h/(i.length-1||1));return c.jsx("text",{x:R,y:s-10,textAnchor:"middle",fontSize:"10",fill:"#6B7280",children:_.month},S)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,S)=>c.jsxs("div",{className:"flex items-center text-xs font-medium text-gray-600",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:y[S%y.length]}}),_]},_))})]})},TC=({title:i,totals:e})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl p-5 rounded-2xl border border-white/50 shadow-lg hover:shadow-xl transition-all duration-300 min-w-[200px] flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("div",{className:"bg-indigo-50 p-2 rounded-lg text-indigo-600",children:c.jsx(lh.Box,{})}),c.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Kategori"})]}),c.jsx("h3",{className:"text-lg font-bold text-gray-800 truncate",children:i}),c.jsx("div",{className:"mt-2 space-y-1",children:Object.entries(e).map(([s,r])=>c.jsxs("div",{className:"text-sm font-medium text-emerald-600",children:[r.toLocaleString()," ",c.jsx("span",{className:"text-xs text-gray-500 font-normal",children:s})]},s))})]});function EC(){const[i,e]=de.useState([]),[s,r]=de.useState(!0),[o,h]=de.useState(null);de.useEffect(()=>{const v=$n(dt(Ve,"inventory_movements"),Xn("date","asc")),y=cn(v,_=>{const S=_.docs.map(R=>R.data());e(S),r(!1)});return()=>y()},[]);const m=de.useMemo(()=>{const v={},y={};return i.forEach(_=>{const S=Number(_.quantity)||0,R=_.action==="add"?S:-S;v[_.category]||(v[_.category]={}),v[_.category][_.productName]||(v[_.category][_.productName]={qty:0,unit:_.unit}),v[_.category][_.productName].qty+=R,y[_.category]||(y[_.category]={}),y[_.category][_.unit]||(y[_.category][_.unit]=0),y[_.category][_.unit]+=R}),{detailed:v,totals:y}},[i]),p=de.useMemo(()=>{const v={},y={};return Object.keys(m.totals).forEach(S=>y[S]=0),i.forEach(S=>{const R=S.date.slice(0,7),q=Number(S.quantity)||0,ee=S.action==="add"?q:-q;y[S.category]||(y[S.category]=0),y[S.category]+=ee,v[R]={...y,month:R}}),Object.values(v).sort((S,R)=>S.month.localeCompare(R.month))},[i,m]);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Gncel envanter ve gemi stok hareket analizleri"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[Object.entries(m.totals).map(([v,y])=>c.jsx(TC,{title:v,totals:y},v)),Object.keys(m.totals).length===0&&c.jsx("div",{className:"col-span-full bg-white p-6 rounded-xl text-center text-gray-400 border border-dashed border-gray-300",children:"Henz stok verisi bulunmamaktadr. rnler sayfasndan ekleme yapnz."})]}),p.length>0&&c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-lg border border-white/50 p-6 mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg text-indigo-600",children:c.jsx(lh.Chart,{})}),c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Aylk Stok Deiimi"})]}),c.jsxs("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:[c.jsx("option",{children:"Son 12 Ay"}),c.jsx("option",{children:"Bu Yl"})]})]}),c.jsx(wC,{data:p,categories:Object.keys(m.totals)})]}),c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50",children:c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Detayl Stok Listesi"})}),c.jsx("div",{className:"divide-y divide-gray-100",children:Object.entries(m.detailed).map(([v,y])=>{const _=o===v;return c.jsxs("div",{className:"transition-all",children:[c.jsxs("div",{onClick:()=>h(_?null:v),className:"px-6 py-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${_?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-500"}`,children:_?c.jsx(lh.ChevronUp,{}):c.jsx(lh.ChevronDown,{})}),c.jsx("span",{className:"font-bold text-gray-700",children:v}),c.jsxs("span",{className:"text-xs bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:[Object.keys(y).length," eit"]})]}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Object.values(m.totals[v]).map((S,R)=>c.jsx("span",{className:"ml-2",children:S},R)),c.jsx("span",{className:"text-gray-400 ml-1 text-xs",children:"Toplam"})]})})]}),_&&c.jsx("div",{className:"bg-gray-50/30 px-6 py-4 border-t border-gray-100 animate-fadeIn",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 rounded-l-lg",children:"rn Ad"}),c.jsx("th",{className:"px-4 py-2 text-right rounded-r-lg",children:"Mevcut Stok"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:Object.entries(y).map(([S,R])=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-gray-700",children:S}),c.jsxs("td",{className:"px-4 py-3 text-right",children:[c.jsx("span",{className:`font-bold ${R.qty<0?"text-red-600":R.qty===0?"text-gray-400":"text-emerald-600"}`,children:R.qty}),c.jsx("span",{className:"text-xs text-gray-500 ml-1",children:R.unit})]})]},S))})]})})]},v)})})]})]})}const ta={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),Document:()=>c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Calendar:()=>c.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})};function SC(){const[i,e]=de.useState(null),[s,r]=de.useState(!0),[o,h]=de.useState([]),[m,p]=de.useState(""),[v,y]=de.useState(!1),[_,S]=de.useState(null),[R,q]=de.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",items:[]});if(de.useEffect(()=>{const w=Qn.onAuthStateChanged(I=>{e(I),r(!1)}),N=$n(dt(Ve,"teklifler"),Xn("createdAt","desc")),k=cn(N,I=>{h(I.docs.map(M=>({id:M.id,...M.data()})))});return()=>{w(),k()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(ta.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]});const ee=()=>{S(null);const w="TK-"+Date.now().toString().slice(-6),N=new Date;N.setDate(N.getDate()+7),q({teklifNo:w,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:N.toISOString().split("T")[0],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),y(!0)},Q=w=>{S(w),q({teklifNo:w.teklifNo,teklifName:w.teklifName||"",customerName:w.customerName,date:w.date,validityDate:w.validityDate||"",items:w.items||[]}),y(!0)},Z=async w=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await fa(Wt(Ve,"teklifler",w))}catch(N){alert(N.message)}},ce=async w=>{if(w.preventDefault(),!R.customerName){alert("Ltfen mteri ad giriniz.");return}try{const N={...R,createdAt:_?_.createdAt:new Date().toISOString()};_?await br(Wt(Ve,"teklifler",_.id),N):await xi(dt(Ve,"teklifler"),N),y(!1)}catch(N){alert(N.message)}},re=(w,N,k)=>{const I=w*N,M=I*(k/100);return I+M},pe=(w,N,k)=>{const I=[...R.items],M=I[w];M[N]=k;const E=parseFloat(N==="quantity"?k:M.quantity),le=parseFloat(N==="price"?k:M.price),oe=parseFloat(N==="vat"?k:M.vat);!isNaN(E)&&!isNaN(le)&&!isNaN(oe)&&(M.total=re(E,le,oe)),q({...R,items:I})},ue=()=>{q({...R,items:[...R.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},xe=w=>{const N=R.items.filter((k,I)=>I!==w);q({...R,items:N})},he=()=>{const w=R.items.reduce((k,I)=>k+I.quantity*I.price,0),N=R.items.reduce((k,I)=>k+I.quantity*I.price*(I.vat/100),0);return{subtotal:w,totalVAT:N,grandTotal:w+N}},j=w=>{const N=window.open("","","height=800,width=1000");if(!N){alert("Pop-up engelleyiciyi kapatn.");return}const k=w.items.reduce((le,oe)=>le+oe.quantity*oe.price,0),I=w.items.reduce((le,oe)=>le+oe.quantity*oe.price*(oe.vat/100),0),M=k+I,E=`
      <html><head><title>Teklif - ${w.teklifNo}</title>
      <style>
        body{font-family:'Helvetica',sans-serif;padding:40px;color:#333;line-height:1.6}
        .header-container { display: flex; justify-content: space-between; margin-bottom: 50px; padding-bottom: 20px; border-bottom: 2px solid #eee; }
        .company-info { width: 50%; }
        .company-name { font-size: 26px; font-weight: bold; color: #4F46E5; margin-bottom: 10px; text-transform: uppercase; }
        .company-details { font-size: 12px; color: #555; line-height: 1.6; }
        .meta-info { width: 40%; text-align: right; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #ddd; letter-spacing: 2px; margin-bottom: 20px; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .meta-table td { padding: 5px 0; border-bottom: 1px solid #f0f0f0; }
        .meta-label { font-weight: bold; color: #666; }
        .meta-value { font-weight: bold; color: #333; }
        
        .customer-box { background: #f9fafb; padding: 20px; border-radius: 8px; margin-bottom: 40px; border: 1px solid #eee; }
        .customer-label { font-size: 10px; font-weight: bold; text-transform: uppercase; color: #888; letter-spacing: 1px; margin-bottom: 5px; }
        .customer-name { font-size: 18px; font-weight: bold; color: #333; }

        table.items {width:100%;border-collapse:collapse;font-size:12px;margin-bottom:30px}
        table.items th{background:#4F46E5;color:white;padding:12px 8px;text-align:left;font-weight:bold;text-transform:uppercase}
        table.items td{border-bottom:1px solid #eee;padding:12px 8px;}
        .text-right { text-align: right; }
        .text-center { text-align: center; }
        
        .totals-container { float: right; width: 300px; margin-top: 20px; }
        .total-row { display: flex; justify-content: space-between; padding: 8px 0; font-size: 13px; }
        .grand-total { font-size: 18px; font-weight: bold; color: #4F46E5; border-top: 2px solid #eee; padding-top: 15px; margin-top: 10px; }
        
        .footer { margin-top: 100px; border-top: 1px solid #eee; padding-top: 20px; font-size: 10px; color: #999; text-align: center; clear: both; }
      </style>
      </head><body>
        
        <div class="header-container">
          <div class="company-info">
            <div class="company-name">irket Adnz A..</div>
            <div class="company-details">
              Adres: rnek Mah. Sanayi Cad. No:123<br>
              stanbul, Trkiye<br>
              Tel: +90 212 123 45 67<br>
              E-posta: info@sirketadiniz.com
            </div>
          </div>
          <div class="meta-info">
            <div class="invoice-title">TEKLF</div>
            <table class="meta-table" align="right">
              <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${w.teklifNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td class="meta-value">${w.date}</td></tr>
              <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${w.validityDate}</td></tr>
            </table>
          </div>
        </div>

        <div class="customer-box">
          <div class="customer-label">Sayn</div>
          <div class="customer-name">${w.customerName}</div>
        </div>

        <table class="items">
          <thead>
            <tr>
              <th width="40%">Aklama</th>
              <th class="text-center">Miktar</th>
              <th class="text-right">Birim Fiyat</th>
              <th class="text-center">KDV %</th>
              <th class="text-right">Tutar</th>
            </tr>
          </thead>
          <tbody>
            ${w.items.map(le=>`
              <tr>
                <td>${le.description}</td>
                <td class="text-center">${le.quantity}</td>
                <td class="text-right">${Number(le.price).toFixed(2)} </td>
                <td class="text-center">%${le.vat}</td>
                <td class="text-right"><strong>${Number(le.total).toFixed(2)} </strong></td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="totals-container">
          <div class="total-row"><span>Ara Toplam:</span> <span>${k.toFixed(2)} </span></div>
          <div class="total-row"><span>Toplam KDV:</span> <span>${I.toFixed(2)} </span></div>
          <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${M.toFixed(2)} </span></div>
        </div>

        <div class="footer">
          Bu belge elektronik ortamda retilmitir. Geerlilik tarihine kadar onaylanmas durumunda balaycl vardr.
        </div>

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;N.document.write(E),N.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 rounded-lg border border-gray-200",children:[c.jsx(ta.Calendar,{}),c.jsx("input",{type:"month",className:"ml-2 bg-transparent border-none focus:ring-0 text-sm text-gray-700 p-0",value:m,onChange:w=>p(w.target.value)})]}),c.jsxs("button",{onClick:ee,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(ta.Plus,{})}),"Teklif Olutur"]})]})]}),c.jsxs("div",{className:"space-y-4",children:[o.length===0&&c.jsx("div",{className:"text-center text-gray-500 py-10",children:"Henz kaytl teklif yok."}),o.filter(w=>m?w.date.startsWith(m):!0).map(w=>{const N=w.items?.reduce((k,I)=>k+(I.total||0),0)||0;return c.jsxs("div",{className:"bg-white shadow-md hover:shadow-lg rounded-xl border border-gray-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 transition-all",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600",children:c.jsx(ta.Document,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:w.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:["#",w.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.customerName}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Tarih: ",w.date,"  Geerlilik: ",w.validityDate]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("span",{className:"block text-xl font-bold text-emerald-600",children:[N.toLocaleString("tr-TR",{minimumFractionDigits:2})," "]}),c.jsx("span",{className:"text-xs text-gray-400 uppercase",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>j(w),className:"p-2 text-gray-400 hover:text-indigo-600 bg-gray-50 rounded-lg hover:bg-white shadow-sm border border-transparent hover:border-gray-200 transition-all",children:c.jsx(ta.Printer,{})}),c.jsx("button",{onClick:()=>Q(w),className:"p-2 text-gray-400 hover:text-blue-600 bg-gray-50 rounded-lg hover:bg-white shadow-sm border border-transparent hover:border-gray-200 transition-all",children:c.jsx(ta.Edit,{})}),c.jsx("button",{onClick:()=>Z(w.id),className:"p-2 text-gray-400 hover:text-red-600 bg-gray-50 rounded-lg hover:bg-white shadow-sm border border-transparent hover:border-gray-200 transition-all",children:c.jsx(ta.Trash,{})})]})]})]},w.id)})]}),v&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-5xl h-[90vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:ce,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:_?"Teklifi Dzenle":"Yeni Teklif Olutur"}),c.jsx("button",{type:"button",onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 mb-8 bg-white/50 p-6 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Teklif No"}),c.jsx("input",{disabled:!0,value:R.teklifNo,className:"w-full bg-gray-100/50 border border-gray-200 rounded-lg px-3 py-2.5 text-sm"})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Teklif Ad (Tanmlayc)"}),c.jsx("input",{required:!0,placeholder:"rn: Mutfak Dolab Projesi",className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",value:R.teklifName,onChange:w=>q({...R,teklifName:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Mteri Ad / Firma"}),c.jsx("input",{required:!0,placeholder:"Mteri ad giriniz...",className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",value:R.customerName,onChange:w=>q({...R,customerName:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:R.date,onChange:w=>q({...R,date:w.target.value}),className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm"})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Geerlilik Tarihi"}),c.jsx("input",{type:"date",required:!0,value:R.validityDate,onChange:w=>q({...R,validityDate:w.target.value}),className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden mb-8 shadow-sm bg-white/40",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider w-32",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider w-32",children:"Tutar"}),c.jsx("th",{className:"w-10"})]})}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:R.items.map((w,N)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"text",placeholder:"Hizmet/rn aklamas",className:"w-full border-none bg-transparent focus:ring-0 text-sm p-1",value:w.description,onChange:k=>pe(N,"description",k.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",min:"1",className:"w-full text-center border border-gray-200 bg-gray-50 rounded px-2 py-1 text-sm focus:bg-white",value:w.quantity,onChange:k=>pe(N,"quantity",k.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full text-right border border-gray-200 bg-gray-50 rounded px-2 py-1 text-sm focus:bg-white",value:w.price,onChange:k=>pe(N,"price",k.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsxs("select",{className:"w-full text-center border-none bg-transparent focus:ring-0 text-sm cursor-pointer",value:w.vat,onChange:k=>pe(N,"vat",k.target.value),children:[c.jsx("option",{value:"0",children:"0%"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"10%"}),c.jsx("option",{value:"20",children:"20%"})]})}),c.jsxs("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:[Number(w.total).toFixed(2)," "]}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>xe(N),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-xl",children:""})})})]},N))})]}),c.jsx("button",{type:"button",onClick:ue,className:"w-full py-3 bg-gray-50/50 text-gray-500 text-xs font-bold uppercase tracking-wide hover:bg-indigo-50 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/50 p-6 rounded-xl border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsxs("span",{className:"font-medium",children:[he().subtotal.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsxs("span",{className:"font-medium",children:[he().totalVAT.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 border-t border-gray-200 pt-3",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsxs("span",{className:"text-indigo-600",children:[he().grandTotal.toFixed(2)," "]})]})]})})]}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:_?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})})]})}const Fn={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},AC="86715dfc9d1046e7e8a0d95a",NC=`https://v6.exchangerate-api.com/v6/${AC}/latest/USD`,dm=({ops:i,onChange:e,allowRefs:s=!1,rows:r=[],constants:o=[],constantsMap:h})=>{const m=(y,_,S)=>{const R=[...i];R[y]={...R[y],[_]:S},_==="type"&&S!=="op"&&(R[y].value=""),e(R)},p=()=>{e([...i,{type:"op",value:"+"},{type:"num",value:0}])},v=y=>{if(y===0)return;const _=[...i];_.splice(y,2),e(_)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-3 py-2",children:[i.map((y,_)=>_%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-gray-100 border-0 rounded-lg text-center font-bold text-gray-600 w-12 py-2 focus:ring-2 focus:ring-indigo-500 cursor-pointer hover:bg-gray-200 transition-colors appearance-none",value:y.value,onChange:S=>m(_,"value",S.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>v(_),className:"absolute -top-4 -right-3 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center shadow-md z-20 hover:bg-red-600 transition-colors",title:"lemi Sil",children:""})]},_):c.jsxs("div",{className:"flex bg-white border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-indigo-500 shadow-sm items-center",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-300 text-[10px] uppercase font-bold text-gray-500 px-2 py-2 cursor-pointer focus:outline-none hover:bg-gray-100 h-full",value:y.type,onChange:S=>m(_,"type",S.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),s&&c.jsx("option",{value:"ref",children:"Ref"})]}),y.type==="num"&&c.jsx("input",{type:"number",className:"w-24 border-none text-sm px-3 py-2 focus:ring-0 text-gray-900",placeholder:"0",value:y.value,onChange:S=>m(_,"value",S.target.value)}),y.type==="const"&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-white cursor-pointer text-gray-900",value:y.value,onChange:S=>m(_,"value",S.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),o.map(S=>c.jsx("option",{value:S.id,children:S.name},S.id))]}),y.type==="ref"&&s&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-indigo-50 text-indigo-700 font-medium cursor-pointer",value:y.value,onChange:S=>m(_,"value",S.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),r.map(S=>c.jsx("option",{value:S.id,children:S.name||"simsiz Satr"},S.id))]})]},_)),c.jsx("button",{type:"button",onClick:p,className:"w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center hover:bg-indigo-100 hover:shadow-md transition-all z-10",children:c.jsx(Fn.Plus,{})})]})};function CC(){const[i,e]=de.useState(null),[s,r]=de.useState(!0),[o,h]=de.useState([]),[m,p]=de.useState([]),[v,y]=de.useState({TRY:1,USD:1,EUR:1}),[_,S]=de.useState(null),[R,q]=de.useState(!1),[ee,Q]=de.useState(!1),[Z,ce]=de.useState(null),[re,pe]=de.useState({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[ue,xe]=de.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});de.useEffect(()=>{const P=Qn.onAuthStateChanged(rt=>{e(rt),r(!1)}),X=$n(dt(Ve,"pricing_constants"),Xn("name","asc")),fe=cn(X,rt=>{h(rt.docs.map(qt=>({id:qt.id,...qt.data()})))}),Ee=$n(dt(Ve,"pricing_items"),Xn("updatedAt","desc")),Re=cn(Ee,rt=>{p(rt.docs.map(qt=>({id:qt.id,...qt.data()})))});return he(),()=>{P(),fe(),Re()}},[]);const he=async()=>{try{const X=await(await fetch(NC)).json();if(X&&X.conversion_rates){const fe=X.conversion_rates.TRY,Ee=X.conversion_rates.EUR,Re=fe/Ee;y({TRY:1,USD:fe,EUR:Re}),S(new Date().toLocaleTimeString())}}catch(P){console.error("Rate fetch error",P)}},j=(P,X)=>{if(!X||X==="None"||X==="TRY")return parseFloat(P)||0;const fe=v[X]||1;return parseFloat(P)*fe},w=(P,X)=>{if(X==="TRY")return P;const fe=v[X]||1;return P/fe},N=(P,X={})=>{if(P.type==="num")return parseFloat(P.value)||0;if(P.type==="const"){const fe=o.find(Ee=>Ee.id===P.value);return fe?j(fe.value,fe.currency):0}return P.type==="ref"&&X[P.value]||0},k=(P,X={})=>{if(!P||P.length===0)return 0;let fe=N(P[0],X);for(let Ee=1;Ee<P.length;Ee+=2){const Re=P[Ee].value,rt=N(P[Ee+1],X);switch(Re){case"+":fe+=rt;break;case"-":fe-=rt;break;case"*":fe*=rt;break;case"/":fe=rt!==0?fe/rt:0;break}}return fe},I=P=>{const X={};(P.rows||[]).forEach(Ee=>{X[Ee.id]=k(Ee.ops,X)});const fe=k(P.finalFormula?.ops,X);return w(fe,P.finalCurrency||"TRY")},M=P=>k(P,{}),E=de.useMemo(()=>I(ue),[ue,o,v]),le=de.useMemo(()=>M(re.ops),[re.ops,o,v]),oe=async P=>{P.preventDefault();const X=M(re.ops),fe={...re,value:X};Z?await br(Wt(Ve,"pricing_constants",Z),fe):await xi(dt(Ve,"pricing_constants"),fe),pe({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),ce(null),q(!1)},U=async P=>await fa(Wt(Ve,"pricing_constants",P)),W=()=>{const P="row_"+Date.now();xe({...ue,rows:[...ue.rows,{id:P,name:"",ops:[{type:"num",value:0}]}]})},V=P=>{const X=[...ue.rows];X.splice(P,1),xe({...ue,rows:X})},me=(P,X)=>{const fe=[...ue.rows];fe[P].name=X,xe({...ue,rows:fe})},Ae=(P,X)=>{const fe=[...ue.rows];fe[P].ops=X,xe({...ue,rows:fe})},C=async P=>{P.preventDefault();const X={...ue,updatedAt:new Date().toISOString()};Z?await br(Wt(Ve,"pricing_items",Z),X):await xi(dt(Ve,"pricing_items"),X),xe({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"}),ce(null),Q(!1)},z=P=>{const X={...P,rows:P.rows||[],finalFormula:P.finalFormula||{ops:[{type:"num",value:0}]},finalCurrency:P.finalCurrency||"TRY"};xe(X),ce(P.id),Q(!0)},ne=async P=>{window.confirm("Silmek istediinize emin misiniz?")&&await fa(Wt(Ve,"pricing_items",P))};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):i?.email==="furkan@avci.jp"?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8 gap-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white px-4 py-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-green-600",children:[v.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[v.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:he,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(Fn.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>{ce(null),pe({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),q(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl shadow-sm hover:bg-gray-50 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx(Fn.Variable,{})}),"Sabitler"]}),c.jsxs("button",{onClick:()=>{ce(null),xe({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),Q(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx(Fn.Calculator,{})}),"Fiyatlandrma"]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-1 space-y-6",children:c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6 h-[calc(100vh-200px)] flex flex-col",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center shrink-0",children:[c.jsx("span",{className:"bg-purple-100 p-1.5 rounded-lg mr-2",children:c.jsx(Fn.Variable,{})}),"Sabit Deerler"]}),c.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-grow",children:[o.map(P=>{const X=j(P.value,P.currency);return c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm border border-transparent hover:border-gray-100 transition-all group",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-700",children:P.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[P.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",P.currency!=="None"?P.currency:"",P.unit?c.jsxs("span",{className:"text-gray-300 mx-1",children:["/ ",P.unit]}):""]}),P.currency!=="TRY"&&P.currency!=="None"&&c.jsxs("p",{className:"text-[10px] text-emerald-600 font-medium mt-0.5",children:["~ ",X.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{pe({...P,ops:P.ops||[{type:"num",value:P.value}]}),ce(P.id),q(!0)},className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Fn.Edit,{})}),c.jsx("button",{onClick:()=>U(P.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx(Fn.Trash,{})})]})]},P.id)}),o.length===0&&c.jsx("div",{className:"text-center text-xs text-gray-400 italic py-4",children:"Sabit deer eklenmedi."})]})]})}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gncel Fiyatlar"}),c.jsxs("span",{className:"text-xs text-gray-400",children:["Son Gncelleme: ",_||"..."]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[calc(100vh-200px)] overflow-y-auto custom-scrollbar pr-2 pb-4",children:m.map(P=>{const X=I(P),fe=P.finalCurrency||"TRY",Ee=Math.random()>.5?"up":"down",Re=(Math.random()*5).toFixed(1);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 relative group hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-50 px-3 py-1 rounded-bl-2xl text-xs text-gray-400 border-b border-l border-gray-100",children:new Date(P.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:P.title}),c.jsx("p",{className:"text-xs text-gray-500 mb-4 uppercase tracking-wider",children:P.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-4",children:[c.jsx("div",{children:c.jsxs("span",{className:"text-3xl font-bold text-indigo-600",children:[X.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",fe]})}),c.jsx("div",{className:"flex flex-col items-end",children:c.jsxs("div",{className:`flex items-center text-xs font-bold ${Ee==="up"?"text-emerald-500":"text-red-500"}`,children:[Ee==="up"?c.jsx(Fn.TrendingUp,{}):c.jsx(Fn.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",Re]})]})})]}),c.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100",children:[c.jsx("button",{onClick:()=>z(P),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>ne(P.id),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors",children:"Sil"})]})]},P.id)})})]})]}),R&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full p-6 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Sabit Deer Ekle"}),c.jsxs("form",{onSubmit:oe,className:"space-y-6 overflow-y-auto custom-scrollbar px-1 pb-2",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad"}),c.jsx("input",{required:!0,placeholder:"rn: ilik Saat",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:re.name,onChange:P=>pe({...re,name:P.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Birim"}),c.jsx("input",{placeholder:"kg, m2...",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:re.unit,onChange:P=>pe({...re,unit:P.target.value})})]})]}),c.jsxs("div",{className:"bg-purple-50/50 p-5 rounded-xl border border-purple-100",children:[c.jsx("label",{className:"block text-xs font-bold text-purple-800 mb-3 uppercase",children:"Hesaplama Forml"}),c.jsx(dm,{ops:re.ops,onChange:P=>pe({...re,ops:P}),allowRefs:!1,constants:o})]}),c.jsxs("div",{className:"flex items-center justify-between bg-gray-900 text-white p-5 rounded-xl shadow-lg",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400 text-xs block",children:"Hesaplanan Deer"}),c.jsx("span",{className:"text-2xl font-bold",children:le.toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Para Birimi"}),c.jsxs("select",{className:"w-full bg-gray-800 border-none rounded-lg text-sm text-white font-bold focus:ring-1 focus:ring-purple-500 cursor-pointer",value:re.currency,onChange:P=>pe({...re,currency:P.target.value}),children:[c.jsx("option",{value:"None",children:"Say"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl text-sm font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl text-sm font-medium hover:bg-purple-700 shadow-lg shadow-purple-200 transition-all",children:"Kaydet"})]})]})]})}),ee&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Fiyatlandrma Oluturucu"}),c.jsx("button",{onClick:()=>Q(!1),className:"text-gray-400 hover:text-gray-600 text-3xl font-light leading-none",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar bg-slate-50",children:c.jsxs("form",{id:"pricingForm",onSubmit:C,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx("input",{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm focus:ring-indigo-500 focus:border-indigo-500",value:ue.title,onChange:P=>xe({...ue,title:P.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx("input",{placeholder:"adet, m3, kg...",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm",value:ue.unitType,onChange:P=>xe({...ue,unitType:P.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:W,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),ue.rows.map((P,X)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsxs("div",{className:"w-full xl:w-64 shrink-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Adm Ad"}),c.jsx("input",{placeholder:"rn: Ham Madde",className:"w-full text-sm font-medium bg-gray-50 border-transparent rounded-lg focus:bg-white focus:border-indigo-300 focus:ring-0 transition-all px-3 py-2",value:P.name,onChange:fe=>me(X,fe.target.value)})]}),c.jsxs("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Forml"}),c.jsx(dm,{ops:P.ops,onChange:fe=>Ae(X,fe),allowRefs:!0,rows:ue.rows.slice(0,X),constants:o})]}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:k(P.ops,I({...ue,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>V(X),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(Fn.Trash,{})})]})]},P.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx(Fn.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:ue.finalCurrency,onChange:P=>xe({...ue,finalCurrency:P.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(dm,{ops:ue.finalFormula.ops,onChange:P=>xe({...ue,finalFormula:{...ue.finalFormula,ops:P}}),allowRefs:!0,rows:ue.rows,constants:o})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right text-white",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[E.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:ue.finalCurrency})]})]})]})]})]})}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200 bg-gray-50 flex flex-row-reverse gap-3",children:[c.jsx("button",{onClick:C,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 hover:shadow-indigo-300 transition-all font-bold text-sm",children:"Kaydet"}),c.jsx("button",{onClick:()=>Q(!1),className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium text-sm",children:"ptal"})]})]})})]}):c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Fn.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]})}const Oo={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},il={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},Bx=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"];function RC(){const[i,e]=de.useState(null),[s,r]=de.useState(!0),[o,h]=de.useState([]),[m,p]=de.useState(new Date),[v,y]=de.useState(!1),[_,S]=de.useState(!1),[R,q]=de.useState(null),[ee,Q]=de.useState(new Date),[Z,ce]=de.useState(!1),[re,pe]=de.useState(null),[ue,xe]=de.useState({type:"work",overtime:0}),[he,j]=de.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});de.useEffect(()=>{const V=Qn.onAuthStateChanged(z=>{e(z),r(!1)}),me=$n(dt(Ve,"employees"),Xn("name","asc")),Ae=cn(me,z=>{h(z.docs.map(ne=>({id:ne.id,...ne.data()})))}),C=setInterval(()=>p(new Date),6e4);return()=>{V(),Ae(),clearInterval(C)}},[]);const w=V=>{const me=m.toISOString().split("T")[0],Ae=m.getDay(),C=m.getHours(),z=m.getMinutes(),ne=C*60+z,ae=V.attendance?.[me];if(ae){if(["paid_leave","unpaid_leave"].includes(ae.type))return il.LEAVE;if(ae.overtime>0)return il.OVERTIME}const[P,X]=V.startHour.split(":").map(Number),[fe,Ee]=V.endHour.split(":").map(Number),Re=P*60+X,rt=fe*60+Ee;return V.workDays.includes(Ae)?ne>=Re&&ne<rt?il.ONLINE:ne>=rt&&ae?.overtime>0?il.OVERTIME:il.OFFLINE:il.OFFLINE},N=V=>{if(!V.attendance)return{used:0,remaining:V.vacationTotal};let me=0;return Object.values(V.attendance).forEach(Ae=>{Ae.type==="paid_leave"&&me++}),{used:me,remaining:V.vacationTotal-me}},k=(V,me)=>{const Ae=me.getFullYear(),C=me.getMonth(),z=new Date(Ae,C+1,0).getDate();let ne=0,ae=0,P=0,X=0;for(let Fs=1;Fs<=z;Fs++){const ds=`${Ae}-${String(C+1).padStart(2,"0")}-${String(Fs).padStart(2,"0")}`,Er=new Date(ds).getDay(),jn=V.attendance?.[ds],mt=V.workDays.includes(Er);jn?(jn.type==="work"&&ne++,jn.type==="paid_leave"&&X++,jn.type==="unpaid_leave"&&P++,jn.overtime&&(ae+=parseFloat(jn.overtime))):mt&&ne++}const fe=parseFloat(V.salaryAmount),Ee=V.customDailyRate&&parseFloat(V.customDailyRate)>0?parseFloat(V.customDailyRate):fe/30,Re=V.customDeductionRate&&parseFloat(V.customDeductionRate)>0?parseFloat(V.customDeductionRate):Ee,rt=Ee/9,qt=V.customOvertimeMultiplier?parseFloat(V.customOvertimeMultiplier):1.5,Jt=ae*(rt*qt),Hs=P*Re,Rn=fe+Jt-Hs+parseFloat(V.insurance)+parseFloat(V.allowance);return{workedDays:ne,overtimeHours:ae,unpaidLeaveDays:P,paidLeaveDays:X,overtimePay:Jt,deduction:Hs,totalSalary:Rn,dailyRate:Ee,ovMultiplier:qt,deductionRate:Re}},I=()=>{S(!1),j({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),y(!0)},M=()=>{R&&(S(!0),j({name:R.name,role:R.role,salaryType:R.salaryType,salaryAmount:R.salaryAmount,insurance:R.insurance,allowance:R.allowance,vacationTotal:R.vacationTotal,workDays:R.workDays,startHour:R.startHour,endHour:R.endHour,customDailyRate:R.customDailyRate||"",customOvertimeMultiplier:R.customOvertimeMultiplier||"1.5",customDeductionRate:R.customDeductionRate||"",attendance:R.attendance||{}}),q(null),y(!0))},E=async V=>{V.preventDefault();try{const me={...he,updatedAt:new Date().toISOString()};_&&R?await br(Wt(Ve,"employees",R.id),me):await xi(dt(Ve,"employees"),{...me,createdAt:new Date().toISOString()}),y(!1)}catch(me){alert("Hata: "+me.message)}},le=async V=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await fa(Wt(Ve,"employees",V)),q(null))},oe=(V,me)=>{pe(V),xe({type:me?.type||"work",overtime:me?.overtime||0}),ce(!0)},U=async V=>{if(V.preventDefault(),!R||!re)return;const me={...R.attendance};me[re]={type:ue.type,overtime:parseFloat(ue.overtime)||0},await br(Wt(Ve,"employees",R.id),{attendance:me}),q({...R,attendance:me}),ce(!1)};if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Oo.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Yalnzca ynetici eriebilir."})]});const W=({employee:V,date:me,onDateClick:Ae})=>{const C=me.getFullYear(),z=me.getMonth(),ne=new Date(C,z+1,0).getDate(),ae=new Date(C,z,1).getDay(),P=[];for(let X=0;X<ae;X++)P.push(null);for(let X=1;X<=ne;X++)P.push(X);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:Bx.map((X,fe)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:X.slice(0,3)},fe))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:P.map((X,fe)=>{if(!X)return c.jsx("div",{},fe);const Ee=`${C}-${String(z+1).padStart(2,"0")}-${String(X).padStart(2,"0")}`,Re=V.attendance?.[Ee],rt=new Date(Ee).getDay(),qt=V.workDays.includes(rt);let Jt="bg-gray-50 text-gray-400 border-gray-100";return qt&&(Jt="bg-white border-emerald-200 text-gray-700 shadow-sm"),Re&&(Re.type==="paid_leave"&&(Jt="bg-yellow-50 border-yellow-200 text-yellow-700"),Re.type==="unpaid_leave"&&(Jt="bg-red-50 border-red-200 text-red-700"),Re.type==="work"&&Re.overtime>0&&(Jt="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),Re.type==="off"&&(Jt="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>Ae(Ee,Re),className:`
                  h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative
                  ${Jt}
                `,children:[c.jsx("span",{className:"text-sm",children:X}),Re?.overtime>0&&c.jsxs("span",{className:"text-[10px] absolute bottom-1 bg-purple-500 text-white px-1.5 rounded-full font-bold",children:["+",Re.overtime,"s"]})]},fe)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex justify-between items-center mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Personel Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"alan takibi, bordro ve izin ynetimi"})]}),c.jsxs("button",{onClick:I,className:"flex items-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-medium",children:[c.jsx(Oo.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(V=>{const me=w(V),Ae=N(V);return c.jsxs("div",{onClick:()=>q(V),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${me.color} ${me.ring} ring-offset-2 ring-2`,children:me.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(Oo.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:V.name}),c.jsx("p",{className:"text-sm text-gray-500",children:V.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"alma Saatleri"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[V.startHour," - ",V.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin Hakk"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[Ae.remaining," / ",V.vacationTotal," Gn"]})]})]})]},V.id)})}),R&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:R.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:R.name}),c.jsxs("p",{className:"text-gray-500 text-sm",children:[R.role,"  ",R.salaryType==="monthly"?"Aylk Maa":"Saatlik"]})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:M,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(Oo.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>le(R.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(Oo.Trash,{})}),c.jsx("button",{onClick:()=>q(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",ee.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const V=k(R,ee);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsxs("span",{className:"text-2xl font-bold text-indigo-600",children:[V.totalSalary.toLocaleString("tr-TR",{minimumFractionDigits:2})," "]})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-500",children:"plak Maa"}),c.jsxs("span",{children:[Number(R.salaryAmount).toLocaleString()," "]})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Fazla Mesai (",V.overtimeHours,"s)"]}),c.jsxs("span",{children:["+",V.overtimePay.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesintiler (",V.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",V.deduction.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",Number(R.insurance)+Number(R.allowance)," "]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-xs text-gray-400 block mb-1",children:"allan Gn"}),c.jsx("span",{className:"text-xl font-bold text-gray-800",children:V.workedDays})]}),c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-xs text-gray-400 block mb-1",children:"zin (cretli)"}),c.jsx("span",{className:"text-xl font-bold text-yellow-600",children:V.paidLeaveDays})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:[c.jsx("div",{className:"mb-1",children:"Hesaplama Detaylar:"})," Gnlk Maliyet: ",c.jsxs("strong",{children:[V.dailyRate.toFixed(2)," "]}),c.jsx("br",{})," Kesinti creti: ",c.jsxs("strong",{children:[V.deductionRate.toFixed(2)," "]}),c.jsx("br",{})," Mesai arpan: ",c.jsxs("strong",{children:[V.ovMultiplier,"x"]})]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>Q(new Date(ee.setMonth(ee.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:c.jsx("span",{className:"text-xl",children:""})}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:ee.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>Q(new Date(ee.setMonth(ee.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:c.jsx("span",{className:"text-xl",children:""})})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(W,{employee:R,date:ee,onDateClick:oe}),c.jsx("p",{className:"mt-4 text-xs text-gray-400 text-center",children:"* Gn zerine tklayarak durumu deitirebilir veya mesai ekleyebilirsiniz."})]})]})]})}),v&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:E,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:he.name,onChange:V=>j({...he,name:V.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:he.role,onChange:V=>j({...he,role:V.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2",value:he.salaryType,onChange:V=>j({...he,salaryType:V.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2",value:he.salaryAmount,onChange:V=>j({...he,salaryAmount:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2",value:he.insurance,onChange:V=>j({...he,insurance:V.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2",value:he.allowance,onChange:V=>j({...he,allowance:V.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2",value:he.customDailyRate,onChange:V=>j({...he,customDailyRate:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2",value:he.customOvertimeMultiplier,onChange:V=>j({...he,customOvertimeMultiplier:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2",value:he.customDeductionRate,onChange:V=>j({...he,customDeductionRate:V.target.value})})]})]}),c.jsx("p",{className:"text-xs text-gray-400 italic",children:"* Bo braklrsa varsaylan formller (Maa/30 vb.) kullanlr."})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:he.vacationTotal,onChange:V=>j({...he,vacationTotal:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:he.startHour,onChange:V=>j({...he,startHour:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:he.endHour,onChange:V=>j({...he,endHour:V.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:Bx.map((V,me)=>c.jsx("button",{type:"button",onClick:()=>{const Ae=he.workDays.includes(me)?he.workDays.filter(C=>C!==me):[...he.workDays,me];j({...he,workDays:Ae})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${he.workDays.includes(me)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:V.slice(0,3)},V))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),Z&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:re}),c.jsxs("form",{onSubmit:U,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(V=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:V.id,checked:ue.type===V.id,onChange:me=>xe({...ue,type:me.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:V.label})]},V.id))})]}),ue.type==="work"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Fazla Mesai (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-gray-300 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-purple-500",value:ue.overtime,onChange:V=>xe({...ue,overtime:V.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>ce(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function jC(){const[i,e]=de.useState(null),[s,r]=de.useState(!0),[o,h]=de.useState("dashboard");de.useEffect(()=>{const _=zE(Qn,S=>{e(S),r(!1)});return()=>_()},[]);const m=async()=>{try{await BE(Qn)}catch(_){console.error("k yaplrken hata:",_)}},p={Home:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Teklif:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6M7 20h10a2 2 0 002-2V6a2 2 0 00-2-2H9l-4 4v10a2 2 0 002 2z"})}),Fiyatlandirma:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 7h.01M3 11l9 9 9-9-9-9-9 9zm14 0h.01"})}),Calisan:()=>c.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-1a6 6 0 00-10-4.472M9 11a4 4 0 110-8 4 4 0 010 8zm0 0a6 6 0 016 6v2H3v-2a6 6 0 016-6zM17 11a3 3 0 100-6 3 3 0 000 6z"})})},v=[{id:"dashboard",label:"Dashboard",icon:p.Home},{id:"musteriler",label:"Mteriler",icon:p.Users},{id:"urunler",label:"rnler",icon:p.Box},{id:"stok",label:"Stok Durumu",icon:p.Chart},{id:"siparis",label:"Sipari Formu",icon:p.Cart},{id:"teklif",label:"Teklif Formu",icon:p.Teklif},{id:"fiyatlandirma",label:"Fiyatlandirma",icon:p.Fiyatlandirma},{id:"calisan",label:"Calisan Yonetimi",icon:p.Calisan}],y=()=>{switch(o){case"dashboard":return c.jsx(Ux,{});case"musteriler":return c.jsx(vC,{});case"urunler":return c.jsx(_C,{});case"stok":return c.jsx(EC,{});case"siparis":return c.jsx(xC,{});case"teklif":return c.jsx(SC,{});case"fiyatlandirma":return c.jsx(CC,{});case"calisan":return c.jsx(RC,{});default:return c.jsx(Ux,{})}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i?c.jsxs("div",{className:"flex min-h-screen bg-gray-100 font-sans",children:[c.jsxs("div",{className:"w-64 bg-slate-900 text-white flex flex-col fixed h-full shadow-xl z-10 overflow-y-auto",children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("h1",{className:"text-2xl font-bold tracking-wider text-indigo-400",children:["Ercelebiler",c.jsx("span",{className:"text-white",children:"Ahsap"})]}),c.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Hojgeledin Ortaq"})]}),c.jsx("div",{className:"px-6 pb-6 mb-2 border-b border-gray-700",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-sm font-bold uppercase",children:i.email?i.email[0]:"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-sm font-medium truncate w-32",children:i.email}),c.jsx("p",{className:"text-xs text-green-400",children:"evrimii"})]})]})}),c.jsx("nav",{className:"flex-1 px-4 space-y-2 mt-4",children:v.map(_=>c.jsxs("button",{onClick:()=>h(_.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors duration-150 ease-in-out
                ${o===_.id?"bg-indigo-600 text-white shadow-lg":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[c.jsx(_.icon,{}),_.label]},_.id))}),c.jsx("div",{className:"p-4 border-t border-gray-700 mt-auto",children:c.jsxs("button",{onClick:m,className:"w-full flex items-center px-4 py-3 text-sm font-medium text-red-400 rounded-lg hover:bg-slate-800 hover:text-red-300 transition-colors",children:[c.jsx(p.Logout,{}),"k Yap"]})})]}),c.jsxs("div",{className:"flex-1 ml-64 p-8",children:[c.jsxs("header",{className:"mb-8 flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-semibold text-gray-800 capitalize border-l-4 border-indigo-600 pl-4",children:v.find(_=>_.id===o)?.label}),c.jsx("div",{className:"text-sm text-gray-500 hidden sm:block",children:new Date().toLocaleDateString("tr-TR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),c.jsx("main",{className:"bg-white shadow-sm rounded-xl min-h-[80vh] p-6 border border-gray-200",children:y()})]})]}):c.jsx(pC,{})}Z2.createRoot(document.getElementById("root")).render(c.jsx(de.StrictMode,{children:c.jsx(jC,{})}));
