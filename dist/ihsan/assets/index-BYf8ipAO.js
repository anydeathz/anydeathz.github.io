(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();var Jf={exports:{}},Uo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function rw(){if(cx)return Uo;cx=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(i,o,d){var f=null;if(d!==void 0&&(f=""+d),o.key!==void 0&&(f=""+o.key),"key"in o){d={};for(var p in o)p!=="key"&&(d[p]=o[p])}else d=o;return o=d.ref,{$$typeof:r,type:i,key:f,ref:o!==void 0?o:null,props:d}}return Uo.Fragment=e,Uo.jsx=s,Uo.jsxs=s,Uo}var ux;function iw(){return ux||(ux=1,Jf.exports=rw()),Jf.exports}var c=iw(),em={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx;function aw(){if(dx)return Pe;dx=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),N=Symbol.iterator;function U(M){return M===null||typeof M!="object"?null:(M=N&&M[N]||M["@@iterator"],typeof M=="function"?M:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,G={};function he(M,J,fe){this.props=M,this.context=J,this.refs=G,this.updater=fe||X}he.prototype.isReactComponent={},he.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},he.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function oe(){}oe.prototype=he.prototype;function me(M,J,fe){this.props=M,this.context=J,this.refs=G,this.updater=fe||X}var xe=me.prototype=new oe;xe.constructor=me,Y(xe,he.prototype),xe.isPureReactComponent=!0;var Te=Array.isArray;function ye(){}var I={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function A(M,J,fe){var L=fe.ref;return{$$typeof:r,type:M,key:J,ref:L!==void 0?L:null,props:fe}}function R(M,J){return A(M.type,J,M.props)}function C(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function D(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return J[fe]})}var j=/\/+/g;function _e(M,J){return typeof M=="object"&&M!==null&&M.key!=null?D(""+M.key):J.toString(36)}function Ve(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ye,ye):(M.status="pending",M.then(function(J){M.status==="pending"&&(M.status="fulfilled",M.value=J)},function(J){M.status==="pending"&&(M.status="rejected",M.reason=J)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Q(M,J,fe,L,V){var te=typeof M;(te==="undefined"||te==="boolean")&&(M=null);var ce=!1;if(M===null)ce=!0;else switch(te){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(M.$$typeof){case r:case e:ce=!0;break;case _:return ce=M._init,Q(ce(M._payload),J,fe,L,V)}}if(ce)return V=V(M),ce=L===""?"."+_e(M,0):L,Te(V)?(fe="",ce!=null&&(fe=ce.replace(j,"$&/")+"/"),Q(V,J,fe,"",function(Z){return Z})):V!=null&&(C(V)&&(V=R(V,fe+(V.key==null||M&&M.key===V.key?"":(""+V.key).replace(j,"$&/")+"/")+ce)),J.push(V)),1;ce=0;var Ce=L===""?".":L+":";if(Te(M))for(var De=0;De<M.length;De++)L=M[De],te=Ce+_e(L,De),ce+=Q(L,J,fe,te,V);else if(De=U(M),typeof De=="function")for(M=De.call(M),De=0;!(L=M.next()).done;)L=L.value,te=Ce+_e(L,De++),ce+=Q(L,J,fe,te,V);else if(te==="object"){if(typeof M.then=="function")return Q(Ve(M),J,fe,L,V);throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ce}function de(M,J,fe){if(M==null)return M;var L=[],V=0;return Q(M,L,"","",function(te){return J.call(fe,te,V++)}),L}function Ne(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ge={map:de,forEach:function(M,J,fe){de(M,function(){J.apply(this,arguments)},fe)},count:function(M){var J=0;return de(M,function(){J++}),J},toArray:function(M){return de(M,function(J){return J})||[]},only:function(M){if(!C(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Pe.Activity=T,Pe.Children=Ge,Pe.Component=he,Pe.Fragment=s,Pe.Profiler=o,Pe.PureComponent=me,Pe.StrictMode=i,Pe.Suspense=x,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return I.H.useMemoCache(M)}},Pe.cache=function(M){return function(){return M.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(M,J,fe){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var L=Y({},M.props),V=M.key;if(J!=null)for(te in J.key!==void 0&&(V=""+J.key),J)!w.call(J,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&J.ref===void 0||(L[te]=J[te]);var te=arguments.length-2;if(te===1)L.children=fe;else if(1<te){for(var ce=Array(te),Ce=0;Ce<te;Ce++)ce[Ce]=arguments[Ce+2];L.children=ce}return A(M.type,V,L)},Pe.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:d,_context:M},M},Pe.createElement=function(M,J,fe){var L,V={},te=null;if(J!=null)for(L in J.key!==void 0&&(te=""+J.key),J)w.call(J,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(V[L]=J[L]);var ce=arguments.length-2;if(ce===1)V.children=fe;else if(1<ce){for(var Ce=Array(ce),De=0;De<ce;De++)Ce[De]=arguments[De+2];V.children=Ce}if(M&&M.defaultProps)for(L in ce=M.defaultProps,ce)V[L]===void 0&&(V[L]=ce[L]);return A(M,te,V)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(M){return{$$typeof:p,render:M}},Pe.isValidElement=C,Pe.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:Ne}},Pe.memo=function(M,J){return{$$typeof:y,type:M,compare:J===void 0?null:J}},Pe.startTransition=function(M){var J=I.T,fe={};I.T=fe;try{var L=M(),V=I.S;V!==null&&V(fe,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(ye,qe)}catch(te){qe(te)}finally{J!==null&&fe.types!==null&&(J.types=fe.types),I.T=J}},Pe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Pe.use=function(M){return I.H.use(M)},Pe.useActionState=function(M,J,fe){return I.H.useActionState(M,J,fe)},Pe.useCallback=function(M,J){return I.H.useCallback(M,J)},Pe.useContext=function(M){return I.H.useContext(M)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(M,J){return I.H.useDeferredValue(M,J)},Pe.useEffect=function(M,J){return I.H.useEffect(M,J)},Pe.useEffectEvent=function(M){return I.H.useEffectEvent(M)},Pe.useId=function(){return I.H.useId()},Pe.useImperativeHandle=function(M,J,fe){return I.H.useImperativeHandle(M,J,fe)},Pe.useInsertionEffect=function(M,J){return I.H.useInsertionEffect(M,J)},Pe.useLayoutEffect=function(M,J){return I.H.useLayoutEffect(M,J)},Pe.useMemo=function(M,J){return I.H.useMemo(M,J)},Pe.useOptimistic=function(M,J){return I.H.useOptimistic(M,J)},Pe.useReducer=function(M,J,fe){return I.H.useReducer(M,J,fe)},Pe.useRef=function(M){return I.H.useRef(M)},Pe.useState=function(M){return I.H.useState(M)},Pe.useSyncExternalStore=function(M,J,fe){return I.H.useSyncExternalStore(M,J,fe)},Pe.useTransition=function(){return I.H.useTransition()},Pe.version="19.2.0",Pe}var hx;function Xm(){return hx||(hx=1,em.exports=aw()),em.exports}var re=Xm(),tm={exports:{}},zo={},nm={exports:{}},sm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fx;function lw(){return fx||(fx=1,(function(r){function e(Q,de){var Ne=Q.length;Q.push(de);e:for(;0<Ne;){var qe=Ne-1>>>1,Ge=Q[qe];if(0<o(Ge,de))Q[qe]=de,Q[Ne]=Ge,Ne=qe;else break e}}function s(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var de=Q[0],Ne=Q.pop();if(Ne!==de){Q[0]=Ne;e:for(var qe=0,Ge=Q.length,M=Ge>>>1;qe<M;){var J=2*(qe+1)-1,fe=Q[J],L=J+1,V=Q[L];if(0>o(fe,Ne))L<Ge&&0>o(V,fe)?(Q[qe]=V,Q[L]=Ne,qe=L):(Q[qe]=fe,Q[J]=Ne,qe=J);else if(L<Ge&&0>o(V,Ne))Q[qe]=V,Q[L]=Ne,qe=L;else break e}}return de}function o(Q,de){var Ne=Q.sortIndex-de.sortIndex;return Ne!==0?Ne:Q.id-de.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var x=[],y=[],_=1,T=null,N=3,U=!1,X=!1,Y=!1,G=!1,he=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function xe(Q){for(var de=s(y);de!==null;){if(de.callback===null)i(y);else if(de.startTime<=Q)i(y),de.sortIndex=de.expirationTime,e(x,de);else break;de=s(y)}}function Te(Q){if(Y=!1,xe(Q),!X)if(s(x)!==null)X=!0,ye||(ye=!0,D());else{var de=s(y);de!==null&&Ve(Te,de.startTime-Q)}}var ye=!1,I=-1,w=5,A=-1;function R(){return G?!0:!(r.unstable_now()-A<w)}function C(){if(G=!1,ye){var Q=r.unstable_now();A=Q;var de=!0;try{e:{X=!1,Y&&(Y=!1,oe(I),I=-1),U=!0;var Ne=N;try{t:{for(xe(Q),T=s(x);T!==null&&!(T.expirationTime>Q&&R());){var qe=T.callback;if(typeof qe=="function"){T.callback=null,N=T.priorityLevel;var Ge=qe(T.expirationTime<=Q);if(Q=r.unstable_now(),typeof Ge=="function"){T.callback=Ge,xe(Q),de=!0;break t}T===s(x)&&i(x),xe(Q)}else i(x);T=s(x)}if(T!==null)de=!0;else{var M=s(y);M!==null&&Ve(Te,M.startTime-Q),de=!1}}break e}finally{T=null,N=Ne,U=!1}de=void 0}}finally{de?D():ye=!1}}}var D;if(typeof me=="function")D=function(){me(C)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,_e=j.port2;j.port1.onmessage=C,D=function(){_e.postMessage(null)}}else D=function(){he(C,0)};function Ve(Q,de){I=he(function(){Q(r.unstable_now())},de)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(Q){switch(N){case 1:case 2:case 3:var de=3;break;default:de=N}var Ne=N;N=de;try{return Q()}finally{N=Ne}},r.unstable_requestPaint=function(){G=!0},r.unstable_runWithPriority=function(Q,de){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Ne=N;N=Q;try{return de()}finally{N=Ne}},r.unstable_scheduleCallback=function(Q,de,Ne){var qe=r.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?qe+Ne:qe):Ne=qe,Q){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=Ne+Ge,Q={id:_++,callback:de,priorityLevel:Q,startTime:Ne,expirationTime:Ge,sortIndex:-1},Ne>qe?(Q.sortIndex=Ne,e(y,Q),s(x)===null&&Q===s(y)&&(Y?(oe(I),I=-1):Y=!0,Ve(Te,Ne-qe))):(Q.sortIndex=Ge,e(x,Q),X||U||(X=!0,ye||(ye=!0,D()))),Q},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(Q){var de=N;return function(){var Ne=N;N=de;try{return Q.apply(this,arguments)}finally{N=Ne}}}})(sm)),sm}var mx;function ow(){return mx||(mx=1,nm.exports=lw()),nm.exports}var rm={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx;function cw(){if(gx)return on;gx=1;var r=Xm();function e(x){var y="https://react.dev/errors/"+x;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+x+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(x,y,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:x,containerInfo:y,implementation:_}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(x,y){if(x==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(x,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return d(x,y,null,_)},on.flushSync=function(x){var y=f.T,_=i.p;try{if(f.T=null,i.p=2,x)return x()}finally{f.T=y,i.p=_,i.d.f()}},on.preconnect=function(x,y){typeof x=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(x,y))},on.prefetchDNS=function(x){typeof x=="string"&&i.d.D(x)},on.preinit=function(x,y){if(typeof x=="string"&&y&&typeof y.as=="string"){var _=y.as,T=p(_,y.crossOrigin),N=typeof y.integrity=="string"?y.integrity:void 0,U=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?i.d.S(x,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:N,fetchPriority:U}):_==="script"&&i.d.X(x,{crossOrigin:T,integrity:N,fetchPriority:U,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},on.preinitModule=function(x,y){if(typeof x=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=p(y.as,y.crossOrigin);i.d.M(x,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(x)},on.preload=function(x,y){if(typeof x=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,T=p(_,y.crossOrigin);i.d.L(x,_,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},on.preloadModule=function(x,y){if(typeof x=="string")if(y){var _=p(y.as,y.crossOrigin);i.d.m(x,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(x)},on.requestFormReset=function(x){i.d.r(x)},on.unstable_batchedUpdates=function(x,y){return x(y)},on.useFormState=function(x,y,_){return f.H.useFormState(x,y,_)},on.useFormStatus=function(){return f.H.useHostTransitionStatus()},on.version="19.2.0",on}var px;function uw(){if(px)return rm.exports;px=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rm.exports=cw(),rm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function dw(){if(yx)return zo;yx=1;var r=ow(),e=Xm(),s=uw();function i(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function x(t){if(d(t)!==t)throw Error(i(188))}function y(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(i(188));return n!==t?null:t}for(var a=t,l=n;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return x(h),t;if(m===l)return x(h),n;m=m.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=m;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,l=m;break}if(E===l){v=!0,l=h,a=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===a){v=!0,a=m,l=h;break}if(E===l){v=!0,l=m,a=h;break}E=E.sibling}if(!v)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var T=Object.assign,N=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),oe=Symbol.for("react.consumer"),me=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function D(t){return t===null||typeof t!="object"?null:(t=C&&t[C]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function _e(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Y:return"Fragment";case he:return"Profiler";case G:return"StrictMode";case Te:return"Suspense";case ye:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case X:return"Portal";case me:return t.displayName||"Context";case oe:return(t._context.displayName||"Context")+".Consumer";case xe:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return n=t.displayName||null,n!==null?n:_e(t.type)||"Memo";case w:n=t._payload,t=t._init;try{return _e(t(n))}catch{}}return null}var Ve=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},qe=[],Ge=-1;function M(t){return{current:t}}function J(t){0>Ge||(t.current=qe[Ge],qe[Ge]=null,Ge--)}function fe(t,n){Ge++,qe[Ge]=t.current,t.current=n}var L=M(null),V=M(null),te=M(null),ce=M(null);function Ce(t,n){switch(fe(te,n),fe(V,t),fe(L,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?ky(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=ky(n),t=Dy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(L),fe(L,t)}function De(){J(L),J(V),J(te)}function Z(t){t.memoizedState!==null&&fe(ce,t);var n=L.current,a=Dy(n,t.type);n!==a&&(fe(V,t),fe(L,a))}function we(t){V.current===t&&(J(L),J(V)),ce.current===t&&(J(ce),Oo._currentValue=Ne)}var ue,q;function ie(t){if(ue===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ue=n&&n[1]||"",q=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+t+q}var ae=!1;function be(t,n){if(!t||ae)return"";ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch($){var F=$}Reflect.construct(t,[],se)}else{try{se.call()}catch($){F=$}t.call(se.prototype)}}else{try{throw Error()}catch($){F=$}(se=t())&&typeof se.catch=="function"&&se.catch(function(){})}}catch($){if($&&F&&typeof $.stack=="string")return[$.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var k=v.split(`
`),H=E.split(`
`);for(h=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(l===k.length||h===H.length)for(l=k.length-1,h=H.length-1;1<=l&&0<=h&&k[l]!==H[h];)h--;for(;1<=l&&0<=h;l--,h--)if(k[l]!==H[h]){if(l!==1||h!==1)do if(l--,h--,0>h||k[l]!==H[h]){var W=`
`+k[l].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=l&&0<=h);break}}}finally{ae=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ie(a):""}function ge(t,n){switch(t.tag){case 26:case 27:case 5:return ie(t.type);case 16:return ie("Lazy");case 13:return t.child!==n&&n!==null?ie("Suspense Fallback"):ie("Suspense");case 19:return ie("SuspenseList");case 0:case 15:return be(t.type,!1);case 11:return be(t.type.render,!1);case 1:return be(t.type,!0);case 31:return ie("Activity");default:return""}}function je(t){try{var n="",a=null;do n+=ge(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ye=Object.prototype.hasOwnProperty,gt=r.unstable_scheduleCallback,fn=r.unstable_cancelCallback,Pl=r.unstable_shouldYield,Oi=r.unstable_requestPaint,Kt=r.unstable_now,er=r.unstable_getCurrentPriorityLevel,tr=r.unstable_ImmediatePriority,Dr=r.unstable_UserBlockingPriority,Es=r.unstable_NormalPriority,zn=r.unstable_LowPriority,Sa=r.unstable_IdlePriority,Tc=r.log,Sc=r.unstable_setDisableYieldValue,is=null,Zt=null;function Bn(t){if(typeof Tc=="function"&&Sc(t),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(is,t)}catch{}}var Nt=Math.clz32?Math.clz32:Ac,Nc=Math.log,Na=Math.LN2;function Ac(t){return t>>>=0,t===0?32:31-(Nc(t)/Na|0)|0}var Ts=256,Vi=262144,Dt=4194304;function Ss(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ns(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~m,l!==0?h=Ss(l):(v&=E,v!==0?h=Ss(v):a||(a=E&~t,a!==0&&(h=Ss(a))))):(E=l&~m,E!==0?h=Ss(E):v!==0?h=Ss(v):a||(a=l&~t,a!==0&&(h=Ss(a)))),h===0?0:n!==0&&n!==h&&(n&m)===0&&(m=h&-h,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:h}function as(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function nh(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jc(){var t=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),t}function As(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function Li(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function sh(t,n,a,l,h,m){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,k=t.expirationTimes,H=t.hiddenUpdates;for(a=v&~a;0<a;){var W=31-Nt(a),se=1<<W;E[W]=0,k[W]=-1;var F=H[W];if(F!==null)for(H[W]=null,W=0;W<F.length;W++){var $=F[W];$!==null&&($.lane&=-536870913)}a&=~se}l!==0&&Pi(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~n))}function Pi(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-Nt(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ul(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-Nt(a),h=1<<l;h&n|t[l]&n&&(t[l]|=n),a&=~h}}function zl(t,n){var a=n&-n;return a=(a&42)!==0?1:Ui(a),(a&(t.suspendedLanes|n))!==0?0:a}function Ui(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function nr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Cc(){var t=de.p;return t!==0?t:(t=window.event,t===void 0?32:nx(t.type))}function ls(t,n){var a=de.p;try{return de.p=t,n()}finally{de.p=a}}var os=Math.random().toString(36).slice(2),Mt="__reactFiber$"+os,Qt="__reactProps$"+os,js="__reactContainer$"+os,Aa="__reactEvents$"+os,rh="__reactListeners$"+os,Rc="__reactHandles$"+os,Ic="__reactResources$"+os,Cs="__reactMarker$"+os;function ja(t){delete t[Mt],delete t[Qt],delete t[Aa],delete t[rh],delete t[Rc]}function Rs(t){var n=t[Mt];if(n)return n;for(var a=t.parentNode;a;){if(n=a[js]||a[Mt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=zy(t);t!==null;){if(a=t[Mt])return a;t=zy(t)}return n}t=a,a=t.parentNode}return null}function Hn(t){if(t=t[Mt]||t[js]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function jn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(i(33))}function Is(t){var n=t[Ic];return n||(n=t[Ic]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ot(t){t[Cs]=!0}var Bl=new Set,Hl={};function ks(t,n){Ds(t,n),Ds(t+"Capture",n)}function Ds(t,n){for(Hl[t]=n,t=0;t<n.length;t++)Bl.add(n[t])}var ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fl={},Gl={};function kc(t){return Ye.call(Gl,t)?!0:Ye.call(Fl,t)?!1:ql.test(t)?Gl[t]=!0:(Fl[t]=!0,!1)}function Ca(t,n,a){if(kc(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Cn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Vt(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function $t(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mr(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Yl(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,m.call(this,v)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function lt(t){if(!t._valueTracker){var n=Mr(t)?"checked":"value";t._valueTracker=Yl(t,n,""+t[n])}}function zi(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Mr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Ms(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Bi=/[\n"\\]/g;function yn(t){return t.replace(Bi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ra(t,n,a,l,h,m,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),n!=null?v==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+$t(n)):t.value!==""+$t(n)&&(t.value=""+$t(n)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),n!=null?Kl(t,v,$t(n)):a!=null?Kl(t,v,$t(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+$t(E):t.removeAttribute("name")}function Dc(t,n,a,l,h,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){lt(t);return}a=a!=null?""+$t(a):"",n=n!=null?""+$t(n):a,E||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),lt(t)}function Kl(t,n,a){n==="number"&&Ms(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Or(t,n,a,l){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+$t(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Mc(t,n,a){if(n!=null&&(n=""+$t(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+$t(a):""}function Vr(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(i(92));if(Ve(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=$t(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),lt(t)}function xn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||Oc.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function $l(t,n,a){if(n!=null&&typeof n!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&Ql(t,h,l)}else for(var m in n)n.hasOwnProperty(m)&&Ql(t,m,n[m])}function Ia(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ka(t){return Lr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function cs(){}var Xl=null;function qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pr=null,Os=null;function Hi(t){var n=Hn(t);if(n&&(t=n.stateNode)){var a=t[Qt]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ra(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var h=l[Qt]||null;if(!h)throw Error(i(90));Ra(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&zi(l)}break e;case"textarea":Mc(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Or(t,!!a.multiple,n,!1)}}}var Da=!1;function Ur(t,n,a){if(Da)return t(n,a);Da=!0;try{var l=t(n);return l}finally{if(Da=!1,(Pr!==null||Os!==null)&&(Cu(),Pr&&(n=Pr,t=Os,Os=Pr=null,Hi(n),t)))for(n=0;n<t.length;n++)Hi(t[n])}}function us(t,n){var a=t.stateNode;if(a===null)return null;var l=a[Qt]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,n,typeof a));return a}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qi=!1;if(Fn)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){qi=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{qi=!1}var Vs=null,Wl=null,Fi=null;function Zl(){if(Fi)return Fi;var t,n=Wl,a=n.length,l,h="value"in Vs?Vs.value:Vs.textContent,m=h.length;for(t=0;t<a&&n[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&n[a-l]===h[m-l];l++);return Fi=h.slice(t,1<l?1-l:void 0)}function Gi(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function sr(){return!0}function ds(){return!1}function Jt(t){function n(a,l,h,m,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?sr:ds,this.isPropagationStopped=ds,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),n}var rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ls=Jt(rr),zr=T({},rr,{view:0,detail:0}),Jl=Jt(zr),Br,Ma,Ps,Oa=T({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ps&&(Ps&&t.type==="mousemove"?(Br=t.screenX-Ps.screenX,Ma=t.screenY-Ps.screenY):Ma=Br=0,Ps=t),Br)},movementY:function(t){return"movementY"in t?t.movementY:Ma}}),eo=Jt(Oa),Yi=T({},Oa,{dataTransfer:0}),Lc=Jt(Yi),Pc=T({},zr,{relatedTarget:0}),Ki=Jt(Pc),to=T({},rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Uc=Jt(to),Va=T({},rr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zc=Jt(Va),Bc=T({},rr,{data:0}),Us=Jt(Bc),Hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Fc[t])?!!n[t]:!1}function Hr(){return Gc}var mn=T({},zr,{key:function(t){if(t.key){var n=Hc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Gi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hr,charCode:function(t){return t.type==="keypress"?Gi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yc=Jt(mn),Kc=T({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ir=Jt(Kc),u=T({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hr}),g=Jt(u),b=T({},rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Jt(b),z=T({},Oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Jt(z),pe=T({},rr,{newState:0,oldState:0}),Be=Jt(pe),At=[9,13,27,32],rt=Fn&&"CompositionEvent"in window,bt=null;Fn&&"documentMode"in document&&(bt=document.documentMode);var Gn=Fn&&"TextEvent"in window&&!bt,zs=Fn&&(!rt||bt&&8<bt&&11>=bt),hs=" ",fs=!1;function Qi(t,n){switch(t){case"keyup":return At.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function La(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pa=!1;function j1(t,n){switch(t){case"compositionend":return La(n);case"keypress":return n.which!==32?null:(fs=!0,hs);case"textInput":return t=n.data,t===hs&&fs?null:t;default:return null}}function C1(t,n){if(Pa)return t==="compositionend"||!rt&&Qi(t,n)?(t=Zl(),Fi=Wl=Vs=null,Pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return zs&&n.locale!=="ko"?null:n.data;default:return null}}var R1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!R1[t.type]:n==="textarea"}function Fg(t,n,a,l){Pr?Os?Os.push(l):Os=[l]:Pr=l,n=Vu(n,"onChange"),0<n.length&&(a=new Ls("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var no=null,so=null;function I1(t){Ny(t,0)}function Qc(t){var n=jn(t);if(zi(n))return t}function Gg(t,n){if(t==="change")return n}var Yg=!1;if(Fn){var ih;if(Fn){var ah="oninput"in document;if(!ah){var Kg=document.createElement("div");Kg.setAttribute("oninput","return;"),ah=typeof Kg.oninput=="function"}ih=ah}else ih=!1;Yg=ih&&(!document.documentMode||9<document.documentMode)}function Qg(){no&&(no.detachEvent("onpropertychange",$g),so=no=null)}function $g(t){if(t.propertyName==="value"&&Qc(so)){var n=[];Fg(n,so,t,qn(t)),Ur(I1,n)}}function k1(t,n,a){t==="focusin"?(Qg(),no=n,so=a,no.attachEvent("onpropertychange",$g)):t==="focusout"&&Qg()}function D1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qc(so)}function M1(t,n){if(t==="click")return Qc(n)}function O1(t,n){if(t==="input"||t==="change")return Qc(n)}function V1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Rn=typeof Object.is=="function"?Object.is:V1;function ro(t,n){if(Rn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Ye.call(n,h)||!Rn(t[h],n[h]))return!1}return!0}function Xg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wg(t,n){var a=Xg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xg(a)}}function Zg(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Zg(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Jg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ms(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Ms(t.document)}return n}function lh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var L1=Fn&&"documentMode"in document&&11>=document.documentMode,Ua=null,oh=null,io=null,ch=!1;function ep(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ch||Ua==null||Ua!==Ms(l)||(l=Ua,"selectionStart"in l&&lh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),io&&ro(io,l)||(io=l,l=Vu(oh,"onSelect"),0<l.length&&(n=new Ls("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=Ua)))}function $i(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var za={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionrun:$i("Transition","TransitionRun"),transitionstart:$i("Transition","TransitionStart"),transitioncancel:$i("Transition","TransitionCancel"),transitionend:$i("Transition","TransitionEnd")},uh={},tp={};Fn&&(tp=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function Xi(t){if(uh[t])return uh[t];if(!za[t])return t;var n=za[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in tp)return uh[t]=n[a];return t}var np=Xi("animationend"),sp=Xi("animationiteration"),rp=Xi("animationstart"),P1=Xi("transitionrun"),U1=Xi("transitionstart"),z1=Xi("transitioncancel"),ip=Xi("transitionend"),ap=new Map,dh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dh.push("scrollEnd");function ms(t,n){ap.set(t,n),ks(n,[t])}var $c=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Yn=[],Ba=0,hh=0;function Xc(){for(var t=Ba,n=hh=Ba=0;n<t;){var a=Yn[n];Yn[n++]=null;var l=Yn[n];Yn[n++]=null;var h=Yn[n];Yn[n++]=null;var m=Yn[n];if(Yn[n++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}m!==0&&lp(a,h,m)}}function Wc(t,n,a,l){Yn[Ba++]=t,Yn[Ba++]=n,Yn[Ba++]=a,Yn[Ba++]=l,hh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function fh(t,n,a,l){return Wc(t,n,a,l),Zc(t)}function Wi(t,n){return Wc(t,null,null,n),Zc(t)}function lp(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&n!==null&&(h=31-Nt(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=a|536870912),m):null}function Zc(t){if(50<jo)throw jo=0,Ef=null,Error(i(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ha={};function B1(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,n,a,l){return new B1(t,n,a,l)}function mh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ar(t,n){var a=t.alternate;return a===null?(a=In(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function op(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Jc(t,n,a,l,h,m){var v=0;if(l=t,typeof t=="function")mh(t)&&(v=1);else if(typeof t=="string")v=Y2(t,a,L.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=In(31,a,n,h),t.elementType=A,t.lanes=m,t;case Y:return Zi(a.children,h,m,n);case G:v=8,h|=24;break;case he:return t=In(12,a,n,h|2),t.elementType=he,t.lanes=m,t;case Te:return t=In(13,a,n,h),t.elementType=Te,t.lanes=m,t;case ye:return t=In(19,a,n,h),t.elementType=ye,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case me:v=10;break e;case oe:v=9;break e;case xe:v=11;break e;case I:v=14;break e;case w:v=16,l=null;break e}v=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return n=In(v,a,n,h),n.elementType=t,n.type=l,n.lanes=m,n}function Zi(t,n,a,l){return t=In(7,t,l,n),t.lanes=a,t}function gh(t,n,a){return t=In(6,t,null,n),t.lanes=a,t}function cp(t){var n=In(18,null,null,0);return n.stateNode=t,n}function ph(t,n,a){return n=In(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var up=new WeakMap;function Kn(t,n){if(typeof t=="object"&&t!==null){var a=up.get(t);return a!==void 0?a:(n={value:t,source:n,stack:je(n)},up.set(t,n),n)}return{value:t,source:n,stack:je(n)}}var qa=[],Fa=0,eu=null,ao=0,Qn=[],$n=0,qr=null,Bs=1,Hs="";function lr(t,n){qa[Fa++]=ao,qa[Fa++]=eu,eu=t,ao=n}function dp(t,n,a){Qn[$n++]=Bs,Qn[$n++]=Hs,Qn[$n++]=qr,qr=t;var l=Bs;t=Hs;var h=32-Nt(l)-1;l&=~(1<<h),a+=1;var m=32-Nt(n)+h;if(30<m){var v=h-h%5;m=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Bs=1<<32-Nt(n)+h|a<<h|l,Hs=m+t}else Bs=1<<m|a<<h|l,Hs=t}function yh(t){t.return!==null&&(lr(t,1),dp(t,1,0))}function xh(t){for(;t===eu;)eu=qa[--Fa],qa[Fa]=null,ao=qa[--Fa],qa[Fa]=null;for(;t===qr;)qr=Qn[--$n],Qn[$n]=null,Hs=Qn[--$n],Qn[$n]=null,Bs=Qn[--$n],Qn[$n]=null}function hp(t,n){Qn[$n++]=Bs,Qn[$n++]=Hs,Qn[$n++]=qr,Bs=n.id,Hs=n.overflow,qr=t}var en=null,yt=null,et=!1,Fr=null,Xn=!1,vh=Error(i(519));function Gr(t){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lo(Kn(n,t)),vh}function fp(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Mt]=t,n[Qt]=l,a){case"dialog":Qe("cancel",n),Qe("close",n);break;case"iframe":case"object":case"embed":Qe("load",n);break;case"video":case"audio":for(a=0;a<Ro.length;a++)Qe(Ro[a],n);break;case"source":Qe("error",n);break;case"img":case"image":case"link":Qe("error",n),Qe("load",n);break;case"details":Qe("toggle",n);break;case"input":Qe("invalid",n),Dc(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Qe("invalid",n);break;case"textarea":Qe("invalid",n),Vr(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Ry(n.textContent,a)?(l.popover!=null&&(Qe("beforetoggle",n),Qe("toggle",n)),l.onScroll!=null&&Qe("scroll",n),l.onScrollEnd!=null&&Qe("scrollend",n),l.onClick!=null&&(n.onclick=cs),n=!0):n=!1,n||Gr(t,!0)}function mp(t){for(en=t.return;en;)switch(en.tag){case 5:case 31:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:en=en.return}}function Ga(t){if(t!==en)return!1;if(!et)return mp(t),et=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Pf(t.type,t.memoizedProps)),a=!a),a&&yt&&Gr(t),mp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));yt=Uy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));yt=Uy(t)}else n===27?(n=yt,ii(t.type)?(t=qf,qf=null,yt=t):yt=n):yt=en?Zn(t.stateNode.nextSibling):null;return!0}function Ji(){yt=en=null,et=!1}function bh(){var t=Fr;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),Fr=null),t}function lo(t){Fr===null?Fr=[t]:Fr.push(t)}var _h=M(null),ea=null,or=null;function Yr(t,n,a){fe(_h,n._currentValue),n._currentValue=a}function cr(t){t._currentValue=_h.current,J(_h)}function wh(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Eh(t,n,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var v=h.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=h;for(var k=0;k<n.length;k++)if(E.context===n[k]){m.lanes|=a,E=m.alternate,E!==null&&(E.lanes|=a),wh(m.return,a,t),l||(v=null);break e}m=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(i(341));v.lanes|=a,m=v.alternate,m!==null&&(m.lanes|=a),wh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Ya(t,n,a,l){t=null;for(var h=n,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var E=h.type;Rn(h.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(h===ce.current){if(v=h.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Oo):t=[Oo])}h=h.return}t!==null&&Eh(n,t,a,l),n.flags|=262144}function tu(t){for(t=t.firstContext;t!==null;){if(!Rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ta(t){ea=t,or=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function tn(t){return gp(ea,t)}function nu(t,n){return ea===null&&ta(t),gp(t,n)}function gp(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},or===null){if(t===null)throw Error(i(308));or=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else or=or.next=n;return a}var H1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},q1=r.unstable_scheduleCallback,F1=r.unstable_NormalPriority,Lt={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Th(){return{controller:new H1,data:new Map,refCount:0}}function oo(t){t.refCount--,t.refCount===0&&q1(F1,function(){t.controller.abort()})}var co=null,Sh=0,Ka=0,Qa=null;function G1(t,n){if(co===null){var a=co=[];Sh=0,Ka=Cf(),Qa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Sh++,n.then(pp,pp),n}function pp(){if(--Sh===0&&co!==null){Qa!==null&&(Qa.status="fulfilled");var t=co;co=null,Ka=0,Qa=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function Y1(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var yp=Q.S;Q.S=function(t,n){ey=Kt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&G1(t,n),yp!==null&&yp(t,n)};var na=M(null);function Nh(){var t=na.current;return t!==null?t:mt.pooledCache}function su(t,n){n===null?fe(na,na.current):fe(na,n.pool)}function xp(){var t=Nh();return t===null?null:{parent:Lt._currentValue,pool:t}}var $a=Error(i(460)),Ah=Error(i(474)),ru=Error(i(542)),iu={then:function(){}};function vp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bp(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(cs,cs),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,wp(t),t;default:if(typeof n.status=="string")n.then(cs,cs);else{if(t=mt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,wp(t),t}throw ra=n,$a}}function sa(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ra=a,$a):a}}var ra=null;function _p(){if(ra===null)throw Error(i(459));var t=ra;return ra=null,t}function wp(t){if(t===$a||t===ru)throw Error(i(483))}var Xa=null,uo=0;function au(t){var n=uo;return uo+=1,Xa===null&&(Xa=[]),bp(Xa,t,n)}function ho(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function lu(t,n){throw n.$$typeof===N?Error(i(525)):(t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Ep(t){function n(P,O){if(t){var B=P.deletions;B===null?(P.deletions=[O],P.flags|=16):B.push(O)}}function a(P,O){if(!t)return null;for(;O!==null;)n(P,O),O=O.sibling;return null}function l(P){for(var O=new Map;P!==null;)P.key!==null?O.set(P.key,P):O.set(P.index,P),P=P.sibling;return O}function h(P,O){return P=ar(P,O),P.index=0,P.sibling=null,P}function m(P,O,B){return P.index=B,t?(B=P.alternate,B!==null?(B=B.index,B<O?(P.flags|=67108866,O):B):(P.flags|=67108866,O)):(P.flags|=1048576,O)}function v(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function E(P,O,B,ee){return O===null||O.tag!==6?(O=gh(B,P.mode,ee),O.return=P,O):(O=h(O,B),O.return=P,O)}function k(P,O,B,ee){var Re=B.type;return Re===Y?W(P,O,B.props.children,ee,B.key):O!==null&&(O.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===w&&sa(Re)===O.type)?(O=h(O,B.props),ho(O,B),O.return=P,O):(O=Jc(B.type,B.key,B.props,null,P.mode,ee),ho(O,B),O.return=P,O)}function H(P,O,B,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==B.containerInfo||O.stateNode.implementation!==B.implementation?(O=ph(B,P.mode,ee),O.return=P,O):(O=h(O,B.children||[]),O.return=P,O)}function W(P,O,B,ee,Re){return O===null||O.tag!==7?(O=Zi(B,P.mode,ee,Re),O.return=P,O):(O=h(O,B),O.return=P,O)}function se(P,O,B){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=gh(""+O,P.mode,B),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case U:return B=Jc(O.type,O.key,O.props,null,P.mode,B),ho(B,O),B.return=P,B;case X:return O=ph(O,P.mode,B),O.return=P,O;case w:return O=sa(O),se(P,O,B)}if(Ve(O)||D(O))return O=Zi(O,P.mode,B,null),O.return=P,O;if(typeof O.then=="function")return se(P,au(O),B);if(O.$$typeof===me)return se(P,nu(P,O),B);lu(P,O)}return null}function F(P,O,B,ee){var Re=O!==null?O.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Re!==null?null:E(P,O,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case U:return B.key===Re?k(P,O,B,ee):null;case X:return B.key===Re?H(P,O,B,ee):null;case w:return B=sa(B),F(P,O,B,ee)}if(Ve(B)||D(B))return Re!==null?null:W(P,O,B,ee,null);if(typeof B.then=="function")return F(P,O,au(B),ee);if(B.$$typeof===me)return F(P,O,nu(P,B),ee);lu(P,B)}return null}function $(P,O,B,ee,Re){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return P=P.get(B)||null,E(O,P,""+ee,Re);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case U:return P=P.get(ee.key===null?B:ee.key)||null,k(O,P,ee,Re);case X:return P=P.get(ee.key===null?B:ee.key)||null,H(O,P,ee,Re);case w:return ee=sa(ee),$(P,O,B,ee,Re)}if(Ve(ee)||D(ee))return P=P.get(B)||null,W(O,P,ee,Re,null);if(typeof ee.then=="function")return $(P,O,B,au(ee),Re);if(ee.$$typeof===me)return $(P,O,B,nu(O,ee),Re);lu(O,ee)}return null}function Se(P,O,B,ee){for(var Re=null,nt=null,Ae=O,Fe=O=0,Xe=null;Ae!==null&&Fe<B.length;Fe++){Ae.index>Fe?(Xe=Ae,Ae=null):Xe=Ae.sibling;var st=F(P,Ae,B[Fe],ee);if(st===null){Ae===null&&(Ae=Xe);break}t&&Ae&&st.alternate===null&&n(P,Ae),O=m(st,O,Fe),nt===null?Re=st:nt.sibling=st,nt=st,Ae=Xe}if(Fe===B.length)return a(P,Ae),et&&lr(P,Fe),Re;if(Ae===null){for(;Fe<B.length;Fe++)Ae=se(P,B[Fe],ee),Ae!==null&&(O=m(Ae,O,Fe),nt===null?Re=Ae:nt.sibling=Ae,nt=Ae);return et&&lr(P,Fe),Re}for(Ae=l(Ae);Fe<B.length;Fe++)Xe=$(Ae,P,Fe,B[Fe],ee),Xe!==null&&(t&&Xe.alternate!==null&&Ae.delete(Xe.key===null?Fe:Xe.key),O=m(Xe,O,Fe),nt===null?Re=Xe:nt.sibling=Xe,nt=Xe);return t&&Ae.forEach(function(ui){return n(P,ui)}),et&&lr(P,Fe),Re}function ke(P,O,B,ee){if(B==null)throw Error(i(151));for(var Re=null,nt=null,Ae=O,Fe=O=0,Xe=null,st=B.next();Ae!==null&&!st.done;Fe++,st=B.next()){Ae.index>Fe?(Xe=Ae,Ae=null):Xe=Ae.sibling;var ui=F(P,Ae,st.value,ee);if(ui===null){Ae===null&&(Ae=Xe);break}t&&Ae&&ui.alternate===null&&n(P,Ae),O=m(ui,O,Fe),nt===null?Re=ui:nt.sibling=ui,nt=ui,Ae=Xe}if(st.done)return a(P,Ae),et&&lr(P,Fe),Re;if(Ae===null){for(;!st.done;Fe++,st=B.next())st=se(P,st.value,ee),st!==null&&(O=m(st,O,Fe),nt===null?Re=st:nt.sibling=st,nt=st);return et&&lr(P,Fe),Re}for(Ae=l(Ae);!st.done;Fe++,st=B.next())st=$(Ae,P,Fe,st.value,ee),st!==null&&(t&&st.alternate!==null&&Ae.delete(st.key===null?Fe:st.key),O=m(st,O,Fe),nt===null?Re=st:nt.sibling=st,nt=st);return t&&Ae.forEach(function(sw){return n(P,sw)}),et&&lr(P,Fe),Re}function ft(P,O,B,ee){if(typeof B=="object"&&B!==null&&B.type===Y&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case U:e:{for(var Re=B.key;O!==null;){if(O.key===Re){if(Re=B.type,Re===Y){if(O.tag===7){a(P,O.sibling),ee=h(O,B.props.children),ee.return=P,P=ee;break e}}else if(O.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===w&&sa(Re)===O.type){a(P,O.sibling),ee=h(O,B.props),ho(ee,B),ee.return=P,P=ee;break e}a(P,O);break}else n(P,O);O=O.sibling}B.type===Y?(ee=Zi(B.props.children,P.mode,ee,B.key),ee.return=P,P=ee):(ee=Jc(B.type,B.key,B.props,null,P.mode,ee),ho(ee,B),ee.return=P,P=ee)}return v(P);case X:e:{for(Re=B.key;O!==null;){if(O.key===Re)if(O.tag===4&&O.stateNode.containerInfo===B.containerInfo&&O.stateNode.implementation===B.implementation){a(P,O.sibling),ee=h(O,B.children||[]),ee.return=P,P=ee;break e}else{a(P,O);break}else n(P,O);O=O.sibling}ee=ph(B,P.mode,ee),ee.return=P,P=ee}return v(P);case w:return B=sa(B),ft(P,O,B,ee)}if(Ve(B))return Se(P,O,B,ee);if(D(B)){if(Re=D(B),typeof Re!="function")throw Error(i(150));return B=Re.call(B),ke(P,O,B,ee)}if(typeof B.then=="function")return ft(P,O,au(B),ee);if(B.$$typeof===me)return ft(P,O,nu(P,B),ee);lu(P,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,O!==null&&O.tag===6?(a(P,O.sibling),ee=h(O,B),ee.return=P,P=ee):(a(P,O),ee=gh(B,P.mode,ee),ee.return=P,P=ee),v(P)):a(P,O)}return function(P,O,B,ee){try{uo=0;var Re=ft(P,O,B,ee);return Xa=null,Re}catch(Ae){if(Ae===$a||Ae===ru)throw Ae;var nt=In(29,Ae,null,P.mode);return nt.lanes=ee,nt.return=P,nt}finally{}}}var ia=Ep(!0),Tp=Ep(!1),Kr=!1;function jh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ch(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Qr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function $r(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(it&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=Zc(t),lp(t,null,a),n}return Wc(t,l,n,a),Zc(t)}function fo(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Ul(t,a)}}function Rh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?h=m=n:m=m.next=n}else h=m=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Ih=!1;function mo(){if(Ih){var t=Qa;if(t!==null)throw t}}function go(t,n,a,l){Ih=!1;var h=t.updateQueue;Kr=!1;var m=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var k=E,H=k.next;k.next=null,v===null?m=H:v.next=H,v=k;var W=t.alternate;W!==null&&(W=W.updateQueue,E=W.lastBaseUpdate,E!==v&&(E===null?W.firstBaseUpdate=H:E.next=H,W.lastBaseUpdate=k))}if(m!==null){var se=h.baseState;v=0,W=H=k=null,E=m;do{var F=E.lane&-536870913,$=F!==E.lane;if($?($e&F)===F:(l&F)===F){F!==0&&F===Ka&&(Ih=!0),W!==null&&(W=W.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Se=t,ke=E;F=n;var ft=a;switch(ke.tag){case 1:if(Se=ke.payload,typeof Se=="function"){se=Se.call(ft,se,F);break e}se=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ke.payload,F=typeof Se=="function"?Se.call(ft,se,F):Se,F==null)break e;se=T({},se,F);break e;case 2:Kr=!0}}F=E.callback,F!==null&&(t.flags|=64,$&&(t.flags|=8192),$=h.callbacks,$===null?h.callbacks=[F]:$.push(F))}else $={lane:F,tag:E.tag,payload:E.payload,callback:E.callback,next:null},W===null?(H=W=$,k=se):W=W.next=$,v|=F;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;$=E,E=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);W===null&&(k=se),h.baseState=k,h.firstBaseUpdate=H,h.lastBaseUpdate=W,m===null&&(h.shared.lanes=0),ei|=v,t.lanes=v,t.memoizedState=se}}function Sp(t,n){if(typeof t!="function")throw Error(i(191,t));t.call(n)}function Np(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Sp(a[t],n)}var Wa=M(null),ou=M(0);function Ap(t,n){t=xr,fe(ou,t),fe(Wa,n),xr=t|n.baseLanes}function kh(){fe(ou,xr),fe(Wa,Wa.current)}function Dh(){xr=ou.current,J(Wa),J(ou)}var kn=M(null),Wn=null;function Xr(t){var n=t.alternate;fe(jt,jt.current&1),fe(kn,t),Wn===null&&(n===null||Wa.current!==null||n.memoizedState!==null)&&(Wn=t)}function Mh(t){fe(jt,jt.current),fe(kn,t),Wn===null&&(Wn=t)}function jp(t){t.tag===22?(fe(jt,jt.current),fe(kn,t),Wn===null&&(Wn=t)):Wr()}function Wr(){fe(jt,jt.current),fe(kn,kn.current)}function Dn(t){J(kn),Wn===t&&(Wn=null),J(jt)}var jt=M(0);function cu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Bf(a)||Hf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ur=0,He=null,dt=null,Pt=null,uu=!1,Za=!1,aa=!1,du=0,po=0,Ja=null,K1=0;function Tt(){throw Error(i(321))}function Oh(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Rn(t[a],n[a]))return!1;return!0}function Vh(t,n,a,l,h,m){return ur=m,He=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Q.H=t===null||t.memoizedState===null?d0:Wh,aa=!1,m=a(l,h),aa=!1,Za&&(m=Rp(n,a,l,h)),Cp(t),m}function Cp(t){Q.H=vo;var n=dt!==null&&dt.next!==null;if(ur=0,Pt=dt=He=null,uu=!1,po=0,Ja=null,n)throw Error(i(300));t===null||Ut||(t=t.dependencies,t!==null&&tu(t)&&(Ut=!0))}function Rp(t,n,a,l){He=t;var h=0;do{if(Za&&(Ja=null),po=0,Za=!1,25<=h)throw Error(i(301));if(h+=1,Pt=dt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=h0,m=n(a,l)}while(Za);return m}function Q1(){var t=Q.H,n=t.useState()[0];return n=typeof n.then=="function"?yo(n):n,t=t.useState()[0],(dt!==null?dt.memoizedState:null)!==t&&(He.flags|=1024),n}function Lh(){var t=du!==0;return du=0,t}function Ph(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Uh(t){if(uu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}uu=!1}ur=0,Pt=dt=He=null,Za=!1,po=du=0,Ja=null}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?He.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function Ct(){if(dt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var n=Pt===null?He.memoizedState:Pt.next;if(n!==null)Pt=n,dt=t;else{if(t===null)throw He.alternate===null?Error(i(467)):Error(i(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Pt===null?He.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yo(t){var n=po;return po+=1,Ja===null&&(Ja=[]),t=bp(Ja,t,n),n=He,(Pt===null?n.memoizedState:Pt.next)===null&&(n=n.alternate,Q.H=n===null||n.memoizedState===null?d0:Wh),t}function fu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yo(t);if(t.$$typeof===me)return tn(t)}throw Error(i(438,String(t)))}function zh(t){var n=null,a=He.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=He.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=hu(),He.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=R;return n.index++,a}function dr(t,n){return typeof n=="function"?n(t):n}function mu(t){var n=Ct();return Bh(n,dt,t)}function Bh(t,n,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var v=h.next;h.next=m.next,m.next=v}n.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{n=h.next;var E=v=null,k=null,H=n,W=!1;do{var se=H.lane&-536870913;if(se!==H.lane?($e&se)===se:(ur&se)===se){var F=H.revertLane;if(F===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),se===Ka&&(W=!0);else if((ur&F)===F){H=H.next,F===Ka&&(W=!0);continue}else se={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},k===null?(E=k=se,v=m):k=k.next=se,He.lanes|=F,ei|=F;se=H.action,aa&&a(m,se),m=H.hasEagerState?H.eagerState:a(m,se)}else F={lane:se,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},k===null?(E=k=F,v=m):k=k.next=F,He.lanes|=se,ei|=se;H=H.next}while(H!==null&&H!==n);if(k===null?v=m:k.next=E,!Rn(m,t.memoizedState)&&(Ut=!0,W&&(a=Qa,a!==null)))throw a;t.memoizedState=m,t.baseState=v,t.baseQueue=k,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Hh(t){var n=Ct(),a=n.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=n.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do m=t(m,v.action),v=v.next;while(v!==h);Rn(m,n.memoizedState)||(Ut=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function Ip(t,n,a){var l=He,h=Ct(),m=et;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=n();var v=!Rn((dt||h).memoizedState,a);if(v&&(h.memoizedState=a,Ut=!0),h=h.queue,Gh(Mp.bind(null,l,h,t),[t]),h.getSnapshot!==n||v||Pt!==null&&Pt.memoizedState.tag&1){if(l.flags|=2048,el(9,{destroy:void 0},Dp.bind(null,l,h,a,n),null),mt===null)throw Error(i(349));m||(ur&127)!==0||kp(l,n,a)}return a}function kp(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=He.updateQueue,n===null?(n=hu(),He.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Dp(t,n,a,l){n.value=a,n.getSnapshot=l,Op(n)&&Vp(t)}function Mp(t,n,a){return a(function(){Op(n)&&Vp(t)})}function Op(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Rn(t,a)}catch{return!0}}function Vp(t){var n=Wi(t,2);n!==null&&En(n,t,2)}function qh(t){var n=gn();if(typeof t=="function"){var a=t;if(t=a(),aa){Bn(!0);try{a()}finally{Bn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:t},n}function Lp(t,n,a,l){return t.baseState=a,Bh(t,dt,typeof l=="function"?l:dr)}function $1(t,n,a,l,h){if(yu(t))throw Error(i(485));if(t=n.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};Q.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,Pp(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Pp(t,n){var a=n.action,l=n.payload,h=t.state;if(n.isTransition){var m=Q.T,v={};Q.T=v;try{var E=a(h,l),k=Q.S;k!==null&&k(v,E),Up(t,n,E)}catch(H){Fh(t,n,H)}finally{m!==null&&v.types!==null&&(m.types=v.types),Q.T=m}}else try{m=a(h,l),Up(t,n,m)}catch(H){Fh(t,n,H)}}function Up(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){zp(t,n,l)},function(l){return Fh(t,n,l)}):zp(t,n,a)}function zp(t,n,a){n.status="fulfilled",n.value=a,Bp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Pp(t,a)))}function Fh(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Bp(n),n=n.next;while(n!==l)}t.action=null}function Bp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Hp(t,n){return n}function qp(t,n){if(et){var a=mt.formState;if(a!==null){e:{var l=He;if(et){if(yt){t:{for(var h=yt,m=Xn;h.nodeType!==8;){if(!m){h=null;break t}if(h=Zn(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){yt=Zn(h.nextSibling),l=h.data==="F!";break e}}Gr(l)}l=!1}l&&(n=a[0])}}return a=gn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hp,lastRenderedState:n},a.queue=l,a=o0.bind(null,He,l),l.dispatch=a,l=qh(!1),m=Xh.bind(null,He,!1,l.queue),l=gn(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,a=$1.bind(null,He,h,m,a),h.dispatch=a,l.memoizedState=t,[n,a,!1]}function Fp(t){var n=Ct();return Gp(n,dt,t)}function Gp(t,n,a){if(n=Bh(t,n,Hp)[0],t=mu(dr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=yo(n)}catch(v){throw v===$a?ru:v}else l=n;n=Ct();var h=n.queue,m=h.dispatch;return a!==n.memoizedState&&(He.flags|=2048,el(9,{destroy:void 0},X1.bind(null,h,a),null)),[l,m,t]}function X1(t,n){t.action=n}function Yp(t){var n=Ct(),a=dt;if(a!==null)return Gp(n,a,t);Ct(),n=n.memoizedState,a=Ct();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function el(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=He.updateQueue,n===null&&(n=hu(),He.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Kp(){return Ct().memoizedState}function gu(t,n,a,l){var h=gn();He.flags|=t,h.memoizedState=el(1|n,{destroy:void 0},a,l===void 0?null:l)}function pu(t,n,a,l){var h=Ct();l=l===void 0?null:l;var m=h.memoizedState.inst;dt!==null&&l!==null&&Oh(l,dt.memoizedState.deps)?h.memoizedState=el(n,m,a,l):(He.flags|=t,h.memoizedState=el(1|n,m,a,l))}function Qp(t,n){gu(8390656,8,t,n)}function Gh(t,n){pu(2048,8,t,n)}function W1(t){He.flags|=4;var n=He.updateQueue;if(n===null)n=hu(),He.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function $p(t){var n=Ct().memoizedState;return W1({ref:n,nextImpl:t}),function(){if((it&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function Xp(t,n){return pu(4,2,t,n)}function Wp(t,n){return pu(4,4,t,n)}function Zp(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Jp(t,n,a){a=a!=null?a.concat([t]):null,pu(4,4,Zp.bind(null,n,t),a)}function Yh(){}function e0(t,n){var a=Ct();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Oh(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function t0(t,n){var a=Ct();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Oh(n,l[1]))return l[0];if(l=t(),aa){Bn(!0);try{t()}finally{Bn(!1)}}return a.memoizedState=[l,n],l}function Kh(t,n,a){return a===void 0||(ur&1073741824)!==0&&($e&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=ny(),He.lanes|=t,ei|=t,a)}function n0(t,n,a,l){return Rn(a,n)?a:Wa.current!==null?(t=Kh(t,a,l),Rn(t,n)||(Ut=!0),t):(ur&42)===0||(ur&1073741824)!==0&&($e&261930)===0?(Ut=!0,t.memoizedState=a):(t=ny(),He.lanes|=t,ei|=t,n)}function s0(t,n,a,l,h){var m=de.p;de.p=m!==0&&8>m?m:8;var v=Q.T,E={};Q.T=E,Xh(t,!1,n,a);try{var k=h(),H=Q.S;if(H!==null&&H(E,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var W=Y1(k,l);xo(t,n,W,Vn(t))}else xo(t,n,l,Vn(t))}catch(se){xo(t,n,{then:function(){},status:"rejected",reason:se},Vn())}finally{de.p=m,v!==null&&E.types!==null&&(v.types=E.types),Q.T=v}}function Z1(){}function Qh(t,n,a,l){if(t.tag!==5)throw Error(i(476));var h=r0(t).queue;s0(t,h,n,Ne,a===null?Z1:function(){return i0(t),a(l)})}function r0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:Ne},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function i0(t){var n=r0(t);n.next===null&&(n=t.alternate.memoizedState),xo(t,n.next.queue,{},Vn())}function $h(){return tn(Oo)}function a0(){return Ct().memoizedState}function l0(){return Ct().memoizedState}function J1(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Vn();t=Qr(a);var l=$r(n,t,a);l!==null&&(En(l,n,a),fo(l,n,a)),n={cache:Th()},t.payload=n;return}n=n.return}}function e2(t,n,a){var l=Vn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},yu(t)?c0(n,a):(a=fh(t,n,a,l),a!==null&&(En(a,t,l),u0(a,n,l)))}function o0(t,n,a){var l=Vn();xo(t,n,a,l)}function xo(t,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(yu(t))c0(n,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var v=n.lastRenderedState,E=m(v,a);if(h.hasEagerState=!0,h.eagerState=E,Rn(E,v))return Wc(t,n,h,0),mt===null&&Xc(),!1}catch{}finally{}if(a=fh(t,n,h,l),a!==null)return En(a,t,l),u0(a,n,l),!0}return!1}function Xh(t,n,a,l){if(l={lane:2,revertLane:Cf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},yu(t)){if(n)throw Error(i(479))}else n=fh(t,a,l,2),n!==null&&En(n,t,2)}function yu(t){var n=t.alternate;return t===He||n!==null&&n===He}function c0(t,n){Za=uu=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function u0(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Ul(t,a)}}var vo={readContext:tn,use:fu,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};vo.useEffectEvent=Tt;var d0={readContext:tn,use:fu,useCallback:function(t,n){return gn().memoizedState=[t,n===void 0?null:n],t},useContext:tn,useEffect:Qp,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,gu(4194308,4,Zp.bind(null,n,t),a)},useLayoutEffect:function(t,n){return gu(4194308,4,t,n)},useInsertionEffect:function(t,n){gu(4,2,t,n)},useMemo:function(t,n){var a=gn();n=n===void 0?null:n;var l=t();if(aa){Bn(!0);try{t()}finally{Bn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=gn();if(a!==void 0){var h=a(n);if(aa){Bn(!0);try{a(n)}finally{Bn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=e2.bind(null,He,t),[l.memoizedState,t]},useRef:function(t){var n=gn();return t={current:t},n.memoizedState=t},useState:function(t){t=qh(t);var n=t.queue,a=o0.bind(null,He,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Yh,useDeferredValue:function(t,n){var a=gn();return Kh(a,t,n)},useTransition:function(){var t=qh(!1);return t=s0.bind(null,He,t.queue,!0,!1),gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=He,h=gn();if(et){if(a===void 0)throw Error(i(407));a=a()}else{if(a=n(),mt===null)throw Error(i(349));($e&127)!==0||kp(l,n,a)}h.memoizedState=a;var m={value:a,getSnapshot:n};return h.queue=m,Qp(Mp.bind(null,l,m,t),[t]),l.flags|=2048,el(9,{destroy:void 0},Dp.bind(null,l,m,a,n),null),a},useId:function(){var t=gn(),n=mt.identifierPrefix;if(et){var a=Hs,l=Bs;a=(l&~(1<<32-Nt(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=du++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=K1++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:$h,useFormState:qp,useActionState:qp,useOptimistic:function(t){var n=gn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Xh.bind(null,He,!0,a),a.dispatch=n,[t,n]},useMemoCache:zh,useCacheRefresh:function(){return gn().memoizedState=J1.bind(null,He)},useEffectEvent:function(t){var n=gn(),a={impl:t};return n.memoizedState=a,function(){if((it&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Wh={readContext:tn,use:fu,useCallback:e0,useContext:tn,useEffect:Gh,useImperativeHandle:Jp,useInsertionEffect:Xp,useLayoutEffect:Wp,useMemo:t0,useReducer:mu,useRef:Kp,useState:function(){return mu(dr)},useDebugValue:Yh,useDeferredValue:function(t,n){var a=Ct();return n0(a,dt.memoizedState,t,n)},useTransition:function(){var t=mu(dr)[0],n=Ct().memoizedState;return[typeof t=="boolean"?t:yo(t),n]},useSyncExternalStore:Ip,useId:a0,useHostTransitionStatus:$h,useFormState:Fp,useActionState:Fp,useOptimistic:function(t,n){var a=Ct();return Lp(a,dt,t,n)},useMemoCache:zh,useCacheRefresh:l0};Wh.useEffectEvent=$p;var h0={readContext:tn,use:fu,useCallback:e0,useContext:tn,useEffect:Gh,useImperativeHandle:Jp,useInsertionEffect:Xp,useLayoutEffect:Wp,useMemo:t0,useReducer:Hh,useRef:Kp,useState:function(){return Hh(dr)},useDebugValue:Yh,useDeferredValue:function(t,n){var a=Ct();return dt===null?Kh(a,t,n):n0(a,dt.memoizedState,t,n)},useTransition:function(){var t=Hh(dr)[0],n=Ct().memoizedState;return[typeof t=="boolean"?t:yo(t),n]},useSyncExternalStore:Ip,useId:a0,useHostTransitionStatus:$h,useFormState:Yp,useActionState:Yp,useOptimistic:function(t,n){var a=Ct();return dt!==null?Lp(a,dt,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:zh,useCacheRefresh:l0};h0.useEffectEvent=$p;function Zh(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:T({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Jh={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Vn(),h=Qr(l);h.payload=n,a!=null&&(h.callback=a),n=$r(t,h,l),n!==null&&(En(n,t,l),fo(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Vn(),h=Qr(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=$r(t,h,l),n!==null&&(En(n,t,l),fo(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Vn(),l=Qr(a);l.tag=2,n!=null&&(l.callback=n),n=$r(t,l,a),n!==null&&(En(n,t,a),fo(n,t,a))}};function f0(t,n,a,l,h,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,v):n.prototype&&n.prototype.isPureReactComponent?!ro(a,l)||!ro(h,m):!0}function m0(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&Jh.enqueueReplaceState(n,n.state,null)}function la(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function g0(t){$c(t)}function p0(t){console.error(t)}function y0(t){$c(t)}function xu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function x0(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function ef(t,n,a){return a=Qr(a),a.tag=3,a.payload={element:null},a.callback=function(){xu(t,n)},a}function v0(t){return t=Qr(t),t.tag=3,t}function b0(t,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){x0(n,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){x0(n,a,l),typeof h!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function t2(t,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ya(n,a,h,!0),a=kn.current,a!==null){switch(a.tag){case 31:case 13:return Wn===null?Ru():a.alternate===null&&St===0&&(St=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===iu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Nf(t,l,h)),!1;case 22:return a.flags|=65536,l===iu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Nf(t,l,h)),!1}throw Error(i(435,a.tag))}return Nf(t,l,h),Ru(),!1}if(et)return n=kn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==vh&&(t=Error(i(422),{cause:l}),lo(Kn(t,a)))):(l!==vh&&(n=Error(i(423),{cause:l}),lo(Kn(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Kn(l,a),h=ef(t.stateNode,l,h),Rh(t,h),St!==4&&(St=2)),!1;var m=Error(i(520),{cause:l});if(m=Kn(m,a),Ao===null?Ao=[m]:Ao.push(m),St!==4&&(St=2),n===null)return!0;l=Kn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=ef(a.stateNode,l,t),Rh(a,t),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ti===null||!ti.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=v0(h),b0(h,t,a,l),Rh(a,h),!1}a=a.return}while(a!==null);return!1}var tf=Error(i(461)),Ut=!1;function nn(t,n,a,l){n.child=t===null?Tp(n,null,a,l):ia(n,t.child,a,l)}function _0(t,n,a,l,h){a=a.render;var m=n.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return ta(n),l=Vh(t,n,a,v,m,h),E=Lh(),t!==null&&!Ut?(Ph(t,n,h),hr(t,n,h)):(et&&E&&yh(n),n.flags|=1,nn(t,n,l,h),n.child)}function w0(t,n,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!mh(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,E0(t,n,m,l,h)):(t=Jc(a.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!uf(t,h)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:ro,a(v,l)&&t.ref===n.ref)return hr(t,n,h)}return n.flags|=1,t=ar(m,l),t.ref=n.ref,t.return=n,n.child=t}function E0(t,n,a,l,h){if(t!==null){var m=t.memoizedProps;if(ro(m,l)&&t.ref===n.ref)if(Ut=!1,n.pendingProps=l=m,uf(t,h))(t.flags&131072)!==0&&(Ut=!0);else return n.lanes=t.lanes,hr(t,n,h)}return nf(t,n,a,l,h)}function T0(t,n,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=n.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,n.child=null;return S0(t,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&su(n,m!==null?m.cachePool:null),m!==null?Ap(n,m):kh(),jp(n);else return l=n.lanes=536870912,S0(t,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(su(n,m.cachePool),Ap(n,m),Wr(),n.memoizedState=null):(t!==null&&su(n,null),kh(),Wr());return nn(t,n,h,a),n.child}function bo(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function S0(t,n,a,l,h){var m=Nh();return m=m===null?null:{parent:Lt._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},t!==null&&su(n,null),kh(),jp(n),t!==null&&Ya(t,n,l,!0),n.childLanes=h,null}function vu(t,n){return n=_u({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function N0(t,n,a){return ia(n,t.child,null,a),t=vu(n,n.pendingProps),t.flags|=2,Dn(n),n.memoizedState=null,t}function n2(t,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(et){if(l.mode==="hidden")return t=vu(n,l),n.lanes=536870912,bo(null,t);if(Mh(n),(t=yt)?(t=Py(t,Xn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:qr!==null?{id:Bs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},a=cp(t),a.return=n,n.child=a,en=n,yt=null)):t=null,t===null)throw Gr(n);return n.lanes=536870912,null}return vu(n,l)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Mh(n),h)if(n.flags&256)n.flags&=-257,n=N0(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(i(558));else if(Ut||Ya(t,n,a,!1),h=(a&t.childLanes)!==0,Ut||h){if(l=mt,l!==null&&(v=zl(l,a),v!==0&&v!==m.retryLane))throw m.retryLane=v,Wi(t,v),En(l,t,v),tf;Ru(),n=N0(t,n,a)}else t=m.treeContext,yt=Zn(v.nextSibling),en=n,et=!0,Fr=null,Xn=!1,t!==null&&hp(n,t),n=vu(n,l),n.flags|=4096;return n}return t=ar(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function bu(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function nf(t,n,a,l,h){return ta(n),a=Vh(t,n,a,l,void 0,h),l=Lh(),t!==null&&!Ut?(Ph(t,n,h),hr(t,n,h)):(et&&l&&yh(n),n.flags|=1,nn(t,n,a,h),n.child)}function A0(t,n,a,l,h,m){return ta(n),n.updateQueue=null,a=Rp(n,l,a,h),Cp(t),l=Lh(),t!==null&&!Ut?(Ph(t,n,m),hr(t,n,m)):(et&&l&&yh(n),n.flags|=1,nn(t,n,a,m),n.child)}function j0(t,n,a,l,h){if(ta(n),n.stateNode===null){var m=Ha,v=a.contextType;typeof v=="object"&&v!==null&&(m=tn(v)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Jh,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},jh(n),v=a.contextType,m.context=typeof v=="object"&&v!==null?tn(v):Ha,m.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Zh(n,a,v,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Jh.enqueueReplaceState(m,m.state,null),go(n,l,m,h),mo(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){m=n.stateNode;var E=n.memoizedProps,k=la(a,E);m.props=k;var H=m.context,W=a.contextType;v=Ha,typeof W=="object"&&W!==null&&(v=tn(W));var se=a.getDerivedStateFromProps;W=typeof se=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||H!==v)&&m0(n,m,l,v),Kr=!1;var F=n.memoizedState;m.state=F,go(n,l,m,h),mo(),H=n.memoizedState,E||F!==H||Kr?(typeof se=="function"&&(Zh(n,a,se,l),H=n.memoizedState),(k=Kr||f0(n,a,k,l,F,H,v))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=H),m.props=l,m.state=H,m.context=v,l=k):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,Ch(t,n),v=n.memoizedProps,W=la(a,v),m.props=W,se=n.pendingProps,F=m.context,H=a.contextType,k=Ha,typeof H=="object"&&H!==null&&(k=tn(H)),E=a.getDerivedStateFromProps,(H=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==se||F!==k)&&m0(n,m,l,k),Kr=!1,F=n.memoizedState,m.state=F,go(n,l,m,h),mo();var $=n.memoizedState;v!==se||F!==$||Kr||t!==null&&t.dependencies!==null&&tu(t.dependencies)?(typeof E=="function"&&(Zh(n,a,E,l),$=n.memoizedState),(W=Kr||f0(n,a,W,l,F,$,k)||t!==null&&t.dependencies!==null&&tu(t.dependencies))?(H||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,$,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,$,k)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=$),m.props=l,m.state=$,m.context=k,l=W):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),l=!1)}return m=l,bu(t,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&l?(n.child=ia(n,t.child,null,h),n.child=ia(n,null,a,h)):nn(t,n,a,h),n.memoizedState=m.state,t=n.child):t=hr(t,n,h),t}function C0(t,n,a,l){return Ji(),n.flags|=256,nn(t,n,a,l),n.child}var sf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rf(t){return{baseLanes:t,cachePool:xp()}}function af(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=On),t}function R0(t,n,a){var l=n.pendingProps,h=!1,m=(n.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(jt.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,t===null){if(et){if(h?Xr(n):Wr(),(t=yt)?(t=Py(t,Xn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:qr!==null?{id:Bs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},a=cp(t),a.return=n,n.child=a,en=n,yt=null)):t=null,t===null)throw Gr(n);return Hf(t)?n.lanes=32:n.lanes=536870912,null}var E=l.children;return l=l.fallback,h?(Wr(),h=n.mode,E=_u({mode:"hidden",children:E},h),l=Zi(l,h,a,null),E.return=n,l.return=n,E.sibling=l,n.child=E,l=n.child,l.memoizedState=rf(a),l.childLanes=af(t,v,a),n.memoizedState=sf,bo(null,l)):(Xr(n),lf(n,E))}var k=t.memoizedState;if(k!==null&&(E=k.dehydrated,E!==null)){if(m)n.flags&256?(Xr(n),n.flags&=-257,n=of(t,n,a)):n.memoizedState!==null?(Wr(),n.child=t.child,n.flags|=128,n=null):(Wr(),E=l.fallback,h=n.mode,l=_u({mode:"visible",children:l.children},h),E=Zi(E,h,a,null),E.flags|=2,l.return=n,E.return=n,l.sibling=E,n.child=l,ia(n,t.child,null,a),l=n.child,l.memoizedState=rf(a),l.childLanes=af(t,v,a),n.memoizedState=sf,n=bo(null,l));else if(Xr(n),Hf(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var H=v.dgst;v=H,l=Error(i(419)),l.stack="",l.digest=v,lo({value:l,source:null,stack:null}),n=of(t,n,a)}else if(Ut||Ya(t,n,a,!1),v=(a&t.childLanes)!==0,Ut||v){if(v=mt,v!==null&&(l=zl(v,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,Wi(t,l),En(v,t,l),tf;Bf(E)||Ru(),n=of(t,n,a)}else Bf(E)?(n.flags|=192,n.child=t.child,n=null):(t=k.treeContext,yt=Zn(E.nextSibling),en=n,et=!0,Fr=null,Xn=!1,t!==null&&hp(n,t),n=lf(n,l.children),n.flags|=4096);return n}return h?(Wr(),E=l.fallback,h=n.mode,k=t.child,H=k.sibling,l=ar(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,H!==null?E=ar(H,E):(E=Zi(E,h,a,null),E.flags|=2),E.return=n,l.return=n,l.sibling=E,n.child=l,bo(null,l),l=n.child,E=t.child.memoizedState,E===null?E=rf(a):(h=E.cachePool,h!==null?(k=Lt._currentValue,h=h.parent!==k?{parent:k,pool:k}:h):h=xp(),E={baseLanes:E.baseLanes|a,cachePool:h}),l.memoizedState=E,l.childLanes=af(t,v,a),n.memoizedState=sf,bo(t.child,l)):(Xr(n),a=t.child,t=a.sibling,a=ar(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(v=n.deletions,v===null?(n.deletions=[t],n.flags|=16):v.push(t)),n.child=a,n.memoizedState=null,a)}function lf(t,n){return n=_u({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function _u(t,n){return t=In(22,t,null,n),t.lanes=0,t}function of(t,n,a){return ia(n,t.child,null,a),t=lf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function I0(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),wh(t.return,n,a)}function cf(t,n,a,l,h,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=m)}function k0(t,n,a){var l=n.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var v=jt.current,E=(v&2)!==0;if(E?(v=v&1|2,n.flags|=128):v&=1,fe(jt,v),nn(t,n,l,a),l=et?ao:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&I0(t,a,n);else if(t.tag===19)I0(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&cu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),cf(n,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&cu(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}cf(n,!0,a,null,m,l);break;case"together":cf(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function hr(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),ei|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Ya(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,a=ar(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=ar(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function uf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&tu(t)))}function s2(t,n,a){switch(n.tag){case 3:Ce(n,n.stateNode.containerInfo),Yr(n,Lt,t.memoizedState.cache),Ji();break;case 27:case 5:Z(n);break;case 4:Ce(n,n.stateNode.containerInfo);break;case 10:Yr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Mh(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Xr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?R0(t,n,a):(Xr(n),t=hr(t,n,a),t!==null?t.sibling:null);Xr(n);break;case 19:var h=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ya(t,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return k0(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),fe(jt,jt.current),l)break;return null;case 22:return n.lanes=0,T0(t,n,a,n.pendingProps);case 24:Yr(n,Lt,t.memoizedState.cache)}return hr(t,n,a)}function D0(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ut=!0;else{if(!uf(t,a)&&(n.flags&128)===0)return Ut=!1,s2(t,n,a);Ut=(t.flags&131072)!==0}else Ut=!1,et&&(n.flags&1048576)!==0&&dp(n,ao,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=sa(n.elementType),n.type=t,typeof t=="function")mh(t)?(l=la(t,l),n.tag=1,n=j0(null,n,t,l,a)):(n.tag=0,n=nf(null,n,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===xe){n.tag=11,n=_0(null,n,t,l,a);break e}else if(h===I){n.tag=14,n=w0(null,n,t,l,a);break e}}throw n=_e(t)||t,Error(i(306,n,""))}}return n;case 0:return nf(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=la(l,n.pendingProps),j0(t,n,l,h,a);case 3:e:{if(Ce(n,n.stateNode.containerInfo),t===null)throw Error(i(387));l=n.pendingProps;var m=n.memoizedState;h=m.element,Ch(t,n),go(n,l,null,a);var v=n.memoizedState;if(l=v.cache,Yr(n,Lt,l),l!==m.cache&&Eh(n,[Lt],a,!0),mo(),l=v.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=C0(t,n,l,a);break e}else if(l!==h){h=Kn(Error(i(424)),n),lo(h),n=C0(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(yt=Zn(t.firstChild),en=n,et=!0,Fr=null,Xn=!0,a=Tp(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ji(),l===h){n=hr(t,n,a);break e}nn(t,n,l,a)}n=n.child}return n;case 26:return bu(t,n),t===null?(a=Fy(n.type,null,n.pendingProps,null))?n.memoizedState=a:et||(a=n.type,t=n.pendingProps,l=Lu(te.current).createElement(a),l[Mt]=n,l[Qt]=t,sn(l,a,t),Ot(l),n.stateNode=l):n.memoizedState=Fy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Z(n),t===null&&et&&(l=n.stateNode=By(n.type,n.pendingProps,te.current),en=n,Xn=!0,h=yt,ii(n.type)?(qf=h,yt=Zn(l.firstChild)):yt=h),nn(t,n,n.pendingProps.children,a),bu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&et&&((h=l=yt)&&(l=D2(l,n.type,n.pendingProps,Xn),l!==null?(n.stateNode=l,en=n,yt=Zn(l.firstChild),Xn=!1,h=!0):h=!1),h||Gr(n)),Z(n),h=n.type,m=n.pendingProps,v=t!==null?t.memoizedProps:null,l=m.children,Pf(h,m)?l=null:v!==null&&Pf(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=Vh(t,n,Q1,null,null,a),Oo._currentValue=h),bu(t,n),nn(t,n,l,a),n.child;case 6:return t===null&&et&&((t=a=yt)&&(a=M2(a,n.pendingProps,Xn),a!==null?(n.stateNode=a,en=n,yt=null,t=!0):t=!1),t||Gr(n)),null;case 13:return R0(t,n,a);case 4:return Ce(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=ia(n,null,l,a):nn(t,n,l,a),n.child;case 11:return _0(t,n,n.type,n.pendingProps,a);case 7:return nn(t,n,n.pendingProps,a),n.child;case 8:return nn(t,n,n.pendingProps.children,a),n.child;case 12:return nn(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,Yr(n,n.type,l.value),nn(t,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,ta(n),h=tn(h),l=l(h),n.flags|=1,nn(t,n,l,a),n.child;case 14:return w0(t,n,n.type,n.pendingProps,a);case 15:return E0(t,n,n.type,n.pendingProps,a);case 19:return k0(t,n,a);case 31:return n2(t,n,a);case 22:return T0(t,n,a,n.pendingProps);case 24:return ta(n),l=tn(Lt),t===null?(h=Nh(),h===null&&(h=mt,m=Th(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),n.memoizedState={parent:l,cache:h},jh(n),Yr(n,Lt,h)):((t.lanes&a)!==0&&(Ch(t,n),go(n,null,null,a),mo()),h=t.memoizedState,m=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Yr(n,Lt,l)):(l=m.cache,Yr(n,Lt,l),l!==h.cache&&Eh(n,[Lt],a,!0))),nn(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function fr(t){t.flags|=4}function df(t,n,a,l,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(ay())t.flags|=8192;else throw ra=iu,Ah}else t.flags&=-16777217}function M0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!$y(n))if(ay())t.flags|=8192;else throw ra=iu,Ah}function wu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?jc():536870912,t.lanes|=n,rl|=n)}function _o(t,n){if(!et)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function xt(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function r2(t,n,a){var l=n.pendingProps;switch(xh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(n),null;case 1:return xt(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),cr(Lt),De(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ga(n)?fr(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,bh())),xt(n),null;case 26:var h=n.type,m=n.memoizedState;return t===null?(fr(n),m!==null?(xt(n),M0(n,m)):(xt(n),df(n,h,null,l,a))):m?m!==t.memoizedState?(fr(n),xt(n),M0(n,m)):(xt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&fr(n),xt(n),df(n,h,t,l,a)),null;case 27:if(we(n),a=te.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&fr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return xt(n),null}t=L.current,Ga(n)?fp(n):(t=By(h,l,a),n.stateNode=t,fr(n))}return xt(n),null;case 5:if(we(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&fr(n);else{if(!l){if(n.stateNode===null)throw Error(i(166));return xt(n),null}if(m=L.current,Ga(n))fp(n);else{var v=Lu(te.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}m[Mt]=n,m[Qt]=l;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=m;e:switch(sn(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&fr(n)}}return xt(n),df(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&fr(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(i(166));if(t=te.current,Ga(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,h=en,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Mt]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Ry(t.nodeValue,a)),t||Gr(n,!0)}else t=Lu(t).createTextNode(l),t[Mt]=n,n.stateNode=t}return xt(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Ga(n),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Mt]=n}else Ji(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;xt(n),t=!1}else a=bh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(Dn(n),n):(Dn(n),null);if((n.flags&128)!==0)throw Error(i(558))}return xt(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ga(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Mt]=n}else Ji(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;xt(n),h=!1}else h=bh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Dn(n),n):(Dn(n),null)}return Dn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),wu(n,n.updateQueue),xt(n),null);case 4:return De(),t===null&&Df(n.stateNode.containerInfo),xt(n),null;case 10:return cr(n.type),xt(n),null;case 19:if(J(jt),l=n.memoizedState,l===null)return xt(n),null;if(h=(n.flags&128)!==0,m=l.rendering,m===null)if(h)_o(l,!1);else{if(St!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=cu(t),m!==null){for(n.flags|=128,_o(l,!1),t=m.updateQueue,n.updateQueue=t,wu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)op(a,t),a=a.sibling;return fe(jt,jt.current&1|2),et&&lr(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&Kt()>Au&&(n.flags|=128,h=!0,_o(l,!1),n.lanes=4194304)}else{if(!h)if(t=cu(m),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,wu(n,t),_o(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!et)return xt(n),null}else 2*Kt()-l.renderingStartTime>Au&&a!==536870912&&(n.flags|=128,h=!0,_o(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(t=l.last,t!==null?t.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Kt(),t.sibling=null,a=jt.current,fe(jt,h?a&1|2:a&1),et&&lr(n,l.treeForkCount),t):(xt(n),null);case 22:case 23:return Dn(n),Dh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(xt(n),n.subtreeFlags&6&&(n.flags|=8192)):xt(n),a=n.updateQueue,a!==null&&wu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&J(na),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),cr(Lt),xt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function i2(t,n){switch(xh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return cr(Lt),De(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return we(n),null;case 31:if(n.memoizedState!==null){if(Dn(n),n.alternate===null)throw Error(i(340));Ji()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Dn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));Ji()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return J(jt),null;case 4:return De(),null;case 10:return cr(n.type),null;case 22:case 23:return Dn(n),Dh(),t!==null&&J(na),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return cr(Lt),null;case 25:return null;default:return null}}function O0(t,n){switch(xh(n),n.tag){case 3:cr(Lt),De();break;case 26:case 27:case 5:we(n);break;case 4:De();break;case 31:n.memoizedState!==null&&Dn(n);break;case 13:Dn(n);break;case 19:J(jt);break;case 10:cr(n.type);break;case 22:case 23:Dn(n),Dh(),t!==null&&J(na);break;case 24:cr(Lt)}}function wo(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,v=a.inst;l=m(),v.destroy=l}a=a.next}while(a!==h)}}catch(E){ct(n,n.return,E)}}function Zr(t,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=n;var k=a,H=E;try{H()}catch(W){ct(h,k,W)}}}l=l.next}while(l!==m)}}catch(W){ct(n,n.return,W)}}function V0(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Np(n,a)}catch(l){ct(t,t.return,l)}}}function L0(t,n,a){a.props=la(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ct(t,n,l)}}function Eo(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ct(t,n,h)}}function qs(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ct(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ct(t,n,h)}else a.current=null}function P0(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ct(t,t.return,h)}}function hf(t,n,a){try{var l=t.stateNode;A2(l,t.type,a,n),l[Qt]=n}catch(h){ct(t,t.return,h)}}function U0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ii(t.type)||t.tag===4}function ff(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||U0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ii(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=cs));else if(l!==4&&(l===27&&ii(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(mf(t,n,a),t=t.sibling;t!==null;)mf(t,n,a),t=t.sibling}function Eu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&ii(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Eu(t,n,a),t=t.sibling;t!==null;)Eu(t,n,a),t=t.sibling}function z0(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);sn(n,l,a),n[Mt]=t,n[Qt]=a}catch(m){ct(t,t.return,m)}}var mr=!1,zt=!1,gf=!1,B0=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function a2(t,n){if(t=t.containerInfo,Vf=Fu,t=Jg(t),lh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,E=-1,k=-1,H=0,W=0,se=t,F=null;t:for(;;){for(var $;se!==a||h!==0&&se.nodeType!==3||(E=v+h),se!==m||l!==0&&se.nodeType!==3||(k=v+l),se.nodeType===3&&(v+=se.nodeValue.length),($=se.firstChild)!==null;)F=se,se=$;for(;;){if(se===t)break t;if(F===a&&++H===h&&(E=v),F===m&&++W===l&&(k=v),($=se.nextSibling)!==null)break;se=F,F=se.parentNode}se=$}a=E===-1||k===-1?null:{start:E,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lf={focusedElem:t,selectionRange:a},Fu=!1,Xt=n;Xt!==null;)if(n=Xt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Xt=t;else for(;Xt!==null;){switch(n=Xt,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=n,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Se=la(a.type,h);t=l.getSnapshotBeforeUpdate(Se,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(ke){ct(a,a.return,ke)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)zf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":zf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=n.sibling,t!==null){t.return=n.return,Xt=t;break}Xt=n.return}}function H0(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:pr(t,a),l&4&&wo(5,a);break;case 1:if(pr(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(v){ct(a,a.return,v)}else{var h=la(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(v){ct(a,a.return,v)}}l&64&&V0(a),l&512&&Eo(a,a.return);break;case 3:if(pr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Np(t,n)}catch(v){ct(a,a.return,v)}}break;case 27:n===null&&l&4&&z0(a);case 26:case 5:pr(t,a),n===null&&l&4&&P0(a),l&512&&Eo(a,a.return);break;case 12:pr(t,a);break;case 31:pr(t,a),l&4&&G0(t,a);break;case 13:pr(t,a),l&4&&Y0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=g2.bind(null,a),O2(t,a))));break;case 22:if(l=a.memoizedState!==null||mr,!l){n=n!==null&&n.memoizedState!==null||zt,h=mr;var m=zt;mr=l,(zt=n)&&!m?yr(t,a,(a.subtreeFlags&8772)!==0):pr(t,a),mr=h,zt=m}break;case 30:break;default:pr(t,a)}}function q0(t){var n=t.alternate;n!==null&&(t.alternate=null,q0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&ja(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _t=null,vn=!1;function gr(t,n,a){for(a=a.child;a!==null;)F0(t,n,a),a=a.sibling}function F0(t,n,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(is,a)}catch{}switch(a.tag){case 26:zt||qs(a,n),gr(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:zt||qs(a,n);var l=_t,h=vn;ii(a.type)&&(_t=a.stateNode,vn=!1),gr(t,n,a),ko(a.stateNode),_t=l,vn=h;break;case 5:zt||qs(a,n);case 6:if(l=_t,h=vn,_t=null,gr(t,n,a),_t=l,vn=h,_t!==null)if(vn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(a.stateNode)}catch(m){ct(a,n,m)}else try{_t.removeChild(a.stateNode)}catch(m){ct(a,n,m)}break;case 18:_t!==null&&(vn?(t=_t,Vy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),hl(t)):Vy(_t,a.stateNode));break;case 4:l=_t,h=vn,_t=a.stateNode.containerInfo,vn=!0,gr(t,n,a),_t=l,vn=h;break;case 0:case 11:case 14:case 15:Zr(2,a,n),zt||Zr(4,a,n),gr(t,n,a);break;case 1:zt||(qs(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&L0(a,n,l)),gr(t,n,a);break;case 21:gr(t,n,a);break;case 22:zt=(l=zt)||a.memoizedState!==null,gr(t,n,a),zt=l;break;default:gr(t,n,a)}}function G0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{hl(t)}catch(a){ct(n,n.return,a)}}}function Y0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{hl(t)}catch(a){ct(n,n.return,a)}}function l2(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new B0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new B0),n;default:throw Error(i(435,t.tag))}}function Tu(t,n){var a=l2(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=p2.bind(null,t,l);l.then(h,h)}})}function bn(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,v=n,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(ii(E.type)){_t=E.stateNode,vn=!1;break e}break;case 5:_t=E.stateNode,vn=!1;break e;case 3:case 4:_t=E.stateNode.containerInfo,vn=!0;break e}E=E.return}if(_t===null)throw Error(i(160));F0(m,v,h),_t=null,vn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)K0(n,t),n=n.sibling}var gs=null;function K0(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(n,t),_n(t),l&4&&(Zr(3,t,t.return),wo(3,t),Zr(5,t,t.return));break;case 1:bn(n,t),_n(t),l&512&&(zt||a===null||qs(a,a.return)),l&64&&mr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=gs;if(bn(n,t),_n(t),l&512&&(zt||a===null||qs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Cs]||m[Mt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),sn(m,l,a),m[Mt]=t,Ot(m),l=m;break e;case"link":var v=Ky("link","href",h).get(l+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break t}}m=h.createElement(l),sn(m,l,a),h.head.appendChild(m);break;case"meta":if(v=Ky("meta","content",h).get(l+(a.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break t}}m=h.createElement(l),sn(m,l,a),h.head.appendChild(m);break;default:throw Error(i(468,l))}m[Mt]=t,Ot(m),l=m}t.stateNode=l}else Qy(h,t.type,t.stateNode);else t.stateNode=Yy(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Qy(h,t.type,t.stateNode):Yy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&hf(t,t.memoizedProps,a.memoizedProps)}break;case 27:bn(n,t),_n(t),l&512&&(zt||a===null||qs(a,a.return)),a!==null&&l&4&&hf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(bn(n,t),_n(t),l&512&&(zt||a===null||qs(a,a.return)),t.flags&32){h=t.stateNode;try{xn(h,"")}catch(Se){ct(t,t.return,Se)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,hf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(gf=!0);break;case 6:if(bn(n,t),_n(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Se){ct(t,t.return,Se)}}break;case 3:if(zu=null,h=gs,gs=Pu(n.containerInfo),bn(n,t),gs=h,_n(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{hl(n.containerInfo)}catch(Se){ct(t,t.return,Se)}gf&&(gf=!1,Q0(t));break;case 4:l=gs,gs=Pu(t.stateNode.containerInfo),bn(n,t),_n(t),gs=l;break;case 12:bn(n,t),_n(t);break;case 31:bn(n,t),_n(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tu(t,l)));break;case 13:bn(n,t),_n(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Nu=Kt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tu(t,l)));break;case 22:h=t.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,H=mr,W=zt;if(mr=H||h,zt=W||k,bn(n,t),zt=W,mr=H,_n(t),l&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||k||mr||zt||oa(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){k=a=n;try{if(m=k.stateNode,h)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=k.stateNode;var se=k.memoizedProps.style,F=se!=null&&se.hasOwnProperty("display")?se.display:null;E.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(Se){ct(k,k.return,Se)}}}else if(n.tag===6){if(a===null){k=n;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(Se){ct(k,k.return,Se)}}}else if(n.tag===18){if(a===null){k=n;try{var $=k.stateNode;h?Ly($,!0):Ly(k.stateNode,!1)}catch(Se){ct(k,k.return,Se)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Tu(t,a))));break;case 19:bn(n,t),_n(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Tu(t,l)));break;case 30:break;case 21:break;default:bn(n,t),_n(t)}}function _n(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(U0(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,m=ff(t);Eu(t,m,h);break;case 5:var v=a.stateNode;a.flags&32&&(xn(v,""),a.flags&=-33);var E=ff(t);Eu(t,E,v);break;case 3:case 4:var k=a.stateNode.containerInfo,H=ff(t);mf(t,H,k);break;default:throw Error(i(161))}}catch(W){ct(t,t.return,W)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Q0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Q0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function pr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)H0(t,n.alternate,n),n=n.sibling}function oa(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Zr(4,n,n.return),oa(n);break;case 1:qs(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&L0(n,n.return,a),oa(n);break;case 27:ko(n.stateNode);case 26:case 5:qs(n,n.return),oa(n);break;case 22:n.memoizedState===null&&oa(n);break;case 30:oa(n);break;default:oa(n)}t=t.sibling}}function yr(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,m=n,v=m.flags;switch(m.tag){case 0:case 11:case 15:yr(h,m,a),wo(4,m);break;case 1:if(yr(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){ct(l,l.return,H)}if(l=m,h=l.updateQueue,h!==null){var E=l.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)Sp(k[h],E)}catch(H){ct(l,l.return,H)}}a&&v&64&&V0(m),Eo(m,m.return);break;case 27:z0(m);case 26:case 5:yr(h,m,a),a&&l===null&&v&4&&P0(m),Eo(m,m.return);break;case 12:yr(h,m,a);break;case 31:yr(h,m,a),a&&v&4&&G0(h,m);break;case 13:yr(h,m,a),a&&v&4&&Y0(h,m);break;case 22:m.memoizedState===null&&yr(h,m,a),Eo(m,m.return);break;case 30:break;default:yr(h,m,a)}n=n.sibling}}function pf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&oo(a))}function yf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oo(t))}function ps(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)$0(t,n,a,l),n=n.sibling}function $0(t,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:ps(t,n,a,l),h&2048&&wo(9,n);break;case 1:ps(t,n,a,l);break;case 3:ps(t,n,a,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oo(t)));break;case 12:if(h&2048){ps(t,n,a,l),t=n.stateNode;try{var m=n.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){ct(n,n.return,k)}}else ps(t,n,a,l);break;case 31:ps(t,n,a,l);break;case 13:ps(t,n,a,l);break;case 23:break;case 22:m=n.stateNode,v=n.alternate,n.memoizedState!==null?m._visibility&2?ps(t,n,a,l):To(t,n):m._visibility&2?ps(t,n,a,l):(m._visibility|=2,tl(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&pf(v,n);break;case 24:ps(t,n,a,l),h&2048&&yf(n.alternate,n);break;default:ps(t,n,a,l)}}function tl(t,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,v=n,E=a,k=l,H=v.flags;switch(v.tag){case 0:case 11:case 15:tl(m,v,E,k,h),wo(8,v);break;case 23:break;case 22:var W=v.stateNode;v.memoizedState!==null?W._visibility&2?tl(m,v,E,k,h):To(m,v):(W._visibility|=2,tl(m,v,E,k,h)),h&&H&2048&&pf(v.alternate,v);break;case 24:tl(m,v,E,k,h),h&&H&2048&&yf(v.alternate,v);break;default:tl(m,v,E,k,h)}n=n.sibling}}function To(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,h=l.flags;switch(l.tag){case 22:To(a,l),h&2048&&pf(l.alternate,l);break;case 24:To(a,l),h&2048&&yf(l.alternate,l);break;default:To(a,l)}n=n.sibling}}var So=8192;function nl(t,n,a){if(t.subtreeFlags&So)for(t=t.child;t!==null;)X0(t,n,a),t=t.sibling}function X0(t,n,a){switch(t.tag){case 26:nl(t,n,a),t.flags&So&&t.memoizedState!==null&&K2(a,gs,t.memoizedState,t.memoizedProps);break;case 5:nl(t,n,a);break;case 3:case 4:var l=gs;gs=Pu(t.stateNode.containerInfo),nl(t,n,a),gs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=So,So=16777216,nl(t,n,a),So=l):nl(t,n,a));break;default:nl(t,n,a)}}function W0(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function No(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Xt=l,J0(l,t)}W0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Z0(t),t=t.sibling}function Z0(t){switch(t.tag){case 0:case 11:case 15:No(t),t.flags&2048&&Zr(9,t,t.return);break;case 3:No(t);break;case 12:No(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Su(t)):No(t);break;default:No(t)}}function Su(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Xt=l,J0(l,t)}W0(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Zr(8,n,n.return),Su(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Su(n));break;default:Su(n)}t=t.sibling}}function J0(t,n){for(;Xt!==null;){var a=Xt;switch(a.tag){case 0:case 11:case 15:Zr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:oo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Xt=l;else e:for(a=t;Xt!==null;){l=Xt;var h=l.sibling,m=l.return;if(q0(l),l===a){Xt=null;break e}if(h!==null){h.return=m,Xt=h;break e}Xt=m}}}var o2={getCacheForType:function(t){var n=tn(Lt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return tn(Lt).controller.signal}},c2=typeof WeakMap=="function"?WeakMap:Map,it=0,mt=null,Ke=null,$e=0,ot=0,Mn=null,Jr=!1,sl=!1,xf=!1,xr=0,St=0,ei=0,ca=0,vf=0,On=0,rl=0,Ao=null,wn=null,bf=!1,Nu=0,ey=0,Au=1/0,ju=null,ti=null,Gt=0,ni=null,il=null,vr=0,_f=0,wf=null,ty=null,jo=0,Ef=null;function Vn(){return(it&2)!==0&&$e!==0?$e&-$e:Q.T!==null?Cf():Cc()}function ny(){if(On===0)if(($e&536870912)===0||et){var t=Vi;Vi<<=1,(Vi&3932160)===0&&(Vi=262144),On=t}else On=536870912;return t=kn.current,t!==null&&(t.flags|=32),On}function En(t,n,a){(t===mt&&(ot===2||ot===9)||t.cancelPendingCommit!==null)&&(al(t,0),si(t,$e,On,!1)),Li(t,a),((it&2)===0||t!==mt)&&(t===mt&&((it&2)===0&&(ca|=a),St===4&&si(t,$e,On,!1)),Fs(t))}function sy(t,n,a){if((it&6)!==0)throw Error(i(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||as(t,n),h=l?h2(t,n):Sf(t,n,!0),m=l;do{if(h===0){sl&&!l&&si(t,n,0,!1);break}else{if(a=t.current.alternate,m&&!u2(a)){h=Sf(t,n,!1),m=!1;continue}if(h===2){if(m=n,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var E=t;h=Ao;var k=E.current.memoizedState.isDehydrated;if(k&&(al(E,v).flags|=256),v=Sf(E,v,!1),v!==2){if(xf&&!k){E.errorRecoveryDisabledLanes|=m,ca|=m,h=4;break e}m=wn,wn=h,m!==null&&(wn===null?wn=m:wn.push.apply(wn,m))}h=v}if(m=!1,h!==2)continue}}if(h===1){al(t,0),si(t,n,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:si(l,n,On,!Jr);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(h=Nu+300-Kt(),10<h)){if(si(l,n,On,!Jr),Ns(l,0,!0)!==0)break e;vr=n,l.timeoutHandle=My(ry.bind(null,l,a,wn,ju,bf,n,On,ca,rl,Jr,m,"Throttled",-0,0),h);break e}ry(l,a,wn,ju,bf,n,On,ca,rl,Jr,m,null,-0,0)}}break}while(!0);Fs(t)}function ry(t,n,a,l,h,m,v,E,k,H,W,se,F,$){if(t.timeoutHandle=-1,se=n.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:cs},X0(n,m,se);var Se=(m&62914560)===m?Nu-Kt():(m&4194048)===m?ey-Kt():0;if(Se=Q2(se,Se),Se!==null){vr=m,t.cancelPendingCommit=Se(hy.bind(null,t,n,m,a,l,h,v,E,k,W,se,null,F,$)),si(t,m,v,!H);return}}hy(t,n,m,a,l,h,v,E,k)}function u2(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!Rn(m(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function si(t,n,a,l){n&=~vf,n&=~ca,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var m=31-Nt(h),v=1<<m;l[m]=-1,h&=~v}a!==0&&Pi(t,a,n)}function Cu(){return(it&6)===0?(Co(0),!1):!0}function Tf(){if(Ke!==null){if(ot===0)var t=Ke.return;else t=Ke,or=ea=null,Uh(t),Xa=null,uo=0,t=Ke;for(;t!==null;)O0(t.alternate,t),t=t.return;Ke=null}}function al(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,R2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),vr=0,Tf(),mt=t,Ke=a=ar(t.current,null),$e=n,ot=0,Mn=null,Jr=!1,sl=as(t,n),xf=!1,rl=On=vf=ca=ei=St=0,wn=Ao=null,bf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-Nt(l),m=1<<h;n|=t[h],l&=~m}return xr=n,Xc(),a}function iy(t,n){He=null,Q.H=vo,n===$a||n===ru?(n=_p(),ot=3):n===Ah?(n=_p(),ot=4):ot=n===tf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Mn=n,Ke===null&&(St=1,xu(t,Kn(n,t.current)))}function ay(){var t=kn.current;return t===null?!0:($e&4194048)===$e?Wn===null:($e&62914560)===$e||($e&536870912)!==0?t===Wn:!1}function ly(){var t=Q.H;return Q.H=vo,t===null?vo:t}function oy(){var t=Q.A;return Q.A=o2,t}function Ru(){St=4,Jr||($e&4194048)!==$e&&kn.current!==null||(sl=!0),(ei&134217727)===0&&(ca&134217727)===0||mt===null||si(mt,$e,On,!1)}function Sf(t,n,a){var l=it;it|=2;var h=ly(),m=oy();(mt!==t||$e!==n)&&(ju=null,al(t,n)),n=!1;var v=St;e:do try{if(ot!==0&&Ke!==null){var E=Ke,k=Mn;switch(ot){case 8:Tf(),v=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(n=!0);var H=ot;if(ot=0,Mn=null,ll(t,E,k,H),a&&sl){v=0;break e}break;default:H=ot,ot=0,Mn=null,ll(t,E,k,H)}}d2(),v=St;break}catch(W){iy(t,W)}while(!0);return n&&t.shellSuspendCounter++,or=ea=null,it=l,Q.H=h,Q.A=m,Ke===null&&(mt=null,$e=0,Xc()),v}function d2(){for(;Ke!==null;)cy(Ke)}function h2(t,n){var a=it;it|=2;var l=ly(),h=oy();mt!==t||$e!==n?(ju=null,Au=Kt()+500,al(t,n)):sl=as(t,n);e:do try{if(ot!==0&&Ke!==null){n=Ke;var m=Mn;t:switch(ot){case 1:ot=0,Mn=null,ll(t,n,m,1);break;case 2:case 9:if(vp(m)){ot=0,Mn=null,uy(n);break}n=function(){ot!==2&&ot!==9||mt!==t||(ot=7),Fs(t)},m.then(n,n);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:vp(m)?(ot=0,Mn=null,uy(n)):(ot=0,Mn=null,ll(t,n,m,7));break;case 5:var v=null;switch(Ke.tag){case 26:v=Ke.memoizedState;case 5:case 27:var E=Ke;if(v?$y(v):E.stateNode.complete){ot=0,Mn=null;var k=E.sibling;if(k!==null)Ke=k;else{var H=E.return;H!==null?(Ke=H,Iu(H)):Ke=null}break t}}ot=0,Mn=null,ll(t,n,m,5);break;case 6:ot=0,Mn=null,ll(t,n,m,6);break;case 8:Tf(),St=6;break e;default:throw Error(i(462))}}f2();break}catch(W){iy(t,W)}while(!0);return or=ea=null,Q.H=l,Q.A=h,it=a,Ke!==null?0:(mt=null,$e=0,Xc(),St)}function f2(){for(;Ke!==null&&!Pl();)cy(Ke)}function cy(t){var n=D0(t.alternate,t,xr);t.memoizedProps=t.pendingProps,n===null?Iu(t):Ke=n}function uy(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=A0(a,n,n.pendingProps,n.type,void 0,$e);break;case 11:n=A0(a,n,n.pendingProps,n.type.render,n.ref,$e);break;case 5:Uh(n);default:O0(a,n),n=Ke=op(n,xr),n=D0(a,n,xr)}t.memoizedProps=t.pendingProps,n===null?Iu(t):Ke=n}function ll(t,n,a,l){or=ea=null,Uh(n),Xa=null,uo=0;var h=n.return;try{if(t2(t,h,n,a,$e)){St=1,xu(t,Kn(a,t.current)),Ke=null;return}}catch(m){if(h!==null)throw Ke=h,m;St=1,xu(t,Kn(a,t.current)),Ke=null;return}n.flags&32768?(et||l===1?t=!0:sl||($e&536870912)!==0?t=!1:(Jr=t=!0,(l===2||l===9||l===3||l===6)&&(l=kn.current,l!==null&&l.tag===13&&(l.flags|=16384))),dy(n,t)):Iu(n)}function Iu(t){var n=t;do{if((n.flags&32768)!==0){dy(n,Jr);return}t=n.return;var a=r2(n.alternate,n,xr);if(a!==null){Ke=a;return}if(n=n.sibling,n!==null){Ke=n;return}Ke=n=t}while(n!==null);St===0&&(St=5)}function dy(t,n){do{var a=i2(t.alternate,t);if(a!==null){a.flags&=32767,Ke=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Ke=t;return}Ke=t=a}while(t!==null);St=6,Ke=null}function hy(t,n,a,l,h,m,v,E,k){t.cancelPendingCommit=null;do ku();while(Gt!==0);if((it&6)!==0)throw Error(i(327));if(n!==null){if(n===t.current)throw Error(i(177));if(m=n.lanes|n.childLanes,m|=hh,sh(t,a,m,v,E,k),t===mt&&(Ke=mt=null,$e=0),il=n,ni=t,vr=a,_f=m,wf=h,ty=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,y2(Es,function(){return yy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=de.p,de.p=2,v=it,it|=4;try{a2(t,n,a)}finally{it=v,de.p=h,Q.T=l}}Gt=1,fy(),my(),gy()}}function fy(){if(Gt===1){Gt=0;var t=ni,n=il,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=de.p;de.p=2;var h=it;it|=4;try{K0(n,t);var m=Lf,v=Jg(t.containerInfo),E=m.focusedElem,k=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&Zg(E.ownerDocument.documentElement,E)){if(k!==null&&lh(E)){var H=k.start,W=k.end;if(W===void 0&&(W=H),"selectionStart"in E)E.selectionStart=H,E.selectionEnd=Math.min(W,E.value.length);else{var se=E.ownerDocument||document,F=se&&se.defaultView||window;if(F.getSelection){var $=F.getSelection(),Se=E.textContent.length,ke=Math.min(k.start,Se),ft=k.end===void 0?ke:Math.min(k.end,Se);!$.extend&&ke>ft&&(v=ft,ft=ke,ke=v);var P=Wg(E,ke),O=Wg(E,ft);if(P&&O&&($.rangeCount!==1||$.anchorNode!==P.node||$.anchorOffset!==P.offset||$.focusNode!==O.node||$.focusOffset!==O.offset)){var B=se.createRange();B.setStart(P.node,P.offset),$.removeAllRanges(),ke>ft?($.addRange(B),$.extend(O.node,O.offset)):(B.setEnd(O.node,O.offset),$.addRange(B))}}}}for(se=[],$=E;$=$.parentNode;)$.nodeType===1&&se.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<se.length;E++){var ee=se[E];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Fu=!!Vf,Lf=Vf=null}finally{it=h,de.p=l,Q.T=a}}t.current=n,Gt=2}}function my(){if(Gt===2){Gt=0;var t=ni,n=il,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=de.p;de.p=2;var h=it;it|=4;try{H0(t,n.alternate,n)}finally{it=h,de.p=l,Q.T=a}}Gt=3}}function gy(){if(Gt===4||Gt===3){Gt=0,Oi();var t=ni,n=il,a=vr,l=ty;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Gt=5:(Gt=0,il=ni=null,py(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ti=null),nr(a),n=n.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(is,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=Q.T,h=de.p,de.p=2,Q.T=null;try{for(var m=t.onRecoverableError,v=0;v<l.length;v++){var E=l[v];m(E.value,{componentStack:E.stack})}}finally{Q.T=n,de.p=h}}(vr&3)!==0&&ku(),Fs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Ef?jo++:(jo=0,Ef=t):jo=0,Co(0)}}function py(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,oo(n)))}function ku(){return fy(),my(),gy(),yy()}function yy(){if(Gt!==5)return!1;var t=ni,n=_f;_f=0;var a=nr(vr),l=Q.T,h=de.p;try{de.p=32>a?32:a,Q.T=null,a=wf,wf=null;var m=ni,v=vr;if(Gt=0,il=ni=null,vr=0,(it&6)!==0)throw Error(i(331));var E=it;if(it|=4,Z0(m.current),$0(m,m.current,v,a),it=E,Co(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(is,m)}catch{}return!0}finally{de.p=h,Q.T=l,py(t,n)}}function xy(t,n,a){n=Kn(a,n),n=ef(t.stateNode,n,2),t=$r(t,n,2),t!==null&&(Li(t,2),Fs(t))}function ct(t,n,a){if(t.tag===3)xy(t,t,a);else for(;n!==null;){if(n.tag===3){xy(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ti===null||!ti.has(l))){t=Kn(a,t),a=v0(2),l=$r(n,a,2),l!==null&&(b0(a,l,n,t),Li(l,2),Fs(l));break}}n=n.return}}function Nf(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new c2;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(xf=!0,h.add(a),t=m2.bind(null,t,n,a),n.then(t,t))}function m2(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,mt===t&&($e&a)===a&&(St===4||St===3&&($e&62914560)===$e&&300>Kt()-Nu?(it&2)===0&&al(t,0):vf|=a,rl===$e&&(rl=0)),Fs(t)}function vy(t,n){n===0&&(n=jc()),t=Wi(t,n),t!==null&&(Li(t,n),Fs(t))}function g2(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),vy(t,a)}function p2(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(n),vy(t,a)}function y2(t,n){return gt(t,n)}var Du=null,ol=null,Af=!1,Mu=!1,jf=!1,ri=0;function Fs(t){t!==ol&&t.next===null&&(ol===null?Du=ol=t:ol=ol.next=t),Mu=!0,Af||(Af=!0,v2())}function Co(t,n){if(!jf&&Mu){jf=!0;do for(var a=!1,l=Du;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var v=l.suspendedLanes,E=l.pingedLanes;m=(1<<31-Nt(42|t)+1)-1,m&=h&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Ey(l,m))}else m=$e,m=Ns(l,l===mt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||as(l,m)||(a=!0,Ey(l,m));l=l.next}while(a);jf=!1}}function x2(){by()}function by(){Mu=Af=!1;var t=0;ri!==0&&C2()&&(t=ri);for(var n=Kt(),a=null,l=Du;l!==null;){var h=l.next,m=_y(l,n);m===0?(l.next=null,a===null?Du=h:a.next=h,h===null&&(ol=a)):(a=l,(t!==0||(m&3)!==0)&&(Mu=!0)),l=h}Gt!==0&&Gt!==5||Co(t),ri!==0&&(ri=0)}function _y(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-Nt(m),E=1<<v,k=h[v];k===-1?((E&a)===0||(E&l)!==0)&&(h[v]=nh(E,n)):k<=n&&(t.expiredLanes|=E),m&=~E}if(n=mt,a=$e,a=Ns(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(ot===2||ot===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&fn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||as(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&fn(l),nr(a)){case 2:case 8:a=Dr;break;case 32:a=Es;break;case 268435456:a=Sa;break;default:a=Es}return l=wy.bind(null,t),a=gt(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&fn(l),t.callbackPriority=2,t.callbackNode=null,2}function wy(t,n){if(Gt!==0&&Gt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ku()&&t.callbackNode!==a)return null;var l=$e;return l=Ns(t,t===mt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(sy(t,l,n),_y(t,Kt()),t.callbackNode!=null&&t.callbackNode===a?wy.bind(null,t):null)}function Ey(t,n){if(ku())return null;sy(t,n,!0)}function v2(){I2(function(){(it&6)!==0?gt(tr,x2):by()})}function Cf(){if(ri===0){var t=Ka;t===0&&(t=Ts,Ts<<=1,(Ts&261888)===0&&(Ts=256)),ri=t}return ri}function Ty(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ka(""+t)}function Sy(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function b2(t,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var m=Ty((h[Qt]||null).action),v=l.submitter;v&&(n=(n=v[Qt]||null)?Ty(n.formAction):v.getAttribute("formAction"),n!==null&&(m=n,v=null));var E=new Ls("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ri!==0){var k=v?Sy(h,v):new FormData(h);Qh(a,{pending:!0,data:k,method:h.method,action:m},null,k)}}else typeof m=="function"&&(E.preventDefault(),k=v?Sy(h,v):new FormData(h),Qh(a,{pending:!0,data:k,method:h.method,action:m},m,k))},currentTarget:h}]})}}for(var Rf=0;Rf<dh.length;Rf++){var If=dh[Rf],_2=If.toLowerCase(),w2=If[0].toUpperCase()+If.slice(1);ms(_2,"on"+w2)}ms(np,"onAnimationEnd"),ms(sp,"onAnimationIteration"),ms(rp,"onAnimationStart"),ms("dblclick","onDoubleClick"),ms("focusin","onFocus"),ms("focusout","onBlur"),ms(P1,"onTransitionRun"),ms(U1,"onTransitionStart"),ms(z1,"onTransitionCancel"),ms(ip,"onTransitionEnd"),Ds("onMouseEnter",["mouseout","mouseover"]),Ds("onMouseLeave",["mouseout","mouseover"]),Ds("onPointerEnter",["pointerout","pointerover"]),Ds("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ro));function Ny(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var v=l.length-1;0<=v;v--){var E=l[v],k=E.instance,H=E.currentTarget;if(E=E.listener,k!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=H;try{m(h)}catch(W){$c(W)}h.currentTarget=null,m=k}else for(v=0;v<l.length;v++){if(E=l[v],k=E.instance,H=E.currentTarget,E=E.listener,k!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=H;try{m(h)}catch(W){$c(W)}h.currentTarget=null,m=k}}}}function Qe(t,n){var a=n[Aa];a===void 0&&(a=n[Aa]=new Set);var l=t+"__bubble";a.has(l)||(Ay(n,t,2,!1),a.add(l))}function kf(t,n,a){var l=0;n&&(l|=4),Ay(a,t,l,n)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function Df(t){if(!t[Ou]){t[Ou]=!0,Bl.forEach(function(a){a!=="selectionchange"&&(E2.has(a)||kf(a,!1,t),kf(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ou]||(n[Ou]=!0,kf("selectionchange",!1,n))}}function Ay(t,n,a,l){switch(nx(n)){case 2:var h=W2;break;case 8:h=Z2;break;default:h=Qf}a=h.bind(null,n,a,t),h=void 0,!qi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Mf(t,n,a,l,h){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=l.return;v!==null;){var k=v.tag;if((k===3||k===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=Rs(E),v===null)return;if(k=v.tag,k===5||k===6||k===26||k===27){l=m=v;continue e}E=E.parentNode}}l=l.return}Ur(function(){var H=m,W=qn(a),se=[];e:{var F=ap.get(t);if(F!==void 0){var $=Ls,Se=t;switch(t){case"keypress":if(Gi(a)===0)break e;case"keydown":case"keyup":$=Yc;break;case"focusin":Se="focus",$=Ki;break;case"focusout":Se="blur",$=Ki;break;case"beforeblur":case"afterblur":$=Ki;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Lc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=g;break;case np:case sp:case rp:$=Uc;break;case ip:$=S;break;case"scroll":case"scrollend":$=Jl;break;case"wheel":$=K;break;case"copy":case"cut":case"paste":$=zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ir;break;case"toggle":case"beforetoggle":$=Be}var ke=(n&4)!==0,ft=!ke&&(t==="scroll"||t==="scrollend"),P=ke?F!==null?F+"Capture":null:F;ke=[];for(var O=H,B;O!==null;){var ee=O;if(B=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||B===null||P===null||(ee=us(O,P),ee!=null&&ke.push(Io(O,ee,B))),ft)break;O=O.return}0<ke.length&&(F=new $(F,Se,null,a,W),se.push({event:F,listeners:ke}))}}if((n&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",F&&a!==Xl&&(Se=a.relatedTarget||a.fromElement)&&(Rs(Se)||Se[js]))break e;if(($||F)&&(F=W.window===W?W:(F=W.ownerDocument)?F.defaultView||F.parentWindow:window,$?(Se=a.relatedTarget||a.toElement,$=H,Se=Se?Rs(Se):null,Se!==null&&(ft=d(Se),ke=Se.tag,Se!==ft||ke!==5&&ke!==27&&ke!==6)&&(Se=null)):($=null,Se=H),$!==Se)){if(ke=eo,ee="onMouseLeave",P="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(ke=ir,ee="onPointerLeave",P="onPointerEnter",O="pointer"),ft=$==null?F:jn($),B=Se==null?F:jn(Se),F=new ke(ee,O+"leave",$,a,W),F.target=ft,F.relatedTarget=B,ee=null,Rs(W)===H&&(ke=new ke(P,O+"enter",Se,a,W),ke.target=B,ke.relatedTarget=ft,ee=ke),ft=ee,$&&Se)t:{for(ke=T2,P=$,O=Se,B=0,ee=P;ee;ee=ke(ee))B++;ee=0;for(var Re=O;Re;Re=ke(Re))ee++;for(;0<B-ee;)P=ke(P),B--;for(;0<ee-B;)O=ke(O),ee--;for(;B--;){if(P===O||O!==null&&P===O.alternate){ke=P;break t}P=ke(P),O=ke(O)}ke=null}else ke=null;$!==null&&jy(se,F,$,ke,!1),Se!==null&&ft!==null&&jy(se,ft,Se,ke,!0)}}e:{if(F=H?jn(H):window,$=F.nodeName&&F.nodeName.toLowerCase(),$==="select"||$==="input"&&F.type==="file")var nt=Gg;else if(qg(F))if(Yg)nt=O1;else{nt=D1;var Ae=k1}else $=F.nodeName,!$||$.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&Ia(H.elementType)&&(nt=Gg):nt=M1;if(nt&&(nt=nt(t,H))){Fg(se,nt,a,W);break e}Ae&&Ae(t,F,H),t==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&Kl(F,"number",F.value)}switch(Ae=H?jn(H):window,t){case"focusin":(qg(Ae)||Ae.contentEditable==="true")&&(Ua=Ae,oh=H,io=null);break;case"focusout":io=oh=Ua=null;break;case"mousedown":ch=!0;break;case"contextmenu":case"mouseup":case"dragend":ch=!1,ep(se,a,W);break;case"selectionchange":if(L1)break;case"keydown":case"keyup":ep(se,a,W)}var Fe;if(rt)e:{switch(t){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Pa?Qi(t,a)&&(Xe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Xe="onCompositionStart");Xe&&(zs&&a.locale!=="ko"&&(Pa||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Pa&&(Fe=Zl()):(Vs=W,Wl="value"in Vs?Vs.value:Vs.textContent,Pa=!0)),Ae=Vu(H,Xe),0<Ae.length&&(Xe=new Us(Xe,t,null,a,W),se.push({event:Xe,listeners:Ae}),Fe?Xe.data=Fe:(Fe=La(a),Fe!==null&&(Xe.data=Fe)))),(Fe=Gn?j1(t,a):C1(t,a))&&(Xe=Vu(H,"onBeforeInput"),0<Xe.length&&(Ae=new Us("onBeforeInput","beforeinput",null,a,W),se.push({event:Ae,listeners:Xe}),Ae.data=Fe)),b2(se,t,H,a,W)}Ny(se,n)})}function Io(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Vu(t,n){for(var a=n+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=us(t,a),h!=null&&l.unshift(Io(t,h,m)),h=us(t,n),h!=null&&l.push(Io(t,h,m))),t.tag===3)return l;t=t.return}return[]}function T2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function jy(t,n,a,l,h){for(var m=n._reactName,v=[];a!==null&&a!==l;){var E=a,k=E.alternate,H=E.stateNode;if(E=E.tag,k!==null&&k===l)break;E!==5&&E!==26&&E!==27||H===null||(k=H,h?(H=us(a,m),H!=null&&v.unshift(Io(a,H,k))):h||(H=us(a,m),H!=null&&v.push(Io(a,H,k)))),a=a.return}v.length!==0&&t.push({event:n,listeners:v})}var S2=/\r\n?/g,N2=/\u0000|\uFFFD/g;function Cy(t){return(typeof t=="string"?t:""+t).replace(S2,`
`).replace(N2,"")}function Ry(t,n){return n=Cy(n),Cy(t)===n}function ht(t,n,a,l,h,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||xn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&xn(t,""+l);break;case"className":Cn(t,"class",l);break;case"tabIndex":Cn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(t,a,l);break;case"style":$l(t,l,m);break;case"data":if(n!=="object"){Cn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ka(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&ht(t,n,"name",h.name,h,null),ht(t,n,"formEncType",h.formEncType,h,null),ht(t,n,"formMethod",h.formMethod,h,null),ht(t,n,"formTarget",h.formTarget,h,null)):(ht(t,n,"encType",h.encType,h,null),ht(t,n,"method",h.method,h,null),ht(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ka(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=cs);break;case"onScroll":l!=null&&Qe("scroll",t);break;case"onScrollEnd":l!=null&&Qe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ka(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Qe("beforetoggle",t),Qe("toggle",t),Ca(t,"popover",l);break;case"xlinkActuate":Vt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Vt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Vt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Vt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Vt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Vt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ca(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vc.get(a)||a,Ca(t,a,l))}}function Of(t,n,a,l,h,m){switch(a){case"style":$l(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?xn(t,l):(typeof l=="number"||typeof l=="bigint")&&xn(t,""+l);break;case"onScroll":l!=null&&Qe("scroll",t);break;case"onScrollEnd":l!=null&&Qe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=cs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),m=t[Qt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(n,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ca(t,a,l)}}}function sn(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",t),Qe("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var v=a[m];if(v!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:ht(t,n,m,v,a,null)}}h&&ht(t,n,"srcSet",a.srcSet,a,null),l&&ht(t,n,"src",a.src,a,null);return;case"input":Qe("invalid",t);var E=m=v=h=null,k=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":h=W;break;case"type":v=W;break;case"checked":k=W;break;case"defaultChecked":H=W;break;case"value":m=W;break;case"defaultValue":E=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,n));break;default:ht(t,n,l,W,a,null)}}Dc(t,m,E,k,H,v,h,!1);return;case"select":Qe("invalid",t),l=v=m=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:ht(t,n,h,E,a,null)}n=m,a=v,t.multiple=!!l,n!=null?Or(t,!!l,n,!1):a!=null&&Or(t,!!l,a,!0);return;case"textarea":Qe("invalid",t),m=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":h=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:ht(t,n,v,E,a,null)}Vr(t,l,h,m);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ht(t,n,k,l,a,null)}return;case"dialog":Qe("beforetoggle",t),Qe("toggle",t),Qe("cancel",t),Qe("close",t);break;case"iframe":case"object":Qe("load",t);break;case"video":case"audio":for(l=0;l<Ro.length;l++)Qe(Ro[l],t);break;case"image":Qe("error",t),Qe("load",t);break;case"details":Qe("toggle",t);break;case"embed":case"source":case"link":Qe("error",t),Qe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:ht(t,n,H,l,a,null)}return;default:if(Ia(n)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&Of(t,n,W,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&ht(t,n,E,l,a,null))}function A2(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,v=null,E=null,k=null,H=null,W=null;for($ in a){var se=a[$];if(a.hasOwnProperty($)&&se!=null)switch($){case"checked":break;case"value":break;case"defaultValue":k=se;default:l.hasOwnProperty($)||ht(t,n,$,null,l,se)}}for(var F in l){var $=l[F];if(se=a[F],l.hasOwnProperty(F)&&($!=null||se!=null))switch(F){case"type":m=$;break;case"name":h=$;break;case"checked":H=$;break;case"defaultChecked":W=$;break;case"value":v=$;break;case"defaultValue":E=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,n));break;default:$!==se&&ht(t,n,F,$,l,se)}}Ra(t,v,E,k,H,W,m,h);return;case"select":$=v=E=F=null;for(m in a)if(k=a[m],a.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":$=k;default:l.hasOwnProperty(m)||ht(t,n,m,null,l,k)}for(h in l)if(m=l[h],k=a[h],l.hasOwnProperty(h)&&(m!=null||k!=null))switch(h){case"value":F=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==k&&ht(t,n,h,m,l,k)}n=E,a=v,l=$,F!=null?Or(t,!!a,F,!1):!!l!=!!a&&(n!=null?Or(t,!!a,n,!0):Or(t,!!a,a?[]:"",!1));return;case"textarea":$=F=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ht(t,n,E,null,l,h)}for(v in l)if(h=l[v],m=a[v],l.hasOwnProperty(v)&&(h!=null||m!=null))switch(v){case"value":F=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&ht(t,n,v,h,l,m)}Mc(t,F,$);return;case"option":for(var Se in a)if(F=a[Se],a.hasOwnProperty(Se)&&F!=null&&!l.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:ht(t,n,Se,null,l,F)}for(k in l)if(F=l[k],$=a[k],l.hasOwnProperty(k)&&F!==$&&(F!=null||$!=null))switch(k){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:ht(t,n,k,F,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in a)F=a[ke],a.hasOwnProperty(ke)&&F!=null&&!l.hasOwnProperty(ke)&&ht(t,n,ke,null,l,F);for(H in l)if(F=l[H],$=a[H],l.hasOwnProperty(H)&&F!==$&&(F!=null||$!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,n));break;default:ht(t,n,H,F,l,$)}return;default:if(Ia(n)){for(var ft in a)F=a[ft],a.hasOwnProperty(ft)&&F!==void 0&&!l.hasOwnProperty(ft)&&Of(t,n,ft,void 0,l,F);for(W in l)F=l[W],$=a[W],!l.hasOwnProperty(W)||F===$||F===void 0&&$===void 0||Of(t,n,W,F,l,$);return}}for(var P in a)F=a[P],a.hasOwnProperty(P)&&F!=null&&!l.hasOwnProperty(P)&&ht(t,n,P,null,l,F);for(se in l)F=l[se],$=a[se],!l.hasOwnProperty(se)||F===$||F==null&&$==null||ht(t,n,se,F,l,$)}function Iy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function j2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,v=h.initiatorType,E=h.duration;if(m&&E&&Iy(v)){for(v=0,E=h.responseEnd,l+=1;l<a.length;l++){var k=a[l],H=k.startTime;if(H>E)break;var W=k.transferSize,se=k.initiatorType;W&&Iy(se)&&(k=k.responseEnd,v+=W*(k<E?1:(E-H)/(k-H)))}if(--l,n+=8*(m+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Vf=null,Lf=null;function Lu(t){return t.nodeType===9?t:t.ownerDocument}function ky(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Pf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Uf=null;function C2(){var t=window.event;return t&&t.type==="popstate"?t===Uf?!1:(Uf=t,!0):(Uf=null,!1)}var My=typeof setTimeout=="function"?setTimeout:void 0,R2=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,I2=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(t){return Oy.resolve(null).then(t).catch(k2)}:My;function k2(t){setTimeout(function(){throw t})}function ii(t){return t==="head"}function Vy(t,n){var a=n,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),hl(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ko(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,ko(a);for(var m=a.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[Cs]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=v}}else a==="body"&&ko(t.ownerDocument.body);a=h}while(a);hl(n)}function Ly(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function zf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zf(a),ja(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function D2(t,n,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Cs])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Zn(t.nextSibling),t===null)break}return null}function M2(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Zn(t.nextSibling),t===null))return null;return t}function Py(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Zn(t.nextSibling),t===null))return null;return t}function Bf(t){return t.data==="$?"||t.data==="$~"}function Hf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function O2(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Zn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var qf=null;function Uy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return Zn(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function zy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function By(t,n,a){switch(n=Lu(a),t){case"html":if(t=n.documentElement,!t)throw Error(i(452));return t;case"head":if(t=n.head,!t)throw Error(i(453));return t;case"body":if(t=n.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function ko(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ja(t)}var Jn=new Map,Hy=new Set;function Pu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var br=de.d;de.d={f:V2,r:L2,D:P2,C:U2,L:z2,m:B2,X:q2,S:H2,M:F2};function V2(){var t=br.f(),n=Cu();return t||n}function L2(t){var n=Hn(t);n!==null&&n.tag===5&&n.type==="form"?i0(n):br.r(t)}var cl=typeof document>"u"?null:document;function qy(t,n,a){var l=cl;if(l&&typeof n=="string"&&n){var h=yn(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Hy.has(h)||(Hy.add(h),t={rel:t,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),sn(n,"link",t),Ot(n),l.head.appendChild(n)))}}function P2(t){br.D(t),qy("dns-prefetch",t,null)}function U2(t,n){br.C(t,n),qy("preconnect",t,n)}function z2(t,n,a){br.L(t,n,a);var l=cl;if(l&&t&&n){var h='link[rel="preload"][as="'+yn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+yn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+yn(a.imageSizes)+'"]')):h+='[href="'+yn(t)+'"]';var m=h;switch(n){case"style":m=ul(t);break;case"script":m=dl(t)}Jn.has(m)||(t=T({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Jn.set(m,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(Do(m))||n==="script"&&l.querySelector(Mo(m))||(n=l.createElement("link"),sn(n,"link",t),Ot(n),l.head.appendChild(n)))}}function B2(t,n){br.m(t,n);var a=cl;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+yn(l)+'"][href="'+yn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=dl(t)}if(!Jn.has(m)&&(t=T({rel:"modulepreload",href:t},n),Jn.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Mo(m)))return}l=a.createElement("link"),sn(l,"link",t),Ot(l),a.head.appendChild(l)}}}function H2(t,n,a){br.S(t,n,a);var l=cl;if(l&&t){var h=Is(l).hoistableStyles,m=ul(t);n=n||"default";var v=h.get(m);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(Do(m)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Jn.get(m))&&Ff(t,a);var k=v=l.createElement("link");Ot(k),sn(k,"link",t),k._p=new Promise(function(H,W){k.onload=H,k.onerror=W}),k.addEventListener("load",function(){E.loading|=1}),k.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Uu(v,n,l)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(m,v)}}}function q2(t,n){br.X(t,n);var a=cl;if(a&&t){var l=Is(a).hoistableScripts,h=dl(t),m=l.get(h);m||(m=a.querySelector(Mo(h)),m||(t=T({src:t,async:!0},n),(n=Jn.get(h))&&Gf(t,n),m=a.createElement("script"),Ot(m),sn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function F2(t,n){br.M(t,n);var a=cl;if(a&&t){var l=Is(a).hoistableScripts,h=dl(t),m=l.get(h);m||(m=a.querySelector(Mo(h)),m||(t=T({src:t,async:!0,type:"module"},n),(n=Jn.get(h))&&Gf(t,n),m=a.createElement("script"),Ot(m),sn(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Fy(t,n,a,l){var h=(h=te.current)?Pu(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=ul(a.href),a=Is(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ul(a.href);var m=Is(h).hoistableStyles,v=m.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=h.querySelector(Do(t)))&&!m._p&&(v.instance=m,v.state.loading=5),Jn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jn.set(t,a),m||G2(h,t,a,v.state))),n&&l===null)throw Error(i(528,""));return v}if(n&&l!==null)throw Error(i(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=dl(a),a=Is(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function ul(t){return'href="'+yn(t)+'"'}function Do(t){return'link[rel="stylesheet"]['+t+"]"}function Gy(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function G2(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),sn(n,"link",a),Ot(n),t.head.appendChild(n))}function dl(t){return'[src="'+yn(t)+'"]'}function Mo(t){return"script[async]"+t}function Yy(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+yn(a.href)+'"]');if(l)return n.instance=l,Ot(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ot(l),sn(l,"style",h),Uu(l,a.precedence,t),n.instance=l;case"stylesheet":h=ul(a.href);var m=t.querySelector(Do(h));if(m)return n.state.loading|=4,n.instance=m,Ot(m),m;l=Gy(a),(h=Jn.get(h))&&Ff(l,h),m=(t.ownerDocument||t).createElement("link"),Ot(m);var v=m;return v._p=new Promise(function(E,k){v.onload=E,v.onerror=k}),sn(m,"link",l),n.state.loading|=4,Uu(m,a.precedence,t),n.instance=m;case"script":return m=dl(a.src),(h=t.querySelector(Mo(m)))?(n.instance=h,Ot(h),h):(l=a,(h=Jn.get(m))&&(l=T({},a),Gf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Ot(h),sn(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Uu(l,a.precedence,t));return n.instance}function Uu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===n)m=E;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Ff(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Gf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var zu=null;function Ky(t,n,a){if(zu===null){var l=new Map,h=zu=new Map;h.set(a,l)}else h=zu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Cs]||m[Mt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(n)||"";v=t+v;var E=l.get(v);E?E.push(m):l.set(v,[m])}}return l}function Qy(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function Y2(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function $y(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function K2(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=ul(l.href),m=n.querySelector(Do(h));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Bu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=m,Ot(m);return}m=n.ownerDocument||n,l=Gy(l),(h=Jn.get(h))&&Ff(l,h),m=m.createElement("link"),Ot(m);var v=m;v._p=new Promise(function(E,k){v.onload=E,v.onerror=k}),sn(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Bu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var Yf=0;function Q2(t,n){return t.stylesheets&&t.count===0&&qu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&qu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&Yf===0&&(Yf=62500*j2());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&qu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Yf?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Bu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Hu=null;function qu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Hu=new Map,n.forEach($2,t),Hu=null,Bu.call(t))}function $2(t,n){if(!(n.state.loading&4)){var a=Hu.get(t);if(a)var l=a.get(null);else{a=new Map,Hu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var v=h[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=n.instance,v=h.getAttribute("data-precedence"),m=a.get(v)||l,m===l&&a.set(null,h),a.set(v,h),this.count++,l=Bu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var Oo={$$typeof:me,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function X2(t,n,a,l,h,m,v,E,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=As(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=As(0),this.hiddenUpdates=As(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Xy(t,n,a,l,h,m,v,E,k,H,W,se){return t=new X2(t,n,a,v,k,H,W,se,E),n=1,m===!0&&(n|=24),m=In(3,null,null,n),t.current=m,m.stateNode=t,n=Th(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},jh(m),t}function Wy(t){return t?(t=Ha,t):Ha}function Zy(t,n,a,l,h,m){h=Wy(h),l.context===null?l.context=h:l.pendingContext=h,l=Qr(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=$r(t,l,n),a!==null&&(En(a,t,n),fo(a,t,n))}function Jy(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Kf(t,n){Jy(t,n),(t=t.alternate)&&Jy(t,n)}function ex(t){if(t.tag===13||t.tag===31){var n=Wi(t,67108864);n!==null&&En(n,t,67108864),Kf(t,67108864)}}function tx(t){if(t.tag===13||t.tag===31){var n=Vn();n=Ui(n);var a=Wi(t,n);a!==null&&En(a,t,n),Kf(t,n)}}var Fu=!0;function W2(t,n,a,l){var h=Q.T;Q.T=null;var m=de.p;try{de.p=2,Qf(t,n,a,l)}finally{de.p=m,Q.T=h}}function Z2(t,n,a,l){var h=Q.T;Q.T=null;var m=de.p;try{de.p=8,Qf(t,n,a,l)}finally{de.p=m,Q.T=h}}function Qf(t,n,a,l){if(Fu){var h=$f(l);if(h===null)Mf(t,n,l,Gu,a),sx(t,l);else if(ew(h,t,n,a,l))l.stopPropagation();else if(sx(t,l),n&4&&-1<J2.indexOf(t)){for(;h!==null;){var m=Hn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ss(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var k=1<<31-Nt(v);E.entanglements[1]|=k,v&=~k}Fs(m),(it&6)===0&&(Au=Kt()+500,Co(0))}}break;case 31:case 13:E=Wi(m,2),E!==null&&En(E,m,2),Cu(),Kf(m,2)}if(m=$f(l),m===null&&Mf(t,n,l,Gu,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Mf(t,n,l,null,a)}}function $f(t){return t=qn(t),Xf(t)}var Gu=null;function Xf(t){if(Gu=null,t=Rs(t),t!==null){var n=d(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Gu=t,null}function nx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(er()){case tr:return 2;case Dr:return 8;case Es:case zn:return 32;case Sa:return 268435456;default:return 32}default:return 32}}var Wf=!1,ai=null,li=null,oi=null,Vo=new Map,Lo=new Map,ci=[],J2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sx(t,n){switch(t){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":Vo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(n.pointerId)}}function Po(t,n,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},n!==null&&(n=Hn(n),n!==null&&ex(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function ew(t,n,a,l,h){switch(n){case"focusin":return ai=Po(ai,t,n,a,l,h),!0;case"dragenter":return li=Po(li,t,n,a,l,h),!0;case"mouseover":return oi=Po(oi,t,n,a,l,h),!0;case"pointerover":var m=h.pointerId;return Vo.set(m,Po(Vo.get(m)||null,t,n,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Lo.set(m,Po(Lo.get(m)||null,t,n,a,l,h)),!0}return!1}function rx(t){var n=Rs(t.target);if(n!==null){var a=d(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,ls(t.priority,function(){tx(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,ls(t.priority,function(){tx(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=$f(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Xl=l,a.target.dispatchEvent(l),Xl=null}else return n=Hn(a),n!==null&&ex(n),t.blockedOn=a,!1;n.shift()}return!0}function ix(t,n,a){Yu(t)&&a.delete(n)}function tw(){Wf=!1,ai!==null&&Yu(ai)&&(ai=null),li!==null&&Yu(li)&&(li=null),oi!==null&&Yu(oi)&&(oi=null),Vo.forEach(ix),Lo.forEach(ix)}function Ku(t,n){t.blockedOn===n&&(t.blockedOn=null,Wf||(Wf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,tw)))}var Qu=null;function ax(t){Qu!==t&&(Qu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Qu===t&&(Qu=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(Xf(l||a)===null)continue;break}var m=Hn(a);m!==null&&(t.splice(n,3),n-=3,Qh(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function hl(t){function n(k){return Ku(k,t)}ai!==null&&Ku(ai,t),li!==null&&Ku(li,t),oi!==null&&Ku(oi,t),Vo.forEach(n),Lo.forEach(n);for(var a=0;a<ci.length;a++){var l=ci[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ci.length&&(a=ci[0],a.blockedOn===null);)rx(a),a.blockedOn===null&&ci.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],v=h[Qt]||null;if(typeof m=="function")v||ax(a);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(h=m,v=m[Qt]||null)E=v.formAction;else if(Xf(h)!==null)continue}else E=v.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),ax(a)}}}function lx(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Zf(t){this._internalRoot=t}$u.prototype.render=Zf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));var a=n.current,l=Vn();Zy(a,l,t,n,null,null)},$u.prototype.unmount=Zf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Zy(t.current,2,null,t,null,null),Cu(),n[js]=null}};function $u(t){this._internalRoot=t}$u.prototype.unstable_scheduleHydration=function(t){if(t){var n=Cc();t={blockedOn:null,target:t,priority:n};for(var a=0;a<ci.length&&n!==0&&n<ci[a].priority;a++);ci.splice(a,0,t),a===0&&rx(t)}};var ox=e.version;if(ox!=="19.2.0")throw Error(i(527,ox,"19.2.0"));de.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var nw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xu.isDisabled&&Xu.supportsFiber)try{is=Xu.inject(nw),Zt=Xu}catch{}}return zo.createRoot=function(t,n){if(!o(t))throw Error(i(299));var a=!1,l="",h=g0,m=p0,v=y0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Xy(t,1,!1,null,null,a,l,null,h,m,v,lx),t[js]=n.current,Df(t),new Zf(n)},zo.hydrateRoot=function(t,n,a){if(!o(t))throw Error(i(299));var l=!1,h="",m=g0,v=p0,E=y0,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),n=Xy(t,1,!0,n,a??null,l,h,k,m,v,E,lx),n.context=Wy(null),a=n.current,l=Vn(),l=Ui(l),h=Qr(l),h.callback=null,$r(a,h,l),a=l,n.current.lanes=a,Li(n,a),Fs(n),t[js]=n.current,Df(t),new $u(n)},zo.version="19.2.0",zo}var xx;function hw(){if(xx)return tm.exports;xx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),tm.exports=dw(),tm.exports}var fw=hw();const mw=()=>{};var vx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=function(r){const e=[];let s=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},gw=function(r){const e=[];let s=0,i=0;for(;s<r.length;){const o=r[s++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const d=r[s++];e[i++]=String.fromCharCode((o&31)<<6|d&63)}else if(o>239&&o<365){const d=r[s++],f=r[s++],p=r[s++],x=((o&7)<<18|(d&63)<<12|(f&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(x>>10)),e[i++]=String.fromCharCode(56320+(x&1023))}else{const d=r[s++],f=r[s++];e[i++]=String.fromCharCode((o&15)<<12|(d&63)<<6|f&63)}}return e.join("")},tb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const d=r[o],f=o+1<r.length,p=f?r[o+1]:0,x=o+2<r.length,y=x?r[o+2]:0,_=d>>2,T=(d&3)<<4|p>>4;let N=(p&15)<<2|y>>6,U=y&63;x||(U=64,f||(N=64)),i.push(s[_],s[T],s[N],s[U])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(eb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):gw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const d=s[r.charAt(o++)],p=o<r.length?s[r.charAt(o)]:0;++o;const y=o<r.length?s[r.charAt(o)]:64;++o;const T=o<r.length?s[r.charAt(o)]:64;if(++o,d==null||p==null||y==null||T==null)throw new pw;const N=d<<2|p>>4;if(i.push(N),y!==64){const U=p<<4&240|y>>2;if(i.push(U),T!==64){const X=y<<6&192|T;i.push(X)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class pw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yw=function(r){const e=eb(r);return tb.encodeByteArray(e,!0)},md=function(r){return yw(r).replace(/\./g,"")},nb=function(r){try{return tb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=()=>xw().__FIREBASE_DEFAULTS__,bw=()=>{if(typeof process>"u"||typeof vx>"u")return;const r=vx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},_w=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&nb(r[1]);return e&&JSON.parse(e)},Md=()=>{try{return mw()||vw()||bw()||_w()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},sb=r=>Md()?.emulatorHosts?.[r],ww=r=>{const e=sb(r);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),i]:[e.substring(0,s),i]},rb=()=>Md()?.config,ib=r=>Md()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,i)=>{s?this.reject(s):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ab(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,d=r.sub||r.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...r};return[md(JSON.stringify(s)),md(JSON.stringify(f)),""].join(".")}const Ko={};function Sw(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ko))Ko[e]?r.emulator.push(e):r.prod.push(e);return r}function Nw(r){let e=document.getElementById(r),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),s=!0),{created:s,element:e}}let bx=!1;function lb(r,e){if(typeof window>"u"||typeof document>"u"||!Rl(window.location.host)||Ko[r]===e||Ko[r]||bx)return;Ko[r]=e;function s(N){return`__firebase__banner__${N}`}const i="__firebase__banner",d=Sw().prod.length>0;function f(){const N=document.getElementById(i);N&&N.remove()}function p(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function x(N,U){N.setAttribute("width","24"),N.setAttribute("id",U),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function y(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{bx=!0,f()},N}function _(N,U){N.setAttribute("id",U),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function T(){const N=Nw(i),U=s("text"),X=document.getElementById(U)||document.createElement("span"),Y=s("learnmore"),G=document.getElementById(Y)||document.createElement("a"),he=s("preprendIcon"),oe=document.getElementById(he)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const me=N.element;p(me),_(G,Y);const xe=y();x(oe,he),me.append(oe,X,G,xe),document.body.appendChild(me)}d?(X.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Aw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function jw(){const r=Md()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Cw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Rw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Iw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kw(){const r=hn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Dw(){return!jw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mw(){try{return typeof indexedDB=="object"}catch{return!1}}function Ow(){return new Promise((r,e)=>{try{let s=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="FirebaseError";class Rr extends Error{constructor(e,s,i){super(s),this.code=e,this.customData=i,this.name=Vw,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cc.prototype.create)}}class cc{constructor(e,s,i){this.service=e,this.serviceName=s,this.errors=i}create(e,...s){const i=s[0]||{},o=`${this.service}/${e}`,d=this.errors[e],f=d?Lw(d,i):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Rr(o,p,i)}}function Lw(r,e){return r.replace(Pw,(s,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Pw=/\{\$([^}]+)}/g;function Uw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ya(r,e){if(r===e)return!0;const s=Object.keys(r),i=Object.keys(e);for(const o of s){if(!i.includes(o))return!1;const d=r[o],f=e[o];if(_x(d)&&_x(f)){if(!ya(d,f))return!1}else if(d!==f)return!1}for(const o of i)if(!s.includes(o))return!1;return!0}function _x(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(r){const e=[];for(const[s,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Bo(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,d]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(d)}}),e}function Ho(r){const e=r.indexOf("?");if(!e)return"";const s=r.indexOf("#",e);return r.substring(e,s>0?s:void 0)}function zw(r,e){const s=new Bw(r,e);return s.subscribe.bind(s)}class Bw{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,i){let o;if(e===void 0&&s===void 0&&i===void 0)throw new Error("Missing Observer.");Hw(e,["next","error","complete"])?o=e:o={next:e,error:s,complete:i},o.next===void 0&&(o.next=im),o.error===void 0&&(o.error=im),o.complete===void 0&&(o.complete=im);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),d}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hw(r,e){if(typeof r!="object"||r===null)return!1;for(const s of e)if(s in r&&typeof r[s]=="function")return!0;return!1}function im(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(r){return r&&r._delegate?r._delegate:r}class xa{constructor(e,s,i){this.name=e,this.instanceFactory=s,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const i=new Ew;if(this.instancesDeferred.set(s,i),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gw(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const d=this.getOrInitializeService({instanceIdentifier:o});i.resolve(d)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:s});for(const[d,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);i===p&&f.resolve(o)}return o}onInit(e,s){const i=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const d=this.instances.get(i);return d&&e(d,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const i=this.onInitCallbacks.get(s);if(i)for(const o of i)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Fw(e),options:s}),this.instances.set(e,i),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fw(r){return r===ha?void 0:r}function Gw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new qw(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(We||(We={}));const Kw={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},Qw=We.INFO,$w={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},Xw=(r,e,...s)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=$w[e];if(o)console[o](`[${i}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wm{constructor(e){this.name=e,this._logLevel=Qw,this._logHandler=Xw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const Ww=(r,e)=>e.some(s=>r instanceof s);let wx,Ex;function Zw(){return wx||(wx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jw(){return Ex||(Ex=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ob=new WeakMap,wm=new WeakMap,cb=new WeakMap,am=new WeakMap,Zm=new WeakMap;function eE(r){const e=new Promise((s,i)=>{const o=()=>{r.removeEventListener("success",d),r.removeEventListener("error",f)},d=()=>{s(xi(r.result)),o()},f=()=>{i(r.error),o()};r.addEventListener("success",d),r.addEventListener("error",f)});return e.then(s=>{s instanceof IDBCursor&&ob.set(s,r)}).catch(()=>{}),Zm.set(e,r),e}function tE(r){if(wm.has(r))return;const e=new Promise((s,i)=>{const o=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",f),r.removeEventListener("abort",f)},d=()=>{s(),o()},f=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",d),r.addEventListener("error",f),r.addEventListener("abort",f)});wm.set(r,e)}let Em={get(r,e,s){if(r instanceof IDBTransaction){if(e==="done")return wm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||cb.get(r);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return xi(r[e])},set(r,e,s){return r[e]=s,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function nE(r){Em=r(Em)}function sE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const i=r.call(lm(this),e,...s);return cb.set(i,e.sort?e.sort():[e]),xi(i)}:Jw().includes(r)?function(...e){return r.apply(lm(this),e),xi(ob.get(this))}:function(...e){return xi(r.apply(lm(this),e))}}function rE(r){return typeof r=="function"?sE(r):(r instanceof IDBTransaction&&tE(r),Ww(r,Zw())?new Proxy(r,Em):r)}function xi(r){if(r instanceof IDBRequest)return eE(r);if(am.has(r))return am.get(r);const e=rE(r);return e!==r&&(am.set(r,e),Zm.set(e,r)),e}const lm=r=>Zm.get(r);function iE(r,e,{blocked:s,upgrade:i,blocking:o,terminated:d}={}){const f=indexedDB.open(r,e),p=xi(f);return i&&f.addEventListener("upgradeneeded",x=>{i(xi(f.result),x.oldVersion,x.newVersion,xi(f.transaction),x)}),s&&f.addEventListener("blocked",x=>s(x.oldVersion,x.newVersion,x)),p.then(x=>{d&&x.addEventListener("close",()=>d()),o&&x.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const aE=["get","getKey","getAll","getAllKeys","count"],lE=["put","add","delete","clear"],om=new Map;function Tx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(om.get(e))return om.get(e);const s=e.replace(/FromIndex$/,""),i=e!==s,o=lE.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!(o||aE.includes(s)))return;const d=async function(f,...p){const x=this.transaction(f,o?"readwrite":"readonly");let y=x.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[s](...p),o&&x.done]))[0]};return om.set(e,d),d}nE(r=>({...r,get:(e,s,i)=>Tx(e,s)||r.get(e,s,i),has:(e,s)=>!!Tx(e,s)||r.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(cE(s)){const i=s.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(s=>s).join(" ")}}function cE(r){return r.getComponent()?.type==="VERSION"}const Tm="@firebase/app",Sx="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Wm("@firebase/app"),uE="@firebase/app-compat",dE="@firebase/analytics-compat",hE="@firebase/analytics",fE="@firebase/app-check-compat",mE="@firebase/app-check",gE="@firebase/auth",pE="@firebase/auth-compat",yE="@firebase/database",xE="@firebase/data-connect",vE="@firebase/database-compat",bE="@firebase/functions",_E="@firebase/functions-compat",wE="@firebase/installations",EE="@firebase/installations-compat",TE="@firebase/messaging",SE="@firebase/messaging-compat",NE="@firebase/performance",AE="@firebase/performance-compat",jE="@firebase/remote-config",CE="@firebase/remote-config-compat",RE="@firebase/storage",IE="@firebase/storage-compat",kE="@firebase/firestore",DE="@firebase/ai",ME="@firebase/firestore-compat",OE="firebase",VE="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="[DEFAULT]",LE={[Tm]:"fire-core",[uE]:"fire-core-compat",[hE]:"fire-analytics",[dE]:"fire-analytics-compat",[mE]:"fire-app-check",[fE]:"fire-app-check-compat",[gE]:"fire-auth",[pE]:"fire-auth-compat",[yE]:"fire-rtdb",[xE]:"fire-data-connect",[vE]:"fire-rtdb-compat",[bE]:"fire-fn",[_E]:"fire-fn-compat",[wE]:"fire-iid",[EE]:"fire-iid-compat",[TE]:"fire-fcm",[SE]:"fire-fcm-compat",[NE]:"fire-perf",[AE]:"fire-perf-compat",[jE]:"fire-rc",[CE]:"fire-rc-compat",[RE]:"fire-gcs",[IE]:"fire-gcs-compat",[kE]:"fire-fst",[ME]:"fire-fst-compat",[DE]:"fire-vertex","fire-js":"fire-js",[OE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Map,PE=new Map,Nm=new Map;function Nx(r,e){try{r.container.addComponent(e)}catch(s){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,s)}}function El(r){const e=r.name;if(Nm.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;Nm.set(e,r);for(const s of gd.values())Nx(s,r);for(const s of PE.values())Nx(s,r);return!0}function Jm(r,e){const s=r.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),r.container.getProvider(e)}function ts(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vi=new cc("app","Firebase",UE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,s,i){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=VE;function ub(r,e={}){let s=r;typeof e!="object"&&(e={name:e});const i={name:Sm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw vi.create("bad-app-name",{appName:String(o)});if(s||(s=rb()),!s)throw vi.create("no-options");const d=gd.get(o);if(d){if(ya(s,d.options)&&ya(i,d.config))return d;throw vi.create("duplicate-app",{appName:o})}const f=new Yw(o);for(const x of Nm.values())f.addComponent(x);const p=new zE(s,i,f);return gd.set(o,p),p}function db(r=Sm){const e=gd.get(r);if(!e&&r===Sm&&rb())return ub();if(!e)throw vi.create("no-app",{appName:r});return e}function bi(r,e,s){let i=LE[r]??r;s&&(i+=`-${s}`);const o=i.match(/\s|\//),d=e.match(/\s|\//);if(o||d){const f=[`Unable to register library "${i}" with version "${e}":`];o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(f.join(" "));return}El(new xa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="firebase-heartbeat-database",HE=1,Jo="firebase-heartbeat-store";let cm=null;function hb(){return cm||(cm=iE(BE,HE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Jo)}catch(s){console.warn(s)}}}}).catch(r=>{throw vi.create("idb-open",{originalErrorMessage:r.message})})),cm}async function qE(r){try{const s=(await hb()).transaction(Jo),i=await s.objectStore(Jo).get(fb(r));return await s.done,i}catch(e){if(e instanceof Rr)Sr.warn(e.message);else{const s=vi.create("idb-get",{originalErrorMessage:e?.message});Sr.warn(s.message)}}}async function Ax(r,e){try{const i=(await hb()).transaction(Jo,"readwrite");await i.objectStore(Jo).put(e,fb(r)),await i.done}catch(s){if(s instanceof Rr)Sr.warn(s.message);else{const i=vi.create("idb-set",{originalErrorMessage:s?.message});Sr.warn(i.message)}}}function fb(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=1024,GE=30;class YE{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new QE(s),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=jx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>GE){const o=$E(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Sr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jx(),{heartbeatsToSend:s,unsentEntries:i}=KE(this._heartbeatsCache.heartbeats),o=md(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Sr.warn(e),""}}}function jx(){return new Date().toISOString().substring(0,10)}function KE(r,e=FE){const s=[];let i=r.slice();for(const o of r){const d=s.find(f=>f.agent===o.agent);if(d){if(d.dates.push(o.date),Cx(s)>e){d.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),Cx(s)>e){s.pop();break}i=i.slice(1)}return{heartbeatsToSend:s,unsentEntries:i}}class QE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mw()?Ow().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await qE(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ax(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ax(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Cx(r){return md(JSON.stringify({version:2,heartbeats:r})).length}function $E(r){if(r.length===0)return-1;let e=0,s=r[0].date;for(let i=1;i<r.length;i++)r[i].date<s&&(s=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(r){El(new xa("platform-logger",e=>new oE(e),"PRIVATE")),El(new xa("heartbeat",e=>new YE(e),"PRIVATE")),bi(Tm,Sx,r),bi(Tm,Sx,"esm2020"),bi("fire-js","")}XE("");function mb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WE=mb,gb=new cc("auth","Firebase",mb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=new Wm("@firebase/auth");function ZE(r,...e){pd.logLevel<=We.WARN&&pd.warn(`Auth (${Il}): ${r}`,...e)}function rd(r,...e){pd.logLevel<=We.ERROR&&pd.error(`Auth (${Il}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(r,...e){throw eg(r,...e)}function Ys(r,...e){return eg(r,...e)}function pb(r,e,s){const i={...WE(),[e]:s};return new cc("auth","Firebase",i).create(e,{appName:r.name})}function Er(r){return pb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eg(r,...e){if(typeof r!="string"){const s=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(s,...i)}return gb.create(r,...e)}function Me(r,e,...s){if(!r)throw eg(e,...s)}function _r(r){const e="INTERNAL ASSERTION FAILED: "+r;throw rd(e),new Error(e)}function Nr(r,e){r||_r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){return typeof self<"u"&&self.location?.href||""}function JE(){return Rx()==="http:"||Rx()==="https:"}function Rx(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JE()||Rw()||"connection"in navigator)?navigator.onLine:!0}function tT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,s){this.shortDelay=e,this.longDelay=s,Nr(s>e,"Short delay should be less than long delay!"),this.isMobile=Aw()||Iw()}get(){return eT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(r,e){Nr(r.emulator,"Emulator should always be set here");const{url:s}=r.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{static initialize(e,s,i){this.fetchImpl=e,s&&(this.headersImpl=s),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rT=new dc(3e4,6e4);function Ir(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function kr(r,e,s,i,o={}){return xb(r,o,async()=>{let d={},f={};i&&(e==="GET"?f=i:d={body:JSON.stringify(i)});const p=uc({key:r.config.apiKey,...f}).slice(1),x=await r._getAdditionalHeaders();x["Content-Type"]="application/json",r.languageCode&&(x["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:x,...d};return Cw()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(y.credentials="include"),yb.fetch()(await vb(r,r.config.apiHost,s,p),y)})}async function xb(r,e,s){r._canInitEmulator=!1;const i={...nT,...e};try{const o=new aT(r),d=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const f=await d.json();if("needConfirmation"in f)throw Wu(r,"account-exists-with-different-credential",f);if(d.ok&&!("errorMessage"in f))return f;{const p=d.ok?f.errorMessage:f.error.message,[x,y]=p.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(r,"credential-already-in-use",f);if(x==="EMAIL_EXISTS")throw Wu(r,"email-already-in-use",f);if(x==="USER_DISABLED")throw Wu(r,"user-disabled",f);const _=i[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw pb(r,_,y);bs(r,_)}}catch(o){if(o instanceof Rr)throw o;bs(r,"network-request-failed",{message:String(o)})}}async function hc(r,e,s,i,o={}){const d=await kr(r,e,s,i,o);return"mfaPendingCredential"in d&&bs(r,"multi-factor-auth-required",{_serverResponse:d}),d}async function vb(r,e,s,i){const o=`${e}${s}?${i}`,d=r,f=d.config.emulator?tg(r.config,o):`${r.config.apiScheme}://${o}`;return sT.includes(s)&&(await d._persistenceManagerAvailable,d._getPersistenceType()==="COOKIE")?d._getPersistence()._getFinalTarget(f).toString():f}function iT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,i)=>{this.timer=setTimeout(()=>i(Ys(this.auth,"network-request-failed")),rT.get())})}}function Wu(r,e,s){const i={appName:r.name};s.email&&(i.email=s.email),s.phoneNumber&&(i.phoneNumber=s.phoneNumber);const o=Ys(r,e,i);return o.customData._tokenResponse=s,o}function Ix(r){return r!==void 0&&r.enterprise!==void 0}class lT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return iT(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oT(r,e){return kr(r,"GET","/v2/recaptchaConfig",Ir(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(r,e){return kr(r,"POST","/v1/accounts:delete",e)}async function yd(r,e){return kr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uT(r,e=!1){const s=kt(r),i=await s.getIdToken(e),o=ng(i);Me(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const d=typeof o.firebase=="object"?o.firebase:void 0,f=d?.sign_in_provider;return{claims:o,token:i,authTime:Qo(um(o.auth_time)),issuedAtTime:Qo(um(o.iat)),expirationTime:Qo(um(o.exp)),signInProvider:f||null,signInSecondFactor:d?.sign_in_second_factor||null}}function um(r){return Number(r)*1e3}function ng(r){const[e,s,i]=r.split(".");if(e===void 0||s===void 0||i===void 0)return rd("JWT malformed, contained fewer than 3 sections"),null;try{const o=nb(s);return o?JSON.parse(o):(rd("Failed to decode base64 JWT payload"),null)}catch(o){return rd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function kx(r){const e=ng(r);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(r,e,s=!1){if(s)return e;try{return await e}catch(i){throw i instanceof Rr&&dT(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function dT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(r){const e=r.auth,s=await r.getIdToken(),i=await ec(r,yd(e,{idToken:s}));Me(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const d=o.providerUserInfo?.length?bb(o.providerUserInfo):[],f=mT(r.providerData,d),p=r.isAnonymous,x=!(r.email&&o.passwordHash)&&!f?.length,y=p?x:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new jm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,_)}async function fT(r){const e=kt(r);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mT(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function bb(r){return r.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gT(r,e){const s=await xb(r,{},async()=>{const i=uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:d}=r.config,f=await vb(r,o,"/v1/token",`key=${d}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:p,body:i};return r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(x.credentials="include"),yb.fetch()(f,x)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function pT(r,e){return kr(r,"POST","/v2/accounts:revokeToken",Ir(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const s=kx(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:i,refreshToken:o,expiresIn:d}=await gT(e,s);this.updateTokensAndExpiration(i,o,Number(d))}updateTokensAndExpiration(e,s,i){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,s){const{refreshToken:i,accessToken:o,expirationTime:d}=s,f=new vl;return i&&(Me(typeof i=="string","internal-error",{appName:e}),f.refreshToken=i),o&&(Me(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),d&&(Me(typeof d=="number","internal-error",{appName:e}),f.expirationTime=d),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vl,this.toJSON())}_performRefresh(){return _r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(r,e){Me(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class vs{constructor({uid:e,auth:s,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new hT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await ec(this,this.stsTokenManager.getToken(this.auth,e));return Me(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return uT(this,e)}reload(){return fT(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new vs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),s&&await xd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ts(this.auth.app))return Promise.reject(Er(this.auth));const e=await this.getIdToken();return await ec(this,cT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const i=s.displayName??void 0,o=s.email??void 0,d=s.phoneNumber??void 0,f=s.photoURL??void 0,p=s.tenantId??void 0,x=s._redirectEventId??void 0,y=s.createdAt??void 0,_=s.lastLoginAt??void 0,{uid:T,emailVerified:N,isAnonymous:U,providerData:X,stsTokenManager:Y}=s;Me(T&&Y,e,"internal-error");const G=vl.fromJSON(this.name,Y);Me(typeof T=="string",e,"internal-error"),di(i,e.name),di(o,e.name),Me(typeof N=="boolean",e,"internal-error"),Me(typeof U=="boolean",e,"internal-error"),di(d,e.name),di(f,e.name),di(p,e.name),di(x,e.name),di(y,e.name),di(_,e.name);const he=new vs({uid:T,auth:e,email:o,emailVerified:N,displayName:i,isAnonymous:U,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:G,createdAt:y,lastLoginAt:_});return X&&Array.isArray(X)&&(he.providerData=X.map(oe=>({...oe}))),x&&(he._redirectEventId=x),he}static async _fromIdTokenResponse(e,s,i=!1){const o=new vl;o.updateFromServerResponse(s);const d=new vs({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await xd(d),d}static async _fromGetAccountInfoResponse(e,s,i){const o=s.users[0];Me(o.localId!==void 0,"internal-error");const d=o.providerUserInfo!==void 0?bb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!d?.length,p=new vl;p.updateFromIdToken(i);const x=new vs({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new jm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!d?.length};return Object.assign(x,y),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=new Map;function wr(r){Nr(r instanceof Function,"Expected a class definition");let e=Dx.get(r);return e?(Nr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Dx.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}_b.type="NONE";const Mx=_b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(r,e,s){return`firebase:${r}:${e}:${s}`}class bl{constructor(e,s,i){this.persistence=e,this.auth=s,this.userKey=i;const{config:o,name:d}=this.auth;this.fullUserKey=id(this.userKey,o.apiKey,d),this.fullPersistenceKey=id("persistence",o.apiKey,d),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await yd(this.auth,{idToken:e}).catch(()=>{});return s?vs._fromGetAccountInfoResponse(this.auth,s,e):null}return vs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,i="authUser"){if(!s.length)return new bl(wr(Mx),e,i);const o=(await Promise.all(s.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let d=o[0]||wr(Mx);const f=id(i,e.config.apiKey,e.name);let p=null;for(const y of s)try{const _=await y._get(f);if(_){let T;if(typeof _=="string"){const N=await yd(e,{idToken:_}).catch(()=>{});if(!N)break;T=await vs._fromGetAccountInfoResponse(e,N,_)}else T=vs._fromJSON(e,_);y!==d&&(p=T),d=y;break}}catch{}const x=o.filter(y=>y._shouldAllowMigration);return!d._shouldAllowMigration||!x.length?new bl(d,e,i):(d=x[0],p&&await d._set(f,p.toJSON()),await Promise.all(s.map(async y=>{if(y!==d)try{await y._remove(f)}catch{}})),new bl(d,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ab(e))return"Blackberry";if(jb(e))return"Webos";if(Eb(e))return"Safari";if((e.includes("chrome/")||Tb(e))&&!e.includes("edge/"))return"Chrome";if(Nb(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(s);if(i?.length===2)return i[1]}return"Other"}function wb(r=hn()){return/firefox\//i.test(r)}function Eb(r=hn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tb(r=hn()){return/crios\//i.test(r)}function Sb(r=hn()){return/iemobile/i.test(r)}function Nb(r=hn()){return/android/i.test(r)}function Ab(r=hn()){return/blackberry/i.test(r)}function jb(r=hn()){return/webos/i.test(r)}function sg(r=hn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function yT(r=hn()){return sg(r)&&!!window.navigator?.standalone}function xT(){return kw()&&document.documentMode===10}function Cb(r=hn()){return sg(r)||Nb(r)||jb(r)||Ab(r)||/windows phone/i.test(r)||Sb(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(r,e=[]){let s;switch(r){case"Browser":s=Ox(hn());break;case"Worker":s=`${Ox(hn())}-${r}`;break;default:s=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Il}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const i=d=>new Promise((f,p)=>{try{const x=e(d);f(x)}catch(x){p(x)}});i.onAbort=s,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const i of this.queue)await i(e),i.onAbort&&s.push(i.onAbort)}catch(i){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bT(r,e={}){return kr(r,"GET","/v2/passwordPolicy",Ir(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=6;class wT{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??_T,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(s.meetsMinPasswordLength=e.length>=i),o&&(s.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,s,i,o,d){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,s,i,o){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vx(this),this.idTokenSubscription=new Vx(this),this.beforeStateQueue=new vT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(d=>this._resolvePersistenceManagerAvailable=d)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=wr(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await yd(this,{idToken:e}),i=await vs._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(i)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ts(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let i=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=this.redirectUser?._redirectEventId,f=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===f)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ts(this.app))return Promise.reject(Er(this));const s=e?kt(e):null;return s&&Me(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ts(this.app)?Promise.reject(Er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ts(this.app)?Promise.reject(Er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bT(this),s=new wT(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cc("auth","Firebase",e())}onAuthStateChanged(e,s,i){return this.registerStateListener(this.authStateSubscription,e,s,i)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,i){return this.registerStateListener(this.idTokenSubscription,e,s,i)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(i.tenantId=this.tenantId),await pT(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const i=await this.getOrInitRedirectPersistenceManager(s);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&wr(e)||this._popupRedirectResolver;Me(s,this,"argument-error"),this.redirectPersistenceManager=await bl.create(this,[wr(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,i,o){if(this._deleted)return()=>{};const d=typeof s=="function"?s:s.next.bind(s);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(p,this,"internal-error"),p.then(()=>{f||d(this.currentUser)}),typeof s=="function"){const x=e.addObserver(s,i,o);return()=>{f=!0,x()}}else{const x=e.addObserver(s);return()=>{f=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZE(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ii(r){return kt(r)}class Vx{constructor(e){this.auth=e,this.observer=null,this.addObserver=zw(s=>this.observer=s)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Od={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TT(r){Od=r}function Ib(r){return Od.loadJS(r)}function ST(){return Od.recaptchaEnterpriseScript}function NT(){return Od.gapiScript}function AT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class jT{constructor(){this.enterprise=new CT}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class CT{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const RT="recaptcha-enterprise",kb="NO_RECAPTCHA";class IT{constructor(e){this.type=RT,this.auth=Ii(e)}async verify(e="verify",s=!1){async function i(d){if(!s){if(d.tenantId==null&&d._agentRecaptchaConfig!=null)return d._agentRecaptchaConfig.siteKey;if(d.tenantId!=null&&d._tenantRecaptchaConfigs[d.tenantId]!==void 0)return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(async(f,p)=>{oT(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new lT(x);return d.tenantId==null?d._agentRecaptchaConfig=y:d._tenantRecaptchaConfigs[d.tenantId]=y,f(y.siteKey)}}).catch(x=>{p(x)})})}function o(d,f,p){const x=window.grecaptcha;Ix(x)?x.enterprise.ready(()=>{x.enterprise.execute(d,{action:e}).then(y=>{f(y)}).catch(()=>{f(kb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jT().execute("siteKey",{action:"verify"}):new Promise((d,f)=>{i(this.auth).then(p=>{if(!s&&Ix(window.grecaptcha))o(p,d,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let x=ST();x.length!==0&&(x+=p),Ib(x).then(()=>{o(p,d,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function Lx(r,e,s,i=!1,o=!1){const d=new IT(r);let f;if(o)f=kb;else try{f=await d.verify(s)}catch{f=await d.verify(s,!0)}const p={...e};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const x=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const x=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function vd(r,e,s,i,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Lx(r,e,s,s==="getOobCode");return i(r,d)}else return i(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Lx(r,e,s,s==="getOobCode");return i(r,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(r,e){const s=Jm(r,"auth");if(s.isInitialized()){const o=s.getImmediate(),d=s.getOptions();if(ya(d,e??{}))return o;bs(o,"already-initialized")}return s.initialize({options:e})}function DT(r,e){const s=e?.persistence||[],i=(Array.isArray(s)?s:[s]).map(wr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function MT(r,e,s){const i=Ii(r);Me(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,d=Db(e),{host:f,port:p}=OT(e),x=p===null?"":`:${p}`,y={url:`${d}//${f}${x}/`},_=Object.freeze({host:f,port:p,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Me(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Me(ya(y,i.config.emulator)&&ya(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Rl(f)?(ab(`${d}//${f}${x}`),lb("Auth",!0)):VT()}function Db(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function OT(r){const e=Db(r),s=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!s)return{host:"",port:null};const i=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const d=o[1];return{host:d,port:Px(i.substr(d.length+1))}}else{const[d,f]=i.split(":");return{host:d,port:Px(f)}}}function Px(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function VT(){function r(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return _r("not implemented")}_getIdTokenResponse(e){return _r("not implemented")}_linkToIdToken(e,s){return _r("not implemented")}_getReauthenticationResolver(e){return _r("not implemented")}}async function LT(r,e){return kr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PT(r,e){return hc(r,"POST","/v1/accounts:signInWithPassword",Ir(r,e))}async function UT(r,e){return kr(r,"POST","/v1/accounts:sendOobCode",Ir(r,e))}async function zT(r,e){return UT(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(r,e){return hc(r,"POST","/v1/accounts:signInWithEmailLink",Ir(r,e))}async function HT(r,e){return hc(r,"POST","/v1/accounts:signInWithEmailLink",Ir(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends rg{constructor(e,s,i,o=null){super("password",i),this._email=e,this._password=s,this._tenantId=o}static _fromEmailAndPassword(e,s){return new tc(e,s,"password")}static _fromEmailAndCode(e,s,i=null){return new tc(e,s,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vd(e,s,"signInWithPassword",PT);case"emailLink":return BT(e,{email:this._email,oobCode:this._password});default:bs(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const i={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vd(e,i,"signUpPassword",LT);case"emailLink":return HT(e,{idToken:s,email:this._email,oobCode:this._password});default:bs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(r,e){return hc(r,"POST","/v1/accounts:signInWithIdp",Ir(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="http://localhost";class va extends rg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):bs("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...d}=s;if(!i||!o)return null;const f=new va(i,o);return f.idToken=d.idToken||void 0,f.accessToken=d.accessToken||void 0,f.secret=d.secret,f.nonce=d.nonce,f.pendingToken=d.pendingToken||null,f}_getIdTokenResponse(e){const s=this.buildRequest();return _l(e,s)}_linkToIdToken(e,s){const i=this.buildRequest();return i.idToken=s,_l(e,i)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,_l(e,s)}buildRequest(){const e={requestUri:qT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=uc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GT(r){const e=Bo(Ho(r)).link,s=e?Bo(Ho(e)).deep_link_id:null,i=Bo(Ho(r)).deep_link_id;return(i?Bo(Ho(i)).link:null)||i||s||e||r}class ig{constructor(e){const s=Bo(Ho(e)),i=s.apiKey??null,o=s.oobCode??null,d=FT(s.mode??null);Me(i&&o&&d,"argument-error"),this.apiKey=i,this.operation=d,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(e){const s=GT(e);try{return new ig(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.providerId=kl.PROVIDER_ID}static credential(e,s){return tc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const i=ig.parseLink(s);return Me(i,"argument-error"),tc._fromEmailAndCode(e,i.code,i.tenantId)}}kl.PROVIDER_ID="password";kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Mb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends fc{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return va._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:i}=e;if(!s&&!i)return null;try{return mi.credential(s,i)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends fc{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.GITHUB_SIGN_IN_METHOD="github.com";gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends fc{constructor(){super("twitter.com")}static credential(e,s){return va._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:i}=e;if(!s||!i)return null;try{return pi.credential(s,i)}catch{return null}}}pi.TWITTER_SIGN_IN_METHOD="twitter.com";pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(r,e){return hc(r,"POST","/v1/accounts:signUp",Ir(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,i,o=!1){const d=await vs._fromIdTokenResponse(e,i,o),f=Ux(i);return new ba({user:d,providerId:f,_tokenResponse:i,operationType:s})}static async _forOperation(e,s,i){await e._updateTokensIfNecessary(i,!0);const o=Ux(i);return new ba({user:e,providerId:o,_tokenResponse:i,operationType:s})}}function Ux(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd extends Rr{constructor(e,s,i,o){super(s.code,s.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,s,i,o){return new bd(e,s,i,o)}}function Ob(r,e,s,i){return(e==="reauthenticate"?s._getReauthenticationResolver(r):s._getIdTokenResponse(r)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?bd._fromErrorAndOperation(r,d,e,i):d})}async function KT(r,e,s=!1){const i=await ec(r,e._linkToIdToken(r.auth,await r.getIdToken()),s);return ba._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QT(r,e,s=!1){const{auth:i}=r;if(ts(i.app))return Promise.reject(Er(i));const o="reauthenticate";try{const d=await ec(r,Ob(i,o,e,r),s);Me(d.idToken,i,"internal-error");const f=ng(d.idToken);Me(f,i,"internal-error");const{sub:p}=f;return Me(r.uid===p,i,"user-mismatch"),ba._forOperation(r,o,d)}catch(d){throw d?.code==="auth/user-not-found"&&bs(i,"user-mismatch"),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(r,e,s=!1){if(ts(r.app))return Promise.reject(Er(r));const i="signIn",o=await Ob(r,i,e),d=await ba._fromIdTokenResponse(r,i,o);return s||await r._updateCurrentUser(d.user),d}async function $T(r,e){return Vb(Ii(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lb(r){const e=Ii(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XT(r,e,s){const i=Ii(r);await vd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",zT)}async function WT(r,e,s){if(ts(r.app))return Promise.reject(Er(r));const i=Ii(r),f=await vd(i,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YT).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&Lb(r),x}),p=await ba._fromIdTokenResponse(i,"signIn",f);return await i._updateCurrentUser(p.user),p}function ZT(r,e,s){return ts(r.app)?Promise.reject(Er(r)):$T(kt(r),kl.credential(e,s)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Lb(r),i})}function JT(r,e,s,i){return kt(r).onIdTokenChanged(e,s,i)}function eS(r,e,s){return kt(r).beforeAuthStateChanged(e,s)}function tS(r,e,s,i){return kt(r).onAuthStateChanged(e,s,i)}function nS(r){return kt(r).signOut()}const _d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=1e3,rS=10;class Ub extends Pb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const i=this.storage.getItem(s),o=this.localCache[s];i!==o&&e(s,o,i)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((f,p,x)=>{this.notifyListeners(f,x)});return}const i=e.key;s?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(i);!s&&this.localCache[i]===f||this.notifyListeners(i,f)},d=this.storage.getItem(i);xT()&&d!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,rS):o()}notifyListeners(e,s){this.localCache[e]=s;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:i}),!0)})},sS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ub.type="LOCAL";const iS=Ub;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb extends Pb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}zb.type="SESSION";const Bb=zb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(o=>o.isListeningto(e));if(s)return s;const i=new Vd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:i,eventType:o,data:d}=s.data,f=this.handlersMap[o];if(!f?.size)return;s.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(f).map(async y=>y(s.origin,d)),x=await aS(p);s.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:x})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(r="",e=10){let s="";for(let i=0;i<e;i++)s+=Math.floor(Math.random()*10);return r+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let d,f;return new Promise((p,x)=>{const y=ag("",20);o.port1.start();const _=setTimeout(()=>{x(new Error("unsupported_event"))},i);f={messageChannel:o,onMessage(T){const N=T;if(N.data.eventId===y)switch(N.data.status){case"ack":clearTimeout(_),d=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),p(N.data.response);break;default:clearTimeout(_),clearTimeout(d),x(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:s},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(){return window}function oS(r){Ks().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(){return typeof Ks().WorkerGlobalScope<"u"&&typeof Ks().importScripts=="function"}async function cS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uS(){return navigator?.serviceWorker?.controller||null}function dS(){return Hb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="firebaseLocalStorageDb",hS=1,wd="firebaseLocalStorage",Fb="fbase_key";class mc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Ld(r,e){return r.transaction([wd],e?"readwrite":"readonly").objectStore(wd)}function fS(){const r=indexedDB.deleteDatabase(qb);return new mc(r).toPromise()}function Cm(){const r=indexedDB.open(qb,hS);return new Promise((e,s)=>{r.addEventListener("error",()=>{s(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(wd,{keyPath:Fb})}catch(o){s(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(wd)?e(i):(i.close(),await fS(),e(await Cm()))})})}async function zx(r,e,s){const i=Ld(r,!0).put({[Fb]:e,value:s});return new mc(i).toPromise()}async function mS(r,e){const s=Ld(r,!1).get(e),i=await new mc(s).toPromise();return i===void 0?null:i.value}function Bx(r,e){const s=Ld(r,!0).delete(e);return new mc(s).toPromise()}const gS=800,pS=3;class Gb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cm(),this.db)}async _withRetries(e){let s=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(s++>pS)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vd._getInstance(dS()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await cS(),!this.activeServiceWorker)return;this.sender=new lS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cm();return await zx(e,_d,"1"),await Bx(e,_d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(i=>zx(i,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(i=>mS(i,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Bx(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const d=Ld(o,!1).getAll();return new mc(d).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:d}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(d)&&(this.notifyListeners(o,d),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(e,s){this.localCache[e]=s;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Gb.type="LOCAL";const yS=Gb;new dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(r,e){return e?wr(e):(Me(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg extends rg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _l(e,this._buildIdpRequest())}_linkToIdToken(e,s){return _l(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return _l(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function vS(r){return Vb(r.auth,new lg(r),r.bypassAuthState)}function bS(r){const{auth:e,user:s}=r;return Me(s,e,"internal-error"),QT(s,new lg(r),r.bypassAuthState)}async function _S(r){const{auth:e,user:s}=r;return Me(s,e,"internal-error"),KT(s,new lg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,s,i,o,d=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:i,postBody:o,tenantId:d,error:f,type:p}=e;if(f){this.reject(f);return}const x={auth:this.auth,requestUri:s,sessionId:i,tenantId:d||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(x))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vS;case"linkViaPopup":case"linkViaRedirect":return _S;case"reauthViaPopup":case"reauthViaRedirect":return bS;default:bs(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=new dc(2e3,1e4);class xl extends Yb{constructor(e,s,i,o,d){super(e,s,o,d),this.provider=i,this.authWindow=null,this.pollId=null,xl.currentPopupAction&&xl.currentPopupAction.cancel(),xl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=ag();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Ys(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ys(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ys(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wS.get())};e()}}xl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="pendingRedirect",ad=new Map;class TS extends Yb{constructor(e,s,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,i),this.eventId=null}async execute(){let e=ad.get(this.auth._key());if(!e){try{const i=await SS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(s){e=()=>Promise.reject(s)}ad.set(this.auth._key(),e)}return this.bypassAuthState||ad.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SS(r,e){const s=jS(e),i=AS(r);if(!await i._isAvailable())return!1;const o=await i._get(s)==="true";return await i._remove(s),o}function NS(r,e){ad.set(r._key(),e)}function AS(r){return wr(r._redirectPersistence)}function jS(r){return id(ES,r.config.apiKey,r.name)}async function CS(r,e,s=!1){if(ts(r.app))return Promise.reject(Er(r));const i=Ii(r),o=xS(i,e),f=await new TS(i,o,s).execute();return f&&!s&&(delete f.user._redirectEventId,await i._persistUserIfCurrent(f.user),await i._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=600*1e3;class IS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(s=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kS(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!Kb(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";s.onError(Ys(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const i=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hx(e))}saveEventToCache(e){this.cachedEventUids.add(Hx(e)),this.lastProcessedEventTime=Date.now()}}function Hx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Kb({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function kS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(r,e={}){return kr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OS=/^https?/;async function VS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await DS(r);for(const s of e)try{if(LS(s))return}catch{}bs(r,"unauthorized-domain")}function LS(r){const e=Am(),{protocol:s,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&i===""?s==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&f.hostname===i}if(!OS.test(s))return!1;if(MS.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=new dc(3e4,6e4);function qx(){const r=Ks().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let s=0;s<r.CP.length;s++)r.CP[s]=null}}function US(r){return new Promise((e,s)=>{function i(){qx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qx(),s(Ys(r,"network-request-failed"))},timeout:PS.get()})}if(Ks().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ks().gapi?.load)i();else{const o=AT("iframefcb");return Ks()[o]=()=>{gapi.load?i():s(Ys(r,"network-request-failed"))},Ib(`${NT()}?onload=${o}`).catch(d=>s(d))}}).catch(e=>{throw ld=null,e})}let ld=null;function zS(r){return ld=ld||US(r),ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=new dc(5e3,15e3),HS="__/auth/iframe",qS="emulator/auth/iframe",FS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YS(r){const e=r.config;Me(e.authDomain,r,"auth-domain-config-required");const s=e.emulator?tg(e,qS):`https://${r.config.authDomain}/${HS}`,i={apiKey:e.apiKey,appName:r.name,v:Il},o=GS.get(r.config.apiHost);o&&(i.eid=o);const d=r._getFrameworks();return d.length&&(i.fw=d.join(",")),`${s}?${uc(i).slice(1)}`}async function KS(r){const e=await zS(r),s=Ks().gapi;return Me(s,r,"internal-error"),e.open({where:document.body,url:YS(r),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FS,dontclear:!0},i=>new Promise(async(o,d)=>{await i.restyle({setHideOnLeave:!1});const f=Ys(r,"network-request-failed"),p=Ks().setTimeout(()=>{d(f)},BS.get());function x(){Ks().clearTimeout(p),o(i)}i.ping(x).then(x,()=>{d(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$S=500,XS=600,WS="_blank",ZS="http://localhost";class Fx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JS(r,e,s,i=$S,o=XS){const d=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const x={...QS,width:i.toString(),height:o.toString(),top:d,left:f},y=hn().toLowerCase();s&&(p=Tb(y)?WS:s),wb(y)&&(e=e||ZS,x.scrollbars="yes");const _=Object.entries(x).reduce((N,[U,X])=>`${N}${U}=${X},`,"");if(yT(y)&&p!=="_self")return eN(e||"",p),new Fx(null);const T=window.open(e||"",p,_);Me(T,r,"popup-blocked");try{T.focus()}catch{}return new Fx(T)}function eN(r,e){const s=document.createElement("a");s.href=r,s.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="__/auth/handler",nN="emulator/auth/handler",sN=encodeURIComponent("fac");async function Gx(r,e,s,i,o,d){Me(r.config.authDomain,r,"auth-domain-config-required"),Me(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:s,redirectUrl:i,v:Il,eventId:o};if(e instanceof Mb){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",Uw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))f[_]=T}if(e instanceof fc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(f.scopes=_.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const x=await r._getAppCheckToken(),y=x?`#${sN}=${encodeURIComponent(x)}`:"";return`${rN(r)}?${uc(p).slice(1)}${y}`}function rN({config:r}){return r.emulator?tg(r,nN):`https://${r.authDomain}/${tN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="webStorageSupport";class iN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bb,this._completeRedirectFn=CS,this._overrideRedirectResult=NS}async _openPopup(e,s,i,o){Nr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const d=await Gx(e,s,i,Am(),o);return JS(e,d,ag())}async _openRedirect(e,s,i,o){await this._originValidation(e);const d=await Gx(e,s,i,Am(),o);return oS(d),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:o,promise:d}=this.eventManagers[s];return o?Promise.resolve(o):(Nr(d,"If manager is not set, promise should be"),d)}const i=this.initAndGetManager(e);return this.eventManagers[s]={promise:i},i.catch(()=>{delete this.eventManagers[s]}),i}async initAndGetManager(e){const s=await KS(e),i=new IS(e);return s.register("authEvent",o=>(Me(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=s,i}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(dm,{type:dm},o=>{const d=o?.[0]?.[dm];d!==void 0&&s(!!d),bs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=VS(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Cb()||Eb()||sg()}}const aN=iN;var Yx="@firebase/auth",Kx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cN(r){El(new xa("auth",(e,{options:s})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),d=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=i.options;Me(f&&!f.includes(":"),"invalid-api-key",{appName:i.name});const x={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rb(r)},y=new ET(i,o,d,x);return DT(y,s),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,i)=>{e.getProvider("auth-internal").initialize()})),El(new xa("auth-internal",e=>{const s=Ii(e.getProvider("auth").getImmediate());return(i=>new lN(i))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),bi(Yx,Kx,oN(r)),bi(Yx,Kx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=300,dN=ib("authIdTokenMaxAge")||uN;let Qx=null;const hN=r=>async e=>{const s=e&&await e.getIdTokenResult(),i=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(i&&i>dN)return;const o=s?.token;Qx!==o&&(Qx=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function fN(r=db()){const e=Jm(r,"auth");if(e.isInitialized())return e.getImmediate();const s=kT(r,{popupRedirectResolver:aN,persistence:[yS,iS,Bb]}),i=ib("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const d=new URL(i,location.origin);if(location.origin===d.origin){const f=hN(d.toString());eS(s,f,()=>f(s.currentUser)),JT(s,p=>f(p))}}const o=sb("auth");return o&&MT(s,`http://${o}`),s}function mN(){return document.getElementsByTagName("head")?.[0]??document}TT({loadJS(r){return new Promise((e,s)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const d=Ys("internal-error");d.customData=o,s(d)},i.type="text/javascript",i.charset="UTF-8",mN().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cN("Browser");var gN="firebase",pN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bi(gN,pN,"app");var $x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _i,Qb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,w){function A(){}A.prototype=w.prototype,I.F=w.prototype,I.prototype=new A,I.prototype.constructor=I,I.D=function(R,C,D){for(var j=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)j[_e-2]=arguments[_e];return w.prototype[C].apply(R,j)}}function s(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,s),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,w,A){A||(A=0);const R=Array(16);if(typeof w=="string")for(var C=0;C<16;++C)R[C]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(C=0;C<16;++C)R[C]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=I.g[0],A=I.g[1],C=I.g[2];let D=I.g[3],j;j=w+(D^A&(C^D))+R[0]+3614090360&4294967295,w=A+(j<<7&4294967295|j>>>25),j=D+(C^w&(A^C))+R[1]+3905402710&4294967295,D=w+(j<<12&4294967295|j>>>20),j=C+(A^D&(w^A))+R[2]+606105819&4294967295,C=D+(j<<17&4294967295|j>>>15),j=A+(w^C&(D^w))+R[3]+3250441966&4294967295,A=C+(j<<22&4294967295|j>>>10),j=w+(D^A&(C^D))+R[4]+4118548399&4294967295,w=A+(j<<7&4294967295|j>>>25),j=D+(C^w&(A^C))+R[5]+1200080426&4294967295,D=w+(j<<12&4294967295|j>>>20),j=C+(A^D&(w^A))+R[6]+2821735955&4294967295,C=D+(j<<17&4294967295|j>>>15),j=A+(w^C&(D^w))+R[7]+4249261313&4294967295,A=C+(j<<22&4294967295|j>>>10),j=w+(D^A&(C^D))+R[8]+1770035416&4294967295,w=A+(j<<7&4294967295|j>>>25),j=D+(C^w&(A^C))+R[9]+2336552879&4294967295,D=w+(j<<12&4294967295|j>>>20),j=C+(A^D&(w^A))+R[10]+4294925233&4294967295,C=D+(j<<17&4294967295|j>>>15),j=A+(w^C&(D^w))+R[11]+2304563134&4294967295,A=C+(j<<22&4294967295|j>>>10),j=w+(D^A&(C^D))+R[12]+1804603682&4294967295,w=A+(j<<7&4294967295|j>>>25),j=D+(C^w&(A^C))+R[13]+4254626195&4294967295,D=w+(j<<12&4294967295|j>>>20),j=C+(A^D&(w^A))+R[14]+2792965006&4294967295,C=D+(j<<17&4294967295|j>>>15),j=A+(w^C&(D^w))+R[15]+1236535329&4294967295,A=C+(j<<22&4294967295|j>>>10),j=w+(C^D&(A^C))+R[1]+4129170786&4294967295,w=A+(j<<5&4294967295|j>>>27),j=D+(A^C&(w^A))+R[6]+3225465664&4294967295,D=w+(j<<9&4294967295|j>>>23),j=C+(w^A&(D^w))+R[11]+643717713&4294967295,C=D+(j<<14&4294967295|j>>>18),j=A+(D^w&(C^D))+R[0]+3921069994&4294967295,A=C+(j<<20&4294967295|j>>>12),j=w+(C^D&(A^C))+R[5]+3593408605&4294967295,w=A+(j<<5&4294967295|j>>>27),j=D+(A^C&(w^A))+R[10]+38016083&4294967295,D=w+(j<<9&4294967295|j>>>23),j=C+(w^A&(D^w))+R[15]+3634488961&4294967295,C=D+(j<<14&4294967295|j>>>18),j=A+(D^w&(C^D))+R[4]+3889429448&4294967295,A=C+(j<<20&4294967295|j>>>12),j=w+(C^D&(A^C))+R[9]+568446438&4294967295,w=A+(j<<5&4294967295|j>>>27),j=D+(A^C&(w^A))+R[14]+3275163606&4294967295,D=w+(j<<9&4294967295|j>>>23),j=C+(w^A&(D^w))+R[3]+4107603335&4294967295,C=D+(j<<14&4294967295|j>>>18),j=A+(D^w&(C^D))+R[8]+1163531501&4294967295,A=C+(j<<20&4294967295|j>>>12),j=w+(C^D&(A^C))+R[13]+2850285829&4294967295,w=A+(j<<5&4294967295|j>>>27),j=D+(A^C&(w^A))+R[2]+4243563512&4294967295,D=w+(j<<9&4294967295|j>>>23),j=C+(w^A&(D^w))+R[7]+1735328473&4294967295,C=D+(j<<14&4294967295|j>>>18),j=A+(D^w&(C^D))+R[12]+2368359562&4294967295,A=C+(j<<20&4294967295|j>>>12),j=w+(A^C^D)+R[5]+4294588738&4294967295,w=A+(j<<4&4294967295|j>>>28),j=D+(w^A^C)+R[8]+2272392833&4294967295,D=w+(j<<11&4294967295|j>>>21),j=C+(D^w^A)+R[11]+1839030562&4294967295,C=D+(j<<16&4294967295|j>>>16),j=A+(C^D^w)+R[14]+4259657740&4294967295,A=C+(j<<23&4294967295|j>>>9),j=w+(A^C^D)+R[1]+2763975236&4294967295,w=A+(j<<4&4294967295|j>>>28),j=D+(w^A^C)+R[4]+1272893353&4294967295,D=w+(j<<11&4294967295|j>>>21),j=C+(D^w^A)+R[7]+4139469664&4294967295,C=D+(j<<16&4294967295|j>>>16),j=A+(C^D^w)+R[10]+3200236656&4294967295,A=C+(j<<23&4294967295|j>>>9),j=w+(A^C^D)+R[13]+681279174&4294967295,w=A+(j<<4&4294967295|j>>>28),j=D+(w^A^C)+R[0]+3936430074&4294967295,D=w+(j<<11&4294967295|j>>>21),j=C+(D^w^A)+R[3]+3572445317&4294967295,C=D+(j<<16&4294967295|j>>>16),j=A+(C^D^w)+R[6]+76029189&4294967295,A=C+(j<<23&4294967295|j>>>9),j=w+(A^C^D)+R[9]+3654602809&4294967295,w=A+(j<<4&4294967295|j>>>28),j=D+(w^A^C)+R[12]+3873151461&4294967295,D=w+(j<<11&4294967295|j>>>21),j=C+(D^w^A)+R[15]+530742520&4294967295,C=D+(j<<16&4294967295|j>>>16),j=A+(C^D^w)+R[2]+3299628645&4294967295,A=C+(j<<23&4294967295|j>>>9),j=w+(C^(A|~D))+R[0]+4096336452&4294967295,w=A+(j<<6&4294967295|j>>>26),j=D+(A^(w|~C))+R[7]+1126891415&4294967295,D=w+(j<<10&4294967295|j>>>22),j=C+(w^(D|~A))+R[14]+2878612391&4294967295,C=D+(j<<15&4294967295|j>>>17),j=A+(D^(C|~w))+R[5]+4237533241&4294967295,A=C+(j<<21&4294967295|j>>>11),j=w+(C^(A|~D))+R[12]+1700485571&4294967295,w=A+(j<<6&4294967295|j>>>26),j=D+(A^(w|~C))+R[3]+2399980690&4294967295,D=w+(j<<10&4294967295|j>>>22),j=C+(w^(D|~A))+R[10]+4293915773&4294967295,C=D+(j<<15&4294967295|j>>>17),j=A+(D^(C|~w))+R[1]+2240044497&4294967295,A=C+(j<<21&4294967295|j>>>11),j=w+(C^(A|~D))+R[8]+1873313359&4294967295,w=A+(j<<6&4294967295|j>>>26),j=D+(A^(w|~C))+R[15]+4264355552&4294967295,D=w+(j<<10&4294967295|j>>>22),j=C+(w^(D|~A))+R[6]+2734768916&4294967295,C=D+(j<<15&4294967295|j>>>17),j=A+(D^(C|~w))+R[13]+1309151649&4294967295,A=C+(j<<21&4294967295|j>>>11),j=w+(C^(A|~D))+R[4]+4149444226&4294967295,w=A+(j<<6&4294967295|j>>>26),j=D+(A^(w|~C))+R[11]+3174756917&4294967295,D=w+(j<<10&4294967295|j>>>22),j=C+(w^(D|~A))+R[2]+718787259&4294967295,C=D+(j<<15&4294967295|j>>>17),j=A+(D^(C|~w))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(C+(j<<21&4294967295|j>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+D&4294967295}i.prototype.v=function(I,w){w===void 0&&(w=I.length);const A=w-this.blockSize,R=this.C;let C=this.h,D=0;for(;D<w;){if(C==0)for(;D<=A;)o(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<w;)if(R[C++]=I.charCodeAt(D++),C==this.blockSize){o(this,R),C=0;break}}else for(;D<w;)if(R[C++]=I[D++],C==this.blockSize){o(this,R),C=0;break}}this.h=C,this.o+=w},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var A=I.length-8;A<I.length;++A)I[A]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,A=0;A<4;++A)for(let R=0;R<32;R+=8)I[w++]=this.g[A]>>>R&255;return I};function d(I,w){var A=p;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=w(I)}function f(I,w){this.h=w;const A=[];let R=!0;for(let C=I.length-1;C>=0;C--){const D=I[C]|0;R&&D==w||(A[C]=D,R=!1)}this.g=A}var p={};function x(I){return-128<=I&&I<128?d(I,function(w){return new f([w|0],w<0?-1:0)}):new f([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return T;if(I<0)return G(y(-I));const w=[];let A=1;for(let R=0;I>=A;R++)w[R]=I/A|0,A*=4294967296;return new f(w,0)}function _(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return G(_(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(w,8));let R=T;for(let D=0;D<I.length;D+=8){var C=Math.min(8,I.length-D);const j=parseInt(I.substring(D,D+C),w);C<8?(C=y(Math.pow(w,C)),R=R.j(C).add(y(j))):(R=R.j(A),R=R.add(y(j)))}return R}var T=x(0),N=x(1),U=x(16777216);r=f.prototype,r.m=function(){if(Y(this))return-G(this).m();let I=0,w=1;for(let A=0;A<this.g.length;A++){const R=this.i(A);I+=(R>=0?R:4294967296+R)*w,w*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(X(this))return"0";if(Y(this))return"-"+G(this).toString(I);const w=y(Math.pow(I,6));var A=this;let R="";for(;;){const C=xe(A,w).g;A=he(A,C.j(w));let D=((A.g.length>0?A.g[0]:A.h)>>>0).toString(I);if(A=C,X(A))return D+R;for(;D.length<6;)D="0"+D;R=D+R}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function X(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function Y(I){return I.h==-1}r.l=function(I){return I=he(this,I),Y(I)?-1:X(I)?0:1};function G(I){const w=I.g.length,A=[];for(let R=0;R<w;R++)A[R]=~I.g[R];return new f(A,~I.h).add(N)}r.abs=function(){return Y(this)?G(this):this},r.add=function(I){const w=Math.max(this.g.length,I.g.length),A=[];let R=0;for(let C=0;C<=w;C++){let D=R+(this.i(C)&65535)+(I.i(C)&65535),j=(D>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);R=j>>>16,D&=65535,j&=65535,A[C]=j<<16|D}return new f(A,A[A.length-1]&-2147483648?-1:0)};function he(I,w){return I.add(G(w))}r.j=function(I){if(X(this)||X(I))return T;if(Y(this))return Y(I)?G(this).j(G(I)):G(G(this).j(I));if(Y(I))return G(this.j(G(I)));if(this.l(U)<0&&I.l(U)<0)return y(this.m()*I.m());const w=this.g.length+I.g.length,A=[];for(var R=0;R<2*w;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(let C=0;C<I.g.length;C++){const D=this.i(R)>>>16,j=this.i(R)&65535,_e=I.i(C)>>>16,Ve=I.i(C)&65535;A[2*R+2*C]+=j*Ve,oe(A,2*R+2*C),A[2*R+2*C+1]+=D*Ve,oe(A,2*R+2*C+1),A[2*R+2*C+1]+=j*_e,oe(A,2*R+2*C+1),A[2*R+2*C+2]+=D*_e,oe(A,2*R+2*C+2)}for(I=0;I<w;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=w;I<2*w;I++)A[I]=0;return new f(A,0)};function oe(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function me(I,w){this.g=I,this.h=w}function xe(I,w){if(X(w))throw Error("division by zero");if(X(I))return new me(T,T);if(Y(I))return w=xe(G(I),w),new me(G(w.g),G(w.h));if(Y(w))return w=xe(I,G(w)),new me(G(w.g),w.h);if(I.g.length>30){if(Y(I)||Y(w))throw Error("slowDivide_ only works with positive integers.");for(var A=N,R=w;R.l(I)<=0;)A=Te(A),R=Te(R);var C=ye(A,1),D=ye(R,1);for(R=ye(R,2),A=ye(A,2);!X(R);){var j=D.add(R);j.l(I)<=0&&(C=C.add(A),D=j),R=ye(R,1),A=ye(A,1)}return w=he(I,C.j(w)),new me(C,w)}for(C=T;I.l(w)>=0;){for(A=Math.max(1,Math.floor(I.m()/w.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),D=y(A),j=D.j(w);Y(j)||j.l(I)>0;)A-=R,D=y(A),j=D.j(w);X(D)&&(D=N),C=C.add(D),I=he(I,j)}return new me(C,I)}r.B=function(I){return xe(this,I).h},r.and=function(I){const w=Math.max(this.g.length,I.g.length),A=[];for(let R=0;R<w;R++)A[R]=this.i(R)&I.i(R);return new f(A,this.h&I.h)},r.or=function(I){const w=Math.max(this.g.length,I.g.length),A=[];for(let R=0;R<w;R++)A[R]=this.i(R)|I.i(R);return new f(A,this.h|I.h)},r.xor=function(I){const w=Math.max(this.g.length,I.g.length),A=[];for(let R=0;R<w;R++)A[R]=this.i(R)^I.i(R);return new f(A,this.h^I.h)};function Te(I){const w=I.g.length+1,A=[];for(let R=0;R<w;R++)A[R]=I.i(R)<<1|I.i(R-1)>>>31;return new f(A,I.h)}function ye(I,w){const A=w>>5;w%=32;const R=I.g.length-A,C=[];for(let D=0;D<R;D++)C[D]=w>0?I.i(D+A)>>>w|I.i(D+A+1)<<32-w:I.i(D+A);return new f(C,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Qb=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=_,_i=f}).apply(typeof $x<"u"?$x:typeof self<"u"?self:typeof window<"u"?window:{});var Zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $b,qo,Xb,od,Rm,Wb,Zb,Jb;(function(){var r,e=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zu=="object"&&Zu];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=s(this);function o(u,g){if(g)e:{var b=i;u=u.split(".");for(var S=0;S<u.length-1;S++){var z=u[S];if(!(z in b))break e;b=b[z]}u=u[u.length-1],S=b[u],g=g(S),g!=S&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var b=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&b.push([S,g[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function x(u,g,b){return u.call.apply(u.bind,arguments)}function y(u,g,b){return y=x,y.apply(null,arguments)}function _(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function T(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(S,z,K){for(var pe=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)pe[Be-2]=arguments[Be];return g.prototype[z].apply(S,pe)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function U(u){const g=u.length;if(g>0){const b=Array(g);for(let S=0;S<g;S++)b[S]=u[S];return b}return[]}function X(u,g){for(let S=1;S<arguments.length;S++){const z=arguments[S];var b=typeof z;if(b=b!="object"?b:z?Array.isArray(z)?"array":b:"null",b=="array"||b=="object"&&typeof z.length=="number"){b=u.length||0;const K=z.length||0;u.length=b+K;for(let pe=0;pe<K;pe++)u[b+pe]=z[pe]}else u.push(z)}}class Y{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function G(u){f.setTimeout(()=>{throw u},0)}function he(){var u=I;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class oe{constructor(){this.h=this.g=null}add(g,b){const S=me.get();S.set(g,b),this.h?this.h.next=S:this.g=S,this.h=S}}var me=new Y(()=>new xe,u=>u.reset());class xe{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,ye=!1,I=new oe,w=()=>{const u=Promise.resolve(void 0);Te=()=>{u.then(A)}};function A(){for(var u;u=he();){try{u.h.call(u.g)}catch(b){G(b)}var g=me;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}ye=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};f.addEventListener("test",b,g),f.removeEventListener("test",b,g)}catch{}return u})();function j(u){return/^[\s\xa0]*$/.test(u)}function _e(u,g){C.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}T(_e,C),_e.prototype.init=function(u,g){const b=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),Q=0;function de(u,g,b,S,z){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!S,this.ha=z,this.key=++Q,this.da=this.fa=!1}function Ne(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qe(u,g,b){for(const S in u)g.call(b,u[S],S,u)}function Ge(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function M(u){const g={};for(const b in u)g[b]=u[b];return g}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(u,g){let b,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(b in S)u[b]=S[b];for(let K=0;K<J.length;K++)b=J[K],Object.prototype.hasOwnProperty.call(S,b)&&(u[b]=S[b])}}function L(u){this.src=u,this.g={},this.h=0}L.prototype.add=function(u,g,b,S,z){const K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);const pe=te(u,g,S,z);return pe>-1?(g=u[pe],b||(g.fa=!1)):(g=new de(g,this.src,K,!!S,z),g.fa=b,u.push(g)),g};function V(u,g){const b=g.type;if(b in u.g){var S=u.g[b],z=Array.prototype.indexOf.call(S,g,void 0),K;(K=z>=0)&&Array.prototype.splice.call(S,z,1),K&&(Ne(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function te(u,g,b,S){for(let z=0;z<u.length;++z){const K=u[z];if(!K.da&&K.listener==g&&K.capture==!!b&&K.ha==S)return z}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),Ce={};function De(u,g,b,S,z){if(Array.isArray(g)){for(let K=0;K<g.length;K++)De(u,g[K],b,S,z);return null}return b=je(b),u&&u[Ve]?u.J(g,b,p(S)?!!S.capture:!1,z):Z(u,g,b,!1,S,z)}function Z(u,g,b,S,z,K){if(!g)throw Error("Invalid event type");const pe=p(z)?!!z.capture:!!z;let Be=be(u);if(Be||(u[ce]=Be=new L(u)),b=Be.add(g,b,S,pe,K),b.proxy)return b;if(S=we(),b.proxy=S,S.src=u,S.listener=b,u.addEventListener)D||(z=pe),z===void 0&&(z=!1),u.addEventListener(g.toString(),S,z);else if(u.attachEvent)u.attachEvent(ie(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function we(){function u(b){return g.call(u.src,u.listener,b)}const g=ae;return u}function ue(u,g,b,S,z){if(Array.isArray(g))for(var K=0;K<g.length;K++)ue(u,g[K],b,S,z);else S=p(S)?!!S.capture:!!S,b=je(b),u&&u[Ve]?(u=u.i,K=String(g).toString(),K in u.g&&(g=u.g[K],b=te(g,b,S,z),b>-1&&(Ne(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[K],u.h--)))):u&&(u=be(u))&&(g=u.g[g.toString()],u=-1,g&&(u=te(g,b,S,z)),(b=u>-1?g[u]:null)&&q(b))}function q(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Ve])V(g.i,u);else{var b=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(b,S,u.capture):g.detachEvent?g.detachEvent(ie(b),S):g.addListener&&g.removeListener&&g.removeListener(S),(b=be(g))?(V(b,u),b.h==0&&(b.src=null,g[ce]=null)):Ne(u)}}}function ie(u){return u in Ce?Ce[u]:Ce[u]="on"+u}function ae(u,g){if(u.da)u=!0;else{g=new _e(g,this);const b=u.listener,S=u.ha||u.src;u.fa&&q(u),u=b.call(S,g)}return u}function be(u){return u=u[ce],u instanceof L?u:null}var ge="__closure_events_fn_"+(Math.random()*1e9>>>0);function je(u){return typeof u=="function"?u:(u[ge]||(u[ge]=function(g){return u.handleEvent(g)}),u[ge])}function Ye(){R.call(this),this.i=new L(this),this.M=this,this.G=null}T(Ye,R),Ye.prototype[Ve]=!0,Ye.prototype.removeEventListener=function(u,g,b,S){ue(this,u,g,b,S)};function gt(u,g){var b,S=u.G;if(S)for(b=[];S;S=S.G)b.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new C(g,u);else if(g instanceof C)g.target=g.target||u;else{var z=g;g=new C(S,u),fe(g,z)}z=!0;let K,pe;if(b)for(pe=b.length-1;pe>=0;pe--)K=g.g=b[pe],z=fn(K,S,!0,g)&&z;if(K=g.g=u,z=fn(K,S,!0,g)&&z,z=fn(K,S,!1,g)&&z,b)for(pe=0;pe<b.length;pe++)K=g.g=b[pe],z=fn(K,S,!1,g)&&z}Ye.prototype.N=function(){if(Ye.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let S=0;S<b.length;S++)Ne(b[S]);delete u.g[g],u.h--}}this.G=null},Ye.prototype.J=function(u,g,b,S){return this.i.add(String(u),g,!1,b,S)},Ye.prototype.K=function(u,g,b,S){return this.i.add(String(u),g,!0,b,S)};function fn(u,g,b,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let z=!0;for(let K=0;K<g.length;++K){const pe=g[K];if(pe&&!pe.da&&pe.capture==b){const Be=pe.listener,At=pe.ha||pe.src;pe.fa&&V(u.i,pe),z=Be.call(At,S)!==!1&&z}}return z&&!S.defaultPrevented}function Pl(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function Oi(u){u.g=Pl(()=>{u.g=null,u.i&&(u.i=!1,Oi(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Kt extends R{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Oi(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(u){R.call(this),this.h=u,this.g={}}T(er,R);var tr=[];function Dr(u){qe(u.g,function(g,b){this.g.hasOwnProperty(b)&&q(g)},u),u.g={}}er.prototype.N=function(){er.Z.N.call(this),Dr(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Es=f.JSON.stringify,zn=f.JSON.parse,Sa=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Tc(){}function Sc(){}var is={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){C.call(this,"d")}T(Zt,C);function Bn(){C.call(this,"c")}T(Bn,C);var Nt={},Nc=null;function Na(){return Nc=Nc||new Ye}Nt.Ia="serverreachability";function Ac(u){C.call(this,Nt.Ia,u)}T(Ac,C);function Ts(u){const g=Na();gt(g,new Ac(g))}Nt.STAT_EVENT="statevent";function Vi(u,g){C.call(this,Nt.STAT_EVENT,u),this.stat=g}T(Vi,C);function Dt(u){const g=Na();gt(g,new Vi(g,u))}Nt.Ja="timingevent";function Ss(u,g){C.call(this,Nt.Ja,u),this.size=g}T(Ss,C);function Ns(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function as(){this.g=!0}as.prototype.ua=function(){this.g=!1};function nh(u,g,b,S,z,K){u.info(function(){if(u.g)if(K){var pe="",Be=K.split("&");for(let rt=0;rt<Be.length;rt++){var At=Be[rt].split("=");if(At.length>1){const bt=At[0];At=At[1];const Gn=bt.split("_");pe=Gn.length>=2&&Gn[1]=="type"?pe+(bt+"="+At+"&"):pe+(bt+"=redacted&")}}}else pe=null;else pe=K;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+g+`
`+b+`
`+pe})}function jc(u,g,b,S,z,K,pe){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+g+`
`+b+`
`+K+" "+pe})}function As(u,g,b,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+sh(u,b)+(S?" "+S:"")})}function Li(u,g){u.info(function(){return"TIMEOUT: "+g})}as.prototype.info=function(){};function sh(u,g){if(!u.g)return g;if(!g)return null;try{const K=JSON.parse(g);if(K){for(u=0;u<K.length;u++)if(Array.isArray(K[u])){var b=K[u];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let pe=1;pe<S.length;pe++)S[pe]=""}}}}return Es(K)}catch{return g}}var Pi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ul={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zl;function Ui(){}T(Ui,Tc),Ui.prototype.g=function(){return new XMLHttpRequest},zl=new Ui;function nr(u){return encodeURIComponent(String(u))}function Cc(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function ls(u,g,b,S){this.j=u,this.i=g,this.l=b,this.S=S||1,this.V=new er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new os}function os(){this.i=null,this.g="",this.h=!1}var Mt={},Qt={};function js(u,g,b){u.M=1,u.A=zi(Vt(g)),u.u=b,u.R=!0,Aa(u,null)}function Aa(u,g){u.F=Date.now(),Cs(u),u.B=Vt(u.A);var b=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Ia(b.i,"t",S),u.C=0,b=u.j.L,u.h=new os,u.g=Fc(u.j,b?g:null,!u.u),u.P>0&&(u.O=new Kt(y(u.Y,u,u.g),u.P)),g=u.V,b=u.g,S=u.ba;var z="readystatechange";Array.isArray(z)||(z&&(tr[0]=z.toString()),z=tr);for(let K=0;K<z.length;K++){const pe=De(b,z[K],S||g.handleEvent,!1,g.h||g);if(!pe)break;g.g[pe.key]=pe}g=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Ts(),nh(u.i,u.v,u.B,u.l,u.S,u.u)}ls.prototype.ba=function(u){u=u.target;const g=this.O;g&&ds(u)==3?g.j():this.Y(u)},ls.prototype.Y=function(u){try{if(u==this.g)e:{const Be=ds(this.g),At=this.g.ya(),rt=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Be!=4||At==7||(At==8||rt<=0?Ts(3):Ts(2)),Rs(this);var g=this.g.ca();this.X=g;var b=rh(this);if(this.o=g==200,jc(this.i,this.v,this.B,this.l,this.S,Be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(S)){var K=S;break t}}K=null}if(u=K)As(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Is(this,u);else{this.o=!1,this.m=3,Dt(12),jn(this),Hn(this);break e}}if(this.R){u=!0;let bt;for(;!this.K&&this.C<b.length;)if(bt=Ic(this,b),bt==Qt){Be==4&&(this.m=4,Dt(14),u=!1),As(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==Mt){this.m=4,Dt(15),As(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else As(this.i,this.l,bt,null),Is(this,bt);if(Rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||b.length!=0||this.h.h||(this.m=1,Dt(16),u=!1),this.o=this.o&&u,!u)As(this.i,this.l,b,"[Invalid Chunked Response]"),jn(this),Hn(this);else if(b.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),to(pe),pe.P=!0,Dt(11))}}else As(this.i,this.l,b,null),Is(this,b);Be==4&&jn(this),this.o&&!this.K&&(Be==4?zc(this.j,this):(this.o=!1,Cs(this)))}else rr(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),jn(this),Hn(this)}}}catch{}finally{}};function rh(u){if(!Rc(u))return u.g.la();const g=Jt(u.g);if(g==="")return"";let b="";const S=g.length,z=ds(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return jn(u),Hn(u),"";u.h.i=new f.TextDecoder}for(let K=0;K<S;K++)u.h.h=!0,b+=u.h.i.decode(g[K],{stream:!(z&&K==S-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function Rc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ic(u,g){var b=u.C,S=g.indexOf(`
`,b);return S==-1?Qt:(b=Number(g.substring(b,S)),isNaN(b)?Mt:(S+=1,S+b>g.length?Qt:(g=g.slice(S,S+b),u.C=S+b,g)))}ls.prototype.cancel=function(){this.K=!0,jn(this)};function Cs(u){u.T=Date.now()+u.H,ja(u,u.H)}function ja(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ns(y(u.aa,u),g)}function Rs(u){u.D&&(f.clearTimeout(u.D),u.D=null)}ls.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Li(this.i,this.B),this.M!=2&&(Ts(),Dt(17)),jn(this),this.m=2,Hn(this)):ja(this,this.T-u)};function Hn(u){u.j.I==0||u.K||zc(u.j,u)}function jn(u){Rs(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Dr(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Is(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||Ds(b.h,u))){if(!u.L&&Ds(b.h,u)&&b.I==3){try{var S=b.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Va(b),Br(b);else break e;Ki(b),Dt(18)}}else b.xa=z[1],0<b.xa-b.K&&z[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Ns(y(b.Va,b),6e3));ks(b.h)<=1&&b.ta&&(b.ta=void 0)}else Us(b,11)}else if((u.L||b.g==u)&&Va(b),!j(g))for(z=b.Ba.g.parse(g),g=0;g<z.length;g++){let rt=z[g];const bt=rt[0];if(!(bt<=b.K))if(b.K=bt,rt=rt[1],b.I==2)if(rt[0]=="c"){b.M=rt[1],b.ba=rt[2];const Gn=rt[3];Gn!=null&&(b.ka=Gn,b.j.info("VER="+b.ka));const zs=rt[4];zs!=null&&(b.za=zs,b.j.info("SVER="+b.za));const hs=rt[5];hs!=null&&typeof hs=="number"&&hs>0&&(S=1.5*hs,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const fs=u.g;if(fs){const Qi=fs.g?fs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qi){var K=S.h;K.g||Qi.indexOf("spdy")==-1&&Qi.indexOf("quic")==-1&&Qi.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ql(K,K.h),K.h=null))}if(S.G){const La=fs.g?fs.g.getResponseHeader("X-HTTP-Session-Id"):null;La&&(S.wa=La,lt(S.J,S.G,La))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var pe=u;if(S.na=qc(S,S.L?S.ba:null,S.W),pe.L){Fl(S.h,pe);var Be=pe,At=S.O;At&&(Be.H=At),Be.D&&(Rs(Be),Cs(Be)),S.g=pe}else Pc(S);b.i.length>0&&Ps(b)}else rt[0]!="stop"&&rt[0]!="close"||Us(b,7);else b.I==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Us(b,7):Jl(b):rt[0]!="noop"&&b.l&&b.l.qa(rt),b.A=0)}}Ts(4)}catch{}}var Ot=class{constructor(u,g){this.g=u,this.map=g}};function Bl(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ks(u){return u.h?1:u.g?u.g.size:0}function Ds(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ql(u,g){u.g?u.g.add(g):u.h=g}function Fl(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Bl.prototype.cancel=function(){if(this.i=Gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Gl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return U(u.i)}var kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ca(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const S=u[b].indexOf("=");let z,K=null;S>=0?(z=u[b].substring(0,S),K=u[b].substring(S+1)):z=u[b],g(z,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Cn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Cn?(this.l=u.l,$t(this,u.j),this.o=u.o,this.g=u.g,Mr(this,u.u),this.h=u.h,Yl(this,Vc(u.i)),this.m=u.m):u&&(g=String(u).match(kc))?(this.l=!1,$t(this,g[1]||"",!0),this.o=Ms(g[2]||""),this.g=Ms(g[3]||"",!0),Mr(this,g[4]),this.h=Ms(g[5]||"",!0),Yl(this,g[6]||"",!0),this.m=Ms(g[7]||"")):(this.l=!1,this.i=new Vr(null,this.l))}Cn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Bi(g,Ra,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Bi(g,Ra,!0),"@"),u.push(nr(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Bi(b,b.charAt(0)=="/"?Kl:Dc,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Bi(b,Mc)),u.join("")},Cn.prototype.resolve=function(u){const g=Vt(this);let b=!!u.j;b?$t(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var S=u.h;if(b)Mr(g,u.u);else if(b=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=g.h.lastIndexOf("/");z!=-1&&(S=g.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const K=[];for(let pe=0;pe<z.length;){const Be=z[pe++];Be=="."?S&&pe==z.length&&K.push(""):Be==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),S&&pe==z.length&&K.push("")):(K.push(Be),S=!0)}S=K.join("/")}else S=z}return b?g.h=S:b=u.i.toString()!=="",b?Yl(g,Vc(u.i)):b=!!u.m,b&&(g.m=u.m),g};function Vt(u){return new Cn(u)}function $t(u,g,b){u.j=b?Ms(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Mr(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Yl(u,g,b){g instanceof Vr?(u.i=g,ka(u.i,u.l)):(b||(g=Bi(g,Or)),u.i=new Vr(g,u.l))}function lt(u,g,b){u.i.set(g,b)}function zi(u){return lt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ms(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Bi(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,yn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function yn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ra=/[#\/\?@]/g,Dc=/[#\?:]/g,Kl=/[#\?]/g,Or=/[#\?@]/g,Mc=/#/g;function Vr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function xn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ca(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}r=Vr.prototype,r.add=function(u,g){xn(this),this.i=null,u=Lr(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Oc(u,g){xn(u),g=Lr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Ql(u,g){return xn(u),g=Lr(u,g),u.g.has(g)}r.forEach=function(u,g){xn(this),this.g.forEach(function(b,S){b.forEach(function(z){u.call(g,z,S,this)},this)},this)};function $l(u,g){xn(u);let b=[];if(typeof g=="string")Ql(u,g)&&(b=b.concat(u.g.get(Lr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}r.set=function(u,g){return xn(this),this.i=null,u=Lr(this,u),Ql(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=$l(this,u),u.length>0?String(u[0]):g):g};function Ia(u,g,b){Oc(u,g),b.length>0&&(u.i=null,u.g.set(Lr(u,g),U(b)),u.h+=b.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var b=g[S];const z=nr(b);b=$l(this,b);for(let K=0;K<b.length;K++){let pe=z;b[K]!==""&&(pe+="="+nr(b[K])),u.push(pe)}}return this.i=u.join("&")};function Vc(u){const g=new Vr;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Lr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function ka(u,g){g&&!u.j&&(xn(u),u.i=null,u.g.forEach(function(b,S){const z=S.toLowerCase();S!=z&&(Oc(this,S),Ia(this,z,b))},u)),u.j=g}function cs(u,g){const b=new as;if(f.Image){const S=new Image;S.onload=_(qn,b,"TestLoadImage: loaded",!0,g,S),S.onerror=_(qn,b,"TestLoadImage: error",!1,g,S),S.onabort=_(qn,b,"TestLoadImage: abort",!1,g,S),S.ontimeout=_(qn,b,"TestLoadImage: timeout",!1,g,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function Xl(u,g){const b=new as,S=new AbortController,z=setTimeout(()=>{S.abort(),qn(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(K=>{clearTimeout(z),K.ok?qn(b,"TestPingServer: ok",!0,g):qn(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),qn(b,"TestPingServer: error",!1,g)})}function qn(u,g,b,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(b)}catch{}}function Pr(){this.g=new Sa}function Os(u){this.i=u.Sb||null,this.h=u.ab||!1}T(Os,Tc),Os.prototype.g=function(){return new Hi(this.i,this.h)};function Hi(u,g){Ye.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Hi,Ye),r=Hi.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,us(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ur(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,us(this)),this.g&&(this.readyState=3,us(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Da(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Da(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ur(this):us(this),this.readyState==3&&Da(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Ur(this))},r.Na=function(u){this.g&&(this.response=u,Ur(this))},r.ga=function(){this.g&&Ur(this)};function Ur(u){u.readyState=4,u.l=null,u.j=null,u.B=null,us(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function us(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Hi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Fn(u){let g="";return qe(u,function(b,S){g+=S,g+=":",g+=b,g+=`\r
`}),g}function qi(u,g,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Fn(b),typeof u=="string"?b!=null&&nr(b):lt(u,g,b))}function ut(u){Ye.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(ut,Ye);var Vs=/^https?$/i,Wl=["POST","PUT"];r=ut.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zl.g(),this.g.onreadystatechange=N(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){Fi(this,K);return}if(u=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)b.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())b.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(K=>K.toLowerCase()=="content-type"),z=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(Wl,g,void 0)>=0)||S||z||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,pe]of b)this.g.setRequestHeader(K,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(K){Fi(this,K)}};function Fi(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Zl(u),sr(u)}function Zl(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,gt(this,"complete"),gt(this,"abort"),sr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sr(this,!0)),ut.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Gi(this):this.Xa())},r.Xa=function(){Gi(this)};function Gi(u){if(u.h&&typeof d<"u"){if(u.v&&ds(u)==4)setTimeout(u.Ca.bind(u),0);else if(gt(u,"readystatechange"),ds(u)==4){u.h=!1;try{const K=u.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var S;if(S=K===0){let pe=String(u.D).match(kc)[1]||null;!pe&&f.self&&f.self.location&&(pe=f.self.location.protocol.slice(0,-1)),S=!Vs.test(pe?pe.toLowerCase():"")}b=S}if(b)gt(u,"complete"),gt(u,"success");else{u.o=6;try{var z=ds(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",Zl(u)}}finally{sr(u)}}}}function sr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||gt(u,"ready");try{b.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ds(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ds(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),zn(g)}};function Jt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function rr(u){const g={};u=(u.g&&ds(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(j(u[S]))continue;var b=Cc(u[S]);const z=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const K=g[z]||[];g[z]=K,K.push(b)}Ge(g,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function zr(u){this.za=0,this.i=[],this.j=new as,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ls("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ls("baseRetryDelayMs",5e3,u),this.Za=Ls("retryDelaySeedMs",1e4,u),this.Ta=Ls("forwardChannelMaxRetries",2,u),this.va=Ls("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Bl(u&&u.concurrentRequestLimit),this.Ba=new Pr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=zr.prototype,r.ka=8,r.I=1,r.connect=function(u,g,b,S){Dt(0),this.W=u,this.H=g||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=qc(this,null,this.W),Ps(this)};function Jl(u){if(Ma(u),u.I==3){var g=u.V++,b=Vt(u.J);if(lt(b,"SID",u.M),lt(b,"RID",g),lt(b,"TYPE","terminate"),Yi(u,b),g=new ls(u,u.j,g),g.M=2,g.A=zi(Vt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=g.A,b=!0),b||(g.g=Fc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Cs(g)}Hc(u)}function Br(u){u.g&&(to(u),u.g.cancel(),u.g=null)}function Ma(u){Br(u),u.v&&(f.clearTimeout(u.v),u.v=null),Va(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Ps(u){if(!Hl(u.h)&&!u.m){u.m=!0;var g=u.Ea;Te||w(),ye||(Te(),ye=!0),I.add(g,u),u.D=0}}function Oa(u,g){return ks(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ns(y(u.Ea,u,g),Bc(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new ls(this,this.j,u);let K=this.o;if(this.U&&(K?(K=M(K),fe(K,this.U)):K=this.U),this.u!==null||this.R||(z.J=K,K=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Lc(this,z,g),b=Vt(this.J),lt(b,"RID",u),lt(b,"CVER",22),this.G&&lt(b,"X-HTTP-Session-Id",this.G),Yi(this,b),K&&(this.R?g="headers="+nr(Fn(K))+"&"+g:this.u&&qi(b,this.u,K)),ql(this.h,z),this.Ra&&lt(b,"TYPE","init"),this.S?(lt(b,"$req",g),lt(b,"SID","null"),z.U=!0,js(z,b,null)):js(z,b,g),this.I=2}}else this.I==3&&(u?eo(this,u):this.i.length==0||Hl(this.h)||eo(this))};function eo(u,g){var b;g?b=g.l:b=u.V++;const S=Vt(u.J);lt(S,"SID",u.M),lt(S,"RID",b),lt(S,"AID",u.K),Yi(u,S),u.u&&u.o&&qi(S,u.u,u.o),b=new ls(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Lc(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ql(u.h,b),js(b,S,g)}function Yi(u,g){u.H&&qe(u.H,function(b,S){lt(g,S,b)}),u.l&&qe({},function(b,S){lt(g,S,b)})}function Lc(u,g,b){b=Math.min(u.i.length,b);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var z=u.i;let Be=-1;for(;;){const At=["count="+b];Be==-1?b>0?(Be=z[0].g,At.push("ofs="+Be)):Be=0:At.push("ofs="+Be);let rt=!0;for(let bt=0;bt<b;bt++){var K=z[bt].g;const Gn=z[bt].map;if(K-=Be,K<0)Be=Math.max(0,z[bt].g-100),rt=!1;else try{K="req"+K+"_"||"";try{var pe=Gn instanceof Map?Gn:Object.entries(Gn);for(const[zs,hs]of pe){let fs=hs;p(hs)&&(fs=Es(hs)),At.push(K+zs+"="+encodeURIComponent(fs))}}catch(zs){throw At.push(K+"type="+encodeURIComponent("_badmap")),zs}}catch{S&&S(Gn)}}if(rt){pe=At.join("&");break e}}pe=void 0}return u=u.i.splice(0,b),g.G=u,pe}function Pc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Te||w(),ye||(Te(),ye=!0),I.add(g,u),u.A=0}}function Ki(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ns(y(u.Da,u),Bc(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Uc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ns(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Br(this),Uc(this))};function to(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Uc(u){u.g=new ls(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Vt(u.na);lt(g,"RID","rpc"),lt(g,"SID",u.M),lt(g,"AID",u.K),lt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&lt(g,"TO",u.ia),lt(g,"TYPE","xmlhttp"),Yi(u,g),u.u&&u.o&&qi(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=zi(Vt(g)),b.u=null,b.R=!0,Aa(b,u)}r.Va=function(){this.C!=null&&(this.C=null,Br(this),Ki(this),Dt(19))};function Va(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function zc(u,g){var b=null;if(u.g==g){Va(u),to(u),u.g=null;var S=2}else if(Ds(u.h,g))b=g.G,Fl(u.h,g),S=1;else return;if(u.I!=0){if(g.o)if(S==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var z=u.D;S=Na(),gt(S,new Ss(S,b)),Ps(u)}else Pc(u);else if(z=g.m,z==3||z==0&&g.X>0||!(S==1&&Oa(u,g)||S==2&&Ki(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),z){case 1:Us(u,5);break;case 4:Us(u,10);break;case 3:Us(u,6);break;default:Us(u,2)}}}function Bc(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Us(u,g){if(u.j.info("Error code "+g),g==2){var b=y(u.bb,u),S=u.Ua;const z=!S;S=new Cn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||$t(S,"https"),zi(S),z?cs(S.toString(),b):Xl(S.toString(),b)}else Dt(2);u.I=0,u.l&&u.l.pa(g),Hc(u),Ma(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Hc(u){if(u.I=0,u.ja=[],u.l){const g=Gl(u.h);(g.length!=0||u.i.length!=0)&&(X(u.ja,g),X(u.ja,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.oa()}}function qc(u,g,b){var S=b instanceof Cn?Vt(b):new Cn(b);if(S.g!="")g&&(S.g=g+"."+S.g),Mr(S,S.u);else{var z=f.location;S=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;const K=new Cn(null);S&&$t(K,S),g&&(K.g=g),z&&Mr(K,z),b&&(K.h=b),S=K}return b=u.G,g=u.wa,b&&g&&lt(S,b,g),lt(S,"VER",u.ka),Yi(u,S),S}function Fc(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new ut(new Os({ab:b})):new ut(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gc(){}r=Gc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Hr(){}Hr.prototype.g=function(u,g){return new mn(u,g)};function mn(u,g){Ye.call(this),this.g=new zr(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!j(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!j(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ir(this)}T(mn,Ye),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Jl(this.g)},mn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=Es(u),u=b);g.i.push(new Ot(g.Ya++,u)),g.I==3&&Ps(g)},mn.prototype.N=function(){this.g.l=null,delete this.j,Jl(this.g),delete this.g,mn.Z.N.call(this)};function Yc(u){Zt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(Yc,Zt);function Kc(){Bn.call(this),this.status=1}T(Kc,Bn);function ir(u){this.g=u}T(ir,Gc),ir.prototype.ra=function(){gt(this.g,"a")},ir.prototype.qa=function(u){gt(this.g,new Yc(u))},ir.prototype.pa=function(u){gt(this.g,new Kc)},ir.prototype.oa=function(){gt(this.g,"b")},Hr.prototype.createWebChannel=Hr.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Jb=function(){return new Hr},Zb=function(){return Na()},Wb=Nt,Rm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,od=Pi,Ul.COMPLETE="complete",Xb=Ul,Sc.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",Ye.prototype.listen=Ye.prototype.J,qo=Sc,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,$b=ut}).apply(typeof Zu<"u"?Zu:typeof self<"u"?self:typeof window<"u"?window:{});const Xx="@firebase/firestore",Wx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new Wm("@firebase/firestore");function ml(){return _a.logLevel}function Ee(r,...e){if(_a.logLevel<=We.DEBUG){const s=e.map(og);_a.debug(`Firestore (${Dl}): ${r}`,...s)}}function Ar(r,...e){if(_a.logLevel<=We.ERROR){const s=e.map(og);_a.error(`Firestore (${Dl}): ${r}`,...s)}}function Tl(r,...e){if(_a.logLevel<=We.WARN){const s=e.map(og);_a.warn(`Firestore (${Dl}): ${r}`,...s)}}function og(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(r,e,s){let i="Unexpected state";typeof e=="string"?i=e:s=e,e_(r,i,s)}function e_(r,e,s){let i=`FIRESTORE (${Dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(s!==void 0)try{i+=" CONTEXT: "+JSON.stringify(s)}catch{i+=" CONTEXT: "+s}throw Ar(i),new Error(i)}function at(r,e,s,i){let o="Unexpected state";typeof s=="string"?o=s:i=s,r||e_(e,o,i)}function ze(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Rr{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(un.UNAUTHENTICATED)))}shutdown(){}}class xN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class vN{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){at(this.o===void 0,42304);let i=this.i;const o=x=>this.i!==i?(i=this.i,s(x)):Promise.resolve();let d=new wi;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new wi,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const x=d;e.enqueueRetryable((async()=>{await x.promise,await o(this.currentUser)}))},p=x=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((x=>p(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?p(x):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new wi)}}),0),f()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((i=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(at(typeof i.accessToken=="string",31837,{l:i}),new t_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class bN{constructor(e,s,i){this.P=e,this.T=s,this.I=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _N{constructor(e,s,i){this.P=e,this.T=s,this.I=i}getToken(){return Promise.resolve(new bN(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wN{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ts(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){at(this.o===void 0,3512);const i=d=>{d.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const f=d.token!==this.m;return this.m=d.token,Ee("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?s(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>i(d)))};const o=d=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>o(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?o(d):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Zx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(at(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new Zx(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let i=0;i<r;i++)s[i]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=EN(40);for(let d=0;d<o.length;++d)i.length<20&&o[d]<s&&(i+=e.charAt(o[d]%62))}return i}}function Ze(r,e){return r<e?-1:r>e?1:0}function Im(r,e){const s=Math.min(r.length,e.length);for(let i=0;i<s;i++){const o=r.charAt(i),d=e.charAt(i);if(o!==d)return hm(o)===hm(d)?Ze(o,d):hm(o)?1:-1}return Ze(r.length,e.length)}const TN=55296,SN=57343;function hm(r){const e=r.charCodeAt(0);return e>=TN&&e<=SN}function Sl(r,e,s){return r.length===e.length&&r.every(((i,o)=>s(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="__name__";class Gs{constructor(e,s,i){s===void 0?s=0:s>e.length&&Oe(637,{offset:s,range:e.length}),i===void 0?i=e.length-s:i>e.length-s&&Oe(1746,{length:i,range:e.length-s}),this.segments=e,this.offset=s,this.len=i}get length(){return this.len}isEqual(e){return Gs.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Gs?e.forEach((i=>{s.push(i)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,i=this.limit();s<i;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const i=Math.min(e.length,s.length);for(let o=0;o<i;o++){const d=Gs.compareSegments(e.get(o),s.get(o));if(d!==0)return d}return Ze(e.length,s.length)}static compareSegments(e,s){const i=Gs.isNumericId(e),o=Gs.isNumericId(s);return i&&!o?-1:!i&&o?1:i&&o?Gs.extractNumericId(e).compare(Gs.extractNumericId(s)):Im(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _i.fromString(e.substring(4,e.length-2))}}class pt extends Gs{construct(e,s,i){return new pt(e,s,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const i of e){if(i.indexOf("//")>=0)throw new ve(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);s.push(...i.split("/").filter((o=>o.length>0)))}return new pt(s)}static emptyPath(){return new pt([])}}const NN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Gs{construct(e,s,i){return new an(e,s,i)}static isValidIdentifier(e){return NN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jx}static keyField(){return new an([Jx])}static fromServerFormat(e){const s=[];let i="",o=0;const d=()=>{if(i.length===0)throw new ve(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(i),i=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ve(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[o+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new ve(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=x,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(i+=p,o++):(d(),o++)}if(d(),f)throw new ve(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(s)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(pt.fromString(e))}static fromName(e){return new Ie(pt.fromString(e).popFirst(5))}static empty(){return new Ie(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return pt.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(r,e,s){if(!s)throw new ve(ne.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function AN(r,e,s,i){if(e===!0&&i===!0)throw new ve(ne.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}function ev(r){if(!Ie.isDocumentKey(r))throw new ve(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function tv(r){if(Ie.isDocumentKey(r))throw new ve(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function s_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Pd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Oe(12329,{type:typeof r})}function Un(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ve(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Pd(r);throw new ve(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(r,e){const s={typeString:r};return e&&(s.value=e),s}function gc(r,e){if(!s_(r))throw new ve(ne.INVALID_ARGUMENT,"JSON must be an object");let s;for(const i in e)if(e[i]){const o=e[i].typeString,d="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){s=`JSON missing required field: '${i}'`;break}const f=r[i];if(o&&typeof f!==o){s=`JSON field '${i}' must be a ${o}.`;break}if(d!==void 0&&f!==d.value){s=`Expected '${i}' field to equal '${d.value}'`;break}}if(s)throw new ve(ne.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=-62135596800,sv=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),i=Math.floor((e-1e3*s)*sv);return new vt(s,i)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new ve(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new ve(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<nv)throw new ve(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sv}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gc(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:qt("string",vt._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new vt(0,0))}static max(){return new Le(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=-1;function jN(r,e){const s=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Le.fromTimestamp(i===1e9?new vt(s+1,0):new vt(s,i));return new Ti(o,Ie.empty(),e)}function CN(r){return new Ti(r.readTime,r.key,nc)}class Ti{constructor(e,s,i){this.readTime=e,this.documentKey=s,this.largestBatchId=i}static min(){return new Ti(Le.min(),Ie.empty(),nc)}static max(){return new Ti(Le.max(),Ie.empty(),nc)}}function RN(r,e){let s=r.readTime.compareTo(e.readTime);return s!==0?s:(s=Ie.comparator(r.documentKey,e.documentKey),s!==0?s:Ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(r){if(r.code!==ne.FAILED_PRECONDITION||r.message!==IN)throw r;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new le(((i,o)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(i,o)},this.catchCallback=d=>{this.wrapFailure(s,d).next(i,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof le?s:le.resolve(s)}catch(s){return le.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):le.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):le.reject(s)}static resolve(e){return new le(((s,i)=>{s(e)}))}static reject(e){return new le(((s,i)=>{i(e)}))}static waitFor(e){return new le(((s,i)=>{let o=0,d=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++d,f&&d===o&&s()}),(x=>i(x)))})),f=!0,d===o&&s()}))}static or(e){let s=le.resolve(!1);for(const i of e)s=s.next((o=>o?le.resolve(o):i()));return s}static forEach(e,s){const i=[];return e.forEach(((o,d)=>{i.push(s.call(this,o,d))})),this.waitFor(i)}static mapArray(e,s){return new le(((i,o)=>{const d=e.length,f=new Array(d);let p=0;for(let x=0;x<d;x++){const y=x;s(e[y]).next((_=>{f[y]=_,++p,p===d&&i(f)}),(_=>o(_)))}}))}static doWhile(e,s){return new le(((i,o)=>{const d=()=>{e()===!0?s().next((()=>{d()}),o):i()};d()}))}}function DN(r){const e=r.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Ol(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>s.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ud.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug=-1;function zd(r){return r==null}function Ed(r){return r===0&&1/r==-1/0}function MN(r){return typeof r=="number"&&Number.isInteger(r)&&!Ed(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="";function ON(r){let e="";for(let s=0;s<r.length;s++)e.length>0&&(e=rv(e)),e=VN(r.get(s),e);return rv(e)}function VN(r,e){let s=e;const i=r.length;for(let o=0;o<i;o++){const d=r.charAt(o);switch(d){case"\0":s+="";break;case r_:s+="";break;default:s+=d}}return s}function rv(r){return r+r_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(r){let e=0;for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&e++;return e}function ki(r,e){for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&e(s,r[s])}function i_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,s){this.comparator=e,this.root=s||rn.EMPTY}insert(e,s){return new Et(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return s.value;i<0?s=s.left:i>0&&(s=s.right)}return null}indexOf(e){let s=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return s+i.left.size;o<0?i=i.left:(s+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,i)=>(e(s,i),!1)))}toString(){const e=[];return this.inorderTraversal(((s,i)=>(e.push(`${s}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ju(this.root,e,this.comparator,!0)}}class Ju{constructor(e,s,i,o){this.isReverse=o,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=s?i(e.key,s):1,s&&o&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,s,i,o,d){this.key=e,this.value=s,this.color=i??rn.RED,this.left=o??rn.EMPTY,this.right=d??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,i,o,d){return new rn(e??this.key,s??this.value,i??this.color,o??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,i){let o=this;const d=i(e,o.key);return o=d<0?o.copy(null,null,null,o.left.insert(e,s,i),null):d===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let i,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return rn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,s,i,o,d){return this}insert(e,s,i){return new rn(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,i)=>(e(s),!1)))}forEachInRange(e,s){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let i;for(i=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new av(this.data.getIterator())}getIteratorFrom(e){return new av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((i=>{s=s.add(i)})),s}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const s=this.data.getIterator(),i=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=i.getNext().key;if(this.comparator(o,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new Yt(this.comparator);return s.data=e,s}}class av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Pn([])}unionWith(e){let s=new Yt(an.comparator);for(const i of this.fields)s=s.add(i);for(const i of e)s=s.add(i);return new Pn(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,((s,i)=>s.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new a_("Invalid base64 string: "+d):d}})(e);return new ln(s)}static fromUint8Array(e){const s=(function(o){let d="";for(let f=0;f<o.length;++f)d+=String.fromCharCode(o[f]);return d})(e);return new ln(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const i=new Uint8Array(s.length);for(let o=0;o<s.length;o++)i[o]=s.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const LN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(r){if(at(!!r,39018),typeof r=="string"){let e=0;const s=LN.exec(r);if(at(!!s,46558,{timestamp:r}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(r.seconds),nanos:Rt(r.nanos)}}function Rt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ni(r){return typeof r=="string"?ln.fromBase64String(r):ln.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="server_timestamp",o_="__type__",c_="__previous_value__",u_="__local_write_time__";function dg(r){return(r?.mapValue?.fields||{})[o_]?.stringValue===l_}function Bd(r){const e=r.mapValue.fields[c_];return dg(e)?Bd(e):e}function sc(r){const e=Si(r.mapValue.fields[u_].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,s,i,o,d,f,p,x,y,_){this.databaseId=e,this.appId=s,this.persistenceKey=i,this.host=o,this.ssl=d,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=x,this.useFetchStreams=y,this.isUsingEmulator=_}}const Td="(default)";class rc{constructor(e,s){this.projectId=e,this.database=s||Td}static empty(){return new rc("","")}get isDefaultDatabase(){return this.database===Td}isEqual(e){return e instanceof rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="__type__",UN="__max__",ed={mapValue:{}},h_="__vector__",Sd="value";function Ai(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?dg(r)?4:BN(r)?9007199254740991:zN(r)?10:11:Oe(28295,{value:r})}function Zs(r,e){if(r===e)return!0;const s=Ai(r);if(s!==Ai(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return sc(r).isEqual(sc(e));case 3:return(function(o,d){if(typeof o.timestampValue=="string"&&typeof d.timestampValue=="string"&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const f=Si(o.timestampValue),p=Si(d.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,d){return Ni(o.bytesValue).isEqual(Ni(d.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,d){return Rt(o.geoPointValue.latitude)===Rt(d.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(d.geoPointValue.longitude)})(r,e);case 2:return(function(o,d){if("integerValue"in o&&"integerValue"in d)return Rt(o.integerValue)===Rt(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const f=Rt(o.doubleValue),p=Rt(d.doubleValue);return f===p?Ed(f)===Ed(p):isNaN(f)&&isNaN(p)}return!1})(r,e);case 9:return Sl(r.arrayValue.values||[],e.arrayValue.values||[],Zs);case 10:case 11:return(function(o,d){const f=o.mapValue.fields||{},p=d.mapValue.fields||{};if(iv(f)!==iv(p))return!1;for(const x in f)if(f.hasOwnProperty(x)&&(p[x]===void 0||!Zs(f[x],p[x])))return!1;return!0})(r,e);default:return Oe(52216,{left:r})}}function ic(r,e){return(r.values||[]).find((s=>Zs(s,e)))!==void 0}function Nl(r,e){if(r===e)return 0;const s=Ai(r),i=Ai(e);if(s!==i)return Ze(s,i);switch(s){case 0:case 9007199254740991:return 0;case 1:return Ze(r.booleanValue,e.booleanValue);case 2:return(function(d,f){const p=Rt(d.integerValue||d.doubleValue),x=Rt(f.integerValue||f.doubleValue);return p<x?-1:p>x?1:p===x?0:isNaN(p)?isNaN(x)?0:-1:1})(r,e);case 3:return lv(r.timestampValue,e.timestampValue);case 4:return lv(sc(r),sc(e));case 5:return Im(r.stringValue,e.stringValue);case 6:return(function(d,f){const p=Ni(d),x=Ni(f);return p.compareTo(x)})(r.bytesValue,e.bytesValue);case 7:return(function(d,f){const p=d.split("/"),x=f.split("/");for(let y=0;y<p.length&&y<x.length;y++){const _=Ze(p[y],x[y]);if(_!==0)return _}return Ze(p.length,x.length)})(r.referenceValue,e.referenceValue);case 8:return(function(d,f){const p=Ze(Rt(d.latitude),Rt(f.latitude));return p!==0?p:Ze(Rt(d.longitude),Rt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return ov(r.arrayValue,e.arrayValue);case 10:return(function(d,f){const p=d.fields||{},x=f.fields||{},y=p[Sd]?.arrayValue,_=x[Sd]?.arrayValue,T=Ze(y?.values?.length||0,_?.values?.length||0);return T!==0?T:ov(y,_)})(r.mapValue,e.mapValue);case 11:return(function(d,f){if(d===ed.mapValue&&f===ed.mapValue)return 0;if(d===ed.mapValue)return 1;if(f===ed.mapValue)return-1;const p=d.fields||{},x=Object.keys(p),y=f.fields||{},_=Object.keys(y);x.sort(),_.sort();for(let T=0;T<x.length&&T<_.length;++T){const N=Im(x[T],_[T]);if(N!==0)return N;const U=Nl(p[x[T]],y[_[T]]);if(U!==0)return U}return Ze(x.length,_.length)})(r.mapValue,e.mapValue);default:throw Oe(23264,{he:s})}}function lv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ze(r,e);const s=Si(r),i=Si(e),o=Ze(s.seconds,i.seconds);return o!==0?o:Ze(s.nanos,i.nanos)}function ov(r,e){const s=r.values||[],i=e.values||[];for(let o=0;o<s.length&&o<i.length;++o){const d=Nl(s[o],i[o]);if(d)return d}return Ze(s.length,i.length)}function Al(r){return km(r)}function km(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(s){const i=Si(s);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(s){return Ni(s).toBase64()})(r.bytesValue):"referenceValue"in r?(function(s){return Ie.fromName(s).toString()})(r.referenceValue):"geoPointValue"in r?(function(s){return`geo(${s.latitude},${s.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(s){let i="[",o=!0;for(const d of s.values||[])o?o=!1:i+=",",i+=km(d);return i+"]"})(r.arrayValue):"mapValue"in r?(function(s){const i=Object.keys(s.fields||{}).sort();let o="{",d=!0;for(const f of i)d?d=!1:o+=",",o+=`${f}:${km(s.fields[f])}`;return o+"}"})(r.mapValue):Oe(61005,{value:r})}function cd(r){switch(Ai(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bd(r);return e?16+cd(e):16;case 5:return 2*r.stringValue.length;case 6:return Ni(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,d)=>o+cd(d)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return ki(i.fields,((d,f)=>{o+=d.length+cd(f)})),o})(r.mapValue);default:throw Oe(13486,{value:r})}}function cv(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Dm(r){return!!r&&"integerValue"in r}function hg(r){return!!r&&"arrayValue"in r}function uv(r){return!!r&&"nullValue"in r}function dv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ud(r){return!!r&&"mapValue"in r}function zN(r){return(r?.mapValue?.fields||{})[d_]?.stringValue===h_}function $o(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ki(r.mapValue.fields,((s,i)=>e.mapValue.fields[s]=$o(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(r.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=$o(r.arrayValue.values[s]);return e}return{...r}}function BN(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===UN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let i=0;i<e.length-1;++i)if(s=(s.mapValue.fields||{})[e.get(i)],!ud(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(s)}setAll(e){let s=an.emptyPath(),i={},o=[];e.forEach(((f,p)=>{if(!s.isImmediateParentOf(p)){const x=this.getFieldsMap(s);this.applyChanges(x,i,o),i={},o=[],s=p.popLast()}f?i[p.lastSegment()]=$o(f):o.push(p.lastSegment())}));const d=this.getFieldsMap(s);this.applyChanges(d,i,o)}delete(e){const s=this.field(e.popLast());ud(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Zs(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=s.mapValue.fields[e.get(i)];ud(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(i)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,i){ki(s,((o,d)=>e[o]=d));for(const o of i)delete e[o]}clone(){return new Nn($o(this.value))}}function f_(r){const e=[];return ki(r.fields,((s,i)=>{const o=new an([s]);if(ud(i)){const d=f_(i.mapValue).fields;if(d.length===0)e.push(o);else for(const f of d)e.push(o.child(f))}else e.push(o)})),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,s,i,o,d,f,p){this.key=e,this.documentType=s,this.version=i,this.readTime=o,this.createTime=d,this.data=f,this.documentState=p}static newInvalidDocument(e){return new dn(e,0,Le.min(),Le.min(),Le.min(),Nn.empty(),0)}static newFoundDocument(e,s,i,o){return new dn(e,1,s,Le.min(),i,o,0)}static newNoDocument(e,s){return new dn(e,2,s,Le.min(),Le.min(),Nn.empty(),0)}static newUnknownDocument(e,s){return new dn(e,3,s,Le.min(),Le.min(),Nn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,s){this.position=e,this.inclusive=s}}function hv(r,e,s){let i=0;for(let o=0;o<r.position.length;o++){const d=e[o],f=r.position[o];if(d.field.isKeyField()?i=Ie.comparator(Ie.fromName(f.referenceValue),s.key):i=Nl(f,s.data.field(d.field)),d.dir==="desc"&&(i*=-1),i!==0)break}return i}function fv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let s=0;s<r.position.length;s++)if(!Zs(r.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,s="asc"){this.field=e,this.dir=s}}function HN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{}class Ht extends m_{constructor(e,s,i){super(),this.field=e,this.op=s,this.value=i}static create(e,s,i){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,i):new FN(e,s,i):s==="array-contains"?new KN(e,i):s==="in"?new QN(e,i):s==="not-in"?new $N(e,i):s==="array-contains-any"?new XN(e,i):new Ht(e,s,i)}static createKeyFieldInFilter(e,s,i){return s==="in"?new GN(e,i):new YN(e,i)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Nl(s,this.value)):s!==null&&Ai(this.value)===Ai(s)&&this.matchesComparison(Nl(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _s extends m_{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new _s(e,s)}matches(e){return g_(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function g_(r){return r.op==="and"}function p_(r){return qN(r)&&g_(r)}function qN(r){for(const e of r.filters)if(e instanceof _s)return!1;return!0}function Mm(r){if(r instanceof Ht)return r.field.canonicalString()+r.op.toString()+Al(r.value);if(p_(r))return r.filters.map((e=>Mm(e))).join(",");{const e=r.filters.map((s=>Mm(s))).join(",");return`${r.op}(${e})`}}function y_(r,e){return r instanceof Ht?(function(i,o){return o instanceof Ht&&i.op===o.op&&i.field.isEqual(o.field)&&Zs(i.value,o.value)})(r,e):r instanceof _s?(function(i,o){return o instanceof _s&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((d,f,p)=>d&&y_(f,o.filters[p])),!0):!1})(r,e):void Oe(19439)}function x_(r){return r instanceof Ht?(function(s){return`${s.field.canonicalString()} ${s.op} ${Al(s.value)}`})(r):r instanceof _s?(function(s){return s.op.toString()+" {"+s.getFilters().map(x_).join(" ,")+"}"})(r):"Filter"}class FN extends Ht{constructor(e,s,i){super(e,s,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const s=Ie.comparator(e.key,this.key);return this.matchesComparison(s)}}class GN extends Ht{constructor(e,s){super(e,"in",s),this.keys=v_("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class YN extends Ht{constructor(e,s){super(e,"not-in",s),this.keys=v_("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function v_(r,e){return(e.arrayValue?.values||[]).map((s=>Ie.fromName(s.referenceValue)))}class KN extends Ht{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return hg(s)&&ic(s.arrayValue,this.value)}}class QN extends Ht{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&ic(this.value.arrayValue,s)}}class $N extends Ht{constructor(e,s){super(e,"not-in",s)}matches(e){if(ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!ic(this.value.arrayValue,s)}}class XN extends Ht{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!hg(s)||!s.arrayValue.values)&&s.arrayValue.values.some((i=>ic(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,s=null,i=[],o=[],d=null,f=null,p=null){this.path=e,this.collectionGroup=s,this.orderBy=i,this.filters=o,this.limit=d,this.startAt=f,this.endAt=p,this.Te=null}}function mv(r,e=null,s=[],i=[],o=null,d=null,f=null){return new WN(r,e,s,i,o,d,f)}function fg(r){const e=ze(r);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((i=>Mm(i))).join(","),s+="|ob:",s+=e.orderBy.map((i=>(function(d){return d.field.canonicalString()+d.dir})(i))).join(","),zd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((i=>Al(i))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((i=>Al(i))).join(",")),e.Te=s}return e.Te}function mg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<r.orderBy.length;s++)if(!HN(r.orderBy[s],e.orderBy[s]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let s=0;s<r.filters.length;s++)if(!y_(r.filters[s],e.filters[s]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!fv(r.startAt,e.startAt)&&fv(r.endAt,e.endAt)}function Om(r){return Ie.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,s=null,i=[],o=[],d=null,f="F",p=null,x=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=i,this.filters=o,this.limit=d,this.limitType=f,this.startAt=p,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZN(r,e,s,i,o,d,f,p){return new Vl(r,e,s,i,o,d,f,p)}function gg(r){return new Vl(r)}function gv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function b_(r){return r.collectionGroup!==null}function Xo(r){const e=ze(r);if(e.Ie===null){e.Ie=[];const s=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),s.add(d.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Yt(an.comparator);return f.filters.forEach((x=>{x.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((d=>{s.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new ac(d,i))})),s.has(an.keyField().canonicalString())||e.Ie.push(new ac(an.keyField(),i))}return e.Ie}function Qs(r){const e=ze(r);return e.Ee||(e.Ee=JN(e,Xo(r))),e.Ee}function JN(r,e){if(r.limitType==="F")return mv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const d=o.dir==="desc"?"asc":"desc";return new ac(o.field,d)}));const s=r.endAt?new Nd(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Nd(r.startAt.position,r.startAt.inclusive):null;return mv(r.path,r.collectionGroup,e,r.filters,r.limit,s,i)}}function Vm(r,e){const s=r.filters.concat([e]);return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),s,r.limit,r.limitType,r.startAt,r.endAt)}function Lm(r,e,s){return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,s,r.startAt,r.endAt)}function Hd(r,e){return mg(Qs(r),Qs(e))&&r.limitType===e.limitType}function __(r){return`${fg(Qs(r))}|lt:${r.limitType}`}function gl(r){return`Query(target=${(function(s){let i=s.path.canonicalString();return s.collectionGroup!==null&&(i+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(i+=`, filters: [${s.filters.map((o=>x_(o))).join(", ")}]`),zd(s.limit)||(i+=", limit: "+s.limit),s.orderBy.length>0&&(i+=`, orderBy: [${s.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),s.startAt&&(i+=", startAt: ",i+=s.startAt.inclusive?"b:":"a:",i+=s.startAt.position.map((o=>Al(o))).join(",")),s.endAt&&(i+=", endAt: ",i+=s.endAt.inclusive?"a:":"b:",i+=s.endAt.position.map((o=>Al(o))).join(",")),`Target(${i})`})(Qs(r))}; limitType=${r.limitType})`}function qd(r,e){return e.isFoundDocument()&&(function(i,o){const d=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(d):Ie.isDocumentKey(i.path)?i.path.isEqual(d):i.path.isImmediateParentOf(d)})(r,e)&&(function(i,o){for(const d of Xo(i))if(!d.field.isKeyField()&&o.data.field(d.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const d of i.filters)if(!d.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(f,p,x){const y=hv(f,p,x);return f.inclusive?y<=0:y<0})(i.startAt,Xo(i),o)||i.endAt&&!(function(f,p,x){const y=hv(f,p,x);return f.inclusive?y>=0:y>0})(i.endAt,Xo(i),o))})(r,e)}function eA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function w_(r){return(e,s)=>{let i=!1;for(const o of Xo(r)){const d=tA(o,e,s);if(d!==0)return d;i=i||o.field.isKeyField()}return 0}}function tA(r,e,s){const i=r.field.isKeyField()?Ie.comparator(e.key,s.key):(function(d,f,p){const x=f.data.field(d),y=p.data.field(d);return x!==null&&y!==null?Nl(x,y):Oe(42886)})(r.field,e,s);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Oe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),i=this.inner[s];if(i!==void 0){for(const[o,d]of i)if(this.equalsFn(o,e))return d}}has(e){return this.get(e)!==void 0}set(e,s){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,s]],void this.innerSize++;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return void(o[d]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[s]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ki(this.inner,((s,i)=>{for(const[o,d]of i)e(o,d)}))}isEmpty(){return i_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=new Et(Ie.comparator);function jr(){return nA}const E_=new Et(Ie.comparator);function Fo(...r){let e=E_;for(const s of r)e=e.insert(s.key,s);return e}function T_(r){let e=E_;return r.forEach(((s,i)=>e=e.insert(s,i.overlayedDocument))),e}function fa(){return Wo()}function S_(){return Wo()}function Wo(){return new Ea((r=>r.toString()),((r,e)=>r.isEqual(e)))}const sA=new Et(Ie.comparator),rA=new Yt(Ie.comparator);function Je(...r){let e=rA;for(const s of r)e=e.add(s);return e}const iA=new Yt(Ze);function aA(){return iA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ed(e)?"-0":e}}function N_(r){return{integerValue:""+r}}function lA(r,e){return MN(e)?N_(e):pg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(){this._=void 0}}function oA(r,e,s){return r instanceof Ad?(function(o,d){const f={fields:{[o_]:{stringValue:l_},[u_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&dg(d)&&(d=Bd(d)),d&&(f.fields[c_]=d),{mapValue:f}})(s,e):r instanceof lc?j_(r,e):r instanceof oc?C_(r,e):(function(o,d){const f=A_(o,d),p=pv(f)+pv(o.Ae);return Dm(f)&&Dm(o.Ae)?N_(p):pg(o.serializer,p)})(r,e)}function cA(r,e,s){return r instanceof lc?j_(r,e):r instanceof oc?C_(r,e):s}function A_(r,e){return r instanceof jd?(function(i){return Dm(i)||(function(d){return!!d&&"doubleValue"in d})(i)})(e)?e:{integerValue:0}:null}class Ad extends Fd{}class lc extends Fd{constructor(e){super(),this.elements=e}}function j_(r,e){const s=R_(e);for(const i of r.elements)s.some((o=>Zs(o,i)))||s.push(i);return{arrayValue:{values:s}}}class oc extends Fd{constructor(e){super(),this.elements=e}}function C_(r,e){let s=R_(e);for(const i of r.elements)s=s.filter((o=>!Zs(o,i)));return{arrayValue:{values:s}}}class jd extends Fd{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function pv(r){return Rt(r.integerValue||r.doubleValue)}function R_(r){return hg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function uA(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof lc&&o instanceof lc||i instanceof oc&&o instanceof oc?Sl(i.elements,o.elements,Zs):i instanceof jd&&o instanceof jd?Zs(i.Ae,o.Ae):i instanceof Ad&&o instanceof Ad})(r.transform,e.transform)}class dA{constructor(e,s){this.version=e,this.transformResults=s}}class pn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Gd{}function I_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Yd(r.key,pn.none()):new pc(r.key,r.data,pn.none());{const s=r.data,i=Nn.empty();let o=new Yt(an.comparator);for(let d of e.fields)if(!o.has(d)){let f=s.field(d);f===null&&d.length>1&&(d=d.popLast(),f=s.field(d)),f===null?i.delete(d):i.set(d,f),o=o.add(d)}return new Di(r.key,i,new Pn(o.toArray()),pn.none())}}function hA(r,e,s){r instanceof pc?(function(o,d,f){const p=o.value.clone(),x=xv(o.fieldTransforms,d,f.transformResults);p.setAll(x),d.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,s):r instanceof Di?(function(o,d,f){if(!dd(o.precondition,d))return void d.convertToUnknownDocument(f.version);const p=xv(o.fieldTransforms,d,f.transformResults),x=d.data;x.setAll(k_(o)),x.setAll(p),d.convertToFoundDocument(f.version,x).setHasCommittedMutations()})(r,e,s):(function(o,d,f){d.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,s)}function Zo(r,e,s,i){return r instanceof pc?(function(d,f,p,x){if(!dd(d.precondition,f))return p;const y=d.value.clone(),_=vv(d.fieldTransforms,x,f);return y.setAll(_),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,s,i):r instanceof Di?(function(d,f,p,x){if(!dd(d.precondition,f))return p;const y=vv(d.fieldTransforms,x,f),_=f.data;return _.setAll(k_(d)),_.setAll(y),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),p===null?null:p.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((T=>T.field)))})(r,e,s,i):(function(d,f,p){return dd(d.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(r,e,s)}function fA(r,e){let s=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),d=A_(i.transform,o||null);d!=null&&(s===null&&(s=Nn.empty()),s.set(i.field,d))}return s||null}function yv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Sl(i,o,((d,f)=>uA(d,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class pc extends Gd{constructor(e,s,i,o=[]){super(),this.key=e,this.value=s,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Di extends Gd{constructor(e,s,i,o,d=[]){super(),this.key=e,this.data=s,this.fieldMask=i,this.precondition=o,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function k_(r){const e=new Map;return r.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const i=r.data.field(s);e.set(s,i)}})),e}function xv(r,e,s){const i=new Map;at(r.length===s.length,32656,{Re:s.length,Ve:r.length});for(let o=0;o<s.length;o++){const d=r[o],f=d.transform,p=e.data.field(d.field);i.set(d.field,cA(f,p,s[o]))}return i}function vv(r,e,s){const i=new Map;for(const o of r){const d=o.transform,f=s.data.field(o.field);i.set(o.field,oA(d,f,e))}return i}class Yd extends Gd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mA extends Gd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,s,i,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,s){const i=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const d=this.mutations[o];d.key.isEqual(e.key)&&hA(d,e,i[o])}}applyToLocalView(e,s){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(s=Zo(i,e,s,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(s=Zo(i,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const i=S_();return this.mutations.forEach((o=>{const d=e.get(o.key),f=d.overlayedDocument;let p=this.applyToLocalView(f,d.mutatedFields);p=s.has(o.key)?null:p;const x=I_(f,p);x!==null&&i.set(o.key,x),f.isValidDocument()||f.convertToNoDocument(Le.min())})),i}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),Je())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,((s,i)=>yv(s,i)))&&Sl(this.baseMutations,e.baseMutations,((s,i)=>yv(s,i)))}}class yg{constructor(e,s,i,o){this.batch=e,this.commitVersion=s,this.mutationResults=i,this.docVersions=o}static from(e,s,i){at(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return sA})();const d=e.mutations;for(let f=0;f<d.length;f++)o=o.insert(d[f].key,i[f].version);return new yg(e,s,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,tt;function xA(r){switch(r){case ne.OK:return Oe(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Oe(15467,{code:r})}}function D_(r){if(r===void 0)return Ar("GRPC error has no .code"),ne.UNKNOWN;switch(r){case Bt.OK:return ne.OK;case Bt.CANCELLED:return ne.CANCELLED;case Bt.UNKNOWN:return ne.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return ne.INTERNAL;case Bt.UNAVAILABLE:return ne.UNAVAILABLE;case Bt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Bt.NOT_FOUND:return ne.NOT_FOUND;case Bt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Bt.ABORTED:return ne.ABORTED;case Bt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Bt.DATA_LOSS:return ne.DATA_LOSS;default:return Oe(39323,{code:r})}}(tt=Bt||(Bt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=new _i([4294967295,4294967295],0);function bv(r){const e=vA().encode(r),s=new Qb;return s.update(e),new Uint8Array(s.digest())}function _v(r){const e=new DataView(r.buffer),s=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new _i([s,i],0),new _i([o,d],0)]}class xg{constructor(e,s,i){if(this.bitmap=e,this.padding=s,this.hashCount=i,s<0||s>=8)throw new Go(`Invalid padding: ${s}`);if(i<0)throw new Go(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Go(`Invalid hash count: ${i}`);if(e.length===0&&s!==0)throw new Go(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=_i.fromNumber(this.ge)}ye(e,s,i){let o=e.add(s.multiply(_i.fromNumber(i)));return o.compare(bA)===1&&(o=new _i([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=bv(e),[i,o]=_v(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(i,o,d);if(!this.we(f))return!1}return!0}static create(e,s,i){const o=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),f=new xg(d,o,s);return i.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const s=bv(e),[i,o]=_v(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(i,o,d);this.Se(f)}}Se(e){const s=Math.floor(e/8),i=e%8;this.bitmap[s]|=1<<i}}class Go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,s,i,o,d){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,s,i){const o=new Map;return o.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,s,i)),new Kd(Le.min(),o,new Et(Ze),jr(),Je())}}class yc{constructor(e,s,i,o,d){this.resumeToken=e,this.current=s,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,s,i){return new yc(i,s,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,s,i,o){this.be=e,this.removedTargetIds=s,this.key=i,this.De=o}}class M_{constructor(e,s){this.targetId=e,this.Ce=s}}class O_{constructor(e,s,i=ln.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=i,this.cause=o}}class wv{constructor(){this.ve=0,this.Fe=Ev(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),s=Je(),i=Je();return this.Fe.forEach(((o,d)=>{switch(d){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:i=i.add(o);break;default:Oe(38017,{changeType:d})}})),new yc(this.Me,this.xe,e,s,i)}qe(){this.Oe=!1,this.Fe=Ev()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _A{constructor(e){this.Ge=e,this.ze=new Map,this.je=jr(),this.Je=td(),this.He=td(),this.Ye=new Et(Ze)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const i=this.nt(s);switch(e.state){case 0:this.rt(s)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),i.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((i,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,i=e.Ce.count,o=this.ot(s);if(o){const d=o.target;if(Om(d))if(i===0){const f=new Ie(d.path);this.et(s,f,dn.newNoDocument(f,Le.min()))}else at(i===1,20013,{expectedCount:i});else{const f=this._t(s);if(f!==i){const p=this.ut(e),x=p?this.ct(p,e,f):1;if(x!==0){this.it(s);const y=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,y)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:d=0}=s;let f,p;try{f=Ni(i).toUint8Array()}catch(x){if(x instanceof a_)return Tl("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{p=new xg(f,o,d)}catch(x){return Tl(x instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return p.ge===0?null:p}ct(e,s,i){return s.Ce.count===i-this.Pt(e,s.targetId)?0:2}Pt(e,s){const i=this.Ge.getRemoteKeysForTarget(s);let o=0;return i.forEach((d=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${d.path.canonicalString()}`;e.mightContain(p)||(this.et(s,d,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((d,f)=>{const p=this.ot(f);if(p){if(d.current&&Om(p.target)){const x=new Ie(p.target.path);this.It(x).has(f)||this.Et(f,x)||this.et(f,x,dn.newNoDocument(x,e))}d.Be&&(s.set(f,d.ke()),d.qe())}}));let i=Je();this.He.forEach(((d,f)=>{let p=!0;f.forEachWhile((x=>{const y=this.ot(x);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(d))})),this.je.forEach(((d,f)=>f.setReadTime(e)));const o=new Kd(e,s,this.Ye,this.je,i);return this.je=jr(),this.Je=td(),this.He=td(),this.Ye=new Et(Ze),o}Xe(e,s){if(!this.rt(e))return;const i=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,i),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),i&&(this.je=this.je.insert(s,i))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new wv,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new Yt(Ze),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new Yt(Ze),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||Ee("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wv),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function td(){return new Et(Ie.comparator)}function Ev(){return new Et(Ie.comparator)}const wA={asc:"ASCENDING",desc:"DESCENDING"},EA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TA={and:"AND",or:"OR"};class SA{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Pm(r,e){return r.useProto3Json||zd(e)?e:{value:e}}function Cd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function NA(r,e){return Cd(r,e.toTimestamp())}function $s(r){return at(!!r,49232),Le.fromTimestamp((function(s){const i=Si(s);return new vt(i.seconds,i.nanos)})(r))}function vg(r,e){return Um(r,e).canonicalString()}function Um(r,e){const s=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?s:s.child(e)}function L_(r){const e=pt.fromString(r);return at(H_(e),10190,{key:e.toString()}),e}function zm(r,e){return vg(r.databaseId,e.path)}function fm(r,e){const s=L_(e);if(s.get(1)!==r.databaseId.projectId)throw new ve(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+r.databaseId.projectId);if(s.get(3)!==r.databaseId.database)throw new ve(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+r.databaseId.database);return new Ie(U_(s))}function P_(r,e){return vg(r.databaseId,e)}function AA(r){const e=L_(r);return e.length===4?pt.emptyPath():U_(e)}function Bm(r){return new pt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function U_(r){return at(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Tv(r,e,s){return{name:zm(r,e),fields:s.value.mapValue.fields}}function jA(r,e){let s;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Oe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],d=(function(y,_){return y.useProto3Json?(at(_===void 0||typeof _=="string",58123),ln.fromBase64String(_||"")):(at(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),ln.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const _=y.code===void 0?ne.UNKNOWN:D_(y.code);return new ve(_,y.message||"")})(f);s=new O_(i,o,d,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=fm(r,i.document.name),d=$s(i.document.updateTime),f=i.document.createTime?$s(i.document.createTime):Le.min(),p=new Nn({mapValue:{fields:i.document.fields}}),x=dn.newFoundDocument(o,d,f,p),y=i.targetIds||[],_=i.removedTargetIds||[];s=new hd(y,_,x.key,x)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=fm(r,i.document),d=i.readTime?$s(i.readTime):Le.min(),f=dn.newNoDocument(o,d),p=i.removedTargetIds||[];s=new hd([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=fm(r,i.document),d=i.removedTargetIds||[];s=new hd([],d,o,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:d}=i,f=new yA(o,d),p=i.targetId;s=new M_(p,f)}}return s}function CA(r,e){let s;if(e instanceof pc)s={update:Tv(r,e.key,e.value)};else if(e instanceof Yd)s={delete:zm(r,e.key)};else if(e instanceof Di)s={update:Tv(r,e.key,e.data),updateMask:PA(e.fieldMask)};else{if(!(e instanceof mA))return Oe(16599,{Vt:e.type});s={verify:zm(r,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((i=>(function(d,f){const p=f.transform;if(p instanceof Ad)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof lc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof oc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof jd)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Oe(20930,{transform:f.transform})})(0,i)))),e.precondition.isNone||(s.currentDocument=(function(o,d){return d.updateTime!==void 0?{updateTime:NA(o,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:Oe(27497)})(r,e.precondition)),s}function RA(r,e){return r&&r.length>0?(at(e!==void 0,14353),r.map((s=>(function(o,d){let f=o.updateTime?$s(o.updateTime):$s(d);return f.isEqual(Le.min())&&(f=$s(d)),new dA(f,o.transformResults||[])})(s,e)))):[]}function IA(r,e){return{documents:[P_(r,e.path)]}}function kA(r,e){const s={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),s.structuredQuery.from=[{collectionId:i.lastSegment()}]),s.parent=P_(r,o);const d=(function(y){if(y.length!==0)return B_(_s.create(y,"and"))})(e.filters);d&&(s.structuredQuery.where=d);const f=(function(y){if(y.length!==0)return y.map((_=>(function(N){return{field:pl(N.field),direction:OA(N.dir)}})(_)))})(e.orderBy);f&&(s.structuredQuery.orderBy=f);const p=Pm(r,e.limit);return p!==null&&(s.structuredQuery.limit=p),e.startAt&&(s.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:s,parent:o}}function DA(r){let e=AA(r.parent);const s=r.structuredQuery,i=s.from?s.from.length:0;let o=null;if(i>0){at(i===1,65062);const _=s.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let d=[];s.where&&(d=(function(T){const N=z_(T);return N instanceof _s&&p_(N)?N.getFilters():[N]})(s.where));let f=[];s.orderBy&&(f=(function(T){return T.map((N=>(function(X){return new ac(yl(X.field),(function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(N)))})(s.orderBy));let p=null;s.limit&&(p=(function(T){let N;return N=typeof T=="object"?T.value:T,zd(N)?null:N})(s.limit));let x=null;s.startAt&&(x=(function(T){const N=!!T.before,U=T.values||[];return new Nd(U,N)})(s.startAt));let y=null;return s.endAt&&(y=(function(T){const N=!T.before,U=T.values||[];return new Nd(U,N)})(s.endAt)),ZN(e,o,f,d,p,"F",x,y)}function MA(r,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function z_(r){return r.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const i=yl(s.unaryFilter.field);return Ht.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=yl(s.unaryFilter.field);return Ht.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=yl(s.unaryFilter.field);return Ht.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=yl(s.unaryFilter.field);return Ht.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(r):r.fieldFilter!==void 0?(function(s){return Ht.create(yl(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(s){return _s.create(s.compositeFilter.filters.map((i=>z_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(s.compositeFilter.op))})(r):Oe(30097,{filter:r})}function OA(r){return wA[r]}function VA(r){return EA[r]}function LA(r){return TA[r]}function pl(r){return{fieldPath:r.canonicalString()}}function yl(r){return an.fromServerFormat(r.fieldPath)}function B_(r){return r instanceof Ht?(function(s){if(s.op==="=="){if(dv(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NAN"}};if(uv(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(dv(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NOT_NAN"}};if(uv(s.value))return{unaryFilter:{field:pl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(s.field),op:VA(s.op),value:s.value}}})(r):r instanceof _s?(function(s){const i=s.getFilters().map((o=>B_(o)));return i.length===1?i[0]:{compositeFilter:{op:LA(s.op),filters:i}}})(r):Oe(54877,{filter:r})}function PA(r){const e=[];return r.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function H_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,s,i,o,d=Le.min(),f=Le.min(),p=ln.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=s,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=x}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.yt=e}}function zA(r){const e=DA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Lm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.Cn=new HA}addToCollectionParentIndex(e,s){return this.Cn.add(s),le.resolve()}getCollectionParents(e,s){return le.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return le.resolve()}deleteFieldIndex(e,s){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,s){return le.resolve()}getDocumentsMatchingTarget(e,s){return le.resolve(null)}getIndexType(e,s){return le.resolve(0)}getFieldIndexes(e,s){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,s){return le.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,s){return le.resolve(Ti.min())}updateCollectionGroup(e,s,i){return le.resolve()}updateIndexEntries(e,s){return le.resolve()}}class HA{constructor(){this.index={}}add(e){const s=e.lastSegment(),i=e.popLast(),o=this.index[s]||new Yt(pt.comparator),d=!o.has(i);return this.index[s]=o.add(i),d}has(e){const s=e.lastSegment(),i=e.popLast(),o=this.index[s];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Yt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q_=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(q_,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jl(0)}static cr(){return new jl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="LruGarbageCollector",qA=1048576;function Av([r,e],[s,i]){const o=Ze(r,s);return o===0?Ze(e,i):o}class FA{constructor(e){this.Ir=e,this.buffer=new Yt(Av),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const i=this.buffer.last();Av(s,i)<0&&(this.buffer=this.buffer.delete(i).add(s))}}get maxValue(){return this.buffer.last()[0]}}class GA{constructor(e,s,i){this.garbageCollector=e,this.asyncQueue=s,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ee(Nv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Ol(s)?Ee(Nv,"Ignoring IndexedDB error during garbage collection: ",s):await Ml(s)}await this.Vr(3e5)}))}}class YA{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((i=>Math.floor(s/100*i)))}nthSequenceNumber(e,s){if(s===0)return le.resolve(Ud.ce);const i=new FA(s);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,s,i){return this.mr.removeTargets(e,s,i)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(Sv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sv):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let i,o,d,f,p,x,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,f=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,p=Date.now(),this.removeTargets(e,i,s)))).next((T=>(d=T,x=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(y=Date.now(),ml()<=We.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${d} targets in `+(x-p)+`ms
	Removed ${T} documents in `+(y-x)+`ms
Total Duration: ${y-_}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:d,documentsRemoved:T}))))}}function KA(r,e){return new YA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.changes=new Ea((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const i=this.changes.get(s);return i!==void 0?le.resolve(i):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,s,i,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,s){let i=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(i!==null&&Zo(i.mutation,o,Pn.empty(),vt.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((i=>this.getLocalViewOfDocuments(e,i,Je()).next((()=>i))))}getLocalViewOfDocuments(e,s,i=Je()){const o=fa();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,i).next((d=>{let f=Fo();return d.forEach(((p,x)=>{f=f.insert(p,x.overlayedDocument)})),f}))))}getOverlayedDocuments(e,s){const i=fa();return this.populateOverlays(e,i,s).next((()=>this.computeViews(e,s,i,Je())))}populateOverlays(e,s,i){const o=[];return i.forEach((d=>{s.has(d)||o.push(d)})),this.documentOverlayCache.getOverlays(e,o).next((d=>{d.forEach(((f,p)=>{s.set(f,p)}))}))}computeViews(e,s,i,o){let d=jr();const f=Wo(),p=(function(){return Wo()})();return s.forEach(((x,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Di)?d=d.insert(y.key,y):_!==void 0?(f.set(y.key,_.mutation.getFieldMask()),Zo(_.mutation,y,_.mutation.getFieldMask(),vt.now())):f.set(y.key,Pn.empty())})),this.recalculateAndSaveOverlays(e,d).next((x=>(x.forEach(((y,_)=>f.set(y,_))),s.forEach(((y,_)=>p.set(y,new $A(_,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,s){const i=Wo();let o=new Et(((f,p)=>f-p)),d=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((f=>{for(const p of f)p.keys().forEach((x=>{const y=s.get(x);if(y===null)return;let _=i.get(x)||Pn.empty();_=p.applyToLocalView(y,_),i.set(x,_);const T=(o.get(p.batchId)||Je()).add(x);o=o.insert(p.batchId,T)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const x=p.getNext(),y=x.key,_=x.value,T=S_();_.forEach((N=>{if(!d.has(N)){const U=I_(s.get(N),i.get(N));U!==null&&T.set(N,U),d=d.add(N)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,T))}return le.waitFor(f)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,s,i,o){return(function(f){return Ie.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):b_(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,i,o):this.getDocumentsMatchingCollectionQuery(e,s,i,o)}getNextDocuments(e,s,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,i,o).next((d=>{const f=o-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,i.largestBatchId,o-d.size):le.resolve(fa());let p=nc,x=d;return f.next((y=>le.forEach(y,((_,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),d.get(_)?le.resolve():this.remoteDocumentCache.getEntry(e,_).next((N=>{x=x.insert(_,N)}))))).next((()=>this.populateOverlays(e,y,d))).next((()=>this.computeViews(e,x,y,Je()))).next((_=>({batchId:p,changes:T_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Ie(s)).next((i=>{let o=Fo();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,i,o){const d=s.collectionGroup;let f=Fo();return this.indexManager.getCollectionParents(e,d).next((p=>le.forEach(p,(x=>{const y=(function(T,N){return new Vl(N,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(s,x.child(d));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((_=>{_.forEach(((T,N)=>{f=f.insert(T,N)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,s,i,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,i.largestBatchId).next((f=>(d=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,i,d,o)))).next((f=>{d.forEach(((x,y)=>{const _=y.getKey();f.get(_)===null&&(f=f.insert(_,dn.newInvalidDocument(_)))}));let p=Fo();return f.forEach(((x,y)=>{const _=d.get(x);_!==void 0&&Zo(_.mutation,y,Pn.empty(),vt.now()),qd(s,y)&&(p=p.insert(x,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return le.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:$s(o.createTime)}})(s)),le.resolve()}getNamedQuery(e,s){return le.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:zA(o.bundledQuery),readTime:$s(o.readTime)}})(s)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.overlays=new Et(Ie.comparator),this.qr=new Map}getOverlay(e,s){return le.resolve(this.overlays.get(s))}getOverlays(e,s){const i=fa();return le.forEach(s,(o=>this.getOverlay(e,o).next((d=>{d!==null&&i.set(o,d)})))).next((()=>i))}saveOverlays(e,s,i){return i.forEach(((o,d)=>{this.St(e,s,d)})),le.resolve()}removeOverlaysForBatchId(e,s,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(i)),le.resolve()}getOverlaysForCollection(e,s,i){const o=fa(),d=s.length+1,f=new Ie(s.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const x=p.getNext().value,y=x.getKey();if(!s.isPrefixOf(y.path))break;y.path.length===d&&x.largestBatchId>i&&o.set(x.getKey(),x)}return le.resolve(o)}getOverlaysForCollectionGroup(e,s,i,o){let d=new Et(((y,_)=>y-_));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===s&&y.largestBatchId>i){let _=d.get(y.largestBatchId);_===null&&(_=fa(),d=d.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const p=fa(),x=d.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((y,_)=>p.set(y,_))),!(p.size()>=o)););return le.resolve(p)}St(e,s,i){const o=this.overlays.get(i.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new pA(s,i));let d=this.qr.get(s);d===void 0&&(d=Je(),this.qr.set(s,d)),this.qr.set(s,d.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(){this.Qr=new Yt(Wt.$r),this.Ur=new Yt(Wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const i=new Wt(e,s);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,s){e.forEach((i=>this.addReference(i,s)))}removeReference(e,s){this.Gr(new Wt(e,s))}zr(e,s){e.forEach((i=>this.removeReference(i,s)))}jr(e){const s=new Ie(new pt([])),i=new Wt(s,e),o=new Wt(s,e+1),d=[];return this.Ur.forEachInRange([i,o],(f=>{this.Gr(f),d.push(f.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new Ie(new pt([])),i=new Wt(s,e),o=new Wt(s,e+1);let d=Je();return this.Ur.forEachInRange([i,o],(f=>{d=d.add(f.key)})),d}containsKey(e){const s=new Wt(e,0),i=this.Qr.firstAfterOrEqual(s);return i!==null&&e.isEqual(i.key)}}class Wt{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return Ie.comparator(e.key,s.key)||Ze(e.Yr,s.Yr)}static Kr(e,s){return Ze(e.Yr,s.Yr)||Ie.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new Yt(Wt.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,i,o){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new gA(d,s,i,o);this.mutationQueue.push(f);for(const p of o)this.Zr=this.Zr.add(new Wt(p.key,d)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return le.resolve(f)}lookupMutationBatch(e,s){return le.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const i=s+1,o=this.ei(i),d=o<0?0:o;return le.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?ug:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const i=new Wt(s,0),o=new Wt(s,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([i,o],(f=>{const p=this.Xr(f.Yr);d.push(p)})),le.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,s){let i=new Yt(Ze);return s.forEach((o=>{const d=new Wt(o,0),f=new Wt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,f],(p=>{i=i.add(p.Yr)}))})),le.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,s){const i=s.path,o=i.length+1;let d=i;Ie.isDocumentKey(d)||(d=d.child(""));const f=new Wt(new Ie(d),0);let p=new Yt(Ze);return this.Zr.forEachWhile((x=>{const y=x.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(x.Yr)),!0)}),f),le.resolve(this.ti(p))}ti(e){const s=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){at(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return le.forEach(s.mutations,(o=>{const d=new Wt(o.key,s.batchId);return i=i.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,s){const i=new Wt(s,0),o=this.Zr.firstAfterOrEqual(i);return le.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.ri=e,this.docs=(function(){return new Et(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const i=s.key,o=this.docs.get(i),d=o?o.size:0,f=this.ri(s);return this.docs=this.docs.insert(i,{document:s.mutableCopy(),size:f}),this.size+=f-d,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const i=this.docs.get(s);return le.resolve(i?i.document.mutableCopy():dn.newInvalidDocument(s))}getEntries(e,s){let i=jr();return s.forEach((o=>{const d=this.docs.get(o);i=i.insert(o,d?d.document.mutableCopy():dn.newInvalidDocument(o))})),le.resolve(i)}getDocumentsMatchingQuery(e,s,i,o){let d=jr();const f=s.path,p=new Ie(f.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(p);for(;x.hasNext();){const{key:y,value:{document:_}}=x.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||RN(CN(_),i)<=0||(o.has(_.key)||qd(s,_))&&(d=d.insert(_.key,_.mutableCopy()))}return le.resolve(d)}getAllFromCollectionGroup(e,s,i,o){Oe(9500)}ii(e,s){return le.forEach(this.docs,(i=>s(i)))}newChangeBuffer(e){return new n4(this)}getSize(e){return le.resolve(this.size)}}class n4 extends QA{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),le.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.persistence=e,this.si=new Ea((s=>fg(s)),mg),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new bg,this.targetCount=0,this.ai=jl.ur()}forEachTarget(e,s){return this.si.forEach(((i,o)=>s(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,s,i){return i&&(this.lastRemoteSnapshotVersion=i),s>this.oi&&(this.oi=s),le.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new jl(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,le.resolve()}updateTargetData(e,s){return this.Pr(s),le.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,s,i){let o=0;const d=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=s&&i.get(p.targetId)===null&&(this.si.delete(f),d.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),le.waitFor(d).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,s){const i=this.si.get(s)||null;return le.resolve(i)}addMatchingKeys(e,s,i){return this._i.Wr(s,i),le.resolve()}removeMatchingKeys(e,s,i){this._i.zr(s,i);const o=this.persistence.referenceDelegate,d=[];return o&&s.forEach((f=>{d.push(o.markPotentiallyOrphaned(e,f))})),le.waitFor(d)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),le.resolve()}getMatchingKeysForTargetId(e,s){const i=this._i.Hr(s);return le.resolve(i)}containsKey(e,s){return le.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,s){this.ui={},this.overlays={},this.ci=new Ud(0),this.li=!1,this.li=!0,this.hi=new JA,this.referenceDelegate=e(this),this.Pi=new s4(this),this.indexManager=new BA,this.remoteDocumentCache=(function(o){return new t4(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new UA(s),this.Ii=new WA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new ZA,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let i=this.ui[e.toKey()];return i||(i=new e4(s,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,i){Ee("MemoryPersistence","Starting transaction:",e);const o=new r4(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((d=>this.referenceDelegate.di(o).next((()=>d)))).toPromise().then((d=>(o.raiseOnCommittedEvent(),d)))}Ai(e,s){return le.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,s))))}}class r4 extends kN{constructor(e){super(),this.currentSequenceNumber=e}}class _g{constructor(e){this.persistence=e,this.Ri=new bg,this.Vi=null}static mi(e){return new _g(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,s,i){return this.Ri.addReference(i,s),this.fi.delete(i.toString()),le.resolve()}removeReference(e,s,i){return this.Ri.removeReference(i,s),this.fi.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),le.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((d=>this.fi.add(d.toString())))})).next((()=>i.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(i=>{const o=Ie.fromPath(i);return this.gi(e,o).next((d=>{d||s.removeEntry(o,Le.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((i=>{i?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return le.or([()=>le.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class Rd{constructor(e,s){this.persistence=e,this.pi=new Ea((i=>ON(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=KA(this,s)}static mi(e,s){return new Rd(e,s)}Ei(){}di(e){return le.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>s.next((o=>i+o))))}wr(e){let s=0;return this.pr(e,(i=>{s++})).next((()=>s))}pr(e,s){return le.forEach(this.pi,((i,o)=>this.br(e,i,o).next((d=>d?le.resolve():s(o)))))}removeTargets(e,s,i){return this.persistence.getTargetCache().removeTargets(e,s,i)}removeOrphanedDocuments(e,s){let i=0;const o=this.persistence.getRemoteDocumentCache(),d=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,s).next((p=>{p||(i++,d.removeEntry(f,Le.min()))})))).next((()=>d.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}removeTarget(e,s){const i=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,s,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,s,i){return this.pi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=cd(e.data.value)),s}br(e,s,i){return le.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return le.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,s,i,o){this.targetId=e,this.fromCache=s,this.Es=i,this.ds=o}static As(e,s){let i=Je(),o=Je();for(const d of s.docChanges)switch(d.type){case 0:i=i.add(d.doc.key);break;case 1:o=o.add(d.doc.key)}return new wg(e,s.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Dw()?8:DN(hn())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,i,o){const d={result:null};return this.ys(e,s).next((f=>{d.result=f})).next((()=>{if(!d.result)return this.ws(e,s,o,i).next((f=>{d.result=f}))})).next((()=>{if(d.result)return;const f=new i4;return this.Ss(e,s,f).next((p=>{if(d.result=p,this.Vs)return this.bs(e,s,f,p.size)}))})).next((()=>d.result))}bs(e,s,i,o){return i.documentReadCount<this.fs?(ml()<=We.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",gl(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(ml()<=We.DEBUG&&Ee("QueryEngine","Query:",gl(s),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(ml()<=We.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",gl(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qs(s))):le.resolve())}ys(e,s){if(gv(s))return le.resolve(null);let i=Qs(s);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=Lm(s,null,"F"),i=Qs(s)),this.indexManager.getDocumentsMatchingTarget(e,i).next((d=>{const f=Je(...d);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,i).next((x=>{const y=this.Ds(s,p);return this.Cs(s,y,f,x.readTime)?this.ys(e,Lm(s,null,"F")):this.vs(e,y,s,x)}))))})))))}ws(e,s,i,o){return gv(s)||o.isEqual(Le.min())?le.resolve(null):this.ps.getDocuments(e,i).next((d=>{const f=this.Ds(s,d);return this.Cs(s,f,i,o)?le.resolve(null):(ml()<=We.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),gl(s)),this.vs(e,f,s,jN(o,nc)).next((p=>p)))}))}Ds(e,s){let i=new Yt(w_(e));return s.forEach(((o,d)=>{qd(e,d)&&(i=i.add(d))})),i}Cs(e,s,i,o){if(e.limit===null)return!1;if(i.size!==s.size)return!0;const d=e.limitType==="F"?s.last():s.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(o)>0)}Ss(e,s,i){return ml()<=We.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",gl(s)),this.ps.getDocumentsMatchingQuery(e,s,Ti.min(),i)}vs(e,s,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((d=>(s.forEach((f=>{d=d.insert(f.key,f)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="LocalStore",l4=3e8;class o4{constructor(e,s,i,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new Et(Ze),this.xs=new Ea((d=>fg(d)),mg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function c4(r,e,s,i){return new o4(r,e,s,i)}async function G_(r,e){const s=ze(r);return await s.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return s.mutationQueue.getAllMutationBatches(i).next((d=>(o=d,s.Bs(e),s.mutationQueue.getAllMutationBatches(i)))).next((d=>{const f=[],p=[];let x=Je();for(const y of o){f.push(y.batchId);for(const _ of y.mutations)x=x.add(_.key)}for(const y of d){p.push(y.batchId);for(const _ of y.mutations)x=x.add(_.key)}return s.localDocuments.getDocuments(i,x).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function u4(r,e){const s=ze(r);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),d=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,x,y,_){const T=y.batch,N=T.keys();let U=le.resolve();return N.forEach((X=>{U=U.next((()=>_.getEntry(x,X))).next((Y=>{const G=y.docVersions.get(X);at(G!==null,48541),Y.version.compareTo(G)<0&&(T.applyToRemoteDocument(Y,y),Y.isValidDocument()&&(Y.setReadTime(y.commitVersion),_.addEntry(Y)))}))})),U.next((()=>p.mutationQueue.removeMutationBatch(x,T)))})(s,i,e,d).next((()=>d.apply(i))).next((()=>s.mutationQueue.performConsistencyCheck(i))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let x=Je();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(x=x.add(p.batch.mutations[y].key));return x})(e)))).next((()=>s.localDocuments.getDocuments(i,o)))}))}function Y_(r){const e=ze(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function d4(r,e){const s=ze(r),i=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const f=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const p=[];e.targetChanges.forEach(((_,T)=>{const N=o.get(T);if(!N)return;p.push(s.Pi.removeMatchingKeys(d,_.removedDocuments,T).next((()=>s.Pi.addMatchingKeys(d,_.addedDocuments,T))));let U=N.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(T)!==null?U=U.withResumeToken(ln.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):_.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(_.resumeToken,i)),o=o.insert(T,U),(function(Y,G,he){return Y.resumeToken.approximateByteSize()===0||G.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=l4?!0:he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0})(N,U,_)&&p.push(s.Pi.updateTargetData(d,U))}));let x=jr(),y=Je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(d,_))})),p.push(h4(d,f,e.documentUpdates).next((_=>{x=_.ks,y=_.qs}))),!i.isEqual(Le.min())){const _=s.Pi.getLastRemoteSnapshotVersion(d).next((T=>s.Pi.setTargetsMetadata(d,d.currentSequenceNumber,i)));p.push(_)}return le.waitFor(p).next((()=>f.apply(d))).next((()=>s.localDocuments.getLocalViewOfDocuments(d,x,y))).next((()=>x))})).then((d=>(s.Ms=o,d)))}function h4(r,e,s){let i=Je(),o=Je();return s.forEach((d=>i=i.add(d))),e.getEntries(r,i).next((d=>{let f=jr();return s.forEach(((p,x)=>{const y=d.get(p);x.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),x.isNoDocument()&&x.version.isEqual(Le.min())?(e.removeEntry(p,x.readTime),f=f.insert(p,x)):!y.isValidDocument()||x.version.compareTo(y.version)>0||x.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(x),f=f.insert(p,x)):Ee(Eg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",x.version)})),{ks:f,qs:o}}))}function f4(r,e){const s=ze(r);return s.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ug),s.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function m4(r,e){const s=ze(r);return s.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return s.Pi.getTargetData(i,e).next((d=>d?(o=d,le.resolve(o)):s.Pi.allocateTargetId(i).next((f=>(o=new yi(e,f,"TargetPurposeListen",i.currentSequenceNumber),s.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=s.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(i.targetId,i),s.xs.set(e,i.targetId)),i}))}async function Hm(r,e,s){const i=ze(r),o=i.Ms.get(e),d=s?"readwrite":"readwrite-primary";try{s||await i.persistence.runTransaction("Release target",d,(f=>i.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Ol(f))throw f;Ee(Eg,`Failed to update sequence numbers for target ${e}: ${f}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function jv(r,e,s){const i=ze(r);let o=Le.min(),d=Je();return i.persistence.runTransaction("Execute query","readwrite",(f=>(function(x,y,_){const T=ze(x),N=T.xs.get(_);return N!==void 0?le.resolve(T.Ms.get(N)):T.Pi.getTargetData(y,_)})(i,f,Qs(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(f,p.targetId).next((x=>{d=x}))})).next((()=>i.Fs.getDocumentsMatchingQuery(f,e,s?o:Le.min(),s?d:Je()))).next((p=>(g4(i,eA(e),p),{documents:p,Qs:d})))))}function g4(r,e,s){let i=r.Os.get(e)||Le.min();s.forEach(((o,d)=>{d.readTime.compareTo(i)>0&&(i=d.readTime)})),r.Os.set(e,i)}class Cv{constructor(){this.activeTargetIds=aA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class p4{constructor(){this.Mo=new Cv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,i){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,i){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Cv,Promise.resolve()}handleUserChange(e,s,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="ConnectivityMonitor";class Iv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ee(Rv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ee(Rv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=null;function qm(){return nd===null?nd=(function(){return 268435456+Math.round(2147483648*Math.random())})():nd++,"0x"+nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="RestConnection",x4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class v4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Td?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,s,i,o,d){const f=qm(),p=this.zo(e,s.toUriEncodedString());Ee(mm,`Sending RPC '${e}' ${f}:`,p,i);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,o,d);const{host:y}=new URL(p),_=Rl(y);return this.Jo(e,p,x,i,_).then((T=>(Ee(mm,`Received RPC '${e}' ${f}: `,T),T)),(T=>{throw Tl(mm,`RPC '${e}' ${f} failed with error: `,T,"url: ",p,"request:",i),T}))}Ho(e,s,i,o,d,f){return this.Go(e,s,i,o,d)}jo(e,s,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,d)=>e[d]=o)),i&&i.headers.forEach(((o,d)=>e[d]=o))}zo(e,s){const i=x4[e];return`${this.Uo}/v1/${s}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class _4 extends v4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,i,o,d){const f=qm();return new Promise(((p,x)=>{const y=new $b;y.setWithCredentials(!0),y.listenOnce(Xb.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case od.NO_ERROR:const T=y.getResponseJson();Ee(cn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(T)),p(T);break;case od.TIMEOUT:Ee(cn,`RPC '${e}' ${f} timed out`),x(new ve(ne.DEADLINE_EXCEEDED,"Request time out"));break;case od.HTTP_ERROR:const N=y.getStatus();if(Ee(cn,`RPC '${e}' ${f} failed with status:`,N,"response text:",y.getResponseText()),N>0){let U=y.getResponseJson();Array.isArray(U)&&(U=U[0]);const X=U?.error;if(X&&X.status&&X.message){const Y=(function(he){const oe=he.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(oe)>=0?oe:ne.UNKNOWN})(X.status);x(new ve(Y,X.message))}else x(new ve(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else x(new ve(ne.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Ee(cn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);Ee(cn,`RPC '${e}' ${f} sending request:`,o),y.send(s,"POST",_,i,15)}))}T_(e,s,i){const o=qm(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Jb(),p=Zb(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(x.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,s,i),x.encodeInitMessageHeaders=!0;const _=d.join("");Ee(cn,`Creating RPC '${e}' stream ${o}: ${_}`,x);const T=f.createWebChannel(_,x);this.I_(T);let N=!1,U=!1;const X=new b4({Yo:G=>{U?Ee(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,G):(N||(Ee(cn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),N=!0),Ee(cn,`RPC '${e}' stream ${o} sending:`,G),T.send(G))},Zo:()=>T.close()}),Y=(G,he,oe)=>{G.listen(he,(me=>{try{oe(me)}catch(xe){setTimeout((()=>{throw xe}),0)}}))};return Y(T,qo.EventType.OPEN,(()=>{U||(Ee(cn,`RPC '${e}' stream ${o} transport opened.`),X.o_())})),Y(T,qo.EventType.CLOSE,(()=>{U||(U=!0,Ee(cn,`RPC '${e}' stream ${o} transport closed`),X.a_(),this.E_(T))})),Y(T,qo.EventType.ERROR,(G=>{U||(U=!0,Tl(cn,`RPC '${e}' stream ${o} transport errored. Name:`,G.name,"Message:",G.message),X.a_(new ve(ne.UNAVAILABLE,"The operation could not be completed")))})),Y(T,qo.EventType.MESSAGE,(G=>{if(!U){const he=G.data[0];at(!!he,16349);const oe=he,me=oe?.error||oe[0]?.error;if(me){Ee(cn,`RPC '${e}' stream ${o} received error:`,me);const xe=me.status;let Te=(function(w){const A=Bt[w];if(A!==void 0)return D_(A)})(xe),ye=me.message;Te===void 0&&(Te=ne.INTERNAL,ye="Unknown error status: "+xe+" with message "+me.message),U=!0,X.a_(new ve(Te,ye)),T.close()}else Ee(cn,`RPC '${e}' stream ${o} received:`,he),X.u_(he)}})),Y(p,Wb.STAT_EVENT,(G=>{G.stat===Rm.PROXY?Ee(cn,`RPC '${e}' stream ${o} detected buffering proxy`):G.stat===Rm.NOPROXY&&Ee(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{X.__()}),0),X}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(r){return new SA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,s,i=1e3,o=1.5,d=6e4){this.Mi=e,this.timerId=s,this.d_=i,this.A_=o,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-i);o>0&&Ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="PersistentStream";class Q_{constructor(e,s,i,o,d,f,p,x){this.Mi=e,this.S_=i,this.b_=o,this.connection=d,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new K_(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===ne.RESOURCE_EXHAUSTED?(Ar(s.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===s&&this.G_(i,o)}),(i=>{e((()=>{const o=new ve(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,s){const i=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ee(kv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(Ee(kv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class w4 extends Q_{constructor(e,s,i,o,d,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,i,o,f),this.serializer=d}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=jA(this.serializer,e),i=(function(d){if(!("targetChange"in d))return Le.min();const f=d.targetChange;return f.targetIds&&f.targetIds.length?Le.min():f.readTime?$s(f.readTime):Le.min()})(e);return this.listener.H_(s,i)}Y_(e){const s={};s.database=Bm(this.serializer),s.addTarget=(function(d,f){let p;const x=f.target;if(p=Om(x)?{documents:IA(d,x)}:{query:kA(d,x).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=V_(d,f.resumeToken);const y=Pm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Le.min())>0){p.readTime=Cd(d,f.snapshotVersion.toTimestamp());const y=Pm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=MA(this.serializer,e);i&&(s.labels=i),this.q_(s)}Z_(e){const s={};s.database=Bm(this.serializer),s.removeTarget=e,this.q_(s)}}class E4 extends Q_{constructor(e,s,i,o,d,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,i,o,f),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=RA(e.writeResults,e.commitTime),i=$s(e.commitTime);return this.listener.na(i,s)}ra(){const e={};e.database=Bm(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((i=>CA(this.serializer,i)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{}class S4 extends T4{constructor(e,s,i,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ve(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Go(e,Um(s,i),o,d,f))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ve(ne.UNKNOWN,d.toString())}))}Ho(e,s,i,o,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,Um(s,i),o,f,p,d))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ve(ne.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class N4{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ar(s),this.aa=!1):Ee("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa="RemoteStore";class A4{constructor(e,s,i,o,d){this.localStore=e,this.datastore=s,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((f=>{i.enqueueAndForget((async()=>{Ta(this)&&(Ee(wa,"Restarting streams for network reachability change."),await(async function(x){const y=ze(x);y.Ea.add(4),await xc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await $d(y)})(this))}))})),this.Ra=new N4(i,o)}}async function $d(r){if(Ta(r))for(const e of r.da)await e(!0)}async function xc(r){for(const e of r.da)await e(!1)}function $_(r,e){const s=ze(r);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),Ag(s)?Ng(s):Ll(s).O_()&&Sg(s,e))}function Tg(r,e){const s=ze(r),i=Ll(s);s.Ia.delete(e),i.O_()&&X_(s,e),s.Ia.size===0&&(i.O_()?i.L_():Ta(s)&&s.Ra.set("Unknown"))}function Sg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const s=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Ll(r).Y_(e)}function X_(r,e){r.Va.Ue(e),Ll(r).Z_(e)}function Ng(r){r.Va=new _A({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ll(r).start(),r.Ra.ua()}function Ag(r){return Ta(r)&&!Ll(r).x_()&&r.Ia.size>0}function Ta(r){return ze(r).Ea.size===0}function W_(r){r.Va=void 0}async function j4(r){r.Ra.set("Online")}async function C4(r){r.Ia.forEach(((e,s)=>{Sg(r,e)}))}async function R4(r,e){W_(r),Ag(r)?(r.Ra.ha(e),Ng(r)):r.Ra.set("Unknown")}async function I4(r,e,s){if(r.Ra.set("Online"),e instanceof O_&&e.state===2&&e.cause)try{await(async function(o,d){const f=d.cause;for(const p of d.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(i){Ee(wa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Id(r,i)}else if(e instanceof hd?r.Va.Ze(e):e instanceof M_?r.Va.st(e):r.Va.tt(e),!s.isEqual(Le.min()))try{const i=await Y_(r.localStore);s.compareTo(i)>=0&&await(function(d,f){const p=d.Va.Tt(f);return p.targetChanges.forEach(((x,y)=>{if(x.resumeToken.approximateByteSize()>0){const _=d.Ia.get(y);_&&d.Ia.set(y,_.withResumeToken(x.resumeToken,f))}})),p.targetMismatches.forEach(((x,y)=>{const _=d.Ia.get(x);if(!_)return;d.Ia.set(x,_.withResumeToken(ln.EMPTY_BYTE_STRING,_.snapshotVersion)),X_(d,x);const T=new yi(_.target,x,y,_.sequenceNumber);Sg(d,T)})),d.remoteSyncer.applyRemoteEvent(p)})(r,s)}catch(i){Ee(wa,"Failed to raise snapshot:",i),await Id(r,i)}}async function Id(r,e,s){if(!Ol(e))throw e;r.Ea.add(1),await xc(r),r.Ra.set("Offline"),s||(s=()=>Y_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ee(wa,"Retrying IndexedDB access"),await s(),r.Ea.delete(1),await $d(r)}))}function Z_(r,e){return e().catch((s=>Id(r,s,e)))}async function Xd(r){const e=ze(r),s=ji(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ug;for(;k4(e);)try{const o=await f4(e.localStore,i);if(o===null){e.Ta.length===0&&s.L_();break}i=o.batchId,D4(e,o)}catch(o){await Id(e,o)}J_(e)&&e1(e)}function k4(r){return Ta(r)&&r.Ta.length<10}function D4(r,e){r.Ta.push(e);const s=ji(r);s.O_()&&s.X_&&s.ea(e.mutations)}function J_(r){return Ta(r)&&!ji(r).x_()&&r.Ta.length>0}function e1(r){ji(r).start()}async function M4(r){ji(r).ra()}async function O4(r){const e=ji(r);for(const s of r.Ta)e.ea(s.mutations)}async function V4(r,e,s){const i=r.Ta.shift(),o=yg.from(i,e,s);await Z_(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Xd(r)}async function L4(r,e){e&&ji(r).X_&&await(async function(i,o){if((function(f){return xA(f)&&f!==ne.ABORTED})(o.code)){const d=i.Ta.shift();ji(i).B_(),await Z_(i,(()=>i.remoteSyncer.rejectFailedWrite(d.batchId,o))),await Xd(i)}})(r,e),J_(r)&&e1(r)}async function Dv(r,e){const s=ze(r);s.asyncQueue.verifyOperationInProgress(),Ee(wa,"RemoteStore received new credentials");const i=Ta(s);s.Ea.add(3),await xc(s),i&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await $d(s)}async function P4(r,e){const s=ze(r);e?(s.Ea.delete(2),await $d(s)):e||(s.Ea.add(2),await xc(s),s.Ra.set("Unknown"))}function Ll(r){return r.ma||(r.ma=(function(s,i,o){const d=ze(s);return d.sa(),new w4(i,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(r.datastore,r.asyncQueue,{Xo:j4.bind(null,r),t_:C4.bind(null,r),r_:R4.bind(null,r),H_:I4.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Ag(r)?Ng(r):r.Ra.set("Unknown")):(await r.ma.stop(),W_(r))}))),r.ma}function ji(r){return r.fa||(r.fa=(function(s,i,o){const d=ze(s);return d.sa(),new E4(i,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:M4.bind(null,r),r_:L4.bind(null,r),ta:O4.bind(null,r),na:V4.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Xd(r)):(await r.fa.stop(),r.Ta.length>0&&(Ee(wa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,s,i,o,d){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=i,this.op=o,this.removalCallback=d,this.deferred=new wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,i,o,d){const f=Date.now()+i,p=new jg(e,s,f,o,d);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(r,e){if(Ar("AsyncQueue",`${e}: ${r}`),Ol(r))return new ve(ne.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static emptySet(e){return new wl(e.comparator)}constructor(e){this.comparator=e?(s,i)=>e(s,i)||Ie.comparator(s.key,i.key):(s,i)=>Ie.comparator(s.key,i.key),this.keyedMap=Fo(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,i)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof wl)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=i.getNext().key;if(!o.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const i=new wl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=s,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(){this.ga=new Et(Ie.comparator)}track(e){const s=e.doc.key,i=this.ga.get(s);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(s,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(s,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(s):e.type===1&&i.type===2?this.ga=this.ga.insert(s,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,i)=>{e.push(i)})),e}}class Cl{constructor(e,s,i,o,d,f,p,x,y){this.query=e,this.docs=s,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=d,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=x,this.hasCachedResults=y}static fromInitialDocuments(e,s,i,o,d){const f=[];return s.forEach((p=>{f.push({type:0,doc:p})})),new Cl(e,s,wl.emptySet(s),f,i,o,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,i=e.docChanges;if(s.length!==i.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==i[o].type||!s[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class z4{constructor(){this.queries=Ov(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,i){const o=ze(s),d=o.queries;o.queries=Ov(),d.forEach(((f,p)=>{for(const x of p.Sa)x.onError(i)}))})(this,new ve(ne.ABORTED,"Firestore shutting down"))}}function Ov(){return new Ea((r=>__(r)),Hd)}async function t1(r,e){const s=ze(r);let i=3;const o=e.query;let d=s.queries.get(o);d?!d.ba()&&e.Da()&&(i=2):(d=new U4,i=e.Da()?0:1);try{switch(i){case 0:d.wa=await s.onListen(o,!0);break;case 1:d.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(f){const p=Cg(f,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(p)}s.queries.set(o,d),d.Sa.push(e),e.va(s.onlineState),d.wa&&e.Fa(d.wa)&&Rg(s)}async function n1(r,e){const s=ze(r),i=e.query;let o=3;const d=s.queries.get(i);if(d){const f=d.Sa.indexOf(e);f>=0&&(d.Sa.splice(f,1),d.Sa.length===0?o=e.Da()?0:1:!d.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(i),s.onUnlisten(i,!0);case 1:return s.queries.delete(i),s.onUnlisten(i,!1);case 2:return s.onLastRemoteStoreUnlisten(i);default:return}}function B4(r,e){const s=ze(r);let i=!1;for(const o of e){const d=o.query,f=s.queries.get(d);if(f){for(const p of f.Sa)p.Fa(o)&&(i=!0);f.wa=o}}i&&Rg(s)}function H4(r,e,s){const i=ze(r),o=i.queries.get(e);if(o)for(const d of o.Sa)d.onError(s);i.queries.delete(e)}function Rg(r){r.Ca.forEach((e=>{e.next()}))}var Fm,Vv;(Vv=Fm||(Fm={})).Ma="default",Vv.Cache="cache";class s1{constructor(e,s,i){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Cl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const i=s!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.key=e}}class i1{constructor(e){this.key=e}}class q4{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=w_(e),this.tu=new wl(this.eu)}get nu(){return this.Ya}ru(e,s){const i=s?s.iu:new Mv,o=s?s.tu:this.tu;let d=s?s.mutatedKeys:this.mutatedKeys,f=o,p=!1;const x=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const N=o.get(_),U=qd(this.query,T)?T:null,X=!!N&&this.mutatedKeys.has(N.key),Y=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let G=!1;N&&U?N.data.isEqual(U.data)?X!==Y&&(i.track({type:3,doc:U}),G=!0):this.su(N,U)||(i.track({type:2,doc:U}),G=!0,(x&&this.eu(U,x)>0||y&&this.eu(U,y)<0)&&(p=!0)):!N&&U?(i.track({type:0,doc:U}),G=!0):N&&!U&&(i.track({type:1,doc:N}),G=!0,(x||y)&&(p=!0)),G&&(U?(f=f.add(U),d=Y?d.add(_):d.delete(_)):(f=f.delete(_),d=d.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),d=d.delete(_.key),i.track({type:1,doc:_})}return{tu:f,iu:i,Cs:p,mutatedKeys:d}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,i,o){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,T)=>(function(U,X){const Y=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:G})}};return Y(U)-Y(X)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),o=o??!1;const p=s&&!o?this._u():[],x=this.Xa.size===0&&this.current&&!o?1:0,y=x!==this.Za;return this.Za=x,f.length!==0||y?{snapshot:new Cl(this.query,e.tu,d,f,e.mutatedKeys,x===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const s=[];return e.forEach((i=>{this.Xa.has(i)||s.push(new i1(i))})),this.Xa.forEach((i=>{e.has(i)||s.push(new r1(i))})),s}cu(e){this.Ya=e.Qs,this.Xa=Je();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return Cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ig="SyncEngine";class F4{constructor(e,s,i){this.query=e,this.targetId=s,this.view=i}}class G4{constructor(e){this.key=e,this.hu=!1}}class Y4{constructor(e,s,i,o,d,f){this.localStore=e,this.remoteStore=s,this.eventManager=i,this.sharedClientState=o,this.currentUser=d,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ea((p=>__(p)),Hd),this.Iu=new Map,this.Eu=new Set,this.du=new Et(Ie.comparator),this.Au=new Map,this.Ru=new bg,this.Vu={},this.mu=new Map,this.fu=jl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function K4(r,e,s=!0){const i=d1(r);let o;const d=i.Tu.get(e);return d?(i.sharedClientState.addLocalQueryTarget(d.targetId),o=d.view.lu()):o=await a1(i,e,s,!0),o}async function Q4(r,e){const s=d1(r);await a1(s,e,!0,!1)}async function a1(r,e,s,i){const o=await m4(r.localStore,Qs(e)),d=o.targetId,f=r.sharedClientState.addLocalQueryTarget(d,s);let p;return i&&(p=await $4(r,e,d,f==="current",o.resumeToken)),r.isPrimaryClient&&s&&$_(r.remoteStore,o),p}async function $4(r,e,s,i,o){r.pu=(T,N,U)=>(async function(Y,G,he,oe){let me=G.view.ru(he);me.Cs&&(me=await jv(Y.localStore,G.query,!1).then((({documents:I})=>G.view.ru(I,me))));const xe=oe&&oe.targetChanges.get(G.targetId),Te=oe&&oe.targetMismatches.get(G.targetId)!=null,ye=G.view.applyChanges(me,Y.isPrimaryClient,xe,Te);return Pv(Y,G.targetId,ye.au),ye.snapshot})(r,T,N,U);const d=await jv(r.localStore,e,!0),f=new q4(e,d.Qs),p=f.ru(d.documents),x=yc.createSynthesizedTargetChangeForCurrentChange(s,i&&r.onlineState!=="Offline",o),y=f.applyChanges(p,r.isPrimaryClient,x);Pv(r,s,y.au);const _=new F4(e,s,f);return r.Tu.set(e,_),r.Iu.has(s)?r.Iu.get(s).push(e):r.Iu.set(s,[e]),y.snapshot}async function X4(r,e,s){const i=ze(r),o=i.Tu.get(e),d=i.Iu.get(o.targetId);if(d.length>1)return i.Iu.set(o.targetId,d.filter((f=>!Hd(f,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Hm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),s&&Tg(i.remoteStore,o.targetId),Gm(i,o.targetId)})).catch(Ml)):(Gm(i,o.targetId),await Hm(i.localStore,o.targetId,!0))}async function W4(r,e){const s=ze(r),i=s.Tu.get(e),o=s.Iu.get(i.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(i.targetId),Tg(s.remoteStore,i.targetId))}async function Z4(r,e,s){const i=ij(r);try{const o=await(function(f,p){const x=ze(f),y=vt.now(),_=p.reduce(((U,X)=>U.add(X.key)),Je());let T,N;return x.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let X=jr(),Y=Je();return x.Ns.getEntries(U,_).next((G=>{X=G,X.forEach(((he,oe)=>{oe.isValidDocument()||(Y=Y.add(he))}))})).next((()=>x.localDocuments.getOverlayedDocuments(U,X))).next((G=>{T=G;const he=[];for(const oe of p){const me=fA(oe,T.get(oe.key).overlayedDocument);me!=null&&he.push(new Di(oe.key,me,f_(me.value.mapValue),pn.exists(!0)))}return x.mutationQueue.addMutationBatch(U,y,he,p)})).next((G=>{N=G;const he=G.applyToLocalDocumentSet(T,Y);return x.documentOverlayCache.saveOverlays(U,G.batchId,he)}))})).then((()=>({batchId:N.batchId,changes:T_(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(f,p,x){let y=f.Vu[f.currentUser.toKey()];y||(y=new Et(Ze)),y=y.insert(p,x),f.Vu[f.currentUser.toKey()]=y})(i,o.batchId,s),await vc(i,o.changes),await Xd(i.remoteStore)}catch(o){const d=Cg(o,"Failed to persist write");s.reject(d)}}async function l1(r,e){const s=ze(r);try{const i=await d4(s.localStore,e);e.targetChanges.forEach(((o,d)=>{const f=s.Au.get(d);f&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?at(f.hu,14607):o.removedDocuments.size>0&&(at(f.hu,42227),f.hu=!1))})),await vc(s,i,e)}catch(i){await Ml(i)}}function Lv(r,e,s){const i=ze(r);if(i.isPrimaryClient&&s===0||!i.isPrimaryClient&&s===1){const o=[];i.Tu.forEach(((d,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const x=ze(f);x.onlineState=p;let y=!1;x.queries.forEach(((_,T)=>{for(const N of T.Sa)N.va(p)&&(y=!0)})),y&&Rg(x)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function J4(r,e,s){const i=ze(r);i.sharedClientState.updateQueryState(e,"rejected",s);const o=i.Au.get(e),d=o&&o.key;if(d){let f=new Et(Ie.comparator);f=f.insert(d,dn.newNoDocument(d,Le.min()));const p=Je().add(d),x=new Kd(Le.min(),new Map,new Et(Ze),f,p);await l1(i,x),i.du=i.du.remove(d),i.Au.delete(e),kg(i)}else await Hm(i.localStore,e,!1).then((()=>Gm(i,e,s))).catch(Ml)}async function ej(r,e){const s=ze(r),i=e.batch.batchId;try{const o=await u4(s.localStore,e);c1(s,i,null),o1(s,i),s.sharedClientState.updateMutationState(i,"acknowledged"),await vc(s,o)}catch(o){await Ml(o)}}async function tj(r,e,s){const i=ze(r);try{const o=await(function(f,p){const x=ze(f);return x.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return x.mutationQueue.lookupMutationBatch(y,p).next((T=>(at(T!==null,37113),_=T.keys(),x.mutationQueue.removeMutationBatch(y,T)))).next((()=>x.mutationQueue.performConsistencyCheck(y))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(y,_,p))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>x.localDocuments.getDocuments(y,_)))}))})(i.localStore,e);c1(i,e,s),o1(i,e),i.sharedClientState.updateMutationState(e,"rejected",s),await vc(i,o)}catch(o){await Ml(o)}}function o1(r,e){(r.mu.get(e)||[]).forEach((s=>{s.resolve()})),r.mu.delete(e)}function c1(r,e,s){const i=ze(r);let o=i.Vu[i.currentUser.toKey()];if(o){const d=o.get(e);d&&(s?d.reject(s):d.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Gm(r,e,s=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),s&&r.Pu.yu(i,s);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||u1(r,i)}))}function u1(r,e){r.Eu.delete(e.path.canonicalString());const s=r.du.get(e);s!==null&&(Tg(r.remoteStore,s),r.du=r.du.remove(e),r.Au.delete(s),kg(r))}function Pv(r,e,s){for(const i of s)i instanceof r1?(r.Ru.addReference(i.key,e),nj(r,i)):i instanceof i1?(Ee(Ig,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||u1(r,i.key)):Oe(19791,{wu:i})}function nj(r,e){const s=e.key,i=s.path.canonicalString();r.du.get(s)||r.Eu.has(i)||(Ee(Ig,"New document in limbo: "+s),r.Eu.add(i),kg(r))}function kg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const s=new Ie(pt.fromString(e)),i=r.fu.next();r.Au.set(i,new G4(s)),r.du=r.du.insert(s,i),$_(r.remoteStore,new yi(Qs(gg(s.path)),i,"TargetPurposeLimboResolution",Ud.ce))}}async function vc(r,e,s){const i=ze(r),o=[],d=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,x)=>{f.push(i.pu(x,e,s).then((y=>{if((y||s)&&i.isPrimaryClient){const _=y?!y.fromCache:s?.targetChanges.get(x.targetId)?.current;i.sharedClientState.updateQueryState(x.targetId,_?"current":"not-current")}if(y){o.push(y);const _=wg.As(x.targetId,y);d.push(_)}})))})),await Promise.all(f),i.Pu.H_(o),await(async function(x,y){const _=ze(x);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>le.forEach(y,(N=>le.forEach(N.Es,(U=>_.persistence.referenceDelegate.addReference(T,N.targetId,U))).next((()=>le.forEach(N.ds,(U=>_.persistence.referenceDelegate.removeReference(T,N.targetId,U)))))))))}catch(T){if(!Ol(T))throw T;Ee(Eg,"Failed to update sequence numbers: "+T)}for(const T of y){const N=T.targetId;if(!T.fromCache){const U=_.Ms.get(N),X=U.snapshotVersion,Y=U.withLastLimboFreeSnapshotVersion(X);_.Ms=_.Ms.insert(N,Y)}}})(i.localStore,d))}async function sj(r,e){const s=ze(r);if(!s.currentUser.isEqual(e)){Ee(Ig,"User change. New user:",e.toKey());const i=await G_(s.localStore,e);s.currentUser=e,(function(d,f){d.mu.forEach((p=>{p.forEach((x=>{x.reject(new ve(ne.CANCELLED,f))}))})),d.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await vc(s,i.Ls)}}function rj(r,e){const s=ze(r),i=s.Au.get(e);if(i&&i.hu)return Je().add(i.key);{let o=Je();const d=s.Iu.get(e);if(!d)return o;for(const f of d){const p=s.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function d1(r){const e=ze(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=l1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J4.bind(null,e),e.Pu.H_=B4.bind(null,e.eventManager),e.Pu.yu=H4.bind(null,e.eventManager),e}function ij(r){const e=ze(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ej.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tj.bind(null,e),e}class kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return c4(this.persistence,new a4,e.initialUser,this.serializer)}Cu(e){return new F_(_g.mi,this.serializer)}Du(e){return new p4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kd.provider={build:()=>new kd};class aj extends kd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){at(this.persistence.referenceDelegate instanceof Rd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new GA(i,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new F_((i=>Rd.mi(i,s)),this.serializer)}}class Ym{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Lv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=sj.bind(null,this.syncEngine),await P4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new z4})()}createDatastore(e){const s=Qd(e.databaseInfo.databaseId),i=(function(d){return new _4(d)})(e.databaseInfo);return(function(d,f,p,x){return new S4(d,f,p,x)})(e.authCredentials,e.appCheckCredentials,i,s)}createRemoteStore(e){return(function(i,o,d,f,p){return new A4(i,o,d,f,p)})(this.localStore,this.datastore,e.asyncQueue,(s=>Lv(this.syncEngine,s,0)),(function(){return Iv.v()?new Iv:new y4})())}createSyncEngine(e,s){return(function(o,d,f,p,x,y,_){const T=new Y4(o,d,f,p,x,y);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const i=ze(s);Ee(wa,"RemoteStore shutting down."),i.Ea.add(5),await xc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ym.provider={build:()=>new Ym};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="FirestoreClient";class lj{constructor(e,s,i,o,d){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=i,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=cg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(i,(async f=>{Ee(Ci,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(i,(f=>(Ee(Ci,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const i=Cg(s,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function pm(r,e){r.asyncQueue.verifyOperationInProgress(),Ee(Ci,"Initializing OfflineComponentProvider");const s=r.configuration;await e.initialize(s);let i=s.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await G_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Uv(r,e){r.asyncQueue.verifyOperationInProgress();const s=await oj(r);Ee(Ci,"Initializing OnlineComponentProvider"),await e.initialize(s,r.configuration),r.setCredentialChangeListener((i=>Dv(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Dv(e.remoteStore,o))),r._onlineComponents=e}async function oj(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ee(Ci,"Using user provided OfflineComponentProvider");try{await pm(r,r._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;Tl("Error using user provided cache. Falling back to memory cache: "+s),await pm(r,new kd)}}else Ee(Ci,"Using default OfflineComponentProvider"),await pm(r,new aj(void 0));return r._offlineComponents}async function f1(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ee(Ci,"Using user provided OnlineComponentProvider"),await Uv(r,r._uninitializedComponentsProvider._online)):(Ee(Ci,"Using default OnlineComponentProvider"),await Uv(r,new Ym))),r._onlineComponents}function cj(r){return f1(r).then((e=>e.syncEngine))}async function Km(r){const e=await f1(r),s=e.eventManager;return s.onListen=K4.bind(null,e.syncEngine),s.onUnlisten=X4.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=Q4.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=W4.bind(null,e.syncEngine),s}function uj(r,e,s={}){const i=new wi;return r.asyncQueue.enqueueAndForget((async()=>(function(d,f,p,x,y){const _=new h1({next:N=>{_.Nu(),f.enqueueAndForget((()=>n1(d,T))),N.fromCache&&x.source==="server"?y.reject(new ve(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(N)},error:N=>y.reject(N)}),T=new s1(p,_,{includeMetadataChanges:!0,qa:!0});return t1(d,T)})(await Km(r),r.asyncQueue,e,s,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="firestore.googleapis.com",Bv=!0;class Hv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g1,this.ssl=Bv}else this.host=e.host,this.ssl=e.ssl??Bv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qA)throw new ve(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=m1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wd{constructor(e,s,i,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new yN;switch(i.type){case"firstParty":return new _N(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ve(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const i=zv.get(s);i&&(Ee("ComponentProvider","Removing Datastore"),zv.delete(s),i.terminate())})(this),Promise.resolve()}}function dj(r,e,s,i={}){r=Un(r,Wd);const o=Rl(e),d=r._getSettings(),f={...d,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${s}`;o&&(ab(`https://${p}`),lb("Firestore",!0)),d.host!==g1&&d.host!==p&&Tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...d,host:p,ssl:o,emulatorOptions:i};if(!ya(x,f)&&(r._setSettings(x),i.mockUserToken)){let y,_;if(typeof i.mockUserToken=="string")y=i.mockUserToken,_=un.MOCK_USER;else{y=Tw(i.mockUserToken,r._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ve(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new un(T)}r._authCredentials=new xN(new t_(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,s,i){this.converter=s,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Mi(this.firestore,e,this._query)}}class It{constructor(e,s,i){this.converter=s,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}toJSON(){return{type:It._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,i){if(gc(s,It._jsonSchema))return new It(e,i||null,new Ie(pt.fromString(s.referencePath)))}}It._jsonSchemaVersion="firestore/documentReference/1.0",It._jsonSchema={type:qt("string",It._jsonSchemaVersion),referencePath:qt("string")};class Ei extends Mi{constructor(e,s,i){super(e,s,gg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new Ie(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function wt(r,e,...s){if(r=kt(r),n_("collection","path",e),r instanceof Wd){const i=pt.fromString(e,...s);return tv(i),new Ei(r,null,i)}{if(!(r instanceof It||r instanceof Ei))throw new ve(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(pt.fromString(e,...s));return tv(i),new Ei(r.firestore,null,i)}}function Ft(r,e,...s){if(r=kt(r),arguments.length===1&&(e=cg.newId()),n_("doc","path",e),r instanceof Wd){const i=pt.fromString(e,...s);return ev(i),new It(r,null,new Ie(i))}{if(!(r instanceof It||r instanceof Ei))throw new ve(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(pt.fromString(e,...s));return ev(i),new It(r.firestore,r instanceof Ei?r.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="AsyncQueue";class Fv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new K_(this,"async_queue_retry"),this._c=()=>{const i=gm();i&&Ee(qv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const s=gm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=gm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new wi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ol(e))throw e;Ee(qv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ar("INTERNAL UNHANDLED ERROR: ",Gv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=s,s}enqueueAfterDelay(e,s,i){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=jg.createAndSchedule(this,e,s,i,(d=>this.hc(d)));return this.tc.push(o),o}uc(){this.nc&&Oe(47125,{Pc:Gv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,i)=>s.targetTimeMs-i.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function Gv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(r){return(function(s,i){if(typeof s!="object"||s===null)return!1;const o=s;for(const d of i)if(d in o&&typeof o[d]=="function")return!0;return!1})(r,["next","error","complete"])}class Cr extends Wd{constructor(e,s,i,o){super(e,s,i,o),this.type="firestore",this._queue=new Fv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fv(e),this._firestoreClient=void 0,await e}}}function hj(r,e){const s=typeof r=="object"?r:db(),i=typeof r=="string"?r:Td,o=Jm(s,"firestore").getImmediate({identifier:i});if(!o._initialized){const d=ww("firestore");d&&dj(o,...d)}return o}function Zd(r){if(r._terminated)throw new ve(ne.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||fj(r),r._firestoreClient}function fj(r){const e=r._freezeSettings(),s=(function(o,d,f,p){return new PN(o,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,m1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new lj(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&(function(o){const d=o?._online.build();return{_offline:o?._offline.build(d),_online:d}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ns(ln.fromBase64String(e))}catch(s){throw new ve(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new ns(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ns._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gc(e,ns._jsonSchema))return ns.fromBase64String(e.bytes)}}ns._jsonSchemaVersion="firestore/bytes/1.0",ns._jsonSchema={type:qt("string",ns._jsonSchemaVersion),bytes:qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new ve(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new ve(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new ve(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xs._jsonSchemaVersion}}static fromJSON(e){if(gc(e,Xs._jsonSchema))return new Xs(e.latitude,e.longitude)}}Xs._jsonSchemaVersion="firestore/geoPoint/1.0",Xs._jsonSchema={type:qt("string",Xs._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let d=0;d<i.length;++d)if(i[d]!==o[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gc(e,Ws._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Ws(e.vectorValues);throw new ve(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ws._jsonSchemaVersion="firestore/vectorValue/1.0",Ws._jsonSchema={type:qt("string",Ws._jsonSchemaVersion),vectorValues:qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj=/^__.*__$/;class gj{constructor(e,s,i){this.data=e,this.fieldMask=s,this.fieldTransforms=i}toMutation(e,s){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,s,this.fieldTransforms):new pc(e,this.data,s,this.fieldTransforms)}}class p1{constructor(e,s,i){this.data=e,this.fieldMask=s,this.fieldTransforms=i}toMutation(e,s){return new Di(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function y1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:r})}}class Mg{constructor(e,s,i,o,d,f){this.settings=e,this.databaseId=s,this.serializer=i,this.ignoreUndefinedProperties=o,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Mg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),i=this.Vc({path:s,fc:!1});return i.gc(e),i}yc(e){const s=this.path?.child(e),i=this.Vc({path:s,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(y1(this.Ac)&&mj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class pj{constructor(e,s,i){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=i||Qd(e)}Cc(e,s,i,o=!1){return new Mg({Ac:e,methodName:s,Dc:i,path:an.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _c(r){const e=r._freezeSettings(),s=Qd(r._databaseId);return new pj(r._databaseId,!!e.ignoreUndefinedProperties,s)}function Og(r,e,s,i,o,d={}){const f=r.Cc(d.merge||d.mergeFields?2:0,e,s,o);Vg("Data must be an object, but it was:",f,i);const p=b1(i,f);let x,y;if(d.merge)x=new Pn(f.fieldMask),y=f.fieldTransforms;else if(d.mergeFields){const _=[];for(const T of d.mergeFields){const N=Qm(e,T,s);if(!f.contains(N))throw new ve(ne.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);w1(_,N)||_.push(N)}x=new Pn(_),y=f.fieldTransforms.filter((T=>x.covers(T.field)))}else x=null,y=f.fieldTransforms;return new gj(new Nn(p),x,y)}class Jd extends Dg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jd}}function x1(r,e,s,i){const o=r.Cc(1,e,s);Vg("Data must be an object, but it was:",o,i);const d=[],f=Nn.empty();ki(i,((x,y)=>{const _=Lg(e,x,s);y=kt(y);const T=o.yc(_);if(y instanceof Jd)d.push(_);else{const N=wc(y,T);N!=null&&(d.push(_),f.set(_,N))}}));const p=new Pn(d);return new p1(f,p,o.fieldTransforms)}function v1(r,e,s,i,o,d){const f=r.Cc(1,e,s),p=[Qm(e,i,s)],x=[o];if(d.length%2!=0)throw new ve(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<d.length;N+=2)p.push(Qm(e,d[N])),x.push(d[N+1]);const y=[],_=Nn.empty();for(let N=p.length-1;N>=0;--N)if(!w1(y,p[N])){const U=p[N];let X=x[N];X=kt(X);const Y=f.yc(U);if(X instanceof Jd)y.push(U);else{const G=wc(X,Y);G!=null&&(y.push(U),_.set(U,G))}}const T=new Pn(y);return new p1(_,T,f.fieldTransforms)}function yj(r,e,s,i=!1){return wc(s,r.Cc(i?4:3,e))}function wc(r,e){if(_1(r=kt(r)))return Vg("Unsupported field value:",e,r),b1(r,e);if(r instanceof Dg)return(function(i,o){if(!y1(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const d=i._toFieldTransform(o);d&&o.fieldTransforms.push(d)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const d=[];let f=0;for(const p of i){let x=wc(p,o.wc(f));x==null&&(x={nullValue:"NULL_VALUE"}),d.push(x),f++}return{arrayValue:{values:d}}})(r,e)}return(function(i,o){if((i=kt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return lA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const d=vt.fromDate(i);return{timestampValue:Cd(o.serializer,d)}}if(i instanceof vt){const d=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Cd(o.serializer,d)}}if(i instanceof Xs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ns)return{bytesValue:V_(o.serializer,i._byteString)};if(i instanceof It){const d=o.databaseId,f=i.firestore._databaseId;if(!f.isEqual(d))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:vg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ws)return(function(f,p){return{mapValue:{fields:{[d_]:{stringValue:h_},[Sd]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return pg(p.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Pd(i)}`)})(r,e)}function b1(r,e){const s={};return i_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ki(r,((i,o)=>{const d=wc(o,e.mc(i));d!=null&&(s[i]=d)})),{mapValue:{fields:s}}}function _1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof vt||r instanceof Xs||r instanceof ns||r instanceof It||r instanceof Dg||r instanceof Ws)}function Vg(r,e,s){if(!_1(s)||!s_(s)){const i=Pd(s);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function Qm(r,e,s){if((e=kt(e))instanceof bc)return e._internalPath;if(typeof e=="string")return Lg(r,e);throw Dd("Field path arguments must be of type string or ",r,!1,void 0,s)}const xj=new RegExp("[~\\*/\\[\\]]");function Lg(r,e,s){if(e.search(xj)>=0)throw Dd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,s);try{return new bc(...e.split("."))._internalPath}catch{throw Dd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,s)}}function Dd(r,e,s,i,o){const d=i&&!i.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let x="";return(d||f)&&(x+=" (found",d&&(x+=` in field ${i}`),f&&(x+=` in document ${o}`),x+=")"),new ve(ne.INVALID_ARGUMENT,p+r+x)}function w1(r,e){return r.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,s,i,o,d){this._firestore=e,this._userDataWriter=s,this._key=i,this._document=o,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(eh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class vj extends E1{data(){return super.data()}}function eh(r,e){return typeof e=="string"?Lg(r,e):e instanceof bc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ve(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pg{}class S1 extends Pg{}function rs(r,e,...s){let i=[];e instanceof Pg&&i.push(e),i=i.concat(s),(function(d){const f=d.filter((x=>x instanceof Ug)).length,p=d.filter((x=>x instanceof th)).length;if(f>1||f>0&&p>0)throw new ve(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class th extends S1{constructor(e,s,i){super(),this._field=e,this._op=s,this._value=i,this.type="where"}static _create(e,s,i){return new th(e,s,i)}_apply(e){const s=this._parse(e);return N1(e._query,s),new Mi(e.firestore,e.converter,Vm(e._query,s))}_parse(e){const s=_c(e.firestore);return(function(d,f,p,x,y,_,T){let N;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ve(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Qv(T,_);const X=[];for(const Y of T)X.push(Kv(x,d,Y));N={arrayValue:{values:X}}}else N=Kv(x,d,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Qv(T,_),N=yj(p,f,T,_==="in"||_==="not-in");return Ht.create(y,_,N)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function bj(r,e,s){const i=e,o=eh("where",r);return th._create(o,i,s)}class Ug extends Pg{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Ug(e,s)}_parse(e){const s=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return s.length===1?s[0]:_s.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,d){let f=o;const p=d.getFlattenedFilters();for(const x of p)N1(f,x),f=Vm(f,x)})(e._query,s),new Mi(e.firestore,e.converter,Vm(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zg extends S1{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new zg(e,s)}_apply(e){const s=(function(o,d,f){if(o.startAt!==null)throw new ve(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ve(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ac(d,f)})(e._query,this._field,this._direction);return new Mi(e.firestore,e.converter,(function(o,d){const f=o.explicitOrderBy.concat([d]);return new Vl(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,s))}}function ws(r,e="asc"){const s=e,i=eh("orderBy",r);return zg._create(i,s)}function Kv(r,e,s){if(typeof(s=kt(s))=="string"){if(s==="")throw new ve(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!b_(e)&&s.indexOf("/")!==-1)throw new ve(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const i=e.path.child(pt.fromString(s));if(!Ie.isDocumentKey(i))throw new ve(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return cv(r,new Ie(i))}if(s instanceof It)return cv(r,s._key);throw new ve(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pd(s)}.`)}function Qv(r,e){if(!Array.isArray(r)||r.length===0)throw new ve(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function N1(r,e){const s=(function(o,d){for(const f of o)for(const p of f.getFlattenedFilters())if(d.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new ve(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class _j{convertValue(e,s="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const i={};return ki(e,((o,d)=>{i[o]=this.convertValue(d,s)})),i}convertVectorValue(e){const s=e.fields?.[Sd].arrayValue?.values?.map((i=>Rt(i.doubleValue)));return new Ws(s)}convertGeoPoint(e){return new Xs(Rt(e.latitude),Rt(e.longitude))}convertArray(e,s){return(e.values||[]).map((i=>this.convertValue(i,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const i=Bd(e);return i==null?null:this.convertValue(i,s);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const s=Si(e);return new vt(s.seconds,s.nanos)}convertDocumentKey(e,s){const i=pt.fromString(e);at(H_(i),9688,{name:e});const o=new rc(i.get(1),i.get(3)),d=new Ie(i.popFirst(5));return o.isEqual(s)||Ar(`Document ${d} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(r,e,s){let i;return i=r?s&&(s.merge||s.mergeFields)?r.toFirestore(e,s):r.toFirestore(e):e,i}class Yo{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ga extends E1{constructor(e,s,i,o,d,f){super(e,s,i,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const i=this._document.data.field(eh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=ga._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",ga._jsonSchema={type:qt("string",ga._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class fd extends ga{data(e={}){return super.data(e)}}class pa{constructor(e,s,i,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new Yo(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((i=>{e.call(s,new fd(this._firestore,this._userDataWriter,i.key,i,new Yo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new ve(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,d){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const x=new fd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Yo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:x,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>d||p.type!==3)).map((p=>{const x=new fd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Yo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),_=f.indexOf(p.doc.key)),{type:wj(p.type),doc:x,oldIndex:y,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],i=[],o=[];return this.docs.forEach((d=>{d._document!==null&&(s.push(d._document),i.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),o.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:r})}}pa._jsonSchemaVersion="firestore/querySnapshot/1.0",pa._jsonSchema={type:qt("string",pa._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class Hg extends _j{constructor(e){super(),this.firestore=e}convertBytes(e){return new ns(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,s)}}function Ej(r){r=Un(r,Mi);const e=Un(r.firestore,Cr),s=Zd(e),i=new Hg(e);return T1(r._query),uj(s,r._query).then((o=>new pa(e,i,r,o)))}function Tj(r,e,s){r=Un(r,It);const i=Un(r.firestore,Cr),o=Bg(r.converter,e,s);return Ec(i,[Og(_c(i),"setDoc",r._key,o,r.converter!==null,s).toMutation(r._key,pn.none())])}function Js(r,e,s,...i){r=Un(r,It);const o=Un(r.firestore,Cr),d=_c(o);let f;return f=typeof(e=kt(e))=="string"||e instanceof bc?v1(d,"updateDoc",r._key,e,s,i):x1(d,"updateDoc",r._key,e),Ec(o,[f.toMutation(r._key,pn.exists(!0))])}function Ri(r){return Ec(Un(r.firestore,Cr),[new Yd(r._key,pn.none())])}function Tr(r,e){const s=Un(r.firestore,Cr),i=Ft(r),o=Bg(r.converter,e);return Ec(s,[Og(_c(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,pn.exists(!1))]).then((()=>i))}function An(r,...e){r=kt(r);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Yv(e[i])||(s=e[i++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Yv(e[i])){const x=e[i];e[i]=x.next?.bind(x),e[i+1]=x.error?.bind(x),e[i+2]=x.complete?.bind(x)}let d,f,p;if(r instanceof It)f=Un(r.firestore,Cr),p=gg(r._key.path),d={next:x=>{e[i]&&e[i](Sj(f,r,x))},error:e[i+1],complete:e[i+2]};else{const x=Un(r,Mi);f=Un(x.firestore,Cr),p=x._query;const y=new Hg(f);d={next:_=>{e[i]&&e[i](new pa(f,y,x,_))},error:e[i+1],complete:e[i+2]},T1(r._query)}return(function(y,_,T,N){const U=new h1(N),X=new s1(_,U,T);return y.asyncQueue.enqueueAndForget((async()=>t1(await Km(y),X))),()=>{U.Nu(),y.asyncQueue.enqueueAndForget((async()=>n1(await Km(y),X)))}})(Zd(f),p,o,d)}function Ec(r,e){return(function(i,o){const d=new wi;return i.asyncQueue.enqueueAndForget((async()=>Z4(await cj(i),o,d))),d.promise})(Zd(r),e)}function Sj(r,e,s){const i=s.docs.get(e._key),o=new Hg(r);return new ga(r,o,e._key,i,new Yo(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=_c(e)}set(e,s,i){this._verifyNotCommitted();const o=ym(e,this._firestore),d=Bg(o.converter,s,i),f=Og(this._dataReader,"WriteBatch.set",o._key,d,o.converter!==null,i);return this._mutations.push(f.toMutation(o._key,pn.none())),this}update(e,s,i,...o){this._verifyNotCommitted();const d=ym(e,this._firestore);let f;return f=typeof(s=kt(s))=="string"||s instanceof bc?v1(this._dataReader,"WriteBatch.update",d._key,s,i,o):x1(this._dataReader,"WriteBatch.update",d._key,s),this._mutations.push(f.toMutation(d._key,pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=ym(e,this._firestore);return this._mutations=this._mutations.concat(new Yd(s._key,pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ym(r,e){if((r=kt(r)).firestore!==e)throw new ve(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(r){return Zd(r=Un(r,Cr)),new Nj(r,(e=>Ec(r,e)))}(function(e,s=!0){(function(o){Dl=o})(Il),El(new xa("firestore",((i,{instanceIdentifier:o,options:d})=>{const f=i.getProvider("app").getImmediate(),p=new Cr(new vN(i.getProvider("auth-internal")),new wN(f,i.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ve(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(y.options.projectId,_)})(f,o),f);return d={useFetchStreams:s,...d},p._setSettings(d),p}),"PUBLIC").setMultipleInstances(!0)),bi(Xx,Wx,e),bi(Xx,Wx,"esm2020")})();const jj={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},A1=ub(jj),ss=fN(A1),Ue=hj(A1),xm={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function Cj(){const[r,e]=re.useState(!0),[s,i]=re.useState(""),[o,d]=re.useState(""),[f,p]=re.useState(""),[x,y]=re.useState(""),[_,T]=re.useState(!1),N=async Y=>{Y.preventDefault(),p(""),y(""),T(!0);try{if(r)await ZT(ss,s,o);else{const he=(await WT(ss,s,o)).user;await Tj(Ft(Ue,"users",he.uid),{email:he.email,role:"user",createdAt:new Date().toISOString()}),y("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(G){p(X(G.code))}finally{T(!1)}},U=async()=>{if(!s){p("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await XT(ss,s),y("ifre sfrlama balants e-posta adresinize gnderildi."),p("")}catch(Y){p(X(Y.code))}},X=Y=>{switch(Y){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+Y}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:r?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),x&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:x}),c.jsxs("form",{onSubmit:N,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(xm.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:s,onChange:Y=>i(Y.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(xm.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:o,onChange:Y=>d(Y.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:U,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[r?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(xm.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[r?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!r),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:r?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const hi={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},Rj=({data:r})=>{if(!r||r.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,s=600,i=20,o=Math.max(...r.map(p=>p.value))||100,d=r.map((p,x)=>{const y=r.length>1?x/(r.length-1)*(s-i*2)+i:s/2,_=e-i-p.value/o*(e-i*2),T=isNaN(y)?i:y,N=isNaN(_)?e-i:_;return`${T},${N}`}).join(" "),f=`${d} ${s-i},${e-i} ${i},${e-i}`;return c.jsxs("svg",{viewBox:`0 0 ${s} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:i,y1:e-i,x2:s-i,y2:e-i,stroke:"#e5e7eb",strokeWidth:"1"}),r.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${f}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:d,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),r.map((p,x)=>{const y=r.length>1?x/(r.length-1)*(s-i*2)+i:s/2,_=e-i-p.value/o*(e-i*2),T=isNaN(y)?i:y,N=isNaN(_)?e-i:_;return c.jsx("circle",{cx:T,cy:N,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},x)})]})},sd=({title:r,value:e,subtext:s,icon:i,color:o})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:r}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(hi.TrendingUp,{})," ",s]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${o}`,children:c.jsx(i,{})})]});function $v({onNavigate:r=()=>{}}){const[e,s]=re.useState(null),[i,o]=re.useState(!0),[d,f]=re.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[p,x]=re.useState([]),[y,_]=re.useState([]),[T,N]=re.useState([]),[U,X]=re.useState([]);return re.useEffect(()=>{const Y=ss.onAuthStateChanged(xe=>{s(xe),o(!1)}),G=An(rs(wt(Ue,"siparisler"),ws("createdAt","desc")),xe=>{const Te=xe.docs.map(w=>w.data());_(Te.slice(0,5));const ye={};Te.forEach(w=>{const A=w.date?w.date.slice(0,7):"N/A";ye[A]=(ye[A]||0)+1});const I=Object.entries(ye).map(([w,A])=>({label:w,value:A})).sort((w,A)=>w.label.localeCompare(A.label));X(I),f(w=>({...w,activeOrders:Te.length}))}),he=An(wt(Ue,"teklifler"),xe=>{f(Te=>({...Te,pendingProposals:xe.size}))}),oe=An(wt(Ue,"employees"),xe=>{const Te=xe.docs.map(w=>w.data());f(w=>({...w,totalWorkers:Te.length}));const ye=new Date().toISOString().split("T")[0],I=Te.filter(w=>{const A=w.attendance?.[ye];return A&&["paid_leave","unpaid_leave","off"].includes(A.type)});x(I)}),me=An(wt(Ue,"inventory_movements"),xe=>{const Te=xe.docs.map(w=>w.data()),ye={};Te.forEach(w=>{const A=Number(w.quantity)||0,R=w.action==="add"?A:-A;ye[w.productName]||(ye[w.productName]=0),ye[w.productName]+=R});const I=Object.entries(ye).filter(([w,A])=>A<100).map(([w,A])=>({name:w,qty:A}));N(I.slice(0,5)),f(w=>({...w,inventoryCount:Object.keys(ye).length}))});return()=>{Y(),G(),he(),oe(),me()}},[]),i?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(hi.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(sd,{title:"Aktif Sipariler",value:d.activeOrders,subtext:"Geen aya gre art",icon:hi.Cart,color:"bg-indigo-600"}),c.jsx(sd,{title:"Bekleyen Teklifler",value:d.pendingProposals,subtext:"Onay bekleyen",icon:hi.Document,color:"bg-purple-600"}),c.jsx(sd,{title:"Toplam Stok Kalemi",value:d.inventoryCount,subtext:"Kritik seviye kontrol",icon:hi.Box,color:"bg-emerald-600"}),c.jsx(sd,{title:"Toplam Personel",value:d.totalWorkers,subtext:"Aktif alan",icon:hi.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(Rj,{data:U})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>r("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[y.map((Y,G)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",Y.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",Y.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:Y.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},G)),y.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(hi.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:p.length>0?p.map((Y,G)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:Y.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:Y.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:Y.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},G)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(hi.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:T.length>0?T.map((Y,G)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:Y.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[Y.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},G)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>r("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const Ln={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})},ys=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ",Ij=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"short",year:"numeric"}):"-",kj=({checked:r,onChange:e,label:s})=>c.jsxs("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!r),children:[c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${r?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${r?"translate-x-4":"translate-x-0"}`})}),s&&c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 group-hover:text-indigo-600 transition-colors",children:s})]});function Dj(){const[r,e]=re.useState(null),[s,i]=re.useState(!0),[o,d]=re.useState([]),[f,p]=re.useState([]),[x,y]=re.useState(!1),[_,T]=re.useState({start:"",end:""}),[N,U]=re.useState(!1),[X,Y]=re.useState(!1),[G,he]=re.useState(!1),[oe,me]=re.useState(null),[xe,Te]=re.useState(null),[ye,I]=re.useState({docNo:"",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[w,A]=re.useState({name:"",company:"",phone:"",email:""}),[R,C]=re.useState(null),[D,j]=re.useState({docNo:"",amount:"",type:"Nakit",note:"",date:new Date().toISOString().split("T")[0]}),_e=q=>{const ie=(q.qty||0)*(q.unitPrice||0),ae=ie*((q.vatRate||0)/100);return ie+ae},Ve=q=>{if(!q)return{subtotal:0,totalVAT:0,grandTotal:0};const ie=q.reduce((be,ge)=>be+(ge.qty||0)*(ge.unitPrice||0),0),ae=q.reduce((be,ge)=>be+_e(ge),0);return{subtotal:ie,totalVAT:ae-ie,grandTotal:ae}},Q=q=>q?q.reduce((ie,ae)=>ie+_e(ae),0):0,de=q=>{const ie=f.filter(ge=>ge.customerId===q);let ae=0,be=0;return ie.forEach(ge=>{ge.type==="payment"?be+=parseFloat(ge.amount)||0:ae+=Q(ge.items)}),ae-be};re.useEffect(()=>{const q=ss.onAuthStateChanged(je=>{e(je),i(!1)}),ie=rs(wt(Ue,"customers"),ws("createdAt","desc")),ae=An(ie,je=>{d(je.docs.map(Ye=>({id:Ye.id,...Ye.data()})))}),be=rs(wt(Ue,"sales"),ws("createdAt","desc")),ge=An(be,je=>{p(je.docs.map(Ye=>({id:Ye.id,...Ye.data()})))});return()=>{q(),ae(),ge()}},[]);const Ne=q=>{let ie=f.filter(ge=>ge.customerId===q);ie.sort((ge,je)=>new Date(ge.date)-new Date(je.date));let ae=0;const be=[];return ie.forEach(ge=>{if(ge.type==="payment"){const je=parseFloat(ge.amount)||0;ae-=je,be.push({docNo:ge.docNo||"-",date:ge.date,action:"TAHSLAT",desc:`${ge.paymentMethod} ile deme - ${ge.note||""}`,qty:"-",unitPrice:"-",borc:je,alacak:0,balance:ae})}else ge.items?.forEach(je=>{const Ye=_e(je);ae+=Ye,be.push({docNo:ge.docNo,date:ge.date,action:"SATI",desc:je.name,qty:je.qty,unitPrice:je.unitPrice,borc:0,alacak:Ye,balance:ae})})}),be},qe=async q=>{q.preventDefault();try{await Tr(wt(Ue,"customers"),{...w,createdAt:new Date().toISOString()}),A({name:"",company:"",phone:"",email:""}),Y(!1)}catch(ie){alert("Hata: "+ie.message)}},Ge=async q=>{window.confirm("Mteriyi silmek istiyor musunuz?")&&await Ri(Ft(Ue,"customers",q))},M=q=>{me(q),C(null);const ie="TH-"+Date.now().toString().slice(-6);j({docNo:ie,amount:"",type:"Nakit",note:"",date:new Date().toISOString().split("T")[0]}),he(!0)},J=(q,ie)=>{me(ie),C(q),j({docNo:q.docNo||"",amount:q.amount,type:q.paymentMethod,note:q.note,date:q.date}),he(!0)},fe=async q=>{if(q.preventDefault(),!!oe)try{const ie={customerId:oe.id,type:"payment",docNo:D.docNo,amount:parseFloat(D.amount),paymentMethod:D.type,note:D.note,date:D.date,createdAt:R?R.createdAt:new Date().toISOString()};R?await Js(Ft(Ue,"sales",R.id),ie):await Tr(wt(Ue,"sales"),ie),he(!1)}catch(ie){alert("Hata: "+ie.message)}},L=q=>{me(q),Te(null);const ie="DOC-"+Date.now().toString().slice(-6);I({docNo:ie,date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{name:"",qty:1,unitPrice:0,vatRate:20}]}),U(!0)},V=(q,ie)=>{me(ie),Te(q),I({docNo:q.docNo,date:q.date,description:q.description,status:q.status,items:q.items||[]}),U(!0)},te=async q=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await Ri(Ft(Ue,"sales",q))}catch(ie){alert("Hata: "+ie.message)}},ce=async q=>{q.preventDefault();try{const ie={customerId:oe.id,...ye,type:"sale",createdAt:xe?xe.createdAt:new Date().toISOString()};xe?await Js(Ft(Ue,"sales",xe.id),ie):await Tr(wt(Ue,"sales"),ie),U(!1)}catch(ie){alert("Hata: "+ie.message)}},Ce=(q,ie,ae)=>{const be=[...ye.items];be[q][ie]=ie==="name"?ae:Number(ae),I({...ye,items:be})},De=()=>I({...ye,items:[...ye.items,{name:"",qty:1,unitPrice:0,vatRate:20}]}),Z=q=>I({...ye,items:ye.items.filter((ie,ae)=>ae!==q)}),we=q=>{const ie=Ne(q.id);let ae="data:text/csv;charset=utf-8,\uFEFF";ae+=`Tarih,Belge No,Hareket,Aciklama,Miktar,Birim Fiyat,Odeme (Borc),Tutar (Alacak),Bakiye
`,ie.forEach(je=>{const Ye=fn=>ys(fn).replace(" ",""),gt=[`"${je.date}"`,`"${je.docNo}"`,`"${je.action}"`,`"${je.desc}"`,`"${je.qty}"`,`"${Ye(je.unitPrice)}"`,`"${Ye(je.borc)}"`,`"${Ye(je.alacak)}"`,`"${Ye(je.balance)}"`].join(",");ae+=gt+`
`});const be=encodeURI(ae),ge=document.createElement("a");ge.setAttribute("href",be),ge.setAttribute("download",`${q.name}_Ekstre.csv`),document.body.appendChild(ge),ge.click(),document.body.removeChild(ge)},ue=q=>{const ie=Ne(q.id),ae=window.open("","","height=800,width=1000");if(!ae)return;const be=`
      <html><head><title>Ekstre - ${q.name}</title>
      <style>
        body{font-family:'Helvetica',sans-serif;padding:20px;color:#333}
        h2{text-align:center;color:#4f46e5;margin-bottom:5px}
        h4{text-align:center;color:#666;margin-top:0;margin-bottom:30px}
        table{width:100%;border-collapse:collapse;font-size:11px;margin-top:20px}
        th{background:#f3f4f6;border:1px solid #d1d5db;padding:8px;text-align:left}
        td{border:1px solid #d1d5db;padding:6px}
        .right{text-align:right}
        .payment-row{background-color:#f0fdf4} 
        .sale-row{background-color:#fff}
        .bold{font-weight:bold}
      </style>
      </head><body>
        <h2>${q.name}</h2>
        <h4 style="text-align:center;color:#666">Hesap Ekstresi</h4>
        <table>
          <thead>
            <tr><th>Tarih</th><th>Belge No</th><th>Aklama</th><th class="right">Miktar</th><th class="right">B.Fiyat</th><th class="right">deme (Alnan)</th><th class="right">Tutar (Bor)</th><th class="right">Bakiye</th></tr>
          </thead>
          <tbody>
            ${ie.map(ge=>`
              <tr class="${ge.action==="TAHSLAT"?"payment-row":"sale-row"}">
                <td>${ge.date}</td>
                <td>${ge.docNo}</td>
                <td>${ge.desc}</td>
                <td class="right">${ge.qty}</td>
                <td class="right">${ge.unitPrice!=="-"?ys(ge.unitPrice):"-"}</td>
                <td class="right">${ge.borc>0?ys(ge.borc):"-"}</td>
                <td class="right">${ge.alacak>0?ys(ge.alacak):"-"}</td>
                <td class="right bold" style="color:${ge.balance>0?"#dc2626":"#059669"}">${ys(ge.balance)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </body></html>
    `;ae.document.open(),ae.document.write(be),ae.document.close(),ae.setTimeout(()=>{ae.focus(),ae.print()},500)};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(Ln.Lock,{})," Yetkisiz Eriim"]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-0 w-24 focus:ring-0 text-gray-600",value:_.start,onChange:q=>T({..._,start:q.target.value})}),c.jsx("span",{className:"text-gray-300",children:"-"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-0 w-24 focus:ring-0 text-gray-600",value:_.end,onChange:q=>T({..._,end:q.target.value})})]}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(kj,{checked:x,onChange:y,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:()=>Y(!0),className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Ln.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:o.map(q=>{const ie=f.filter(be=>{const ge=be.customerId===q.id;let je=!0;return _.start&&be.date<_.start&&(je=!1),_.end&&be.date>_.end&&(je=!1),ge&&je}).sort((be,ge)=>new Date(ge.date)-new Date(be.date)),ae=de(q.id);return c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(Ln.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:q.name}),c.jsx("p",{className:"text-xs text-gray-500",children:q.company})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${ae>0?"text-red-500":"text-emerald-600"}`,children:ys(ae)}),c.jsx("span",{className:"text-[9px] text-gray-400 block",children:ae>0?"(Borlu)":"(Alacakl/Tam)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>M(q),className:"flex items-center px-4 py-2 bg-emerald-100 text-emerald-700 rounded-xl hover:bg-emerald-200 transition-colors text-xs font-bold shadow-sm border border-emerald-200",children:[c.jsx(Ln.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"deme Al"})]}),c.jsxs("button",{onClick:()=>L(q),className:"flex items-center px-4 py-2 bg-indigo-100 text-indigo-700 rounded-xl hover:bg-indigo-200 transition-colors text-xs font-bold shadow-sm border border-indigo-200",children:[c.jsx(Ln.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Sat Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>ue(q),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",title:"Rapor",children:c.jsx(Ln.Printer,{})}),c.jsx("button",{onClick:()=>we(q),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-gray-50 rounded-lg transition-all",title:"Excel",children:c.jsx(Ln.Download,{})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Ge(q.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(Ln.Trash,{})})]})]})]})]}),ie.length>0?c.jsx("div",{className:"bg-white/40",children:ie.map(be=>{const ge=be.type==="payment",je=ge?be.amount:Q(be.items);return c.jsxs("div",{className:`px-6 py-3 border-b border-gray-50 flex items-center justify-between hover:bg-white transition-colors group ${ge?"bg-emerald-50/30":""}`,children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:["                                                    ",c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${ge?"bg-emerald-400":"bg-indigo-400"}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:ge?"TAHSLAT":"SATI"}),c.jsxs("span",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-1.5 rounded border border-gray-200",children:["#",be.docNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:Ij(be.date)})]}),c.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ge?`${be.paymentMethod} ile deme - ${be.note||""}`:`${be.items?.length||0} Kalem rn`})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${ge?"text-emerald-600":"text-red-500"}`,children:[ge?"-":"+",ys(je)]}),!ge&&c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>V(be,q),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ln.Edit,{})}),c.jsx("button",{onClick:()=>te(be.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx(Ln.Trash,{})})]}),ge&&c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>J(be,q),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Ln.Edit,{})}),c.jsx("button",{onClick:()=>te(be.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(Ln.Trash,{})})]})]})]},be.id)})}):c.jsx("div",{className:"px-6 py-8 text-center text-xs text-gray-400 italic",children:"Hareket bulunamad."})]},q.id)})}),X&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Yeni Mteri"}),c.jsxs("form",{onSubmit:qe,className:"space-y-4",children:[c.jsx("input",{required:!0,placeholder:"Ad Soyad / Firma nvan",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.name,onChange:q=>A({...w,name:q.target.value})}),c.jsx("input",{placeholder:"Firma (Opsiyonel)",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.company,onChange:q=>A({...w,company:q.target.value})}),c.jsx("input",{placeholder:"Telefon",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.phone,onChange:q=>A({...w,phone:q.target.value})}),c.jsx("input",{placeholder:"E-Posta",className:"w-full border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 bg-white/50",value:w.email,onChange:q=>A({...w,email:q.target.value})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>Y(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 font-bold text-sm",children:"Kaydet"})]})]})]})}),G&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm",children:c.jsxs("div",{className:"w-full max-w-md bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:R?"deme Dzenle":"deme Al"}),c.jsx("p",{className:"text-xs text-gray-500 mb-6",children:oe?.name}),c.jsxs("form",{onSubmit:fe,className:"space-y-6",children:[c.jsx("div",{className:"grid grid-cols-3 gap-2 p-1 bg-gray-100 rounded-xl",children:["Nakit","Kredi Kart","ek"].map(q=>c.jsx("button",{type:"button",onClick:()=>j({...D,type:q}),className:`py-2 text-xs font-bold rounded-lg transition-all ${D.type===q?"bg-white text-emerald-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:q},q))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsx("input",{type:"number",autoFocus:!0,required:!0,className:"w-full border border-emerald-200 rounded-2xl px-4 py-4 text-2xl font-bold text-emerald-700 focus:ring-2 focus:ring-emerald-500 bg-emerald-50/30 text-center",placeholder:"0.00",value:D.amount,onChange:q=>j({...D,amount:q.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",placeholder:"Belge No",value:D.docNo,onChange:q=>j({...D,docNo:q.target.value})}),c.jsx("input",{type:"date",required:!0,className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm",value:D.date,onChange:q=>j({...D,date:q.target.value})})]}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-3 py-2.5 text-sm mt-3",placeholder:"Not (Opsiyonel)",value:D.note,onChange:q=>j({...D,note:q.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:()=>he(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl font-bold text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-emerald-600 text-white rounded-xl shadow-lg shadow-emerald-200 hover:bg-emerald-700 font-bold text-sm",children:"Kaydet"})]})]})]})}),N&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 bg-gray-900/30 backdrop-blur-sm",children:c.jsx("div",{className:"w-full max-w-5xl h-[95vh] flex flex-col bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:c.jsxs("form",{onSubmit:ce,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:xe?"Sat Dzenle":"Yeni Sat"}),c.jsx("button",{type:"button",onClick:()=>U(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 text-gray-700",value:ye.docNo,onChange:q=>I({...ye,docNo:q.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 text-gray-700",value:ye.date,onChange:q=>I({...ye,date:q.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500 text-gray-700",value:ye.description,onChange:q=>I({...ye,description:q.target.value})})]})]}),c.jsxs("table",{className:"w-full text-left text-sm border-separate border-spacing-y-2",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 uppercase pl-2",children:[c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{children:ye.items.map((q,ie)=>c.jsxs("tr",{className:"bg-gray-50 rounded-xl",children:[c.jsx("td",{className:"p-2",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded px-2 py-1.5 text-sm focus:ring-2 focus:ring-indigo-500 font-medium",placeholder:"rn Ad",value:q.name,onChange:ae=>Ce(ie,"name",ae.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded px-2 py-1.5 text-sm focus:ring-2 focus:ring-indigo-500 text-center [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:q.qty,onChange:ae=>Ce(ie,"qty",ae.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded px-2 py-1.5 text-sm focus:ring-2 focus:ring-indigo-500 text-right [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:q.unitPrice,onChange:ae=>Ce(ie,"unitPrice",ae.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded px-2 py-1.5 text-xs focus:ring-2 focus:ring-indigo-500",value:q.vatRate,onChange:ae=>Ce(ie,"vatRate",ae.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 text-right font-bold text-indigo-600",children:ys(_e(q))}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>Z(ie),className:"text-gray-400 hover:text-red-500",children:c.jsx(Ln.Trash,{})})})]},ie))})]}),c.jsx("button",{type:"button",onClick:De,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-2",children:"+ Yeni Satr"}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-64 p-6 bg-gray-50 rounded-2xl border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{children:ys(Ve(ye.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{children:ys(Ve(ye.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{className:"whitespace-nowrap",children:ys(Ve(ye.items).grandTotal)})]}),"                                    "]})})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200/50 flex flex-row-reverse gap-3 bg-gray-50/30",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600 shadow-lg shadow-indigo-200 text-white font-bold hover:bg-indigo-700 transition-all",children:"Kaydet"}),c.jsx("button",{type:"button",onClick:()=>U(!1),className:"px-6 py-3 rounded-xl text-gray-600 hover:bg-white hover:shadow-sm transition-all",children:"ptal"})]})]})})})]})}const Tn={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Check:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},Xv={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},Wv=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function Mj(){const[r,e]=re.useState(null),[s,i]=re.useState(!0),[o,d]=re.useState([]),[f,p]=re.useState([]),[x,y]=re.useState({start:"",end:""}),[_,T]=re.useState(!1),[N,U]=re.useState(!1),[X,Y]=re.useState(!1),[G,he]=re.useState({}),[oe,me]=re.useState({}),xe=re.useRef(null),[Te,ye]=re.useState(null),[I,w]=re.useState(null),[A,R]=re.useState({en:6,boy:4}),[C,D]=re.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]});if(re.useEffect(()=>{const Z=ss.onAuthStateChanged(ae=>{e(ae),i(!1)}),we=rs(wt(Ue,"customers"),ws("name","asc")),ue=An(we,ae=>{p(ae.docs.map(be=>({id:be.id,...be.data()})))}),q=rs(wt(Ue,"siparisler"),ws("createdAt","desc")),ie=An(q,ae=>{d(ae.docs.map(be=>({id:be.id,...be.data()})))});return()=>{Z(),ue(),ie()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const j=r?.email==="furkan@avci.jp",_e=Z=>{if(!Z)return;const we=new FileReader;we.onload=ue=>{const q=new Image;q.onload=()=>{const ie=document.createElement("canvas"),ae=800,be=800;let ge=q.width,je=q.height;ge>je?ge>ae&&(je*=ae/ge,ge=ae):je>be&&(ge*=be/je,je=be),ie.width=ge,ie.height=je,ie.getContext("2d").drawImage(q,0,0,ge,je);const gt=ie.toDataURL("image/jpeg",.8);D(fn=>({...fn,image:gt}))},q.src=ue.target.result},we.readAsDataURL(Z)},Ve=Z=>{Z.preventDefault(),Y(!0)},Q=()=>Y(!1),de=Z=>{Z.preventDefault(),Y(!1),Z.dataTransfer.files&&Z.dataTransfer.files[0]&&_e(Z.dataTransfer.files[0])},Ne=Z=>{Z.clipboardData.files&&Z.clipboardData.files[0]&&_e(Z.clipboardData.files[0])},qe=()=>{ye(null);const Z="SP-"+Date.now().toString().slice(-6);D({siparisNo:Z,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),R({en:6,boy:4}),T(!0)},Ge=Z=>{ye(Z),D({siparisNo:Z.siparisNo,customerId:Z.customerId,date:Z.date,note:Z.note||"",image:Z.image,items:Z.items||[]}),T(!0)},M=async Z=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await Ri(Ft(Ue,"siparisler",Z))}catch(we){alert(we.message)}},J=async Z=>{if(Z.preventDefault(),!C.customerId){alert("Ltfen bir mteri seiniz.");return}try{const we={...C,createdAt:Te?Te.createdAt:new Date().toISOString()};Te?await Js(Ft(Ue,"siparisler",Te.id),we):await Tr(wt(Ue,"siparisler"),{...we,productionStatus:{}}),T(!1)}catch(we){alert(we.message)}},fe=(Z,we,ue)=>{const q=[...C.items],ie=q[Z];if(ie[we]=ue,we==="en1"){const ae=parseFloat(ue);isNaN(ae)?ue===""&&(ie.en2=""):ie.en2=ae-A.en}if(we==="boy1"){const ae=parseFloat(ue);isNaN(ae)?ue===""&&(ie.boy2=""):ie.boy2=ae-A.boy}D({...C,items:q})},L=()=>{D({...C,items:[...C.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},V=Z=>{const we=C.items.filter((ue,q)=>q!==Z);D({...C,items:we})},te=(Z,we)=>{const ue=parseFloat(we)||0,q={...A,[Z]:ue};R(q);const ie=C.items.map(ae=>({...ae,en2:ae.en1?parseFloat(ae.en1)-q.en:ae.en2,boy2:ae.boy1?parseFloat(ae.boy1)-q.boy:ae.boy2}));D({...C,items:ie})},ce=Z=>{w(Z),U(!0)},Ce=async(Z,we)=>{if(!I)return;const ue=I.productionStatus||{},q=ue[Z]||{},ie={...ue,[Z]:{...q,[we]:!q[we]}};w({...I,productionStatus:ie}),await Js(Ft(Ue,"siparisler",I.id),{productionStatus:ie})},De=Z=>{const we=f.find(ie=>ie.id===Z.customerId)||{name:"Bilinmeyen Mteri"},ue=window.open("","","height=800,width=1000");if(!ue){alert("Pop-up engelleyiciyi kapatn.");return}const q=`
      <html><head><title>Sipari - ${Z.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 11px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; }
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: break-all; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 20px; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; border: 1px solid #eee; padding: 10px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${we.name}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${Z.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${Wv(Z.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 6%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 58%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- Sekil -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th>EKL</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
            </tr>
          </thead>
          <tbody>
            ${Z.items.map(ie=>`
              <tr>
                <td class="group-kasa">${ie.en1||"-"}</td>
                <td class="group-kasa">${ie.boy1||"-"}</td>
                <td class="group-kasa">${ie.genislik||"-"}</td>
                <td>${ie.takim||""}</td>
                <td class="col-desc">${ie.aciklama||""}</td>
                <td>${ie.sekil||""}</td>
                <td class="group-net"><strong>${ie.en2||""}</strong></td>
                <td class="group-net"><strong>${ie.boy2||""}</strong></td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${Z.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${Z.note}
          </div>
        `:""}

        ${Z.image?`
          <div class="door-image-container">
            <img src="${Z.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;ue.document.write(q),ue.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:Ne,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-2 py-1",children:[c.jsx("span",{className:"text-xs text-gray-400",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1",value:x.start,onChange:Z=>y({...x,start:Z.target.value})}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1",value:x.end,onChange:Z=>y({...x,end:Z.target.value})})]}),j&&c.jsxs("button",{onClick:qe,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Tn.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:f.map(Z=>{const we=o.filter(ue=>{const q=ue.customerId===Z.id;let ie=!0;return x.start&&(ie=ie&&ue.date>=x.start),x.end&&(ie=ie&&ue.date<=x.end),q&&ie});return we.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(Tn.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:Z.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[we.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:we.map(ue=>{const q=G[ue.id],ie=oe[ue.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:ue.image?c.jsx("img",{src:ue.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",ue.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:Wv(ue.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ue.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>he(ae=>({...ae,[ue.id]:!ae[ue.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[q?c.jsx(Tn.ChevronUp,{}):c.jsx(Tn.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>me(ae=>({...ae,[ue.id]:!ae[ue.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[ie?c.jsx(Tn.ChevronUp,{}):c.jsx(Tn.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>ce(ue),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(Tn.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>De(ue),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Tn.Printer,{})}),j&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>Ge(ue),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Tn.Edit,{})}),c.jsx("button",{onClick:()=>M(ue.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Tn.Trash,{})})]})]})]}),q&&c.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:ue.items?.map((ae,be)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:ae.aciklama||"-"}),c.jsx("td",{className:"py-2",children:ae.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[ae.en1||"-"," x ",ae.boy1||"-"," x ",ae.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[ae.en2," x ",ae.boy2]}),c.jsx("td",{className:"py-2",children:ae.sekil||"-"})]},be))})]})}),ie&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(Xv).map(([ae,be])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:be.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:be.steps.map(ge=>{const je=ue.productionStatus?.[ae]?.[ge.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:je?"text-purple-700 font-medium":"text-gray-400",children:ge.label}),je?c.jsx(Tn.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(Tn.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},ge.id)})})]},ae))})})]},ue.id)})})]},Z.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:J,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Te?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:C.siparisNo,onChange:Z=>D({...C,siparisNo:Z.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri Se"}),c.jsxs("select",{required:!0,value:C.customerId,onChange:Z=>D({...C,customerId:Z.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300",children:[c.jsx("option",{value:"",children:"Seiniz..."}),f.map(Z=>c.jsxs("option",{value:Z.id,children:[Z.name," (",Z.company,")"]},Z.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:C.date,onChange:Z=>D({...C,date:Z.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${X?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:Ve,onDragLeave:Q,onDrop:de,children:[c.jsx("input",{ref:xe,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Z=>_e(Z.target.files[0])}),C.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:C.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Tn.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:X?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:C.note,onChange:Z=>D({...C,note:Z.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:A.en,onChange:Z=>te("en",Z.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:A.boy,onChange:Z=>te("boy",Z.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:C.items.map((Z,we)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:Z.en1,onChange:ue=>fe(we,"en1",ue.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:Z.boy1,onChange:ue=>fe(we,"boy1",ue.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:Z.genislik,onChange:ue=>fe(we,"genislik",ue.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:Z.takim,onChange:ue=>fe(we,"takim",ue.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:Z.aciklama,onChange:ue=>fe(we,"aciklama",ue.target.value),onInput:ue=>{ue.target.style.height="auto",ue.target.style.height=ue.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${we}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:Z.sekil,onChange:ue=>fe(we,"sekil",ue.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${we}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:Z.en2,onChange:ue=>fe(we,"en2",ue.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:Z.boy2,onChange:ue=>fe(we,"boy2",ue.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>V(we),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},we))})]}),c.jsx("button",{type:"button",onClick:L,className:"w-full py-2 bg-gray-50/50 text-gray-500 text-xs font-bold uppercase tracking-wide hover:bg-indigo-50 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:Te?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),N&&I&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",I.siparisNo]})]}),c.jsx("button",{onClick:()=>U(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(Xv).map(([Z,we])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:we.title}),c.jsx("div",{className:"space-y-2",children:we.steps.map(ue=>{const q=I.productionStatus?.[Z]?.[ue.id];return c.jsxs("button",{onClick:()=>Ce(Z,ue.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${q?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:ue.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${q?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:q&&c.jsx(Tn.Check,{})})]},ue.id)})})]},Z))})]})})]})}const ma={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),ChevronDown:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})},Oj=r=>r?new Date(r).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",vm=({options:r,selected:e,onChange:s,placeholder:i="Seiniz...",isMulti:o=!1,onDeleteItem:d=null,allowNew:f=!1})=>{const[p,x]=re.useState(!1),[y,_]=re.useState(""),T=re.useRef(null);re.useEffect(()=>{const G=he=>{T.current&&!T.current.contains(he.target)&&x(!1)};return document.addEventListener("mousedown",G),()=>document.removeEventListener("mousedown",G)},[]);const N=G=>{if(o){const he=e.includes(G)?e.filter(oe=>oe!==G):[...e,G];s(he)}else s(G),x(!1),_("")},U=G=>{_(G.target.value),f&&s(G.target.value)},X=o?e.length>0?`(${e.length})`:"":e||i,Y=r.filter(G=>G.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":y.toLowerCase()));return c.jsxs("div",{className:"relative",ref:T,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm",placeholder:i,value:e,onChange:U,onFocus:()=>x(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>x(!p),children:c.jsx(ma.ChevronDown,{})})]}):c.jsxs("button",{onClick:()=>x(!p),className:`flex items-center px-4 py-2 rounded-xl text-xs font-bold transition-all border backdrop-blur-md ${o&&e.length>0||!o&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white/60 border-gray-200 text-gray-600 hover:bg-white/80"}`,children:[o&&c.jsx(ma.Filter,{}),c.jsx("span",{className:o?"ml-2":"",children:o?`${i} ${X}`:X}),!o&&c.jsx("span",{className:"ml-2",children:c.jsx(ma.ChevronDown,{})})]}),p&&c.jsxs("div",{className:"absolute right-0 mt-2 w-64 max-h-80 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-50 p-2",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:y,onChange:G=>_(G.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"Kaytl rnler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[Y.map(G=>{const he=o?e.includes(G):e===G;return c.jsxs("div",{onClick:()=>f?s(G):N(G),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${he?"bg-indigo-600 text-white shadow-md":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsx("div",{className:"flex items-center flex-grow overflow-hidden",children:c.jsx("span",{className:"truncate",children:G})}),d&&c.jsx("button",{onClick:oe=>{oe.stopPropagation(),d(G)},className:`ml-2 p-1.5 rounded-md transition-colors ${he?"text-indigo-200 hover:text-white hover:bg-indigo-500":"text-gray-300 hover:text-red-500 hover:bg-red-50"}`,title:"Bu rn sil",children:c.jsx(ma.Trash,{})})]},G)}),Y.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),o&&e.length>0&&c.jsx("button",{onClick:()=>s([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},Zv=({item:r,isAdd:e,onEdit:s,onDelete:i})=>c.jsxs("div",{className:"bg-white/60 backdrop-blur-sm shadow-sm border border-white/50 rounded-xl p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:r.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:Oj(r.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:r.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:r.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>s(r),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(ma.Edit,{})}),c.jsx("button",{onClick:()=>i(r.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(ma.Trash,{})})]})]})]});function Vj(){const[r,e]=re.useState(null),[s,i]=re.useState(!0),[o,d]=re.useState([]),[f,p]=re.useState({start:"",end:""}),[x,y]=re.useState(!0),[_,T]=re.useState(!0),[N,U]=re.useState(!1),[X,Y]=re.useState([]),[G,he]=re.useState(null),[oe,me]=re.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"adet",date:new Date().toISOString().split("T")[0]}),xe=re.useMemo(()=>[...new Set(o.map(j=>j.productName))].sort(),[o]);re.useEffect(()=>{const j=ss.onAuthStateChanged(Q=>{e(Q),i(!1)}),_e=rs(wt(Ue,"inventory_movements"),ws("date","desc")),Ve=An(_e,Q=>{d(Q.docs.map(de=>({id:de.id,...de.data()})))});return()=>{j(),Ve()}},[]);const Te=re.useMemo(()=>o.filter(j=>{let _e=!0;if(f.start&&(_e=_e&&j.date>=f.start),f.end&&(_e=_e&&j.date<=f.end),j.productType==="raw"&&!x||(j.productType==="manufactured"||j.productType==="uretilmis")&&!_)return!1;let Ve=!0;return X.length>0&&(Ve=X.includes(j.productName)),_e&&Ve}),[o,f,x,_,X]),ye=Te.filter(j=>j.action==="add"),I=Te.filter(j=>j.action==="remove"),w=async j=>{j.preventDefault();try{const _e={...oe,quantity:Number(oe.quantity),createdAt:new Date().toISOString()};G?await Js(Ft(Ue,"inventory_movements",G),_e):await Tr(wt(Ue,"inventory_movements"),_e),D()}catch(_e){alert("Hata: "+_e.message)}},A=async j=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await Ri(Ft(Ue,"inventory_movements",j))},R=async j=>{if(window.confirm(`"${j}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const _e=rs(wt(Ue,"inventory_movements"),bj("productName","==",j)),Ve=await Ej(_e),Q=Aj(Ue);Ve.forEach(de=>{Q.delete(de.ref)}),await Q.commit(),X.includes(j)&&Y(de=>de.filter(Ne=>Ne!==j)),oe.productName===j&&me(de=>({...de,productName:""}))}catch(_e){alert("Silme hatas: "+_e.message)}},C=j=>{he(j.id),me({productType:j.productType,productName:j.productName,action:j.action,quantity:j.quantity,unit:j.unit,date:j.date}),U(!0)},D=()=>{U(!1),he(null),me({productType:"raw",productName:"",action:"add",quantity:"",unit:"adet",date:new Date().toISOString().split("T")[0]})};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-40",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-0 w-24 focus:ring-0 text-gray-600",value:f.start,onChange:j=>p({...f,start:j.target.value})}),c.jsx("span",{className:"text-gray-300",children:"-"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-0 w-24 focus:ring-0 text-gray-600",value:f.end,onChange:j=>p({...f,end:j.target.value})})]}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>y(!x),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${x?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>T(!_),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${_?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(vm,{options:xe,selected:X,onChange:Y,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>U(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(ma.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[ye.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[ye.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),ye.map(j=>c.jsx(Zv,{item:j,isAdd:!0,onEdit:C,onDelete:A},j.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[I.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[I.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),I.map(j=>c.jsx(Zv,{item:j,isAdd:!1,onEdit:C,onDelete:A},j.id))]})]})]}),N&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-xl flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 overflow-hidden max-h-[90vh]",children:c.jsxs("form",{onSubmit:w,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:G?"Hareketi Dzenle":"Hareket Ekle"}),c.jsx("button",{type:"button",onClick:D,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsxs("div",{className:"p-8 overflow-y-auto custom-scrollbar space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",onClick:()=>me({...oe,productType:"raw"}),className:`px-4 py-2 rounded-lg text-sm font-bold border transition-all ${oe.productType==="raw"?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:"Ham Madde"}),c.jsx("button",{type:"button",onClick:()=>me({...oe,productType:"manufactured"}),className:`px-4 py-2 rounded-lg text-sm font-bold border transition-all ${oe.productType==="manufactured"?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:"retilmi"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(vm,{options:xe,selected:oe.productName,onChange:j=>me({...oe,productName:j}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:R})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>me({...oe,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${oe.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>me({...oe,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${oe.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx("input",{type:"number",required:!0,min:"0",className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm font-bold text-gray-900 focus:ring-2 focus:ring-indigo-500/50 shadow-sm",value:oe.quantity,onChange:j=>me({...oe,quantity:j.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(vm,{options:["adet","kg","m2","m3","mt","paket"],selected:oe.unit,onChange:j=>me({...oe,unit:j}),placeholder:"Birim",isMulti:!1})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx("input",{type:"date",required:!0,className:"w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-indigo-500/50 shadow-sm",value:oe.date,onChange:j=>me({...oe,date:j.target.value})})]})]}),c.jsxs("div",{className:"px-8 py-6 border-t border-gray-200 bg-white/50 flex flex-row-reverse gap-3",children:[c.jsx("button",{type:"submit",className:"px-8 py-3 rounded-xl bg-indigo-600/90 text-white font-bold shadow-lg hover:bg-indigo-600 hover:shadow-indigo-300 backdrop-blur-sm transition-all text-sm",children:G?"Gncelle":"Kaydet"}),c.jsx("button",{type:"button",onClick:D,className:"px-6 py-3 rounded-xl text-gray-600 font-medium hover:bg-white hover:shadow-sm transition-all border border-transparent hover:border-gray-200 text-sm",children:"ptal"})]})]})})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const $m={Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),Box:()=>c.jsx("svg",{className:"w-8 h-8 opacity-20",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})})},Lj=({data:r,keys:e})=>{if(!r||r.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const s=300,i=800,o=40,d=i-o*2,f=s-o*2,p=r.flatMap(_=>e.map(T=>_[T]||0)),x=Math.max(...p,10)*1.1,y=["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${i} ${s}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const T=s-o-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:o,y1:T,x2:i-o,y2:T,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:o-10,y:T+4,textAnchor:"end",fontSize:"10",fill:"#6B7280",children:Math.round(x/4*_)})]},_)}),e.map((_,T)=>{const N=y[T%y.length],U=r.map((X,Y)=>{const G=o+Y*(d/(r.length-1||1)),he=X[_]||0,oe=s-o-he/x*f;return`${G},${oe}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:N,strokeWidth:"3",points:U,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 2px 2px rgba(0,0,0,0.1))"}),r.map((X,Y)=>{const G=o+Y*(d/(r.length-1||1)),he=X[_]||0,oe=s-o-he/x*f;return c.jsx("circle",{cx:G,cy:oe,r:"4",fill:"white",stroke:N,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${X.month} - ${_}: ${he}`})},Y)})]},_)}),r.map((_,T)=>{const N=o+T*(d/(r.length-1||1));return c.jsx("text",{x:N,y:s-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},T)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,T)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-600 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:y[T%y.length]}}),_]},_))})]})},Pj=({name:r,qty:e,unit:s,type:i})=>{const o=i==="raw",d=o?"bg-amber-50/40 border-amber-200/40 shadow-amber-100/20":"bg-indigo-50/40 border-indigo-200/40 shadow-indigo-100/20",f=o?"text-amber-900":"text-indigo-900",p=o?"text-amber-700":"text-indigo-700",x=o?"bg-amber-500/10 text-amber-700 border-amber-200/50":"bg-indigo-500/10 text-indigo-700 border-indigo-200/50",y=o?"Ham Madde":"retilmi";return c.jsxs("div",{className:`relative backdrop-blur-xl rounded-3xl border p-6 shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 overflow-hidden group ${d}`,children:[c.jsx("div",{className:`absolute -top-10 -right-10 w-32 h-32 rounded-full blur-3xl opacity-20 ${o?"bg-amber-400":"bg-indigo-400"}`}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("h3",{className:`text-sm font-bold uppercase mb-2 tracking-wide ${p} opacity-80 pr-2 truncate`,children:r}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-6",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${f}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-sm font-semibold ${p} opacity-60`,children:s})]})]}),c.jsx("div",{className:`absolute bottom-4 right-4 px-3 py-1.5 rounded-xl text-[10px] font-bold uppercase tracking-wider border backdrop-blur-md shadow-sm ${x}`,children:y}),c.jsx("div",{className:`absolute bottom-4 left-4 transform opacity-10 scale-125 ${f}`,children:c.jsx($m.Box,{})})]})};function Uj(){const[r,e]=re.useState([]),[s,i]=re.useState(!0),[o,d]=re.useState(!0),[f,p]=re.useState(!0);re.useEffect(()=>{const T=rs(wt(Ue,"inventory_movements"),ws("date","asc")),N=An(T,U=>{const X=U.docs.map(Y=>Y.data());e(X),i(!1)});return()=>N()},[]);const x=re.useMemo(()=>{const T={};return r.forEach(N=>{const U=Number(N.quantity)||0,X=N.action==="add"?U:-U;T[N.productName]||(T[N.productName]={name:N.productName,qty:0,unit:N.unit,type:N.productType||"raw"}),T[N.productName].qty+=X,T[N.productName].type=N.productType||T[N.productName].type}),Object.values(T)},[r]),y=re.useMemo(()=>x.filter(T=>!(T.type==="raw"&&!o||(T.type==="manufactured"||T.type==="uretilmis"||T.type==="manufactured")&&!f)),[x,o,f]),_=re.useMemo(()=>{const T={},N={},U=y.sort((Y,G)=>G.qty-Y.qty).slice(0,5).map(Y=>Y.name);return U.length===0?{data:[],keys:[]}:(U.forEach(Y=>N[Y]=0),r.forEach(Y=>{if(!U.includes(Y.productName))return;const G=Y.date.slice(0,7),he=Number(Y.quantity)||0,oe=Y.action==="add"?he:-he;N[Y.productName]||(N[Y.productName]=0),N[Y.productName]+=oe,T[G]={...N,month:G}}),{data:Object.values(T).sort((Y,G)=>Y.month.localeCompare(G.month)),keys:U})},[r,y]);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/40 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsxs("button",{onClick:()=>d(!o),className:`
              flex items-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all mr-2 border
              ${o?"bg-amber-100/80 text-amber-700 border-amber-200 shadow-sm":"bg-transparent text-gray-400 border-transparent hover:bg-white/30"}
            `,children:[c.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 shadow-sm ${o?"bg-amber-500":"bg-gray-300"}`}),"Ham Madde"]}),c.jsxs("button",{onClick:()=>p(!f),className:`
              flex items-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all border
              ${f?"bg-indigo-100/80 text-indigo-700 border-indigo-200 shadow-sm":"bg-transparent text-gray-400 border-transparent hover:bg-white/30"}
            `,children:[c.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 shadow-sm ${f?"bg-indigo-500":"bg-gray-300"}`}),"retilmi"]})]})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:y.length>0?y.map((T,N)=>c.jsx(Pj,{name:T.name,qty:T.qty,unit:T.unit,type:T.type},N)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx($m.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."}),c.jsx("span",{className:"text-xs mt-1 text-gray-300",children:"Ltfen filtreleri veya kaytlar kontrol ediniz."})]})}),_.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-indigo-600 border border-indigo-50",children:c.jsx($m.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"rn Stok Deiimi"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Seili rnlerin zaman iindeki deiimi"})]})]}),c.jsxs("select",{className:"bg-white/50 border-none text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",children:[c.jsx("option",{children:"Son 12 Ay"}),c.jsx("option",{children:"Bu Yl"})]})]}),c.jsx(Lj,{data:_.data,keys:_.keys})]})]})}const ua={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),Document:()=>c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Calendar:()=>c.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})};function zj(){const[r,e]=re.useState(null),[s,i]=re.useState(!0),[o,d]=re.useState([]),[f,p]=re.useState(""),[x,y]=re.useState(!1),[_,T]=re.useState(null),[N,U]=re.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",items:[]});if(re.useEffect(()=>{const w=ss.onAuthStateChanged(C=>{e(C),i(!1)}),A=rs(wt(Ue,"teklifler"),ws("createdAt","desc")),R=An(A,C=>{d(C.docs.map(D=>({id:D.id,...D.data()})))});return()=>{w(),R()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(ua.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",r?.email,")"]})]});const X=()=>{T(null);const w="TK-"+Date.now().toString().slice(-6),A=new Date;A.setDate(A.getDate()+7),U({teklifNo:w,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:A.toISOString().split("T")[0],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),y(!0)},Y=w=>{T(w),U({teklifNo:w.teklifNo,teklifName:w.teklifName||"",customerName:w.customerName,date:w.date,validityDate:w.validityDate||"",items:w.items||[]}),y(!0)},G=async w=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await Ri(Ft(Ue,"teklifler",w))}catch(A){alert(A.message)}},he=async w=>{if(w.preventDefault(),!N.customerName){alert("Ltfen mteri ad giriniz.");return}try{const A={...N,createdAt:_?_.createdAt:new Date().toISOString()};_?await Js(Ft(Ue,"teklifler",_.id),A):await Tr(wt(Ue,"teklifler"),A),y(!1)}catch(A){alert(A.message)}},oe=(w,A,R)=>{const C=w*A,D=C*(R/100);return C+D},me=(w,A,R)=>{const C=[...N.items],D=C[w];D[A]=R;const j=parseFloat(A==="quantity"?R:D.quantity),_e=parseFloat(A==="price"?R:D.price),Ve=parseFloat(A==="vat"?R:D.vat);!isNaN(j)&&!isNaN(_e)&&!isNaN(Ve)&&(D.total=oe(j,_e,Ve)),U({...N,items:C})},xe=()=>{U({...N,items:[...N.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},Te=w=>{const A=N.items.filter((R,C)=>C!==w);U({...N,items:A})},ye=()=>{const w=N.items.reduce((R,C)=>R+C.quantity*C.price,0),A=N.items.reduce((R,C)=>R+C.quantity*C.price*(C.vat/100),0);return{subtotal:w,totalVAT:A,grandTotal:w+A}},I=w=>{const A=window.open("","","height=800,width=1000");if(!A){alert("Pop-up engelleyiciyi kapatn.");return}const R=w.items.reduce((_e,Ve)=>_e+Ve.quantity*Ve.price,0),C=w.items.reduce((_e,Ve)=>_e+Ve.quantity*Ve.price*(Ve.vat/100),0),D=R+C,j=`
      <html><head><title>Teklif - ${w.teklifNo}</title>
      <style>
        body{font-family:'Helvetica',sans-serif;padding:40px;color:#333;line-height:1.6}
        .header-container { display: flex; justify-content: space-between; margin-bottom: 50px; padding-bottom: 20px; border-bottom: 2px solid #eee; }
        .company-info { width: 50%; }
        .company-name { font-size: 26px; font-weight: bold; color: #4F46E5; margin-bottom: 10px; text-transform: uppercase; }
        .company-details { font-size: 12px; color: #555; line-height: 1.6; }
        .meta-info { width: 40%; text-align: right; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #ddd; letter-spacing: 2px; margin-bottom: 20px; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .meta-table td { padding: 5px 0; border-bottom: 1px solid #f0f0f0; }
        .meta-label { font-weight: bold; color: #666; }
        .meta-value { font-weight: bold; color: #333; }
        
        .customer-box { background: #f9fafb; padding: 20px; border-radius: 8px; margin-bottom: 40px; border: 1px solid #eee; }
        .customer-label { font-size: 10px; font-weight: bold; text-transform: uppercase; color: #888; letter-spacing: 1px; margin-bottom: 5px; }
        .customer-name { font-size: 18px; font-weight: bold; color: #333; }

        table.items {width:100%;border-collapse:collapse;font-size:12px;margin-bottom:30px}
        table.items th{background:#4F46E5;color:white;padding:12px 8px;text-align:left;font-weight:bold;text-transform:uppercase}
        table.items td{border-bottom:1px solid #eee;padding:12px 8px;}
        .text-right { text-align: right; }
        .text-center { text-align: center; }
        
        .totals-container { float: right; width: 300px; margin-top: 20px; }
        .total-row { display: flex; justify-content: space-between; padding: 8px 0; font-size: 13px; }
        .grand-total { font-size: 18px; font-weight: bold; color: #4F46E5; border-top: 2px solid #eee; padding-top: 15px; margin-top: 10px; }
        
        .footer { margin-top: 100px; border-top: 1px solid #eee; padding-top: 20px; font-size: 10px; color: #999; text-align: center; clear: both; }
      </style>
      </head><body>
        
        <div class="header-container">
          <div class="company-info">
            <div class="company-name">irket Adnz A..</div>
            <div class="company-details">
              Adres: rnek Mah. Sanayi Cad. No:123<br>
              stanbul, Trkiye<br>
              Tel: +90 212 123 45 67<br>
              E-posta: info@sirketadiniz.com
            </div>
          </div>
          <div class="meta-info">
            <div class="invoice-title">TEKLF</div>
            <table class="meta-table" align="right">
              <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${w.teklifNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td class="meta-value">${w.date}</td></tr>
              <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${w.validityDate}</td></tr>
            </table>
          </div>
        </div>

        <div class="customer-box">
          <div class="customer-label">Sayn</div>
          <div class="customer-name">${w.customerName}</div>
        </div>

        <table class="items">
          <thead>
            <tr>
              <th width="40%">Aklama</th>
              <th class="text-center">Miktar</th>
              <th class="text-right">Birim Fiyat</th>
              <th class="text-center">KDV %</th>
              <th class="text-right">Tutar</th>
            </tr>
          </thead>
          <tbody>
            ${w.items.map(_e=>`
              <tr>
                <td>${_e.description}</td>
                <td class="text-center">${_e.quantity}</td>
                <td class="text-right">${Number(_e.price).toFixed(2)} </td>
                <td class="text-center">%${_e.vat}</td>
                <td class="text-right"><strong>${Number(_e.total).toFixed(2)} </strong></td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="totals-container">
          <div class="total-row"><span>Ara Toplam:</span> <span>${R.toFixed(2)} </span></div>
          <div class="total-row"><span>Toplam KDV:</span> <span>${C.toFixed(2)} </span></div>
          <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${D.toFixed(2)} </span></div>
        </div>

        <div class="footer">
          Bu belge elektronik ortamda retilmitir. Geerlilik tarihine kadar onaylanmas durumunda balaycl vardr.
        </div>

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;A.document.write(j),A.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 rounded-lg border border-gray-200",children:[c.jsx(ua.Calendar,{}),c.jsx("input",{type:"month",className:"ml-2 bg-transparent border-none focus:ring-0 text-sm text-gray-700 p-0",value:f,onChange:w=>p(w.target.value)})]}),c.jsxs("button",{onClick:X,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(ua.Plus,{})}),"Teklif Olutur"]})]})]}),c.jsxs("div",{className:"space-y-4",children:[o.length===0&&c.jsx("div",{className:"text-center text-gray-500 py-10",children:"Henz kaytl teklif yok."}),o.filter(w=>f?w.date.startsWith(f):!0).map(w=>{const A=w.items?.reduce((R,C)=>R+(C.total||0),0)||0;return c.jsxs("div",{className:"bg-white shadow-md hover:shadow-lg rounded-xl border border-gray-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 transition-all",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600",children:c.jsx(ua.Document,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:w.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:["#",w.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.customerName}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Tarih: ",w.date,"  Geerlilik: ",w.validityDate]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("span",{className:"block text-xl font-bold text-emerald-600",children:[A.toLocaleString("tr-TR",{minimumFractionDigits:2})," "]}),c.jsx("span",{className:"text-xs text-gray-400 uppercase",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>I(w),className:"p-2 text-gray-400 hover:text-indigo-600 bg-gray-50 rounded-lg hover:bg-white shadow-sm border border-transparent hover:border-gray-200 transition-all",children:c.jsx(ua.Printer,{})}),c.jsx("button",{onClick:()=>Y(w),className:"p-2 text-gray-400 hover:text-blue-600 bg-gray-50 rounded-lg hover:bg-white shadow-sm border border-transparent hover:border-gray-200 transition-all",children:c.jsx(ua.Edit,{})}),c.jsx("button",{onClick:()=>G(w.id),className:"p-2 text-gray-400 hover:text-red-600 bg-gray-50 rounded-lg hover:bg-white shadow-sm border border-transparent hover:border-gray-200 transition-all",children:c.jsx(ua.Trash,{})})]})]})]},w.id)})]}),x&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-5xl h-[90vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:he,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:_?"Teklifi Dzenle":"Yeni Teklif Olutur"}),c.jsx("button",{type:"button",onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 mb-8 bg-white/50 p-6 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Teklif No"}),c.jsx("input",{disabled:!0,value:N.teklifNo,className:"w-full bg-gray-100/50 border border-gray-200 rounded-lg px-3 py-2.5 text-sm"})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Teklif Ad (Tanmlayc)"}),c.jsx("input",{required:!0,placeholder:"rn: Mutfak Dolab Projesi",className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",value:N.teklifName,onChange:w=>U({...N,teklifName:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Mteri Ad / Firma"}),c.jsx("input",{required:!0,placeholder:"Mteri ad giriniz...",className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",value:N.customerName,onChange:w=>U({...N,customerName:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:N.date,onChange:w=>U({...N,date:w.target.value}),className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm"})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Geerlilik Tarihi"}),c.jsx("input",{type:"date",required:!0,value:N.validityDate,onChange:w=>U({...N,validityDate:w.target.value}),className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden mb-8 shadow-sm bg-white/40",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider w-32",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider w-32",children:"Tutar"}),c.jsx("th",{className:"w-10"})]})}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:N.items.map((w,A)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"text",placeholder:"Hizmet/rn aklamas",className:"w-full border-none bg-transparent focus:ring-0 text-sm p-1",value:w.description,onChange:R=>me(A,"description",R.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",min:"1",className:"w-full text-center border border-gray-200 bg-gray-50 rounded px-2 py-1 text-sm focus:bg-white",value:w.quantity,onChange:R=>me(A,"quantity",R.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full text-right border border-gray-200 bg-gray-50 rounded px-2 py-1 text-sm focus:bg-white",value:w.price,onChange:R=>me(A,"price",R.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsxs("select",{className:"w-full text-center border-none bg-transparent focus:ring-0 text-sm cursor-pointer",value:w.vat,onChange:R=>me(A,"vat",R.target.value),children:[c.jsx("option",{value:"0",children:"0%"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"10%"}),c.jsx("option",{value:"20",children:"20%"})]})}),c.jsxs("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:[Number(w.total).toFixed(2)," "]}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>Te(A),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-xl",children:""})})})]},A))})]}),c.jsx("button",{type:"button",onClick:xe,className:"w-full py-3 bg-gray-50/50 text-gray-500 text-xs font-bold uppercase tracking-wide hover:bg-indigo-50 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/50 p-6 rounded-xl border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsxs("span",{className:"font-medium",children:[ye().subtotal.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsxs("span",{className:"font-medium",children:[ye().totalVAT.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 border-t border-gray-200 pt-3",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsxs("span",{className:"text-indigo-600",children:[ye().grandTotal.toFixed(2)," "]})]})]})})]}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:_?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})})]})}const es={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},Bj="86715dfc9d1046e7e8a0d95a",Hj=`https://v6.exchangerate-api.com/v6/${Bj}/latest/USD`,bm=({ops:r,onChange:e,allowRefs:s=!1,rows:i=[],constants:o=[],constantsMap:d})=>{const f=(y,_,T)=>{const N=[...r];N[y]={...N[y],[_]:T},_==="type"&&T!=="op"&&(N[y].value=""),e(N)},p=()=>{e([...r,{type:"op",value:"+"},{type:"num",value:0}])},x=y=>{if(y===0)return;const _=[...r];_.splice(y,2),e(_)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-3 py-2",children:[r.map((y,_)=>_%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-gray-100 border-0 rounded-lg text-center font-bold text-gray-600 w-12 py-2 focus:ring-2 focus:ring-indigo-500 cursor-pointer hover:bg-gray-200 transition-colors appearance-none",value:y.value,onChange:T=>f(_,"value",T.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>x(_),className:"absolute -top-4 -right-3 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center shadow-md z-20 hover:bg-red-600 transition-colors",title:"lemi Sil",children:""})]},_):c.jsxs("div",{className:"flex bg-white border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-indigo-500 shadow-sm items-center",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-300 text-[10px] uppercase font-bold text-gray-500 px-2 py-2 cursor-pointer focus:outline-none hover:bg-gray-100 h-full",value:y.type,onChange:T=>f(_,"type",T.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),s&&c.jsx("option",{value:"ref",children:"Ref"})]}),y.type==="num"&&c.jsx("input",{type:"number",className:"w-24 border-none text-sm px-3 py-2 focus:ring-0 text-gray-900",placeholder:"0",value:y.value,onChange:T=>f(_,"value",T.target.value)}),y.type==="const"&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-white cursor-pointer text-gray-900",value:y.value,onChange:T=>f(_,"value",T.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),o.map(T=>c.jsx("option",{value:T.id,children:T.name},T.id))]}),y.type==="ref"&&s&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-indigo-50 text-indigo-700 font-medium cursor-pointer",value:y.value,onChange:T=>f(_,"value",T.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),i.map(T=>c.jsx("option",{value:T.id,children:T.name||"simsiz Satr"},T.id))]})]},_)),c.jsx("button",{type:"button",onClick:p,className:"w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center hover:bg-indigo-100 hover:shadow-md transition-all z-10",children:c.jsx(es.Plus,{})})]})};function qj(){const[r,e]=re.useState(null),[s,i]=re.useState(!0),[o,d]=re.useState([]),[f,p]=re.useState([]),[x,y]=re.useState({TRY:1,USD:1,EUR:1}),[_,T]=re.useState(null),[N,U]=re.useState(!1),[X,Y]=re.useState(!1),[G,he]=re.useState(null),[oe,me]=re.useState({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[xe,Te]=re.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});re.useEffect(()=>{const V=ss.onAuthStateChanged(Z=>{e(Z),i(!1)}),te=rs(wt(Ue,"pricing_constants"),ws("name","asc")),ce=An(te,Z=>{d(Z.docs.map(we=>({id:we.id,...we.data()})))}),Ce=rs(wt(Ue,"pricing_items"),ws("updatedAt","desc")),De=An(Ce,Z=>{p(Z.docs.map(we=>({id:we.id,...we.data()})))});return ye(),()=>{V(),ce(),De()}},[]);const ye=async()=>{try{const te=await(await fetch(Hj)).json();if(te&&te.conversion_rates){const ce=te.conversion_rates.TRY,Ce=te.conversion_rates.EUR,De=ce/Ce;y({TRY:1,USD:ce,EUR:De}),T(new Date().toLocaleTimeString())}}catch(V){console.error("Rate fetch error",V)}},I=(V,te)=>{if(!te||te==="None"||te==="TRY")return parseFloat(V)||0;const ce=x[te]||1;return parseFloat(V)*ce},w=(V,te)=>{if(te==="TRY")return V;const ce=x[te]||1;return V/ce},A=(V,te={})=>{if(V.type==="num")return parseFloat(V.value)||0;if(V.type==="const"){const ce=o.find(Ce=>Ce.id===V.value);return ce?I(ce.value,ce.currency):0}return V.type==="ref"&&te[V.value]||0},R=(V,te={})=>{if(!V||V.length===0)return 0;let ce=A(V[0],te);for(let Ce=1;Ce<V.length;Ce+=2){const De=V[Ce].value,Z=A(V[Ce+1],te);switch(De){case"+":ce+=Z;break;case"-":ce-=Z;break;case"*":ce*=Z;break;case"/":ce=Z!==0?ce/Z:0;break}}return ce},C=V=>{const te={};(V.rows||[]).forEach(Ce=>{te[Ce.id]=R(Ce.ops,te)});const ce=R(V.finalFormula?.ops,te);return w(ce,V.finalCurrency||"TRY")},D=V=>R(V,{}),j=re.useMemo(()=>C(xe),[xe,o,x]),_e=re.useMemo(()=>D(oe.ops),[oe.ops,o,x]),Ve=async V=>{V.preventDefault();const te=D(oe.ops),ce={...oe,value:te};G?await Js(Ft(Ue,"pricing_constants",G),ce):await Tr(wt(Ue,"pricing_constants"),ce),me({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),he(null),U(!1)},Q=async V=>await Ri(Ft(Ue,"pricing_constants",V)),de=()=>{const V="row_"+Date.now();Te({...xe,rows:[...xe.rows,{id:V,name:"",ops:[{type:"num",value:0}]}]})},Ne=V=>{const te=[...xe.rows];te.splice(V,1),Te({...xe,rows:te})},qe=(V,te)=>{const ce=[...xe.rows];ce[V].name=te,Te({...xe,rows:ce})},Ge=(V,te)=>{const ce=[...xe.rows];ce[V].ops=te,Te({...xe,rows:ce})},M=async V=>{V.preventDefault();const te={...xe,updatedAt:new Date().toISOString()};G?await Js(Ft(Ue,"pricing_items",G),te):await Tr(wt(Ue,"pricing_items"),te),Te({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"}),he(null),Y(!1)},J=V=>{const te={...V,rows:V.rows||[],finalFormula:V.finalFormula||{ops:[{type:"num",value:0}]},finalCurrency:V.finalCurrency||"TRY"};Te(te),he(V.id),Y(!0)},fe=async V=>{window.confirm("Silmek istediinize emin misiniz?")&&await Ri(Ft(Ue,"pricing_items",V))};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):r?.email==="furkan@avci.jp"?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8 gap-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white px-4 py-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-green-600",children:[x.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[x.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:ye,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(es.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>{he(null),me({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),U(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl shadow-sm hover:bg-gray-50 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx(es.Variable,{})}),"Sabitler"]}),c.jsxs("button",{onClick:()=>{he(null),Te({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),Y(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx(es.Calculator,{})}),"Fiyatlandrma"]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-1 space-y-6",children:c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6 h-[calc(100vh-200px)] flex flex-col",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center shrink-0",children:[c.jsx("span",{className:"bg-purple-100 p-1.5 rounded-lg mr-2",children:c.jsx(es.Variable,{})}),"Sabit Deerler"]}),c.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-grow",children:[o.map(V=>{const te=I(V.value,V.currency);return c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm border border-transparent hover:border-gray-100 transition-all group",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-700",children:V.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[V.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",V.currency!=="None"?V.currency:"",V.unit?c.jsxs("span",{className:"text-gray-300 mx-1",children:["/ ",V.unit]}):""]}),V.currency!=="TRY"&&V.currency!=="None"&&c.jsxs("p",{className:"text-[10px] text-emerald-600 font-medium mt-0.5",children:["~ ",te.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{me({...V,ops:V.ops||[{type:"num",value:V.value}]}),he(V.id),U(!0)},className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(es.Edit,{})}),c.jsx("button",{onClick:()=>Q(V.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx(es.Trash,{})})]})]},V.id)}),o.length===0&&c.jsx("div",{className:"text-center text-xs text-gray-400 italic py-4",children:"Sabit deer eklenmedi."})]})]})}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gncel Fiyatlar"}),c.jsxs("span",{className:"text-xs text-gray-400",children:["Son Gncelleme: ",_||"..."]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[calc(100vh-200px)] overflow-y-auto custom-scrollbar pr-2 pb-4",children:f.map(V=>{const te=C(V),ce=V.finalCurrency||"TRY",Ce=Math.random()>.5?"up":"down",De=(Math.random()*5).toFixed(1);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 relative group hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-50 px-3 py-1 rounded-bl-2xl text-xs text-gray-400 border-b border-l border-gray-100",children:new Date(V.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:V.title}),c.jsx("p",{className:"text-xs text-gray-500 mb-4 uppercase tracking-wider",children:V.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-4",children:[c.jsx("div",{children:c.jsxs("span",{className:"text-3xl font-bold text-indigo-600",children:[te.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",ce]})}),c.jsx("div",{className:"flex flex-col items-end",children:c.jsxs("div",{className:`flex items-center text-xs font-bold ${Ce==="up"?"text-emerald-500":"text-red-500"}`,children:[Ce==="up"?c.jsx(es.TrendingUp,{}):c.jsx(es.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",De]})]})})]}),c.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100",children:[c.jsx("button",{onClick:()=>J(V),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>fe(V.id),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors",children:"Sil"})]})]},V.id)})})]})]}),N&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full p-6 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Sabit Deer Ekle"}),c.jsxs("form",{onSubmit:Ve,className:"space-y-6 overflow-y-auto custom-scrollbar px-1 pb-2",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad"}),c.jsx("input",{required:!0,placeholder:"rn: ilik Saat",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:oe.name,onChange:V=>me({...oe,name:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Birim"}),c.jsx("input",{placeholder:"kg, m2...",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:oe.unit,onChange:V=>me({...oe,unit:V.target.value})})]})]}),c.jsxs("div",{className:"bg-purple-50/50 p-5 rounded-xl border border-purple-100",children:[c.jsx("label",{className:"block text-xs font-bold text-purple-800 mb-3 uppercase",children:"Hesaplama Forml"}),c.jsx(bm,{ops:oe.ops,onChange:V=>me({...oe,ops:V}),allowRefs:!1,constants:o})]}),c.jsxs("div",{className:"flex items-center justify-between bg-gray-900 text-white p-5 rounded-xl shadow-lg",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400 text-xs block",children:"Hesaplanan Deer"}),c.jsx("span",{className:"text-2xl font-bold",children:_e.toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Para Birimi"}),c.jsxs("select",{className:"w-full bg-gray-800 border-none rounded-lg text-sm text-white font-bold focus:ring-1 focus:ring-purple-500 cursor-pointer",value:oe.currency,onChange:V=>me({...oe,currency:V.target.value}),children:[c.jsx("option",{value:"None",children:"Say"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>U(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl text-sm font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl text-sm font-medium hover:bg-purple-700 shadow-lg shadow-purple-200 transition-all",children:"Kaydet"})]})]})]})}),X&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Fiyatlandrma Oluturucu"}),c.jsx("button",{onClick:()=>Y(!1),className:"text-gray-400 hover:text-gray-600 text-3xl font-light leading-none",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar bg-slate-50",children:c.jsxs("form",{id:"pricingForm",onSubmit:M,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx("input",{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm focus:ring-indigo-500 focus:border-indigo-500",value:xe.title,onChange:V=>Te({...xe,title:V.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx("input",{placeholder:"adet, m3, kg...",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm",value:xe.unitType,onChange:V=>Te({...xe,unitType:V.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:de,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),xe.rows.map((V,te)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsxs("div",{className:"w-full xl:w-64 shrink-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Adm Ad"}),c.jsx("input",{placeholder:"rn: Ham Madde",className:"w-full text-sm font-medium bg-gray-50 border-transparent rounded-lg focus:bg-white focus:border-indigo-300 focus:ring-0 transition-all px-3 py-2",value:V.name,onChange:ce=>qe(te,ce.target.value)})]}),c.jsxs("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Forml"}),c.jsx(bm,{ops:V.ops,onChange:ce=>Ge(te,ce),allowRefs:!0,rows:xe.rows.slice(0,te),constants:o})]}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:R(V.ops,C({...xe,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>Ne(te),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(es.Trash,{})})]})]},V.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx(es.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:xe.finalCurrency,onChange:V=>Te({...xe,finalCurrency:V.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(bm,{ops:xe.finalFormula.ops,onChange:V=>Te({...xe,finalFormula:{...xe.finalFormula,ops:V}}),allowRefs:!0,rows:xe.rows,constants:o})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right text-white",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[j.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:xe.finalCurrency})]})]})]})]})]})}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200 bg-gray-50 flex flex-row-reverse gap-3",children:[c.jsx("button",{onClick:M,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 hover:shadow-indigo-300 transition-all font-bold text-sm",children:"Kaydet"}),c.jsx("button",{onClick:()=>Y(!1),className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium text-sm",children:"ptal"})]})]})})]}):c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(es.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",r?.email,")"]})]})}const da={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},fl={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},Jv=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],Fj=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],_m=2.5,xs=r=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0)+" ";function Gj(){const[r,e]=re.useState(null),[s,i]=re.useState(!0),[o,d]=re.useState([]),[f,p]=re.useState(new Date),[x,y]=re.useState(!1),[_,T]=re.useState(!1),[N,U]=re.useState(null),[X,Y]=re.useState(new Date),[G,he]=re.useState(!1),[oe,me]=re.useState(new Date().getFullYear()),[xe,Te]=re.useState(!1),[ye,I]=re.useState(null),[w,A]=re.useState({type:"work",overtimeSlots:0,lateness:0}),[R,C]=re.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});re.useEffect(()=>{const L=ss.onAuthStateChanged(Ce=>{e(Ce),i(!1)}),V=rs(wt(Ue,"employees"),ws("name","asc")),te=An(V,Ce=>{d(Ce.docs.map(De=>({id:De.id,...De.data()})))}),ce=setInterval(()=>p(new Date),6e4);return()=>{L(),te(),clearInterval(ce)}},[]);const D=L=>{const V=f.toISOString().split("T")[0],te=f.getDay(),ce=f.getHours(),Ce=f.getMinutes(),De=ce*60+Ce,Z=L.attendance?.[V];if(Z){if(["paid_leave","unpaid_leave"].includes(Z.type))return fl.LEAVE;if(Z.overtimeSlots>0)return fl.OVERTIME}const[we,ue]=L.startHour.split(":").map(Number),[q,ie]=L.endHour.split(":").map(Number),ae=we*60+ue,be=q*60+ie;return L.workDays.includes(te)?De>=ae&&De<be?fl.ONLINE:De>=be&&Z?.overtimeSlots>0?fl.OVERTIME:fl.OFFLINE:fl.OFFLINE},j=L=>{if(!L.attendance)return{used:0,remaining:L.vacationTotal};let V=0;return Object.values(L.attendance).forEach(te=>{te.type==="paid_leave"&&V++}),{used:V,remaining:L.vacationTotal-V}},_e=(L,V)=>{const te=V.getFullYear(),ce=V.getMonth(),Ce=new Date(te,ce+1,0).getDate();let De=0,Z=0,we=0,ue=0,q=0;for(let tr=1;tr<=Ce;tr++){const Dr=`${te}-${String(ce+1).padStart(2,"0")}-${String(tr).padStart(2,"0")}`,Es=new Date(Dr).getDay(),zn=L.attendance?.[Dr],Sa=L.workDays.includes(Es);zn?(zn.type==="work"&&De++,zn.type==="paid_leave"&&q++,zn.type==="unpaid_leave"&&ue++,zn.overtimeSlots&&(Z+=parseInt(zn.overtimeSlots)),zn.lateness&&(we+=parseFloat(zn.lateness))):Sa&&De++}const ie=parseFloat(L.salaryAmount)||0,ae=L.customDailyRate&&parseFloat(L.customDailyRate)>0?parseFloat(L.customDailyRate):ie/30,be=parseFloat(L.customDeductionRate),ge=!isNaN(be)&&be>0?be:ae,je=ae/9,Ye=L.customOvertimeMultiplier?parseFloat(L.customOvertimeMultiplier):1.5,gt=Z*_m,fn=gt*(je*Ye),Pl=ue*ge,Oi=we*je,Kt=Pl+Oi,er=ie+fn-Kt+(parseFloat(L.insurance)||0)+(parseFloat(L.allowance)||0);return{workedDays:De,totalOvertimeSlots:Z,totalOvertimeHours:gt,unpaidLeaveDays:ue,paidLeaveDays:q,overtimePay:fn,totalLatenessHours:we,latenessDeduction:Oi,totalDeduction:Kt,totalSalary:er,dailyRate:ae,hourlyRate:je,deductionRate:ge}},Ve=(L,V)=>{const te=new Date(L,V,1);let ce=0;return o.forEach(Ce=>{ce+=_e(Ce,te).totalSalary}),ce},Q=re.useMemo(()=>{let L=0,V=0;const te=new Date(X);return te.setMonth(X.getMonth()-1),o.forEach(ce=>{L+=_e(ce,X).totalSalary,V+=_e(ce,te).totalSalary}),{thisMonthTotal:L,lastMonthTotal:V}},[o,X]),de=()=>{T(!1),C({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),y(!0)},Ne=()=>{N&&(T(!0),C({name:N.name,role:N.role,salaryType:N.salaryType,salaryAmount:N.salaryAmount,insurance:N.insurance,allowance:N.allowance,vacationTotal:N.vacationTotal,workDays:N.workDays,startHour:N.startHour,endHour:N.endHour,customDailyRate:N.customDailyRate||"",customOvertimeMultiplier:N.customOvertimeMultiplier||"1.5",customDeductionRate:N.customDeductionRate||"",attendance:N.attendance||{}}),U(null),y(!0))},qe=async L=>{L.preventDefault();try{const V={...R,updatedAt:new Date().toISOString()};_&&N?await Js(Ft(Ue,"employees",N.id),V):await Tr(wt(Ue,"employees"),{...V,createdAt:new Date().toISOString()}),y(!1)}catch(V){alert("Hata: "+V.message)}},Ge=async L=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await Ri(Ft(Ue,"employees",L)),U(null))},M=(L,V)=>{I(L),A({type:V?.type||"work",overtimeSlots:V?.overtimeSlots||0,lateness:V?.lateness||0}),Te(!0)},J=async L=>{if(L.preventDefault(),!N||!ye)return;const V={...N.attendance};V[ye]={type:w.type,overtimeSlots:parseInt(w.overtimeSlots)||0,lateness:parseFloat(w.lateness)||0},await Js(Ft(Ue,"employees",N.id),{attendance:V}),U({...N,attendance:V}),Te(!1)};if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(r?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(da.Lock,{})," Yetkisiz Eriim"]});const fe=({employee:L,date:V,onDateClick:te})=>{const ce=V.getFullYear(),Ce=V.getMonth(),De=new Date(ce,Ce+1,0).getDate(),Z=new Date(ce,Ce,1).getDay(),we=[];for(let ue=0;ue<Z;ue++)we.push(null);for(let ue=1;ue<=De;ue++)we.push(ue);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:Jv.map((ue,q)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:ue.slice(0,3)},q))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:we.map((ue,q)=>{if(!ue)return c.jsx("div",{},q);const ie=`${ce}-${String(Ce+1).padStart(2,"0")}-${String(ue).padStart(2,"0")}`,ae=L.attendance?.[ie],be=new Date(ie).getDay(),ge=L.workDays.includes(be);let je="bg-gray-50 text-gray-400 border-gray-100";return ge&&(je="bg-white border-emerald-200 text-gray-700 shadow-sm"),ae&&(ae.type==="paid_leave"&&(je="bg-yellow-50 border-yellow-200 text-yellow-700"),ae.type==="unpaid_leave"&&(je="bg-red-50 border-red-200 text-red-700"),ae.type==="work"&&(ae.overtimeSlots>0||ae.lateness>0)&&(je="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),ae.type==="off"&&(je="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>te(ie,ae),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${je}`,children:[c.jsx("span",{className:"text-sm",children:ue}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[ae?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",ae.overtimeSlots,"M"]}),ae?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",ae.lateness,"s"]})]})]},q)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>he(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",X.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:xs(Q.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(da.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>he(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:xs(Q.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:de,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(da.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(L=>{const V=D(L),te=j(L);return c.jsxs("div",{onClick:()=>U(L),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${V.color} ${V.ring} ring-offset-2 ring-2`,children:V.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(da.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:L.name}),c.jsx("p",{className:"text-sm text-gray-500",children:L.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[L.startHour," - ",L.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[te.remaining," gn kald"]})]})]})]},L.id)})}),N&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:N.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:N.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:N.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:Ne,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(da.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>Ge(N.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(da.Trash,{})}),c.jsx("button",{onClick:()=>U(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",X.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const L=_e(N,X);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:xs(L.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:xs(Number(N.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",L.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",xs(L.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",L.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",xs(L.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",L.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",xs(L.totalDeduction-L.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",xs(Number(N.insurance)+Number(N.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",_m," Saat",c.jsx("br",{}),"Saatlik cret = ",xs(L.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",xs(L.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>Y(new Date(X.setMonth(X.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:X.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>Y(new Date(X.setMonth(X.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(fe,{employee:N,date:X,onDateClick:M})]})]})]})}),G&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>he(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(da.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>me(L=>L-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:oe}),c.jsx("button",{onClick:()=>me(L=>L+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Fj.map((L,V)=>{const te=Ve(oe,V),ce=new Date().getMonth()===V&&new Date().getFullYear()===oe;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${ce?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${ce?"text-indigo-200":"text-gray-400"}`,children:L}),c.jsx("div",{className:`text-lg font-bold ${ce?"text-white":"text-gray-800"}`,children:te>0?xs(te):"-"})]},L)})})]})}),x&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:qe,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:R.name,onChange:L=>C({...R,name:L.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:R.role,onChange:L=>C({...R,role:L.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.salaryType,onChange:L=>C({...R,salaryType:L.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.salaryAmount,onChange:L=>C({...R,salaryAmount:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.insurance,onChange:L=>C({...R,insurance:L.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.allowance,onChange:L=>C({...R,allowance:L.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.customDailyRate,onChange:L=>C({...R,customDailyRate:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.customOvertimeMultiplier,onChange:L=>C({...R,customOvertimeMultiplier:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.customDeductionRate,onChange:L=>C({...R,customDeductionRate:L.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:R.vacationTotal,onChange:L=>C({...R,vacationTotal:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:R.startHour,onChange:L=>C({...R,startHour:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:R.endHour,onChange:L=>C({...R,endHour:L.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:Jv.map((L,V)=>c.jsx("button",{type:"button",onClick:()=>{const te=R.workDays.includes(V)?R.workDays.filter(ce=>ce!==V):[...R.workDays,V];C({...R,workDays:te})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${R.workDays.includes(V)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:L.slice(0,3)},L))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),xe&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:ye}),c.jsxs("form",{onSubmit:J,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(L=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:L.id,checked:w.type===L.id,onChange:V=>A({...w,type:V.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:L.label})]},L.id))})]}),w.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",_m,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(L=>c.jsx("button",{type:"button",onClick:()=>A({...w,overtimeSlots:w.overtimeSlots===L?0:L}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${w.overtimeSlots===L?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:L},L))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:w.lateness,onChange:L=>A({...w,lateness:L.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>Te(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function Yj(){const[r,e]=re.useState(null),[s,i]=re.useState(!0),[o,d]=re.useState("dashboard"),[f,p]=re.useState(!1);re.useEffect(()=>{const N=tS(ss,U=>{e(U),i(!1)});return()=>N()},[]);const x=async()=>{try{await nS(ss)}catch(N){console.error("k yaplrken hata:",N)}},y={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})},_=[{id:"dashboard",label:"Dashboard",icon:y.Home},{id:"musteriler",label:"Mteriler",icon:y.Users},{id:"urunler",label:"rnler",icon:y.Box},{id:"stok",label:"Stok Durumu",icon:y.Chart},{id:"siparis",label:"Sipari Formu",icon:y.Cart},{id:"teklif",label:"Teklif Formu",icon:y.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:y.Calculator},{id:"calisan",label:"alanlar",icon:y.Briefcase}],T=()=>{switch(o){case"dashboard":return c.jsx($v,{onNavigate:d});case"musteriler":return c.jsx(Dj,{});case"urunler":return c.jsx(Vj,{});case"stok":return c.jsx(Uj,{});case"siparis":return c.jsx(Mj,{});case"teklif":return c.jsx(zj,{});case"fiyatlandirma":return c.jsx(qj,{});case"calisan":return c.jsx(Gj,{});default:return c.jsx($v,{onNavigate:d})}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):r?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[f&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>p(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>p(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(y.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(N=>c.jsxs("button",{onClick:()=>{d(N.id),p(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${o===N.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${o===N.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(N.icon,{})}),N.label]},N.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:r.email?r.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:r.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:x,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(y.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>p(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(y.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:T()})})]})]}):c.jsx(Cj,{})}fw.createRoot(document.getElementById("root")).render(c.jsx(re.StrictMode,{children:c.jsx(Yj,{})}));
