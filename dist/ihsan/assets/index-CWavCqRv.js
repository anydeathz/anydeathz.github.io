(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();var Xf={exports:{}},Uo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv;function K2(){if(nv)return Uo;nv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,o,d){var m=null;if(d!==void 0&&(m=""+d),o.key!==void 0&&(m=""+o.key),"key"in o){d={};for(var y in o)y!=="key"&&(d[y]=o[y])}else d=o;return o=d.ref,{$$typeof:i,type:r,key:m,ref:o!==void 0?o:null,props:d}}return Uo.Fragment=e,Uo.jsx=s,Uo.jsxs=s,Uo}var sv;function Q2(){return sv||(sv=1,Xf.exports=K2()),Xf.exports}var c=Q2(),Wf={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function $2(){if(iv)return Ie;iv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),m=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),A=Symbol.iterator;function B(C){return C===null||typeof C!="object"?null:(C=A&&C[A]||C["@@iterator"],typeof C=="function"?C:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,te={};function de(C,$,P){this.props=C,this.context=$,this.refs=te,this.updater=P||ee}de.prototype.isReactComponent={},de.prototype.setState=function(C,$){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,$,"setState")},de.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function ae(){}ae.prototype=de.prototype;function le(C,$,P){this.props=C,this.context=$,this.refs=te,this.updater=P||ee}var oe=le.prototype=new ae;oe.constructor=le,Z(oe,de.prototype),oe.isPureReactComponent=!0;var pe=Array.isArray;function ye(){}var D={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function N(C,$,P){var k=P.ref;return{$$typeof:i,type:C,key:$,ref:k!==void 0?k:null,props:P}}function R(C,$){return N(C.type,$,C.props)}function I(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function L(C){var $={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(P){return $[P]})}var j=/\/+/g;function he(C,$){return typeof C=="object"&&C!==null&&C.key!=null?L(""+C.key):$.toString(36)}function Te(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ye,ye):(C.status="pending",C.then(function($){C.status==="pending"&&(C.status="fulfilled",C.value=$)},function($){C.status==="pending"&&(C.status="rejected",C.reason=$)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function F(C,$,P,k,M){var Y=typeof C;(Y==="undefined"||Y==="boolean")&&(C=null);var X=!1;if(C===null)X=!0;else switch(Y){case"bigint":case"string":case"number":X=!0;break;case"object":switch(C.$$typeof){case i:case e:X=!0;break;case _:return X=C._init,F(X(C._payload),$,P,k,M)}}if(X)return M=M(C),X=k===""?"."+he(C,0):k,pe(M)?(P="",X!=null&&(P=X.replace(j,"$&/")+"/"),F(M,$,P,"",function(Oe){return Oe})):M!=null&&(I(M)&&(M=R(M,P+(M.key==null||C&&C.key===M.key?"":(""+M.key).replace(j,"$&/")+"/")+X)),$.push(M)),1;X=0;var me=k===""?".":k+":";if(pe(C))for(var xe=0;xe<C.length;xe++)k=C[xe],Y=me+he(k,xe),X+=F(k,$,P,Y,M);else if(xe=B(C),typeof xe=="function")for(C=xe.call(C),xe=0;!(k=C.next()).done;)k=k.value,Y=me+he(k,xe++),X+=F(k,$,P,Y,M);else if(Y==="object"){if(typeof C.then=="function")return F(Te(C),$,P,k,M);throw $=String(C),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return X}function ue(C,$,P){if(C==null)return C;var k=[],M=0;return F(C,k,"","",function(Y){return $.call(P,Y,M++)}),k}function _e(C){if(C._status===-1){var $=C._result;$=$(),$.then(function(P){(C._status===0||C._status===-1)&&(C._status=1,C._result=P)},function(P){(C._status===0||C._status===-1)&&(C._status=2,C._result=P)}),C._status===-1&&(C._status=0,C._result=$)}if(C._status===1)return C._result.default;throw C._result}var W=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},ge={map:ue,forEach:function(C,$,P){ue(C,function(){$.apply(this,arguments)},P)},count:function(C){var $=0;return ue(C,function(){$++}),$},toArray:function(C){return ue(C,function($){return $})||[]},only:function(C){if(!I(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Ie.Activity=T,Ie.Children=ge,Ie.Component=de,Ie.Fragment=s,Ie.Profiler=o,Ie.PureComponent=le,Ie.StrictMode=r,Ie.Suspense=v,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(C){return D.H.useMemoCache(C)}},Ie.cache=function(C){return function(){return C.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(C,$,P){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var k=Z({},C.props),M=C.key;if($!=null)for(Y in $.key!==void 0&&(M=""+$.key),$)!w.call($,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&$.ref===void 0||(k[Y]=$[Y]);var Y=arguments.length-2;if(Y===1)k.children=P;else if(1<Y){for(var X=Array(Y),me=0;me<Y;me++)X[me]=arguments[me+2];k.children=X}return N(C.type,M,k)},Ie.createContext=function(C){return C={$$typeof:m,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:d,_context:C},C},Ie.createElement=function(C,$,P){var k,M={},Y=null;if($!=null)for(k in $.key!==void 0&&(Y=""+$.key),$)w.call($,k)&&k!=="key"&&k!=="__self"&&k!=="__source"&&(M[k]=$[k]);var X=arguments.length-2;if(X===1)M.children=P;else if(1<X){for(var me=Array(X),xe=0;xe<X;xe++)me[xe]=arguments[xe+2];M.children=me}if(C&&C.defaultProps)for(k in X=C.defaultProps,X)M[k]===void 0&&(M[k]=X[k]);return N(C,Y,M)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(C){return{$$typeof:y,render:C}},Ie.isValidElement=I,Ie.lazy=function(C){return{$$typeof:_,_payload:{_status:-1,_result:C},_init:_e}},Ie.memo=function(C,$){return{$$typeof:p,type:C,compare:$===void 0?null:$}},Ie.startTransition=function(C){var $=D.T,P={};D.T=P;try{var k=C(),M=D.S;M!==null&&M(P,k),typeof k=="object"&&k!==null&&typeof k.then=="function"&&k.then(ye,W)}catch(Y){W(Y)}finally{$!==null&&P.types!==null&&($.types=P.types),D.T=$}},Ie.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ie.use=function(C){return D.H.use(C)},Ie.useActionState=function(C,$,P){return D.H.useActionState(C,$,P)},Ie.useCallback=function(C,$){return D.H.useCallback(C,$)},Ie.useContext=function(C){return D.H.useContext(C)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(C,$){return D.H.useDeferredValue(C,$)},Ie.useEffect=function(C,$){return D.H.useEffect(C,$)},Ie.useEffectEvent=function(C){return D.H.useEffectEvent(C)},Ie.useId=function(){return D.H.useId()},Ie.useImperativeHandle=function(C,$,P){return D.H.useImperativeHandle(C,$,P)},Ie.useInsertionEffect=function(C,$){return D.H.useInsertionEffect(C,$)},Ie.useLayoutEffect=function(C,$){return D.H.useLayoutEffect(C,$)},Ie.useMemo=function(C,$){return D.H.useMemo(C,$)},Ie.useOptimistic=function(C,$){return D.H.useOptimistic(C,$)},Ie.useReducer=function(C,$,P){return D.H.useReducer(C,$,P)},Ie.useRef=function(C){return D.H.useRef(C)},Ie.useState=function(C){return D.H.useState(C)},Ie.useSyncExternalStore=function(C,$,P){return D.H.useSyncExternalStore(C,$,P)},Ie.useTransition=function(){return D.H.useTransition()},Ie.version="19.2.0",Ie}var rv;function qm(){return rv||(rv=1,Wf.exports=$2()),Wf.exports}var ce=qm(),Zf={exports:{}},zo={},Jf={exports:{}},em={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function X2(){return av||(av=1,(function(i){function e(F,ue){var _e=F.length;F.push(ue);e:for(;0<_e;){var W=_e-1>>>1,ge=F[W];if(0<o(ge,ue))F[W]=ue,F[_e]=ge,_e=W;else break e}}function s(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var ue=F[0],_e=F.pop();if(_e!==ue){F[0]=_e;e:for(var W=0,ge=F.length,C=ge>>>1;W<C;){var $=2*(W+1)-1,P=F[$],k=$+1,M=F[k];if(0>o(P,_e))k<ge&&0>o(M,P)?(F[W]=M,F[k]=_e,W=k):(F[W]=P,F[$]=_e,W=$);else if(k<ge&&0>o(M,_e))F[W]=M,F[k]=_e,W=k;else break e}}return ue}function o(F,ue){var _e=F.sortIndex-ue.sortIndex;return _e!==0?_e:F.id-ue.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var m=Date,y=m.now();i.unstable_now=function(){return m.now()-y}}var v=[],p=[],_=1,T=null,A=3,B=!1,ee=!1,Z=!1,te=!1,de=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function oe(F){for(var ue=s(p);ue!==null;){if(ue.callback===null)r(p);else if(ue.startTime<=F)r(p),ue.sortIndex=ue.expirationTime,e(v,ue);else break;ue=s(p)}}function pe(F){if(Z=!1,oe(F),!ee)if(s(v)!==null)ee=!0,ye||(ye=!0,L());else{var ue=s(p);ue!==null&&Te(pe,ue.startTime-F)}}var ye=!1,D=-1,w=5,N=-1;function R(){return te?!0:!(i.unstable_now()-N<w)}function I(){if(te=!1,ye){var F=i.unstable_now();N=F;var ue=!0;try{e:{ee=!1,Z&&(Z=!1,ae(D),D=-1),B=!0;var _e=A;try{t:{for(oe(F),T=s(v);T!==null&&!(T.expirationTime>F&&R());){var W=T.callback;if(typeof W=="function"){T.callback=null,A=T.priorityLevel;var ge=W(T.expirationTime<=F);if(F=i.unstable_now(),typeof ge=="function"){T.callback=ge,oe(F),ue=!0;break t}T===s(v)&&r(v),oe(F)}else r(v);T=s(v)}if(T!==null)ue=!0;else{var C=s(p);C!==null&&Te(pe,C.startTime-F),ue=!1}}break e}finally{T=null,A=_e,B=!1}ue=void 0}}finally{ue?L():ye=!1}}}var L;if(typeof le=="function")L=function(){le(I)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,he=j.port2;j.port1.onmessage=I,L=function(){he.postMessage(null)}}else L=function(){de(I,0)};function Te(F,ue){D=de(function(){F(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(F){switch(A){case 1:case 2:case 3:var ue=3;break;default:ue=A}var _e=A;A=ue;try{return F()}finally{A=_e}},i.unstable_requestPaint=function(){te=!0},i.unstable_runWithPriority=function(F,ue){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var _e=A;A=F;try{return ue()}finally{A=_e}},i.unstable_scheduleCallback=function(F,ue,_e){var W=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?W+_e:W):_e=W,F){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=_e+ge,F={id:_++,callback:ue,priorityLevel:F,startTime:_e,expirationTime:ge,sortIndex:-1},_e>W?(F.sortIndex=_e,e(p,F),s(v)===null&&F===s(p)&&(Z?(ae(D),D=-1):Z=!0,Te(pe,_e-W))):(F.sortIndex=ge,e(v,F),ee||B||(ee=!0,ye||(ye=!0,L()))),F},i.unstable_shouldYield=R,i.unstable_wrapCallback=function(F){var ue=A;return function(){var _e=A;A=ue;try{return F.apply(this,arguments)}finally{A=_e}}}})(em)),em}var lv;function W2(){return lv||(lv=1,Jf.exports=X2()),Jf.exports}var tm={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function Z2(){if(ov)return ln;ov=1;var i=qm();function e(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(v,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:v,containerInfo:p,implementation:_}}var m=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ln.createPortal=function(v,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return d(v,p,null,_)},ln.flushSync=function(v){var p=m.T,_=r.p;try{if(m.T=null,r.p=2,v)return v()}finally{m.T=p,r.p=_,r.d.f()}},ln.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(v,p))},ln.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},ln.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var _=p.as,T=y(_,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,B=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:B}):_==="script"&&r.d.X(v,{crossOrigin:T,integrity:A,fetchPriority:B,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ln.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=y(p.as,p.crossOrigin);r.d.M(v,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(v)},ln.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=y(_,p.crossOrigin);r.d.L(v,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ln.preloadModule=function(v,p){if(typeof v=="string")if(p){var _=y(p.as,p.crossOrigin);r.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(v)},ln.requestFormReset=function(v){r.d.r(v)},ln.unstable_batchedUpdates=function(v,p){return v(p)},ln.useFormState=function(v,p,_){return m.H.useFormState(v,p,_)},ln.useFormStatus=function(){return m.H.useHostTransitionStatus()},ln.version="19.2.0",ln}var cv;function J2(){if(cv)return tm.exports;cv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),tm.exports=Z2(),tm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function ew(){if(uv)return zo;uv=1;var i=W2(),e=qm(),s=J2();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function m(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(d(t)!==t)throw Error(r(188))}function p(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,l=n;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return v(h),t;if(f===l)return v(h),n;f=f.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=f;else{for(var x=!1,E=h.child;E;){if(E===a){x=!0,a=h,l=f;break}if(E===l){x=!0,l=h,a=f;break}E=E.sibling}if(!x){for(E=f.child;E;){if(E===a){x=!0,a=f,l=h;break}if(E===l){x=!0,l=f,a=h;break}E=E.sibling}if(!x)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),le=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var j=Symbol.for("react.client.reference");function he(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===j?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Z:return"Fragment";case de:return"Profiler";case te:return"StrictMode";case pe:return"Suspense";case ye:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ee:return"Portal";case le:return t.displayName||"Context";case ae:return(t._context.displayName||"Context")+".Consumer";case oe:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return n=t.displayName||null,n!==null?n:he(t.type)||"Memo";case w:n=t._payload,t=t._init;try{return he(t(n))}catch{}}return null}var Te=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},W=[],ge=-1;function C(t){return{current:t}}function $(t){0>ge||(t.current=W[ge],W[ge]=null,ge--)}function P(t,n){ge++,W[ge]=t.current,t.current=n}var k=C(null),M=C(null),Y=C(null),X=C(null);function me(t,n){switch(P(Y,n),P(M,t),P(k,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Sy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Sy(n),t=Ny(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(k),P(k,t)}function xe(){$(k),$(M),$(Y)}function Oe(t){t.memoizedState!==null&&P(X,t);var n=k.current,a=Ny(n,t.type);n!==a&&(P(M,t),P(k,a))}function at(t){M.current===t&&($(k),$(M)),X.current===t&&($(X),Oo._currentValue=_e)}var tt,sn;function Pt(t){if(tt===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);tt=n&&n[1]||"",sn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tt+t+sn}var ht=!1;function rn(t,n){if(!t||ht)return"";ht=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Q){var G=Q}Reflect.construct(t,[],se)}else{try{se.call()}catch(Q){G=Q}t.call(se.prototype)}}else{try{throw Error()}catch(Q){G=Q}(se=t())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Q){if(Q&&G&&typeof Q.stack=="string")return[Q.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),x=f[0],E=f[1];if(x&&E){var O=x.split(`
`),q=E.split(`
`);for(h=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===O.length||h===q.length)for(l=O.length-1,h=q.length-1;1<=l&&0<=h&&O[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(O[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||O[l]!==q[h]){var J=`
`+O[l].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=l&&0<=h);break}}}finally{ht=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Pt(a):""}function xs(t,n){switch(t.tag){case 26:case 27:case 5:return Pt(t.type);case 16:return Pt("Lazy");case 13:return t.child!==n&&n!==null?Pt("Suspense Fallback"):Pt("Suspense");case 19:return Pt("SuspenseList");case 0:case 15:return rn(t.type,!1);case 11:return rn(t.type.render,!1);case 1:return rn(t.type,!0);case 31:return Pt("Activity");default:return""}}function an(t){try{var n="",a=null;do n+=xs(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var yt=Object.prototype.hasOwnProperty,vt=i.unstable_scheduleCallback,ns=i.unstable_cancelCallback,Pl=i.unstable_shouldYield,Rr=i.unstable_requestPaint,Ht=i.unstable_now,Zs=i.unstable_getCurrentPriorityLevel,Js=i.unstable_ImmediatePriority,Ri=i.unstable_UserBlockingPriority,bs=i.unstable_NormalPriority,On=i.unstable_LowPriority,Ta=i.unstable_IdlePriority,_c=i.log,wc=i.unstable_setDisableYieldValue,ss=null,Kt=null;function Vn(t){if(typeof _c=="function"&&wc(t),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(ss,t)}catch{}}var _t=Math.clz32?Math.clz32:Tc,Ec=Math.log,Sa=Math.LN2;function Tc(t){return t>>>=0,t===0?32:31-(Ec(t)/Sa|0)|0}var _s=256,Ir=262144,At=4194304;function ws(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Es(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~f,l!==0?h=ws(l):(x&=E,x!==0?h=ws(x):a||(a=E&~t,a!==0&&(h=ws(a))))):(E=l&~f,E!==0?h=ws(E):x!==0?h=ws(x):a||(a=l&~t,a!==0&&(h=ws(a)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:h}function is(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Jd(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sc(){var t=At;return At<<=1,(At&62914560)===0&&(At=4194304),t}function Ts(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function kr(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function eh(t,n,a,l,h,f){var x=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,O=t.expirationTimes,q=t.hiddenUpdates;for(a=x&~a;0<a;){var J=31-_t(a),se=1<<J;E[J]=0,O[J]=-1;var G=q[J];if(G!==null)for(q[J]=null,J=0;J<G.length;J++){var Q=G[J];Q!==null&&(Q.lane&=-536870913)}a&=~se}l!==0&&Dr(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(x&~n))}function Dr(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-_t(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ul(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-_t(a),h=1<<l;h&n|t[l]&n&&(t[l]|=n),a&=~h}}function zl(t,n){var a=n&-n;return a=(a&42)!==0?1:Mr(a),(a&(t.suspendedLanes|n))!==0?0:a}function Mr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ei(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Nc(){var t=ue.p;return t!==0?t:(t=window.event,t===void 0?32:$y(t.type))}function rs(t,n){var a=ue.p;try{return ue.p=t,n()}finally{ue.p=a}}var as=Math.random().toString(36).slice(2),jt="__reactFiber$"+as,qt="__reactProps$"+as,Ss="__reactContainer$"+as,Na="__reactEvents$"+as,th="__reactListeners$"+as,Ac="__reactHandles$"+as,jc="__reactResources$"+as,Ns="__reactMarker$"+as;function Aa(t){delete t[jt],delete t[qt],delete t[Na],delete t[th],delete t[Ac]}function As(t){var n=t[jt];if(n)return n;for(var a=t.parentNode;a;){if(n=a[Ss]||a[jt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Dy(t);t!==null;){if(a=t[jt])return a;t=Dy(t)}return n}t=a,a=t.parentNode}return null}function Ln(t){if(t=t[jt]||t[Ss]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function Sn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function js(t){var n=t[jc];return n||(n=t[jc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ct(t){t[Ns]=!0}var Bl=new Set,Hl={};function Cs(t,n){Rs(t,n),Rs(t+"Capture",n)}function Rs(t,n){for(Hl[t]=n,t=0;t<n.length;t++)Bl.add(n[t])}var ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fl={},Gl={};function Cc(t){return yt.call(Gl,t)?!0:yt.call(Fl,t)?!1:ql.test(t)?Gl[t]=!0:(Fl[t]=!0,!1)}function ja(t,n,a){if(Cc(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Nn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Rt(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function Ft(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ii(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Yl(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,f=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(x){a=""+x,f.call(this,x)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Ze(t){if(!t._valueTracker){var n=Ii(t)?"checked":"value";t._valueTracker=Yl(t,n,""+t[n])}}function Or(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Ii(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Is(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Vr=/[\n"\\]/g;function pn(t){return t.replace(Vr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ca(t,n,a,l,h,f,x,E){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),n!=null?x==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Ft(n)):t.value!==""+Ft(n)&&(t.value=""+Ft(n)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),n!=null?Kl(t,x,Ft(n)):a!=null?Kl(t,x,Ft(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Ft(E):t.removeAttribute("name")}function Rc(t,n,a,l,h,f,x,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){Ze(t);return}a=a!=null?""+Ft(a):"",n=n!=null?""+Ft(n):a,E||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),Ze(t)}function Kl(t,n,a){n==="number"&&Is(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ki(t,n,a,l){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Ft(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Ic(t,n,a){if(n!=null&&(n=""+Ft(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+Ft(a):""}function Di(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(Te(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Ft(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ze(t)}function yn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var kc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||kc.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function $l(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&Ql(t,h,l)}else for(var f in n)n.hasOwnProperty(f)&&Ql(t,f,n[f])}function Ra(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ia(t){return Mi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ls(){}var Xl=null;function Pn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oi=null,ks=null;function Lr(t){var n=Ln(t);if(n&&(t=n.stateNode)){var a=t[qt]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ca(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var h=l[qt]||null;if(!h)throw Error(r(90));Ca(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&Or(l)}break e;case"textarea":Ic(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&ki(t,!!a.multiple,n,!1)}}}var ka=!1;function Vi(t,n,a){if(ka)return t(n,a);ka=!0;try{var l=t(n);return l}finally{if(ka=!1,(Oi!==null||ks!==null)&&(Nu(),Oi&&(n=Oi,t=ks,ks=Oi=null,Lr(n),t)))for(n=0;n<t.length;n++)Lr(t[n])}}function os(t,n){var a=t.stateNode;if(a===null)return null;var l=a[qt]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pr=!1;if(Un)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{Pr=!1}var Ds=null,Wl=null,Ur=null;function Zl(){if(Ur)return Ur;var t,n=Wl,a=n.length,l,h="value"in Ds?Ds.value:Ds.textContent,f=h.length;for(t=0;t<a&&n[t]===h[t];t++);var x=a-t;for(l=1;l<=x&&n[a-l]===h[f-l];l++);return Ur=h.slice(t,1<l?1-l:void 0)}function zr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function ti(){return!0}function cs(){return!1}function Qt(t){function n(a,l,h,f,x){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=x,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ti:cs,this.isPropagationStopped=cs,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),n}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ms=Qt(ni),Li=T({},ni,{view:0,detail:0}),Jl=Qt(Li),Pi,Da,Os,Ma=T({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ui,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Os&&(Os&&t.type==="mousemove"?(Pi=t.screenX-Os.screenX,Da=t.screenY-Os.screenY):Da=Pi=0,Os=t),Pi)},movementY:function(t){return"movementY"in t?t.movementY:Da}}),eo=Qt(Ma),Br=T({},Ma,{dataTransfer:0}),Mc=Qt(Br),Oc=T({},Li,{relatedTarget:0}),Hr=Qt(Oc),to=T({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Vc=Qt(to),Oa=T({},ni,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lc=Qt(Oa),Pc=T({},ni,{data:0}),Vs=Qt(Pc),Uc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Bc[t])?!!n[t]:!1}function Ui(){return Hc}var fn=T({},Li,{key:function(t){if(t.key){var n=Uc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=zr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ui,charCode:function(t){return t.type==="keypress"?zr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qc=Qt(fn),Fc=T({},Ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),si=Qt(Fc),u=T({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ui}),g=Qt(u),b=T({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Qt(b),z=T({},Ma,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Qt(z),fe=T({},ni,{newState:0,oldState:0}),De=Qt(fe),wt=[9,13,27,32],$e=Un&&"CompositionEvent"in window,ft=null;Un&&"documentMode"in document&&(ft=document.documentMode);var zn=Un&&"TextEvent"in window&&!ft,Ls=Un&&(!$e||ft&&8<ft&&11>=ft),us=" ",ds=!1;function qr(t,n){switch(t){case"keyup":return wt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Va(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var La=!1;function y1(t,n){switch(t){case"compositionend":return Va(n);case"keypress":return n.which!==32?null:(ds=!0,us);case"textInput":return t=n.data,t===us&&ds?null:t;default:return null}}function v1(t,n){if(La)return t==="compositionend"||!$e&&qr(t,n)?(t=Zl(),Ur=Wl=Ds=null,La=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ls&&n.locale!=="ko"?null:n.data;default:return null}}var x1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!x1[t.type]:n==="textarea"}function Lg(t,n,a,l){Oi?ks?ks.push(l):ks=[l]:Oi=l,n=Du(n,"onChange"),0<n.length&&(a=new Ms("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var no=null,so=null;function b1(t){xy(t,0)}function Gc(t){var n=Sn(t);if(Or(n))return t}function Pg(t,n){if(t==="change")return n}var Ug=!1;if(Un){var nh;if(Un){var sh="oninput"in document;if(!sh){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),sh=typeof zg.oninput=="function"}nh=sh}else nh=!1;Ug=nh&&(!document.documentMode||9<document.documentMode)}function Bg(){no&&(no.detachEvent("onpropertychange",Hg),so=no=null)}function Hg(t){if(t.propertyName==="value"&&Gc(so)){var n=[];Lg(n,so,t,Pn(t)),Vi(b1,n)}}function _1(t,n,a){t==="focusin"?(Bg(),no=n,so=a,no.attachEvent("onpropertychange",Hg)):t==="focusout"&&Bg()}function w1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gc(so)}function E1(t,n){if(t==="click")return Gc(n)}function T1(t,n){if(t==="input"||t==="change")return Gc(n)}function S1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var An=typeof Object.is=="function"?Object.is:S1;function io(t,n){if(An(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!yt.call(n,h)||!An(t[h],n[h]))return!1}return!0}function qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fg(t,n){var a=qg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=qg(a)}}function Gg(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Gg(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Yg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Is(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Is(t.document)}return n}function ih(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var N1=Un&&"documentMode"in document&&11>=document.documentMode,Pa=null,rh=null,ro=null,ah=!1;function Kg(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ah||Pa==null||Pa!==Is(l)||(l=Pa,"selectionStart"in l&&ih(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ro&&io(ro,l)||(ro=l,l=Du(rh,"onSelect"),0<l.length&&(n=new Ms("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=Pa)))}function Fr(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Ua={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},lh={},Qg={};Un&&(Qg=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Gr(t){if(lh[t])return lh[t];if(!Ua[t])return t;var n=Ua[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in Qg)return lh[t]=n[a];return t}var $g=Gr("animationend"),Xg=Gr("animationiteration"),Wg=Gr("animationstart"),A1=Gr("transitionrun"),j1=Gr("transitionstart"),C1=Gr("transitioncancel"),Zg=Gr("transitionend"),Jg=new Map,oh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oh.push("scrollEnd");function hs(t,n){Jg.set(t,n),Cs(n,[t])}var Yc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Bn=[],za=0,ch=0;function Kc(){for(var t=za,n=ch=za=0;n<t;){var a=Bn[n];Bn[n++]=null;var l=Bn[n];Bn[n++]=null;var h=Bn[n];Bn[n++]=null;var f=Bn[n];if(Bn[n++]=null,l!==null&&h!==null){var x=l.pending;x===null?h.next=h:(h.next=x.next,x.next=h),l.pending=h}f!==0&&ep(a,h,f)}}function Qc(t,n,a,l){Bn[za++]=t,Bn[za++]=n,Bn[za++]=a,Bn[za++]=l,ch|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function uh(t,n,a,l){return Qc(t,n,a,l),$c(t)}function Yr(t,n){return Qc(t,null,null,n),$c(t)}function ep(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&n!==null&&(h=31-_t(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=a|536870912),f):null}function $c(t){if(50<jo)throw jo=0,bf=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ba={};function R1(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,n,a,l){return new R1(t,n,a,l)}function dh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ii(t,n){var a=t.alternate;return a===null?(a=jn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function tp(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Xc(t,n,a,l,h,f){var x=0;if(l=t,typeof t=="function")dh(t)&&(x=1);else if(typeof t=="string")x=O2(t,a,k.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=jn(31,a,n,h),t.elementType=N,t.lanes=f,t;case Z:return Kr(a.children,h,f,n);case te:x=8,h|=24;break;case de:return t=jn(12,a,n,h|2),t.elementType=de,t.lanes=f,t;case pe:return t=jn(13,a,n,h),t.elementType=pe,t.lanes=f,t;case ye:return t=jn(19,a,n,h),t.elementType=ye,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:x=10;break e;case ae:x=9;break e;case oe:x=11;break e;case D:x=14;break e;case w:x=16,l=null;break e}x=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return n=jn(x,a,n,h),n.elementType=t,n.type=l,n.lanes=f,n}function Kr(t,n,a,l){return t=jn(7,t,l,n),t.lanes=a,t}function hh(t,n,a){return t=jn(6,t,null,n),t.lanes=a,t}function np(t){var n=jn(18,null,null,0);return n.stateNode=t,n}function fh(t,n,a){return n=jn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var sp=new WeakMap;function Hn(t,n){if(typeof t=="object"&&t!==null){var a=sp.get(t);return a!==void 0?a:(n={value:t,source:n,stack:an(n)},sp.set(t,n),n)}return{value:t,source:n,stack:an(n)}}var Ha=[],qa=0,Wc=null,ao=0,qn=[],Fn=0,zi=null,Ps=1,Us="";function ri(t,n){Ha[qa++]=ao,Ha[qa++]=Wc,Wc=t,ao=n}function ip(t,n,a){qn[Fn++]=Ps,qn[Fn++]=Us,qn[Fn++]=zi,zi=t;var l=Ps;t=Us;var h=32-_t(l)-1;l&=~(1<<h),a+=1;var f=32-_t(n)+h;if(30<f){var x=h-h%5;f=(l&(1<<x)-1).toString(32),l>>=x,h-=x,Ps=1<<32-_t(n)+h|a<<h|l,Us=f+t}else Ps=1<<f|a<<h|l,Us=t}function mh(t){t.return!==null&&(ri(t,1),ip(t,1,0))}function gh(t){for(;t===Wc;)Wc=Ha[--qa],Ha[qa]=null,ao=Ha[--qa],Ha[qa]=null;for(;t===zi;)zi=qn[--Fn],qn[Fn]=null,Us=qn[--Fn],qn[Fn]=null,Ps=qn[--Fn],qn[Fn]=null}function rp(t,n){qn[Fn++]=Ps,qn[Fn++]=Us,qn[Fn++]=zi,Ps=n.id,Us=n.overflow,zi=t}var $t=null,ct=null,Ge=!1,Bi=null,Gn=!1,ph=Error(r(519));function Hi(t){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lo(Hn(n,t)),ph}function ap(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[jt]=t,n[qt]=l,a){case"dialog":Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":case"embed":Ue("load",n);break;case"video":case"audio":for(a=0;a<Ro.length;a++)Ue(Ro[a],n);break;case"source":Ue("error",n);break;case"img":case"image":case"link":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"input":Ue("invalid",n),Rc(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ue("invalid",n);break;case"textarea":Ue("invalid",n),Di(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Ey(n.textContent,a)?(l.popover!=null&&(Ue("beforetoggle",n),Ue("toggle",n)),l.onScroll!=null&&Ue("scroll",n),l.onScrollEnd!=null&&Ue("scrollend",n),l.onClick!=null&&(n.onclick=ls),n=!0):n=!1,n||Hi(t,!0)}function lp(t){for($t=t.return;$t;)switch($t.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:$t=$t.return}}function Fa(t){if(t!==$t)return!1;if(!Ge)return lp(t),Ge=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Of(t.type,t.memoizedProps)),a=!a),a&&ct&&Hi(t),lp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));ct=ky(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));ct=ky(t)}else n===27?(n=ct,nr(t.type)?(t=zf,zf=null,ct=t):ct=n):ct=$t?Kn(t.stateNode.nextSibling):null;return!0}function Qr(){ct=$t=null,Ge=!1}function yh(){var t=Bi;return t!==null&&(_n===null?_n=t:_n.push.apply(_n,t),Bi=null),t}function lo(t){Bi===null?Bi=[t]:Bi.push(t)}var vh=C(null),$r=null,ai=null;function qi(t,n,a){P(vh,n._currentValue),n._currentValue=a}function li(t){t._currentValue=vh.current,$(vh)}function xh(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function bh(t,n,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var x=h.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=h;for(var O=0;O<n.length;O++)if(E.context===n[O]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),xh(f.return,a,t),l||(x=null);break e}f=E.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(r(341));x.lanes|=a,f=x.alternate,f!==null&&(f.lanes|=a),xh(x,a,t),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===t){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function Ga(t,n,a,l){t=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var E=h.type;An(h.pendingProps.value,x.value)||(t!==null?t.push(E):t=[E])}}else if(h===X.current){if(x=h.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Oo):t=[Oo])}h=h.return}t!==null&&bh(n,t,a,l),n.flags|=262144}function Zc(t){for(t=t.firstContext;t!==null;){if(!An(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Xr(t){$r=t,ai=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Xt(t){return op($r,t)}function Jc(t,n){return $r===null&&Xr(t),op(t,n)}function op(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},ai===null){if(t===null)throw Error(r(308));ai=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else ai=ai.next=n;return a}var I1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},k1=i.unstable_scheduleCallback,D1=i.unstable_NormalPriority,It={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _h(){return{controller:new I1,data:new Map,refCount:0}}function oo(t){t.refCount--,t.refCount===0&&k1(D1,function(){t.controller.abort()})}var co=null,wh=0,Ya=0,Ka=null;function M1(t,n){if(co===null){var a=co=[];wh=0,Ya=Nf(),Ka={status:"pending",value:void 0,then:function(l){a.push(l)}}}return wh++,n.then(cp,cp),n}function cp(){if(--wh===0&&co!==null){Ka!==null&&(Ka.status="fulfilled");var t=co;co=null,Ya=0,Ka=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function O1(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var up=F.S;F.S=function(t,n){K0=Ht(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&M1(t,n),up!==null&&up(t,n)};var Wr=C(null);function Eh(){var t=Wr.current;return t!==null?t:lt.pooledCache}function eu(t,n){n===null?P(Wr,Wr.current):P(Wr,n.pool)}function dp(){var t=Eh();return t===null?null:{parent:It._currentValue,pool:t}}var Qa=Error(r(460)),Th=Error(r(474)),tu=Error(r(542)),nu={then:function(){}};function hp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fp(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(ls,ls),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,gp(t),t;default:if(typeof n.status=="string")n.then(ls,ls);else{if(t=lt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,gp(t),t}throw Jr=n,Qa}}function Zr(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Jr=a,Qa):a}}var Jr=null;function mp(){if(Jr===null)throw Error(r(459));var t=Jr;return Jr=null,t}function gp(t){if(t===Qa||t===tu)throw Error(r(483))}var $a=null,uo=0;function su(t){var n=uo;return uo+=1,$a===null&&($a=[]),fp($a,t,n)}function ho(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function iu(t,n){throw n.$$typeof===A?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function pp(t){function n(U,V){if(t){var H=U.deletions;H===null?(U.deletions=[V],U.flags|=16):H.push(V)}}function a(U,V){if(!t)return null;for(;V!==null;)n(U,V),V=V.sibling;return null}function l(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function h(U,V){return U=ii(U,V),U.index=0,U.sibling=null,U}function f(U,V,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<V?(U.flags|=67108866,V):H):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function x(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function E(U,V,H,ne){return V===null||V.tag!==6?(V=hh(H,U.mode,ne),V.return=U,V):(V=h(V,H),V.return=U,V)}function O(U,V,H,ne){var Se=H.type;return Se===Z?J(U,V,H.props.children,ne,H.key):V!==null&&(V.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===w&&Zr(Se)===V.type)?(V=h(V,H.props),ho(V,H),V.return=U,V):(V=Xc(H.type,H.key,H.props,null,U.mode,ne),ho(V,H),V.return=U,V)}function q(U,V,H,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=fh(H,U.mode,ne),V.return=U,V):(V=h(V,H.children||[]),V.return=U,V)}function J(U,V,H,ne,Se){return V===null||V.tag!==7?(V=Kr(H,U.mode,ne,Se),V.return=U,V):(V=h(V,H),V.return=U,V)}function se(U,V,H){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=hh(""+V,U.mode,H),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case B:return H=Xc(V.type,V.key,V.props,null,U.mode,H),ho(H,V),H.return=U,H;case ee:return V=fh(V,U.mode,H),V.return=U,V;case w:return V=Zr(V),se(U,V,H)}if(Te(V)||L(V))return V=Kr(V,U.mode,H,null),V.return=U,V;if(typeof V.then=="function")return se(U,su(V),H);if(V.$$typeof===le)return se(U,Jc(U,V),H);iu(U,V)}return null}function G(U,V,H,ne){var Se=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Se!==null?null:E(U,V,""+H,ne);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case B:return H.key===Se?O(U,V,H,ne):null;case ee:return H.key===Se?q(U,V,H,ne):null;case w:return H=Zr(H),G(U,V,H,ne)}if(Te(H)||L(H))return Se!==null?null:J(U,V,H,ne,null);if(typeof H.then=="function")return G(U,V,su(H),ne);if(H.$$typeof===le)return G(U,V,Jc(U,H),ne);iu(U,H)}return null}function Q(U,V,H,ne,Se){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return U=U.get(H)||null,E(V,U,""+ne,Se);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case B:return U=U.get(ne.key===null?H:ne.key)||null,O(V,U,ne,Se);case ee:return U=U.get(ne.key===null?H:ne.key)||null,q(V,U,ne,Se);case w:return ne=Zr(ne),Q(U,V,H,ne,Se)}if(Te(ne)||L(ne))return U=U.get(H)||null,J(V,U,ne,Se,null);if(typeof ne.then=="function")return Q(U,V,H,su(ne),Se);if(ne.$$typeof===le)return Q(U,V,H,Jc(V,ne),Se);iu(V,ne)}return null}function we(U,V,H,ne){for(var Se=null,Ke=null,Ee=V,Ve=V=0,Be=null;Ee!==null&&Ve<H.length;Ve++){Ee.index>Ve?(Be=Ee,Ee=null):Be=Ee.sibling;var Qe=G(U,Ee,H[Ve],ne);if(Qe===null){Ee===null&&(Ee=Be);break}t&&Ee&&Qe.alternate===null&&n(U,Ee),V=f(Qe,V,Ve),Ke===null?Se=Qe:Ke.sibling=Qe,Ke=Qe,Ee=Be}if(Ve===H.length)return a(U,Ee),Ge&&ri(U,Ve),Se;if(Ee===null){for(;Ve<H.length;Ve++)Ee=se(U,H[Ve],ne),Ee!==null&&(V=f(Ee,V,Ve),Ke===null?Se=Ee:Ke.sibling=Ee,Ke=Ee);return Ge&&ri(U,Ve),Se}for(Ee=l(Ee);Ve<H.length;Ve++)Be=Q(Ee,U,Ve,H[Ve],ne),Be!==null&&(t&&Be.alternate!==null&&Ee.delete(Be.key===null?Ve:Be.key),V=f(Be,V,Ve),Ke===null?Se=Be:Ke.sibling=Be,Ke=Be);return t&&Ee.forEach(function(lr){return n(U,lr)}),Ge&&ri(U,Ve),Se}function Ae(U,V,H,ne){if(H==null)throw Error(r(151));for(var Se=null,Ke=null,Ee=V,Ve=V=0,Be=null,Qe=H.next();Ee!==null&&!Qe.done;Ve++,Qe=H.next()){Ee.index>Ve?(Be=Ee,Ee=null):Be=Ee.sibling;var lr=G(U,Ee,Qe.value,ne);if(lr===null){Ee===null&&(Ee=Be);break}t&&Ee&&lr.alternate===null&&n(U,Ee),V=f(lr,V,Ve),Ke===null?Se=lr:Ke.sibling=lr,Ke=lr,Ee=Be}if(Qe.done)return a(U,Ee),Ge&&ri(U,Ve),Se;if(Ee===null){for(;!Qe.done;Ve++,Qe=H.next())Qe=se(U,Qe.value,ne),Qe!==null&&(V=f(Qe,V,Ve),Ke===null?Se=Qe:Ke.sibling=Qe,Ke=Qe);return Ge&&ri(U,Ve),Se}for(Ee=l(Ee);!Qe.done;Ve++,Qe=H.next())Qe=Q(Ee,U,Ve,Qe.value,ne),Qe!==null&&(t&&Qe.alternate!==null&&Ee.delete(Qe.key===null?Ve:Qe.key),V=f(Qe,V,Ve),Ke===null?Se=Qe:Ke.sibling=Qe,Ke=Qe);return t&&Ee.forEach(function(Y2){return n(U,Y2)}),Ge&&ri(U,Ve),Se}function rt(U,V,H,ne){if(typeof H=="object"&&H!==null&&H.type===Z&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case B:e:{for(var Se=H.key;V!==null;){if(V.key===Se){if(Se=H.type,Se===Z){if(V.tag===7){a(U,V.sibling),ne=h(V,H.props.children),ne.return=U,U=ne;break e}}else if(V.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===w&&Zr(Se)===V.type){a(U,V.sibling),ne=h(V,H.props),ho(ne,H),ne.return=U,U=ne;break e}a(U,V);break}else n(U,V);V=V.sibling}H.type===Z?(ne=Kr(H.props.children,U.mode,ne,H.key),ne.return=U,U=ne):(ne=Xc(H.type,H.key,H.props,null,U.mode,ne),ho(ne,H),ne.return=U,U=ne)}return x(U);case ee:e:{for(Se=H.key;V!==null;){if(V.key===Se)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){a(U,V.sibling),ne=h(V,H.children||[]),ne.return=U,U=ne;break e}else{a(U,V);break}else n(U,V);V=V.sibling}ne=fh(H,U.mode,ne),ne.return=U,U=ne}return x(U);case w:return H=Zr(H),rt(U,V,H,ne)}if(Te(H))return we(U,V,H,ne);if(L(H)){if(Se=L(H),typeof Se!="function")throw Error(r(150));return H=Se.call(H),Ae(U,V,H,ne)}if(typeof H.then=="function")return rt(U,V,su(H),ne);if(H.$$typeof===le)return rt(U,V,Jc(U,H),ne);iu(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,V!==null&&V.tag===6?(a(U,V.sibling),ne=h(V,H),ne.return=U,U=ne):(a(U,V),ne=hh(H,U.mode,ne),ne.return=U,U=ne),x(U)):a(U,V)}return function(U,V,H,ne){try{uo=0;var Se=rt(U,V,H,ne);return $a=null,Se}catch(Ee){if(Ee===Qa||Ee===tu)throw Ee;var Ke=jn(29,Ee,null,U.mode);return Ke.lanes=ne,Ke.return=U,Ke}finally{}}}var ea=pp(!0),yp=pp(!1),Fi=!1;function Sh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Gi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Yi(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=$c(t),ep(t,null,a),n}return Qc(t,l,n,a),$c(t)}function fo(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Ul(t,a)}}function Ah(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=x:f=f.next=x,a=a.next}while(a!==null);f===null?h=f=n:f=f.next=n}else h=f=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var jh=!1;function mo(){if(jh){var t=Ka;if(t!==null)throw t}}function go(t,n,a,l){jh=!1;var h=t.updateQueue;Fi=!1;var f=h.firstBaseUpdate,x=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var O=E,q=O.next;O.next=null,x===null?f=q:x.next=q,x=O;var J=t.alternate;J!==null&&(J=J.updateQueue,E=J.lastBaseUpdate,E!==x&&(E===null?J.firstBaseUpdate=q:E.next=q,J.lastBaseUpdate=O))}if(f!==null){var se=h.baseState;x=0,J=q=O=null,E=f;do{var G=E.lane&-536870913,Q=G!==E.lane;if(Q?(ze&G)===G:(l&G)===G){G!==0&&G===Ya&&(jh=!0),J!==null&&(J=J.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var we=t,Ae=E;G=n;var rt=a;switch(Ae.tag){case 1:if(we=Ae.payload,typeof we=="function"){se=we.call(rt,se,G);break e}se=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ae.payload,G=typeof we=="function"?we.call(rt,se,G):we,G==null)break e;se=T({},se,G);break e;case 2:Fi=!0}}G=E.callback,G!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=h.callbacks,Q===null?h.callbacks=[G]:Q.push(G))}else Q={lane:G,tag:E.tag,payload:E.payload,callback:E.callback,next:null},J===null?(q=J=Q,O=se):J=J.next=Q,x|=G;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;Q=E,E=Q.next,Q.next=null,h.lastBaseUpdate=Q,h.shared.pending=null}}while(!0);J===null&&(O=se),h.baseState=O,h.firstBaseUpdate=q,h.lastBaseUpdate=J,f===null&&(h.shared.lanes=0),Wi|=x,t.lanes=x,t.memoizedState=se}}function vp(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function xp(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)vp(a[t],n)}var Xa=C(null),ru=C(0);function bp(t,n){t=pi,P(ru,t),P(Xa,n),pi=t|n.baseLanes}function Ch(){P(ru,pi),P(Xa,Xa.current)}function Rh(){pi=ru.current,$(Xa),$(ru)}var Cn=C(null),Yn=null;function Ki(t){var n=t.alternate;P(Et,Et.current&1),P(Cn,t),Yn===null&&(n===null||Xa.current!==null||n.memoizedState!==null)&&(Yn=t)}function Ih(t){P(Et,Et.current),P(Cn,t),Yn===null&&(Yn=t)}function _p(t){t.tag===22?(P(Et,Et.current),P(Cn,t),Yn===null&&(Yn=t)):Qi()}function Qi(){P(Et,Et.current),P(Cn,Cn.current)}function Rn(t){$(Cn),Yn===t&&(Yn=null),$(Et)}var Et=C(0);function au(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Pf(a)||Uf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var oi=0,Me=null,st=null,kt=null,lu=!1,Wa=!1,ta=!1,ou=0,po=0,Za=null,V1=0;function xt(){throw Error(r(321))}function kh(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!An(t[a],n[a]))return!1;return!0}function Dh(t,n,a,l,h,f){return oi=f,Me=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,F.H=t===null||t.memoizedState===null?i0:Qh,ta=!1,f=a(l,h),ta=!1,Wa&&(f=Ep(n,a,l,h)),wp(t),f}function wp(t){F.H=xo;var n=st!==null&&st.next!==null;if(oi=0,kt=st=Me=null,lu=!1,po=0,Za=null,n)throw Error(r(300));t===null||Dt||(t=t.dependencies,t!==null&&Zc(t)&&(Dt=!0))}function Ep(t,n,a,l){Me=t;var h=0;do{if(Wa&&(Za=null),po=0,Wa=!1,25<=h)throw Error(r(301));if(h+=1,kt=st=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}F.H=r0,f=n(a,l)}while(Wa);return f}function L1(){var t=F.H,n=t.useState()[0];return n=typeof n.then=="function"?yo(n):n,t=t.useState()[0],(st!==null?st.memoizedState:null)!==t&&(Me.flags|=1024),n}function Mh(){var t=ou!==0;return ou=0,t}function Oh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Vh(t){if(lu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}lu=!1}oi=0,kt=st=Me=null,Wa=!1,po=ou=0,Za=null}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Me.memoizedState=kt=t:kt=kt.next=t,kt}function Tt(){if(st===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var n=kt===null?Me.memoizedState:kt.next;if(n!==null)kt=n,st=t;else{if(t===null)throw Me.alternate===null?Error(r(467)):Error(r(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},kt===null?Me.memoizedState=kt=t:kt=kt.next=t}return kt}function cu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yo(t){var n=po;return po+=1,Za===null&&(Za=[]),t=fp(Za,t,n),n=Me,(kt===null?n.memoizedState:kt.next)===null&&(n=n.alternate,F.H=n===null||n.memoizedState===null?i0:Qh),t}function uu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yo(t);if(t.$$typeof===le)return Xt(t)}throw Error(r(438,String(t)))}function Lh(t){var n=null,a=Me.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=cu(),Me.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=R;return n.index++,a}function ci(t,n){return typeof n=="function"?n(t):n}function du(t){var n=Tt();return Ph(n,st,t)}function Ph(t,n,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var x=h.next;h.next=f.next,f.next=x}n.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{n=h.next;var E=x=null,O=null,q=n,J=!1;do{var se=q.lane&-536870913;if(se!==q.lane?(ze&se)===se:(oi&se)===se){var G=q.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),se===Ya&&(J=!0);else if((oi&G)===G){q=q.next,G===Ya&&(J=!0);continue}else se={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},O===null?(E=O=se,x=f):O=O.next=se,Me.lanes|=G,Wi|=G;se=q.action,ta&&a(f,se),f=q.hasEagerState?q.eagerState:a(f,se)}else G={lane:se,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},O===null?(E=O=G,x=f):O=O.next=G,Me.lanes|=se,Wi|=se;q=q.next}while(q!==null&&q!==n);if(O===null?x=f:O.next=E,!An(f,t.memoizedState)&&(Dt=!0,J&&(a=Ka,a!==null)))throw a;t.memoizedState=f,t.baseState=x,t.baseQueue=O,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Uh(t){var n=Tt(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=n.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do f=t(f,x.action),x=x.next;while(x!==h);An(f,n.memoizedState)||(Dt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,l]}function Tp(t,n,a){var l=Me,h=Tt(),f=Ge;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=n();var x=!An((st||h).memoizedState,a);if(x&&(h.memoizedState=a,Dt=!0),h=h.queue,Hh(Ap.bind(null,l,h,t),[t]),h.getSnapshot!==n||x||kt!==null&&kt.memoizedState.tag&1){if(l.flags|=2048,Ja(9,{destroy:void 0},Np.bind(null,l,h,a,n),null),lt===null)throw Error(r(349));f||(oi&127)!==0||Sp(l,n,a)}return a}function Sp(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Me.updateQueue,n===null?(n=cu(),Me.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Np(t,n,a,l){n.value=a,n.getSnapshot=l,jp(n)&&Cp(t)}function Ap(t,n,a){return a(function(){jp(n)&&Cp(t)})}function jp(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!An(t,a)}catch{return!0}}function Cp(t){var n=Yr(t,2);n!==null&&wn(n,t,2)}function zh(t){var n=mn();if(typeof t=="function"){var a=t;if(t=a(),ta){Vn(!0);try{a()}finally{Vn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:t},n}function Rp(t,n,a,l){return t.baseState=a,Ph(t,st,typeof l=="function"?l:ci)}function P1(t,n,a,l,h){if(mu(t))throw Error(r(485));if(t=n.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){f.listeners.push(x)}};F.T!==null?a(!0):f.isTransition=!1,l(f),a=n.pending,a===null?(f.next=n.pending=f,Ip(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Ip(t,n){var a=n.action,l=n.payload,h=t.state;if(n.isTransition){var f=F.T,x={};F.T=x;try{var E=a(h,l),O=F.S;O!==null&&O(x,E),kp(t,n,E)}catch(q){Bh(t,n,q)}finally{f!==null&&x.types!==null&&(f.types=x.types),F.T=f}}else try{f=a(h,l),kp(t,n,f)}catch(q){Bh(t,n,q)}}function kp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Dp(t,n,l)},function(l){return Bh(t,n,l)}):Dp(t,n,a)}function Dp(t,n,a){n.status="fulfilled",n.value=a,Mp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Ip(t,a)))}function Bh(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Mp(n),n=n.next;while(n!==l)}t.action=null}function Mp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Op(t,n){return n}function Vp(t,n){if(Ge){var a=lt.formState;if(a!==null){e:{var l=Me;if(Ge){if(ct){t:{for(var h=ct,f=Gn;h.nodeType!==8;){if(!f){h=null;break t}if(h=Kn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ct=Kn(h.nextSibling),l=h.data==="F!";break e}}Hi(l)}l=!1}l&&(n=a[0])}}return a=mn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Op,lastRenderedState:n},a.queue=l,a=t0.bind(null,Me,l),l.dispatch=a,l=zh(!1),f=Kh.bind(null,Me,!1,l.queue),l=mn(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,a=P1.bind(null,Me,h,f,a),h.dispatch=a,l.memoizedState=t,[n,a,!1]}function Lp(t){var n=Tt();return Pp(n,st,t)}function Pp(t,n,a){if(n=Ph(t,n,Op)[0],t=du(ci)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=yo(n)}catch(x){throw x===Qa?tu:x}else l=n;n=Tt();var h=n.queue,f=h.dispatch;return a!==n.memoizedState&&(Me.flags|=2048,Ja(9,{destroy:void 0},U1.bind(null,h,a),null)),[l,f,t]}function U1(t,n){t.action=n}function Up(t){var n=Tt(),a=st;if(a!==null)return Pp(n,a,t);Tt(),n=n.memoizedState,a=Tt();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function Ja(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=Me.updateQueue,n===null&&(n=cu(),Me.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function zp(){return Tt().memoizedState}function hu(t,n,a,l){var h=mn();Me.flags|=t,h.memoizedState=Ja(1|n,{destroy:void 0},a,l===void 0?null:l)}function fu(t,n,a,l){var h=Tt();l=l===void 0?null:l;var f=h.memoizedState.inst;st!==null&&l!==null&&kh(l,st.memoizedState.deps)?h.memoizedState=Ja(n,f,a,l):(Me.flags|=t,h.memoizedState=Ja(1|n,f,a,l))}function Bp(t,n){hu(8390656,8,t,n)}function Hh(t,n){fu(2048,8,t,n)}function z1(t){Me.flags|=4;var n=Me.updateQueue;if(n===null)n=cu(),Me.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Hp(t){var n=Tt().memoizedState;return z1({ref:n,nextImpl:t}),function(){if((Xe&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function qp(t,n){return fu(4,2,t,n)}function Fp(t,n){return fu(4,4,t,n)}function Gp(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Yp(t,n,a){a=a!=null?a.concat([t]):null,fu(4,4,Gp.bind(null,n,t),a)}function qh(){}function Kp(t,n){var a=Tt();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&kh(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function Qp(t,n){var a=Tt();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&kh(n,l[1]))return l[0];if(l=t(),ta){Vn(!0);try{t()}finally{Vn(!1)}}return a.memoizedState=[l,n],l}function Fh(t,n,a){return a===void 0||(oi&1073741824)!==0&&(ze&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=$0(),Me.lanes|=t,Wi|=t,a)}function $p(t,n,a,l){return An(a,n)?a:Xa.current!==null?(t=Fh(t,a,l),An(t,n)||(Dt=!0),t):(oi&42)===0||(oi&1073741824)!==0&&(ze&261930)===0?(Dt=!0,t.memoizedState=a):(t=$0(),Me.lanes|=t,Wi|=t,n)}function Xp(t,n,a,l,h){var f=ue.p;ue.p=f!==0&&8>f?f:8;var x=F.T,E={};F.T=E,Kh(t,!1,n,a);try{var O=h(),q=F.S;if(q!==null&&q(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var J=O1(O,l);vo(t,n,J,Dn(t))}else vo(t,n,l,Dn(t))}catch(se){vo(t,n,{then:function(){},status:"rejected",reason:se},Dn())}finally{ue.p=f,x!==null&&E.types!==null&&(x.types=E.types),F.T=x}}function B1(){}function Gh(t,n,a,l){if(t.tag!==5)throw Error(r(476));var h=Wp(t).queue;Xp(t,h,n,_e,a===null?B1:function(){return Zp(t),a(l)})}function Wp(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:_e},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Zp(t){var n=Wp(t);n.next===null&&(n=t.alternate.memoizedState),vo(t,n.next.queue,{},Dn())}function Yh(){return Xt(Oo)}function Jp(){return Tt().memoizedState}function e0(){return Tt().memoizedState}function H1(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Dn();t=Gi(a);var l=Yi(n,t,a);l!==null&&(wn(l,n,a),fo(l,n,a)),n={cache:_h()},t.payload=n;return}n=n.return}}function q1(t,n,a){var l=Dn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},mu(t)?n0(n,a):(a=uh(t,n,a,l),a!==null&&(wn(a,t,l),s0(a,n,l)))}function t0(t,n,a){var l=Dn();vo(t,n,a,l)}function vo(t,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(mu(t))n0(n,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var x=n.lastRenderedState,E=f(x,a);if(h.hasEagerState=!0,h.eagerState=E,An(E,x))return Qc(t,n,h,0),lt===null&&Kc(),!1}catch{}finally{}if(a=uh(t,n,h,l),a!==null)return wn(a,t,l),s0(a,n,l),!0}return!1}function Kh(t,n,a,l){if(l={lane:2,revertLane:Nf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},mu(t)){if(n)throw Error(r(479))}else n=uh(t,a,l,2),n!==null&&wn(n,t,2)}function mu(t){var n=t.alternate;return t===Me||n!==null&&n===Me}function n0(t,n){Wa=lu=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function s0(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Ul(t,a)}}var xo={readContext:Xt,use:uu,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};xo.useEffectEvent=xt;var i0={readContext:Xt,use:uu,useCallback:function(t,n){return mn().memoizedState=[t,n===void 0?null:n],t},useContext:Xt,useEffect:Bp,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,hu(4194308,4,Gp.bind(null,n,t),a)},useLayoutEffect:function(t,n){return hu(4194308,4,t,n)},useInsertionEffect:function(t,n){hu(4,2,t,n)},useMemo:function(t,n){var a=mn();n=n===void 0?null:n;var l=t();if(ta){Vn(!0);try{t()}finally{Vn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=mn();if(a!==void 0){var h=a(n);if(ta){Vn(!0);try{a(n)}finally{Vn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=q1.bind(null,Me,t),[l.memoizedState,t]},useRef:function(t){var n=mn();return t={current:t},n.memoizedState=t},useState:function(t){t=zh(t);var n=t.queue,a=t0.bind(null,Me,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:qh,useDeferredValue:function(t,n){var a=mn();return Fh(a,t,n)},useTransition:function(){var t=zh(!1);return t=Xp.bind(null,Me,t.queue,!0,!1),mn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=Me,h=mn();if(Ge){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),lt===null)throw Error(r(349));(ze&127)!==0||Sp(l,n,a)}h.memoizedState=a;var f={value:a,getSnapshot:n};return h.queue=f,Bp(Ap.bind(null,l,f,t),[t]),l.flags|=2048,Ja(9,{destroy:void 0},Np.bind(null,l,f,a,n),null),a},useId:function(){var t=mn(),n=lt.identifierPrefix;if(Ge){var a=Us,l=Ps;a=(l&~(1<<32-_t(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=ou++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=V1++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Yh,useFormState:Vp,useActionState:Vp,useOptimistic:function(t){var n=mn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Kh.bind(null,Me,!0,a),a.dispatch=n,[t,n]},useMemoCache:Lh,useCacheRefresh:function(){return mn().memoizedState=H1.bind(null,Me)},useEffectEvent:function(t){var n=mn(),a={impl:t};return n.memoizedState=a,function(){if((Xe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Qh={readContext:Xt,use:uu,useCallback:Kp,useContext:Xt,useEffect:Hh,useImperativeHandle:Yp,useInsertionEffect:qp,useLayoutEffect:Fp,useMemo:Qp,useReducer:du,useRef:zp,useState:function(){return du(ci)},useDebugValue:qh,useDeferredValue:function(t,n){var a=Tt();return $p(a,st.memoizedState,t,n)},useTransition:function(){var t=du(ci)[0],n=Tt().memoizedState;return[typeof t=="boolean"?t:yo(t),n]},useSyncExternalStore:Tp,useId:Jp,useHostTransitionStatus:Yh,useFormState:Lp,useActionState:Lp,useOptimistic:function(t,n){var a=Tt();return Rp(a,st,t,n)},useMemoCache:Lh,useCacheRefresh:e0};Qh.useEffectEvent=Hp;var r0={readContext:Xt,use:uu,useCallback:Kp,useContext:Xt,useEffect:Hh,useImperativeHandle:Yp,useInsertionEffect:qp,useLayoutEffect:Fp,useMemo:Qp,useReducer:Uh,useRef:zp,useState:function(){return Uh(ci)},useDebugValue:qh,useDeferredValue:function(t,n){var a=Tt();return st===null?Fh(a,t,n):$p(a,st.memoizedState,t,n)},useTransition:function(){var t=Uh(ci)[0],n=Tt().memoizedState;return[typeof t=="boolean"?t:yo(t),n]},useSyncExternalStore:Tp,useId:Jp,useHostTransitionStatus:Yh,useFormState:Up,useActionState:Up,useOptimistic:function(t,n){var a=Tt();return st!==null?Rp(a,st,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Lh,useCacheRefresh:e0};r0.useEffectEvent=Hp;function $h(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:T({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Xh={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Dn(),h=Gi(l);h.payload=n,a!=null&&(h.callback=a),n=Yi(t,h,l),n!==null&&(wn(n,t,l),fo(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Dn(),h=Gi(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Yi(t,h,l),n!==null&&(wn(n,t,l),fo(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Dn(),l=Gi(a);l.tag=2,n!=null&&(l.callback=n),n=Yi(t,l,a),n!==null&&(wn(n,t,a),fo(n,t,a))}};function a0(t,n,a,l,h,f,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,x):n.prototype&&n.prototype.isPureReactComponent?!io(a,l)||!io(h,f):!0}function l0(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&Xh.enqueueReplaceState(n,n.state,null)}function na(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function o0(t){Yc(t)}function c0(t){console.error(t)}function u0(t){Yc(t)}function gu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function d0(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Wh(t,n,a){return a=Gi(a),a.tag=3,a.payload={element:null},a.callback=function(){gu(t,n)},a}function h0(t){return t=Gi(t),t.tag=3,t}function f0(t,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){d0(n,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){d0(n,a,l),typeof h!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function F1(t,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ga(n,a,h,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return Yn===null?Au():a.alternate===null&&bt===0&&(bt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===nu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Ef(t,l,h)),!1;case 22:return a.flags|=65536,l===nu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Ef(t,l,h)),!1}throw Error(r(435,a.tag))}return Ef(t,l,h),Au(),!1}if(Ge)return n=Cn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==ph&&(t=Error(r(422),{cause:l}),lo(Hn(t,a)))):(l!==ph&&(n=Error(r(423),{cause:l}),lo(Hn(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Hn(l,a),h=Wh(t.stateNode,l,h),Ah(t,h),bt!==4&&(bt=2)),!1;var f=Error(r(520),{cause:l});if(f=Hn(f,a),Ao===null?Ao=[f]:Ao.push(f),bt!==4&&(bt=2),n===null)return!0;l=Hn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Wh(a.stateNode,l,t),Ah(a,t),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Zi===null||!Zi.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=h0(h),f0(h,t,a,l),Ah(a,h),!1}a=a.return}while(a!==null);return!1}var Zh=Error(r(461)),Dt=!1;function Wt(t,n,a,l){n.child=t===null?yp(n,null,a,l):ea(n,t.child,a,l)}function m0(t,n,a,l,h){a=a.render;var f=n.ref;if("ref"in l){var x={};for(var E in l)E!=="ref"&&(x[E]=l[E])}else x=l;return Xr(n),l=Dh(t,n,a,x,f,h),E=Mh(),t!==null&&!Dt?(Oh(t,n,h),ui(t,n,h)):(Ge&&E&&mh(n),n.flags|=1,Wt(t,n,l,h),n.child)}function g0(t,n,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!dh(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,p0(t,n,f,l,h)):(t=Xc(a.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!lf(t,h)){var x=f.memoizedProps;if(a=a.compare,a=a!==null?a:io,a(x,l)&&t.ref===n.ref)return ui(t,n,h)}return n.flags|=1,t=ii(f,l),t.ref=n.ref,t.return=n,n.child=t}function p0(t,n,a,l,h){if(t!==null){var f=t.memoizedProps;if(io(f,l)&&t.ref===n.ref)if(Dt=!1,n.pendingProps=l=f,lf(t,h))(t.flags&131072)!==0&&(Dt=!0);else return n.lanes=t.lanes,ui(t,n,h)}return Jh(t,n,a,l,h)}function y0(t,n,a,l){var h=l.children,f=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=n.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~f}else l=0,n.child=null;return v0(t,n,f,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&eu(n,f!==null?f.cachePool:null),f!==null?bp(n,f):Ch(),_p(n);else return l=n.lanes=536870912,v0(t,n,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(eu(n,f.cachePool),bp(n,f),Qi(),n.memoizedState=null):(t!==null&&eu(n,null),Ch(),Qi());return Wt(t,n,h,a),n.child}function bo(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function v0(t,n,a,l,h){var f=Eh();return f=f===null?null:{parent:It._currentValue,pool:f},n.memoizedState={baseLanes:a,cachePool:f},t!==null&&eu(n,null),Ch(),_p(n),t!==null&&Ga(t,n,l,!0),n.childLanes=h,null}function pu(t,n){return n=vu({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function x0(t,n,a){return ea(n,t.child,null,a),t=pu(n,n.pendingProps),t.flags|=2,Rn(n),n.memoizedState=null,t}function G1(t,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(Ge){if(l.mode==="hidden")return t=pu(n,l),n.lanes=536870912,bo(null,t);if(Ih(n),(t=ct)?(t=Iy(t,Gn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:zi!==null?{id:Ps,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},a=np(t),a.return=n,n.child=a,$t=n,ct=null)):t=null,t===null)throw Hi(n);return n.lanes=536870912,null}return pu(n,l)}var f=t.memoizedState;if(f!==null){var x=f.dehydrated;if(Ih(n),h)if(n.flags&256)n.flags&=-257,n=x0(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(r(558));else if(Dt||Ga(t,n,a,!1),h=(a&t.childLanes)!==0,Dt||h){if(l=lt,l!==null&&(x=zl(l,a),x!==0&&x!==f.retryLane))throw f.retryLane=x,Yr(t,x),wn(l,t,x),Zh;Au(),n=x0(t,n,a)}else t=f.treeContext,ct=Kn(x.nextSibling),$t=n,Ge=!0,Bi=null,Gn=!1,t!==null&&rp(n,t),n=pu(n,l),n.flags|=4096;return n}return t=ii(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function yu(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function Jh(t,n,a,l,h){return Xr(n),a=Dh(t,n,a,l,void 0,h),l=Mh(),t!==null&&!Dt?(Oh(t,n,h),ui(t,n,h)):(Ge&&l&&mh(n),n.flags|=1,Wt(t,n,a,h),n.child)}function b0(t,n,a,l,h,f){return Xr(n),n.updateQueue=null,a=Ep(n,l,a,h),wp(t),l=Mh(),t!==null&&!Dt?(Oh(t,n,f),ui(t,n,f)):(Ge&&l&&mh(n),n.flags|=1,Wt(t,n,a,f),n.child)}function _0(t,n,a,l,h){if(Xr(n),n.stateNode===null){var f=Ba,x=a.contextType;typeof x=="object"&&x!==null&&(f=Xt(x)),f=new a(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Xh,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},Sh(n),x=a.contextType,f.context=typeof x=="object"&&x!==null?Xt(x):Ba,f.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&($h(n,a,x,l),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(x=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),x!==f.state&&Xh.enqueueReplaceState(f,f.state,null),go(n,l,f,h),mo(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){f=n.stateNode;var E=n.memoizedProps,O=na(a,E);f.props=O;var q=f.context,J=a.contextType;x=Ba,typeof J=="object"&&J!==null&&(x=Xt(J));var se=a.getDerivedStateFromProps;J=typeof se=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||q!==x)&&l0(n,f,l,x),Fi=!1;var G=n.memoizedState;f.state=G,go(n,l,f,h),mo(),q=n.memoizedState,E||G!==q||Fi?(typeof se=="function"&&($h(n,a,se,l),q=n.memoizedState),(O=Fi||a0(n,a,O,l,G,q,x))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=q),f.props=l,f.state=q,f.context=x,l=O):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,Nh(t,n),x=n.memoizedProps,J=na(a,x),f.props=J,se=n.pendingProps,G=f.context,q=a.contextType,O=Ba,typeof q=="object"&&q!==null&&(O=Xt(q)),E=a.getDerivedStateFromProps,(q=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==se||G!==O)&&l0(n,f,l,O),Fi=!1,G=n.memoizedState,f.state=G,go(n,l,f,h),mo();var Q=n.memoizedState;x!==se||G!==Q||Fi||t!==null&&t.dependencies!==null&&Zc(t.dependencies)?(typeof E=="function"&&($h(n,a,E,l),Q=n.memoizedState),(J=Fi||a0(n,a,J,l,G,Q,O)||t!==null&&t.dependencies!==null&&Zc(t.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,Q,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,Q,O)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Q),f.props=l,f.state=Q,f.context=O,l=J):(typeof f.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),l=!1)}return f=l,yu(t,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&l?(n.child=ea(n,t.child,null,h),n.child=ea(n,null,a,h)):Wt(t,n,a,h),n.memoizedState=f.state,t=n.child):t=ui(t,n,h),t}function w0(t,n,a,l){return Qr(),n.flags|=256,Wt(t,n,a,l),n.child}var ef={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tf(t){return{baseLanes:t,cachePool:dp()}}function nf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=kn),t}function E0(t,n,a){var l=n.pendingProps,h=!1,f=(n.flags&128)!==0,x;if((x=f)||(x=t!==null&&t.memoizedState===null?!1:(Et.current&2)!==0),x&&(h=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,t===null){if(Ge){if(h?Ki(n):Qi(),(t=ct)?(t=Iy(t,Gn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:zi!==null?{id:Ps,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},a=np(t),a.return=n,n.child=a,$t=n,ct=null)):t=null,t===null)throw Hi(n);return Uf(t)?n.lanes=32:n.lanes=536870912,null}var E=l.children;return l=l.fallback,h?(Qi(),h=n.mode,E=vu({mode:"hidden",children:E},h),l=Kr(l,h,a,null),E.return=n,l.return=n,E.sibling=l,n.child=E,l=n.child,l.memoizedState=tf(a),l.childLanes=nf(t,x,a),n.memoizedState=ef,bo(null,l)):(Ki(n),sf(n,E))}var O=t.memoizedState;if(O!==null&&(E=O.dehydrated,E!==null)){if(f)n.flags&256?(Ki(n),n.flags&=-257,n=rf(t,n,a)):n.memoizedState!==null?(Qi(),n.child=t.child,n.flags|=128,n=null):(Qi(),E=l.fallback,h=n.mode,l=vu({mode:"visible",children:l.children},h),E=Kr(E,h,a,null),E.flags|=2,l.return=n,E.return=n,l.sibling=E,n.child=l,ea(n,t.child,null,a),l=n.child,l.memoizedState=tf(a),l.childLanes=nf(t,x,a),n.memoizedState=ef,n=bo(null,l));else if(Ki(n),Uf(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var q=x.dgst;x=q,l=Error(r(419)),l.stack="",l.digest=x,lo({value:l,source:null,stack:null}),n=rf(t,n,a)}else if(Dt||Ga(t,n,a,!1),x=(a&t.childLanes)!==0,Dt||x){if(x=lt,x!==null&&(l=zl(x,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Yr(t,l),wn(x,t,l),Zh;Pf(E)||Au(),n=rf(t,n,a)}else Pf(E)?(n.flags|=192,n.child=t.child,n=null):(t=O.treeContext,ct=Kn(E.nextSibling),$t=n,Ge=!0,Bi=null,Gn=!1,t!==null&&rp(n,t),n=sf(n,l.children),n.flags|=4096);return n}return h?(Qi(),E=l.fallback,h=n.mode,O=t.child,q=O.sibling,l=ii(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,q!==null?E=ii(q,E):(E=Kr(E,h,a,null),E.flags|=2),E.return=n,l.return=n,l.sibling=E,n.child=l,bo(null,l),l=n.child,E=t.child.memoizedState,E===null?E=tf(a):(h=E.cachePool,h!==null?(O=It._currentValue,h=h.parent!==O?{parent:O,pool:O}:h):h=dp(),E={baseLanes:E.baseLanes|a,cachePool:h}),l.memoizedState=E,l.childLanes=nf(t,x,a),n.memoizedState=ef,bo(t.child,l)):(Ki(n),a=t.child,t=a.sibling,a=ii(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(x=n.deletions,x===null?(n.deletions=[t],n.flags|=16):x.push(t)),n.child=a,n.memoizedState=null,a)}function sf(t,n){return n=vu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function vu(t,n){return t=jn(22,t,null,n),t.lanes=0,t}function rf(t,n,a){return ea(n,t.child,null,a),t=sf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function T0(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),xh(t.return,n,a)}function af(t,n,a,l,h,f){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:f}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=h,x.treeForkCount=f)}function S0(t,n,a){var l=n.pendingProps,h=l.revealOrder,f=l.tail;l=l.children;var x=Et.current,E=(x&2)!==0;if(E?(x=x&1|2,n.flags|=128):x&=1,P(Et,x),Wt(t,n,l,a),l=Ge?ao:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&T0(t,a,n);else if(t.tag===19)T0(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&au(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),af(n,!1,h,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&au(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}af(n,!0,a,null,f,l);break;case"together":af(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function ui(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),Wi|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Ga(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=ii(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=ii(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function lf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Zc(t)))}function Y1(t,n,a){switch(n.tag){case 3:me(n,n.stateNode.containerInfo),qi(n,It,t.memoizedState.cache),Qr();break;case 27:case 5:Oe(n);break;case 4:me(n,n.stateNode.containerInfo);break;case 10:qi(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ih(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Ki(n),n.flags|=128,null):(a&n.child.childLanes)!==0?E0(t,n,a):(Ki(n),t=ui(t,n,a),t!==null?t.sibling:null);Ki(n);break;case 19:var h=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ga(t,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return S0(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),P(Et,Et.current),l)break;return null;case 22:return n.lanes=0,y0(t,n,a,n.pendingProps);case 24:qi(n,It,t.memoizedState.cache)}return ui(t,n,a)}function N0(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Dt=!0;else{if(!lf(t,a)&&(n.flags&128)===0)return Dt=!1,Y1(t,n,a);Dt=(t.flags&131072)!==0}else Dt=!1,Ge&&(n.flags&1048576)!==0&&ip(n,ao,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=Zr(n.elementType),n.type=t,typeof t=="function")dh(t)?(l=na(t,l),n.tag=1,n=_0(null,n,t,l,a)):(n.tag=0,n=Jh(null,n,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===oe){n.tag=11,n=m0(null,n,t,l,a);break e}else if(h===D){n.tag=14,n=g0(null,n,t,l,a);break e}}throw n=he(t)||t,Error(r(306,n,""))}}return n;case 0:return Jh(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=na(l,n.pendingProps),_0(t,n,l,h,a);case 3:e:{if(me(n,n.stateNode.containerInfo),t===null)throw Error(r(387));l=n.pendingProps;var f=n.memoizedState;h=f.element,Nh(t,n),go(n,l,null,a);var x=n.memoizedState;if(l=x.cache,qi(n,It,l),l!==f.cache&&bh(n,[It],a,!0),mo(),l=x.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=w0(t,n,l,a);break e}else if(l!==h){h=Hn(Error(r(424)),n),lo(h),n=w0(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ct=Kn(t.firstChild),$t=n,Ge=!0,Bi=null,Gn=!0,a=yp(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Qr(),l===h){n=ui(t,n,a);break e}Wt(t,n,l,a)}n=n.child}return n;case 26:return yu(t,n),t===null?(a=Ly(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ge||(a=n.type,t=n.pendingProps,l=Mu(Y.current).createElement(a),l[jt]=n,l[qt]=t,Zt(l,a,t),Ct(l),n.stateNode=l):n.memoizedState=Ly(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Oe(n),t===null&&Ge&&(l=n.stateNode=My(n.type,n.pendingProps,Y.current),$t=n,Gn=!0,h=ct,nr(n.type)?(zf=h,ct=Kn(l.firstChild)):ct=h),Wt(t,n,n.pendingProps.children,a),yu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Ge&&((h=l=ct)&&(l=w2(l,n.type,n.pendingProps,Gn),l!==null?(n.stateNode=l,$t=n,ct=Kn(l.firstChild),Gn=!1,h=!0):h=!1),h||Hi(n)),Oe(n),h=n.type,f=n.pendingProps,x=t!==null?t.memoizedProps:null,l=f.children,Of(h,f)?l=null:x!==null&&Of(h,x)&&(n.flags|=32),n.memoizedState!==null&&(h=Dh(t,n,L1,null,null,a),Oo._currentValue=h),yu(t,n),Wt(t,n,l,a),n.child;case 6:return t===null&&Ge&&((t=a=ct)&&(a=E2(a,n.pendingProps,Gn),a!==null?(n.stateNode=a,$t=n,ct=null,t=!0):t=!1),t||Hi(n)),null;case 13:return E0(t,n,a);case 4:return me(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=ea(n,null,l,a):Wt(t,n,l,a),n.child;case 11:return m0(t,n,n.type,n.pendingProps,a);case 7:return Wt(t,n,n.pendingProps,a),n.child;case 8:return Wt(t,n,n.pendingProps.children,a),n.child;case 12:return Wt(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,qi(n,n.type,l.value),Wt(t,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,Xr(n),h=Xt(h),l=l(h),n.flags|=1,Wt(t,n,l,a),n.child;case 14:return g0(t,n,n.type,n.pendingProps,a);case 15:return p0(t,n,n.type,n.pendingProps,a);case 19:return S0(t,n,a);case 31:return G1(t,n,a);case 22:return y0(t,n,a,n.pendingProps);case 24:return Xr(n),l=Xt(It),t===null?(h=Eh(),h===null&&(h=lt,f=_h(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),n.memoizedState={parent:l,cache:h},Sh(n),qi(n,It,h)):((t.lanes&a)!==0&&(Nh(t,n),go(n,null,null,a),mo()),h=t.memoizedState,f=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),qi(n,It,l)):(l=f.cache,qi(n,It,l),l!==h.cache&&bh(n,[It],a,!0))),Wt(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function di(t){t.flags|=4}function of(t,n,a,l,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(J0())t.flags|=8192;else throw Jr=nu,Th}else t.flags&=-16777217}function A0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Hy(n))if(J0())t.flags|=8192;else throw Jr=nu,Th}function xu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Sc():536870912,t.lanes|=n,sl|=n)}function _o(t,n){if(!Ge)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ut(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function K1(t,n,a){var l=n.pendingProps;switch(gh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(n),null;case 1:return ut(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),li(It),xe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Fa(n)?di(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,yh())),ut(n),null;case 26:var h=n.type,f=n.memoizedState;return t===null?(di(n),f!==null?(ut(n),A0(n,f)):(ut(n),of(n,h,null,l,a))):f?f!==t.memoizedState?(di(n),ut(n),A0(n,f)):(ut(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&di(n),ut(n),of(n,h,t,l,a)),null;case 27:if(at(n),a=Y.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&di(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return ut(n),null}t=k.current,Fa(n)?ap(n):(t=My(h,l,a),n.stateNode=t,di(n))}return ut(n),null;case 5:if(at(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&di(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return ut(n),null}if(f=k.current,Fa(n))ap(n);else{var x=Mu(Y.current);switch(f){case 1:f=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=x.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?x.createElement(h,{is:l.is}):x.createElement(h)}}f[jt]=n,f[qt]=l;e:for(x=n.child;x!==null;){if(x.tag===5||x.tag===6)f.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===n)break e;for(;x.sibling===null;){if(x.return===null||x.return===n)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}n.stateNode=f;e:switch(Zt(f,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&di(n)}}return ut(n),of(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&di(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(t=Y.current,Fa(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,h=$t,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[jt]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Ey(t.nodeValue,a)),t||Hi(n,!0)}else t=Mu(t).createTextNode(l),t[jt]=n,n.stateNode=t}return ut(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Fa(n),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[jt]=n}else Qr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ut(n),t=!1}else a=yh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(Rn(n),n):(Rn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return ut(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Fa(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[jt]=n}else Qr(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ut(n),h=!1}else h=yh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Rn(n),n):(Rn(n),null)}return Rn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),xu(n,n.updateQueue),ut(n),null);case 4:return xe(),t===null&&Rf(n.stateNode.containerInfo),ut(n),null;case 10:return li(n.type),ut(n),null;case 19:if($(Et),l=n.memoizedState,l===null)return ut(n),null;if(h=(n.flags&128)!==0,f=l.rendering,f===null)if(h)_o(l,!1);else{if(bt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=au(t),f!==null){for(n.flags|=128,_o(l,!1),t=f.updateQueue,n.updateQueue=t,xu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)tp(a,t),a=a.sibling;return P(Et,Et.current&1|2),Ge&&ri(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&Ht()>Tu&&(n.flags|=128,h=!0,_o(l,!1),n.lanes=4194304)}else{if(!h)if(t=au(f),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,xu(n,t),_o(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Ge)return ut(n),null}else 2*Ht()-l.renderingStartTime>Tu&&a!==536870912&&(n.flags|=128,h=!0,_o(l,!1),n.lanes=4194304);l.isBackwards?(f.sibling=n.child,n.child=f):(t=l.last,t!==null?t.sibling=f:n.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ht(),t.sibling=null,a=Et.current,P(Et,h?a&1|2:a&1),Ge&&ri(n,l.treeForkCount),t):(ut(n),null);case 22:case 23:return Rn(n),Rh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(ut(n),n.subtreeFlags&6&&(n.flags|=8192)):ut(n),a=n.updateQueue,a!==null&&xu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&$(Wr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),li(It),ut(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function Q1(t,n){switch(gh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return li(It),xe(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return at(n),null;case 31:if(n.memoizedState!==null){if(Rn(n),n.alternate===null)throw Error(r(340));Qr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Rn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Qr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return $(Et),null;case 4:return xe(),null;case 10:return li(n.type),null;case 22:case 23:return Rn(n),Rh(),t!==null&&$(Wr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return li(It),null;case 25:return null;default:return null}}function j0(t,n){switch(gh(n),n.tag){case 3:li(It),xe();break;case 26:case 27:case 5:at(n);break;case 4:xe();break;case 31:n.memoizedState!==null&&Rn(n);break;case 13:Rn(n);break;case 19:$(Et);break;case 10:li(n.type);break;case 22:case 23:Rn(n),Rh(),t!==null&&$(Wr);break;case 24:li(It)}}function wo(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,x=a.inst;l=f(),x.destroy=l}a=a.next}while(a!==h)}}catch(E){et(n,n.return,E)}}function $i(t,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var x=l.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,h=n;var O=a,q=E;try{q()}catch(J){et(h,O,J)}}}l=l.next}while(l!==f)}}catch(J){et(n,n.return,J)}}function C0(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{xp(n,a)}catch(l){et(t,t.return,l)}}}function R0(t,n,a){a.props=na(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){et(t,n,l)}}function Eo(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){et(t,n,h)}}function zs(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){et(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){et(t,n,h)}else a.current=null}function I0(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){et(t,t.return,h)}}function cf(t,n,a){try{var l=t.stateNode;p2(l,t.type,a,n),l[qt]=n}catch(h){et(t,t.return,h)}}function k0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&nr(t.type)||t.tag===4}function uf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||k0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&nr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function df(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=ls));else if(l!==4&&(l===27&&nr(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(df(t,n,a),t=t.sibling;t!==null;)df(t,n,a),t=t.sibling}function bu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&nr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(bu(t,n,a),t=t.sibling;t!==null;)bu(t,n,a),t=t.sibling}function D0(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Zt(n,l,a),n[jt]=t,n[qt]=a}catch(f){et(t,t.return,f)}}var hi=!1,Mt=!1,hf=!1,M0=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function $1(t,n){if(t=t.containerInfo,Df=Bu,t=Yg(t),ih(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var x=0,E=-1,O=-1,q=0,J=0,se=t,G=null;t:for(;;){for(var Q;se!==a||h!==0&&se.nodeType!==3||(E=x+h),se!==f||l!==0&&se.nodeType!==3||(O=x+l),se.nodeType===3&&(x+=se.nodeValue.length),(Q=se.firstChild)!==null;)G=se,se=Q;for(;;){if(se===t)break t;if(G===a&&++q===h&&(E=x),G===f&&++J===l&&(O=x),(Q=se.nextSibling)!==null)break;se=G,G=se.parentNode}se=Q}a=E===-1||O===-1?null:{start:E,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Mf={focusedElem:t,selectionRange:a},Bu=!1,Gt=n;Gt!==null;)if(n=Gt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Gt=t;else for(;Gt!==null;){switch(n=Gt,f=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=n,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var we=na(a.type,h);t=l.getSnapshotBeforeUpdate(we,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ae){et(a,a.return,Ae)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Lf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Lf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,Gt=t;break}Gt=n.return}}function O0(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:mi(t,a),l&4&&wo(5,a);break;case 1:if(mi(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(x){et(a,a.return,x)}else{var h=na(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(x){et(a,a.return,x)}}l&64&&C0(a),l&512&&Eo(a,a.return);break;case 3:if(mi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{xp(t,n)}catch(x){et(a,a.return,x)}}break;case 27:n===null&&l&4&&D0(a);case 26:case 5:mi(t,a),n===null&&l&4&&I0(a),l&512&&Eo(a,a.return);break;case 12:mi(t,a);break;case 31:mi(t,a),l&4&&P0(t,a);break;case 13:mi(t,a),l&4&&U0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=i2.bind(null,a),T2(t,a))));break;case 22:if(l=a.memoizedState!==null||hi,!l){n=n!==null&&n.memoizedState!==null||Mt,h=hi;var f=Mt;hi=l,(Mt=n)&&!f?gi(t,a,(a.subtreeFlags&8772)!==0):mi(t,a),hi=h,Mt=f}break;case 30:break;default:mi(t,a)}}function V0(t){var n=t.alternate;n!==null&&(t.alternate=null,V0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Aa(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var mt=null,vn=!1;function fi(t,n,a){for(a=a.child;a!==null;)L0(t,n,a),a=a.sibling}function L0(t,n,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(ss,a)}catch{}switch(a.tag){case 26:Mt||zs(a,n),fi(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||zs(a,n);var l=mt,h=vn;nr(a.type)&&(mt=a.stateNode,vn=!1),fi(t,n,a),ko(a.stateNode),mt=l,vn=h;break;case 5:Mt||zs(a,n);case 6:if(l=mt,h=vn,mt=null,fi(t,n,a),mt=l,vn=h,mt!==null)if(vn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(a.stateNode)}catch(f){et(a,n,f)}else try{mt.removeChild(a.stateNode)}catch(f){et(a,n,f)}break;case 18:mt!==null&&(vn?(t=mt,Cy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),dl(t)):Cy(mt,a.stateNode));break;case 4:l=mt,h=vn,mt=a.stateNode.containerInfo,vn=!0,fi(t,n,a),mt=l,vn=h;break;case 0:case 11:case 14:case 15:$i(2,a,n),Mt||$i(4,a,n),fi(t,n,a);break;case 1:Mt||(zs(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&R0(a,n,l)),fi(t,n,a);break;case 21:fi(t,n,a);break;case 22:Mt=(l=Mt)||a.memoizedState!==null,fi(t,n,a),Mt=l;break;default:fi(t,n,a)}}function P0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{dl(t)}catch(a){et(n,n.return,a)}}}function U0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{dl(t)}catch(a){et(n,n.return,a)}}function X1(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new M0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new M0),n;default:throw Error(r(435,t.tag))}}function _u(t,n){var a=X1(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=r2.bind(null,t,l);l.then(h,h)}})}function xn(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,x=n,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(nr(E.type)){mt=E.stateNode,vn=!1;break e}break;case 5:mt=E.stateNode,vn=!1;break e;case 3:case 4:mt=E.stateNode.containerInfo,vn=!0;break e}E=E.return}if(mt===null)throw Error(r(160));L0(f,x,h),mt=null,vn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)z0(n,t),n=n.sibling}var fs=null;function z0(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:xn(n,t),bn(t),l&4&&($i(3,t,t.return),wo(3,t),$i(5,t,t.return));break;case 1:xn(n,t),bn(t),l&512&&(Mt||a===null||zs(a,a.return)),l&64&&hi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=fs;if(xn(n,t),bn(t),l&512&&(Mt||a===null||zs(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Ns]||f[jt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Zt(f,l,a),f[jt]=t,Ct(f),l=f;break e;case"link":var x=zy("link","href",h).get(l+(a.href||""));if(x){for(var E=0;E<x.length;E++)if(f=x[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(E,1);break t}}f=h.createElement(l),Zt(f,l,a),h.head.appendChild(f);break;case"meta":if(x=zy("meta","content",h).get(l+(a.content||""))){for(E=0;E<x.length;E++)if(f=x[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(E,1);break t}}f=h.createElement(l),Zt(f,l,a),h.head.appendChild(f);break;default:throw Error(r(468,l))}f[jt]=t,Ct(f),l=f}t.stateNode=l}else By(h,t.type,t.stateNode);else t.stateNode=Uy(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?By(h,t.type,t.stateNode):Uy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&cf(t,t.memoizedProps,a.memoizedProps)}break;case 27:xn(n,t),bn(t),l&512&&(Mt||a===null||zs(a,a.return)),a!==null&&l&4&&cf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(xn(n,t),bn(t),l&512&&(Mt||a===null||zs(a,a.return)),t.flags&32){h=t.stateNode;try{yn(h,"")}catch(we){et(t,t.return,we)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,cf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(hf=!0);break;case 6:if(xn(n,t),bn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(we){et(t,t.return,we)}}break;case 3:if(Lu=null,h=fs,fs=Ou(n.containerInfo),xn(n,t),fs=h,bn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{dl(n.containerInfo)}catch(we){et(t,t.return,we)}hf&&(hf=!1,B0(t));break;case 4:l=fs,fs=Ou(t.stateNode.containerInfo),xn(n,t),bn(t),fs=l;break;case 12:xn(n,t),bn(t);break;case 31:xn(n,t),bn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_u(t,l)));break;case 13:xn(n,t),bn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Eu=Ht()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_u(t,l)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,q=hi,J=Mt;if(hi=q||h,Mt=J||O,xn(n,t),Mt=J,hi=q,bn(t),l&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||O||hi||Mt||sa(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){O=a=n;try{if(f=O.stateNode,h)x=f.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=O.stateNode;var se=O.memoizedProps.style,G=se!=null&&se.hasOwnProperty("display")?se.display:null;E.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(we){et(O,O.return,we)}}}else if(n.tag===6){if(a===null){O=n;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(we){et(O,O.return,we)}}}else if(n.tag===18){if(a===null){O=n;try{var Q=O.stateNode;h?Ry(Q,!0):Ry(O.stateNode,!1)}catch(we){et(O,O.return,we)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,_u(t,a))));break;case 19:xn(n,t),bn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_u(t,l)));break;case 30:break;case 21:break;default:xn(n,t),bn(t)}}function bn(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(k0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,f=uf(t);bu(t,f,h);break;case 5:var x=a.stateNode;a.flags&32&&(yn(x,""),a.flags&=-33);var E=uf(t);bu(t,E,x);break;case 3:case 4:var O=a.stateNode.containerInfo,q=uf(t);df(t,q,O);break;default:throw Error(r(161))}}catch(J){et(t,t.return,J)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function B0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;B0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function mi(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)O0(t,n.alternate,n),n=n.sibling}function sa(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:$i(4,n,n.return),sa(n);break;case 1:zs(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&R0(n,n.return,a),sa(n);break;case 27:ko(n.stateNode);case 26:case 5:zs(n,n.return),sa(n);break;case 22:n.memoizedState===null&&sa(n);break;case 30:sa(n);break;default:sa(n)}t=t.sibling}}function gi(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,f=n,x=f.flags;switch(f.tag){case 0:case 11:case 15:gi(h,f,a),wo(4,f);break;case 1:if(gi(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){et(l,l.return,q)}if(l=f,h=l.updateQueue,h!==null){var E=l.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)vp(O[h],E)}catch(q){et(l,l.return,q)}}a&&x&64&&C0(f),Eo(f,f.return);break;case 27:D0(f);case 26:case 5:gi(h,f,a),a&&l===null&&x&4&&I0(f),Eo(f,f.return);break;case 12:gi(h,f,a);break;case 31:gi(h,f,a),a&&x&4&&P0(h,f);break;case 13:gi(h,f,a),a&&x&4&&U0(h,f);break;case 22:f.memoizedState===null&&gi(h,f,a),Eo(f,f.return);break;case 30:break;default:gi(h,f,a)}n=n.sibling}}function ff(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&oo(a))}function mf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oo(t))}function ms(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)H0(t,n,a,l),n=n.sibling}function H0(t,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:ms(t,n,a,l),h&2048&&wo(9,n);break;case 1:ms(t,n,a,l);break;case 3:ms(t,n,a,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oo(t)));break;case 12:if(h&2048){ms(t,n,a,l),t=n.stateNode;try{var f=n.memoizedProps,x=f.id,E=f.onPostCommit;typeof E=="function"&&E(x,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){et(n,n.return,O)}}else ms(t,n,a,l);break;case 31:ms(t,n,a,l);break;case 13:ms(t,n,a,l);break;case 23:break;case 22:f=n.stateNode,x=n.alternate,n.memoizedState!==null?f._visibility&2?ms(t,n,a,l):To(t,n):f._visibility&2?ms(t,n,a,l):(f._visibility|=2,el(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&ff(x,n);break;case 24:ms(t,n,a,l),h&2048&&mf(n.alternate,n);break;default:ms(t,n,a,l)}}function el(t,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=t,x=n,E=a,O=l,q=x.flags;switch(x.tag){case 0:case 11:case 15:el(f,x,E,O,h),wo(8,x);break;case 23:break;case 22:var J=x.stateNode;x.memoizedState!==null?J._visibility&2?el(f,x,E,O,h):To(f,x):(J._visibility|=2,el(f,x,E,O,h)),h&&q&2048&&ff(x.alternate,x);break;case 24:el(f,x,E,O,h),h&&q&2048&&mf(x.alternate,x);break;default:el(f,x,E,O,h)}n=n.sibling}}function To(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,h=l.flags;switch(l.tag){case 22:To(a,l),h&2048&&ff(l.alternate,l);break;case 24:To(a,l),h&2048&&mf(l.alternate,l);break;default:To(a,l)}n=n.sibling}}var So=8192;function tl(t,n,a){if(t.subtreeFlags&So)for(t=t.child;t!==null;)q0(t,n,a),t=t.sibling}function q0(t,n,a){switch(t.tag){case 26:tl(t,n,a),t.flags&So&&t.memoizedState!==null&&V2(a,fs,t.memoizedState,t.memoizedProps);break;case 5:tl(t,n,a);break;case 3:case 4:var l=fs;fs=Ou(t.stateNode.containerInfo),tl(t,n,a),fs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=So,So=16777216,tl(t,n,a),So=l):tl(t,n,a));break;default:tl(t,n,a)}}function F0(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function No(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Gt=l,Y0(l,t)}F0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)G0(t),t=t.sibling}function G0(t){switch(t.tag){case 0:case 11:case 15:No(t),t.flags&2048&&$i(9,t,t.return);break;case 3:No(t);break;case 12:No(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,wu(t)):No(t);break;default:No(t)}}function wu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Gt=l,Y0(l,t)}F0(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:$i(8,n,n.return),wu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,wu(n));break;default:wu(n)}t=t.sibling}}function Y0(t,n){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:$i(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:oo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Gt=l;else e:for(a=t;Gt!==null;){l=Gt;var h=l.sibling,f=l.return;if(V0(l),l===a){Gt=null;break e}if(h!==null){h.return=f,Gt=h;break e}Gt=f}}}var W1={getCacheForType:function(t){var n=Xt(It),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return Xt(It).controller.signal}},Z1=typeof WeakMap=="function"?WeakMap:Map,Xe=0,lt=null,Pe=null,ze=0,Je=0,In=null,Xi=!1,nl=!1,gf=!1,pi=0,bt=0,Wi=0,ia=0,pf=0,kn=0,sl=0,Ao=null,_n=null,yf=!1,Eu=0,K0=0,Tu=1/0,Su=null,Zi=null,Ut=0,Ji=null,il=null,yi=0,vf=0,xf=null,Q0=null,jo=0,bf=null;function Dn(){return(Xe&2)!==0&&ze!==0?ze&-ze:F.T!==null?Nf():Nc()}function $0(){if(kn===0)if((ze&536870912)===0||Ge){var t=Ir;Ir<<=1,(Ir&3932160)===0&&(Ir=262144),kn=t}else kn=536870912;return t=Cn.current,t!==null&&(t.flags|=32),kn}function wn(t,n,a){(t===lt&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(rl(t,0),er(t,ze,kn,!1)),kr(t,a),((Xe&2)===0||t!==lt)&&(t===lt&&((Xe&2)===0&&(ia|=a),bt===4&&er(t,ze,kn,!1)),Bs(t))}function X0(t,n,a){if((Xe&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||is(t,n),h=l?t2(t,n):wf(t,n,!0),f=l;do{if(h===0){nl&&!l&&er(t,n,0,!1);break}else{if(a=t.current.alternate,f&&!J1(a)){h=wf(t,n,!1),f=!1;continue}if(h===2){if(f=n,t.errorRecoveryDisabledLanes&f)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var E=t;h=Ao;var O=E.current.memoizedState.isDehydrated;if(O&&(rl(E,x).flags|=256),x=wf(E,x,!1),x!==2){if(gf&&!O){E.errorRecoveryDisabledLanes|=f,ia|=f,h=4;break e}f=_n,_n=h,f!==null&&(_n===null?_n=f:_n.push.apply(_n,f))}h=x}if(f=!1,h!==2)continue}}if(h===1){rl(t,0),er(t,n,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:er(l,n,kn,!Xi);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=Eu+300-Ht(),10<h)){if(er(l,n,kn,!Xi),Es(l,0,!0)!==0)break e;yi=n,l.timeoutHandle=Ay(W0.bind(null,l,a,_n,Su,yf,n,kn,ia,sl,Xi,f,"Throttled",-0,0),h);break e}W0(l,a,_n,Su,yf,n,kn,ia,sl,Xi,f,null,-0,0)}}break}while(!0);Bs(t)}function W0(t,n,a,l,h,f,x,E,O,q,J,se,G,Q){if(t.timeoutHandle=-1,se=n.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ls},q0(n,f,se);var we=(f&62914560)===f?Eu-Ht():(f&4194048)===f?K0-Ht():0;if(we=L2(se,we),we!==null){yi=f,t.cancelPendingCommit=we(ry.bind(null,t,n,f,a,l,h,x,E,O,J,se,null,G,Q)),er(t,f,x,!q);return}}ry(t,n,f,a,l,h,x,E,O)}function J1(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!An(f(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function er(t,n,a,l){n&=~pf,n&=~ia,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var f=31-_t(h),x=1<<f;l[f]=-1,h&=~x}a!==0&&Dr(t,a,n)}function Nu(){return(Xe&6)===0?(Co(0),!1):!0}function _f(){if(Pe!==null){if(Je===0)var t=Pe.return;else t=Pe,ai=$r=null,Vh(t),$a=null,uo=0,t=Pe;for(;t!==null;)j0(t.alternate,t),t=t.return;Pe=null}}function rl(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,x2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),yi=0,_f(),lt=t,Pe=a=ii(t.current,null),ze=n,Je=0,In=null,Xi=!1,nl=is(t,n),gf=!1,sl=kn=pf=ia=Wi=bt=0,_n=Ao=null,yf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-_t(l),f=1<<h;n|=t[h],l&=~f}return pi=n,Kc(),a}function Z0(t,n){Me=null,F.H=xo,n===Qa||n===tu?(n=mp(),Je=3):n===Th?(n=mp(),Je=4):Je=n===Zh?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,In=n,Pe===null&&(bt=1,gu(t,Hn(n,t.current)))}function J0(){var t=Cn.current;return t===null?!0:(ze&4194048)===ze?Yn===null:(ze&62914560)===ze||(ze&536870912)!==0?t===Yn:!1}function ey(){var t=F.H;return F.H=xo,t===null?xo:t}function ty(){var t=F.A;return F.A=W1,t}function Au(){bt=4,Xi||(ze&4194048)!==ze&&Cn.current!==null||(nl=!0),(Wi&134217727)===0&&(ia&134217727)===0||lt===null||er(lt,ze,kn,!1)}function wf(t,n,a){var l=Xe;Xe|=2;var h=ey(),f=ty();(lt!==t||ze!==n)&&(Su=null,rl(t,n)),n=!1;var x=bt;e:do try{if(Je!==0&&Pe!==null){var E=Pe,O=In;switch(Je){case 8:_f(),x=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(n=!0);var q=Je;if(Je=0,In=null,al(t,E,O,q),a&&nl){x=0;break e}break;default:q=Je,Je=0,In=null,al(t,E,O,q)}}e2(),x=bt;break}catch(J){Z0(t,J)}while(!0);return n&&t.shellSuspendCounter++,ai=$r=null,Xe=l,F.H=h,F.A=f,Pe===null&&(lt=null,ze=0,Kc()),x}function e2(){for(;Pe!==null;)ny(Pe)}function t2(t,n){var a=Xe;Xe|=2;var l=ey(),h=ty();lt!==t||ze!==n?(Su=null,Tu=Ht()+500,rl(t,n)):nl=is(t,n);e:do try{if(Je!==0&&Pe!==null){n=Pe;var f=In;t:switch(Je){case 1:Je=0,In=null,al(t,n,f,1);break;case 2:case 9:if(hp(f)){Je=0,In=null,sy(n);break}n=function(){Je!==2&&Je!==9||lt!==t||(Je=7),Bs(t)},f.then(n,n);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:hp(f)?(Je=0,In=null,sy(n)):(Je=0,In=null,al(t,n,f,7));break;case 5:var x=null;switch(Pe.tag){case 26:x=Pe.memoizedState;case 5:case 27:var E=Pe;if(x?Hy(x):E.stateNode.complete){Je=0,In=null;var O=E.sibling;if(O!==null)Pe=O;else{var q=E.return;q!==null?(Pe=q,ju(q)):Pe=null}break t}}Je=0,In=null,al(t,n,f,5);break;case 6:Je=0,In=null,al(t,n,f,6);break;case 8:_f(),bt=6;break e;default:throw Error(r(462))}}n2();break}catch(J){Z0(t,J)}while(!0);return ai=$r=null,F.H=l,F.A=h,Xe=a,Pe!==null?0:(lt=null,ze=0,Kc(),bt)}function n2(){for(;Pe!==null&&!Pl();)ny(Pe)}function ny(t){var n=N0(t.alternate,t,pi);t.memoizedProps=t.pendingProps,n===null?ju(t):Pe=n}function sy(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=b0(a,n,n.pendingProps,n.type,void 0,ze);break;case 11:n=b0(a,n,n.pendingProps,n.type.render,n.ref,ze);break;case 5:Vh(n);default:j0(a,n),n=Pe=tp(n,pi),n=N0(a,n,pi)}t.memoizedProps=t.pendingProps,n===null?ju(t):Pe=n}function al(t,n,a,l){ai=$r=null,Vh(n),$a=null,uo=0;var h=n.return;try{if(F1(t,h,n,a,ze)){bt=1,gu(t,Hn(a,t.current)),Pe=null;return}}catch(f){if(h!==null)throw Pe=h,f;bt=1,gu(t,Hn(a,t.current)),Pe=null;return}n.flags&32768?(Ge||l===1?t=!0:nl||(ze&536870912)!==0?t=!1:(Xi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),iy(n,t)):ju(n)}function ju(t){var n=t;do{if((n.flags&32768)!==0){iy(n,Xi);return}t=n.return;var a=K1(n.alternate,n,pi);if(a!==null){Pe=a;return}if(n=n.sibling,n!==null){Pe=n;return}Pe=n=t}while(n!==null);bt===0&&(bt=5)}function iy(t,n){do{var a=Q1(t.alternate,t);if(a!==null){a.flags&=32767,Pe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Pe=t;return}Pe=t=a}while(t!==null);bt=6,Pe=null}function ry(t,n,a,l,h,f,x,E,O){t.cancelPendingCommit=null;do Cu();while(Ut!==0);if((Xe&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=ch,eh(t,a,f,x,E,O),t===lt&&(Pe=lt=null,ze=0),il=n,Ji=t,yi=a,vf=f,xf=h,Q0=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,a2(bs,function(){return uy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,h=ue.p,ue.p=2,x=Xe,Xe|=4;try{$1(t,n,a)}finally{Xe=x,ue.p=h,F.T=l}}Ut=1,ay(),ly(),oy()}}function ay(){if(Ut===1){Ut=0;var t=Ji,n=il,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var l=ue.p;ue.p=2;var h=Xe;Xe|=4;try{z0(n,t);var f=Mf,x=Yg(t.containerInfo),E=f.focusedElem,O=f.selectionRange;if(x!==E&&E&&E.ownerDocument&&Gg(E.ownerDocument.documentElement,E)){if(O!==null&&ih(E)){var q=O.start,J=O.end;if(J===void 0&&(J=q),"selectionStart"in E)E.selectionStart=q,E.selectionEnd=Math.min(J,E.value.length);else{var se=E.ownerDocument||document,G=se&&se.defaultView||window;if(G.getSelection){var Q=G.getSelection(),we=E.textContent.length,Ae=Math.min(O.start,we),rt=O.end===void 0?Ae:Math.min(O.end,we);!Q.extend&&Ae>rt&&(x=rt,rt=Ae,Ae=x);var U=Fg(E,Ae),V=Fg(E,rt);if(U&&V&&(Q.rangeCount!==1||Q.anchorNode!==U.node||Q.anchorOffset!==U.offset||Q.focusNode!==V.node||Q.focusOffset!==V.offset)){var H=se.createRange();H.setStart(U.node,U.offset),Q.removeAllRanges(),Ae>rt?(Q.addRange(H),Q.extend(V.node,V.offset)):(H.setEnd(V.node,V.offset),Q.addRange(H))}}}}for(se=[],Q=E;Q=Q.parentNode;)Q.nodeType===1&&se.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<se.length;E++){var ne=se[E];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Bu=!!Df,Mf=Df=null}finally{Xe=h,ue.p=l,F.T=a}}t.current=n,Ut=2}}function ly(){if(Ut===2){Ut=0;var t=Ji,n=il,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var l=ue.p;ue.p=2;var h=Xe;Xe|=4;try{O0(t,n.alternate,n)}finally{Xe=h,ue.p=l,F.T=a}}Ut=3}}function oy(){if(Ut===4||Ut===3){Ut=0,Rr();var t=Ji,n=il,a=yi,l=Q0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ut=5:(Ut=0,il=Ji=null,cy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Zi=null),ei(a),n=n.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(ss,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=F.T,h=ue.p,ue.p=2,F.T=null;try{for(var f=t.onRecoverableError,x=0;x<l.length;x++){var E=l[x];f(E.value,{componentStack:E.stack})}}finally{F.T=n,ue.p=h}}(yi&3)!==0&&Cu(),Bs(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===bf?jo++:(jo=0,bf=t):jo=0,Co(0)}}function cy(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,oo(n)))}function Cu(){return ay(),ly(),oy(),uy()}function uy(){if(Ut!==5)return!1;var t=Ji,n=vf;vf=0;var a=ei(yi),l=F.T,h=ue.p;try{ue.p=32>a?32:a,F.T=null,a=xf,xf=null;var f=Ji,x=yi;if(Ut=0,il=Ji=null,yi=0,(Xe&6)!==0)throw Error(r(331));var E=Xe;if(Xe|=4,G0(f.current),H0(f,f.current,x,a),Xe=E,Co(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(ss,f)}catch{}return!0}finally{ue.p=h,F.T=l,cy(t,n)}}function dy(t,n,a){n=Hn(a,n),n=Wh(t.stateNode,n,2),t=Yi(t,n,2),t!==null&&(kr(t,2),Bs(t))}function et(t,n,a){if(t.tag===3)dy(t,t,a);else for(;n!==null;){if(n.tag===3){dy(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Zi===null||!Zi.has(l))){t=Hn(a,t),a=h0(2),l=Yi(n,a,2),l!==null&&(f0(a,l,n,t),kr(l,2),Bs(l));break}}n=n.return}}function Ef(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Z1;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(gf=!0,h.add(a),t=s2.bind(null,t,n,a),n.then(t,t))}function s2(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,lt===t&&(ze&a)===a&&(bt===4||bt===3&&(ze&62914560)===ze&&300>Ht()-Eu?(Xe&2)===0&&rl(t,0):pf|=a,sl===ze&&(sl=0)),Bs(t)}function hy(t,n){n===0&&(n=Sc()),t=Yr(t,n),t!==null&&(kr(t,n),Bs(t))}function i2(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),hy(t,a)}function r2(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),hy(t,a)}function a2(t,n){return vt(t,n)}var Ru=null,ll=null,Tf=!1,Iu=!1,Sf=!1,tr=0;function Bs(t){t!==ll&&t.next===null&&(ll===null?Ru=ll=t:ll=ll.next=t),Iu=!0,Tf||(Tf=!0,o2())}function Co(t,n){if(!Sf&&Iu){Sf=!0;do for(var a=!1,l=Ru;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var x=l.suspendedLanes,E=l.pingedLanes;f=(1<<31-_t(42|t)+1)-1,f&=h&~(x&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,py(l,f))}else f=ze,f=Es(l,l===lt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||is(l,f)||(a=!0,py(l,f));l=l.next}while(a);Sf=!1}}function l2(){fy()}function fy(){Iu=Tf=!1;var t=0;tr!==0&&v2()&&(t=tr);for(var n=Ht(),a=null,l=Ru;l!==null;){var h=l.next,f=my(l,n);f===0?(l.next=null,a===null?Ru=h:a.next=h,h===null&&(ll=a)):(a=l,(t!==0||(f&3)!==0)&&(Iu=!0)),l=h}Ut!==0&&Ut!==5||Co(t),tr!==0&&(tr=0)}function my(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var x=31-_t(f),E=1<<x,O=h[x];O===-1?((E&a)===0||(E&l)!==0)&&(h[x]=Jd(E,n)):O<=n&&(t.expiredLanes|=E),f&=~E}if(n=lt,a=ze,a=Es(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ns(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||is(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&ns(l),ei(a)){case 2:case 8:a=Ri;break;case 32:a=bs;break;case 268435456:a=Ta;break;default:a=bs}return l=gy.bind(null,t),a=vt(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&ns(l),t.callbackPriority=2,t.callbackNode=null,2}function gy(t,n){if(Ut!==0&&Ut!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Cu()&&t.callbackNode!==a)return null;var l=ze;return l=Es(t,t===lt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(X0(t,l,n),my(t,Ht()),t.callbackNode!=null&&t.callbackNode===a?gy.bind(null,t):null)}function py(t,n){if(Cu())return null;X0(t,n,!0)}function o2(){b2(function(){(Xe&6)!==0?vt(Js,l2):fy()})}function Nf(){if(tr===0){var t=Ya;t===0&&(t=_s,_s<<=1,(_s&261888)===0&&(_s=256)),tr=t}return tr}function yy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ia(""+t)}function vy(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function c2(t,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var f=yy((h[qt]||null).action),x=l.submitter;x&&(n=(n=x[qt]||null)?yy(n.formAction):x.getAttribute("formAction"),n!==null&&(f=n,x=null));var E=new Ms("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(tr!==0){var O=x?vy(h,x):new FormData(h);Gh(a,{pending:!0,data:O,method:h.method,action:f},null,O)}}else typeof f=="function"&&(E.preventDefault(),O=x?vy(h,x):new FormData(h),Gh(a,{pending:!0,data:O,method:h.method,action:f},f,O))},currentTarget:h}]})}}for(var Af=0;Af<oh.length;Af++){var jf=oh[Af],u2=jf.toLowerCase(),d2=jf[0].toUpperCase()+jf.slice(1);hs(u2,"on"+d2)}hs($g,"onAnimationEnd"),hs(Xg,"onAnimationIteration"),hs(Wg,"onAnimationStart"),hs("dblclick","onDoubleClick"),hs("focusin","onFocus"),hs("focusout","onBlur"),hs(A1,"onTransitionRun"),hs(j1,"onTransitionStart"),hs(C1,"onTransitionCancel"),hs(Zg,"onTransitionEnd"),Rs("onMouseEnter",["mouseout","mouseover"]),Rs("onMouseLeave",["mouseout","mouseover"]),Rs("onPointerEnter",["pointerout","pointerover"]),Rs("onPointerLeave",["pointerout","pointerover"]),Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ro));function xy(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(n)for(var x=l.length-1;0<=x;x--){var E=l[x],O=E.instance,q=E.currentTarget;if(E=E.listener,O!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=q;try{f(h)}catch(J){Yc(J)}h.currentTarget=null,f=O}else for(x=0;x<l.length;x++){if(E=l[x],O=E.instance,q=E.currentTarget,E=E.listener,O!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=q;try{f(h)}catch(J){Yc(J)}h.currentTarget=null,f=O}}}}function Ue(t,n){var a=n[Na];a===void 0&&(a=n[Na]=new Set);var l=t+"__bubble";a.has(l)||(by(n,t,2,!1),a.add(l))}function Cf(t,n,a){var l=0;n&&(l|=4),by(a,t,l,n)}var ku="_reactListening"+Math.random().toString(36).slice(2);function Rf(t){if(!t[ku]){t[ku]=!0,Bl.forEach(function(a){a!=="selectionchange"&&(h2.has(a)||Cf(a,!1,t),Cf(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[ku]||(n[ku]=!0,Cf("selectionchange",!1,n))}}function by(t,n,a,l){switch($y(n)){case 2:var h=z2;break;case 8:h=B2;break;default:h=Gf}a=h.bind(null,n,a,t),h=void 0,!Pr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function If(t,n,a,l,h){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var E=l.stateNode.containerInfo;if(E===h)break;if(x===4)for(x=l.return;x!==null;){var O=x.tag;if((O===3||O===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;E!==null;){if(x=As(E),x===null)return;if(O=x.tag,O===5||O===6||O===26||O===27){l=f=x;continue e}E=E.parentNode}}l=l.return}Vi(function(){var q=f,J=Pn(a),se=[];e:{var G=Jg.get(t);if(G!==void 0){var Q=Ms,we=t;switch(t){case"keypress":if(zr(a)===0)break e;case"keydown":case"keyup":Q=qc;break;case"focusin":we="focus",Q=Hr;break;case"focusout":we="blur",Q=Hr;break;case"beforeblur":case"afterblur":Q=Hr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=g;break;case $g:case Xg:case Wg:Q=Vc;break;case Zg:Q=S;break;case"scroll":case"scrollend":Q=Jl;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=Lc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=si;break;case"toggle":case"beforetoggle":Q=De}var Ae=(n&4)!==0,rt=!Ae&&(t==="scroll"||t==="scrollend"),U=Ae?G!==null?G+"Capture":null:G;Ae=[];for(var V=q,H;V!==null;){var ne=V;if(H=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||H===null||U===null||(ne=os(V,U),ne!=null&&Ae.push(Io(V,ne,H))),rt)break;V=V.return}0<Ae.length&&(G=new Q(G,we,null,a,J),se.push({event:G,listeners:Ae}))}}if((n&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",G&&a!==Xl&&(we=a.relatedTarget||a.fromElement)&&(As(we)||we[Ss]))break e;if((Q||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,Q?(we=a.relatedTarget||a.toElement,Q=q,we=we?As(we):null,we!==null&&(rt=d(we),Ae=we.tag,we!==rt||Ae!==5&&Ae!==27&&Ae!==6)&&(we=null)):(Q=null,we=q),Q!==we)){if(Ae=eo,ne="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Ae=si,ne="onPointerLeave",U="onPointerEnter",V="pointer"),rt=Q==null?G:Sn(Q),H=we==null?G:Sn(we),G=new Ae(ne,V+"leave",Q,a,J),G.target=rt,G.relatedTarget=H,ne=null,As(J)===q&&(Ae=new Ae(U,V+"enter",we,a,J),Ae.target=H,Ae.relatedTarget=rt,ne=Ae),rt=ne,Q&&we)t:{for(Ae=f2,U=Q,V=we,H=0,ne=U;ne;ne=Ae(ne))H++;ne=0;for(var Se=V;Se;Se=Ae(Se))ne++;for(;0<H-ne;)U=Ae(U),H--;for(;0<ne-H;)V=Ae(V),ne--;for(;H--;){if(U===V||V!==null&&U===V.alternate){Ae=U;break t}U=Ae(U),V=Ae(V)}Ae=null}else Ae=null;Q!==null&&_y(se,G,Q,Ae,!1),we!==null&&rt!==null&&_y(se,rt,we,Ae,!0)}}e:{if(G=q?Sn(q):window,Q=G.nodeName&&G.nodeName.toLowerCase(),Q==="select"||Q==="input"&&G.type==="file")var Ke=Pg;else if(Vg(G))if(Ug)Ke=T1;else{Ke=w1;var Ee=_1}else Q=G.nodeName,!Q||Q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?q&&Ra(q.elementType)&&(Ke=Pg):Ke=E1;if(Ke&&(Ke=Ke(t,q))){Lg(se,Ke,a,J);break e}Ee&&Ee(t,G,q),t==="focusout"&&q&&G.type==="number"&&q.memoizedProps.value!=null&&Kl(G,"number",G.value)}switch(Ee=q?Sn(q):window,t){case"focusin":(Vg(Ee)||Ee.contentEditable==="true")&&(Pa=Ee,rh=q,ro=null);break;case"focusout":ro=rh=Pa=null;break;case"mousedown":ah=!0;break;case"contextmenu":case"mouseup":case"dragend":ah=!1,Kg(se,a,J);break;case"selectionchange":if(N1)break;case"keydown":case"keyup":Kg(se,a,J)}var Ve;if($e)e:{switch(t){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else La?qr(t,a)&&(Be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Ls&&a.locale!=="ko"&&(La||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&La&&(Ve=Zl()):(Ds=J,Wl="value"in Ds?Ds.value:Ds.textContent,La=!0)),Ee=Du(q,Be),0<Ee.length&&(Be=new Vs(Be,t,null,a,J),se.push({event:Be,listeners:Ee}),Ve?Be.data=Ve:(Ve=Va(a),Ve!==null&&(Be.data=Ve)))),(Ve=zn?y1(t,a):v1(t,a))&&(Be=Du(q,"onBeforeInput"),0<Be.length&&(Ee=new Vs("onBeforeInput","beforeinput",null,a,J),se.push({event:Ee,listeners:Be}),Ee.data=Ve)),c2(se,t,q,a,J)}xy(se,n)})}function Io(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Du(t,n){for(var a=n+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=os(t,a),h!=null&&l.unshift(Io(t,h,f)),h=os(t,n),h!=null&&l.push(Io(t,h,f))),t.tag===3)return l;t=t.return}return[]}function f2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function _y(t,n,a,l,h){for(var f=n._reactName,x=[];a!==null&&a!==l;){var E=a,O=E.alternate,q=E.stateNode;if(E=E.tag,O!==null&&O===l)break;E!==5&&E!==26&&E!==27||q===null||(O=q,h?(q=os(a,f),q!=null&&x.unshift(Io(a,q,O))):h||(q=os(a,f),q!=null&&x.push(Io(a,q,O)))),a=a.return}x.length!==0&&t.push({event:n,listeners:x})}var m2=/\r\n?/g,g2=/\u0000|\uFFFD/g;function wy(t){return(typeof t=="string"?t:""+t).replace(m2,`
`).replace(g2,"")}function Ey(t,n){return n=wy(n),wy(t)===n}function it(t,n,a,l,h,f){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||yn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&yn(t,""+l);break;case"className":Nn(t,"class",l);break;case"tabIndex":Nn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(t,a,l);break;case"style":$l(t,l,f);break;case"data":if(n!=="object"){Nn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ia(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&it(t,n,"name",h.name,h,null),it(t,n,"formEncType",h.formEncType,h,null),it(t,n,"formMethod",h.formMethod,h,null),it(t,n,"formTarget",h.formTarget,h,null)):(it(t,n,"encType",h.encType,h,null),it(t,n,"method",h.method,h,null),it(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ia(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ls);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ia(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),ja(t,"popover",l);break;case"xlinkActuate":Rt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Rt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Rt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Rt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Rt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Rt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Rt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Rt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Rt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ja(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Dc.get(a)||a,ja(t,a,l))}}function kf(t,n,a,l,h,f){switch(a){case"style":$l(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?yn(t,l):(typeof l=="number"||typeof l=="bigint")&&yn(t,""+l);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ls);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),f=t[qt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(n,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ja(t,a,l)}}}function Zt(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var x=a[f];if(x!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:it(t,n,f,x,a,null)}}h&&it(t,n,"srcSet",a.srcSet,a,null),l&&it(t,n,"src",a.src,a,null);return;case"input":Ue("invalid",t);var E=f=x=h=null,O=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":h=J;break;case"type":x=J;break;case"checked":O=J;break;case"defaultChecked":q=J;break;case"value":f=J;break;case"defaultValue":E=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,n));break;default:it(t,n,l,J,a,null)}}Rc(t,f,E,O,q,x,h,!1);return;case"select":Ue("invalid",t),l=x=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":x=E;break;case"multiple":l=E;default:it(t,n,h,E,a,null)}n=f,a=x,t.multiple=!!l,n!=null?ki(t,!!l,n,!1):a!=null&&ki(t,!!l,a,!0);return;case"textarea":Ue("invalid",t),f=h=l=null;for(x in a)if(a.hasOwnProperty(x)&&(E=a[x],E!=null))switch(x){case"value":l=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:it(t,n,x,E,a,null)}Di(t,l,h,f);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:it(t,n,O,l,a,null)}return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(l=0;l<Ro.length;l++)Ue(Ro[l],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:it(t,n,q,l,a,null)}return;default:if(Ra(n)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&kf(t,n,J,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&it(t,n,E,l,a,null))}function p2(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,x=null,E=null,O=null,q=null,J=null;for(Q in a){var se=a[Q];if(a.hasOwnProperty(Q)&&se!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":O=se;default:l.hasOwnProperty(Q)||it(t,n,Q,null,l,se)}}for(var G in l){var Q=l[G];if(se=a[G],l.hasOwnProperty(G)&&(Q!=null||se!=null))switch(G){case"type":f=Q;break;case"name":h=Q;break;case"checked":q=Q;break;case"defaultChecked":J=Q;break;case"value":x=Q;break;case"defaultValue":E=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,n));break;default:Q!==se&&it(t,n,G,Q,l,se)}}Ca(t,x,E,O,q,J,f,h);return;case"select":Q=x=E=G=null;for(f in a)if(O=a[f],a.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":Q=O;default:l.hasOwnProperty(f)||it(t,n,f,null,l,O)}for(h in l)if(f=l[h],O=a[h],l.hasOwnProperty(h)&&(f!=null||O!=null))switch(h){case"value":G=f;break;case"defaultValue":E=f;break;case"multiple":x=f;default:f!==O&&it(t,n,h,f,l,O)}n=E,a=x,l=Q,G!=null?ki(t,!!a,G,!1):!!l!=!!a&&(n!=null?ki(t,!!a,n,!0):ki(t,!!a,a?[]:"",!1));return;case"textarea":Q=G=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:it(t,n,E,null,l,h)}for(x in l)if(h=l[x],f=a[x],l.hasOwnProperty(x)&&(h!=null||f!=null))switch(x){case"value":G=h;break;case"defaultValue":Q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&it(t,n,x,h,l,f)}Ic(t,G,Q);return;case"option":for(var we in a)if(G=a[we],a.hasOwnProperty(we)&&G!=null&&!l.hasOwnProperty(we))switch(we){case"selected":t.selected=!1;break;default:it(t,n,we,null,l,G)}for(O in l)if(G=l[O],Q=a[O],l.hasOwnProperty(O)&&G!==Q&&(G!=null||Q!=null))switch(O){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:it(t,n,O,G,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)G=a[Ae],a.hasOwnProperty(Ae)&&G!=null&&!l.hasOwnProperty(Ae)&&it(t,n,Ae,null,l,G);for(q in l)if(G=l[q],Q=a[q],l.hasOwnProperty(q)&&G!==Q&&(G!=null||Q!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,n));break;default:it(t,n,q,G,l,Q)}return;default:if(Ra(n)){for(var rt in a)G=a[rt],a.hasOwnProperty(rt)&&G!==void 0&&!l.hasOwnProperty(rt)&&kf(t,n,rt,void 0,l,G);for(J in l)G=l[J],Q=a[J],!l.hasOwnProperty(J)||G===Q||G===void 0&&Q===void 0||kf(t,n,J,G,l,Q);return}}for(var U in a)G=a[U],a.hasOwnProperty(U)&&G!=null&&!l.hasOwnProperty(U)&&it(t,n,U,null,l,G);for(se in l)G=l[se],Q=a[se],!l.hasOwnProperty(se)||G===Q||G==null&&Q==null||it(t,n,se,G,l,Q)}function Ty(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function y2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],f=h.transferSize,x=h.initiatorType,E=h.duration;if(f&&E&&Ty(x)){for(x=0,E=h.responseEnd,l+=1;l<a.length;l++){var O=a[l],q=O.startTime;if(q>E)break;var J=O.transferSize,se=O.initiatorType;J&&Ty(se)&&(O=O.responseEnd,x+=J*(O<E?1:(E-q)/(O-q)))}if(--l,n+=8*(f+x)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Df=null,Mf=null;function Mu(t){return t.nodeType===9?t:t.ownerDocument}function Sy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ny(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Of(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Vf=null;function v2(){var t=window.event;return t&&t.type==="popstate"?t===Vf?!1:(Vf=t,!0):(Vf=null,!1)}var Ay=typeof setTimeout=="function"?setTimeout:void 0,x2=typeof clearTimeout=="function"?clearTimeout:void 0,jy=typeof Promise=="function"?Promise:void 0,b2=typeof queueMicrotask=="function"?queueMicrotask:typeof jy<"u"?function(t){return jy.resolve(null).then(t).catch(_2)}:Ay;function _2(t){setTimeout(function(){throw t})}function nr(t){return t==="head"}function Cy(t,n){var a=n,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),dl(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ko(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,ko(a);for(var f=a.firstChild;f;){var x=f.nextSibling,E=f.nodeName;f[Ns]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=x}}else a==="body"&&ko(t.ownerDocument.body);a=h}while(a);dl(n)}function Ry(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Lf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Lf(a),Aa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function w2(t,n,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ns])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Kn(t.nextSibling),t===null)break}return null}function E2(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Kn(t.nextSibling),t===null))return null;return t}function Iy(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Kn(t.nextSibling),t===null))return null;return t}function Pf(t){return t.data==="$?"||t.data==="$~"}function Uf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function T2(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Kn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var zf=null;function ky(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return Kn(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function Dy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function My(t,n,a){switch(n=Mu(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function ko(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Aa(t)}var Qn=new Map,Oy=new Set;function Ou(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var vi=ue.d;ue.d={f:S2,r:N2,D:A2,C:j2,L:C2,m:R2,X:k2,S:I2,M:D2};function S2(){var t=vi.f(),n=Nu();return t||n}function N2(t){var n=Ln(t);n!==null&&n.tag===5&&n.type==="form"?Zp(n):vi.r(t)}var ol=typeof document>"u"?null:document;function Vy(t,n,a){var l=ol;if(l&&typeof n=="string"&&n){var h=pn(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Oy.has(h)||(Oy.add(h),t={rel:t,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),Zt(n,"link",t),Ct(n),l.head.appendChild(n)))}}function A2(t){vi.D(t),Vy("dns-prefetch",t,null)}function j2(t,n){vi.C(t,n),Vy("preconnect",t,n)}function C2(t,n,a){vi.L(t,n,a);var l=ol;if(l&&t&&n){var h='link[rel="preload"][as="'+pn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+pn(a.imageSizes)+'"]')):h+='[href="'+pn(t)+'"]';var f=h;switch(n){case"style":f=cl(t);break;case"script":f=ul(t)}Qn.has(f)||(t=T({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Qn.set(f,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(Do(f))||n==="script"&&l.querySelector(Mo(f))||(n=l.createElement("link"),Zt(n,"link",t),Ct(n),l.head.appendChild(n)))}}function R2(t,n){vi.m(t,n);var a=ol;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+pn(l)+'"][href="'+pn(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ul(t)}if(!Qn.has(f)&&(t=T({rel:"modulepreload",href:t},n),Qn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Mo(f)))return}l=a.createElement("link"),Zt(l,"link",t),Ct(l),a.head.appendChild(l)}}}function I2(t,n,a){vi.S(t,n,a);var l=ol;if(l&&t){var h=js(l).hoistableStyles,f=cl(t);n=n||"default";var x=h.get(f);if(!x){var E={loading:0,preload:null};if(x=l.querySelector(Do(f)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Qn.get(f))&&Bf(t,a);var O=x=l.createElement("link");Ct(O),Zt(O,"link",t),O._p=new Promise(function(q,J){O.onload=q,O.onerror=J}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Vu(x,n,l)}x={type:"stylesheet",instance:x,count:1,state:E},h.set(f,x)}}}function k2(t,n){vi.X(t,n);var a=ol;if(a&&t){var l=js(a).hoistableScripts,h=ul(t),f=l.get(h);f||(f=a.querySelector(Mo(h)),f||(t=T({src:t,async:!0},n),(n=Qn.get(h))&&Hf(t,n),f=a.createElement("script"),Ct(f),Zt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function D2(t,n){vi.M(t,n);var a=ol;if(a&&t){var l=js(a).hoistableScripts,h=ul(t),f=l.get(h);f||(f=a.querySelector(Mo(h)),f||(t=T({src:t,async:!0,type:"module"},n),(n=Qn.get(h))&&Hf(t,n),f=a.createElement("script"),Ct(f),Zt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function Ly(t,n,a,l){var h=(h=Y.current)?Ou(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=cl(a.href),a=js(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=cl(a.href);var f=js(h).hoistableStyles,x=f.get(t);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,x),(f=h.querySelector(Do(t)))&&!f._p&&(x.instance=f,x.state.loading=5),Qn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(t,a),f||M2(h,t,a,x.state))),n&&l===null)throw Error(r(528,""));return x}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ul(a),a=js(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function cl(t){return'href="'+pn(t)+'"'}function Do(t){return'link[rel="stylesheet"]['+t+"]"}function Py(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function M2(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Zt(n,"link",a),Ct(n),t.head.appendChild(n))}function ul(t){return'[src="'+pn(t)+'"]'}function Mo(t){return"script[async]"+t}function Uy(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+pn(a.href)+'"]');if(l)return n.instance=l,Ct(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ct(l),Zt(l,"style",h),Vu(l,a.precedence,t),n.instance=l;case"stylesheet":h=cl(a.href);var f=t.querySelector(Do(h));if(f)return n.state.loading|=4,n.instance=f,Ct(f),f;l=Py(a),(h=Qn.get(h))&&Bf(l,h),f=(t.ownerDocument||t).createElement("link"),Ct(f);var x=f;return x._p=new Promise(function(E,O){x.onload=E,x.onerror=O}),Zt(f,"link",l),n.state.loading|=4,Vu(f,a.precedence,t),n.instance=f;case"script":return f=ul(a.src),(h=t.querySelector(Mo(f)))?(n.instance=h,Ct(h),h):(l=a,(h=Qn.get(f))&&(l=T({},a),Hf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Ct(h),Zt(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Vu(l,a.precedence,t));return n.instance}function Vu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,x=0;x<l.length;x++){var E=l[x];if(E.dataset.precedence===n)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Bf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Hf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Lu=null;function zy(t,n,a){if(Lu===null){var l=new Map,h=Lu=new Map;h.set(a,l)}else h=Lu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Ns]||f[jt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var x=f.getAttribute(n)||"";x=t+x;var E=l.get(x);E?E.push(f):l.set(x,[f])}}return l}function By(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function O2(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Hy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function V2(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=cl(l.href),f=n.querySelector(Do(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Pu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=f,Ct(f);return}f=n.ownerDocument||n,l=Py(l),(h=Qn.get(h))&&Bf(l,h),f=f.createElement("link"),Ct(f);var x=f;x._p=new Promise(function(E,O){x.onload=E,x.onerror=O}),Zt(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Pu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var qf=0;function L2(t,n){return t.stylesheets&&t.count===0&&zu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&zu(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+n);0<t.imgBytes&&qf===0&&(qf=62500*y2());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&zu(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>qf?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Pu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Uu=null;function zu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Uu=new Map,n.forEach(P2,t),Uu=null,Pu.call(t))}function P2(t,n){if(!(n.state.loading&4)){var a=Uu.get(t);if(a)var l=a.get(null);else{a=new Map,Uu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var x=h[f];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}h=n.instance,x=h.getAttribute("data-precedence"),f=a.get(x)||l,f===l&&a.set(null,h),a.set(x,h),this.count++,l=Pu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var Oo={$$typeof:le,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function U2(t,n,a,l,h,f,x,E,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ts(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ts(0),this.hiddenUpdates=Ts(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function qy(t,n,a,l,h,f,x,E,O,q,J,se){return t=new U2(t,n,a,x,O,q,J,se,E),n=1,f===!0&&(n|=24),f=jn(3,null,null,n),t.current=f,f.stateNode=t,n=_h(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:n},Sh(f),t}function Fy(t){return t?(t=Ba,t):Ba}function Gy(t,n,a,l,h,f){h=Fy(h),l.context===null?l.context=h:l.pendingContext=h,l=Gi(n),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Yi(t,l,n),a!==null&&(wn(a,t,n),fo(a,t,n))}function Yy(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Ff(t,n){Yy(t,n),(t=t.alternate)&&Yy(t,n)}function Ky(t){if(t.tag===13||t.tag===31){var n=Yr(t,67108864);n!==null&&wn(n,t,67108864),Ff(t,67108864)}}function Qy(t){if(t.tag===13||t.tag===31){var n=Dn();n=Mr(n);var a=Yr(t,n);a!==null&&wn(a,t,n),Ff(t,n)}}var Bu=!0;function z2(t,n,a,l){var h=F.T;F.T=null;var f=ue.p;try{ue.p=2,Gf(t,n,a,l)}finally{ue.p=f,F.T=h}}function B2(t,n,a,l){var h=F.T;F.T=null;var f=ue.p;try{ue.p=8,Gf(t,n,a,l)}finally{ue.p=f,F.T=h}}function Gf(t,n,a,l){if(Bu){var h=Yf(l);if(h===null)If(t,n,l,Hu,a),Xy(t,l);else if(q2(h,t,n,a,l))l.stopPropagation();else if(Xy(t,l),n&4&&-1<H2.indexOf(t)){for(;h!==null;){var f=Ln(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var x=ws(f.pendingLanes);if(x!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var O=1<<31-_t(x);E.entanglements[1]|=O,x&=~O}Bs(f),(Xe&6)===0&&(Tu=Ht()+500,Co(0))}}break;case 31:case 13:E=Yr(f,2),E!==null&&wn(E,f,2),Nu(),Ff(f,2)}if(f=Yf(l),f===null&&If(t,n,l,Hu,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else If(t,n,l,null,a)}}function Yf(t){return t=Pn(t),Kf(t)}var Hu=null;function Kf(t){if(Hu=null,t=As(t),t!==null){var n=d(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=m(n),t!==null)return t;t=null}else if(a===31){if(t=y(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Hu=t,null}function $y(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zs()){case Js:return 2;case Ri:return 8;case bs:case On:return 32;case Ta:return 268435456;default:return 32}default:return 32}}var Qf=!1,sr=null,ir=null,rr=null,Vo=new Map,Lo=new Map,ar=[],H2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xy(t,n){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Vo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(n.pointerId)}}function Po(t,n,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},n!==null&&(n=Ln(n),n!==null&&Ky(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function q2(t,n,a,l,h){switch(n){case"focusin":return sr=Po(sr,t,n,a,l,h),!0;case"dragenter":return ir=Po(ir,t,n,a,l,h),!0;case"mouseover":return rr=Po(rr,t,n,a,l,h),!0;case"pointerover":var f=h.pointerId;return Vo.set(f,Po(Vo.get(f)||null,t,n,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Lo.set(f,Po(Lo.get(f)||null,t,n,a,l,h)),!0}return!1}function Wy(t){var n=As(t.target);if(n!==null){var a=d(n);if(a!==null){if(n=a.tag,n===13){if(n=m(a),n!==null){t.blockedOn=n,rs(t.priority,function(){Qy(a)});return}}else if(n===31){if(n=y(a),n!==null){t.blockedOn=n,rs(t.priority,function(){Qy(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Yf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Xl=l,a.target.dispatchEvent(l),Xl=null}else return n=Ln(a),n!==null&&Ky(n),t.blockedOn=a,!1;n.shift()}return!0}function Zy(t,n,a){qu(t)&&a.delete(n)}function F2(){Qf=!1,sr!==null&&qu(sr)&&(sr=null),ir!==null&&qu(ir)&&(ir=null),rr!==null&&qu(rr)&&(rr=null),Vo.forEach(Zy),Lo.forEach(Zy)}function Fu(t,n){t.blockedOn===n&&(t.blockedOn=null,Qf||(Qf=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,F2)))}var Gu=null;function Jy(t){Gu!==t&&(Gu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Gu===t&&(Gu=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(Kf(l||a)===null)continue;break}var f=Ln(a);f!==null&&(t.splice(n,3),n-=3,Gh(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function dl(t){function n(O){return Fu(O,t)}sr!==null&&Fu(sr,t),ir!==null&&Fu(ir,t),rr!==null&&Fu(rr,t),Vo.forEach(n),Lo.forEach(n);for(var a=0;a<ar.length;a++){var l=ar[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ar.length&&(a=ar[0],a.blockedOn===null);)Wy(a),a.blockedOn===null&&ar.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],x=h[qt]||null;if(typeof f=="function")x||Jy(a);else if(x){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,x=f[qt]||null)E=x.formAction;else if(Kf(h)!==null)continue}else E=x.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),Jy(a)}}}function ev(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(x){return h=x})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function $f(t){this._internalRoot=t}Yu.prototype.render=$f.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=Dn();Gy(a,l,t,n,null,null)},Yu.prototype.unmount=$f.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Gy(t.current,2,null,t,null,null),Nu(),n[Ss]=null}};function Yu(t){this._internalRoot=t}Yu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Nc();t={blockedOn:null,target:t,priority:n};for(var a=0;a<ar.length&&n!==0&&n<ar[a].priority;a++);ar.splice(a,0,t),a===0&&Wy(t)}};var tv=e.version;if(tv!=="19.2.0")throw Error(r(527,tv,"19.2.0"));ue.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=p(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var G2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ku=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ku.isDisabled&&Ku.supportsFiber)try{ss=Ku.inject(G2),Kt=Ku}catch{}}return zo.createRoot=function(t,n){if(!o(t))throw Error(r(299));var a=!1,l="",h=o0,f=c0,x=u0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError)),n=qy(t,1,!1,null,null,a,l,null,h,f,x,ev),t[Ss]=n.current,Rf(t),new $f(n)},zo.hydrateRoot=function(t,n,a){if(!o(t))throw Error(r(299));var l=!1,h="",f=o0,x=c0,E=u0,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),n=qy(t,1,!0,n,a??null,l,h,O,f,x,E,ev),n.context=Fy(null),a=n.current,l=Dn(),l=Mr(l),h=Gi(l),h.callback=null,Yi(a,h,l),a=l,n.current.lanes=a,kr(n,a),Bs(n),t[Ss]=n.current,Rf(t),new Yu(n)},zo.version="19.2.0",zo}var dv;function tw(){if(dv)return Zf.exports;dv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Zf.exports=ew(),Zf.exports}var nw=tw();const sw=()=>{};var hv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=function(i){const e=[];let s=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},iw=function(i){const e=[];let s=0,r=0;for(;s<i.length;){const o=i[s++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const d=i[s++];e[r++]=String.fromCharCode((o&31)<<6|d&63)}else if(o>239&&o<365){const d=i[s++],m=i[s++],y=i[s++],v=((o&7)<<18|(d&63)<<12|(m&63)<<6|y&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const d=i[s++],m=i[s++];e[r++]=String.fromCharCode((o&15)<<12|(d&63)<<6|m&63)}}return e.join("")},Kx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const d=i[o],m=o+1<i.length,y=m?i[o+1]:0,v=o+2<i.length,p=v?i[o+2]:0,_=d>>2,T=(d&3)<<4|y>>4;let A=(y&15)<<2|p>>6,B=p&63;v||(B=64,m||(A=64)),r.push(s[_],s[T],s[A],s[B])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Yx(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):iw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const d=s[i.charAt(o++)],y=o<i.length?s[i.charAt(o)]:0;++o;const p=o<i.length?s[i.charAt(o)]:64;++o;const T=o<i.length?s[i.charAt(o)]:64;if(++o,d==null||y==null||p==null||T==null)throw new rw;const A=d<<2|y>>4;if(r.push(A),p!==64){const B=y<<4&240|p>>2;if(r.push(B),T!==64){const ee=p<<6&192|T;r.push(ee)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class rw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aw=function(i){const e=Yx(i);return Kx.encodeByteArray(e,!0)},hd=function(i){return aw(i).replace(/\./g,"")},Qx=function(i){try{return Kx.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=()=>lw().__FIREBASE_DEFAULTS__,cw=()=>{if(typeof process>"u"||typeof hv>"u")return;const i=hv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},uw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Qx(i[1]);return e&&JSON.parse(e)},kd=()=>{try{return sw()||ow()||cw()||uw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},$x=i=>kd()?.emulatorHosts?.[i],dw=i=>{const e=$x(i);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},Xx=()=>kd()?.config,Wx=i=>kd()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zx(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,d=i.sub||i.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...i};return[hd(JSON.stringify(s)),hd(JSON.stringify(m)),""].join(".")}const Ko={};function mw(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ko))Ko[e]?i.emulator.push(e):i.prod.push(e);return i}function gw(i){let e=document.getElementById(i),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),s=!0),{created:s,element:e}}let fv=!1;function Jx(i,e){if(typeof window>"u"||typeof document>"u"||!Rl(window.location.host)||Ko[i]===e||Ko[i]||fv)return;Ko[i]=e;function s(A){return`__firebase__banner__${A}`}const r="__firebase__banner",d=mw().prod.length>0;function m(){const A=document.getElementById(r);A&&A.remove()}function y(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function v(A,B){A.setAttribute("width","24"),A.setAttribute("id",B),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{fv=!0,m()},A}function _(A,B){A.setAttribute("id",B),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=gw(r),B=s("text"),ee=document.getElementById(B)||document.createElement("span"),Z=s("learnmore"),te=document.getElementById(Z)||document.createElement("a"),de=s("preprendIcon"),ae=document.getElementById(de)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const le=A.element;y(le),_(te,Z);const oe=p();v(ae,de),le.append(ae,ee,te,oe),document.body.appendChild(le)}d?(ee.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ee.innerText="Preview backend running in this workspace."),ee.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function yw(){const i=kd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function bw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _w(){const i=hn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function ww(){return!yw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ew(){try{return typeof indexedDB=="object"}catch{return!1}}function Tw(){return new Promise((i,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="FirebaseError";class Ai extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=Sw,Object.setPrototypeOf(this,Ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cc.prototype.create)}}class cc{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},o=`${this.service}/${e}`,d=this.errors[e],m=d?Nw(d,r):"Error",y=`${this.serviceName}: ${m} (${o}).`;return new Ai(o,y,r)}}function Nw(i,e){return i.replace(Aw,(s,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Aw=/\{\$([^}]+)}/g;function jw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function fa(i,e){if(i===e)return!0;const s=Object.keys(i),r=Object.keys(e);for(const o of s){if(!r.includes(o))return!1;const d=i[o],m=e[o];if(mv(d)&&mv(m)){if(!fa(d,m))return!1}else if(d!==m)return!1}for(const o of r)if(!s.includes(o))return!1;return!0}function mv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(i){const e=[];for(const[s,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bo(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,d]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(d)}}),e}function Ho(i){const e=i.indexOf("?");if(!e)return"";const s=i.indexOf("#",e);return i.substring(e,s>0?s:void 0)}function Cw(i,e){const s=new Rw(i,e);return s.subscribe.bind(s)}class Rw{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let o;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");Iw(e,["next","error","complete"])?o=e:o={next:e,error:s,complete:r},o.next===void 0&&(o.next=nm),o.error===void 0&&(o.error=nm),o.complete===void 0&&(o.complete=nm);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),d}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Iw(i,e){if(typeof i!="object"||i===null)return!1;for(const s of e)if(s in i&&typeof i[s]=="function")return!0;return!1}function nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(i){return i&&i._delegate?i._delegate:i}class ma{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new hw;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Mw(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const d=this.getOrInitializeService({instanceIdentifier:o});r.resolve(d)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[d,m]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(d);r===y&&m.resolve(o)}return o}onInit(e,s){const r=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const d=this.instances.get(r);return d&&e(d,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const o of r)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dw(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Dw(i){return i===ca?void 0:i}function Mw(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new kw(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(He||(He={}));const Vw={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},Lw=He.INFO,Pw={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},Uw=(i,e,...s)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=Pw[e];if(o)console[o](`[${r}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fm{constructor(e){this.name=e,this._logLevel=Lw,this._logHandler=Uw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const zw=(i,e)=>e.some(s=>i instanceof s);let gv,pv;function Bw(){return gv||(gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hw(){return pv||(pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eb=new WeakMap,ym=new WeakMap,tb=new WeakMap,sm=new WeakMap,Gm=new WeakMap;function qw(i){const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("success",d),i.removeEventListener("error",m)},d=()=>{s(gr(i.result)),o()},m=()=>{r(i.error),o()};i.addEventListener("success",d),i.addEventListener("error",m)});return e.then(s=>{s instanceof IDBCursor&&eb.set(s,i)}).catch(()=>{}),Gm.set(e,i),e}function Fw(i){if(ym.has(i))return;const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("complete",d),i.removeEventListener("error",m),i.removeEventListener("abort",m)},d=()=>{s(),o()},m=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",d),i.addEventListener("error",m),i.addEventListener("abort",m)});ym.set(i,e)}let vm={get(i,e,s){if(i instanceof IDBTransaction){if(e==="done")return ym.get(i);if(e==="objectStoreNames")return i.objectStoreNames||tb.get(i);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return gr(i[e])},set(i,e,s){return i[e]=s,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Gw(i){vm=i(vm)}function Yw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=i.call(im(this),e,...s);return tb.set(r,e.sort?e.sort():[e]),gr(r)}:Hw().includes(i)?function(...e){return i.apply(im(this),e),gr(eb.get(this))}:function(...e){return gr(i.apply(im(this),e))}}function Kw(i){return typeof i=="function"?Yw(i):(i instanceof IDBTransaction&&Fw(i),zw(i,Bw())?new Proxy(i,vm):i)}function gr(i){if(i instanceof IDBRequest)return qw(i);if(sm.has(i))return sm.get(i);const e=Kw(i);return e!==i&&(sm.set(i,e),Gm.set(e,i)),e}const im=i=>Gm.get(i);function Qw(i,e,{blocked:s,upgrade:r,blocking:o,terminated:d}={}){const m=indexedDB.open(i,e),y=gr(m);return r&&m.addEventListener("upgradeneeded",v=>{r(gr(m.result),v.oldVersion,v.newVersion,gr(m.transaction),v)}),s&&m.addEventListener("blocked",v=>s(v.oldVersion,v.newVersion,v)),y.then(v=>{d&&v.addEventListener("close",()=>d()),o&&v.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),y}const $w=["get","getKey","getAll","getAllKeys","count"],Xw=["put","add","delete","clear"],rm=new Map;function yv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(rm.get(e))return rm.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,o=Xw.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(o||$w.includes(s)))return;const d=async function(m,...y){const v=this.transaction(m,o?"readwrite":"readonly");let p=v.store;return r&&(p=p.index(y.shift())),(await Promise.all([p[s](...y),o&&v.done]))[0]};return rm.set(e,d),d}Gw(i=>({...i,get:(e,s,r)=>yv(e,s)||i.get(e,s,r),has:(e,s)=>!!yv(e,s)||i.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(Zw(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function Zw(i){return i.getComponent()?.type==="VERSION"}const xm="@firebase/app",vv="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Fm("@firebase/app"),Jw="@firebase/app-compat",eE="@firebase/analytics-compat",tE="@firebase/analytics",nE="@firebase/app-check-compat",sE="@firebase/app-check",iE="@firebase/auth",rE="@firebase/auth-compat",aE="@firebase/database",lE="@firebase/data-connect",oE="@firebase/database-compat",cE="@firebase/functions",uE="@firebase/functions-compat",dE="@firebase/installations",hE="@firebase/installations-compat",fE="@firebase/messaging",mE="@firebase/messaging-compat",gE="@firebase/performance",pE="@firebase/performance-compat",yE="@firebase/remote-config",vE="@firebase/remote-config-compat",xE="@firebase/storage",bE="@firebase/storage-compat",_E="@firebase/firestore",wE="@firebase/ai",EE="@firebase/firestore-compat",TE="firebase",SE="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="[DEFAULT]",NE={[xm]:"fire-core",[Jw]:"fire-core-compat",[tE]:"fire-analytics",[eE]:"fire-analytics-compat",[sE]:"fire-app-check",[nE]:"fire-app-check-compat",[iE]:"fire-auth",[rE]:"fire-auth-compat",[aE]:"fire-rtdb",[lE]:"fire-data-connect",[oE]:"fire-rtdb-compat",[cE]:"fire-fn",[uE]:"fire-fn-compat",[dE]:"fire-iid",[hE]:"fire-iid-compat",[fE]:"fire-fcm",[mE]:"fire-fcm-compat",[gE]:"fire-perf",[pE]:"fire-perf-compat",[yE]:"fire-rc",[vE]:"fire-rc-compat",[xE]:"fire-gcs",[bE]:"fire-gcs-compat",[_E]:"fire-fst",[EE]:"fire-fst-compat",[wE]:"fire-vertex","fire-js":"fire-js",[TE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new Map,AE=new Map,_m=new Map;function xv(i,e){try{i.container.addComponent(e)}catch(s){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,s)}}function El(i){const e=i.name;if(_m.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;_m.set(e,i);for(const s of fd.values())xv(s,i);for(const s of AE.values())xv(s,i);return!0}function Ym(i,e){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(e)}function Xn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new cc("app","Firebase",jE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,s,r){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=SE;function nb(i,e={}){let s=i;typeof e!="object"&&(e={name:e});const r={name:bm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw pr.create("bad-app-name",{appName:String(o)});if(s||(s=Xx()),!s)throw pr.create("no-options");const d=fd.get(o);if(d){if(fa(s,d.options)&&fa(r,d.config))return d;throw pr.create("duplicate-app",{appName:o})}const m=new Ow(o);for(const v of _m.values())m.addComponent(v);const y=new CE(s,r,m);return fd.set(o,y),y}function sb(i=bm){const e=fd.get(i);if(!e&&i===bm&&Xx())return nb();if(!e)throw pr.create("no-app",{appName:i});return e}function yr(i,e,s){let r=NE[i]??i;s&&(r+=`-${s}`);const o=r.match(/\s|\//),d=e.match(/\s|\//);if(o||d){const m=[`Unable to register library "${r}" with version "${e}":`];o&&m.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(m.join(" "));return}El(new ma(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="firebase-heartbeat-database",IE=1,Jo="firebase-heartbeat-store";let am=null;function ib(){return am||(am=Qw(RE,IE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Jo)}catch(s){console.warn(s)}}}}).catch(i=>{throw pr.create("idb-open",{originalErrorMessage:i.message})})),am}async function kE(i){try{const s=(await ib()).transaction(Jo),r=await s.objectStore(Jo).get(rb(i));return await s.done,r}catch(e){if(e instanceof Ai)wi.warn(e.message);else{const s=pr.create("idb-get",{originalErrorMessage:e?.message});wi.warn(s.message)}}}async function bv(i,e){try{const r=(await ib()).transaction(Jo,"readwrite");await r.objectStore(Jo).put(e,rb(i)),await r.done}catch(s){if(s instanceof Ai)wi.warn(s.message);else{const r=pr.create("idb-set",{originalErrorMessage:s?.message});wi.warn(r.message)}}}function rb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=1024,ME=30;class OE{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new LE(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=_v();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>ME){const o=PE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_v(),{heartbeatsToSend:s,unsentEntries:r}=VE(this._heartbeatsCache.heartbeats),o=hd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return wi.warn(e),""}}}function _v(){return new Date().toISOString().substring(0,10)}function VE(i,e=DE){const s=[];let r=i.slice();for(const o of i){const d=s.find(m=>m.agent===o.agent);if(d){if(d.dates.push(o.date),wv(s)>e){d.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),wv(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class LE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ew()?Tw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await kE(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function wv(i){return hd(JSON.stringify({version:2,heartbeats:i})).length}function PE(i){if(i.length===0)return-1;let e=0,s=i[0].date;for(let r=1;r<i.length;r++)i[r].date<s&&(s=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(i){El(new ma("platform-logger",e=>new Ww(e),"PRIVATE")),El(new ma("heartbeat",e=>new OE(e),"PRIVATE")),yr(xm,vv,i),yr(xm,vv,"esm2020"),yr("fire-js","")}UE("");function ab(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zE=ab,lb=new cc("auth","Firebase",ab());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Fm("@firebase/auth");function BE(i,...e){md.logLevel<=He.WARN&&md.warn(`Auth (${Il}): ${i}`,...e)}function td(i,...e){md.logLevel<=He.ERROR&&md.error(`Auth (${Il}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(i,...e){throw Km(i,...e)}function Fs(i,...e){return Km(i,...e)}function ob(i,e,s){const r={...zE(),[e]:s};return new cc("auth","Firebase",r).create(e,{appName:i.name})}function _i(i){return ob(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Km(i,...e){if(typeof i!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(s,...r)}return lb.create(i,...e)}function je(i,e,...s){if(!i)throw Km(e,...s)}function xi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw td(e),new Error(e)}function Ei(i,e){i||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(){return typeof self<"u"&&self.location?.href||""}function HE(){return Ev()==="http:"||Ev()==="https:"}function Ev(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HE()||xw()||"connection"in navigator)?navigator.onLine:!0}function FE(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,s){this.shortDelay=e,this.longDelay=s,Ei(s>e,"Short delay should be less than long delay!"),this.isMobile=pw()||bw()}get(){return qE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(i,e){Ei(i.emulator,"Emulator should always be set here");const{url:s}=i.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KE=new dc(3e4,6e4);function ji(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Ci(i,e,s,r,o={}){return ub(i,o,async()=>{let d={},m={};r&&(e==="GET"?m=r:d={body:JSON.stringify(r)});const y=uc({key:i.config.apiKey,...m}).slice(1),v=await i._getAdditionalHeaders();v["Content-Type"]="application/json",i.languageCode&&(v["X-Firebase-Locale"]=i.languageCode);const p={method:e,headers:v,...d};return vw()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&Rl(i.emulatorConfig.host)&&(p.credentials="include"),cb.fetch()(await db(i,i.config.apiHost,s,y),p)})}async function ub(i,e,s){i._canInitEmulator=!1;const r={...GE,...e};try{const o=new $E(i),d=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const m=await d.json();if("needConfirmation"in m)throw Qu(i,"account-exists-with-different-credential",m);if(d.ok&&!("errorMessage"in m))return m;{const y=d.ok?m.errorMessage:m.error.message,[v,p]=y.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qu(i,"credential-already-in-use",m);if(v==="EMAIL_EXISTS")throw Qu(i,"email-already-in-use",m);if(v==="USER_DISABLED")throw Qu(i,"user-disabled",m);const _=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw ob(i,_,p);ys(i,_)}}catch(o){if(o instanceof Ai)throw o;ys(i,"network-request-failed",{message:String(o)})}}async function hc(i,e,s,r,o={}){const d=await Ci(i,e,s,r,o);return"mfaPendingCredential"in d&&ys(i,"multi-factor-auth-required",{_serverResponse:d}),d}async function db(i,e,s,r){const o=`${e}${s}?${r}`,d=i,m=d.config.emulator?Qm(i.config,o):`${i.config.apiScheme}://${o}`;return YE.includes(s)&&(await d._persistenceManagerAvailable,d._getPersistenceType()==="COOKIE")?d._getPersistence()._getFinalTarget(m).toString():m}function QE(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $E{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(Fs(this.auth,"network-request-failed")),KE.get())})}}function Qu(i,e,s){const r={appName:i.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const o=Fs(i,e,r);return o.customData._tokenResponse=s,o}function Tv(i){return i!==void 0&&i.enterprise!==void 0}class XE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return QE(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WE(i,e){return Ci(i,"GET","/v2/recaptchaConfig",ji(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZE(i,e){return Ci(i,"POST","/v1/accounts:delete",e)}async function gd(i,e){return Ci(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JE(i,e=!1){const s=Bt(i),r=await s.getIdToken(e),o=$m(r);je(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const d=typeof o.firebase=="object"?o.firebase:void 0,m=d?.sign_in_provider;return{claims:o,token:r,authTime:Qo(lm(o.auth_time)),issuedAtTime:Qo(lm(o.iat)),expirationTime:Qo(lm(o.exp)),signInProvider:m||null,signInSecondFactor:d?.sign_in_second_factor||null}}function lm(i){return Number(i)*1e3}function $m(i){const[e,s,r]=i.split(".");if(e===void 0||s===void 0||r===void 0)return td("JWT malformed, contained fewer than 3 sections"),null;try{const o=Qx(s);return o?JSON.parse(o):(td("Failed to decode base64 JWT payload"),null)}catch(o){return td("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Sv(i){const e=$m(i);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(i,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Ai&&eT(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function eT({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(i){const e=i.auth,s=await i.getIdToken(),r=await ec(i,gd(e,{idToken:s}));je(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const d=o.providerUserInfo?.length?hb(o.providerUserInfo):[],m=sT(i.providerData,d),y=i.isAnonymous,v=!(i.email&&o.passwordHash)&&!m?.length,p=y?v:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:m,metadata:new Em(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(i,_)}async function nT(i){const e=Bt(i);await pd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sT(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function hb(i){return i.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iT(i,e){const s=await ub(i,{},async()=>{const r=uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:d}=i.config,m=await db(i,o,"/v1/token",`key=${d}`),y=await i._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:y,body:r};return i.emulatorConfig&&Rl(i.emulatorConfig.host)&&(v.credentials="include"),cb.fetch()(m,v)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function rT(i,e){return Ci(i,"POST","/v2/accounts:revokeToken",ji(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){je(e.length!==0,"internal-error");const s=Sv(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:o,expiresIn:d}=await iT(e,s);this.updateTokensAndExpiration(r,o,Number(d))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:o,expirationTime:d}=s,m=new vl;return r&&(je(typeof r=="string","internal-error",{appName:e}),m.refreshToken=r),o&&(je(typeof o=="string","internal-error",{appName:e}),m.accessToken=o),d&&(je(typeof d=="number","internal-error",{appName:e}),m.expirationTime=d),m}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vl,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(i,e){je(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ps{constructor({uid:e,auth:s,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new tT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Em(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await ec(this,this.stsTokenManager.getToken(this.auth,e));return je(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return JE(this,e)}reload(){return nT(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new ps({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await pd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(_i(this.auth));const e=await this.getIdToken();return await ec(this,ZE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const r=s.displayName??void 0,o=s.email??void 0,d=s.phoneNumber??void 0,m=s.photoURL??void 0,y=s.tenantId??void 0,v=s._redirectEventId??void 0,p=s.createdAt??void 0,_=s.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:B,providerData:ee,stsTokenManager:Z}=s;je(T&&Z,e,"internal-error");const te=vl.fromJSON(this.name,Z);je(typeof T=="string",e,"internal-error"),or(r,e.name),or(o,e.name),je(typeof A=="boolean",e,"internal-error"),je(typeof B=="boolean",e,"internal-error"),or(d,e.name),or(m,e.name),or(y,e.name),or(v,e.name),or(p,e.name),or(_,e.name);const de=new ps({uid:T,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:B,photoURL:m,phoneNumber:d,tenantId:y,stsTokenManager:te,createdAt:p,lastLoginAt:_});return ee&&Array.isArray(ee)&&(de.providerData=ee.map(ae=>({...ae}))),v&&(de._redirectEventId=v),de}static async _fromIdTokenResponse(e,s,r=!1){const o=new vl;o.updateFromServerResponse(s);const d=new ps({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await pd(d),d}static async _fromGetAccountInfoResponse(e,s,r){const o=s.users[0];je(o.localId!==void 0,"internal-error");const d=o.providerUserInfo!==void 0?hb(o.providerUserInfo):[],m=!(o.email&&o.passwordHash)&&!d?.length,y=new vl;y.updateFromIdToken(r);const v=new ps({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:m}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Em(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!d?.length};return Object.assign(v,p),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;function bi(i){Ei(i instanceof Function,"Expected a class definition");let e=Nv.get(i);return e?(Ei(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Nv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}fb.type="NONE";const Av=fb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(i,e,s){return`firebase:${i}:${e}:${s}`}class xl{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:o,name:d}=this.auth;this.fullUserKey=nd(this.userKey,o.apiKey,d),this.fullPersistenceKey=nd("persistence",o.apiKey,d),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await gd(this.auth,{idToken:e}).catch(()=>{});return s?ps._fromGetAccountInfoResponse(this.auth,s,e):null}return ps._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new xl(bi(Av),e,r);const o=(await Promise.all(s.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let d=o[0]||bi(Av);const m=nd(r,e.config.apiKey,e.name);let y=null;for(const p of s)try{const _=await p._get(m);if(_){let T;if(typeof _=="string"){const A=await gd(e,{idToken:_}).catch(()=>{});if(!A)break;T=await ps._fromGetAccountInfoResponse(e,A,_)}else T=ps._fromJSON(e,_);p!==d&&(y=T),d=p;break}}catch{}const v=o.filter(p=>p._shouldAllowMigration);return!d._shouldAllowMigration||!v.length?new xl(d,e,r):(d=v[0],y&&await d._set(m,y.toJSON()),await Promise.all(s.map(async p=>{if(p!==d)try{await p._remove(m)}catch{}})),new xl(d,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xb(e))return"Blackberry";if(bb(e))return"Webos";if(gb(e))return"Safari";if((e.includes("chrome/")||pb(e))&&!e.includes("edge/"))return"Chrome";if(vb(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(s);if(r?.length===2)return r[1]}return"Other"}function mb(i=hn()){return/firefox\//i.test(i)}function gb(i=hn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pb(i=hn()){return/crios\//i.test(i)}function yb(i=hn()){return/iemobile/i.test(i)}function vb(i=hn()){return/android/i.test(i)}function xb(i=hn()){return/blackberry/i.test(i)}function bb(i=hn()){return/webos/i.test(i)}function Xm(i=hn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function aT(i=hn()){return Xm(i)&&!!window.navigator?.standalone}function lT(){return _w()&&document.documentMode===10}function _b(i=hn()){return Xm(i)||vb(i)||bb(i)||xb(i)||/windows phone/i.test(i)||yb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(i,e=[]){let s;switch(i){case"Browser":s=jv(hn());break;case"Worker":s=`${jv(hn())}-${i}`;break;default:s=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${Il}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=d=>new Promise((m,y)=>{try{const v=e(d);m(v)}catch(v){y(v)}});r.onAbort=s,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(i,e={}){return Ci(i,"GET","/v2/passwordPolicy",ji(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=6;class dT{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??uT,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),o&&(s.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,o,d){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,s,r,o){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cv(this),this.idTokenSubscription=new Cv(this),this.beforeStateQueue=new oT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(d=>this._resolvePersistenceManagerAvailable=d)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=bi(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await gd(this,{idToken:e}),r=await ps._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Xn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=this.redirectUser?._redirectEventId,m=r?._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===m)&&y?.user&&(r=y.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(d){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await pd(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(_i(this));const s=e?Bt(e):null;return s&&je(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(_i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(_i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cT(this),s=new dT(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cc("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await rT(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&bi(e)||this._popupRedirectResolver;je(s,this,"argument-error"),this.redirectPersistenceManager=await xl.create(this,[bi(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,o){if(this._deleted)return()=>{};const d=typeof s=="function"?s:s.next.bind(s);let m=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(y,this,"internal-error"),y.then(()=>{m||d(this.currentUser)}),typeof s=="function"){const v=e.addObserver(s,r,o);return()=>{m=!0,v()}}else{const v=e.addObserver(s);return()=>{m=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&BE(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ar(i){return Bt(i)}class Cv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Cw(s=>this.observer=s)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fT(i){Dd=i}function Eb(i){return Dd.loadJS(i)}function mT(){return Dd.recaptchaEnterpriseScript}function gT(){return Dd.gapiScript}function pT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class yT{constructor(){this.enterprise=new vT}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class vT{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const xT="recaptcha-enterprise",Tb="NO_RECAPTCHA";class bT{constructor(e){this.type=xT,this.auth=Ar(e)}async verify(e="verify",s=!1){async function r(d){if(!s){if(d.tenantId==null&&d._agentRecaptchaConfig!=null)return d._agentRecaptchaConfig.siteKey;if(d.tenantId!=null&&d._tenantRecaptchaConfigs[d.tenantId]!==void 0)return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(async(m,y)=>{WE(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const p=new XE(v);return d.tenantId==null?d._agentRecaptchaConfig=p:d._tenantRecaptchaConfigs[d.tenantId]=p,m(p.siteKey)}}).catch(v=>{y(v)})})}function o(d,m,y){const v=window.grecaptcha;Tv(v)?v.enterprise.ready(()=>{v.enterprise.execute(d,{action:e}).then(p=>{m(p)}).catch(()=>{m(Tb)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yT().execute("siteKey",{action:"verify"}):new Promise((d,m)=>{r(this.auth).then(y=>{if(!s&&Tv(window.grecaptcha))o(y,d,m);else{if(typeof window>"u"){m(new Error("RecaptchaVerifier is only supported in browser"));return}let v=mT();v.length!==0&&(v+=y),Eb(v).then(()=>{o(y,d,m)}).catch(p=>{m(p)})}}).catch(y=>{m(y)})})}}async function Rv(i,e,s,r=!1,o=!1){const d=new bT(i);let m;if(o)m=Tb;else try{m=await d.verify(s)}catch{m=await d.verify(s,!0)}const y={...e};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const v=y.phoneEnrollmentInfo.phoneNumber,p=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:p,captchaResponse:m,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const v=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:m,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return r?Object.assign(y,{captchaResp:m}):Object.assign(y,{captchaResponse:m}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function yd(i,e,s,r,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Rv(i,e,s,s==="getOobCode");return r(i,d)}else return r(i,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Rv(i,e,s,s==="getOobCode");return r(i,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(i,e){const s=Ym(i,"auth");if(s.isInitialized()){const o=s.getImmediate(),d=s.getOptions();if(fa(d,e??{}))return o;ys(o,"already-initialized")}return s.initialize({options:e})}function wT(i,e){const s=e?.persistence||[],r=(Array.isArray(s)?s:[s]).map(bi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function ET(i,e,s){const r=Ar(i);je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,d=Sb(e),{host:m,port:y}=TT(e),v=y===null?"":`:${y}`,p={url:`${d}//${m}${v}/`},_=Object.freeze({host:m,port:y,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),je(fa(p,r.config.emulator)&&fa(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Rl(m)?(Zx(`${d}//${m}${v}`),Jx("Auth",!0)):ST()}function Sb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function TT(i){const e=Sb(i),s=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const d=o[1];return{host:d,port:Iv(r.substr(d.length+1))}}else{const[d,m]=r.split(":");return{host:d,port:Iv(m)}}}function Iv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function ST(){function i(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,s){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}async function NT(i,e){return Ci(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AT(i,e){return hc(i,"POST","/v1/accounts:signInWithPassword",ji(i,e))}async function jT(i,e){return Ci(i,"POST","/v1/accounts:sendOobCode",ji(i,e))}async function CT(i,e){return jT(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(i,e){return hc(i,"POST","/v1/accounts:signInWithEmailLink",ji(i,e))}async function IT(i,e){return hc(i,"POST","/v1/accounts:signInWithEmailLink",ji(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends Wm{constructor(e,s,r,o=null){super("password",r),this._email=e,this._password=s,this._tenantId=o}static _fromEmailAndPassword(e,s){return new tc(e,s,"password")}static _fromEmailAndCode(e,s,r=null){return new tc(e,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yd(e,s,"signInWithPassword",AT);case"emailLink":return RT(e,{email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yd(e,r,"signUpPassword",NT);case"emailLink":return IT(e,{idToken:s,email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(i,e){return hc(i,"POST","/v1/accounts:signInWithIdp",ji(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="http://localhost";class ga extends Wm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):ys("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...d}=s;if(!r||!o)return null;const m=new ga(r,o);return m.idToken=d.idToken||void 0,m.accessToken=d.accessToken||void 0,m.secret=d.secret,m.nonce=d.nonce,m.pendingToken=d.pendingToken||null,m}_getIdTokenResponse(e){const s=this.buildRequest();return bl(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,bl(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,bl(e,s)}buildRequest(){const e={requestUri:kT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=uc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MT(i){const e=Bo(Ho(i)).link,s=e?Bo(Ho(e)).deep_link_id:null,r=Bo(Ho(i)).deep_link_id;return(r?Bo(Ho(r)).link:null)||r||s||e||i}class Zm{constructor(e){const s=Bo(Ho(e)),r=s.apiKey??null,o=s.oobCode??null,d=DT(s.mode??null);je(r&&o&&d,"argument-error"),this.apiKey=r,this.operation=d,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(e){const s=MT(e);try{return new Zm(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.providerId=kl.PROVIDER_ID}static credential(e,s){return tc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const r=Zm.parseLink(s);return je(r,"argument-error"),tc._fromEmailAndCode(e,r.code,r.tenantId)}}kl.PROVIDER_ID="password";kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Nb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends fc{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return ga._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return dr.credential(s,r)}catch{return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com";dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends fc{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends fc{constructor(){super("twitter.com")}static credential(e,s){return ga._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return fr.credential(s,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(i,e){return hc(i,"POST","/v1/accounts:signUp",ji(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,o=!1){const d=await ps._fromIdTokenResponse(e,r,o),m=kv(r);return new pa({user:d,providerId:m,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const o=kv(r);return new pa({user:e,providerId:o,_tokenResponse:r,operationType:s})}}function kv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends Ai{constructor(e,s,r,o){super(s.code,s.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,vd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,o){return new vd(e,s,r,o)}}function Ab(i,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(i):s._getIdTokenResponse(i)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?vd._fromErrorAndOperation(i,d,e,r):d})}async function VT(i,e,s=!1){const r=await ec(i,e._linkToIdToken(i.auth,await i.getIdToken()),s);return pa._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(i,e,s=!1){const{auth:r}=i;if(Xn(r.app))return Promise.reject(_i(r));const o="reauthenticate";try{const d=await ec(i,Ab(r,o,e,i),s);je(d.idToken,r,"internal-error");const m=$m(d.idToken);je(m,r,"internal-error");const{sub:y}=m;return je(i.uid===y,r,"user-mismatch"),pa._forOperation(i,o,d)}catch(d){throw d?.code==="auth/user-not-found"&&ys(r,"user-mismatch"),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(i,e,s=!1){if(Xn(i.app))return Promise.reject(_i(i));const r="signIn",o=await Ab(i,r,e),d=await pa._fromIdTokenResponse(i,r,o);return s||await i._updateCurrentUser(d.user),d}async function PT(i,e){return jb(Ar(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(i){const e=Ar(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UT(i,e,s){const r=Ar(i);await yd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",CT)}async function zT(i,e,s){if(Xn(i.app))return Promise.reject(_i(i));const r=Ar(i),m=await yd(r,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OT).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&Cb(i),v}),y=await pa._fromIdTokenResponse(r,"signIn",m);return await r._updateCurrentUser(y.user),y}function BT(i,e,s){return Xn(i.app)?Promise.reject(_i(i)):PT(Bt(i),kl.credential(e,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Cb(i),r})}function HT(i,e,s,r){return Bt(i).onIdTokenChanged(e,s,r)}function qT(i,e,s){return Bt(i).beforeAuthStateChanged(e,s)}function FT(i,e,s,r){return Bt(i).onAuthStateChanged(e,s,r)}function GT(i){return Bt(i).signOut()}const xd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(xd,"1"),this.storage.removeItem(xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=1e3,KT=10;class Ib extends Rb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_b(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),o=this.localCache[s];r!==o&&e(s,o,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((m,y,v)=>{this.notifyListeners(m,v)});return}const r=e.key;s?this.detachListener():this.stopPolling();const o=()=>{const m=this.storage.getItem(r);!s&&this.localCache[r]===m||this.notifyListeners(r,m)},d=this.storage.getItem(r);lT()&&d!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,KT):o()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},YT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ib.type="LOCAL";const QT=Ib;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb extends Rb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}kb.type="SESSION";const Db=kb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(o=>o.isListeningto(e));if(s)return s;const r=new Md(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:o,data:d}=s.data,m=this.handlersMap[o];if(!m?.size)return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const y=Array.from(m).map(async p=>p(s.origin,d)),v=await $T(y);s.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:v})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Md.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(i="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return i+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let d,m;return new Promise((y,v)=>{const p=Jm("",20);o.port1.start();const _=setTimeout(()=>{v(new Error("unsupported_event"))},r);m={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(_),d=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),y(A.data.response);break;default:clearTimeout(_),clearTimeout(d),v(new Error("invalid_response"));break}}},this.handlers.add(m),o.port1.addEventListener("message",m.onMessage),this.target.postMessage({eventType:e,eventId:p,data:s},[o.port2])}).finally(()=>{m&&this.removeMessageHandler(m)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(){return window}function WT(i){Gs().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(){return typeof Gs().WorkerGlobalScope<"u"&&typeof Gs().importScripts=="function"}async function ZT(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JT(){return navigator?.serviceWorker?.controller||null}function eS(){return Mb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="firebaseLocalStorageDb",tS=1,bd="firebaseLocalStorage",Vb="fbase_key";class mc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Od(i,e){return i.transaction([bd],e?"readwrite":"readonly").objectStore(bd)}function nS(){const i=indexedDB.deleteDatabase(Ob);return new mc(i).toPromise()}function Tm(){const i=indexedDB.open(Ob,tS);return new Promise((e,s)=>{i.addEventListener("error",()=>{s(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(bd,{keyPath:Vb})}catch(o){s(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(bd)?e(r):(r.close(),await nS(),e(await Tm()))})})}async function Dv(i,e,s){const r=Od(i,!0).put({[Vb]:e,value:s});return new mc(r).toPromise()}async function sS(i,e){const s=Od(i,!1).get(e),r=await new mc(s).toPromise();return r===void 0?null:r.value}function Mv(i,e){const s=Od(i,!0).delete(e);return new mc(s).toPromise()}const iS=800,rS=3;class Lb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tm(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>rS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Md._getInstance(eS()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ZT(),!this.activeServiceWorker)return;this.sender=new XT(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tm();return await Dv(e,xd,"1"),await Mv(e,xd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>Dv(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>sS(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Mv(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const d=Od(o,!1).getAll();return new mc(d).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:d}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(d)&&(this.notifyListeners(o,d),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lb.type="LOCAL";const aS=Lb;new dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(i,e){return e?bi(e):(je(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg extends Wm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,s){return bl(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function oS(i){return jb(i.auth,new eg(i),i.bypassAuthState)}function cS(i){const{auth:e,user:s}=i;return je(s,e,"internal-error"),LT(s,new eg(i),i.bypassAuthState)}async function uS(i){const{auth:e,user:s}=i;return je(s,e,"internal-error"),VT(s,new eg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,s,r,o,d=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:o,tenantId:d,error:m,type:y}=e;if(m){this.reject(m);return}const v={auth:this.auth,requestUri:s,sessionId:r,tenantId:d||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(v))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oS;case"linkViaPopup":case"linkViaRedirect":return uS;case"reauthViaPopup":case"reauthViaRedirect":return cS;default:ys(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=new dc(2e3,1e4);class yl extends Pb{constructor(e,s,r,o,d){super(e,s,o,d),this.provider=r,this.authWindow=null,this.pollId=null,yl.currentPopupAction&&yl.currentPopupAction.cancel(),yl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=Jm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dS.get())};e()}}yl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="pendingRedirect",sd=new Map;class fS extends Pb{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=sd.get(this.auth._key());if(!e){try{const r=await mS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}sd.set(this.auth._key(),e)}return this.bypassAuthState||sd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mS(i,e){const s=yS(e),r=pS(i);if(!await r._isAvailable())return!1;const o=await r._get(s)==="true";return await r._remove(s),o}function gS(i,e){sd.set(i._key(),e)}function pS(i){return bi(i._redirectPersistence)}function yS(i){return nd(hS,i.config.apiKey,i.name)}async function vS(i,e,s=!1){if(Xn(i.app))return Promise.reject(_i(i));const r=Ar(i),o=lS(r,e),m=await new fS(r,o,s).execute();return m&&!s&&(delete m.user._redirectEventId,await r._persistUserIfCurrent(m.user),await r._setRedirectUser(null,e)),m}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=600*1e3;class bS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_S(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!Ub(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";s.onError(Fs(this.auth,r))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ov(e))}saveEventToCache(e){this.cachedEventUids.add(Ov(e)),this.lastProcessedEventTime=Date.now()}}function Ov(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Ub({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function _S(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ub(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wS(i,e={}){return Ci(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TS=/^https?/;async function SS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await wS(i);for(const s of e)try{if(NS(s))return}catch{}ys(i,"unauthorized-domain")}function NS(i){const e=wm(),{protocol:s,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const m=new URL(i);return m.hostname===""&&r===""?s==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&m.hostname===r}if(!TS.test(s))return!1;if(ES.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=new dc(3e4,6e4);function Vv(){const i=Gs().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let s=0;s<i.CP.length;s++)i.CP[s]=null}}function jS(i){return new Promise((e,s)=>{function r(){Vv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vv(),s(Fs(i,"network-request-failed"))},timeout:AS.get()})}if(Gs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Gs().gapi?.load)r();else{const o=pT("iframefcb");return Gs()[o]=()=>{gapi.load?r():s(Fs(i,"network-request-failed"))},Eb(`${gT()}?onload=${o}`).catch(d=>s(d))}}).catch(e=>{throw id=null,e})}let id=null;function CS(i){return id=id||jS(i),id}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new dc(5e3,15e3),IS="__/auth/iframe",kS="emulator/auth/iframe",DS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OS(i){const e=i.config;je(e.authDomain,i,"auth-domain-config-required");const s=e.emulator?Qm(e,kS):`https://${i.config.authDomain}/${IS}`,r={apiKey:e.apiKey,appName:i.name,v:Il},o=MS.get(i.config.apiHost);o&&(r.eid=o);const d=i._getFrameworks();return d.length&&(r.fw=d.join(",")),`${s}?${uc(r).slice(1)}`}async function VS(i){const e=await CS(i),s=Gs().gapi;return je(s,i,"internal-error"),e.open({where:document.body,url:OS(i),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DS,dontclear:!0},r=>new Promise(async(o,d)=>{await r.restyle({setHideOnLeave:!1});const m=Fs(i,"network-request-failed"),y=Gs().setTimeout(()=>{d(m)},RS.get());function v(){Gs().clearTimeout(y),o(r)}r.ping(v).then(v,()=>{d(m)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PS=500,US=600,zS="_blank",BS="http://localhost";class Lv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HS(i,e,s,r=PS,o=US){const d=Math.max((window.screen.availHeight-o)/2,0).toString(),m=Math.max((window.screen.availWidth-r)/2,0).toString();let y="";const v={...LS,width:r.toString(),height:o.toString(),top:d,left:m},p=hn().toLowerCase();s&&(y=pb(p)?zS:s),mb(p)&&(e=e||BS,v.scrollbars="yes");const _=Object.entries(v).reduce((A,[B,ee])=>`${A}${B}=${ee},`,"");if(aT(p)&&y!=="_self")return qS(e||"",y),new Lv(null);const T=window.open(e||"",y,_);je(T,i,"popup-blocked");try{T.focus()}catch{}return new Lv(T)}function qS(i,e){const s=document.createElement("a");s.href=i,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="__/auth/handler",GS="emulator/auth/handler",YS=encodeURIComponent("fac");async function Pv(i,e,s,r,o,d){je(i.config.authDomain,i,"auth-domain-config-required"),je(i.config.apiKey,i,"invalid-api-key");const m={apiKey:i.config.apiKey,appName:i.name,authType:s,redirectUrl:r,v:Il,eventId:o};if(e instanceof Nb){e.setDefaultLanguage(i.languageCode),m.providerId=e.providerId||"",jw(e.getCustomParameters())||(m.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))m[_]=T}if(e instanceof fc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(m.scopes=_.join(","))}i.tenantId&&(m.tid=i.tenantId);const y=m;for(const _ of Object.keys(y))y[_]===void 0&&delete y[_];const v=await i._getAppCheckToken(),p=v?`#${YS}=${encodeURIComponent(v)}`:"";return`${KS(i)}?${uc(y).slice(1)}${p}`}function KS({config:i}){return i.emulator?Qm(i,GS):`https://${i.authDomain}/${FS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="webStorageSupport";class QS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Db,this._completeRedirectFn=vS,this._overrideRedirectResult=gS}async _openPopup(e,s,r,o){Ei(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const d=await Pv(e,s,r,wm(),o);return HS(e,d,Jm())}async _openRedirect(e,s,r,o){await this._originValidation(e);const d=await Pv(e,s,r,wm(),o);return WT(d),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:o,promise:d}=this.eventManagers[s];return o?Promise.resolve(o):(Ei(d,"If manager is not set, promise should be"),d)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await VS(e),r=new bS(e);return s.register("authEvent",o=>(je(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(om,{type:om},o=>{const d=o?.[0]?.[om];d!==void 0&&s(!!d),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=SS(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return _b()||gb()||Xm()}}const $S=QS;var Uv="@firebase/auth",zv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZS(i){El(new ma("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),d=e.getProvider("app-check-internal"),{apiKey:m,authDomain:y}=r.options;je(m&&!m.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:m,authDomain:y,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wb(i)},p=new hT(r,o,d,v);return wT(p,s),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),El(new ma("auth-internal",e=>{const s=Ar(e.getProvider("auth").getImmediate());return(r=>new XS(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(Uv,zv,WS(i)),yr(Uv,zv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=300,eN=Wx("authIdTokenMaxAge")||JS;let Bv=null;const tN=i=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>eN)return;const o=s?.token;Bv!==o&&(Bv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function nN(i=sb()){const e=Ym(i,"auth");if(e.isInitialized())return e.getImmediate();const s=_T(i,{popupRedirectResolver:$S,persistence:[aS,QT,Db]}),r=Wx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const d=new URL(r,location.origin);if(location.origin===d.origin){const m=tN(d.toString());qT(s,m,()=>m(s.currentUser)),HT(s,y=>m(y))}}const o=$x("auth");return o&&ET(s,`http://${o}`),s}function sN(){return document.getElementsByTagName("head")?.[0]??document}fT({loadJS(i){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const d=Fs("internal-error");d.customData=o,s(d)},r.type="text/javascript",r.charset="UTF-8",sN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZS("Browser");var iN="firebase",rN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(iN,rN,"app");var Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vr,zb;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,w){function N(){}N.prototype=w.prototype,D.F=w.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(R,I,L){for(var j=Array(arguments.length-2),he=2;he<arguments.length;he++)j[he-2]=arguments[he];return w.prototype[I].apply(R,j)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,w,N){N||(N=0);const R=Array(16);if(typeof w=="string")for(var I=0;I<16;++I)R[I]=w.charCodeAt(N++)|w.charCodeAt(N++)<<8|w.charCodeAt(N++)<<16|w.charCodeAt(N++)<<24;else for(I=0;I<16;++I)R[I]=w[N++]|w[N++]<<8|w[N++]<<16|w[N++]<<24;w=D.g[0],N=D.g[1],I=D.g[2];let L=D.g[3],j;j=w+(L^N&(I^L))+R[0]+3614090360&4294967295,w=N+(j<<7&4294967295|j>>>25),j=L+(I^w&(N^I))+R[1]+3905402710&4294967295,L=w+(j<<12&4294967295|j>>>20),j=I+(N^L&(w^N))+R[2]+606105819&4294967295,I=L+(j<<17&4294967295|j>>>15),j=N+(w^I&(L^w))+R[3]+3250441966&4294967295,N=I+(j<<22&4294967295|j>>>10),j=w+(L^N&(I^L))+R[4]+4118548399&4294967295,w=N+(j<<7&4294967295|j>>>25),j=L+(I^w&(N^I))+R[5]+1200080426&4294967295,L=w+(j<<12&4294967295|j>>>20),j=I+(N^L&(w^N))+R[6]+2821735955&4294967295,I=L+(j<<17&4294967295|j>>>15),j=N+(w^I&(L^w))+R[7]+4249261313&4294967295,N=I+(j<<22&4294967295|j>>>10),j=w+(L^N&(I^L))+R[8]+1770035416&4294967295,w=N+(j<<7&4294967295|j>>>25),j=L+(I^w&(N^I))+R[9]+2336552879&4294967295,L=w+(j<<12&4294967295|j>>>20),j=I+(N^L&(w^N))+R[10]+4294925233&4294967295,I=L+(j<<17&4294967295|j>>>15),j=N+(w^I&(L^w))+R[11]+2304563134&4294967295,N=I+(j<<22&4294967295|j>>>10),j=w+(L^N&(I^L))+R[12]+1804603682&4294967295,w=N+(j<<7&4294967295|j>>>25),j=L+(I^w&(N^I))+R[13]+4254626195&4294967295,L=w+(j<<12&4294967295|j>>>20),j=I+(N^L&(w^N))+R[14]+2792965006&4294967295,I=L+(j<<17&4294967295|j>>>15),j=N+(w^I&(L^w))+R[15]+1236535329&4294967295,N=I+(j<<22&4294967295|j>>>10),j=w+(I^L&(N^I))+R[1]+4129170786&4294967295,w=N+(j<<5&4294967295|j>>>27),j=L+(N^I&(w^N))+R[6]+3225465664&4294967295,L=w+(j<<9&4294967295|j>>>23),j=I+(w^N&(L^w))+R[11]+643717713&4294967295,I=L+(j<<14&4294967295|j>>>18),j=N+(L^w&(I^L))+R[0]+3921069994&4294967295,N=I+(j<<20&4294967295|j>>>12),j=w+(I^L&(N^I))+R[5]+3593408605&4294967295,w=N+(j<<5&4294967295|j>>>27),j=L+(N^I&(w^N))+R[10]+38016083&4294967295,L=w+(j<<9&4294967295|j>>>23),j=I+(w^N&(L^w))+R[15]+3634488961&4294967295,I=L+(j<<14&4294967295|j>>>18),j=N+(L^w&(I^L))+R[4]+3889429448&4294967295,N=I+(j<<20&4294967295|j>>>12),j=w+(I^L&(N^I))+R[9]+568446438&4294967295,w=N+(j<<5&4294967295|j>>>27),j=L+(N^I&(w^N))+R[14]+3275163606&4294967295,L=w+(j<<9&4294967295|j>>>23),j=I+(w^N&(L^w))+R[3]+4107603335&4294967295,I=L+(j<<14&4294967295|j>>>18),j=N+(L^w&(I^L))+R[8]+1163531501&4294967295,N=I+(j<<20&4294967295|j>>>12),j=w+(I^L&(N^I))+R[13]+2850285829&4294967295,w=N+(j<<5&4294967295|j>>>27),j=L+(N^I&(w^N))+R[2]+4243563512&4294967295,L=w+(j<<9&4294967295|j>>>23),j=I+(w^N&(L^w))+R[7]+1735328473&4294967295,I=L+(j<<14&4294967295|j>>>18),j=N+(L^w&(I^L))+R[12]+2368359562&4294967295,N=I+(j<<20&4294967295|j>>>12),j=w+(N^I^L)+R[5]+4294588738&4294967295,w=N+(j<<4&4294967295|j>>>28),j=L+(w^N^I)+R[8]+2272392833&4294967295,L=w+(j<<11&4294967295|j>>>21),j=I+(L^w^N)+R[11]+1839030562&4294967295,I=L+(j<<16&4294967295|j>>>16),j=N+(I^L^w)+R[14]+4259657740&4294967295,N=I+(j<<23&4294967295|j>>>9),j=w+(N^I^L)+R[1]+2763975236&4294967295,w=N+(j<<4&4294967295|j>>>28),j=L+(w^N^I)+R[4]+1272893353&4294967295,L=w+(j<<11&4294967295|j>>>21),j=I+(L^w^N)+R[7]+4139469664&4294967295,I=L+(j<<16&4294967295|j>>>16),j=N+(I^L^w)+R[10]+3200236656&4294967295,N=I+(j<<23&4294967295|j>>>9),j=w+(N^I^L)+R[13]+681279174&4294967295,w=N+(j<<4&4294967295|j>>>28),j=L+(w^N^I)+R[0]+3936430074&4294967295,L=w+(j<<11&4294967295|j>>>21),j=I+(L^w^N)+R[3]+3572445317&4294967295,I=L+(j<<16&4294967295|j>>>16),j=N+(I^L^w)+R[6]+76029189&4294967295,N=I+(j<<23&4294967295|j>>>9),j=w+(N^I^L)+R[9]+3654602809&4294967295,w=N+(j<<4&4294967295|j>>>28),j=L+(w^N^I)+R[12]+3873151461&4294967295,L=w+(j<<11&4294967295|j>>>21),j=I+(L^w^N)+R[15]+530742520&4294967295,I=L+(j<<16&4294967295|j>>>16),j=N+(I^L^w)+R[2]+3299628645&4294967295,N=I+(j<<23&4294967295|j>>>9),j=w+(I^(N|~L))+R[0]+4096336452&4294967295,w=N+(j<<6&4294967295|j>>>26),j=L+(N^(w|~I))+R[7]+1126891415&4294967295,L=w+(j<<10&4294967295|j>>>22),j=I+(w^(L|~N))+R[14]+2878612391&4294967295,I=L+(j<<15&4294967295|j>>>17),j=N+(L^(I|~w))+R[5]+4237533241&4294967295,N=I+(j<<21&4294967295|j>>>11),j=w+(I^(N|~L))+R[12]+1700485571&4294967295,w=N+(j<<6&4294967295|j>>>26),j=L+(N^(w|~I))+R[3]+2399980690&4294967295,L=w+(j<<10&4294967295|j>>>22),j=I+(w^(L|~N))+R[10]+4293915773&4294967295,I=L+(j<<15&4294967295|j>>>17),j=N+(L^(I|~w))+R[1]+2240044497&4294967295,N=I+(j<<21&4294967295|j>>>11),j=w+(I^(N|~L))+R[8]+1873313359&4294967295,w=N+(j<<6&4294967295|j>>>26),j=L+(N^(w|~I))+R[15]+4264355552&4294967295,L=w+(j<<10&4294967295|j>>>22),j=I+(w^(L|~N))+R[6]+2734768916&4294967295,I=L+(j<<15&4294967295|j>>>17),j=N+(L^(I|~w))+R[13]+1309151649&4294967295,N=I+(j<<21&4294967295|j>>>11),j=w+(I^(N|~L))+R[4]+4149444226&4294967295,w=N+(j<<6&4294967295|j>>>26),j=L+(N^(w|~I))+R[11]+3174756917&4294967295,L=w+(j<<10&4294967295|j>>>22),j=I+(w^(L|~N))+R[2]+718787259&4294967295,I=L+(j<<15&4294967295|j>>>17),j=N+(L^(I|~w))+R[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(I+(j<<21&4294967295|j>>>11))&4294967295,D.g[2]=D.g[2]+I&4294967295,D.g[3]=D.g[3]+L&4294967295}r.prototype.v=function(D,w){w===void 0&&(w=D.length);const N=w-this.blockSize,R=this.C;let I=this.h,L=0;for(;L<w;){if(I==0)for(;L<=N;)o(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<w;)if(R[I++]=D.charCodeAt(L++),I==this.blockSize){o(this,R),I=0;break}}else for(;L<w;)if(R[I++]=D[L++],I==this.blockSize){o(this,R),I=0;break}}this.h=I,this.o+=w},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;w=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=w&255,w/=256;for(this.v(D),D=Array(16),w=0,N=0;N<4;++N)for(let R=0;R<32;R+=8)D[w++]=this.g[N]>>>R&255;return D};function d(D,w){var N=y;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=w(D)}function m(D,w){this.h=w;const N=[];let R=!0;for(let I=D.length-1;I>=0;I--){const L=D[I]|0;R&&L==w||(N[I]=L,R=!1)}this.g=N}var y={};function v(D){return-128<=D&&D<128?d(D,function(w){return new m([w|0],w<0?-1:0)}):new m([D|0],D<0?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return te(p(-D));const w=[];let N=1;for(let R=0;D>=N;R++)w[R]=D/N|0,N*=4294967296;return new m(w,0)}function _(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return te(_(D.substring(1),w));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(w,8));let R=T;for(let L=0;L<D.length;L+=8){var I=Math.min(8,D.length-L);const j=parseInt(D.substring(L,L+I),w);I<8?(I=p(Math.pow(w,I)),R=R.j(I).add(p(j))):(R=R.j(N),R=R.add(p(j)))}return R}var T=v(0),A=v(1),B=v(16777216);i=m.prototype,i.m=function(){if(Z(this))return-te(this).m();let D=0,w=1;for(let N=0;N<this.g.length;N++){const R=this.i(N);D+=(R>=0?R:4294967296+R)*w,w*=4294967296}return D},i.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(ee(this))return"0";if(Z(this))return"-"+te(this).toString(D);const w=p(Math.pow(D,6));var N=this;let R="";for(;;){const I=oe(N,w).g;N=de(N,I.j(w));let L=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=I,ee(N))return L+R;for(;L.length<6;)L="0"+L;R=L+R}},i.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function ee(D){if(D.h!=0)return!1;for(let w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function Z(D){return D.h==-1}i.l=function(D){return D=de(this,D),Z(D)?-1:ee(D)?0:1};function te(D){const w=D.g.length,N=[];for(let R=0;R<w;R++)N[R]=~D.g[R];return new m(N,~D.h).add(A)}i.abs=function(){return Z(this)?te(this):this},i.add=function(D){const w=Math.max(this.g.length,D.g.length),N=[];let R=0;for(let I=0;I<=w;I++){let L=R+(this.i(I)&65535)+(D.i(I)&65535),j=(L>>>16)+(this.i(I)>>>16)+(D.i(I)>>>16);R=j>>>16,L&=65535,j&=65535,N[I]=j<<16|L}return new m(N,N[N.length-1]&-2147483648?-1:0)};function de(D,w){return D.add(te(w))}i.j=function(D){if(ee(this)||ee(D))return T;if(Z(this))return Z(D)?te(this).j(te(D)):te(te(this).j(D));if(Z(D))return te(this.j(te(D)));if(this.l(B)<0&&D.l(B)<0)return p(this.m()*D.m());const w=this.g.length+D.g.length,N=[];for(var R=0;R<2*w;R++)N[R]=0;for(R=0;R<this.g.length;R++)for(let I=0;I<D.g.length;I++){const L=this.i(R)>>>16,j=this.i(R)&65535,he=D.i(I)>>>16,Te=D.i(I)&65535;N[2*R+2*I]+=j*Te,ae(N,2*R+2*I),N[2*R+2*I+1]+=L*Te,ae(N,2*R+2*I+1),N[2*R+2*I+1]+=j*he,ae(N,2*R+2*I+1),N[2*R+2*I+2]+=L*he,ae(N,2*R+2*I+2)}for(D=0;D<w;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=w;D<2*w;D++)N[D]=0;return new m(N,0)};function ae(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function le(D,w){this.g=D,this.h=w}function oe(D,w){if(ee(w))throw Error("division by zero");if(ee(D))return new le(T,T);if(Z(D))return w=oe(te(D),w),new le(te(w.g),te(w.h));if(Z(w))return w=oe(D,te(w)),new le(te(w.g),w.h);if(D.g.length>30){if(Z(D)||Z(w))throw Error("slowDivide_ only works with positive integers.");for(var N=A,R=w;R.l(D)<=0;)N=pe(N),R=pe(R);var I=ye(N,1),L=ye(R,1);for(R=ye(R,2),N=ye(N,2);!ee(R);){var j=L.add(R);j.l(D)<=0&&(I=I.add(N),L=j),R=ye(R,1),N=ye(N,1)}return w=de(D,I.j(w)),new le(I,w)}for(I=T;D.l(w)>=0;){for(N=Math.max(1,Math.floor(D.m()/w.m())),R=Math.ceil(Math.log(N)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),L=p(N),j=L.j(w);Z(j)||j.l(D)>0;)N-=R,L=p(N),j=L.j(w);ee(L)&&(L=A),I=I.add(L),D=de(D,j)}return new le(I,D)}i.B=function(D){return oe(this,D).h},i.and=function(D){const w=Math.max(this.g.length,D.g.length),N=[];for(let R=0;R<w;R++)N[R]=this.i(R)&D.i(R);return new m(N,this.h&D.h)},i.or=function(D){const w=Math.max(this.g.length,D.g.length),N=[];for(let R=0;R<w;R++)N[R]=this.i(R)|D.i(R);return new m(N,this.h|D.h)},i.xor=function(D){const w=Math.max(this.g.length,D.g.length),N=[];for(let R=0;R<w;R++)N[R]=this.i(R)^D.i(R);return new m(N,this.h^D.h)};function pe(D){const w=D.g.length+1,N=[];for(let R=0;R<w;R++)N[R]=D.i(R)<<1|D.i(R-1)>>>31;return new m(N,D.h)}function ye(D,w){const N=w>>5;w%=32;const R=D.g.length-N,I=[];for(let L=0;L<R;L++)I[L]=w>0?D.i(L+N)>>>w|D.i(L+N+1)<<32-w:D.i(L+N);return new m(I,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,zb=r,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.B,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=p,m.fromString=_,vr=m}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bb,qo,Hb,rd,Sm,qb,Fb,Gb;(function(){var i,e=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof $u=="object"&&$u];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=s(this);function o(u,g){if(g)e:{var b=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var z=u[S];if(!(z in b))break e;b=b[z]}u=u[u.length-1],S=b[u],g=g(S),g!=S&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var b=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&b.push([S,g[S]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function y(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function v(u,g,b){return u.call.apply(u.bind,arguments)}function p(u,g,b){return p=v,p.apply(null,arguments)}function _(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function T(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(S,z,K){for(var fe=Array(arguments.length-2),De=2;De<arguments.length;De++)fe[De-2]=arguments[De];return g.prototype[z].apply(S,fe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function B(u){const g=u.length;if(g>0){const b=Array(g);for(let S=0;S<g;S++)b[S]=u[S];return b}return[]}function ee(u,g){for(let S=1;S<arguments.length;S++){const z=arguments[S];var b=typeof z;if(b=b!="object"?b:z?Array.isArray(z)?"array":b:"null",b=="array"||b=="object"&&typeof z.length=="number"){b=u.length||0;const K=z.length||0;u.length=b+K;for(let fe=0;fe<K;fe++)u[b+fe]=z[fe]}else u.push(z)}}class Z{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function te(u){m.setTimeout(()=>{throw u},0)}function de(){var u=D;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ae{constructor(){this.h=this.g=null}add(g,b){const S=le.get();S.set(g,b),this.h?this.h.next=S:this.g=S,this.h=S}}var le=new Z(()=>new oe,u=>u.reset());class oe{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,ye=!1,D=new ae,w=()=>{const u=Promise.resolve(void 0);pe=()=>{u.then(N)}};function N(){for(var u;u=de();){try{u.h.call(u.g)}catch(b){te(b)}var g=le;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}ye=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};m.addEventListener("test",b,g),m.removeEventListener("test",b,g)}catch{}return u})();function j(u){return/^[\s\xa0]*$/.test(u)}function he(u,g){I.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}T(he,I),he.prototype.init=function(u,g){const b=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Te="closure_listenable_"+(Math.random()*1e6|0),F=0;function ue(u,g,b,S,z){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!S,this.ha=z,this.key=++F,this.da=this.fa=!1}function _e(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function W(u,g,b){for(const S in u)g.call(b,u[S],S,u)}function ge(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function C(u){const g={};for(const b in u)g[b]=u[b];return g}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,g){let b,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(b in S)u[b]=S[b];for(let K=0;K<$.length;K++)b=$[K],Object.prototype.hasOwnProperty.call(S,b)&&(u[b]=S[b])}}function k(u){this.src=u,this.g={},this.h=0}k.prototype.add=function(u,g,b,S,z){const K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);const fe=Y(u,g,S,z);return fe>-1?(g=u[fe],b||(g.fa=!1)):(g=new ue(g,this.src,K,!!S,z),g.fa=b,u.push(g)),g};function M(u,g){const b=g.type;if(b in u.g){var S=u.g[b],z=Array.prototype.indexOf.call(S,g,void 0),K;(K=z>=0)&&Array.prototype.splice.call(S,z,1),K&&(_e(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function Y(u,g,b,S){for(let z=0;z<u.length;++z){const K=u[z];if(!K.da&&K.listener==g&&K.capture==!!b&&K.ha==S)return z}return-1}var X="closure_lm_"+(Math.random()*1e6|0),me={};function xe(u,g,b,S,z){if(Array.isArray(g)){for(let K=0;K<g.length;K++)xe(u,g[K],b,S,z);return null}return b=an(b),u&&u[Te]?u.J(g,b,y(S)?!!S.capture:!1,z):Oe(u,g,b,!1,S,z)}function Oe(u,g,b,S,z,K){if(!g)throw Error("Invalid event type");const fe=y(z)?!!z.capture:!!z;let De=rn(u);if(De||(u[X]=De=new k(u)),b=De.add(g,b,S,fe,K),b.proxy)return b;if(S=at(),b.proxy=S,S.src=u,S.listener=b,u.addEventListener)L||(z=fe),z===void 0&&(z=!1),u.addEventListener(g.toString(),S,z);else if(u.attachEvent)u.attachEvent(Pt(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function at(){function u(b){return g.call(u.src,u.listener,b)}const g=ht;return u}function tt(u,g,b,S,z){if(Array.isArray(g))for(var K=0;K<g.length;K++)tt(u,g[K],b,S,z);else S=y(S)?!!S.capture:!!S,b=an(b),u&&u[Te]?(u=u.i,K=String(g).toString(),K in u.g&&(g=u.g[K],b=Y(g,b,S,z),b>-1&&(_e(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[K],u.h--)))):u&&(u=rn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Y(g,b,S,z)),(b=u>-1?g[u]:null)&&sn(b))}function sn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Te])M(g.i,u);else{var b=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(b,S,u.capture):g.detachEvent?g.detachEvent(Pt(b),S):g.addListener&&g.removeListener&&g.removeListener(S),(b=rn(g))?(M(b,u),b.h==0&&(b.src=null,g[X]=null)):_e(u)}}}function Pt(u){return u in me?me[u]:me[u]="on"+u}function ht(u,g){if(u.da)u=!0;else{g=new he(g,this);const b=u.listener,S=u.ha||u.src;u.fa&&sn(u),u=b.call(S,g)}return u}function rn(u){return u=u[X],u instanceof k?u:null}var xs="__closure_events_fn_"+(Math.random()*1e9>>>0);function an(u){return typeof u=="function"?u:(u[xs]||(u[xs]=function(g){return u.handleEvent(g)}),u[xs])}function yt(){R.call(this),this.i=new k(this),this.M=this,this.G=null}T(yt,R),yt.prototype[Te]=!0,yt.prototype.removeEventListener=function(u,g,b,S){tt(this,u,g,b,S)};function vt(u,g){var b,S=u.G;if(S)for(b=[];S;S=S.G)b.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new I(g,u);else if(g instanceof I)g.target=g.target||u;else{var z=g;g=new I(S,u),P(g,z)}z=!0;let K,fe;if(b)for(fe=b.length-1;fe>=0;fe--)K=g.g=b[fe],z=ns(K,S,!0,g)&&z;if(K=g.g=u,z=ns(K,S,!0,g)&&z,z=ns(K,S,!1,g)&&z,b)for(fe=0;fe<b.length;fe++)K=g.g=b[fe],z=ns(K,S,!1,g)&&z}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let S=0;S<b.length;S++)_e(b[S]);delete u.g[g],u.h--}}this.G=null},yt.prototype.J=function(u,g,b,S){return this.i.add(String(u),g,!1,b,S)},yt.prototype.K=function(u,g,b,S){return this.i.add(String(u),g,!0,b,S)};function ns(u,g,b,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let z=!0;for(let K=0;K<g.length;++K){const fe=g[K];if(fe&&!fe.da&&fe.capture==b){const De=fe.listener,wt=fe.ha||fe.src;fe.fa&&M(u.i,fe),z=De.call(wt,S)!==!1&&z}}return z&&!S.defaultPrevented}function Pl(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:m.setTimeout(u,g||0)}function Rr(u){u.g=Pl(()=>{u.g=null,u.i&&(u.i=!1,Rr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Ht extends R{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zs(u){R.call(this),this.h=u,this.g={}}T(Zs,R);var Js=[];function Ri(u){W(u.g,function(g,b){this.g.hasOwnProperty(b)&&sn(g)},u),u.g={}}Zs.prototype.N=function(){Zs.Z.N.call(this),Ri(this)},Zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bs=m.JSON.stringify,On=m.JSON.parse,Ta=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function _c(){}function wc(){}var ss={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){I.call(this,"d")}T(Kt,I);function Vn(){I.call(this,"c")}T(Vn,I);var _t={},Ec=null;function Sa(){return Ec=Ec||new yt}_t.Ia="serverreachability";function Tc(u){I.call(this,_t.Ia,u)}T(Tc,I);function _s(u){const g=Sa();vt(g,new Tc(g))}_t.STAT_EVENT="statevent";function Ir(u,g){I.call(this,_t.STAT_EVENT,u),this.stat=g}T(Ir,I);function At(u){const g=Sa();vt(g,new Ir(g,u))}_t.Ja="timingevent";function ws(u,g){I.call(this,_t.Ja,u),this.size=g}T(ws,I);function Es(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},g)}function is(){this.g=!0}is.prototype.ua=function(){this.g=!1};function Jd(u,g,b,S,z,K){u.info(function(){if(u.g)if(K){var fe="",De=K.split("&");for(let $e=0;$e<De.length;$e++){var wt=De[$e].split("=");if(wt.length>1){const ft=wt[0];wt=wt[1];const zn=ft.split("_");fe=zn.length>=2&&zn[1]=="type"?fe+(ft+"="+wt+"&"):fe+(ft+"=redacted&")}}}else fe=null;else fe=K;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+g+`
`+b+`
`+fe})}function Sc(u,g,b,S,z,K,fe){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+g+`
`+b+`
`+K+" "+fe})}function Ts(u,g,b,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+eh(u,b)+(S?" "+S:"")})}function kr(u,g){u.info(function(){return"TIMEOUT: "+g})}is.prototype.info=function(){};function eh(u,g){if(!u.g)return g;if(!g)return null;try{const K=JSON.parse(g);if(K){for(u=0;u<K.length;u++)if(Array.isArray(K[u])){var b=K[u];if(!(b.length<2)){var S=b[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let fe=1;fe<S.length;fe++)S[fe]=""}}}}return bs(K)}catch{return g}}var Dr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ul={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zl;function Mr(){}T(Mr,_c),Mr.prototype.g=function(){return new XMLHttpRequest},zl=new Mr;function ei(u){return encodeURIComponent(String(u))}function Nc(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function rs(u,g,b,S){this.j=u,this.i=g,this.l=b,this.S=S||1,this.V=new Zs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new as}function as(){this.i=null,this.g="",this.h=!1}var jt={},qt={};function Ss(u,g,b){u.M=1,u.A=Or(Rt(g)),u.u=b,u.R=!0,Na(u,null)}function Na(u,g){u.F=Date.now(),Ns(u),u.B=Rt(u.A);var b=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Ra(b.i,"t",S),u.C=0,b=u.j.L,u.h=new as,u.g=Bc(u.j,b?g:null,!u.u),u.P>0&&(u.O=new Ht(p(u.Y,u,u.g),u.P)),g=u.V,b=u.g,S=u.ba;var z="readystatechange";Array.isArray(z)||(z&&(Js[0]=z.toString()),z=Js);for(let K=0;K<z.length;K++){const fe=xe(b,z[K],S||g.handleEvent,!1,g.h||g);if(!fe)break;g.g[fe.key]=fe}g=u.J?C(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),_s(),Jd(u.i,u.v,u.B,u.l,u.S,u.u)}rs.prototype.ba=function(u){u=u.target;const g=this.O;g&&cs(u)==3?g.j():this.Y(u)},rs.prototype.Y=function(u){try{if(u==this.g)e:{const De=cs(this.g),wt=this.g.ya(),$e=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||De!=4||wt==7||(wt==8||$e<=0?_s(3):_s(2)),As(this);var g=this.g.ca();this.X=g;var b=th(this);if(this.o=g==200,Sc(this.i,this.v,this.B,this.l,this.S,De,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(S)){var K=S;break t}}K=null}if(u=K)Ts(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,js(this,u);else{this.o=!1,this.m=3,At(12),Sn(this),Ln(this);break e}}if(this.R){u=!0;let ft;for(;!this.K&&this.C<b.length;)if(ft=jc(this,b),ft==qt){De==4&&(this.m=4,At(14),u=!1),Ts(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==jt){this.m=4,At(15),Ts(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else Ts(this.i,this.l,ft,null),js(this,ft);if(Ac(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||b.length!=0||this.h.h||(this.m=1,At(16),u=!1),this.o=this.o&&u,!u)Ts(this.i,this.l,b,"[Invalid Chunked Response]"),Sn(this),Ln(this);else if(b.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),to(fe),fe.P=!0,At(11))}}else Ts(this.i,this.l,b,null),js(this,b);De==4&&Sn(this),this.o&&!this.K&&(De==4?Lc(this.j,this):(this.o=!1,Ns(this)))}else ni(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Sn(this),Ln(this)}}}catch{}finally{}};function th(u){if(!Ac(u))return u.g.la();const g=Qt(u.g);if(g==="")return"";let b="";const S=g.length,z=cs(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Sn(u),Ln(u),"";u.h.i=new m.TextDecoder}for(let K=0;K<S;K++)u.h.h=!0,b+=u.h.i.decode(g[K],{stream:!(z&&K==S-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function Ac(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function jc(u,g){var b=u.C,S=g.indexOf(`
`,b);return S==-1?qt:(b=Number(g.substring(b,S)),isNaN(b)?jt:(S+=1,S+b>g.length?qt:(g=g.slice(S,S+b),u.C=S+b,g)))}rs.prototype.cancel=function(){this.K=!0,Sn(this)};function Ns(u){u.T=Date.now()+u.H,Aa(u,u.H)}function Aa(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Es(p(u.aa,u),g)}function As(u){u.D&&(m.clearTimeout(u.D),u.D=null)}rs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(kr(this.i,this.B),this.M!=2&&(_s(),At(17)),Sn(this),this.m=2,Ln(this)):Aa(this,this.T-u)};function Ln(u){u.j.I==0||u.K||Lc(u.j,u)}function Sn(u){As(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Ri(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function js(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||Rs(b.h,u))){if(!u.L&&Rs(b.h,u)&&b.I==3){try{var S=b.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Oa(b),Pi(b);else break e;Hr(b),At(18)}}else b.xa=z[1],0<b.xa-b.K&&z[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Es(p(b.Va,b),6e3));Cs(b.h)<=1&&b.ta&&(b.ta=void 0)}else Vs(b,11)}else if((u.L||b.g==u)&&Oa(b),!j(g))for(z=b.Ba.g.parse(g),g=0;g<z.length;g++){let $e=z[g];const ft=$e[0];if(!(ft<=b.K))if(b.K=ft,$e=$e[1],b.I==2)if($e[0]=="c"){b.M=$e[1],b.ba=$e[2];const zn=$e[3];zn!=null&&(b.ka=zn,b.j.info("VER="+b.ka));const Ls=$e[4];Ls!=null&&(b.za=Ls,b.j.info("SVER="+b.za));const us=$e[5];us!=null&&typeof us=="number"&&us>0&&(S=1.5*us,b.O=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const ds=u.g;if(ds){const qr=ds.g?ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qr){var K=S.h;K.g||qr.indexOf("spdy")==-1&&qr.indexOf("quic")==-1&&qr.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ql(K,K.h),K.h=null))}if(S.G){const Va=ds.g?ds.g.getResponseHeader("X-HTTP-Session-Id"):null;Va&&(S.wa=Va,Ze(S.J,S.G,Va))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),S=b;var fe=u;if(S.na=zc(S,S.L?S.ba:null,S.W),fe.L){Fl(S.h,fe);var De=fe,wt=S.O;wt&&(De.H=wt),De.D&&(As(De),Ns(De)),S.g=fe}else Oc(S);b.i.length>0&&Os(b)}else $e[0]!="stop"&&$e[0]!="close"||Vs(b,7);else b.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?Vs(b,7):Jl(b):$e[0]!="noop"&&b.l&&b.l.qa($e),b.A=0)}}_s(4)}catch{}}var Ct=class{constructor(u,g){this.g=u,this.map=g}};function Bl(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Cs(u){return u.h?1:u.g?u.g.size:0}function Rs(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ql(u,g){u.g?u.g.add(g):u.h=g}function Fl(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Bl.prototype.cancel=function(){if(this.i=Gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Gl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return B(u.i)}var Cc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ja(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const S=u[b].indexOf("=");let z,K=null;S>=0?(z=u[b].substring(0,S),K=u[b].substring(S+1)):z=u[b],g(z,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Nn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Nn?(this.l=u.l,Ft(this,u.j),this.o=u.o,this.g=u.g,Ii(this,u.u),this.h=u.h,Yl(this,Dc(u.i)),this.m=u.m):u&&(g=String(u).match(Cc))?(this.l=!1,Ft(this,g[1]||"",!0),this.o=Is(g[2]||""),this.g=Is(g[3]||"",!0),Ii(this,g[4]),this.h=Is(g[5]||"",!0),Yl(this,g[6]||"",!0),this.m=Is(g[7]||"")):(this.l=!1,this.i=new Di(null,this.l))}Nn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Vr(g,Ca,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Vr(g,Ca,!0),"@"),u.push(ei(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Vr(b,b.charAt(0)=="/"?Kl:Rc,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Vr(b,Ic)),u.join("")},Nn.prototype.resolve=function(u){const g=Rt(this);let b=!!u.j;b?Ft(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var S=u.h;if(b)Ii(g,u.u);else if(b=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=g.h.lastIndexOf("/");z!=-1&&(S=g.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const K=[];for(let fe=0;fe<z.length;){const De=z[fe++];De=="."?S&&fe==z.length&&K.push(""):De==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),S&&fe==z.length&&K.push("")):(K.push(De),S=!0)}S=K.join("/")}else S=z}return b?g.h=S:b=u.i.toString()!=="",b?Yl(g,Dc(u.i)):b=!!u.m,b&&(g.m=u.m),g};function Rt(u){return new Nn(u)}function Ft(u,g,b){u.j=b?Is(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Ii(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Yl(u,g,b){g instanceof Di?(u.i=g,Ia(u.i,u.l)):(b||(g=Vr(g,ki)),u.i=new Di(g,u.l))}function Ze(u,g,b){u.i.set(g,b)}function Or(u){return Ze(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Is(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Vr(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,pn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function pn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ca=/[#\/\?@]/g,Rc=/[#\?:]/g,Kl=/[#\?]/g,ki=/[#\?@]/g,Ic=/#/g;function Di(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function yn(u){u.g||(u.g=new Map,u.h=0,u.i&&ja(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}i=Di.prototype,i.add=function(u,g){yn(this),this.i=null,u=Mi(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function kc(u,g){yn(u),g=Mi(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Ql(u,g){return yn(u),g=Mi(u,g),u.g.has(g)}i.forEach=function(u,g){yn(this),this.g.forEach(function(b,S){b.forEach(function(z){u.call(g,z,S,this)},this)},this)};function $l(u,g){yn(u);let b=[];if(typeof g=="string")Ql(u,g)&&(b=b.concat(u.g.get(Mi(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}i.set=function(u,g){return yn(this),this.i=null,u=Mi(this,u),Ql(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},i.get=function(u,g){return u?(u=$l(this,u),u.length>0?String(u[0]):g):g};function Ra(u,g,b){kc(u,g),b.length>0&&(u.i=null,u.g.set(Mi(u,g),B(b)),u.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var b=g[S];const z=ei(b);b=$l(this,b);for(let K=0;K<b.length;K++){let fe=z;b[K]!==""&&(fe+="="+ei(b[K])),u.push(fe)}}return this.i=u.join("&")};function Dc(u){const g=new Di;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Mi(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Ia(u,g){g&&!u.j&&(yn(u),u.i=null,u.g.forEach(function(b,S){const z=S.toLowerCase();S!=z&&(kc(this,S),Ra(this,z,b))},u)),u.j=g}function ls(u,g){const b=new is;if(m.Image){const S=new Image;S.onload=_(Pn,b,"TestLoadImage: loaded",!0,g,S),S.onerror=_(Pn,b,"TestLoadImage: error",!1,g,S),S.onabort=_(Pn,b,"TestLoadImage: abort",!1,g,S),S.ontimeout=_(Pn,b,"TestLoadImage: timeout",!1,g,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function Xl(u,g){const b=new is,S=new AbortController,z=setTimeout(()=>{S.abort(),Pn(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(K=>{clearTimeout(z),K.ok?Pn(b,"TestPingServer: ok",!0,g):Pn(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),Pn(b,"TestPingServer: error",!1,g)})}function Pn(u,g,b,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(b)}catch{}}function Oi(){this.g=new Ta}function ks(u){this.i=u.Sb||null,this.h=u.ab||!1}T(ks,_c),ks.prototype.g=function(){return new Lr(this.i,this.h)};function Lr(u,g){yt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Lr,yt),i=Lr.prototype,i.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,os(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||m).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vi(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ka(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ka(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Vi(this):os(this),this.readyState==3&&ka(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,Vi(this))},i.Na=function(u){this.g&&(this.response=u,Vi(this))},i.ga=function(){this.g&&Vi(this)};function Vi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,os(u)}i.setRequestHeader=function(u,g){this.A.append(u,g)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function os(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Lr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Un(u){let g="";return W(u,function(b,S){g+=S,g+=":",g+=b,g+=`\r
`}),g}function Pr(u,g,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=Un(b),typeof u=="string"?b!=null&&ei(b):Ze(u,g,b))}function nt(u){yt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(nt,yt);var Ds=/^https?$/i,Wl=["POST","PUT"];i=nt.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,g,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zl.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(K){Ur(this,K);return}if(u=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)b.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())b.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(K=>K.toLowerCase()=="content-type"),z=m.FormData&&u instanceof m.FormData,!(Array.prototype.indexOf.call(Wl,g,void 0)>=0)||S||z||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,fe]of b)this.g.setRequestHeader(K,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(K){Ur(this,K)}};function Ur(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Zl(u),ti(u)}function Zl(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,vt(this,"complete"),vt(this,"abort"),ti(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),nt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?zr(this):this.Xa())},i.Xa=function(){zr(this)};function zr(u){if(u.h&&typeof d<"u"){if(u.v&&cs(u)==4)setTimeout(u.Ca.bind(u),0);else if(vt(u,"readystatechange"),cs(u)==4){u.h=!1;try{const K=u.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var S;if(S=K===0){let fe=String(u.D).match(Cc)[1]||null;!fe&&m.self&&m.self.location&&(fe=m.self.location.protocol.slice(0,-1)),S=!Ds.test(fe?fe.toLowerCase():"")}b=S}if(b)vt(u,"complete"),vt(u,"success");else{u.o=6;try{var z=cs(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",Zl(u)}}finally{ti(u)}}}}function ti(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||vt(u,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function cs(u){return u.g?u.g.readyState:0}i.ca=function(){try{return cs(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),On(g)}};function Qt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ni(u){const g={};u=(u.g&&cs(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(j(u[S]))continue;var b=Nc(u[S]);const z=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const K=g[z]||[];g[z]=K,K.push(b)}ge(g,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ms(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function Li(u){this.za=0,this.i=[],this.j=new is,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ms("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ms("baseRetryDelayMs",5e3,u),this.Za=Ms("retryDelaySeedMs",1e4,u),this.Ta=Ms("forwardChannelMaxRetries",2,u),this.va=Ms("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Bl(u&&u.concurrentRequestLimit),this.Ba=new Oi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Li.prototype,i.ka=8,i.I=1,i.connect=function(u,g,b,S){At(0),this.W=u,this.H=g||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.J=zc(this,null,this.W),Os(this)};function Jl(u){if(Da(u),u.I==3){var g=u.V++,b=Rt(u.J);if(Ze(b,"SID",u.M),Ze(b,"RID",g),Ze(b,"TYPE","terminate"),Br(u,b),g=new rs(u,u.j,g),g.M=2,g.A=Or(Rt(b)),b=!1,m.navigator&&m.navigator.sendBeacon)try{b=m.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&m.Image&&(new Image().src=g.A,b=!0),b||(g.g=Bc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ns(g)}Uc(u)}function Pi(u){u.g&&(to(u),u.g.cancel(),u.g=null)}function Da(u){Pi(u),u.v&&(m.clearTimeout(u.v),u.v=null),Oa(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&m.clearTimeout(u.m),u.m=null)}function Os(u){if(!Hl(u.h)&&!u.m){u.m=!0;var g=u.Ea;pe||w(),ye||(pe(),ye=!0),D.add(g,u),u.D=0}}function Ma(u,g){return Cs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Es(p(u.Ea,u,g),Pc(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new rs(this,this.j,u);let K=this.o;if(this.U&&(K?(K=C(K),P(K,this.U)):K=this.U),this.u!==null||this.R||(z.J=K,K=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Mc(this,z,g),b=Rt(this.J),Ze(b,"RID",u),Ze(b,"CVER",22),this.G&&Ze(b,"X-HTTP-Session-Id",this.G),Br(this,b),K&&(this.R?g="headers="+ei(Un(K))+"&"+g:this.u&&Pr(b,this.u,K)),ql(this.h,z),this.Ra&&Ze(b,"TYPE","init"),this.S?(Ze(b,"$req",g),Ze(b,"SID","null"),z.U=!0,Ss(z,b,null)):Ss(z,b,g),this.I=2}}else this.I==3&&(u?eo(this,u):this.i.length==0||Hl(this.h)||eo(this))};function eo(u,g){var b;g?b=g.l:b=u.V++;const S=Rt(u.J);Ze(S,"SID",u.M),Ze(S,"RID",b),Ze(S,"AID",u.K),Br(u,S),u.u&&u.o&&Pr(S,u.u,u.o),b=new rs(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Mc(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ql(u.h,b),Ss(b,S,g)}function Br(u,g){u.H&&W(u.H,function(b,S){Ze(g,S,b)}),u.l&&W({},function(b,S){Ze(g,S,b)})}function Mc(u,g,b){b=Math.min(u.i.length,b);const S=u.l?p(u.l.Ka,u.l,u):null;e:{var z=u.i;let De=-1;for(;;){const wt=["count="+b];De==-1?b>0?(De=z[0].g,wt.push("ofs="+De)):De=0:wt.push("ofs="+De);let $e=!0;for(let ft=0;ft<b;ft++){var K=z[ft].g;const zn=z[ft].map;if(K-=De,K<0)De=Math.max(0,z[ft].g-100),$e=!1;else try{K="req"+K+"_"||"";try{var fe=zn instanceof Map?zn:Object.entries(zn);for(const[Ls,us]of fe){let ds=us;y(us)&&(ds=bs(us)),wt.push(K+Ls+"="+encodeURIComponent(ds))}}catch(Ls){throw wt.push(K+"type="+encodeURIComponent("_badmap")),Ls}}catch{S&&S(zn)}}if($e){fe=wt.join("&");break e}}fe=void 0}return u=u.i.splice(0,b),g.G=u,fe}function Oc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;pe||w(),ye||(pe(),ye=!0),D.add(g,u),u.A=0}}function Hr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Es(p(u.Da,u),Pc(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,Vc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Es(p(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Pi(this),Vc(this))};function to(u){u.B!=null&&(m.clearTimeout(u.B),u.B=null)}function Vc(u){u.g=new rs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Rt(u.na);Ze(g,"RID","rpc"),Ze(g,"SID",u.M),Ze(g,"AID",u.K),Ze(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ze(g,"TO",u.ia),Ze(g,"TYPE","xmlhttp"),Br(u,g),u.u&&u.o&&Pr(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Or(Rt(g)),b.u=null,b.R=!0,Na(b,u)}i.Va=function(){this.C!=null&&(this.C=null,Pi(this),Hr(this),At(19))};function Oa(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function Lc(u,g){var b=null;if(u.g==g){Oa(u),to(u),u.g=null;var S=2}else if(Rs(u.h,g))b=g.G,Fl(u.h,g),S=1;else return;if(u.I!=0){if(g.o)if(S==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var z=u.D;S=Sa(),vt(S,new ws(S,b)),Os(u)}else Oc(u);else if(z=g.m,z==3||z==0&&g.X>0||!(S==1&&Ma(u,g)||S==2&&Hr(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),z){case 1:Vs(u,5);break;case 4:Vs(u,10);break;case 3:Vs(u,6);break;default:Vs(u,2)}}}function Pc(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Vs(u,g){if(u.j.info("Error code "+g),g==2){var b=p(u.bb,u),S=u.Ua;const z=!S;S=new Nn(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ft(S,"https"),Or(S),z?ls(S.toString(),b):Xl(S.toString(),b)}else At(2);u.I=0,u.l&&u.l.pa(g),Uc(u),Da(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Uc(u){if(u.I=0,u.ja=[],u.l){const g=Gl(u.h);(g.length!=0||u.i.length!=0)&&(ee(u.ja,g),ee(u.ja,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.oa()}}function zc(u,g,b){var S=b instanceof Nn?Rt(b):new Nn(b);if(S.g!="")g&&(S.g=g+"."+S.g),Ii(S,S.u);else{var z=m.location;S=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;const K=new Nn(null);S&&Ft(K,S),g&&(K.g=g),z&&Ii(K,z),b&&(K.h=b),S=K}return b=u.G,g=u.wa,b&&g&&Ze(S,b,g),Ze(S,"VER",u.ka),Br(u,S),S}function Bc(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new nt(new ks({ab:b})):new nt(u.ma),g.Fa(u.L),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hc(){}i=Hc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Ui(){}Ui.prototype.g=function(u,g){return new fn(u,g)};function fn(u,g){yt.call(this),this.g=new Li(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!j(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!j(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new si(this)}T(fn,yt),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Jl(this.g)},fn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=bs(u),u=b);g.i.push(new Ct(g.Ya++,u)),g.I==3&&Os(g)},fn.prototype.N=function(){this.g.l=null,delete this.j,Jl(this.g),delete this.g,fn.Z.N.call(this)};function qc(u){Kt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(qc,Kt);function Fc(){Vn.call(this),this.status=1}T(Fc,Vn);function si(u){this.g=u}T(si,Hc),si.prototype.ra=function(){vt(this.g,"a")},si.prototype.qa=function(u){vt(this.g,new qc(u))},si.prototype.pa=function(u){vt(this.g,new Fc)},si.prototype.oa=function(){vt(this.g,"b")},Ui.prototype.createWebChannel=Ui.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Gb=function(){return new Ui},Fb=function(){return Sa()},qb=_t,Sm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,rd=Dr,Ul.COMPLETE="complete",Hb=Ul,wc.EventType=ss,ss.OPEN="a",ss.CLOSE="b",ss.ERROR="c",ss.MESSAGE="d",yt.prototype.listen=yt.prototype.J,qo=wc,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,Bb=nt}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});const qv="@firebase/firestore",Fv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=new Fm("@firebase/firestore");function fl(){return ya.logLevel}function be(i,...e){if(ya.logLevel<=He.DEBUG){const s=e.map(tg);ya.debug(`Firestore (${Dl}): ${i}`,...s)}}function Ti(i,...e){if(ya.logLevel<=He.ERROR){const s=e.map(tg);ya.error(`Firestore (${Dl}): ${i}`,...s)}}function Tl(i,...e){if(ya.logLevel<=He.WARN){const s=e.map(tg);ya.warn(`Firestore (${Dl}): ${i}`,...s)}}function tg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(i,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,Yb(i,r,s)}function Yb(i,e,s){let r=`FIRESTORE (${Dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw Ti(r),new Error(r)}function We(i,e,s,r){let o="Unexpected state";typeof s=="string"?o=s:r=s,i||Yb(e,o,r)}function ke(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Ai{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(un.UNAUTHENTICATED)))}shutdown(){}}class lN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class oN{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){We(this.o===void 0,42304);let r=this.i;const o=v=>this.i!==r?(r=this.i,s(v)):Promise.resolve();let d=new da;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new da,e.enqueueRetryable((()=>o(this.currentUser)))};const m=()=>{const v=d;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},y=v=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((v=>y(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?y(v):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new da)}}),0),m()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string",31837,{l:r}),new Kb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class cN{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uN{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new cN(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dN{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){We(this.o===void 0,3512);const r=d=>{d.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.m;return this.m=d.token,be("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?s(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>r(d)))};const o=d=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>o(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?o(d):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Gv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(We(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new Gv(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<i;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=hN(40);for(let d=0;d<o.length;++d)r.length<20&&o[d]<s&&(r+=e.charAt(o[d]%62))}return r}}function qe(i,e){return i<e?-1:i>e?1:0}function Nm(i,e){const s=Math.min(i.length,e.length);for(let r=0;r<s;r++){const o=i.charAt(r),d=e.charAt(r);if(o!==d)return cm(o)===cm(d)?qe(o,d):cm(o)?1:-1}return qe(i.length,e.length)}const fN=55296,mN=57343;function cm(i){const e=i.charCodeAt(0);return e>=fN&&e<=mN}function Sl(i,e,s){return i.length===e.length&&i.every(((r,o)=>s(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="__name__";class qs{constructor(e,s,r){s===void 0?s=0:s>e.length&&Ce(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&Ce(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return qs.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof qs?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let o=0;o<r;o++){const d=qs.compareSegments(e.get(o),s.get(o));if(d!==0)return d}return qe(e.length,s.length)}static compareSegments(e,s){const r=qs.isNumericId(e),o=qs.isNumericId(s);return r&&!o?-1:!r&&o?1:r&&o?qs.extractNumericId(e).compare(qs.extractNumericId(s)):Nm(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vr.fromString(e.substring(4,e.length-2))}}class ot extends qs{construct(e,s,r){return new ot(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((o=>o.length>0)))}return new ot(s)}static emptyPath(){return new ot([])}}const gN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends qs{construct(e,s,r){return new en(e,s,r)}static isValidIdentifier(e){return gN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yv}static keyField(){return new en([Yv])}static fromServerFormat(e){const s=[];let r="",o=0;const d=()=>{if(r.length===0)throw new ve(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let m=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new ve(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new ve(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else y==="`"?(m=!m,o++):y!=="."||m?(r+=y,o++):(d(),o++)}if(d(),m)throw new ve(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(s)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(ot.fromString(e))}static fromName(e){return new Ne(ot.fromString(e).popFirst(5))}static empty(){return new Ne(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return ot.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(i,e,s){if(!s)throw new ve(ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function pN(i,e,s,r){if(e===!0&&r===!0)throw new ve(ie.INVALID_ARGUMENT,`${i} and ${s} cannot be used together.`)}function Kv(i){if(!Ne.isDocumentKey(i))throw new ve(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Qv(i){if(Ne.isDocumentKey(i))throw new ve(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function $b(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Vd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ce(12329,{type:typeof i})}function Ys(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ve(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Vd(i);throw new ve(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(i,e){const s={typeString:i};return e&&(s.value=e),s}function gc(i,e){if(!$b(i))throw new ve(ie.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const o=e[r].typeString,d="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){s=`JSON missing required field: '${r}'`;break}const m=i[r];if(o&&typeof m!==o){s=`JSON field '${r}' must be a ${o}.`;break}if(d!==void 0&&m!==d.value){s=`Expected '${r}' field to equal '${d.value}'`;break}}if(s)throw new ve(ie.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=-62135596800,Xv=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*Xv);return new dt(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new ve(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new ve(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<$v)throw new ve(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xv}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gc(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$v;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Lt("string",dt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new dt(0,0))}static max(){return new Re(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=-1;function yN(i,e){const s=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(r===1e9?new dt(s+1,0):new dt(s,r));return new br(o,Ne.empty(),e)}function vN(i){return new br(i.readTime,i.key,nc)}class br{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new br(Re.min(),Ne.empty(),nc)}static max(){return new br(Re.max(),Ne.empty(),nc)}}function xN(i,e){let s=i.readTime.compareTo(e.readTime);return s!==0?s:(s=Ne.comparator(i.documentKey,e.documentKey),s!==0?s:qe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _N{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(i){if(i.code!==ie.FAILED_PRECONDITION||i.message!==bN)throw i;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new re(((r,o)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(r,o)},this.catchCallback=d=>{this.wrapFailure(s,d).next(r,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof re?s:re.resolve(s)}catch(s){return re.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):re.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):re.reject(s)}static resolve(e){return new re(((s,r)=>{s(e)}))}static reject(e){return new re(((s,r)=>{r(e)}))}static waitFor(e){return new re(((s,r)=>{let o=0,d=0,m=!1;e.forEach((y=>{++o,y.next((()=>{++d,m&&d===o&&s()}),(v=>r(v)))})),m=!0,d===o&&s()}))}static or(e){let s=re.resolve(!1);for(const r of e)s=s.next((o=>o?re.resolve(o):r()));return s}static forEach(e,s){const r=[];return e.forEach(((o,d)=>{r.push(s.call(this,o,d))})),this.waitFor(r)}static mapArray(e,s){return new re(((r,o)=>{const d=e.length,m=new Array(d);let y=0;for(let v=0;v<d;v++){const p=v;s(e[p]).next((_=>{m[p]=_,++y,y===d&&r(m)}),(_=>o(_)))}}))}static doWhile(e,s){return new re(((r,o)=>{const d=()=>{e()===!0?s().next((()=>{d()}),o):r()};d()}))}}function wN(i){const e=i.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Ol(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ld.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=-1;function Pd(i){return i==null}function _d(i){return i===0&&1/i==-1/0}function EN(i){return typeof i=="number"&&Number.isInteger(i)&&!_d(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="";function TN(i){let e="";for(let s=0;s<i.length;s++)e.length>0&&(e=Wv(e)),e=SN(i.get(s),e);return Wv(e)}function SN(i,e){let s=e;const r=i.length;for(let o=0;o<r;o++){const d=i.charAt(o);switch(d){case"\0":s+="";break;case Xb:s+="";break;default:s+=d}}return s}function Wv(i){return i+Xb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(i){let e=0;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e++;return e}function jr(i,e){for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e(s,i[s])}function Wb(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,s){this.comparator=e,this.root=s||Jt.EMPTY}insert(e,s){return new pt(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return s+r.left.size;o<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,r)=>(e(s,r),!1)))}toString(){const e=[];return this.inorderTraversal(((s,r)=>(e.push(`${s}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xu(this.root,e,this.comparator,!0)}}class Xu{constructor(e,s,r,o){this.isReverse=o,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=s?r(e.key,s):1,s&&o&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,s,r,o,d){this.key=e,this.value=s,this.color=r??Jt.RED,this.left=o??Jt.EMPTY,this.right=d??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,o,d){return new Jt(e??this.key,s??this.value,r??this.color,o??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let o=this;const d=r(e,o.key);return o=d<0?o.copy(null,null,null,o.left.insert(e,s,r),null):d===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,s,r,o,d){return this}insert(e,s,r){return new Jt(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,r)=>(e(s),!1)))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Jv(this.data.getIterator())}getIteratorFrom(e){return new Jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((r=>{s=s.add(r)})),s}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=r.getNext().key;if(this.comparator(o,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new zt(this.comparator);return s.data=e,s}}class Jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Mn([])}unionWith(e){let s=new zt(en.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new Mn(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Zb("Invalid base64 string: "+d):d}})(e);return new nn(s)}static fromUint8Array(e){const s=(function(o){let d="";for(let m=0;m<o.length;++m)d+=String.fromCharCode(o[m]);return d})(e);return new nn(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const NN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _r(i){if(We(!!i,39018),typeof i=="string"){let e=0;const s=NN.exec(i);if(We(!!s,46558,{timestamp:i}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(i.seconds),nanos:St(i.nanos)}}function St(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function wr(i){return typeof i=="string"?nn.fromBase64String(i):nn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="server_timestamp",e_="__type__",t_="__previous_value__",n_="__local_write_time__";function ig(i){return(i?.mapValue?.fields||{})[e_]?.stringValue===Jb}function Ud(i){const e=i.mapValue.fields[t_];return ig(e)?Ud(e):e}function sc(i){const e=_r(i.mapValue.fields[n_].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,s,r,o,d,m,y,v,p,_){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=o,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=y,this.longPollingOptions=v,this.useFetchStreams=p,this.isUsingEmulator=_}}const wd="(default)";class ic{constructor(e,s){this.projectId=e,this.database=s||wd}static empty(){return new ic("","")}get isDefaultDatabase(){return this.database===wd}isEqual(e){return e instanceof ic&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="__type__",jN="__max__",Wu={mapValue:{}},i_="__vector__",Ed="value";function Er(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ig(i)?4:RN(i)?9007199254740991:CN(i)?10:11:Ce(28295,{value:i})}function Ws(i,e){if(i===e)return!0;const s=Er(i);if(s!==Er(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return sc(i).isEqual(sc(e));case 3:return(function(o,d){if(typeof o.timestampValue=="string"&&typeof d.timestampValue=="string"&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const m=_r(o.timestampValue),y=_r(d.timestampValue);return m.seconds===y.seconds&&m.nanos===y.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,d){return wr(o.bytesValue).isEqual(wr(d.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,d){return St(o.geoPointValue.latitude)===St(d.geoPointValue.latitude)&&St(o.geoPointValue.longitude)===St(d.geoPointValue.longitude)})(i,e);case 2:return(function(o,d){if("integerValue"in o&&"integerValue"in d)return St(o.integerValue)===St(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const m=St(o.doubleValue),y=St(d.doubleValue);return m===y?_d(m)===_d(y):isNaN(m)&&isNaN(y)}return!1})(i,e);case 9:return Sl(i.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:case 11:return(function(o,d){const m=o.mapValue.fields||{},y=d.mapValue.fields||{};if(Zv(m)!==Zv(y))return!1;for(const v in m)if(m.hasOwnProperty(v)&&(y[v]===void 0||!Ws(m[v],y[v])))return!1;return!0})(i,e);default:return Ce(52216,{left:i})}}function rc(i,e){return(i.values||[]).find((s=>Ws(s,e)))!==void 0}function Nl(i,e){if(i===e)return 0;const s=Er(i),r=Er(e);if(s!==r)return qe(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return qe(i.booleanValue,e.booleanValue);case 2:return(function(d,m){const y=St(d.integerValue||d.doubleValue),v=St(m.integerValue||m.doubleValue);return y<v?-1:y>v?1:y===v?0:isNaN(y)?isNaN(v)?0:-1:1})(i,e);case 3:return ex(i.timestampValue,e.timestampValue);case 4:return ex(sc(i),sc(e));case 5:return Nm(i.stringValue,e.stringValue);case 6:return(function(d,m){const y=wr(d),v=wr(m);return y.compareTo(v)})(i.bytesValue,e.bytesValue);case 7:return(function(d,m){const y=d.split("/"),v=m.split("/");for(let p=0;p<y.length&&p<v.length;p++){const _=qe(y[p],v[p]);if(_!==0)return _}return qe(y.length,v.length)})(i.referenceValue,e.referenceValue);case 8:return(function(d,m){const y=qe(St(d.latitude),St(m.latitude));return y!==0?y:qe(St(d.longitude),St(m.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return tx(i.arrayValue,e.arrayValue);case 10:return(function(d,m){const y=d.fields||{},v=m.fields||{},p=y[Ed]?.arrayValue,_=v[Ed]?.arrayValue,T=qe(p?.values?.length||0,_?.values?.length||0);return T!==0?T:tx(p,_)})(i.mapValue,e.mapValue);case 11:return(function(d,m){if(d===Wu.mapValue&&m===Wu.mapValue)return 0;if(d===Wu.mapValue)return 1;if(m===Wu.mapValue)return-1;const y=d.fields||{},v=Object.keys(y),p=m.fields||{},_=Object.keys(p);v.sort(),_.sort();for(let T=0;T<v.length&&T<_.length;++T){const A=Nm(v[T],_[T]);if(A!==0)return A;const B=Nl(y[v[T]],p[_[T]]);if(B!==0)return B}return qe(v.length,_.length)})(i.mapValue,e.mapValue);default:throw Ce(23264,{he:s})}}function ex(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return qe(i,e);const s=_r(i),r=_r(e),o=qe(s.seconds,r.seconds);return o!==0?o:qe(s.nanos,r.nanos)}function tx(i,e){const s=i.values||[],r=e.values||[];for(let o=0;o<s.length&&o<r.length;++o){const d=Nl(s[o],r[o]);if(d)return d}return qe(s.length,r.length)}function Al(i){return Am(i)}function Am(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(s){const r=_r(s);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(s){return wr(s).toBase64()})(i.bytesValue):"referenceValue"in i?(function(s){return Ne.fromName(s).toString()})(i.referenceValue):"geoPointValue"in i?(function(s){return`geo(${s.latitude},${s.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(s){let r="[",o=!0;for(const d of s.values||[])o?o=!1:r+=",",r+=Am(d);return r+"]"})(i.arrayValue):"mapValue"in i?(function(s){const r=Object.keys(s.fields||{}).sort();let o="{",d=!0;for(const m of r)d?d=!1:o+=",",o+=`${m}:${Am(s.fields[m])}`;return o+"}"})(i.mapValue):Ce(61005,{value:i})}function ad(i){switch(Er(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ud(i);return e?16+ad(e):16;case 5:return 2*i.stringValue.length;case 6:return wr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,d)=>o+ad(d)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return jr(r.fields,((d,m)=>{o+=d.length+ad(m)})),o})(i.mapValue);default:throw Ce(13486,{value:i})}}function nx(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function jm(i){return!!i&&"integerValue"in i}function rg(i){return!!i&&"arrayValue"in i}function sx(i){return!!i&&"nullValue"in i}function ix(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ld(i){return!!i&&"mapValue"in i}function CN(i){return(i?.mapValue?.fields||{})[s_]?.stringValue===i_}function $o(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return jr(i.mapValue.fields,((s,r)=>e.mapValue.fields[s]=$o(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(i.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=$o(i.arrayValue.values[s]);return e}return{...i}}function RN(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===jN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!ld(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(s)}setAll(e){let s=en.emptyPath(),r={},o=[];e.forEach(((m,y)=>{if(!s.isImmediateParentOf(y)){const v=this.getFieldsMap(s);this.applyChanges(v,r,o),r={},o=[],s=y.popLast()}m?r[y.lastSegment()]=$o(m):o.push(y.lastSegment())}));const d=this.getFieldsMap(s);this.applyChanges(d,r,o)}delete(e){const s=this.field(e.popLast());ld(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=s.mapValue.fields[e.get(r)];ld(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,r){jr(s,((o,d)=>e[o]=d));for(const o of r)delete e[o]}clone(){return new Tn($o(this.value))}}function r_(i){const e=[];return jr(i.fields,((s,r)=>{const o=new en([s]);if(ld(r)){const d=r_(r.mapValue).fields;if(d.length===0)e.push(o);else for(const m of d)e.push(o.child(m))}else e.push(o)})),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,s,r,o,d,m,y){this.key=e,this.documentType=s,this.version=r,this.readTime=o,this.createTime=d,this.data=m,this.documentState=y}static newInvalidDocument(e){return new dn(e,0,Re.min(),Re.min(),Re.min(),Tn.empty(),0)}static newFoundDocument(e,s,r,o){return new dn(e,1,s,Re.min(),r,o,0)}static newNoDocument(e,s){return new dn(e,2,s,Re.min(),Re.min(),Tn.empty(),0)}static newUnknownDocument(e,s){return new dn(e,3,s,Re.min(),Re.min(),Tn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,s){this.position=e,this.inclusive=s}}function rx(i,e,s){let r=0;for(let o=0;o<i.position.length;o++){const d=e[o],m=i.position[o];if(d.field.isKeyField()?r=Ne.comparator(Ne.fromName(m.referenceValue),s.key):r=Nl(m,s.data.field(d.field)),d.dir==="desc"&&(r*=-1),r!==0)break}return r}function ax(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let s=0;s<i.position.length;s++)if(!Ws(i.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,s="asc"){this.field=e,this.dir=s}}function IN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{}class Vt extends a_{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new DN(e,s,r):s==="array-contains"?new VN(e,r):s==="in"?new LN(e,r):s==="not-in"?new PN(e,r):s==="array-contains-any"?new UN(e,r):new Vt(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new MN(e,r):new ON(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Nl(s,this.value)):s!==null&&Er(this.value)===Er(s)&&this.matchesComparison(Nl(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends a_{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new vs(e,s)}matches(e){return l_(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function l_(i){return i.op==="and"}function o_(i){return kN(i)&&l_(i)}function kN(i){for(const e of i.filters)if(e instanceof vs)return!1;return!0}function Cm(i){if(i instanceof Vt)return i.field.canonicalString()+i.op.toString()+Al(i.value);if(o_(i))return i.filters.map((e=>Cm(e))).join(",");{const e=i.filters.map((s=>Cm(s))).join(",");return`${i.op}(${e})`}}function c_(i,e){return i instanceof Vt?(function(r,o){return o instanceof Vt&&r.op===o.op&&r.field.isEqual(o.field)&&Ws(r.value,o.value)})(i,e):i instanceof vs?(function(r,o){return o instanceof vs&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((d,m,y)=>d&&c_(m,o.filters[y])),!0):!1})(i,e):void Ce(19439)}function u_(i){return i instanceof Vt?(function(s){return`${s.field.canonicalString()} ${s.op} ${Al(s.value)}`})(i):i instanceof vs?(function(s){return s.op.toString()+" {"+s.getFilters().map(u_).join(" ,")+"}"})(i):"Filter"}class DN extends Vt{constructor(e,s,r){super(e,s,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const s=Ne.comparator(e.key,this.key);return this.matchesComparison(s)}}class MN extends Vt{constructor(e,s){super(e,"in",s),this.keys=d_("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class ON extends Vt{constructor(e,s){super(e,"not-in",s),this.keys=d_("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function d_(i,e){return(e.arrayValue?.values||[]).map((s=>Ne.fromName(s.referenceValue)))}class VN extends Vt{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return rg(s)&&rc(s.arrayValue,this.value)}}class LN extends Vt{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&rc(this.value.arrayValue,s)}}class PN extends Vt{constructor(e,s){super(e,"not-in",s)}matches(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!rc(this.value.arrayValue,s)}}class UN extends Vt{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!rg(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>rc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,s=null,r=[],o=[],d=null,m=null,y=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=o,this.limit=d,this.startAt=m,this.endAt=y,this.Te=null}}function lx(i,e=null,s=[],r=[],o=null,d=null,m=null){return new zN(i,e,s,r,o,d,m)}function ag(i){const e=ke(i);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((r=>Cm(r))).join(","),s+="|ob:",s+=e.orderBy.map((r=>(function(d){return d.field.canonicalString()+d.dir})(r))).join(","),Pd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((r=>Al(r))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((r=>Al(r))).join(",")),e.Te=s}return e.Te}function lg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<i.orderBy.length;s++)if(!IN(i.orderBy[s],e.orderBy[s]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let s=0;s<i.filters.length;s++)if(!c_(i.filters[s],e.filters[s]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ax(i.startAt,e.startAt)&&ax(i.endAt,e.endAt)}function Rm(i){return Ne.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,s=null,r=[],o=[],d=null,m="F",y=null,v=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=o,this.limit=d,this.limitType=m,this.startAt=y,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function BN(i,e,s,r,o,d,m,y){return new Vl(i,e,s,r,o,d,m,y)}function og(i){return new Vl(i)}function ox(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function h_(i){return i.collectionGroup!==null}function Xo(i){const e=ke(i);if(e.Ie===null){e.Ie=[];const s=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),s.add(d.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(m){let y=new zt(en.comparator);return m.filters.forEach((v=>{v.getFlattenedFilters().forEach((p=>{p.isInequality()&&(y=y.add(p.field))}))})),y})(e).forEach((d=>{s.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new ac(d,r))})),s.has(en.keyField().canonicalString())||e.Ie.push(new ac(en.keyField(),r))}return e.Ie}function Ks(i){const e=ke(i);return e.Ee||(e.Ee=HN(e,Xo(i))),e.Ee}function HN(i,e){if(i.limitType==="F")return lx(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const d=o.dir==="desc"?"asc":"desc";return new ac(o.field,d)}));const s=i.endAt?new Td(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Td(i.startAt.position,i.startAt.inclusive):null;return lx(i.path,i.collectionGroup,e,i.filters,i.limit,s,r)}}function Im(i,e){const s=i.filters.concat([e]);return new Vl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),s,i.limit,i.limitType,i.startAt,i.endAt)}function km(i,e,s){return new Vl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,s,i.startAt,i.endAt)}function zd(i,e){return lg(Ks(i),Ks(e))&&i.limitType===e.limitType}function f_(i){return`${ag(Ks(i))}|lt:${i.limitType}`}function ml(i){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((o=>u_(o))).join(", ")}]`),Pd(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((o=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(o))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((o=>Al(o))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((o=>Al(o))).join(",")),`Target(${r})`})(Ks(i))}; limitType=${i.limitType})`}function Bd(i,e){return e.isFoundDocument()&&(function(r,o){const d=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(d):Ne.isDocumentKey(r.path)?r.path.isEqual(d):r.path.isImmediateParentOf(d)})(i,e)&&(function(r,o){for(const d of Xo(r))if(!d.field.isKeyField()&&o.data.field(d.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const d of r.filters)if(!d.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(m,y,v){const p=rx(m,y,v);return m.inclusive?p<=0:p<0})(r.startAt,Xo(r),o)||r.endAt&&!(function(m,y,v){const p=rx(m,y,v);return m.inclusive?p>=0:p>0})(r.endAt,Xo(r),o))})(i,e)}function qN(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function m_(i){return(e,s)=>{let r=!1;for(const o of Xo(i)){const d=FN(o,e,s);if(d!==0)return d;r=r||o.field.isKeyField()}return 0}}function FN(i,e,s){const r=i.field.isKeyField()?Ne.comparator(e.key,s.key):(function(d,m,y){const v=m.data.field(d),p=y.data.field(d);return v!==null&&p!==null?Nl(v,p):Ce(42886)})(i.field,e,s);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[o,d]of r)if(this.equalsFn(o,e))return d}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return void(o[d]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[s]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,((s,r)=>{for(const[o,d]of r)e(o,d)}))}isEmpty(){return Wb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new pt(Ne.comparator);function Si(){return GN}const g_=new pt(Ne.comparator);function Fo(...i){let e=g_;for(const s of i)e=e.insert(s.key,s);return e}function p_(i){let e=g_;return i.forEach(((s,r)=>e=e.insert(s,r.overlayedDocument))),e}function ua(){return Wo()}function y_(){return Wo()}function Wo(){return new _a((i=>i.toString()),((i,e)=>i.isEqual(e)))}const YN=new pt(Ne.comparator),KN=new zt(Ne.comparator);function Fe(...i){let e=KN;for(const s of i)e=e.add(s);return e}const QN=new zt(qe);function $N(){return QN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_d(e)?"-0":e}}function v_(i){return{integerValue:""+i}}function XN(i,e){return EN(e)?v_(e):cg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this._=void 0}}function WN(i,e,s){return i instanceof Sd?(function(o,d){const m={fields:{[e_]:{stringValue:Jb},[n_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&ig(d)&&(d=Ud(d)),d&&(m.fields[t_]=d),{mapValue:m}})(s,e):i instanceof lc?b_(i,e):i instanceof oc?__(i,e):(function(o,d){const m=x_(o,d),y=cx(m)+cx(o.Ae);return jm(m)&&jm(o.Ae)?v_(y):cg(o.serializer,y)})(i,e)}function ZN(i,e,s){return i instanceof lc?b_(i,e):i instanceof oc?__(i,e):s}function x_(i,e){return i instanceof Nd?(function(r){return jm(r)||(function(d){return!!d&&"doubleValue"in d})(r)})(e)?e:{integerValue:0}:null}class Sd extends Hd{}class lc extends Hd{constructor(e){super(),this.elements=e}}function b_(i,e){const s=w_(e);for(const r of i.elements)s.some((o=>Ws(o,r)))||s.push(r);return{arrayValue:{values:s}}}class oc extends Hd{constructor(e){super(),this.elements=e}}function __(i,e){let s=w_(e);for(const r of i.elements)s=s.filter((o=>!Ws(o,r)));return{arrayValue:{values:s}}}class Nd extends Hd{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function cx(i){return St(i.integerValue||i.doubleValue)}function w_(i){return rg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function JN(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof lc&&o instanceof lc||r instanceof oc&&o instanceof oc?Sl(r.elements,o.elements,Ws):r instanceof Nd&&o instanceof Nd?Ws(r.Ae,o.Ae):r instanceof Sd&&o instanceof Sd})(i.transform,e.transform)}class eA{constructor(e,s){this.version=e,this.transformResults=s}}class Zn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function od(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class qd{}function E_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ug(i.key,Zn.none()):new pc(i.key,i.data,Zn.none());{const s=i.data,r=Tn.empty();let o=new zt(en.comparator);for(let d of e.fields)if(!o.has(d)){let m=s.field(d);m===null&&d.length>1&&(d=d.popLast(),m=s.field(d)),m===null?r.delete(d):r.set(d,m),o=o.add(d)}return new Cr(i.key,r,new Mn(o.toArray()),Zn.none())}}function tA(i,e,s){i instanceof pc?(function(o,d,m){const y=o.value.clone(),v=dx(o.fieldTransforms,d,m.transformResults);y.setAll(v),d.convertToFoundDocument(m.version,y).setHasCommittedMutations()})(i,e,s):i instanceof Cr?(function(o,d,m){if(!od(o.precondition,d))return void d.convertToUnknownDocument(m.version);const y=dx(o.fieldTransforms,d,m.transformResults),v=d.data;v.setAll(T_(o)),v.setAll(y),d.convertToFoundDocument(m.version,v).setHasCommittedMutations()})(i,e,s):(function(o,d,m){d.convertToNoDocument(m.version).setHasCommittedMutations()})(0,e,s)}function Zo(i,e,s,r){return i instanceof pc?(function(d,m,y,v){if(!od(d.precondition,m))return y;const p=d.value.clone(),_=hx(d.fieldTransforms,v,m);return p.setAll(_),m.convertToFoundDocument(m.version,p).setHasLocalMutations(),null})(i,e,s,r):i instanceof Cr?(function(d,m,y,v){if(!od(d.precondition,m))return y;const p=hx(d.fieldTransforms,v,m),_=m.data;return _.setAll(T_(d)),_.setAll(p),m.convertToFoundDocument(m.version,_).setHasLocalMutations(),y===null?null:y.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((T=>T.field)))})(i,e,s,r):(function(d,m,y){return od(d.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):y})(i,e,s)}function nA(i,e){let s=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),d=x_(r.transform,o||null);d!=null&&(s===null&&(s=Tn.empty()),s.set(r.field,d))}return s||null}function ux(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Sl(r,o,((d,m)=>JN(d,m)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class pc extends qd{constructor(e,s,r,o=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Cr extends qd{constructor(e,s,r,o,d=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=o,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function T_(i){const e=new Map;return i.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=i.data.field(s);e.set(s,r)}})),e}function dx(i,e,s){const r=new Map;We(i.length===s.length,32656,{Re:s.length,Ve:i.length});for(let o=0;o<s.length;o++){const d=i[o],m=d.transform,y=e.data.field(d.field);r.set(d.field,ZN(m,y,s[o]))}return r}function hx(i,e,s){const r=new Map;for(const o of i){const d=o.transform,m=s.data.field(o.field);r.set(o.field,WN(d,m,e))}return r}class ug extends qd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sA extends qd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,s,r,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const d=this.mutations[o];d.key.isEqual(e.key)&&tA(d,e,r[o])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=Zo(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=Zo(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=y_();return this.mutations.forEach((o=>{const d=e.get(o.key),m=d.overlayedDocument;let y=this.applyToLocalView(m,d.mutatedFields);y=s.has(o.key)?null:y;const v=E_(m,y);v!==null&&r.set(o.key,v),m.isValidDocument()||m.convertToNoDocument(Re.min())})),r}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,((s,r)=>ux(s,r)))&&Sl(this.baseMutations,e.baseMutations,((s,r)=>ux(s,r)))}}class dg{constructor(e,s,r,o){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=o}static from(e,s,r){We(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return YN})();const d=e.mutations;for(let m=0;m<d.length;m++)o=o.insert(d[m].key,r[m].version);return new dg(e,s,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Ye;function lA(i){switch(i){case ie.OK:return Ce(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ce(15467,{code:i})}}function S_(i){if(i===void 0)return Ti("GRPC error has no .code"),ie.UNKNOWN;switch(i){case Ot.OK:return ie.OK;case Ot.CANCELLED:return ie.CANCELLED;case Ot.UNKNOWN:return ie.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return ie.INTERNAL;case Ot.UNAVAILABLE:return ie.UNAVAILABLE;case Ot.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Ot.NOT_FOUND:return ie.NOT_FOUND;case Ot.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Ot.ABORTED:return ie.ABORTED;case Ot.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Ot.DATA_LOSS:return ie.DATA_LOSS;default:return Ce(39323,{code:i})}}(Ye=Ot||(Ot={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=new vr([4294967295,4294967295],0);function fx(i){const e=oA().encode(i),s=new zb;return s.update(e),new Uint8Array(s.digest())}function mx(i){const e=new DataView(i.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new vr([s,r],0),new vr([o,d],0)]}class hg{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Go(`Invalid padding: ${s}`);if(r<0)throw new Go(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Go(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Go(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=vr.fromNumber(this.ge)}ye(e,s,r){let o=e.add(s.multiply(vr.fromNumber(r)));return o.compare(cA)===1&&(o=new vr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=fx(e),[r,o]=mx(s);for(let d=0;d<this.hashCount;d++){const m=this.ye(r,o,d);if(!this.we(m))return!1}return!0}static create(e,s,r){const o=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),m=new hg(d,o,s);return r.forEach((y=>m.insert(y))),m}insert(e){if(this.ge===0)return;const s=fx(e),[r,o]=mx(s);for(let d=0;d<this.hashCount;d++){const m=this.ye(r,o,d);this.Se(m)}}Se(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,s,r,o,d){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const o=new Map;return o.set(e,yc.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new Fd(Re.min(),o,new pt(qe),Si(),Fe())}}class yc{constructor(e,s,r,o,d){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new yc(r,s,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,s,r,o){this.be=e,this.removedTargetIds=s,this.key=r,this.De=o}}class N_{constructor(e,s){this.targetId=e,this.Ce=s}}class A_{constructor(e,s,r=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=o}}class gx{constructor(){this.ve=0,this.Fe=px(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),s=Fe(),r=Fe();return this.Fe.forEach(((o,d)=>{switch(d){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:r=r.add(o);break;default:Ce(38017,{changeType:d})}})),new yc(this.Me,this.xe,e,s,r)}qe(){this.Oe=!1,this.Fe=px()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Si(),this.Je=Zu(),this.He=Zu(),this.Ye=new pt(qe)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const r=this.nt(s);switch(e.state){case 0:this.rt(s)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((r,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,r=e.Ce.count,o=this.ot(s);if(o){const d=o.target;if(Rm(d))if(r===0){const m=new Ne(d.path);this.et(s,m,dn.newNoDocument(m,Re.min()))}else We(r===1,20013,{expectedCount:r});else{const m=this._t(s);if(m!==r){const y=this.ut(e),v=y?this.ct(y,e,m):1;if(v!==0){this.it(s);const p=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,p)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:d=0}=s;let m,y;try{m=wr(r).toUint8Array()}catch(v){if(v instanceof Zb)return Tl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{y=new hg(m,o,d)}catch(v){return Tl(v instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return y.ge===0?null:y}ct(e,s,r){return s.Ce.count===r-this.Pt(e,s.targetId)?0:2}Pt(e,s){const r=this.Ge.getRemoteKeysForTarget(s);let o=0;return r.forEach((d=>{const m=this.Ge.ht(),y=`projects/${m.projectId}/databases/${m.database}/documents/${d.path.canonicalString()}`;e.mightContain(y)||(this.et(s,d,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((d,m)=>{const y=this.ot(m);if(y){if(d.current&&Rm(y.target)){const v=new Ne(y.target.path);this.It(v).has(m)||this.Et(m,v)||this.et(m,v,dn.newNoDocument(v,e))}d.Be&&(s.set(m,d.ke()),d.qe())}}));let r=Fe();this.He.forEach(((d,m)=>{let y=!0;m.forEachWhile((v=>{const p=this.ot(v);return!p||p.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(r=r.add(d))})),this.je.forEach(((d,m)=>m.setReadTime(e)));const o=new Fd(e,s,this.Ye,this.je,r);return this.je=Si(),this.Je=Zu(),this.He=Zu(),this.Ye=new pt(qe),o}Xe(e,s){if(!this.rt(e))return;const r=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,r),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),r&&(this.je=this.je.insert(s,r))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new gx,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new zt(qe),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new zt(qe),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||be("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gx),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function Zu(){return new pt(Ne.comparator)}function px(){return new pt(Ne.comparator)}const dA={asc:"ASCENDING",desc:"DESCENDING"},hA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fA={and:"AND",or:"OR"};class mA{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Dm(i,e){return i.useProto3Json||Pd(e)?e:{value:e}}function Ad(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function gA(i,e){return Ad(i,e.toTimestamp())}function Qs(i){return We(!!i,49232),Re.fromTimestamp((function(s){const r=_r(s);return new dt(r.seconds,r.nanos)})(i))}function fg(i,e){return Mm(i,e).canonicalString()}function Mm(i,e){const s=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?s:s.child(e)}function C_(i){const e=ot.fromString(i);return We(M_(e),10190,{key:e.toString()}),e}function Om(i,e){return fg(i.databaseId,e.path)}function um(i,e){const s=C_(e);if(s.get(1)!==i.databaseId.projectId)throw new ve(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+i.databaseId.projectId);if(s.get(3)!==i.databaseId.database)throw new ve(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+i.databaseId.database);return new Ne(I_(s))}function R_(i,e){return fg(i.databaseId,e)}function pA(i){const e=C_(i);return e.length===4?ot.emptyPath():I_(e)}function Vm(i){return new ot(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function I_(i){return We(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function yx(i,e,s){return{name:Om(i,e),fields:s.value.mapValue.fields}}function yA(i,e){let s;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],d=(function(p,_){return p.useProto3Json?(We(_===void 0||typeof _=="string",58123),nn.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),nn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),m=e.targetChange.cause,y=m&&(function(p){const _=p.code===void 0?ie.UNKNOWN:S_(p.code);return new ve(_,p.message||"")})(m);s=new A_(r,o,d,y||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=um(i,r.document.name),d=Qs(r.document.updateTime),m=r.document.createTime?Qs(r.document.createTime):Re.min(),y=new Tn({mapValue:{fields:r.document.fields}}),v=dn.newFoundDocument(o,d,m,y),p=r.targetIds||[],_=r.removedTargetIds||[];s=new cd(p,_,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=um(i,r.document),d=r.readTime?Qs(r.readTime):Re.min(),m=dn.newNoDocument(o,d),y=r.removedTargetIds||[];s=new cd([],y,m.key,m)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=um(i,r.document),d=r.removedTargetIds||[];s=new cd([],d,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:d}=r,m=new aA(o,d),y=r.targetId;s=new N_(y,m)}}return s}function vA(i,e){let s;if(e instanceof pc)s={update:yx(i,e.key,e.value)};else if(e instanceof ug)s={delete:Om(i,e.key)};else if(e instanceof Cr)s={update:yx(i,e.key,e.data),updateMask:AA(e.fieldMask)};else{if(!(e instanceof sA))return Ce(16599,{Vt:e.type});s={verify:Om(i,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((r=>(function(d,m){const y=m.transform;if(y instanceof Sd)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof lc)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof oc)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Nd)return{fieldPath:m.field.canonicalString(),increment:y.Ae};throw Ce(20930,{transform:m.transform})})(0,r)))),e.precondition.isNone||(s.currentDocument=(function(o,d){return d.updateTime!==void 0?{updateTime:gA(o,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:Ce(27497)})(i,e.precondition)),s}function xA(i,e){return i&&i.length>0?(We(e!==void 0,14353),i.map((s=>(function(o,d){let m=o.updateTime?Qs(o.updateTime):Qs(d);return m.isEqual(Re.min())&&(m=Qs(d)),new eA(m,o.transformResults||[])})(s,e)))):[]}function bA(i,e){return{documents:[R_(i,e.path)]}}function _A(i,e){const s={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=R_(i,o);const d=(function(p){if(p.length!==0)return D_(vs.create(p,"and"))})(e.filters);d&&(s.structuredQuery.where=d);const m=(function(p){if(p.length!==0)return p.map((_=>(function(A){return{field:gl(A.field),direction:TA(A.dir)}})(_)))})(e.orderBy);m&&(s.structuredQuery.orderBy=m);const y=Dm(i,e.limit);return y!==null&&(s.structuredQuery.limit=y),e.startAt&&(s.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:s,parent:o}}function wA(i){let e=pA(i.parent);const s=i.structuredQuery,r=s.from?s.from.length:0;let o=null;if(r>0){We(r===1,65062);const _=s.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let d=[];s.where&&(d=(function(T){const A=k_(T);return A instanceof vs&&o_(A)?A.getFilters():[A]})(s.where));let m=[];s.orderBy&&(m=(function(T){return T.map((A=>(function(ee){return new ac(pl(ee.field),(function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ee.direction))})(A)))})(s.orderBy));let y=null;s.limit&&(y=(function(T){let A;return A=typeof T=="object"?T.value:T,Pd(A)?null:A})(s.limit));let v=null;s.startAt&&(v=(function(T){const A=!!T.before,B=T.values||[];return new Td(B,A)})(s.startAt));let p=null;return s.endAt&&(p=(function(T){const A=!T.before,B=T.values||[];return new Td(B,A)})(s.endAt)),BN(e,o,m,d,y,"F",v,p)}function EA(i,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function k_(i){return i.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=pl(s.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=pl(s.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=pl(s.unaryFilter.field);return Vt.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=pl(s.unaryFilter.field);return Vt.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(i):i.fieldFilter!==void 0?(function(s){return Vt.create(pl(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(s){return vs.create(s.compositeFilter.filters.map((r=>k_(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(s.compositeFilter.op))})(i):Ce(30097,{filter:i})}function TA(i){return dA[i]}function SA(i){return hA[i]}function NA(i){return fA[i]}function gl(i){return{fieldPath:i.canonicalString()}}function pl(i){return en.fromServerFormat(i.fieldPath)}function D_(i){return i instanceof Vt?(function(s){if(s.op==="=="){if(ix(s.value))return{unaryFilter:{field:gl(s.field),op:"IS_NAN"}};if(sx(s.value))return{unaryFilter:{field:gl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(ix(s.value))return{unaryFilter:{field:gl(s.field),op:"IS_NOT_NAN"}};if(sx(s.value))return{unaryFilter:{field:gl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gl(s.field),op:SA(s.op),value:s.value}}})(i):i instanceof vs?(function(s){const r=s.getFilters().map((o=>D_(o)));return r.length===1?r[0]:{compositeFilter:{op:NA(s.op),filters:r}}})(i):Ce(54877,{filter:i})}function AA(i){const e=[];return i.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function M_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,s,r,o,d=Re.min(),m=Re.min(),y=nn.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=y,this.expectedCount=v}withSequenceNumber(e){return new mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.yt=e}}function CA(i){const e=wA({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?km(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.Cn=new IA}addToCollectionParentIndex(e,s){return this.Cn.add(s),re.resolve()}getCollectionParents(e,s){return re.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return re.resolve()}deleteFieldIndex(e,s){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,s){return re.resolve()}getDocumentsMatchingTarget(e,s){return re.resolve(null)}getIndexType(e,s){return re.resolve(0)}getFieldIndexes(e,s){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,s){return re.resolve(br.min())}getMinOffsetFromCollectionGroup(e,s){return re.resolve(br.min())}updateCollectionGroup(e,s,r){return re.resolve()}updateIndexEntries(e,s){return re.resolve()}}class IA{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s]||new zt(ot.comparator),d=!o.has(r);return this.index[s]=o.add(r),d}has(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s];return o&&o.has(r)}getEntries(e){return(this.index[e]||new zt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O_=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(O_,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jl(0)}static cr(){return new jl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="LruGarbageCollector",kA=1048576;function bx([i,e],[s,r]){const o=qe(i,s);return o===0?qe(e,r):o}class DA{constructor(e){this.Ir=e,this.buffer=new zt(bx),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();bx(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class MA{constructor(e,s,r){this.garbageCollector=e,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(xx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Ol(s)?be(xx,"Ignoring IndexedDB error during garbage collection: ",s):await Ml(s)}await this.Vr(3e5)}))}}class OA{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(e,s){if(s===0)return re.resolve(Ld.ce);const r=new DA(s);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,s,r){return this.mr.removeTargets(e,s,r)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(vx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vx):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let r,o,d,m,y,v,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,m=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(r=T,y=Date.now(),this.removeTargets(e,r,s)))).next((T=>(d=T,v=Date.now(),this.removeOrphanedDocuments(e,r)))).next((T=>(p=Date.now(),fl()<=He.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-_}ms
	Determined least recently used ${o} in `+(y-m)+`ms
	Removed ${d} targets in `+(v-y)+`ms
	Removed ${T} documents in `+(p-v)+`ms
Total Duration: ${p-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:d,documentsRemoved:T}))))}}function VA(i,e){return new OA(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this.changes=new _a((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?re.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,s,r,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(r!==null&&Zo(r.mutation,o,Mn.empty(),dt.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.getLocalViewOfDocuments(e,r,Fe()).next((()=>r))))}getLocalViewOfDocuments(e,s,r=Fe()){const o=ua();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,r).next((d=>{let m=Fo();return d.forEach(((y,v)=>{m=m.insert(y,v.overlayedDocument)})),m}))))}getOverlayedDocuments(e,s){const r=ua();return this.populateOverlays(e,r,s).next((()=>this.computeViews(e,s,r,Fe())))}populateOverlays(e,s,r){const o=[];return r.forEach((d=>{s.has(d)||o.push(d)})),this.documentOverlayCache.getOverlays(e,o).next((d=>{d.forEach(((m,y)=>{s.set(m,y)}))}))}computeViews(e,s,r,o){let d=Si();const m=Wo(),y=(function(){return Wo()})();return s.forEach(((v,p)=>{const _=r.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof Cr)?d=d.insert(p.key,p):_!==void 0?(m.set(p.key,_.mutation.getFieldMask()),Zo(_.mutation,p,_.mutation.getFieldMask(),dt.now())):m.set(p.key,Mn.empty())})),this.recalculateAndSaveOverlays(e,d).next((v=>(v.forEach(((p,_)=>m.set(p,_))),s.forEach(((p,_)=>y.set(p,new PA(_,m.get(p)??null)))),y)))}recalculateAndSaveOverlays(e,s){const r=Wo();let o=new pt(((m,y)=>m-y)),d=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((m=>{for(const y of m)y.keys().forEach((v=>{const p=s.get(v);if(p===null)return;let _=r.get(v)||Mn.empty();_=y.applyToLocalView(p,_),r.set(v,_);const T=(o.get(y.batchId)||Fe()).add(v);o=o.insert(y.batchId,T)}))})).next((()=>{const m=[],y=o.getReverseIterator();for(;y.hasNext();){const v=y.getNext(),p=v.key,_=v.value,T=y_();_.forEach((A=>{if(!d.has(A)){const B=E_(s.get(A),r.get(A));B!==null&&T.set(A,B),d=d.add(A)}})),m.push(this.documentOverlayCache.saveOverlays(e,p,T))}return re.waitFor(m)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,s,r,o){return(function(m){return Ne.isDocumentKey(m.path)&&m.collectionGroup===null&&m.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):h_(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,o):this.getDocumentsMatchingCollectionQuery(e,s,r,o)}getNextDocuments(e,s,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,o).next((d=>{const m=o-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,o-d.size):re.resolve(ua());let y=nc,v=d;return m.next((p=>re.forEach(p,((_,T)=>(y<T.largestBatchId&&(y=T.largestBatchId),d.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{v=v.insert(_,A)}))))).next((()=>this.populateOverlays(e,p,d))).next((()=>this.computeViews(e,v,p,Fe()))).next((_=>({batchId:y,changes:p_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new Ne(s)).next((r=>{let o=Fo();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,r,o){const d=s.collectionGroup;let m=Fo();return this.indexManager.getCollectionParents(e,d).next((y=>re.forEach(y,(v=>{const p=(function(T,A){return new Vl(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(s,v.child(d));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((_=>{_.forEach(((T,A)=>{m=m.insert(T,A)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(e,s,r,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next((m=>(d=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,d,o)))).next((m=>{d.forEach(((v,p)=>{const _=p.getKey();m.get(_)===null&&(m=m.insert(_,dn.newInvalidDocument(_)))}));let y=Fo();return m.forEach(((v,p)=>{const _=d.get(v);_!==void 0&&Zo(_.mutation,p,Mn.empty(),dt.now()),Bd(s,p)&&(y=y.insert(v,p))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return re.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:Qs(o.createTime)}})(s)),re.resolve()}getNamedQuery(e,s){return re.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:CA(o.bundledQuery),readTime:Qs(o.readTime)}})(s)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.overlays=new pt(Ne.comparator),this.qr=new Map}getOverlay(e,s){return re.resolve(this.overlays.get(s))}getOverlays(e,s){const r=ua();return re.forEach(s,(o=>this.getOverlay(e,o).next((d=>{d!==null&&r.set(o,d)})))).next((()=>r))}saveOverlays(e,s,r){return r.forEach(((o,d)=>{this.St(e,s,d)})),re.resolve()}removeOverlaysForBatchId(e,s,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(r)),re.resolve()}getOverlaysForCollection(e,s,r){const o=ua(),d=s.length+1,m=new Ne(s.child("")),y=this.overlays.getIteratorFrom(m);for(;y.hasNext();){const v=y.getNext().value,p=v.getKey();if(!s.isPrefixOf(p.path))break;p.path.length===d&&v.largestBatchId>r&&o.set(v.getKey(),v)}return re.resolve(o)}getOverlaysForCollectionGroup(e,s,r,o){let d=new pt(((p,_)=>p-_));const m=this.overlays.getIterator();for(;m.hasNext();){const p=m.getNext().value;if(p.getKey().getCollectionGroup()===s&&p.largestBatchId>r){let _=d.get(p.largestBatchId);_===null&&(_=ua(),d=d.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const y=ua(),v=d.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((p,_)=>y.set(p,_))),!(y.size()>=o)););return re.resolve(y)}St(e,s,r){const o=this.overlays.get(r.key);if(o!==null){const m=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,m)}this.overlays=this.overlays.insert(r.key,new rA(s,r));let d=this.qr.get(s);d===void 0&&(d=Fe(),this.qr.set(s,d)),this.qr.set(s,d.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.Qr=new zt(Yt.$r),this.Ur=new zt(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const r=new Yt(e,s);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,s){e.forEach((r=>this.addReference(r,s)))}removeReference(e,s){this.Gr(new Yt(e,s))}zr(e,s){e.forEach((r=>this.removeReference(r,s)))}jr(e){const s=new Ne(new ot([])),r=new Yt(s,e),o=new Yt(s,e+1),d=[];return this.Ur.forEachInRange([r,o],(m=>{this.Gr(m),d.push(m.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new Ne(new ot([])),r=new Yt(s,e),o=new Yt(s,e+1);let d=Fe();return this.Ur.forEachInRange([r,o],(m=>{d=d.add(m.key)})),d}containsKey(e){const s=new Yt(e,0),r=this.Qr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class Yt{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return Ne.comparator(e.key,s.key)||qe(e.Yr,s.Yr)}static Kr(e,s){return qe(e.Yr,s.Yr)||Ne.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Yt.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,o){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new iA(d,s,r,o);this.mutationQueue.push(m);for(const y of o)this.Zr=this.Zr.add(new Yt(y.key,d)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return re.resolve(m)}lookupMutationBatch(e,s){return re.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,o=this.ei(r),d=o<0?0:o;return re.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?sg:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new Yt(s,0),o=new Yt(s,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([r,o],(m=>{const y=this.Xr(m.Yr);d.push(y)})),re.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new zt(qe);return s.forEach((o=>{const d=new Yt(o,0),m=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,m],(y=>{r=r.add(y.Yr)}))})),re.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,o=r.length+1;let d=r;Ne.isDocumentKey(d)||(d=d.child(""));const m=new Yt(new Ne(d),0);let y=new zt(qe);return this.Zr.forEachWhile((v=>{const p=v.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(y=y.add(v.Yr)),!0)}),m),re.resolve(this.ti(y))}ti(e){const s=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){We(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return re.forEach(s.mutations,(o=>{const d=new Yt(o.key,s.batchId);return r=r.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,s){const r=new Yt(s,0),o=this.Zr.firstAfterOrEqual(r);return re.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.ri=e,this.docs=(function(){return new pt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,o=this.docs.get(r),d=o?o.size:0,m=this.ri(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return re.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(s))}getEntries(e,s){let r=Si();return s.forEach((o=>{const d=this.docs.get(o);r=r.insert(o,d?d.document.mutableCopy():dn.newInvalidDocument(o))})),re.resolve(r)}getDocumentsMatchingQuery(e,s,r,o){let d=Si();const m=s.path,y=new Ne(m.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(y);for(;v.hasNext();){const{key:p,value:{document:_}}=v.getNext();if(!m.isPrefixOf(p.path))break;p.path.length>m.length+1||xN(vN(_),r)<=0||(o.has(_.key)||Bd(s,_))&&(d=d.insert(_.key,_.mutableCopy()))}return re.resolve(d)}getAllFromCollectionGroup(e,s,r,o){Ce(9500)}ii(e,s){return re.forEach(this.docs,(r=>s(r)))}newChangeBuffer(e){return new GA(this)}getSize(e){return re.resolve(this.size)}}class GA extends LA{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),re.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.persistence=e,this.si=new _a((s=>ag(s)),lg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new mg,this.targetCount=0,this.ai=jl.ur()}forEachTarget(e,s){return this.si.forEach(((r,o)=>s(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.oi&&(this.oi=s),re.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new jl(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,re.resolve()}updateTargetData(e,s){return this.Pr(s),re.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,s,r){let o=0;const d=[];return this.si.forEach(((m,y)=>{y.sequenceNumber<=s&&r.get(y.targetId)===null&&(this.si.delete(m),d.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),re.waitFor(d).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,s){const r=this.si.get(s)||null;return re.resolve(r)}addMatchingKeys(e,s,r){return this._i.Wr(s,r),re.resolve()}removeMatchingKeys(e,s,r){this._i.zr(s,r);const o=this.persistence.referenceDelegate,d=[];return o&&s.forEach((m=>{d.push(o.markPotentiallyOrphaned(e,m))})),re.waitFor(d)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),re.resolve()}getMatchingKeysForTargetId(e,s){const r=this._i.Hr(s);return re.resolve(r)}containsKey(e,s){return re.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,s){this.ui={},this.overlays={},this.ci=new Ld(0),this.li=!1,this.li=!0,this.hi=new HA,this.referenceDelegate=e(this),this.Pi=new YA(this),this.indexManager=new RA,this.remoteDocumentCache=(function(o){return new FA(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new jA(s),this.Ii=new zA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new BA,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.ui[e.toKey()];return r||(r=new qA(s,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,r){be("MemoryPersistence","Starting transaction:",e);const o=new KA(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((d=>this.referenceDelegate.di(o).next((()=>d)))).toPromise().then((d=>(o.raiseOnCommittedEvent(),d)))}Ai(e,s){return re.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,s))))}}class KA extends _N{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Ri=new mg,this.Vi=null}static mi(e){return new gg(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,s,r){return this.Ri.addReference(r,s),this.fi.delete(r.toString()),re.resolve()}removeReference(e,s,r){return this.Ri.removeReference(r,s),this.fi.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),re.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((d=>this.fi.add(d.toString())))})).next((()=>r.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(r=>{const o=Ne.fromPath(r);return this.gi(e,o).next((d=>{d||s.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((r=>{r?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return re.or([()=>re.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class jd{constructor(e,s){this.persistence=e,this.pi=new _a((r=>TN(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=VA(this,s)}static mi(e,s){return new jd(e,s)}Ei(){}di(e){return re.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>s.next((o=>r+o))))}wr(e){let s=0;return this.pr(e,(r=>{s++})).next((()=>s))}pr(e,s){return re.forEach(this.pi,((r,o)=>this.br(e,r,o).next((d=>d?re.resolve():s(o)))))}removeTargets(e,s,r){return this.persistence.getTargetCache().removeTargets(e,s,r)}removeOrphanedDocuments(e,s){let r=0;const o=this.persistence.getRemoteDocumentCache(),d=o.newChangeBuffer();return o.ii(e,(m=>this.br(e,m,s).next((y=>{y||(r++,d.removeEntry(m,Re.min()))})))).next((()=>d.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeTarget(e,s){const r=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=ad(e.data.value)),s}br(e,s,r){return re.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return re.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,s,r,o){this.targetId=e,this.fromCache=s,this.Es=r,this.ds=o}static As(e,s){let r=Fe(),o=Fe();for(const d of s.docChanges)switch(d.type){case 0:r=r.add(d.doc.key);break;case 1:o=o.add(d.doc.key)}return new pg(e,s.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ww()?8:wN(hn())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,r,o){const d={result:null};return this.ys(e,s).next((m=>{d.result=m})).next((()=>{if(!d.result)return this.ws(e,s,o,r).next((m=>{d.result=m}))})).next((()=>{if(d.result)return;const m=new QA;return this.Ss(e,s,m).next((y=>{if(d.result=y,this.Vs)return this.bs(e,s,m,y.size)}))})).next((()=>d.result))}bs(e,s,r,o){return r.documentReadCount<this.fs?(fl()<=He.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",ml(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(fl()<=He.DEBUG&&be("QueryEngine","Query:",ml(s),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(fl()<=He.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",ml(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ks(s))):re.resolve())}ys(e,s){if(ox(s))return re.resolve(null);let r=Ks(s);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=km(s,null,"F"),r=Ks(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next((d=>{const m=Fe(...d);return this.ps.getDocuments(e,m).next((y=>this.indexManager.getMinOffset(e,r).next((v=>{const p=this.Ds(s,y);return this.Cs(s,p,m,v.readTime)?this.ys(e,km(s,null,"F")):this.vs(e,p,s,v)}))))})))))}ws(e,s,r,o){return ox(s)||o.isEqual(Re.min())?re.resolve(null):this.ps.getDocuments(e,r).next((d=>{const m=this.Ds(s,d);return this.Cs(s,m,r,o)?re.resolve(null):(fl()<=He.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ml(s)),this.vs(e,m,s,yN(o,nc)).next((y=>y)))}))}Ds(e,s){let r=new zt(m_(e));return s.forEach(((o,d)=>{Bd(e,d)&&(r=r.add(d))})),r}Cs(e,s,r,o){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const d=e.limitType==="F"?s.last():s.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(o)>0)}Ss(e,s,r){return fl()<=He.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",ml(s)),this.ps.getDocumentsMatchingQuery(e,s,br.min(),r)}vs(e,s,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((d=>(s.forEach((m=>{d=d.insert(m.key,m)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="LocalStore",XA=3e8;class WA{constructor(e,s,r,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new pt(qe),this.xs=new _a((d=>ag(d)),lg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function ZA(i,e,s,r){return new WA(i,e,s,r)}async function L_(i,e){const s=ke(i);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return s.mutationQueue.getAllMutationBatches(r).next((d=>(o=d,s.Bs(e),s.mutationQueue.getAllMutationBatches(r)))).next((d=>{const m=[],y=[];let v=Fe();for(const p of o){m.push(p.batchId);for(const _ of p.mutations)v=v.add(_.key)}for(const p of d){y.push(p.batchId);for(const _ of p.mutations)v=v.add(_.key)}return s.localDocuments.getDocuments(r,v).next((p=>({Ls:p,removedBatchIds:m,addedBatchIds:y})))}))}))}function JA(i,e){const s=ke(i);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),d=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,v,p,_){const T=p.batch,A=T.keys();let B=re.resolve();return A.forEach((ee=>{B=B.next((()=>_.getEntry(v,ee))).next((Z=>{const te=p.docVersions.get(ee);We(te!==null,48541),Z.version.compareTo(te)<0&&(T.applyToRemoteDocument(Z,p),Z.isValidDocument()&&(Z.setReadTime(p.commitVersion),_.addEntry(Z)))}))})),B.next((()=>y.mutationQueue.removeMutationBatch(v,T)))})(s,r,e,d).next((()=>d.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(y){let v=Fe();for(let p=0;p<y.mutationResults.length;++p)y.mutationResults[p].transformResults.length>0&&(v=v.add(y.batch.mutations[p].key));return v})(e)))).next((()=>s.localDocuments.getDocuments(r,o)))}))}function P_(i){const e=ke(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function e4(i,e){const s=ke(i),r=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const m=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const y=[];e.targetChanges.forEach(((_,T)=>{const A=o.get(T);if(!A)return;y.push(s.Pi.removeMatchingKeys(d,_.removedDocuments,T).next((()=>s.Pi.addMatchingKeys(d,_.addedDocuments,T))));let B=A.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(T)!==null?B=B.withResumeToken(nn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(_.resumeToken,r)),o=o.insert(T,B),(function(Z,te,de){return Z.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=XA?!0:de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0})(A,B,_)&&y.push(s.Pi.updateTargetData(d,B))}));let v=Si(),p=Fe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&y.push(s.persistence.referenceDelegate.updateLimboDocument(d,_))})),y.push(t4(d,m,e.documentUpdates).next((_=>{v=_.ks,p=_.qs}))),!r.isEqual(Re.min())){const _=s.Pi.getLastRemoteSnapshotVersion(d).next((T=>s.Pi.setTargetsMetadata(d,d.currentSequenceNumber,r)));y.push(_)}return re.waitFor(y).next((()=>m.apply(d))).next((()=>s.localDocuments.getLocalViewOfDocuments(d,v,p))).next((()=>v))})).then((d=>(s.Ms=o,d)))}function t4(i,e,s){let r=Fe(),o=Fe();return s.forEach((d=>r=r.add(d))),e.getEntries(i,r).next((d=>{let m=Si();return s.forEach(((y,v)=>{const p=d.get(y);v.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(y)),v.isNoDocument()&&v.version.isEqual(Re.min())?(e.removeEntry(y,v.readTime),m=m.insert(y,v)):!p.isValidDocument()||v.version.compareTo(p.version)>0||v.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(v),m=m.insert(y,v)):be(yg,"Ignoring outdated watch update for ",y,". Current version:",p.version," Watch version:",v.version)})),{ks:m,qs:o}}))}function n4(i,e){const s=ke(i);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=sg),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function s4(i,e){const s=ke(i);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return s.Pi.getTargetData(r,e).next((d=>d?(o=d,re.resolve(o)):s.Pi.allocateTargetId(r).next((m=>(o=new mr(e,m,"TargetPurposeListen",r.currentSequenceNumber),s.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=s.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(r.targetId,r),s.xs.set(e,r.targetId)),r}))}async function Lm(i,e,s){const r=ke(i),o=r.Ms.get(e),d=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",d,(m=>r.persistence.referenceDelegate.removeTarget(m,o)))}catch(m){if(!Ol(m))throw m;be(yg,`Failed to update sequence numbers for target ${e}: ${m}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function _x(i,e,s){const r=ke(i);let o=Re.min(),d=Fe();return r.persistence.runTransaction("Execute query","readwrite",(m=>(function(v,p,_){const T=ke(v),A=T.xs.get(_);return A!==void 0?re.resolve(T.Ms.get(A)):T.Pi.getTargetData(p,_)})(r,m,Ks(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(m,y.targetId).next((v=>{d=v}))})).next((()=>r.Fs.getDocumentsMatchingQuery(m,e,s?o:Re.min(),s?d:Fe()))).next((y=>(i4(r,qN(e),y),{documents:y,Qs:d})))))}function i4(i,e,s){let r=i.Os.get(e)||Re.min();s.forEach(((o,d)=>{d.readTime.compareTo(r)>0&&(r=d.readTime)})),i.Os.set(e,r)}class wx{constructor(){this.activeTargetIds=$N()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r4{constructor(){this.Mo=new wx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,r){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wx,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="ConnectivityMonitor";class Tx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(Ex,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(Ex,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju=null;function Pm(){return Ju===null?Ju=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ju++,"0x"+Ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="RestConnection",l4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===wd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,s,r,o,d){const m=Pm(),y=this.zo(e,s.toUriEncodedString());be(dm,`Sending RPC '${e}' ${m}:`,y,r);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,d);const{host:p}=new URL(y),_=Rl(p);return this.Jo(e,y,v,r,_).then((T=>(be(dm,`Received RPC '${e}' ${m}: `,T),T)),(T=>{throw Tl(dm,`RPC '${e}' ${m} failed with error: `,T,"url: ",y,"request:",r),T}))}Ho(e,s,r,o,d,m){return this.Go(e,s,r,o,d)}jo(e,s,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,d)=>e[d]=o)),r&&r.headers.forEach(((o,d)=>e[d]=o))}zo(e,s){const r=l4[e];return`${this.Uo}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class u4 extends o4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,r,o,d){const m=Pm();return new Promise(((y,v)=>{const p=new Bb;p.setWithCredentials(!0),p.listenOnce(Hb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case rd.NO_ERROR:const T=p.getResponseJson();be(on,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(T)),y(T);break;case rd.TIMEOUT:be(on,`RPC '${e}' ${m} timed out`),v(new ve(ie.DEADLINE_EXCEEDED,"Request time out"));break;case rd.HTTP_ERROR:const A=p.getStatus();if(be(on,`RPC '${e}' ${m} failed with status:`,A,"response text:",p.getResponseText()),A>0){let B=p.getResponseJson();Array.isArray(B)&&(B=B[0]);const ee=B?.error;if(ee&&ee.status&&ee.message){const Z=(function(de){const ae=de.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(ae)>=0?ae:ie.UNKNOWN})(ee.status);v(new ve(Z,ee.message))}else v(new ve(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else v(new ve(ie.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:m,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{be(on,`RPC '${e}' ${m} completed.`)}}));const _=JSON.stringify(o);be(on,`RPC '${e}' ${m} sending request:`,o),p.send(s,"POST",_,r,15)}))}T_(e,s,r){const o=Pm(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=Gb(),y=Fb(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(v.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,s,r),v.encodeInitMessageHeaders=!0;const _=d.join("");be(on,`Creating RPC '${e}' stream ${o}: ${_}`,v);const T=m.createWebChannel(_,v);this.I_(T);let A=!1,B=!1;const ee=new c4({Yo:te=>{B?be(on,`Not sending because RPC '${e}' stream ${o} is closed:`,te):(A||(be(on,`Opening RPC '${e}' stream ${o} transport.`),T.open(),A=!0),be(on,`RPC '${e}' stream ${o} sending:`,te),T.send(te))},Zo:()=>T.close()}),Z=(te,de,ae)=>{te.listen(de,(le=>{try{ae(le)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return Z(T,qo.EventType.OPEN,(()=>{B||(be(on,`RPC '${e}' stream ${o} transport opened.`),ee.o_())})),Z(T,qo.EventType.CLOSE,(()=>{B||(B=!0,be(on,`RPC '${e}' stream ${o} transport closed`),ee.a_(),this.E_(T))})),Z(T,qo.EventType.ERROR,(te=>{B||(B=!0,Tl(on,`RPC '${e}' stream ${o} transport errored. Name:`,te.name,"Message:",te.message),ee.a_(new ve(ie.UNAVAILABLE,"The operation could not be completed")))})),Z(T,qo.EventType.MESSAGE,(te=>{if(!B){const de=te.data[0];We(!!de,16349);const ae=de,le=ae?.error||ae[0]?.error;if(le){be(on,`RPC '${e}' stream ${o} received error:`,le);const oe=le.status;let pe=(function(w){const N=Ot[w];if(N!==void 0)return S_(N)})(oe),ye=le.message;pe===void 0&&(pe=ie.INTERNAL,ye="Unknown error status: "+oe+" with message "+le.message),B=!0,ee.a_(new ve(pe,ye)),T.close()}else be(on,`RPC '${e}' stream ${o} received:`,de),ee.u_(de)}})),Z(y,qb.STAT_EVENT,(te=>{te.stat===Sm.PROXY?be(on,`RPC '${e}' stream ${o} detected buffering proxy`):te.stat===Sm.NOPROXY&&be(on,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{ee.__()}),0),ee}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function hm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(i){return new mA(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,s,r=1e3,o=1.5,d=6e4){this.Mi=e,this.timerId=s,this.d_=r,this.A_=o,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-r);o>0&&be("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="PersistentStream";class z_{constructor(e,s,r,o,d,m,y,v){this.Mi=e,this.S_=r,this.b_=o,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=y,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new U_(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===ie.RESOURCE_EXHAUSTED?(Ti(s.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===s&&this.G_(r,o)}),(r=>{e((()=>{const o=new ve(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,s){const r=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return be(Sx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(be(Sx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class d4 extends z_{constructor(e,s,r,o,d,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,o,m),this.serializer=d}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=yA(this.serializer,e),r=(function(d){if(!("targetChange"in d))return Re.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?Re.min():m.readTime?Qs(m.readTime):Re.min()})(e);return this.listener.H_(s,r)}Y_(e){const s={};s.database=Vm(this.serializer),s.addTarget=(function(d,m){let y;const v=m.target;if(y=Rm(v)?{documents:bA(d,v)}:{query:_A(d,v).ft},y.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){y.resumeToken=j_(d,m.resumeToken);const p=Dm(d,m.expectedCount);p!==null&&(y.expectedCount=p)}else if(m.snapshotVersion.compareTo(Re.min())>0){y.readTime=Ad(d,m.snapshotVersion.toTimestamp());const p=Dm(d,m.expectedCount);p!==null&&(y.expectedCount=p)}return y})(this.serializer,e);const r=EA(this.serializer,e);r&&(s.labels=r),this.q_(s)}Z_(e){const s={};s.database=Vm(this.serializer),s.removeTarget=e,this.q_(s)}}class h4 extends z_{constructor(e,s,r,o,d,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,o,m),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=xA(e.writeResults,e.commitTime),r=Qs(e.commitTime);return this.listener.na(r,s)}ra(){const e={};e.database=Vm(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((r=>vA(this.serializer,r)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{}class m4 extends f4{constructor(e,s,r,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ve(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Go(e,Mm(s,r),o,d,m))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ve(ie.UNKNOWN,d.toString())}))}Ho(e,s,r,o,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,y])=>this.connection.Ho(e,Mm(s,r),o,m,y,d))).catch((m=>{throw m.name==="FirebaseError"?(m.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new ve(ie.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class g4{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ti(s),this.aa=!1):be("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="RemoteStore";class p4{constructor(e,s,r,o,d){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((m=>{r.enqueueAndForget((async()=>{wa(this)&&(be(va,"Restarting streams for network reachability change."),await(async function(v){const p=ke(v);p.Ea.add(4),await vc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Yd(p)})(this))}))})),this.Ra=new g4(r,o)}}async function Yd(i){if(wa(i))for(const e of i.da)await e(!0)}async function vc(i){for(const e of i.da)await e(!1)}function B_(i,e){const s=ke(i);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),_g(s)?bg(s):Ll(s).O_()&&xg(s,e))}function vg(i,e){const s=ke(i),r=Ll(s);s.Ia.delete(e),r.O_()&&H_(s,e),s.Ia.size===0&&(r.O_()?r.L_():wa(s)&&s.Ra.set("Unknown"))}function xg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const s=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Ll(i).Y_(e)}function H_(i,e){i.Va.Ue(e),Ll(i).Z_(e)}function bg(i){i.Va=new uA({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Ll(i).start(),i.Ra.ua()}function _g(i){return wa(i)&&!Ll(i).x_()&&i.Ia.size>0}function wa(i){return ke(i).Ea.size===0}function q_(i){i.Va=void 0}async function y4(i){i.Ra.set("Online")}async function v4(i){i.Ia.forEach(((e,s)=>{xg(i,e)}))}async function x4(i,e){q_(i),_g(i)?(i.Ra.ha(e),bg(i)):i.Ra.set("Unknown")}async function b4(i,e,s){if(i.Ra.set("Online"),e instanceof A_&&e.state===2&&e.cause)try{await(async function(o,d){const m=d.cause;for(const y of d.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,m),o.Ia.delete(y),o.Va.removeTarget(y))})(i,e)}catch(r){be(va,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cd(i,r)}else if(e instanceof cd?i.Va.Ze(e):e instanceof N_?i.Va.st(e):i.Va.tt(e),!s.isEqual(Re.min()))try{const r=await P_(i.localStore);s.compareTo(r)>=0&&await(function(d,m){const y=d.Va.Tt(m);return y.targetChanges.forEach(((v,p)=>{if(v.resumeToken.approximateByteSize()>0){const _=d.Ia.get(p);_&&d.Ia.set(p,_.withResumeToken(v.resumeToken,m))}})),y.targetMismatches.forEach(((v,p)=>{const _=d.Ia.get(v);if(!_)return;d.Ia.set(v,_.withResumeToken(nn.EMPTY_BYTE_STRING,_.snapshotVersion)),H_(d,v);const T=new mr(_.target,v,p,_.sequenceNumber);xg(d,T)})),d.remoteSyncer.applyRemoteEvent(y)})(i,s)}catch(r){be(va,"Failed to raise snapshot:",r),await Cd(i,r)}}async function Cd(i,e,s){if(!Ol(e))throw e;i.Ea.add(1),await vc(i),i.Ra.set("Offline"),s||(s=()=>P_(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{be(va,"Retrying IndexedDB access"),await s(),i.Ea.delete(1),await Yd(i)}))}function F_(i,e){return e().catch((s=>Cd(i,s,e)))}async function Kd(i){const e=ke(i),s=Tr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sg;for(;_4(e);)try{const o=await n4(e.localStore,r);if(o===null){e.Ta.length===0&&s.L_();break}r=o.batchId,w4(e,o)}catch(o){await Cd(e,o)}G_(e)&&Y_(e)}function _4(i){return wa(i)&&i.Ta.length<10}function w4(i,e){i.Ta.push(e);const s=Tr(i);s.O_()&&s.X_&&s.ea(e.mutations)}function G_(i){return wa(i)&&!Tr(i).x_()&&i.Ta.length>0}function Y_(i){Tr(i).start()}async function E4(i){Tr(i).ra()}async function T4(i){const e=Tr(i);for(const s of i.Ta)e.ea(s.mutations)}async function S4(i,e,s){const r=i.Ta.shift(),o=dg.from(r,e,s);await F_(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Kd(i)}async function N4(i,e){e&&Tr(i).X_&&await(async function(r,o){if((function(m){return lA(m)&&m!==ie.ABORTED})(o.code)){const d=r.Ta.shift();Tr(r).B_(),await F_(r,(()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o))),await Kd(r)}})(i,e),G_(i)&&Y_(i)}async function Nx(i,e){const s=ke(i);s.asyncQueue.verifyOperationInProgress(),be(va,"RemoteStore received new credentials");const r=wa(s);s.Ea.add(3),await vc(s),r&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await Yd(s)}async function A4(i,e){const s=ke(i);e?(s.Ea.delete(2),await Yd(s)):e||(s.Ea.add(2),await vc(s),s.Ra.set("Unknown"))}function Ll(i){return i.ma||(i.ma=(function(s,r,o){const d=ke(s);return d.sa(),new d4(r,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(i.datastore,i.asyncQueue,{Xo:y4.bind(null,i),t_:v4.bind(null,i),r_:x4.bind(null,i),H_:b4.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),_g(i)?bg(i):i.Ra.set("Unknown")):(await i.ma.stop(),q_(i))}))),i.ma}function Tr(i){return i.fa||(i.fa=(function(s,r,o){const d=ke(s);return d.sa(),new h4(r,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:E4.bind(null,i),r_:N4.bind(null,i),ta:T4.bind(null,i),na:S4.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Kd(i)):(await i.fa.stop(),i.Ta.length>0&&(be(va,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,s,r,o,d){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=o,this.removalCallback=d,this.deferred=new da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,o,d){const m=Date.now()+r,y=new wg(e,s,m,o,d);return y.start(r),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eg(i,e){if(Ti("AsyncQueue",`${e}: ${i}`),Ol(i))return new ve(ie.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{static emptySet(e){return new _l(e.comparator)}constructor(e){this.comparator=e?(s,r)=>e(s,r)||Ne.comparator(s.key,r.key):(s,r)=>Ne.comparator(s.key,r.key),this.keyedMap=Fo(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,r)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof _l)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=r.getNext().key;if(!o.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new _l;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.ga=new pt(Ne.comparator)}track(e){const s=e.doc.key,r=this.ga.get(s);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(s,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(s):e.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,r)=>{e.push(r)})),e}}class Cl{constructor(e,s,r,o,d,m,y,v,p){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=y,this.excludesMetadataChanges=v,this.hasCachedResults=p}static fromInitialDocuments(e,s,r,o,d){const m=[];return s.forEach((y=>{m.push({type:0,doc:y})})),new Cl(e,s,_l.emptySet(s),m,r,o,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==r[o].type||!s[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class C4{constructor(){this.queries=jx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const o=ke(s),d=o.queries;o.queries=jx(),d.forEach(((m,y)=>{for(const v of y.Sa)v.onError(r)}))})(this,new ve(ie.ABORTED,"Firestore shutting down"))}}function jx(){return new _a((i=>f_(i)),zd)}async function R4(i,e){const s=ke(i);let r=3;const o=e.query;let d=s.queries.get(o);d?!d.ba()&&e.Da()&&(r=2):(d=new j4,r=e.Da()?0:1);try{switch(r){case 0:d.wa=await s.onListen(o,!0);break;case 1:d.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(m){const y=Eg(m,`Initialization of query '${ml(e.query)}' failed`);return void e.onError(y)}s.queries.set(o,d),d.Sa.push(e),e.va(s.onlineState),d.wa&&e.Fa(d.wa)&&Tg(s)}async function I4(i,e){const s=ke(i),r=e.query;let o=3;const d=s.queries.get(r);if(d){const m=d.Sa.indexOf(e);m>=0&&(d.Sa.splice(m,1),d.Sa.length===0?o=e.Da()?0:1:!d.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function k4(i,e){const s=ke(i);let r=!1;for(const o of e){const d=o.query,m=s.queries.get(d);if(m){for(const y of m.Sa)y.Fa(o)&&(r=!0);m.wa=o}}r&&Tg(s)}function D4(i,e,s){const r=ke(i),o=r.queries.get(e);if(o)for(const d of o.Sa)d.onError(s);r.queries.delete(e)}function Tg(i){i.Ca.forEach((e=>{e.next()}))}var Um,Cx;(Cx=Um||(Um={})).Ma="default",Cx.Cache="cache";class M4{constructor(e,s,r){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Cl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Um.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.key=e}}class Q_{constructor(e){this.key=e}}class O4{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=m_(e),this.tu=new _l(this.eu)}get nu(){return this.Ya}ru(e,s){const r=s?s.iu:new Ax,o=s?s.tu:this.tu;let d=s?s.mutatedKeys:this.mutatedKeys,m=o,y=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const A=o.get(_),B=Bd(this.query,T)?T:null,ee=!!A&&this.mutatedKeys.has(A.key),Z=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let te=!1;A&&B?A.data.isEqual(B.data)?ee!==Z&&(r.track({type:3,doc:B}),te=!0):this.su(A,B)||(r.track({type:2,doc:B}),te=!0,(v&&this.eu(B,v)>0||p&&this.eu(B,p)<0)&&(y=!0)):!A&&B?(r.track({type:0,doc:B}),te=!0):A&&!B&&(r.track({type:1,doc:A}),te=!0,(v||p)&&(y=!0)),te&&(B?(m=m.add(B),d=Z?d.add(_):d.delete(_)):(m=m.delete(_),d=d.delete(_)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const _=this.query.limitType==="F"?m.last():m.first();m=m.delete(_.key),d=d.delete(_.key),r.track({type:1,doc:_})}return{tu:m,iu:r,Cs:y,mutatedKeys:d}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,o){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const m=e.iu.ya();m.sort(((_,T)=>(function(B,ee){const Z=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:te})}};return Z(B)-Z(ee)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(r),o=o??!1;const y=s&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,p=v!==this.Za;return this.Za=v,m.length!==0||p?{snapshot:new Cl(this.query,e.tu,d,m,e.mutatedKeys,v===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ax,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const s=[];return e.forEach((r=>{this.Xa.has(r)||s.push(new Q_(r))})),this.Xa.forEach((r=>{e.has(r)||s.push(new K_(r))})),s}cu(e){this.Ya=e.Qs,this.Xa=Fe();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return Cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sg="SyncEngine";class V4{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class L4{constructor(e){this.key=e,this.hu=!1}}class P4{constructor(e,s,r,o,d,m){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=o,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new _a((y=>f_(y)),zd),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Ne.comparator),this.Au=new Map,this.Ru=new mg,this.Vu={},this.mu=new Map,this.fu=jl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function U4(i,e,s=!0){const r=e1(i);let o;const d=r.Tu.get(e);return d?(r.sharedClientState.addLocalQueryTarget(d.targetId),o=d.view.lu()):o=await $_(r,e,s,!0),o}async function z4(i,e){const s=e1(i);await $_(s,e,!0,!1)}async function $_(i,e,s,r){const o=await s4(i.localStore,Ks(e)),d=o.targetId,m=i.sharedClientState.addLocalQueryTarget(d,s);let y;return r&&(y=await B4(i,e,d,m==="current",o.resumeToken)),i.isPrimaryClient&&s&&B_(i.remoteStore,o),y}async function B4(i,e,s,r,o){i.pu=(T,A,B)=>(async function(Z,te,de,ae){let le=te.view.ru(de);le.Cs&&(le=await _x(Z.localStore,te.query,!1).then((({documents:D})=>te.view.ru(D,le))));const oe=ae&&ae.targetChanges.get(te.targetId),pe=ae&&ae.targetMismatches.get(te.targetId)!=null,ye=te.view.applyChanges(le,Z.isPrimaryClient,oe,pe);return Ix(Z,te.targetId,ye.au),ye.snapshot})(i,T,A,B);const d=await _x(i.localStore,e,!0),m=new O4(e,d.Qs),y=m.ru(d.documents),v=yc.createSynthesizedTargetChangeForCurrentChange(s,r&&i.onlineState!=="Offline",o),p=m.applyChanges(y,i.isPrimaryClient,v);Ix(i,s,p.au);const _=new V4(e,s,m);return i.Tu.set(e,_),i.Iu.has(s)?i.Iu.get(s).push(e):i.Iu.set(s,[e]),p.snapshot}async function H4(i,e,s){const r=ke(i),o=r.Tu.get(e),d=r.Iu.get(o.targetId);if(d.length>1)return r.Iu.set(o.targetId,d.filter((m=>!zd(m,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Lm(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),s&&vg(r.remoteStore,o.targetId),zm(r,o.targetId)})).catch(Ml)):(zm(r,o.targetId),await Lm(r.localStore,o.targetId,!0))}async function q4(i,e){const s=ke(i),r=s.Tu.get(e),o=s.Iu.get(r.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),vg(s.remoteStore,r.targetId))}async function F4(i,e,s){const r=W4(i);try{const o=await(function(m,y){const v=ke(m),p=dt.now(),_=y.reduce(((B,ee)=>B.add(ee.key)),Fe());let T,A;return v.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let ee=Si(),Z=Fe();return v.Ns.getEntries(B,_).next((te=>{ee=te,ee.forEach(((de,ae)=>{ae.isValidDocument()||(Z=Z.add(de))}))})).next((()=>v.localDocuments.getOverlayedDocuments(B,ee))).next((te=>{T=te;const de=[];for(const ae of y){const le=nA(ae,T.get(ae.key).overlayedDocument);le!=null&&de.push(new Cr(ae.key,le,r_(le.value.mapValue),Zn.exists(!0)))}return v.mutationQueue.addMutationBatch(B,p,de,y)})).next((te=>{A=te;const de=te.applyToLocalDocumentSet(T,Z);return v.documentOverlayCache.saveOverlays(B,te.batchId,de)}))})).then((()=>({batchId:A.batchId,changes:p_(T)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(m,y,v){let p=m.Vu[m.currentUser.toKey()];p||(p=new pt(qe)),p=p.insert(y,v),m.Vu[m.currentUser.toKey()]=p})(r,o.batchId,s),await xc(r,o.changes),await Kd(r.remoteStore)}catch(o){const d=Eg(o,"Failed to persist write");s.reject(d)}}async function X_(i,e){const s=ke(i);try{const r=await e4(s.localStore,e);e.targetChanges.forEach(((o,d)=>{const m=s.Au.get(d);m&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?m.hu=!0:o.modifiedDocuments.size>0?We(m.hu,14607):o.removedDocuments.size>0&&(We(m.hu,42227),m.hu=!1))})),await xc(s,r,e)}catch(r){await Ml(r)}}function Rx(i,e,s){const r=ke(i);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const o=[];r.Tu.forEach(((d,m)=>{const y=m.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(m,y){const v=ke(m);v.onlineState=y;let p=!1;v.queries.forEach(((_,T)=>{for(const A of T.Sa)A.va(y)&&(p=!0)})),p&&Tg(v)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function G4(i,e,s){const r=ke(i);r.sharedClientState.updateQueryState(e,"rejected",s);const o=r.Au.get(e),d=o&&o.key;if(d){let m=new pt(Ne.comparator);m=m.insert(d,dn.newNoDocument(d,Re.min()));const y=Fe().add(d),v=new Fd(Re.min(),new Map,new pt(qe),m,y);await X_(r,v),r.du=r.du.remove(d),r.Au.delete(e),Ng(r)}else await Lm(r.localStore,e,!1).then((()=>zm(r,e,s))).catch(Ml)}async function Y4(i,e){const s=ke(i),r=e.batch.batchId;try{const o=await JA(s.localStore,e);Z_(s,r,null),W_(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await xc(s,o)}catch(o){await Ml(o)}}async function K4(i,e,s){const r=ke(i);try{const o=await(function(m,y){const v=ke(m);return v.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return v.mutationQueue.lookupMutationBatch(p,y).next((T=>(We(T!==null,37113),_=T.keys(),v.mutationQueue.removeMutationBatch(p,T)))).next((()=>v.mutationQueue.performConsistencyCheck(p))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(p,_,y))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>v.localDocuments.getDocuments(p,_)))}))})(r.localStore,e);Z_(r,e,s),W_(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await xc(r,o)}catch(o){await Ml(o)}}function W_(i,e){(i.mu.get(e)||[]).forEach((s=>{s.resolve()})),i.mu.delete(e)}function Z_(i,e,s){const r=ke(i);let o=r.Vu[r.currentUser.toKey()];if(o){const d=o.get(e);d&&(s?d.reject(s):d.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function zm(i,e,s=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),s&&i.Pu.yu(r,s);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||J_(i,r)}))}function J_(i,e){i.Eu.delete(e.path.canonicalString());const s=i.du.get(e);s!==null&&(vg(i.remoteStore,s),i.du=i.du.remove(e),i.Au.delete(s),Ng(i))}function Ix(i,e,s){for(const r of s)r instanceof K_?(i.Ru.addReference(r.key,e),Q4(i,r)):r instanceof Q_?(be(Sg,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||J_(i,r.key)):Ce(19791,{wu:r})}function Q4(i,e){const s=e.key,r=s.path.canonicalString();i.du.get(s)||i.Eu.has(r)||(be(Sg,"New document in limbo: "+s),i.Eu.add(r),Ng(i))}function Ng(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const s=new Ne(ot.fromString(e)),r=i.fu.next();i.Au.set(r,new L4(s)),i.du=i.du.insert(s,r),B_(i.remoteStore,new mr(Ks(og(s.path)),r,"TargetPurposeLimboResolution",Ld.ce))}}async function xc(i,e,s){const r=ke(i),o=[],d=[],m=[];r.Tu.isEmpty()||(r.Tu.forEach(((y,v)=>{m.push(r.pu(v,e,s).then((p=>{if((p||s)&&r.isPrimaryClient){const _=p?!p.fromCache:s?.targetChanges.get(v.targetId)?.current;r.sharedClientState.updateQueryState(v.targetId,_?"current":"not-current")}if(p){o.push(p);const _=pg.As(v.targetId,p);d.push(_)}})))})),await Promise.all(m),r.Pu.H_(o),await(async function(v,p){const _=ke(v);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>re.forEach(p,(A=>re.forEach(A.Es,(B=>_.persistence.referenceDelegate.addReference(T,A.targetId,B))).next((()=>re.forEach(A.ds,(B=>_.persistence.referenceDelegate.removeReference(T,A.targetId,B)))))))))}catch(T){if(!Ol(T))throw T;be(yg,"Failed to update sequence numbers: "+T)}for(const T of p){const A=T.targetId;if(!T.fromCache){const B=_.Ms.get(A),ee=B.snapshotVersion,Z=B.withLastLimboFreeSnapshotVersion(ee);_.Ms=_.Ms.insert(A,Z)}}})(r.localStore,d))}async function $4(i,e){const s=ke(i);if(!s.currentUser.isEqual(e)){be(Sg,"User change. New user:",e.toKey());const r=await L_(s.localStore,e);s.currentUser=e,(function(d,m){d.mu.forEach((y=>{y.forEach((v=>{v.reject(new ve(ie.CANCELLED,m))}))})),d.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xc(s,r.Ls)}}function X4(i,e){const s=ke(i),r=s.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let o=Fe();const d=s.Iu.get(e);if(!d)return o;for(const m of d){const y=s.Tu.get(m);o=o.unionWith(y.view.nu)}return o}}function e1(i){const e=ke(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=X_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G4.bind(null,e),e.Pu.H_=k4.bind(null,e.eventManager),e.Pu.yu=D4.bind(null,e.eventManager),e}function W4(i){const e=ke(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K4.bind(null,e),e}class Rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return ZA(this.persistence,new $A,e.initialUser,this.serializer)}Cu(e){return new V_(gg.mi,this.serializer)}Du(e){return new r4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rd.provider={build:()=>new Rd};class Z4 extends Rd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){We(this.persistence.referenceDelegate instanceof jd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MA(r,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new V_((r=>jd.mi(r,s)),this.serializer)}}class Bm{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$4.bind(null,this.syncEngine),await A4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new C4})()}createDatastore(e){const s=Gd(e.databaseInfo.databaseId),r=(function(d){return new u4(d)})(e.databaseInfo);return(function(d,m,y,v){return new m4(d,m,y,v)})(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return(function(r,o,d,m,y){return new p4(r,o,d,m,y)})(this.localStore,this.datastore,e.asyncQueue,(s=>Rx(this.syncEngine,s,0)),(function(){return Tx.v()?new Tx:new a4})())}createSyncEngine(e,s){return(function(o,d,m,y,v,p,_){const T=new P4(o,d,m,y,v,p);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const r=ke(s);be(va,"RemoteStore shutting down."),r.Ea.add(5),await vc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bm.provider={build:()=>new Bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="FirestoreClient";class ej{constructor(e,s,r,o,d){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(r,(async m=>{be(Sr,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(r,(m=>(be(Sr,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=Eg(s,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function fm(i,e){i.asyncQueue.verifyOperationInProgress(),be(Sr,"Initializing OfflineComponentProvider");const s=i.configuration;await e.initialize(s);let r=s.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await L_(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function kx(i,e){i.asyncQueue.verifyOperationInProgress();const s=await tj(i);be(Sr,"Initializing OnlineComponentProvider"),await e.initialize(s,i.configuration),i.setCredentialChangeListener((r=>Nx(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Nx(e.remoteStore,o))),i._onlineComponents=e}async function tj(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){be(Sr,"Using user provided OfflineComponentProvider");try{await fm(i,i._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;Tl("Error using user provided cache. Falling back to memory cache: "+s),await fm(i,new Rd)}}else be(Sr,"Using default OfflineComponentProvider"),await fm(i,new Z4(void 0));return i._offlineComponents}async function t1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(be(Sr,"Using user provided OnlineComponentProvider"),await kx(i,i._uninitializedComponentsProvider._online)):(be(Sr,"Using default OnlineComponentProvider"),await kx(i,new Bm))),i._onlineComponents}function nj(i){return t1(i).then((e=>e.syncEngine))}async function Dx(i){const e=await t1(i),s=e.eventManager;return s.onListen=U4.bind(null,e.syncEngine),s.onUnlisten=H4.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=z4.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=q4.bind(null,e.syncEngine),s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="firestore.googleapis.com",Ox=!0;class Vx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=s1,this.ssl=Ox}else this.host=e.host,this.ssl=e.ssl??Ox;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kA)throw new ve(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qd{constructor(e,s,r,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new aN;switch(r.type){case"firstParty":return new uN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=Mx.get(s);r&&(be("ComponentProvider","Removing Datastore"),Mx.delete(s),r.terminate())})(this),Promise.resolve()}}function sj(i,e,s,r={}){i=Ys(i,Qd);const o=Rl(e),d=i._getSettings(),m={...d,emulatorOptions:i._getEmulatorOptions()},y=`${e}:${s}`;o&&(Zx(`https://${y}`),Jx("Firestore",!0)),d.host!==s1&&d.host!==y&&Tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...d,host:y,ssl:o,emulatorOptions:r};if(!fa(v,m)&&(i._setSettings(v),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=un.MOCK_USER;else{p=fw(r.mockUserToken,i._app?.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ve(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new un(T)}i._authCredentials=new lN(new Kb(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ea(this.firestore,e,this._query)}}class Nt{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(gc(s,Nt._jsonSchema))return new Nt(e,r||null,new Ne(ot.fromString(s.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:Lt("string",Nt._jsonSchemaVersion),referencePath:Lt("string")};class xr extends Ea{constructor(e,s,r){super(e,s,og(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Ne(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function gt(i,e,...s){if(i=Bt(i),Qb("collection","path",e),i instanceof Qd){const r=ot.fromString(e,...s);return Qv(r),new xr(i,null,r)}{if(!(i instanceof Nt||i instanceof xr))throw new ve(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ot.fromString(e,...s));return Qv(r),new xr(i.firestore,null,r)}}function tn(i,e,...s){if(i=Bt(i),arguments.length===1&&(e=ng.newId()),Qb("doc","path",e),i instanceof Qd){const r=ot.fromString(e,...s);return Kv(r),new Nt(i,null,new Ne(r))}{if(!(i instanceof Nt||i instanceof xr))throw new ve(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ot.fromString(e,...s));return Kv(r),new Nt(i.firestore,i instanceof xr?i.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="AsyncQueue";class Px{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new U_(this,"async_queue_retry"),this._c=()=>{const r=hm();r&&be(Lx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const s=hm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=hm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new da;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ol(e))throw e;be(Lx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ti("INTERNAL UNHANDLED ERROR: ",Ux(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(e,s,r){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=wg.createAndSchedule(this,e,s,r,(d=>this.hc(d)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:Ux(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function Ux(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(i){return(function(s,r){if(typeof s!="object"||s===null)return!1;const o=s;for(const d of r)if(d in o&&typeof o[d]=="function")return!0;return!1})(i,["next","error","complete"])}class xa extends Qd{constructor(e,s,r,o){super(e,s,r,o),this.type="firestore",this._queue=new Px,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Px(e),this._firestoreClient=void 0,await e}}}function ij(i,e){const s=typeof i=="object"?i:sb(),r=typeof i=="string"?i:wd,o=Ym(s,"firestore").getImmediate({identifier:r});if(!o._initialized){const d=dw("firestore");d&&sj(o,...d)}return o}function i1(i){if(i._terminated)throw new ve(ie.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||rj(i),i._firestoreClient}function rj(i){const e=i._freezeSettings(),s=(function(o,d,m,y){return new AN(o,d,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,n1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new ej(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&(function(o){const d=o?._online.build();return{_offline:o?._offline.build(d),_online:d}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(nn.fromBase64String(e))}catch(s){throw new ve(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Wn(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gc(e,Wn._jsonSchema))return Wn.fromBase64String(e.bytes)}}Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:Lt("string",Wn._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new ve(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new ve(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new ve(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$s._jsonSchemaVersion}}static fromJSON(e){if(gc(e,$s._jsonSchema))return new $s(e.latitude,e.longitude)}}$s._jsonSchemaVersion="firestore/geoPoint/1.0",$s._jsonSchema={type:Lt("string",$s._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let d=0;d<r.length;++d)if(r[d]!==o[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gc(e,Xs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new Xs(e.vectorValues);throw new ve(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xs._jsonSchemaVersion="firestore/vectorValue/1.0",Xs._jsonSchema={type:Lt("string",Xs._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=/^__.*__$/;class lj{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new Cr(e,this.data,this.fieldMask,s,this.fieldTransforms):new pc(e,this.data,s,this.fieldTransforms)}}class r1{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Cr(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function a1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:i})}}class jg{constructor(e,s,r,o,d,m){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=o,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new jg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.gc(e),r}yc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Id(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(a1(this.Ac)&&aj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class oj{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Gd(e)}Cc(e,s,r,o=!1){return new jg({Ac:e,methodName:s,Dc:r,path:en.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xd(i){const e=i._freezeSettings(),s=Gd(i._databaseId);return new oj(i._databaseId,!!e.ignoreUndefinedProperties,s)}function l1(i,e,s,r,o,d={}){const m=i.Cc(d.merge||d.mergeFields?2:0,e,s,o);Cg("Data must be an object, but it was:",m,r);const y=o1(r,m);let v,p;if(d.merge)v=new Mn(m.fieldMask),p=m.fieldTransforms;else if(d.mergeFields){const _=[];for(const T of d.mergeFields){const A=Hm(e,T,s);if(!m.contains(A))throw new ve(ie.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);u1(_,A)||_.push(A)}v=new Mn(_),p=m.fieldTransforms.filter((T=>v.covers(T.field)))}else v=null,p=m.fieldTransforms;return new lj(new Tn(y),v,p)}class Wd extends Ag{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wd}}function cj(i,e,s,r){const o=i.Cc(1,e,s);Cg("Data must be an object, but it was:",o,r);const d=[],m=Tn.empty();jr(r,((v,p)=>{const _=Rg(e,v,s);p=Bt(p);const T=o.yc(_);if(p instanceof Wd)d.push(_);else{const A=bc(p,T);A!=null&&(d.push(_),m.set(_,A))}}));const y=new Mn(d);return new r1(m,y,o.fieldTransforms)}function uj(i,e,s,r,o,d){const m=i.Cc(1,e,s),y=[Hm(e,r,s)],v=[o];if(d.length%2!=0)throw new ve(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<d.length;A+=2)y.push(Hm(e,d[A])),v.push(d[A+1]);const p=[],_=Tn.empty();for(let A=y.length-1;A>=0;--A)if(!u1(p,y[A])){const B=y[A];let ee=v[A];ee=Bt(ee);const Z=m.yc(B);if(ee instanceof Wd)p.push(B);else{const te=bc(ee,Z);te!=null&&(p.push(B),_.set(B,te))}}const T=new Mn(p);return new r1(_,T,m.fieldTransforms)}function dj(i,e,s,r=!1){return bc(s,i.Cc(r?4:3,e))}function bc(i,e){if(c1(i=Bt(i)))return Cg("Unsupported field value:",e,i),o1(i,e);if(i instanceof Ag)return(function(r,o){if(!a1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const d=r._toFieldTransform(o);d&&o.fieldTransforms.push(d)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const d=[];let m=0;for(const y of r){let v=bc(y,o.wc(m));v==null&&(v={nullValue:"NULL_VALUE"}),d.push(v),m++}return{arrayValue:{values:d}}})(i,e)}return(function(r,o){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XN(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const d=dt.fromDate(r);return{timestampValue:Ad(o.serializer,d)}}if(r instanceof dt){const d=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ad(o.serializer,d)}}if(r instanceof $s)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wn)return{bytesValue:j_(o.serializer,r._byteString)};if(r instanceof Nt){const d=o.databaseId,m=r.firestore._databaseId;if(!m.isEqual(d))throw o.Sc(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:fg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Xs)return(function(m,y){return{mapValue:{fields:{[s_]:{stringValue:i_},[Ed]:{arrayValue:{values:m.toArray().map((p=>{if(typeof p!="number")throw y.Sc("VectorValues must only contain numeric values.");return cg(y.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Vd(r)}`)})(i,e)}function o1(i,e){const s={};return Wb(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(i,((r,o)=>{const d=bc(o,e.mc(r));d!=null&&(s[r]=d)})),{mapValue:{fields:s}}}function c1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof dt||i instanceof $s||i instanceof Wn||i instanceof Nt||i instanceof Ag||i instanceof Xs)}function Cg(i,e,s){if(!c1(s)||!$b(s)){const r=Vd(s);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function Hm(i,e,s){if((e=Bt(e))instanceof $d)return e._internalPath;if(typeof e=="string")return Rg(i,e);throw Id("Field path arguments must be of type string or ",i,!1,void 0,s)}const hj=new RegExp("[~\\*/\\[\\]]");function Rg(i,e,s){if(e.search(hj)>=0)throw Id(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,s);try{return new $d(...e.split("."))._internalPath}catch{throw Id(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,s)}}function Id(i,e,s,r,o){const d=r&&!r.isEmpty(),m=o!==void 0;let y=`Function ${e}() called with invalid data`;s&&(y+=" (via `toFirestore()`)"),y+=". ";let v="";return(d||m)&&(v+=" (found",d&&(v+=` in field ${r}`),m&&(v+=` in document ${o}`),v+=")"),new ve(ie.INVALID_ARGUMENT,y+i+v)}function u1(i,e){return i.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,s,r,o,d){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=o,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Ig("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class fj extends d1{data(){return super.data()}}function Ig(i,e){return typeof e=="string"?Rg(i,e):e instanceof $d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ve(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kg{}class h1 extends kg{}function es(i,e,...s){let r=[];e instanceof kg&&r.push(e),r=r.concat(s),(function(d){const m=d.filter((v=>v instanceof Mg)).length,y=d.filter((v=>v instanceof Dg)).length;if(m>1||m>0&&y>0)throw new ve(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Dg extends h1{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new Dg(e,s,r)}_apply(e){const s=this._parse(e);return f1(e._query,s),new Ea(e.firestore,e.converter,Im(e._query,s))}_parse(e){const s=Xd(e.firestore);return(function(d,m,y,v,p,_,T){let A;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ve(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Hx(T,_);const ee=[];for(const Z of T)ee.push(Bx(v,d,Z));A={arrayValue:{values:ee}}}else A=Bx(v,d,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Hx(T,_),A=dj(y,m,T,_==="in"||_==="not-in");return Vt.create(p,_,A)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}class Mg extends kg{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Mg(e,s)}_parse(e){const s=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:vs.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,d){let m=o;const y=d.getFlattenedFilters();for(const v of y)f1(m,v),m=Im(m,v)})(e._query,s),new Ea(e.firestore,e.converter,Im(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Og extends h1{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new Og(e,s)}_apply(e){const s=(function(o,d,m){if(o.startAt!==null)throw new ve(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ve(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ac(d,m)})(e._query,this._field,this._direction);return new Ea(e.firestore,e.converter,(function(o,d){const m=o.explicitOrderBy.concat([d]);return new Vl(o.path,o.collectionGroup,m,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,s))}}function ts(i,e="asc"){const s=e,r=Ig("orderBy",i);return Og._create(r,s)}function Bx(i,e,s){if(typeof(s=Bt(s))=="string"){if(s==="")throw new ve(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h_(e)&&s.indexOf("/")!==-1)throw new ve(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(ot.fromString(s));if(!Ne.isDocumentKey(r))throw new ve(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nx(i,new Ne(r))}if(s instanceof Nt)return nx(i,s._key);throw new ve(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vd(s)}.`)}function Hx(i,e){if(!Array.isArray(i)||i.length===0)throw new ve(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function f1(i,e){const s=(function(o,d){for(const m of o)for(const y of m.getFlattenedFilters())if(d.indexOf(y.op)>=0)return y.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new ve(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class gj{convertValue(e,s="none"){switch(Er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return jr(e,((o,d)=>{r[o]=this.convertValue(d,s)})),r}convertVectorValue(e){const s=e.fields?.[Ed].arrayValue?.values?.map((r=>St(r.doubleValue)));return new Xs(s)}convertGeoPoint(e){return new $s(St(e.latitude),St(e.longitude))}convertArray(e,s){return(e.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const r=Ud(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const s=_r(e);return new dt(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=ot.fromString(e);We(M_(r),9688,{name:e});const o=new ic(r.get(1),r.get(3)),d=new Ne(r.popFirst(5));return o.isEqual(s)||Ti(`Document ${d} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(i,e,s){let r;return r=i?i.toFirestore(e):e,r}class Yo{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ha extends d1{constructor(e,s,r,o,d,m){super(e,s,r,o,m),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(Ig("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=ha._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",ha._jsonSchema={type:Lt("string",ha._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class ud extends ha{data(e={}){return super.data(e)}}class wl{constructor(e,s,r,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new Yo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new ud(this._firestore,this._userDataWriter,r.key,r,new Yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new ve(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,d){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map((y=>{const v=new ud(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Yo(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:v,oldIndex:-1,newIndex:m++}}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>d||y.type!==3)).map((y=>{const v=new ud(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Yo(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,_=-1;return y.type!==0&&(p=m.indexOf(y.doc.key),m=m.delete(y.doc.key)),y.type!==1&&(m=m.add(y.doc),_=m.indexOf(y.doc.key)),{type:pj(y.type),doc:v,oldIndex:p,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ng.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],o=[];return this.docs.forEach((d=>{d._document!==null&&(s.push(d._document),r.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),o.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pj(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:i})}}wl._jsonSchemaVersion="firestore/querySnapshot/1.0",wl._jsonSchema={type:Lt("string",wl._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class g1 extends gj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,s)}}function yj(i,e,s){i=Ys(i,Nt);const r=Ys(i.firestore,xa),o=m1(i.converter,e);return Zd(r,[l1(Xd(r),"setDoc",i._key,o,i.converter!==null,s).toMutation(i._key,Zn.none())])}function Nr(i,e,s,...r){i=Ys(i,Nt);const o=Ys(i.firestore,xa),d=Xd(o);let m;return m=typeof(e=Bt(e))=="string"||e instanceof $d?uj(d,"updateDoc",i._key,e,s,r):cj(d,"updateDoc",i._key,e),Zd(o,[m.toMutation(i._key,Zn.exists(!0))])}function ba(i){return Zd(Ys(i.firestore,xa),[new ug(i._key,Zn.none())])}function Ni(i,e){const s=Ys(i.firestore,xa),r=tn(i),o=m1(i.converter,e);return Zd(s,[l1(Xd(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Zn.exists(!1))]).then((()=>r))}function gn(i,...e){i=Bt(i);let s={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||zx(e[r])||(s=e[r++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(zx(e[r])){const v=e[r];e[r]=v.next?.bind(v),e[r+1]=v.error?.bind(v),e[r+2]=v.complete?.bind(v)}let d,m,y;if(i instanceof Nt)m=Ys(i.firestore,xa),y=og(i._key.path),d={next:v=>{e[r]&&e[r](vj(m,i,v))},error:e[r+1],complete:e[r+2]};else{const v=Ys(i,Ea);m=Ys(v.firestore,xa),y=v._query;const p=new g1(m);d={next:_=>{e[r]&&e[r](new wl(m,p,v,_))},error:e[r+1],complete:e[r+2]},mj(i._query)}return(function(p,_,T,A){const B=new J4(A),ee=new M4(_,B,T);return p.asyncQueue.enqueueAndForget((async()=>R4(await Dx(p),ee))),()=>{B.Nu(),p.asyncQueue.enqueueAndForget((async()=>I4(await Dx(p),ee)))}})(i1(m),y,o,d)}function Zd(i,e){return(function(r,o){const d=new da;return r.asyncQueue.enqueueAndForget((async()=>F4(await nj(r),o,d))),d.promise})(i1(i),e)}function vj(i,e,s){const r=s.docs.get(e._key),o=new g1(i);return new ha(i,o,e._key,r,new Yo(s.hasPendingWrites,s.fromCache),e.converter)}(function(e,s=!0){(function(o){Dl=o})(Il),El(new ma("firestore",((r,{instanceIdentifier:o,options:d})=>{const m=r.getProvider("app").getImmediate(),y=new xa(new oN(r.getProvider("auth-internal")),new dN(m,r.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ve(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ic(p.options.projectId,_)})(m,o),m);return d={useFetchStreams:s,...d},y._setSettings(d),y}),"PUBLIC").setMultipleInstances(!0)),yr(qv,Fv,e),yr(qv,Fv,"esm2020")})();const xj={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},p1=nb(xj),Jn=nN(p1),Le=ij(p1),mm={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function bj(){const[i,e]=ce.useState(!0),[s,r]=ce.useState(""),[o,d]=ce.useState(""),[m,y]=ce.useState(""),[v,p]=ce.useState(""),[_,T]=ce.useState(!1),A=async Z=>{Z.preventDefault(),y(""),p(""),T(!0);try{if(i)await BT(Jn,s,o);else{const de=(await zT(Jn,s,o)).user;await yj(tn(Le,"users",de.uid),{email:de.email,role:"user",createdAt:new Date().toISOString()}),p("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(te){y(ee(te.code))}finally{T(!1)}},B=async()=>{if(!s){y("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await UT(Jn,s),p("ifre sfrlama balants e-posta adresinize gnderildi."),y("")}catch(Z){y(ee(Z.code))}},ee=Z=>{switch(Z){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+Z}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:i?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),m&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:m}),v&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:v}),c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(mm.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:s,onChange:Z=>r(Z.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(mm.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:o,onChange:Z=>d(Z.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:B,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[i?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(mm.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[i?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!i),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:i?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const cr={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},_j=({data:i})=>{if(!i||i.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,s=600,r=20,o=Math.max(...i.map(y=>y.value))||100,d=i.map((y,v)=>{const p=i.length>1?v/(i.length-1)*(s-r*2)+r:s/2,_=e-r-y.value/o*(e-r*2),T=isNaN(p)?r:p,A=isNaN(_)?e-r:_;return`${T},${A}`}).join(" "),m=`${d} ${s-r},${e-r} ${r},${e-r}`;return c.jsxs("svg",{viewBox:`0 0 ${s} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:r,y1:e-r,x2:s-r,y2:e-r,stroke:"#e5e7eb",strokeWidth:"1"}),i.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${m}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:d,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),i.map((y,v)=>{const p=i.length>1?v/(i.length-1)*(s-r*2)+r:s/2,_=e-r-y.value/o*(e-r*2),T=isNaN(p)?r:p,A=isNaN(_)?e-r:_;return c.jsx("circle",{cx:T,cy:A,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},v)})]})},ed=({title:i,value:e,subtext:s,icon:r,color:o})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:i}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(cr.TrendingUp,{})," ",s]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${o}`,children:c.jsx(r,{})})]});function qx({onNavigate:i=()=>{}}){const[e,s]=ce.useState(null),[r,o]=ce.useState(!0),[d,m]=ce.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[y,v]=ce.useState([]),[p,_]=ce.useState([]),[T,A]=ce.useState([]),[B,ee]=ce.useState([]);return ce.useEffect(()=>{const Z=Jn.onAuthStateChanged(oe=>{s(oe),o(!1)}),te=gn(es(gt(Le,"siparisler"),ts("createdAt","desc")),oe=>{const pe=oe.docs.map(w=>w.data());_(pe.slice(0,5));const ye={};pe.forEach(w=>{const N=w.date?w.date.slice(0,7):"N/A";ye[N]=(ye[N]||0)+1});const D=Object.entries(ye).map(([w,N])=>({label:w,value:N})).sort((w,N)=>w.label.localeCompare(N.label));ee(D),m(w=>({...w,activeOrders:pe.length}))}),de=gn(gt(Le,"teklifler"),oe=>{m(pe=>({...pe,pendingProposals:oe.size}))}),ae=gn(gt(Le,"employees"),oe=>{const pe=oe.docs.map(w=>w.data());m(w=>({...w,totalWorkers:pe.length}));const ye=new Date().toISOString().split("T")[0],D=pe.filter(w=>{const N=w.attendance?.[ye];return N&&["paid_leave","unpaid_leave","off"].includes(N.type)});v(D)}),le=gn(gt(Le,"inventory_movements"),oe=>{const pe=oe.docs.map(w=>w.data()),ye={};pe.forEach(w=>{const N=Number(w.quantity)||0,R=w.action==="add"?N:-N;ye[w.productName]||(ye[w.productName]=0),ye[w.productName]+=R});const D=Object.entries(ye).filter(([w,N])=>N<100).map(([w,N])=>({name:w,qty:N}));A(D.slice(0,5)),m(w=>({...w,inventoryCount:Object.keys(ye).length}))});return()=>{Z(),te(),de(),ae(),le()}},[]),r?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(cr.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(ed,{title:"Aktif Sipariler",value:d.activeOrders,subtext:"Geen aya gre art",icon:cr.Cart,color:"bg-indigo-600"}),c.jsx(ed,{title:"Bekleyen Teklifler",value:d.pendingProposals,subtext:"Onay bekleyen",icon:cr.Document,color:"bg-purple-600"}),c.jsx(ed,{title:"Toplam Stok Kalemi",value:d.inventoryCount,subtext:"Kritik seviye kontrol",icon:cr.Box,color:"bg-emerald-600"}),c.jsx(ed,{title:"Toplam Personel",value:d.totalWorkers,subtext:"Aktif alan",icon:cr.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(_j,{data:B})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>i("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[p.map((Z,te)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",Z.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",Z.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:Z.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},te)),p.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(cr.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:y.length>0?y.map((Z,te)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:Z.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:Z.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:Z.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},te)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(cr.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:T.length>0?T.map((Z,te)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:Z.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[Z.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},te)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>i("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const Hs={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})},Fx=({checked:i,onChange:e,label:s})=>c.jsxs("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!i),children:[c.jsx("div",{className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${i?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-5":"translate-x-0"}`})}),s&&c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 group-hover:text-indigo-600 transition-colors",children:s})]}),cn=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i)+" ";function wj(){const[i,e]=ce.useState(null),[s,r]=ce.useState(!0),[o,d]=ce.useState([]),[m,y]=ce.useState([]),[v,p]=ce.useState(!1),[_,T]=ce.useState({start:"",end:""}),[A,B]=ce.useState(!1),[ee,Z]=ce.useState(!1),[te,de]=ce.useState(null),[ae,le]=ce.useState(null),[oe,pe]=ce.useState({docNo:"",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[ye,D]=ce.useState({name:"",company:"",phone:"",email:""});if(ce.useEffect(()=>{const P=Jn.onAuthStateChanged(me=>{e(me),r(!1)}),k=es(gt(Le,"customers"),ts("createdAt","desc")),M=gn(k,me=>{d(me.docs.map(xe=>({id:xe.id,...xe.data()})))}),Y=es(gt(Le,"sales"),ts("createdAt","desc")),X=gn(Y,me=>{y(me.docs.map(xe=>({id:xe.id,...xe.data()})))});return()=>{P(),M(),X()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Hs.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]});const w=P=>{const k=(P.qty||0)*(P.unitPrice||0),M=k*((P.vatRate||0)/100);return k+M},N=P=>{if(!P)return{subtotal:0,totalVAT:0,grandTotal:0};const k=P.reduce((Y,X)=>Y+(X.qty||0)*(X.unitPrice||0),0),M=P.reduce((Y,X)=>Y+w(X),0);return{subtotal:k,totalVAT:M-k,grandTotal:M}},R=P=>m.filter(Y=>Y.customerId===P).reduce((Y,X)=>Y+N(X.items).grandTotal,0),I=P=>{let k=m.filter(X=>X.customerId===P);k.sort((X,me)=>new Date(X.date)-new Date(me.date));let M=0;const Y=[];return k.forEach(X=>{N(X.items).grandTotal;const me=X.status==="finished";X.items?.forEach(xe=>{const Oe=w(xe),at=Oe,tt=me?Oe:0;M=M+at-tt,Y.push({docNo:X.docNo,date:X.date,action:"Sat",desc:xe.name,qty:xe.qty,unitPrice:xe.unitPrice,borc:tt,alacak:at,balance:M})})}),Y},L=P=>{const k=I(P.id);let M="data:text/csv;charset=utf-8,\uFEFF";M+=`Siparis No,Tarih,Hareket,Aciklama,Miktar,Birim Fiyat,Borc (Odenen),Alacak (Tutar),Bakiye
`,k.forEach(me=>{const xe=at=>cn(at).replace(" ",""),Oe=[`"${me.docNo}"`,`"${me.date}"`,`"${me.action}"`,`"${me.desc}"`,`"${me.qty}"`,`"${xe(me.unitPrice)}"`,`"${xe(me.borc)}"`,`"${xe(me.alacak)}"`,`"${xe(me.balance)}"`].join(",");M+=Oe+`
`});const Y=encodeURI(M),X=document.createElement("a");X.setAttribute("href",Y),X.setAttribute("download",`${P.name}_Ekstre.csv`),document.body.appendChild(X),X.click(),document.body.removeChild(X)},j=P=>{const k=I(P.id),M=window.open("","","height=800,width=1000");if(!M){alert("Pop-up engelleyiciyi kapatn.");return}const Y=`
      <html><head><title>Ekstre - ${P.name}</title>
      <style>
        body{font-family:'Helvetica',sans-serif;padding:20px;color:#333}
        h2{text-align:center;color:#4f46e5;margin-bottom:5px}
        h4{text-align:center;color:#666;margin-top:0;margin-bottom:30px}
        table{width:100%;border-collapse:collapse;font-size:11px}
        th{background:#f3f4f6;border:1px solid #d1d5db;padding:8px;text-align:left}
        td{border:1px solid #d1d5db;padding:6px}
        .right{text-align:right}
        .bold{font-weight:bold}
      </style>
      </head><body>
        <h2>${P.name}</h2>
        <h4>Hesap Ekstresi</h4>
        <table>
          <thead>
            <tr>
              <th>Belge No</th><th>Tarih</th><th>Aklama</th><th class="right">Miktar</th><th class="right">B.Fiyat</th>
              <th class="right">Bor (denen)</th><th class="right">Alacak (Tutar)</th><th class="right">Bakiye</th>
            </tr>
          </thead>
          <tbody>
            ${k.map(X=>`
              <tr>
                <td>#${X.docNo}</td>
                <td>${X.date}</td>
                <td>${X.desc}</td>
                <td class="right">${X.qty}</td>
                <td class="right">${cn(X.unitPrice)}</td>
                <td class="right">${X.borc>0?cn(X.borc):"-"}</td>
                <td class="right">${cn(X.alacak)}</td>
                <td class="right bold">${cn(X.balance)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;M.document.write(Y),M.document.close()},he=async P=>{P.preventDefault();try{await Ni(gt(Le,"customers"),{...ye,createdAt:new Date().toISOString()}),D({name:"",company:"",phone:"",email:""}),Z(!1)}catch(k){alert("Hata: "+k.message)}},Te=P=>{de(P),le(null);const k="DOC-"+Date.now().toString().slice(-6);pe({docNo:k,date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{name:"",qty:1,unitPrice:0,vatRate:20}]}),B(!0)},F=(P,k)=>{de(k),le(P),pe({docNo:P.docNo,date:P.date,description:P.description,status:P.status,items:P.items||[]}),B(!0)},ue=async P=>{if(window.confirm("Bu sat silmek istediinize emin misiniz?"))try{await ba(tn(Le,"sales",P))}catch(k){alert("Hata: "+k.message)}},_e=async P=>{P.preventDefault();try{const k={customerId:te.id,...oe,createdAt:ae?ae.createdAt:new Date().toISOString()};ae?await Nr(tn(Le,"sales",ae.id),k):await Ni(gt(Le,"sales"),k),B(!1)}catch(k){alert("Hata: "+k.message)}},W=(P,k,M)=>{const Y=[...oe.items];Y[P][k]=k==="name"?M:Number(M),pe({...oe,items:Y})},ge=()=>pe({...oe,items:[...oe.items,{name:"",qty:1,unitPrice:0,vatRate:20}]}),C=P=>pe({...oe,items:oe.items.filter((k,M)=>M!==P)}),$=(P,k)=>{const{subtotal:M,totalVAT:Y,grandTotal:X}=N(P.items),me=window.open("","","height=600,width=800");if(!me){alert("Pop-up engelleyiciyi kapatn.");return}const xe=`
      <html><head><title>Fatura - ${P.docNo}</title><style>body{font-family:'Helvetica',sans-serif;padding:40px;color:#333}.header{display:flex;justify-content:space-between;margin-bottom:40px;border-bottom:2px solid #eee;padding-bottom:20px}.company-name{font-size:24px;font-weight:bold;color:#4f46e5}.invoice-title{font-size:32px;font-weight:bold;color:#ccc;text-align:right}.info-grid{display:flex;justify-content:space-between;margin-bottom:40px}.box{width:45%}.box h3{font-size:14px;text-transform:uppercase;color:#888;border-bottom:1px solid #ddd;padding-bottom:5px}.table{width:100%;border-collapse:collapse;margin-bottom:30px}.table th{text-align:left;background:#f9fafb;padding:12px;font-size:12px;text-transform:uppercase;color:#666}.table td{padding:12px;border-bottom:1px solid #eee}.text-right{text-align:right}.totals{float:right;width:300px}.row{display:flex;justify-content:space-between;padding:8px 0}.total-row{font-weight:bold;font-size:18px;border-top:2px solid #333;padding-top:10px}.footer{margin-top:100px;text-align:center;font-size:12px;color:#999}</style></head><body><div class="header"><div class="company-name">irket Adnz A..</div><div class="invoice-title">FATURA</div></div><div class="info-grid"><div class="box"><h3>Sayn</h3><p><strong>${k.name}</strong><br>${k.company}<br>${k.phone}</p></div><div class="box text-right"><h3>Belge Detaylar</h3><p>Belge No: <strong>#${P.docNo}</strong><br>Tarih: ${P.date}<br>Aklama: ${P.description}</p></div></div><table class="table"><thead><tr><th style="width:40%">rn / Hizmet</th><th class="text-right">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-right">KDV (%)</th><th class="text-right">Toplam (KDV Dahil)</th></tr></thead><tbody>${P.items.map(Oe=>`<tr><td>${Oe.name}</td><td class="text-right">${Oe.qty}</td><td class="text-right">${cn(Oe.unitPrice)}</td><td class="text-right">%${Oe.vatRate}</td><td class="text-right">${cn(w(Oe))}</td></tr>`).join("")}</tbody></table><div class="totals"><div class="row"><span>Ara Toplam:</span><span>${cn(M)}</span></div><div class="row"><span>Toplam KDV:</span><span>${cn(Y)}</span></div><div class="row total-row"><span>Genel Toplam:</span><span>${cn(X)}</span></div></div><div style="clear:both"></div><div class="footer">Bu belge elektronik ortamda retilmitir.</div><script>window.onload=function(){window.print()}<\/script></body></html>
    `;me.document.write(xe),me.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri ynetimi ve hzl sat ilemleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-2 py-1",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-xs text-gray-400 mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none focus:ring-0 text-xs text-gray-700 p-1",value:_.start,onChange:P=>T({..._,start:P.target.value})})]}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-xs text-gray-400 mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none focus:ring-0 text-xs text-gray-700 p-1",value:_.end,onChange:P=>T({..._,end:P.target.value})})]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(Fx,{checked:v,onChange:p,label:"Bitmi Siparileri Gster"})}),c.jsxs("button",{onClick:()=>Z(!0),className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Hs.Plus,{})}),"Yeni Mteri"]})]})]}),c.jsxs("div",{className:"space-y-8",children:[o.map(P=>{const k=m.filter(Y=>{const X=Y.customerId===P.id,me=v?!0:Y.status==="active";let xe=!0;return _.start&&(xe=xe&&Y.date>=_.start),_.end&&(xe=xe&&Y.date<=_.end),X&&me&&xe}),M=R(P.id);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 sm:flex sm:items-center sm:justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 shadow-inner",children:c.jsx(Hs.User,{})}),c.jsxs("div",{className:"ml-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900",children:P.name}),c.jsxs("p",{className:"text-sm text-gray-500 font-medium",children:[P.company,"  ",P.phone]})]})]}),c.jsxs("div",{className:"mt-4 sm:mt-0 flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[c.jsxs("button",{onClick:()=>j(P),className:"flex items-center px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-xs font-medium text-gray-600 hover:text-indigo-600 hover:border-indigo-200 transition-all shadow-sm",title:"PDF Raporu Yazdr",children:[c.jsx(Hs.Printer,{})," ",c.jsx("span",{className:"ml-1",children:"Rapor"})]}),c.jsxs("button",{onClick:()=>L(P),className:"flex items-center px-3 py-1.5 bg-white border border-gray-200 rounded-lg text-xs font-medium text-gray-600 hover:text-emerald-600 hover:border-emerald-200 transition-all shadow-sm",title:"Excel Olarak ndir",children:[c.jsx(Hs.Download,{})," ",c.jsx("span",{className:"ml-1",children:"Excel"})]})]}),c.jsxs("div",{className:"text-right mr-2 border-l border-gray-200 pl-4",children:[c.jsx("span",{className:"text-xs text-gray-400 uppercase font-semibold tracking-wider block",children:"Toplam Sat Hacmi"}),c.jsx("span",{className:"text-lg font-bold text-emerald-600",children:cn(M)})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("button",{onClick:()=>Te(P),className:"flex items-center px-4 py-2 border border-white/20 rounded-lg shadow-md text-sm font-medium text-white bg-emerald-500/90 hover:bg-emerald-600 backdrop-blur-sm transition-all",children:[c.jsx(Hs.Plus,{}),c.jsx("span",{className:"ml-2",children:"Sat Yap"})]}),c.jsx("button",{className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:c.jsx(Hs.Trash,{})})]})]})]}),k.length>0?c.jsx("div",{className:"bg-white",children:c.jsx("ul",{className:"divide-y divide-gray-100",children:k.map(Y=>{const X=N(Y.items),me=Y.status==="finished";return c.jsx("li",{className:`px-6 py-4 transition-colors ${me?"bg-gray-50/50":"hover:bg-gray-50"}`,children:c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start sm:items-center space-x-4",children:[c.jsx("div",{className:`flex-shrink-0 h-3 w-3 rounded-full mt-1.5 sm:mt-0 ${me?"bg-gray-300":"bg-emerald-400 shadow-[0_0_10px_rgba(52,211,153,0.5)]"}`}),c.jsxs("div",{children:[c.jsxs("p",{className:`text-sm font-bold ${me?"text-gray-500":"text-indigo-600"}`,children:["#",Y.docNo,me&&c.jsx("span",{className:"ml-2 text-[10px] uppercase tracking-wider text-gray-400 border border-gray-200 rounded px-1.5 py-0.5",children:"Tamamland"})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[Y.description,"  ",Y.date]})]})]}),c.jsxs("div",{className:"flex items-center justify-between sm:justify-end space-x-6 w-full sm:w-auto",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:`text-sm font-bold ${me?"text-gray-500":"text-gray-900"}`,children:cn(X.grandTotal)}),c.jsxs("p",{className:"text-xs text-gray-400",children:[Y.items?.length||0," Kalem"]})]}),c.jsxs("div",{className:"flex items-center space-x-1 bg-gray-50 rounded-lg p-1 border border-gray-100",children:[c.jsx("button",{onClick:()=>$(Y,P),title:"Yazdr",className:"p-1.5 text-gray-400 hover:text-indigo-600 hover:bg-white rounded-md transition-all",children:c.jsx(Hs.Printer,{})}),c.jsx("button",{onClick:()=>F(Y,P),title:"Dzenle",className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-white rounded-md transition-all",children:c.jsx(Hs.Edit,{})}),c.jsx("button",{onClick:()=>ue(Y.id),title:"Sil",className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-white rounded-md transition-all",children:c.jsx(Hs.Trash,{})})]})]})]})},Y.id)})})}):_.start||_.end?c.jsx("div",{className:"px-6 py-8 text-center text-gray-400 text-sm italic bg-gray-50/50",children:"Bu tarih aralnda kayt bulunamad."}):!v&&c.jsx("div",{className:"px-6 py-4 text-center text-gray-400 text-sm italic bg-gray-50/50",children:"Aktif sipari yok."})]},P.id)}),o.length===0&&c.jsx("div",{className:"text-center text-gray-500 mt-10",children:"Henz mteri eklenmedi."})]}),ee&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsxs("div",{className:"w-full max-w-lg bg-white/80 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden transform transition-all",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Yeni Mteri Ekle"}),c.jsx("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:c.jsx("span",{className:"text-2xl",children:""})})]}),c.jsxs("form",{onSubmit:he,className:"p-8 space-y-5",children:[c.jsx("input",{required:!0,placeholder:"Ad Soyad",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:bg-white transition-all",value:ye.name,onChange:P=>D({...ye,name:P.target.value})}),c.jsx("input",{placeholder:"irket Ad",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:bg-white transition-all",value:ye.company,onChange:P=>D({...ye,company:P.target.value})}),c.jsx("input",{placeholder:"Telefon",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:bg-white transition-all",value:ye.phone,onChange:P=>D({...ye,phone:P.target.value})}),c.jsx("input",{type:"email",placeholder:"E-posta",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:bg-white transition-all",value:ye.email,onChange:P=>D({...ye,email:P.target.value})}),c.jsxs("div",{className:"pt-4 flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:()=>Z(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg shadow-indigo-200 hover:bg-indigo-600 hover:shadow-indigo-300 backdrop-blur-sm transition-all",children:"Kaydet"})]})]})]})}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-5xl h-[90vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:_e,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:ae?"Siparii Dzenle":"Yeni Sat Olutur"}),c.jsx("p",{className:"text-sm text-indigo-600 font-medium",children:te?.name})]}),c.jsx("button",{type:"button",onClick:()=>B(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 mb-8",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5",children:"Belge No"}),c.jsx("input",{type:"text",className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm text-gray-900 focus:ring-2 focus:ring-indigo-500/50",value:oe.docNo,onChange:P=>pe({...oe,docNo:P.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,className:"w-full bg-white/50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all",value:oe.date,onChange:P=>pe({...oe,date:P.target.value})})]}),c.jsxs("div",{className:"md:col-span-7",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1.5",children:"Aklama"}),c.jsx("textarea",{rows:"1",className:"w-full bg-white/50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all resize-y min-h-[42px]",placeholder:"Sipari notlar...",value:oe.description,onChange:P=>pe({...oe,description:P.target.value})})]}),c.jsx("div",{className:"md:col-span-12 flex justify-end pt-2",children:c.jsx(Fx,{checked:oe.status==="finished",onChange:P=>pe({...oe,status:P?"finished":"active"}),label:"Bu sipari tamamland (Bitmi Sipari)"})})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden mb-8 shadow-sm bg-white/40",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"rn / Hizmet"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24",children:"Adet"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider w-32",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider w-40",children:"Toplam (KDV Dahil)"}),c.jsx("th",{className:"px-2 py-3 w-10"})]})}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:oe.items.map((P,k)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"px-4 py-2",children:c.jsx("input",{type:"text",placeholder:"rn ad...",className:"w-full border-none bg-transparent focus:ring-0 text-sm p-2 rounded hover:bg-gray-50 focus:bg-white transition-colors",value:P.name,onChange:M=>W(k,"name",M.target.value)})}),c.jsx("td",{className:"px-2 py-2",children:c.jsx("input",{type:"number",min:"1",className:"w-full text-center border border-transparent bg-gray-50 rounded px-2 py-1.5 text-sm focus:border-indigo-500 focus:bg-white transition-all [&::-webkit-inner-spin-button]:appearance-none",value:P.qty,onChange:M=>W(k,"qty",M.target.value)})}),c.jsx("td",{className:"px-2 py-2",children:c.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full text-right border border-transparent bg-gray-50 rounded px-2 py-1.5 text-sm focus:border-indigo-500 focus:bg-white transition-all [&::-webkit-inner-spin-button]:appearance-none",value:P.unitPrice,onChange:M=>W(k,"unitPrice",M.target.value)})}),c.jsx("td",{className:"px-2 py-2",children:c.jsxs("select",{className:"w-full text-center border-none bg-transparent focus:ring-0 text-sm cursor-pointer",value:P.vatRate,onChange:M=>W(k,"vatRate",M.target.value),children:[c.jsx("option",{value:"0",children:"0%"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"10%"}),c.jsx("option",{value:"20",children:"20%"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-gray-700",children:cn(w(P))}),c.jsx("td",{className:"px-2 py-2 text-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx("button",{type:"button",onClick:()=>C(k),className:"text-gray-300 hover:text-red-500 transition-colors",children:c.jsx("span",{className:"text-xl",children:""})})})]},k))})]}),c.jsx("button",{type:"button",onClick:ge,className:"w-full py-3 bg-gray-50/50 text-gray-500 text-sm font-medium hover:bg-gray-100 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/50 p-6 rounded-xl border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:cn(N(oe.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsx("span",{className:"font-medium",children:cn(N(oe.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 border-t border-gray-200 pt-3",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{className:"text-indigo-600",children:cn(N(oe.items).grandTotal)})]})]})})]}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg shadow-indigo-200 hover:bg-indigo-600 hover:shadow-indigo-300 backdrop-blur-sm transition-all",children:ae?"Kaydet":"Tamamla"}),c.jsx("button",{type:"button",onClick:()=>B(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})})]})}const ra={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})};function Ej(){const[i,e]=ce.useState(null),[s,r]=ce.useState(!0),[o,d]=ce.useState([]),[m,y]=ce.useState([]),[v,p]=ce.useState({start:"",end:""}),[_,T]=ce.useState(!1),[A,B]=ce.useState(!1),ee=ce.useRef(null),[Z,te]=ce.useState(null),[de,ae]=ce.useState({en:6,boy:4}),[le,oe]=ce.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]});if(ce.useEffect(()=>{const W=Jn.onAuthStateChanged(k=>{e(k),r(!1)}),ge=es(gt(Le,"customers"),ts("name","asc")),C=gn(ge,k=>{y(k.docs.map(M=>({id:M.id,...M.data()})))}),$=es(gt(Le,"siparisler"),ts("createdAt","desc")),P=gn($,k=>{d(k.docs.map(M=>({id:M.id,...M.data()})))});return()=>{W(),C(),P()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(ra.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]});const pe=W=>{if(!W)return;const ge=new FileReader;ge.onload=C=>{const $=new Image;$.onload=()=>{const P=document.createElement("canvas");P.width=300,P.height=800,P.getContext("2d").drawImage($,0,0,300,800);const M=P.toDataURL("image/jpeg",.8);oe(Y=>({...Y,image:M}))},$.src=C.target.result},ge.readAsDataURL(W)},ye=W=>{W.preventDefault(),B(!0)},D=()=>B(!1),w=W=>{W.preventDefault(),B(!1),W.dataTransfer.files&&W.dataTransfer.files[0]&&pe(W.dataTransfer.files[0])},N=W=>{W.clipboardData.files&&W.clipboardData.files[0]&&pe(W.clipboardData.files[0])},R=()=>{te(null);const W="SP-"+Date.now().toString().slice(-6);oe({siparisNo:W,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),ae({en:6,boy:4}),T(!0)},I=W=>{te(W),oe({siparisNo:W.siparisNo,customerId:W.customerId,date:W.date,note:W.note||"",image:W.image,items:W.items||[]}),T(!0)},L=async W=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await ba(tn(Le,"siparisler",W))}catch(ge){alert(ge.message)}},j=async W=>{if(W.preventDefault(),!le.customerId){alert("Ltfen bir mteri seiniz.");return}try{const ge={...le,createdAt:Z?Z.createdAt:new Date().toISOString()};Z?await Nr(tn(Le,"siparisler",Z.id),ge):await Ni(gt(Le,"siparisler"),ge),T(!1)}catch(ge){alert(ge.message)}},he=(W,ge,C)=>{const $=[...le.items],P=$[W];if(P[ge]=C,ge==="en1"){const k=parseFloat(C);isNaN(k)?C===""&&(P.en2=""):P.en2=k-de.en}if(ge==="boy1"){const k=parseFloat(C);isNaN(k)?C===""&&(P.boy2=""):P.boy2=k-de.boy}oe({...le,items:$})},Te=()=>{oe({...le,items:[...le.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},F=W=>{const ge=le.items.filter((C,$)=>$!==W);oe({...le,items:ge})},ue=(W,ge)=>{const C=parseFloat(ge)||0,$={...de,[W]:C};ae($);const P=le.items.map(k=>({...k,en2:k.en1?parseFloat(k.en1)-$.en:k.en2,boy2:k.boy1?parseFloat(k.boy1)-$.boy:k.boy2}));oe({...le,items:P})},_e=W=>{const ge=m.find(P=>P.id===W.customerId)||{name:"Bilinmeyen Mteri"},C=window.open("","","height=800,width=1000");if(!C){alert("Pop-up engelleyiciyi kapatn.");return}const $=`
      <html><head><title>Sipari - ${W.siparisNo}</title>
      <style>
        /* A4 Size Settings */
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0;
          font-family: 'Helvetica', sans-serif; 
          color: #333; 
          display: flex; 
          flex-direction: column; 
          padding: 5mm 5mm; /* Control actual margins here */
          box-sizing: border-box; 
        }
        
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 11px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; }
        
        /* Column Widths - Forced via colgroup */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: break-all; }
        
        .group-kasa { background: #fff7ed; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 20px; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; border: 1px solid #eee; padding: 10px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling - Fills remaining space */
        .door-image-container {
          flex-grow: 1; /* Take all remaining vertical space */
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${ge.name}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${W.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${W.date}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 9%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 55%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- Sekil -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th>EKL</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
            </tr>
          </thead>
          <tbody>
            ${W.items.map(P=>`
              <tr>
                <td class="group-kasa">${P.en1||"-"}</td>
                <td class="group-kasa">${P.boy1||"-"}</td>
                <td class="group-kasa">${P.genislik||"-"}</td>
                <td>${P.takim||""}</td>
                <td class="col-desc">${P.aciklama||""}</td>
                <td>${P.sekil||""}</td>
                <td class="group-net"><strong>${P.en2||""}</strong></td>
                <td class="group-net"><strong>${P.boy2||""}</strong></td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${W.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${W.note}
          </div>
        `:""}

        ${W.image?`
          <div class="door-image-container">
            <img src="${W.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;C.document.write($),C.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:N,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-2 py-1",children:[c.jsx("span",{className:"text-xs text-gray-400",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1",value:v.start,onChange:W=>p({...v,start:W.target.value})}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1",value:v.end,onChange:W=>p({...v,end:W.target.value})})]}),c.jsxs("button",{onClick:R,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(ra.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:m.map(W=>{const ge=o.filter(C=>{const $=C.customerId===W.id;let P=!0;return v.start&&(P=P&&C.date>=v.start),v.end&&(P=P&&C.date<=v.end),$&&P});return ge.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(ra.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:W.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[ge.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:ge.map(C=>c.jsxs("div",{className:"px-6 py-4 hover:bg-gray-50/50 transition-colors flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[C.image?c.jsx("img",{src:C.image,alt:"Door",className:"w-12 h-20 object-cover border rounded bg-gray-100"}):c.jsx("div",{className:"w-12 h-20 bg-gray-100 rounded border flex items-center justify-center text-gray-300 text-xs",children:"No Img"}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",C.siparisNo]}),c.jsx("p",{className:"text-xs text-gray-500",children:C.date}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[C.items?.length||0," Kalem rn"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsx("button",{onClick:()=>_e(C),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(ra.Printer,{})}),c.jsx("button",{onClick:()=>I(C),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(ra.Edit,{})}),c.jsx("button",{onClick:()=>L(C.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(ra.Trash,{})})]})]},C.id))})]},W.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:j,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:Z?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:le.siparisNo,onChange:W=>oe({...le,siparisNo:W.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri Se"}),c.jsxs("select",{required:!0,value:le.customerId,onChange:W=>oe({...le,customerId:W.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-indigo-500 focus:border-indigo-500",children:[c.jsx("option",{value:"",children:"Seiniz..."}),m.map(W=>c.jsxs("option",{value:W.id,children:[W.name," (",W.company,")"]},W.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:le.date,onChange:W=>oe({...le,date:W.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${A?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:ye,onDragLeave:D,onDrop:w,children:[c.jsx("input",{ref:ee,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:W=>pe(W.target.files[0])}),le.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:le.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(ra.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:A?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all",value:le.note,onChange:W=>oe({...le,note:W.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:de.en,onChange:W=>ue("en",W.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:de.boy,onChange:W=>ue("boy",W.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})," "]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:le.items.map((W,ge)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:W.en1,onChange:C=>he(ge,"en1",C.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:W.boy1,onChange:C=>he(ge,"boy1",C.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:W.genislik,onChange:C=>he(ge,"genislik",C.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:W.takim,onChange:C=>he(ge,"takim",C.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"32px"},value:W.aciklama,onChange:C=>he(ge,"aciklama",C.target.value),onInput:C=>{C.target.style.height="auto",C.target.style.height=C.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${ge}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:W.sekil,onChange:C=>he(ge,"sekil",C.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${ge}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:W.en2,onChange:C=>he(ge,"en2",C.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:W.boy2,onChange:C=>he(ge,"boy2",C.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>F(ge),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},ge))})]}),c.jsx("button",{type:"button",onClick:Te,className:"w-full py-2 bg-gray-50/50 text-gray-500 text-xs font-bold uppercase tracking-wide hover:bg-indigo-50 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:Z?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})})]})}const aa={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Calendar:()=>c.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),ArrowUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),ArrowDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})},Tj=({checked:i,onChange:e,label:s,leftLabel:r,rightLabel:o})=>c.jsxs("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!i),children:[r&&c.jsx("span",{className:`mr-3 text-sm font-medium transition-colors ${i?"text-gray-500":"text-indigo-600 font-bold"}`,children:r}),c.jsx("div",{className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${i?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-5":"translate-x-0"}`})}),o&&c.jsx("span",{className:`ml-3 text-sm font-medium transition-colors ${i?"text-indigo-600 font-bold":"text-gray-500"}`,children:o}),s&&c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 group-hover:text-indigo-600 transition-colors",children:s})]});function Sj(){const[i,e]=ce.useState(null),[s,r]=ce.useState([]),[o,d]=ce.useState([]),[m,y]=ce.useState(""),[v,p]=ce.useState("raw"),[_,T]=ce.useState(!1),[A,B]=ce.useState(!1),[ee,Z]=ce.useState(""),[te,de]=ce.useState(null),[ae,le]=ce.useState({category:"",productType:"raw",productName:"",action:"add",quantity:"",unit:"adet",company:"",date:new Date().toISOString().split("T")[0]}),oe=ce.useMemo(()=>[...new Set(s.map(j=>j.category))],[s]),pe=ce.useMemo(()=>[...new Set(s.map(j=>j.productName))],[s]);ce.useEffect(()=>{const j=Jn.onAuthStateChanged(e),he=es(gt(Le,"inventory_movements"),ts("date","desc")),Te=gn(he,_e=>{r(_e.docs.map(W=>({id:W.id,...W.data()})))}),F=es(gt(Le,"companies"),ts("name","asc")),ue=gn(F,_e=>{d(_e.docs.map(W=>({id:W.id,...W.data()})))});return()=>{j(),Te(),ue()}},[]);const ye=j=>{const he={};return j.forEach(Te=>{he[Te.unit]||(he[Te.unit]=0);const F=Number(Te.quantity)||0;Te.action==="add"?he[Te.unit]+=F:he[Te.unit]-=F}),Object.entries(he).map(([Te,F])=>`${F.toLocaleString("tr-TR")} ${Te}`).join(", ")},w=(()=>{const j=s.filter(Te=>{const F=m?Te.date.startsWith(m):!0,ue=Te.productType===v;return F&&ue}),he={};return j.forEach(Te=>{he[Te.category]||(he[Te.category]=[]),he[Te.category].push(Te)}),he})(),N=async j=>{j.preventDefault();try{const he={...ae,quantity:Number(ae.quantity),createdAt:new Date().toISOString()};ae.company&&!o.find(Te=>Te.name===ae.company)&&await Ni(gt(Le,"companies"),{name:ae.company}),te?await Nr(tn(Le,"inventory_movements",te),he):await Ni(gt(Le,"inventory_movements"),he),L()}catch(he){alert("Hata: "+he.message)}},R=async j=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await ba(tn(Le,"inventory_movements",j))},I=j=>{de(j.id),le({category:j.category,productType:j.productType,productName:j.productName,action:j.action,quantity:j.quantity,unit:j.unit,company:j.company,date:j.date}),T(!0)},L=()=>{T(!1),de(null),le({category:"",productType:"raw",productName:"",action:"add",quantity:"",unit:"adet",company:"",date:new Date().toISOString().split("T")[0]})};return i?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"rn & Stok Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn giri/k hareketleri ve envanter takibi"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 rounded-lg border border-gray-200",children:[c.jsx(aa.Calendar,{}),c.jsx("input",{type:"month",className:"ml-2 bg-transparent border-none focus:ring-0 text-sm text-gray-700 p-0",value:m,onChange:j=>y(j.target.value)})]}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(Tj,{checked:v==="manufactured",onChange:j=>p(j?"manufactured":"raw"),leftLabel:"Ham",rightLabel:"retilmi"})}),c.jsxs("button",{onClick:()=>T(!0),className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(aa.Plus,{})}),"rn Hareketi Ekle"]})]})]}),c.jsxs("div",{className:"space-y-8",children:[Object.keys(w).length===0&&c.jsx("div",{className:"text-center py-12 text-gray-500",children:"Kaytl rn hareketi bulunamad."}),Object.entries(w).map(([j,he])=>{const Te=ye(he);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(aa.Box,{})}),c.jsx("h3",{className:"ml-3 text-xl font-bold text-gray-800",children:j})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"text-sm font-bold text-emerald-600 bg-emerald-50 px-3 py-1 rounded-lg border border-emerald-100",children:["Toplam: ",Te]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full",children:[he.length," Hareket"]})]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:he.map(F=>{const ue=F.action==="add";return c.jsxs("div",{className:"px-6 py-4 hover:bg-gray-50/50 transition-colors flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center ${ue?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:ue?c.jsx(aa.ArrowUp,{}):c.jsx(aa.ArrowDown,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-900",children:F.productName}),c.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded border border-gray-200 text-gray-500 bg-gray-50",children:F.productType==="raw"?"Ham":"retilmi"})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[F.company,"  ",F.date]})]})]}),c.jsxs("div",{className:"flex items-center justify-between w-full md:w-auto gap-8",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("span",{className:`text-lg font-bold ${ue?"text-emerald-600":"text-red-600"}`,children:[ue?"+":"-",F.quantity," ",F.unit]}),c.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider font-semibold",children:ue?"Stok Girii":"Stok k"})]}),c.jsxs("div",{className:"flex items-center space-x-1 bg-white border border-gray-100 rounded-lg p-1 shadow-sm",children:[c.jsx("button",{onClick:()=>I(F),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-all",children:c.jsx(aa.Edit,{})}),c.jsx("button",{onClick:()=>R(F.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-all",children:c.jsx(aa.Trash,{})})]})]})]},F.id)})})]},j)})]}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-2xl flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden max-h-[90vh]",children:c.jsxs("form",{onSubmit:N,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:te?"Hareketi Dzenle":"rn Kaydet"}),c.jsx("button",{type:"button",onClick:L,className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-8 overflow-y-auto custom-scrollbar space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Kategorisi"}),c.jsx("input",{list:"category-options",required:!0,placeholder:"rn: MDF, Tutkal",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all",value:ae.category,onChange:j=>le({...ae,category:j.target.value})}),c.jsx("datalist",{id:"category-options",children:oe.map((j,he)=>c.jsx("option",{value:j},he))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tr"}),c.jsxs("div",{className:"flex bg-white rounded-lg p-1 border border-gray-200 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>le({...ae,productType:"raw"}),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-colors ${ae.productType==="raw"?"bg-indigo-100 text-indigo-700":"text-gray-500 hover:bg-gray-50"}`,children:"HAM"}),c.jsx("button",{type:"button",onClick:()=>le({...ae,productType:"manufactured"}),className:`flex-1 py-1.5 text-xs font-bold rounded-md transition-colors ${ae.productType==="manufactured"?"bg-purple-100 text-purple-700":"text-gray-500 hover:bg-gray-50"}`,children:"RETLM"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Ad"}),c.jsx("input",{list:"product-options",required:!0,placeholder:"rn: 18mm MDF Levha",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all",value:ae.productName,onChange:j=>le({...ae,productName:j.target.value})}),c.jsx("datalist",{id:"product-options",children:pe.map((j,he)=>c.jsx("option",{value:j},he))})]}),c.jsxs("div",{className:"bg-gray-50/50 p-4 rounded-xl border border-gray-200/50 grid grid-cols-1 sm:grid-cols-12 gap-4 items-end",children:[c.jsxs("div",{className:"sm:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"lem"}),c.jsxs("div",{className:"flex bg-white rounded-lg p-1 border border-gray-200 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>le({...ae,action:"add"}),className:`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${ae.action==="add"?"bg-emerald-100 text-emerald-700":"text-gray-500 hover:bg-gray-50"}`,children:"EKLE"}),c.jsx("button",{type:"button",onClick:()=>le({...ae,action:"remove"}),className:`flex-1 py-1.5 text-xs font-bold rounded transition-colors ${ae.action==="remove"?"bg-red-100 text-red-700":"text-gray-500 hover:bg-gray-50"}`,children:"IKART"})]})]}),c.jsxs("div",{className:"sm:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Miktar"}),c.jsx("input",{type:"number",required:!0,min:"0",className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm font-bold text-gray-800",value:ae.quantity,onChange:j=>le({...ae,quantity:j.target.value})})]}),c.jsxs("div",{className:"sm:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim"}),c.jsxs("select",{className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2 text-sm",value:ae.unit,onChange:j=>le({...ae,unit:j.target.value}),children:[c.jsx("option",{value:"adet",children:"Adet"}),c.jsx("option",{value:"kg",children:"Kg"}),c.jsx("option",{value:"m2",children:"m"}),c.jsx("option",{value:"m3",children:"m"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Firma"}),c.jsx("input",{list:"company-options",placeholder:"Firma Seiniz veya Yaznz...",className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all",value:ae.company,onChange:j=>le({...ae,company:j.target.value})}),c.jsx("datalist",{id:"company-options",children:o.map((j,he)=>c.jsx("option",{value:j.name},he))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"lem Tarihi"}),c.jsx("input",{type:"date",required:!0,className:"w-full bg-white/50 border border-gray-200 rounded-xl px-4 py-2.5 text-sm",value:ae.date,onChange:j=>le({...ae,date:j.target.value})})]})]}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:te?"Deiiklikleri Kaydet":"Kaydet"}),c.jsx("button",{type:"button",onClick:L,className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const dd={Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})})},Nj=({data:i,categories:e})=>{if(!i||i.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"Veri Yok"});const s=300,r=800,o=40,d=r-o*2,m=s-o*2,y=i.flatMap(_=>e.map(T=>_[T]||0)),v=Math.max(...y,100),p=["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${r} ${s}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const T=s-o-_*(m/4);return c.jsxs("g",{children:[c.jsx("line",{x1:o,y1:T,x2:r-o,y2:T,stroke:"#e5e7eb",strokeWidth:"1"}),c.jsx("text",{x:o-10,y:T+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(v/4*_)})]},_)}),e.map((_,T)=>{const A=p[T%p.length],B=i.map((ee,Z)=>{const te=o+Z*(d/(i.length-1||1)),de=ee[_]||0,ae=s-o-de/v*m;return`${te},${ae}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:A,strokeWidth:"3",points:B,strokeLinecap:"round",strokeLinejoin:"round"}),i.map((ee,Z)=>{const te=o+Z*(d/(i.length-1||1)),de=ee[_]||0,ae=s-o-de/v*m;return c.jsx("circle",{cx:te,cy:ae,r:"4",fill:"white",stroke:A,strokeWidth:"2",children:c.jsx("title",{children:`${ee.month}: ${de}`})},Z)})]},_)}),i.map((_,T)=>{const A=o+T*(d/(i.length-1||1));return c.jsx("text",{x:A,y:s-10,textAnchor:"middle",fontSize:"10",fill:"#6B7280",children:_.month},T)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,T)=>c.jsxs("div",{className:"flex items-center text-xs font-medium text-gray-600",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:p[T%p.length]}}),_]},_))})]})},Aj=({title:i,totals:e})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl p-5 rounded-2xl border border-white/50 shadow-lg hover:shadow-xl transition-all duration-300 min-w-[200px] flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("div",{className:"bg-indigo-50 p-2 rounded-lg text-indigo-600",children:c.jsx(dd.Box,{})}),c.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Kategori"})]}),c.jsx("h3",{className:"text-lg font-bold text-gray-800 truncate",children:i}),c.jsx("div",{className:"mt-2 space-y-1",children:Object.entries(e).map(([s,r])=>c.jsxs("div",{className:"text-sm font-medium text-emerald-600",children:[r.toLocaleString()," ",c.jsx("span",{className:"text-xs text-gray-500 font-normal",children:s})]},s))})]});function jj(){const[i,e]=ce.useState([]),[s,r]=ce.useState(!0),[o,d]=ce.useState(null);ce.useEffect(()=>{const v=es(gt(Le,"inventory_movements"),ts("date","asc")),p=gn(v,_=>{const T=_.docs.map(A=>A.data());e(T),r(!1)});return()=>p()},[]);const m=ce.useMemo(()=>{const v={},p={};return i.forEach(_=>{const T=Number(_.quantity)||0,A=_.action==="add"?T:-T;v[_.category]||(v[_.category]={}),v[_.category][_.productName]||(v[_.category][_.productName]={qty:0,unit:_.unit}),v[_.category][_.productName].qty+=A,p[_.category]||(p[_.category]={}),p[_.category][_.unit]||(p[_.category][_.unit]=0),p[_.category][_.unit]+=A}),{detailed:v,totals:p}},[i]),y=ce.useMemo(()=>{const v={},p={};return Object.keys(m.totals).forEach(T=>p[T]=0),i.forEach(T=>{const A=T.date.slice(0,7),B=Number(T.quantity)||0,ee=T.action==="add"?B:-B;p[T.category]||(p[T.category]=0),p[T.category]+=ee,v[A]={...p,month:A}}),Object.values(v).sort((T,A)=>T.month.localeCompare(A.month))},[i,m]);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Gncel envanter ve gemi stok hareket analizleri"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[Object.entries(m.totals).map(([v,p])=>c.jsx(Aj,{title:v,totals:p},v)),Object.keys(m.totals).length===0&&c.jsx("div",{className:"col-span-full bg-white p-6 rounded-xl text-center text-gray-400 border border-dashed border-gray-300",children:"Henz stok verisi bulunmamaktadr. rnler sayfasndan ekleme yapnz."})]}),y.length>0&&c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl shadow-lg border border-white/50 p-6 mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"bg-indigo-100 p-2 rounded-lg text-indigo-600",children:c.jsx(dd.Chart,{})}),c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Aylk Stok Deiimi"})]}),c.jsxs("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:[c.jsx("option",{children:"Son 12 Ay"}),c.jsx("option",{children:"Bu Yl"})]})]}),c.jsx(Nj,{data:y,categories:Object.keys(m.totals)})]}),c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50",children:c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Detayl Stok Listesi"})}),c.jsx("div",{className:"divide-y divide-gray-100",children:Object.entries(m.detailed).map(([v,p])=>{const _=o===v;return c.jsxs("div",{className:"transition-all",children:[c.jsxs("div",{onClick:()=>d(_?null:v),className:"px-6 py-4 flex items-center justify-between cursor-pointer hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${_?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-500"}`,children:_?c.jsx(dd.ChevronUp,{}):c.jsx(dd.ChevronDown,{})}),c.jsx("span",{className:"font-bold text-gray-700",children:v}),c.jsxs("span",{className:"text-xs bg-gray-100 text-gray-500 px-2 py-0.5 rounded-full",children:[Object.keys(p).length," eit"]})]}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Object.values(m.totals[v]).map((T,A)=>c.jsx("span",{className:"ml-2",children:T},A)),c.jsx("span",{className:"text-gray-400 ml-1 text-xs",children:"Toplam"})]})})]}),_&&c.jsx("div",{className:"bg-gray-50/30 px-6 py-4 border-t border-gray-100 animate-fadeIn",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 rounded-l-lg",children:"rn Ad"}),c.jsx("th",{className:"px-4 py-2 text-right rounded-r-lg",children:"Mevcut Stok"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:Object.entries(p).map(([T,A])=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-gray-700",children:T}),c.jsxs("td",{className:"px-4 py-3 text-right",children:[c.jsx("span",{className:`font-bold ${A.qty<0?"text-red-600":A.qty===0?"text-gray-400":"text-emerald-600"}`,children:A.qty}),c.jsx("span",{className:"text-xs text-gray-500 ml-1",children:A.unit})]})]},T))})]})})]},v)})})]})]})}const la={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),Document:()=>c.jsx("svg",{className:"w-10 h-10 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Calendar:()=>c.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})};function Cj(){const[i,e]=ce.useState(null),[s,r]=ce.useState(!0),[o,d]=ce.useState([]),[m,y]=ce.useState(""),[v,p]=ce.useState(!1),[_,T]=ce.useState(null),[A,B]=ce.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",items:[]});if(ce.useEffect(()=>{const w=Jn.onAuthStateChanged(I=>{e(I),r(!1)}),N=es(gt(Le,"teklifler"),ts("createdAt","desc")),R=gn(N,I=>{d(I.docs.map(L=>({id:L.id,...L.data()})))});return()=>{w(),R()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(la.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]});const ee=()=>{T(null);const w="TK-"+Date.now().toString().slice(-6),N=new Date;N.setDate(N.getDate()+7),B({teklifNo:w,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:N.toISOString().split("T")[0],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),p(!0)},Z=w=>{T(w),B({teklifNo:w.teklifNo,teklifName:w.teklifName||"",customerName:w.customerName,date:w.date,validityDate:w.validityDate||"",items:w.items||[]}),p(!0)},te=async w=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await ba(tn(Le,"teklifler",w))}catch(N){alert(N.message)}},de=async w=>{if(w.preventDefault(),!A.customerName){alert("Ltfen mteri ad giriniz.");return}try{const N={...A,createdAt:_?_.createdAt:new Date().toISOString()};_?await Nr(tn(Le,"teklifler",_.id),N):await Ni(gt(Le,"teklifler"),N),p(!1)}catch(N){alert(N.message)}},ae=(w,N,R)=>{const I=w*N,L=I*(R/100);return I+L},le=(w,N,R)=>{const I=[...A.items],L=I[w];L[N]=R;const j=parseFloat(N==="quantity"?R:L.quantity),he=parseFloat(N==="price"?R:L.price),Te=parseFloat(N==="vat"?R:L.vat);!isNaN(j)&&!isNaN(he)&&!isNaN(Te)&&(L.total=ae(j,he,Te)),B({...A,items:I})},oe=()=>{B({...A,items:[...A.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},pe=w=>{const N=A.items.filter((R,I)=>I!==w);B({...A,items:N})},ye=()=>{const w=A.items.reduce((R,I)=>R+I.quantity*I.price,0),N=A.items.reduce((R,I)=>R+I.quantity*I.price*(I.vat/100),0);return{subtotal:w,totalVAT:N,grandTotal:w+N}},D=w=>{const N=window.open("","","height=800,width=1000");if(!N){alert("Pop-up engelleyiciyi kapatn.");return}const R=w.items.reduce((he,Te)=>he+Te.quantity*Te.price,0),I=w.items.reduce((he,Te)=>he+Te.quantity*Te.price*(Te.vat/100),0),L=R+I,j=`
      <html><head><title>Teklif - ${w.teklifNo}</title>
      <style>
        body{font-family:'Helvetica',sans-serif;padding:40px;color:#333;line-height:1.6}
        .header-container { display: flex; justify-content: space-between; margin-bottom: 50px; padding-bottom: 20px; border-bottom: 2px solid #eee; }
        .company-info { width: 50%; }
        .company-name { font-size: 26px; font-weight: bold; color: #4F46E5; margin-bottom: 10px; text-transform: uppercase; }
        .company-details { font-size: 12px; color: #555; line-height: 1.6; }
        .meta-info { width: 40%; text-align: right; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #ddd; letter-spacing: 2px; margin-bottom: 20px; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 13px; }
        .meta-table td { padding: 5px 0; border-bottom: 1px solid #f0f0f0; }
        .meta-label { font-weight: bold; color: #666; }
        .meta-value { font-weight: bold; color: #333; }
        
        .customer-box { background: #f9fafb; padding: 20px; border-radius: 8px; margin-bottom: 40px; border: 1px solid #eee; }
        .customer-label { font-size: 10px; font-weight: bold; text-transform: uppercase; color: #888; letter-spacing: 1px; margin-bottom: 5px; }
        .customer-name { font-size: 18px; font-weight: bold; color: #333; }

        table.items {width:100%;border-collapse:collapse;font-size:12px;margin-bottom:30px}
        table.items th{background:#4F46E5;color:white;padding:12px 8px;text-align:left;font-weight:bold;text-transform:uppercase}
        table.items td{border-bottom:1px solid #eee;padding:12px 8px;}
        .text-right { text-align: right; }
        .text-center { text-align: center; }
        
        .totals-container { float: right; width: 300px; margin-top: 20px; }
        .total-row { display: flex; justify-content: space-between; padding: 8px 0; font-size: 13px; }
        .grand-total { font-size: 18px; font-weight: bold; color: #4F46E5; border-top: 2px solid #eee; padding-top: 15px; margin-top: 10px; }
        
        .footer { margin-top: 100px; border-top: 1px solid #eee; padding-top: 20px; font-size: 10px; color: #999; text-align: center; clear: both; }
      </style>
      </head><body>
        
        <div class="header-container">
          <div class="company-info">
            <div class="company-name">irket Adnz A..</div>
            <div class="company-details">
              Adres: rnek Mah. Sanayi Cad. No:123<br>
              stanbul, Trkiye<br>
              Tel: +90 212 123 45 67<br>
              E-posta: info@sirketadiniz.com
            </div>
          </div>
          <div class="meta-info">
            <div class="invoice-title">TEKLF</div>
            <table class="meta-table" align="right">
              <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${w.teklifNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td class="meta-value">${w.date}</td></tr>
              <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${w.validityDate}</td></tr>
            </table>
          </div>
        </div>

        <div class="customer-box">
          <div class="customer-label">Sayn</div>
          <div class="customer-name">${w.customerName}</div>
        </div>

        <table class="items">
          <thead>
            <tr>
              <th width="40%">Aklama</th>
              <th class="text-center">Miktar</th>
              <th class="text-right">Birim Fiyat</th>
              <th class="text-center">KDV %</th>
              <th class="text-right">Tutar</th>
            </tr>
          </thead>
          <tbody>
            ${w.items.map(he=>`
              <tr>
                <td>${he.description}</td>
                <td class="text-center">${he.quantity}</td>
                <td class="text-right">${Number(he.price).toFixed(2)} </td>
                <td class="text-center">%${he.vat}</td>
                <td class="text-right"><strong>${Number(he.total).toFixed(2)} </strong></td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div class="totals-container">
          <div class="total-row"><span>Ara Toplam:</span> <span>${R.toFixed(2)} </span></div>
          <div class="total-row"><span>Toplam KDV:</span> <span>${I.toFixed(2)} </span></div>
          <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${L.toFixed(2)} </span></div>
        </div>

        <div class="footer">
          Bu belge elektronik ortamda retilmitir. Geerlilik tarihine kadar onaylanmas durumunda balaycl vardr.
        </div>

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;N.document.write(j),N.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center px-3 py-2 bg-gray-50 rounded-lg border border-gray-200",children:[c.jsx(la.Calendar,{}),c.jsx("input",{type:"month",className:"ml-2 bg-transparent border-none focus:ring-0 text-sm text-gray-700 p-0",value:m,onChange:w=>y(w.target.value)})]}),c.jsxs("button",{onClick:ee,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(la.Plus,{})}),"Teklif Olutur"]})]})]}),c.jsxs("div",{className:"space-y-4",children:[o.length===0&&c.jsx("div",{className:"text-center text-gray-500 py-10",children:"Henz kaytl teklif yok."}),o.filter(w=>m?w.date.startsWith(m):!0).map(w=>{const N=w.items?.reduce((R,I)=>R+(I.total||0),0)||0;return c.jsxs("div",{className:"bg-white shadow-md hover:shadow-lg rounded-xl border border-gray-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 transition-all",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600",children:c.jsx(la.Document,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:w.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:["#",w.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w.customerName}),c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Tarih: ",w.date,"  Geerlilik: ",w.validityDate]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("span",{className:"block text-xl font-bold text-emerald-600",children:[N.toLocaleString("tr-TR",{minimumFractionDigits:2})," "]}),c.jsx("span",{className:"text-xs text-gray-400 uppercase",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>D(w),className:"p-2 text-gray-400 hover:text-indigo-600 bg-gray-50 rounded-lg hover:bg-white shadow-sm border border-transparent hover:border-gray-200 transition-all",children:c.jsx(la.Printer,{})}),c.jsx("button",{onClick:()=>Z(w),className:"p-2 text-gray-400 hover:text-blue-600 bg-gray-50 rounded-lg hover:bg-white shadow-sm border border-transparent hover:border-gray-200 transition-all",children:c.jsx(la.Edit,{})}),c.jsx("button",{onClick:()=>te(w.id),className:"p-2 text-gray-400 hover:text-red-600 bg-gray-50 rounded-lg hover:bg-white shadow-sm border border-transparent hover:border-gray-200 transition-all",children:c.jsx(la.Trash,{})})]})]})]},w.id)})]}),v&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-5xl h-[90vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:de,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:_?"Teklifi Dzenle":"Yeni Teklif Olutur"}),c.jsx("button",{type:"button",onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 mb-8 bg-white/50 p-6 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Teklif No"}),c.jsx("input",{disabled:!0,value:A.teklifNo,className:"w-full bg-gray-100/50 border border-gray-200 rounded-lg px-3 py-2.5 text-sm"})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Teklif Ad (Tanmlayc)"}),c.jsx("input",{required:!0,placeholder:"rn: Mutfak Dolab Projesi",className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",value:A.teklifName,onChange:w=>B({...A,teklifName:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Mteri Ad / Firma"}),c.jsx("input",{required:!0,placeholder:"Mteri ad giriniz...",className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",value:A.customerName,onChange:w=>B({...A,customerName:w.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:A.date,onChange:w=>B({...A,date:w.target.value}),className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm"})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Geerlilik Tarihi"}),c.jsx("input",{type:"date",required:!0,value:A.validityDate,onChange:w=>B({...A,validityDate:w.target.value}),className:"w-full bg-white border border-gray-200 rounded-lg px-3 py-2.5 text-sm"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden mb-8 shadow-sm bg-white/40",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider w-32",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider w-24",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider w-32",children:"Tutar"}),c.jsx("th",{className:"w-10"})]})}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:A.items.map((w,N)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"text",placeholder:"Hizmet/rn aklamas",className:"w-full border-none bg-transparent focus:ring-0 text-sm p-1",value:w.description,onChange:R=>le(N,"description",R.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",min:"1",className:"w-full text-center border border-gray-200 bg-gray-50 rounded px-2 py-1 text-sm focus:bg-white",value:w.quantity,onChange:R=>le(N,"quantity",R.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx("input",{type:"number",min:"0",step:"0.01",className:"w-full text-right border border-gray-200 bg-gray-50 rounded px-2 py-1 text-sm focus:bg-white",value:w.price,onChange:R=>le(N,"price",R.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsxs("select",{className:"w-full text-center border-none bg-transparent focus:ring-0 text-sm cursor-pointer",value:w.vat,onChange:R=>le(N,"vat",R.target.value),children:[c.jsx("option",{value:"0",children:"0%"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"10%"}),c.jsx("option",{value:"20",children:"20%"})]})}),c.jsxs("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:[Number(w.total).toFixed(2)," "]}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>pe(N),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-xl",children:""})})})]},N))})]}),c.jsx("button",{type:"button",onClick:oe,className:"w-full py-3 bg-gray-50/50 text-gray-500 text-xs font-bold uppercase tracking-wide hover:bg-indigo-50 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/50 p-6 rounded-xl border border-gray-100",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsxs("span",{className:"font-medium",children:[ye().subtotal.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsxs("span",{className:"font-medium",children:[ye().totalVAT.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex justify-between text-lg font-bold text-gray-900 border-t border-gray-200 pt-3",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsxs("span",{className:"text-indigo-600",children:[ye().grandTotal.toFixed(2)," "]})]})]})})]}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:_?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})})]})}const $n={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},Rj="86715dfc9d1046e7e8a0d95a",Ij=`https://v6.exchangerate-api.com/v6/${Rj}/latest/USD`,gm=({ops:i,onChange:e,allowRefs:s=!1,rows:r=[],constants:o=[],constantsMap:d})=>{const m=(p,_,T)=>{const A=[...i];A[p]={...A[p],[_]:T},_==="type"&&T!=="op"&&(A[p].value=""),e(A)},y=()=>{e([...i,{type:"op",value:"+"},{type:"num",value:0}])},v=p=>{if(p===0)return;const _=[...i];_.splice(p,2),e(_)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-3 py-2",children:[i.map((p,_)=>_%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-gray-100 border-0 rounded-lg text-center font-bold text-gray-600 w-12 py-2 focus:ring-2 focus:ring-indigo-500 cursor-pointer hover:bg-gray-200 transition-colors appearance-none",value:p.value,onChange:T=>m(_,"value",T.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>v(_),className:"absolute -top-4 -right-3 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center shadow-md z-20 hover:bg-red-600 transition-colors",title:"lemi Sil",children:""})]},_):c.jsxs("div",{className:"flex bg-white border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-indigo-500 shadow-sm items-center",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-300 text-[10px] uppercase font-bold text-gray-500 px-2 py-2 cursor-pointer focus:outline-none hover:bg-gray-100 h-full",value:p.type,onChange:T=>m(_,"type",T.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),s&&c.jsx("option",{value:"ref",children:"Ref"})]}),p.type==="num"&&c.jsx("input",{type:"number",className:"w-24 border-none text-sm px-3 py-2 focus:ring-0 text-gray-900",placeholder:"0",value:p.value,onChange:T=>m(_,"value",T.target.value)}),p.type==="const"&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-white cursor-pointer text-gray-900",value:p.value,onChange:T=>m(_,"value",T.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),o.map(T=>c.jsx("option",{value:T.id,children:T.name},T.id))]}),p.type==="ref"&&s&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-indigo-50 text-indigo-700 font-medium cursor-pointer",value:p.value,onChange:T=>m(_,"value",T.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),r.map(T=>c.jsx("option",{value:T.id,children:T.name||"simsiz Satr"},T.id))]})]},_)),c.jsx("button",{type:"button",onClick:y,className:"w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center hover:bg-indigo-100 hover:shadow-md transition-all z-10",children:c.jsx($n.Plus,{})})]})};function kj(){const[i,e]=ce.useState(null),[s,r]=ce.useState(!0),[o,d]=ce.useState([]),[m,y]=ce.useState([]),[v,p]=ce.useState({TRY:1,USD:1,EUR:1}),[_,T]=ce.useState(null),[A,B]=ce.useState(!1),[ee,Z]=ce.useState(!1),[te,de]=ce.useState(null),[ae,le]=ce.useState({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[oe,pe]=ce.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});ce.useEffect(()=>{const M=Jn.onAuthStateChanged(Oe=>{e(Oe),r(!1)}),Y=es(gt(Le,"pricing_constants"),ts("name","asc")),X=gn(Y,Oe=>{d(Oe.docs.map(at=>({id:at.id,...at.data()})))}),me=es(gt(Le,"pricing_items"),ts("updatedAt","desc")),xe=gn(me,Oe=>{y(Oe.docs.map(at=>({id:at.id,...at.data()})))});return ye(),()=>{M(),X(),xe()}},[]);const ye=async()=>{try{const Y=await(await fetch(Ij)).json();if(Y&&Y.conversion_rates){const X=Y.conversion_rates.TRY,me=Y.conversion_rates.EUR,xe=X/me;p({TRY:1,USD:X,EUR:xe}),T(new Date().toLocaleTimeString())}}catch(M){console.error("Rate fetch error",M)}},D=(M,Y)=>{if(!Y||Y==="None"||Y==="TRY")return parseFloat(M)||0;const X=v[Y]||1;return parseFloat(M)*X},w=(M,Y)=>{if(Y==="TRY")return M;const X=v[Y]||1;return M/X},N=(M,Y={})=>{if(M.type==="num")return parseFloat(M.value)||0;if(M.type==="const"){const X=o.find(me=>me.id===M.value);return X?D(X.value,X.currency):0}return M.type==="ref"&&Y[M.value]||0},R=(M,Y={})=>{if(!M||M.length===0)return 0;let X=N(M[0],Y);for(let me=1;me<M.length;me+=2){const xe=M[me].value,Oe=N(M[me+1],Y);switch(xe){case"+":X+=Oe;break;case"-":X-=Oe;break;case"*":X*=Oe;break;case"/":X=Oe!==0?X/Oe:0;break}}return X},I=M=>{const Y={};(M.rows||[]).forEach(me=>{Y[me.id]=R(me.ops,Y)});const X=R(M.finalFormula?.ops,Y);return w(X,M.finalCurrency||"TRY")},L=M=>R(M,{}),j=ce.useMemo(()=>I(oe),[oe,o,v]),he=ce.useMemo(()=>L(ae.ops),[ae.ops,o,v]),Te=async M=>{M.preventDefault();const Y=L(ae.ops),X={...ae,value:Y};te?await Nr(tn(Le,"pricing_constants",te),X):await Ni(gt(Le,"pricing_constants"),X),le({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),de(null),B(!1)},F=async M=>await ba(tn(Le,"pricing_constants",M)),ue=()=>{const M="row_"+Date.now();pe({...oe,rows:[...oe.rows,{id:M,name:"",ops:[{type:"num",value:0}]}]})},_e=M=>{const Y=[...oe.rows];Y.splice(M,1),pe({...oe,rows:Y})},W=(M,Y)=>{const X=[...oe.rows];X[M].name=Y,pe({...oe,rows:X})},ge=(M,Y)=>{const X=[...oe.rows];X[M].ops=Y,pe({...oe,rows:X})},C=async M=>{M.preventDefault();const Y={...oe,updatedAt:new Date().toISOString()};te?await Nr(tn(Le,"pricing_items",te),Y):await Ni(gt(Le,"pricing_items"),Y),pe({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"}),de(null),Z(!1)},$=M=>{const Y={...M,rows:M.rows||[],finalFormula:M.finalFormula||{ops:[{type:"num",value:0}]},finalCurrency:M.finalCurrency||"TRY"};pe(Y),de(M.id),Z(!0)},P=async M=>{window.confirm("Silmek istediinize emin misiniz?")&&await ba(tn(Le,"pricing_items",M))};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):i?.email==="furkan@avci.jp"?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8 gap-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white px-4 py-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-green-600",children:[v.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[v.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:ye,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx($n.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>{de(null),le({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),B(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl shadow-sm hover:bg-gray-50 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx($n.Variable,{})}),"Sabitler"]}),c.jsxs("button",{onClick:()=>{de(null),pe({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),Z(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx($n.Calculator,{})}),"Fiyatlandrma"]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-1 space-y-6",children:c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6 h-[calc(100vh-200px)] flex flex-col",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center shrink-0",children:[c.jsx("span",{className:"bg-purple-100 p-1.5 rounded-lg mr-2",children:c.jsx($n.Variable,{})}),"Sabit Deerler"]}),c.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-grow",children:[o.map(M=>{const Y=D(M.value,M.currency);return c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm border border-transparent hover:border-gray-100 transition-all group",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-700",children:M.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[M.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",M.currency!=="None"?M.currency:"",M.unit?c.jsxs("span",{className:"text-gray-300 mx-1",children:["/ ",M.unit]}):""]}),M.currency!=="TRY"&&M.currency!=="None"&&c.jsxs("p",{className:"text-[10px] text-emerald-600 font-medium mt-0.5",children:["~ ",Y.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{le({...M,ops:M.ops||[{type:"num",value:M.value}]}),de(M.id),B(!0)},className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx($n.Edit,{})}),c.jsx("button",{onClick:()=>F(M.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx($n.Trash,{})})]})]},M.id)}),o.length===0&&c.jsx("div",{className:"text-center text-xs text-gray-400 italic py-4",children:"Sabit deer eklenmedi."})]})]})}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gncel Fiyatlar"}),c.jsxs("span",{className:"text-xs text-gray-400",children:["Son Gncelleme: ",_||"..."]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[calc(100vh-200px)] overflow-y-auto custom-scrollbar pr-2 pb-4",children:m.map(M=>{const Y=I(M),X=M.finalCurrency||"TRY",me=Math.random()>.5?"up":"down",xe=(Math.random()*5).toFixed(1);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 relative group hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-50 px-3 py-1 rounded-bl-2xl text-xs text-gray-400 border-b border-l border-gray-100",children:new Date(M.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:M.title}),c.jsx("p",{className:"text-xs text-gray-500 mb-4 uppercase tracking-wider",children:M.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-4",children:[c.jsx("div",{children:c.jsxs("span",{className:"text-3xl font-bold text-indigo-600",children:[Y.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",X]})}),c.jsx("div",{className:"flex flex-col items-end",children:c.jsxs("div",{className:`flex items-center text-xs font-bold ${me==="up"?"text-emerald-500":"text-red-500"}`,children:[me==="up"?c.jsx($n.TrendingUp,{}):c.jsx($n.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",xe]})]})})]}),c.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100",children:[c.jsx("button",{onClick:()=>$(M),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>P(M.id),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors",children:"Sil"})]})]},M.id)})})]})]}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full p-6 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Sabit Deer Ekle"}),c.jsxs("form",{onSubmit:Te,className:"space-y-6 overflow-y-auto custom-scrollbar px-1 pb-2",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad"}),c.jsx("input",{required:!0,placeholder:"rn: ilik Saat",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:ae.name,onChange:M=>le({...ae,name:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Birim"}),c.jsx("input",{placeholder:"kg, m2...",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:ae.unit,onChange:M=>le({...ae,unit:M.target.value})})]})]}),c.jsxs("div",{className:"bg-purple-50/50 p-5 rounded-xl border border-purple-100",children:[c.jsx("label",{className:"block text-xs font-bold text-purple-800 mb-3 uppercase",children:"Hesaplama Forml"}),c.jsx(gm,{ops:ae.ops,onChange:M=>le({...ae,ops:M}),allowRefs:!1,constants:o})]}),c.jsxs("div",{className:"flex items-center justify-between bg-gray-900 text-white p-5 rounded-xl shadow-lg",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400 text-xs block",children:"Hesaplanan Deer"}),c.jsx("span",{className:"text-2xl font-bold",children:he.toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Para Birimi"}),c.jsxs("select",{className:"w-full bg-gray-800 border-none rounded-lg text-sm text-white font-bold focus:ring-1 focus:ring-purple-500 cursor-pointer",value:ae.currency,onChange:M=>le({...ae,currency:M.target.value}),children:[c.jsx("option",{value:"None",children:"Say"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>B(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl text-sm font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl text-sm font-medium hover:bg-purple-700 shadow-lg shadow-purple-200 transition-all",children:"Kaydet"})]})]})]})}),ee&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Fiyatlandrma Oluturucu"}),c.jsx("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-gray-600 text-3xl font-light leading-none",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar bg-slate-50",children:c.jsxs("form",{id:"pricingForm",onSubmit:C,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx("input",{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm focus:ring-indigo-500 focus:border-indigo-500",value:oe.title,onChange:M=>pe({...oe,title:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx("input",{placeholder:"adet, m3, kg...",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm",value:oe.unitType,onChange:M=>pe({...oe,unitType:M.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:ue,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),oe.rows.map((M,Y)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsxs("div",{className:"w-full xl:w-64 shrink-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Adm Ad"}),c.jsx("input",{placeholder:"rn: Ham Madde",className:"w-full text-sm font-medium bg-gray-50 border-transparent rounded-lg focus:bg-white focus:border-indigo-300 focus:ring-0 transition-all px-3 py-2",value:M.name,onChange:X=>W(Y,X.target.value)})]}),c.jsxs("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Forml"}),c.jsx(gm,{ops:M.ops,onChange:X=>ge(Y,X),allowRefs:!0,rows:oe.rows.slice(0,Y),constants:o})]}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:R(M.ops,I({...oe,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>_e(Y),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx($n.Trash,{})})]})]},M.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx($n.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:oe.finalCurrency,onChange:M=>pe({...oe,finalCurrency:M.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(gm,{ops:oe.finalFormula.ops,onChange:M=>pe({...oe,finalFormula:{...oe.finalFormula,ops:M}}),allowRefs:!0,rows:oe.rows,constants:o})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right text-white",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[j.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:oe.finalCurrency})]})]})]})]})]})}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200 bg-gray-50 flex flex-row-reverse gap-3",children:[c.jsx("button",{onClick:C,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 hover:shadow-indigo-300 transition-all font-bold text-sm",children:"Kaydet"}),c.jsx("button",{onClick:()=>Z(!1),className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium text-sm",children:"ptal"})]})]})})]}):c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx($n.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]})}const oa={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},hl={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},Gx=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],Dj=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],pm=2.5,gs=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ";function Mj(){const[i,e]=ce.useState(null),[s,r]=ce.useState(!0),[o,d]=ce.useState([]),[m,y]=ce.useState(new Date),[v,p]=ce.useState(!1),[_,T]=ce.useState(!1),[A,B]=ce.useState(null),[ee,Z]=ce.useState(new Date),[te,de]=ce.useState(!1),[ae,le]=ce.useState(new Date().getFullYear()),[oe,pe]=ce.useState(!1),[ye,D]=ce.useState(null),[w,N]=ce.useState({type:"work",overtimeSlots:0,lateness:0}),[R,I]=ce.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});ce.useEffect(()=>{const k=Jn.onAuthStateChanged(me=>{e(me),r(!1)}),M=es(gt(Le,"employees"),ts("name","asc")),Y=gn(M,me=>{d(me.docs.map(xe=>({id:xe.id,...xe.data()})))}),X=setInterval(()=>y(new Date),6e4);return()=>{k(),Y(),clearInterval(X)}},[]);const L=k=>{const M=m.toISOString().split("T")[0],Y=m.getDay(),X=m.getHours(),me=m.getMinutes(),xe=X*60+me,Oe=k.attendance?.[M];if(Oe){if(["paid_leave","unpaid_leave"].includes(Oe.type))return hl.LEAVE;if(Oe.overtimeSlots>0)return hl.OVERTIME}const[at,tt]=k.startHour.split(":").map(Number),[sn,Pt]=k.endHour.split(":").map(Number),ht=at*60+tt,rn=sn*60+Pt;return k.workDays.includes(Y)?xe>=ht&&xe<rn?hl.ONLINE:xe>=rn&&Oe?.overtimeSlots>0?hl.OVERTIME:hl.OFFLINE:hl.OFFLINE},j=k=>{if(!k.attendance)return{used:0,remaining:k.vacationTotal};let M=0;return Object.values(k.attendance).forEach(Y=>{Y.type==="paid_leave"&&M++}),{used:M,remaining:k.vacationTotal-M}},he=(k,M)=>{const Y=M.getFullYear(),X=M.getMonth(),me=new Date(Y,X+1,0).getDate();let xe=0,Oe=0,at=0,tt=0,sn=0;for(let Js=1;Js<=me;Js++){const Ri=`${Y}-${String(X+1).padStart(2,"0")}-${String(Js).padStart(2,"0")}`,bs=new Date(Ri).getDay(),On=k.attendance?.[Ri],Ta=k.workDays.includes(bs);On?(On.type==="work"&&xe++,On.type==="paid_leave"&&sn++,On.type==="unpaid_leave"&&tt++,On.overtimeSlots&&(Oe+=parseInt(On.overtimeSlots)),On.lateness&&(at+=parseFloat(On.lateness))):Ta&&xe++}const Pt=parseFloat(k.salaryAmount)||0,ht=k.customDailyRate&&parseFloat(k.customDailyRate)>0?parseFloat(k.customDailyRate):Pt/30,rn=parseFloat(k.customDeductionRate),xs=!isNaN(rn)&&rn>0?rn:ht,an=ht/9,yt=k.customOvertimeMultiplier?parseFloat(k.customOvertimeMultiplier):1.5,vt=Oe*pm,ns=vt*(an*yt),Pl=tt*xs,Rr=at*an,Ht=Pl+Rr,Zs=Pt+ns-Ht+(parseFloat(k.insurance)||0)+(parseFloat(k.allowance)||0);return{workedDays:xe,totalOvertimeSlots:Oe,totalOvertimeHours:vt,unpaidLeaveDays:tt,paidLeaveDays:sn,overtimePay:ns,totalLatenessHours:at,latenessDeduction:Rr,totalDeduction:Ht,totalSalary:Zs,dailyRate:ht,hourlyRate:an,deductionRate:xs}},Te=(k,M)=>{const Y=new Date(k,M,1);let X=0;return o.forEach(me=>{X+=he(me,Y).totalSalary}),X},F=ce.useMemo(()=>{let k=0,M=0;const Y=new Date(ee);return Y.setMonth(ee.getMonth()-1),o.forEach(X=>{k+=he(X,ee).totalSalary,M+=he(X,Y).totalSalary}),{thisMonthTotal:k,lastMonthTotal:M}},[o,ee]),ue=()=>{T(!1),I({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),p(!0)},_e=()=>{A&&(T(!0),I({name:A.name,role:A.role,salaryType:A.salaryType,salaryAmount:A.salaryAmount,insurance:A.insurance,allowance:A.allowance,vacationTotal:A.vacationTotal,workDays:A.workDays,startHour:A.startHour,endHour:A.endHour,customDailyRate:A.customDailyRate||"",customOvertimeMultiplier:A.customOvertimeMultiplier||"1.5",customDeductionRate:A.customDeductionRate||"",attendance:A.attendance||{}}),B(null),p(!0))},W=async k=>{k.preventDefault();try{const M={...R,updatedAt:new Date().toISOString()};_&&A?await Nr(tn(Le,"employees",A.id),M):await Ni(gt(Le,"employees"),{...M,createdAt:new Date().toISOString()}),p(!1)}catch(M){alert("Hata: "+M.message)}},ge=async k=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await ba(tn(Le,"employees",k)),B(null))},C=(k,M)=>{D(k),N({type:M?.type||"work",overtimeSlots:M?.overtimeSlots||0,lateness:M?.lateness||0}),pe(!0)},$=async k=>{if(k.preventDefault(),!A||!ye)return;const M={...A.attendance};M[ye]={type:w.type,overtimeSlots:parseInt(w.overtimeSlots)||0,lateness:parseFloat(w.lateness)||0},await Nr(tn(Le,"employees",A.id),{attendance:M}),B({...A,attendance:M}),pe(!1)};if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(oa.Lock,{})," Yetkisiz Eriim"]});const P=({employee:k,date:M,onDateClick:Y})=>{const X=M.getFullYear(),me=M.getMonth(),xe=new Date(X,me+1,0).getDate(),Oe=new Date(X,me,1).getDay(),at=[];for(let tt=0;tt<Oe;tt++)at.push(null);for(let tt=1;tt<=xe;tt++)at.push(tt);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:Gx.map((tt,sn)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:tt.slice(0,3)},sn))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:at.map((tt,sn)=>{if(!tt)return c.jsx("div",{},sn);const Pt=`${X}-${String(me+1).padStart(2,"0")}-${String(tt).padStart(2,"0")}`,ht=k.attendance?.[Pt],rn=new Date(Pt).getDay(),xs=k.workDays.includes(rn);let an="bg-gray-50 text-gray-400 border-gray-100";return xs&&(an="bg-white border-emerald-200 text-gray-700 shadow-sm"),ht&&(ht.type==="paid_leave"&&(an="bg-yellow-50 border-yellow-200 text-yellow-700"),ht.type==="unpaid_leave"&&(an="bg-red-50 border-red-200 text-red-700"),ht.type==="work"&&(ht.overtimeSlots>0||ht.lateness>0)&&(an="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),ht.type==="off"&&(an="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>Y(Pt,ht),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${an}`,children:[c.jsx("span",{className:"text-sm",children:tt}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[ht?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",ht.overtimeSlots,"M"]}),ht?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",ht.lateness,"s"]})]})]},sn)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>de(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",ee.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:gs(F.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(oa.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>de(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:gs(F.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:ue,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(oa.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(k=>{const M=L(k),Y=j(k);return c.jsxs("div",{onClick:()=>B(k),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${M.color} ${M.ring} ring-offset-2 ring-2`,children:M.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(oa.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:k.name}),c.jsx("p",{className:"text-sm text-gray-500",children:k.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[k.startHour," - ",k.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[Y.remaining," gn kald"]})]})]})]},k.id)})}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:A.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:A.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:A.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:_e,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(oa.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>ge(A.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(oa.Trash,{})}),c.jsx("button",{onClick:()=>B(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",ee.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const k=he(A,ee);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:gs(k.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:gs(Number(A.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",k.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",gs(k.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",k.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",gs(k.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",k.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",gs(k.totalDeduction-k.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",gs(Number(A.insurance)+Number(A.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",pm," Saat",c.jsx("br",{}),"Saatlik cret = ",gs(k.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",gs(k.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>Z(new Date(ee.setMonth(ee.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:ee.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>Z(new Date(ee.setMonth(ee.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(P,{employee:A,date:ee,onDateClick:C})]})]})]})}),te&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>de(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(oa.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>le(k=>k-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:ae}),c.jsx("button",{onClick:()=>le(k=>k+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Dj.map((k,M)=>{const Y=Te(ae,M),X=new Date().getMonth()===M&&new Date().getFullYear()===ae;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${X?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${X?"text-indigo-200":"text-gray-400"}`,children:k}),c.jsx("div",{className:`text-lg font-bold ${X?"text-white":"text-gray-800"}`,children:Y>0?gs(Y):"-"})]},k)})})]})}),v&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:W,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:R.name,onChange:k=>I({...R,name:k.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:R.role,onChange:k=>I({...R,role:k.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.salaryType,onChange:k=>I({...R,salaryType:k.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.salaryAmount,onChange:k=>I({...R,salaryAmount:k.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.insurance,onChange:k=>I({...R,insurance:k.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.allowance,onChange:k=>I({...R,allowance:k.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.customDailyRate,onChange:k=>I({...R,customDailyRate:k.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.customOvertimeMultiplier,onChange:k=>I({...R,customOvertimeMultiplier:k.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:R.customDeductionRate,onChange:k=>I({...R,customDeductionRate:k.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:R.vacationTotal,onChange:k=>I({...R,vacationTotal:k.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:R.startHour,onChange:k=>I({...R,startHour:k.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:R.endHour,onChange:k=>I({...R,endHour:k.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:Gx.map((k,M)=>c.jsx("button",{type:"button",onClick:()=>{const Y=R.workDays.includes(M)?R.workDays.filter(X=>X!==M):[...R.workDays,M];I({...R,workDays:Y})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${R.workDays.includes(M)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:k.slice(0,3)},k))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),oe&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:ye}),c.jsxs("form",{onSubmit:$,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(k=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:k.id,checked:w.type===k.id,onChange:M=>N({...w,type:M.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:k.label})]},k.id))})]}),w.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",pm,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(k=>c.jsx("button",{type:"button",onClick:()=>N({...w,overtimeSlots:w.overtimeSlots===k?0:k}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${w.overtimeSlots===k?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:k},k))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:w.lateness,onChange:k=>N({...w,lateness:k.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>pe(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function Oj(){const[i,e]=ce.useState(null),[s,r]=ce.useState(!0),[o,d]=ce.useState("dashboard"),[m,y]=ce.useState(!1);ce.useEffect(()=>{const A=FT(Jn,B=>{e(B),r(!1)});return()=>A()},[]);const v=async()=>{try{await GT(Jn)}catch(A){console.error("k yaplrken hata:",A)}},p={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})},_=[{id:"dashboard",label:"Dashboard",icon:p.Home},{id:"musteriler",label:"Mteriler",icon:p.Users},{id:"urunler",label:"rnler",icon:p.Box},{id:"stok",label:"Stok Durumu",icon:p.Chart},{id:"siparis",label:"Sipari Formu",icon:p.Cart},{id:"teklif",label:"Teklif Formu",icon:p.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:p.Calculator},{id:"calisan",label:"alanlar",icon:p.Briefcase}],T=()=>{switch(o){case"dashboard":return c.jsx(qx,{onNavigate:d});case"musteriler":return c.jsx(wj,{});case"urunler":return c.jsx(Sj,{});case"stok":return c.jsx(jj,{});case"siparis":return c.jsx(Ej,{});case"teklif":return c.jsx(Cj,{});case"fiyatlandirma":return c.jsx(kj,{});case"calisan":return c.jsx(Mj,{});default:return c.jsx(qx,{onNavigate:d})}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):i?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[m&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>y(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${m?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>y(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(p.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(A=>c.jsxs("button",{onClick:()=>{d(A.id),y(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${o===A.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${o===A.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(A.icon,{})}),A.label]},A.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:i.email?i.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:i.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(p.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>y(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(p.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:T()})})]})]}):c.jsx(bj,{})}nw.createRoot(document.getElementById("root")).render(c.jsx(ce.StrictMode,{children:c.jsx(Oj,{})}));
