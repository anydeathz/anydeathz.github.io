(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function s(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=s(o);fetch(o.href,d)}})();function uw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var sm={exports:{}},Uo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv;function dw(){if(fv)return Uo;fv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,o,d){var f=null;if(d!==void 0&&(f=""+d),o.key!==void 0&&(f=""+o.key),"key"in o){d={};for(var p in o)p!=="key"&&(d[p]=o[p])}else d=o;return o=d.ref,{$$typeof:i,type:r,key:f,ref:o!==void 0?o:null,props:d}}return Uo.Fragment=e,Uo.jsx=s,Uo.jsxs=s,Uo}var mv;function hw(){return mv||(mv=1,sm.exports=dw()),sm.exports}var c=hw(),im={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv;function fw(){if(gv)return Fe;gv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function q(S){return S===null||typeof S!="object"?null:(S=A&&S[A]||S["@@iterator"],typeof S=="function"?S:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,z={};function ne(S,P,J){this.props=S,this.context=P,this.refs=z,this.updater=J||ee}ne.prototype.isReactComponent={},ne.prototype.setState=function(S,P){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,P,"setState")},ne.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function Z(){}Z.prototype=ne.prototype;function ge(S,P,J){this.props=S,this.context=P,this.refs=z,this.updater=J||ee}var ue=ge.prototype=new Z;ue.constructor=ge,W(ue,ne.prototype),ue.isPureReactComponent=!0;var ye=Array.isArray;function Ee(){}var R={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function j(S,P,J){var L=J.ref;return{$$typeof:i,type:S,key:P,ref:L!==void 0?L:null,props:J}}function k(S,P){return j(S.type,P,S.props)}function C(S){return typeof S=="object"&&S!==null&&S.$$typeof===i}function V(S){var P={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(J){return P[J]})}var I=/\/+/g;function de(S,P){return typeof S=="object"&&S!==null&&S.key!=null?V(""+S.key):P.toString(36)}function Me(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(Ee,Ee):(S.status="pending",S.then(function(P){S.status==="pending"&&(S.status="fulfilled",S.value=P)},function(P){S.status==="pending"&&(S.status="rejected",S.reason=P)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function Y(S,P,J,L,M){var X=typeof S;(X==="undefined"||X==="boolean")&&(S=null);var oe=!1;if(S===null)oe=!0;else switch(X){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(S.$$typeof){case i:case e:oe=!0;break;case _:return oe=S._init,Y(oe(S._payload),P,J,L,M)}}if(oe)return M=M(S),oe=L===""?"."+de(S,0):L,ye(M)?(J="",oe!=null&&(J=oe.replace(I,"$&/")+"/"),Y(M,P,J,"",function(te){return te})):M!=null&&(C(M)&&(M=k(M,J+(M.key==null||S&&S.key===M.key?"":(""+M.key).replace(I,"$&/")+"/")+oe)),P.push(M)),1;oe=0;var Ae=L===""?".":L+":";if(ye(S))for(var Re=0;Re<S.length;Re++)L=S[Re],X=Ae+de(L,Re),oe+=Y(L,P,J,X,M);else if(Re=q(S),typeof Re=="function")for(S=Re.call(S),Re=0;!(L=S.next()).done;)L=L.value,X=Ae+de(L,Re++),oe+=Y(L,P,J,X,M);else if(X==="object"){if(typeof S.then=="function")return Y(Me(S),P,J,L,M);throw P=String(S),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return oe}function he(S,P,J){if(S==null)return S;var L=[],M=0;return Y(S,L,"","",function(X){return P.call(J,X,M++)}),L}function be(S){if(S._status===-1){var P=S._result;P=P(),P.then(function(J){(S._status===0||S._status===-1)&&(S._status=1,S._result=J)},function(J){(S._status===0||S._status===-1)&&(S._status=2,S._result=J)}),S._status===-1&&(S._status=0,S._result=P)}if(S._status===1)return S._result.default;throw S._result}var Be=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},$e={map:he,forEach:function(S,P,J){he(S,function(){P.apply(this,arguments)},J)},count:function(S){var P=0;return he(S,function(){P++}),P},toArray:function(S){return he(S,function(P){return P})||[]},only:function(S){if(!C(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return Fe.Activity=E,Fe.Children=$e,Fe.Component=ne,Fe.Fragment=s,Fe.Profiler=o,Fe.PureComponent=ge,Fe.StrictMode=r,Fe.Suspense=v,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(S){return R.H.useMemoCache(S)}},Fe.cache=function(S){return function(){return S.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(S,P,J){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var L=W({},S.props),M=S.key;if(P!=null)for(X in P.key!==void 0&&(M=""+P.key),P)!T.call(P,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&P.ref===void 0||(L[X]=P[X]);var X=arguments.length-2;if(X===1)L.children=J;else if(1<X){for(var oe=Array(X),Ae=0;Ae<X;Ae++)oe[Ae]=arguments[Ae+2];L.children=oe}return j(S.type,M,L)},Fe.createContext=function(S){return S={$$typeof:f,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:d,_context:S},S},Fe.createElement=function(S,P,J){var L,M={},X=null;if(P!=null)for(L in P.key!==void 0&&(X=""+P.key),P)T.call(P,L)&&L!=="key"&&L!=="__self"&&L!=="__source"&&(M[L]=P[L]);var oe=arguments.length-2;if(oe===1)M.children=J;else if(1<oe){for(var Ae=Array(oe),Re=0;Re<oe;Re++)Ae[Re]=arguments[Re+2];M.children=Ae}if(S&&S.defaultProps)for(L in oe=S.defaultProps,oe)M[L]===void 0&&(M[L]=oe[L]);return j(S,X,M)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(S){return{$$typeof:p,render:S}},Fe.isValidElement=C,Fe.lazy=function(S){return{$$typeof:_,_payload:{_status:-1,_result:S},_init:be}},Fe.memo=function(S,P){return{$$typeof:y,type:S,compare:P===void 0?null:P}},Fe.startTransition=function(S){var P=R.T,J={};R.T=J;try{var L=S(),M=R.S;M!==null&&M(J,L),typeof L=="object"&&L!==null&&typeof L.then=="function"&&L.then(Ee,Be)}catch(X){Be(X)}finally{P!==null&&J.types!==null&&(P.types=J.types),R.T=P}},Fe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Fe.use=function(S){return R.H.use(S)},Fe.useActionState=function(S,P,J){return R.H.useActionState(S,P,J)},Fe.useCallback=function(S,P){return R.H.useCallback(S,P)},Fe.useContext=function(S){return R.H.useContext(S)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(S,P){return R.H.useDeferredValue(S,P)},Fe.useEffect=function(S,P){return R.H.useEffect(S,P)},Fe.useEffectEvent=function(S){return R.H.useEffectEvent(S)},Fe.useId=function(){return R.H.useId()},Fe.useImperativeHandle=function(S,P,J){return R.H.useImperativeHandle(S,P,J)},Fe.useInsertionEffect=function(S,P){return R.H.useInsertionEffect(S,P)},Fe.useLayoutEffect=function(S,P){return R.H.useLayoutEffect(S,P)},Fe.useMemo=function(S,P){return R.H.useMemo(S,P)},Fe.useOptimistic=function(S,P){return R.H.useOptimistic(S,P)},Fe.useReducer=function(S,P,J){return R.H.useReducer(S,P,J)},Fe.useRef=function(S){return R.H.useRef(S)},Fe.useState=function(S){return R.H.useState(S)},Fe.useSyncExternalStore=function(S,P,J){return R.H.useSyncExternalStore(S,P,J)},Fe.useTransition=function(){return R.H.useTransition()},Fe.version="19.2.0",Fe}var pv;function Jm(){return pv||(pv=1,im.exports=fw()),im.exports}var ie=Jm();const ib=uw(ie);var rm={exports:{}},zo={},am={exports:{}},lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function mw(){return yv||(yv=1,(function(i){function e(Y,he){var be=Y.length;Y.push(he);e:for(;0<be;){var Be=be-1>>>1,$e=Y[Be];if(0<o($e,he))Y[Be]=he,Y[be]=$e,be=Be;else break e}}function s(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var he=Y[0],be=Y.pop();if(be!==he){Y[0]=be;e:for(var Be=0,$e=Y.length,S=$e>>>1;Be<S;){var P=2*(Be+1)-1,J=Y[P],L=P+1,M=Y[L];if(0>o(J,be))L<$e&&0>o(M,J)?(Y[Be]=M,Y[L]=be,Be=L):(Y[Be]=J,Y[P]=be,Be=P);else if(L<$e&&0>o(M,be))Y[Be]=M,Y[L]=be,Be=L;else break e}}return he}function o(Y,he){var be=Y.sortIndex-he.sortIndex;return be!==0?be:Y.id-he.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var v=[],y=[],_=1,E=null,A=3,q=!1,ee=!1,W=!1,z=!1,ne=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;function ue(Y){for(var he=s(y);he!==null;){if(he.callback===null)r(y);else if(he.startTime<=Y)r(y),he.sortIndex=he.expirationTime,e(v,he);else break;he=s(y)}}function ye(Y){if(W=!1,ue(Y),!ee)if(s(v)!==null)ee=!0,Ee||(Ee=!0,V());else{var he=s(y);he!==null&&Me(ye,he.startTime-Y)}}var Ee=!1,R=-1,T=5,j=-1;function k(){return z?!0:!(i.unstable_now()-j<T)}function C(){if(z=!1,Ee){var Y=i.unstable_now();j=Y;var he=!0;try{e:{ee=!1,W&&(W=!1,Z(R),R=-1),q=!0;var be=A;try{t:{for(ue(Y),E=s(v);E!==null&&!(E.expirationTime>Y&&k());){var Be=E.callback;if(typeof Be=="function"){E.callback=null,A=E.priorityLevel;var $e=Be(E.expirationTime<=Y);if(Y=i.unstable_now(),typeof $e=="function"){E.callback=$e,ue(Y),he=!0;break t}E===s(v)&&r(v),ue(Y)}else r(v);E=s(v)}if(E!==null)he=!0;else{var S=s(y);S!==null&&Me(ye,S.startTime-Y),he=!1}}break e}finally{E=null,A=be,q=!1}he=void 0}}finally{he?V():Ee=!1}}}var V;if(typeof ge=="function")V=function(){ge(C)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,de=I.port2;I.port1.onmessage=C,V=function(){de.postMessage(null)}}else V=function(){ne(C,0)};function Me(Y,he){R=ne(function(){Y(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(Y){switch(A){case 1:case 2:case 3:var he=3;break;default:he=A}var be=A;A=he;try{return Y()}finally{A=be}},i.unstable_requestPaint=function(){z=!0},i.unstable_runWithPriority=function(Y,he){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var be=A;A=Y;try{return he()}finally{A=be}},i.unstable_scheduleCallback=function(Y,he,be){var Be=i.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Be+be:Be):be=Be,Y){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=be+$e,Y={id:_++,callback:he,priorityLevel:Y,startTime:be,expirationTime:$e,sortIndex:-1},be>Be?(Y.sortIndex=be,e(y,Y),s(v)===null&&Y===s(y)&&(W?(Z(R),R=-1):W=!0,Me(ye,be-Be))):(Y.sortIndex=$e,e(v,Y),ee||q||(ee=!0,Ee||(Ee=!0,V()))),Y},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(Y){var he=A;return function(){var be=A;A=he;try{return Y.apply(this,arguments)}finally{A=be}}}})(lm)),lm}var vv;function gw(){return vv||(vv=1,am.exports=mw()),am.exports}var om={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function pw(){if(xv)return hn;xv=1;var i=Jm();function e(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(v,y,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:v,containerInfo:y,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hn.createPortal=function(v,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return d(v,y,null,_)},hn.flushSync=function(v){var y=f.T,_=r.p;try{if(f.T=null,r.p=2,v)return v()}finally{f.T=y,r.p=_,r.d.f()}},hn.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(v,y))},hn.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},hn.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var _=y.as,E=p(_,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,q=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?r.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:q}):_==="script"&&r.d.X(v,{crossOrigin:E,integrity:A,fetchPriority:q,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},hn.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=p(y.as,y.crossOrigin);r.d.M(v,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(v)},hn.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,E=p(_,y.crossOrigin);r.d.L(v,_,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},hn.preloadModule=function(v,y){if(typeof v=="string")if(y){var _=p(y.as,y.crossOrigin);r.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(v)},hn.requestFormReset=function(v){r.d.r(v)},hn.unstable_batchedUpdates=function(v,y){return v(y)},hn.useFormState=function(v,y,_){return f.H.useFormState(v,y,_)},hn.useFormStatus=function(){return f.H.useHostTransitionStatus()},hn.version="19.2.0",hn}var bv;function yw(){if(bv)return om.exports;bv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),om.exports=pw(),om.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function vw(){if(_v)return zo;_v=1;var i=gw(),e=Jm(),s=yw();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(d(t)!==t)throw Error(r(188))}function y(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,l=n;;){var h=a.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===a)return v(h),t;if(m===l)return v(h),n;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=m;else{for(var x=!1,w=h.child;w;){if(w===a){x=!0,a=h,l=m;break}if(w===l){x=!0,l=h,a=m;break}w=w.sibling}if(!x){for(w=m.child;w;){if(w===a){x=!0,a=m,l=h;break}if(w===l){x=!0,l=m,a=h;break}w=w.sibling}if(!x)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function _(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=_(t),n!==null)return n;t=t.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),q=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),ge=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=C&&t[C]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function de(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case W:return"Fragment";case ne:return"Profiler";case z:return"StrictMode";case ye:return"Suspense";case Ee:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ee:return"Portal";case ge:return t.displayName||"Context";case Z:return(t._context.displayName||"Context")+".Consumer";case ue:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return n=t.displayName||null,n!==null?n:de(t.type)||"Memo";case T:n=t._payload,t=t._init;try{return de(t(n))}catch{}}return null}var Me=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Be=[],$e=-1;function S(t){return{current:t}}function P(t){0>$e||(t.current=Be[$e],Be[$e]=null,$e--)}function J(t,n){$e++,Be[$e]=t.current,t.current=n}var L=S(null),M=S(null),X=S(null),oe=S(null);function Ae(t,n){switch(J(X,n),J(M,t),J(L,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Vy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Vy(n),t=Ly(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(L),J(L,t)}function Re(){P(L),P(M),P(X)}function te(t){t.memoizedState!==null&&J(oe,t);var n=L.current,a=Ly(n,t.type);n!==a&&(J(M,t),J(L,a))}function xe(t){M.current===t&&(P(L),P(M)),oe.current===t&&(P(oe),Oo._currentValue=be)}var fe,Oe;function Ce(t){if(fe===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);fe=n&&n[1]||"",Oe=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fe+t+Oe}var Te=!1;function K(t,n){if(!t||Te)return"";Te=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch($){var G=$}Reflect.construct(t,[],le)}else{try{le.call()}catch($){G=$}t.call(le.prototype)}}else{try{throw Error()}catch($){G=$}(le=t())&&typeof le.catch=="function"&&le.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),x=m[0],w=m[1];if(x&&w){var D=x.split(`
`),F=w.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===F.length)for(l=D.length-1,h=F.length-1;1<=l&&0<=h&&D[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==F[h]){var se=`
`+D[l].replace(" at new "," at ");return t.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",t.displayName)),se}while(1<=l&&0<=h);break}}}finally{Te=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ce(a):""}function ve(t,n){switch(t.tag){case 26:case 27:case 5:return Ce(t.type);case 16:return Ce("Lazy");case 13:return t.child!==n&&n!==null?Ce("Suspense Fallback"):Ce("Suspense");case 19:return Ce("SuspenseList");case 0:case 15:return K(t.type,!1);case 11:return K(t.type.render,!1);case 1:return K(t.type,!0);case 31:return Ce("Activity");default:return""}}function we(t){try{var n="",a=null;do n+=ve(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ve=Object.prototype.hasOwnProperty,me=i.unstable_scheduleCallback,Ie=i.unstable_cancelCallback,xt=i.unstable_shouldYield,si=i.unstable_requestPaint,Vt=i.unstable_now,ii=i.unstable_getCurrentPriorityLevel,ri=i.unstable_ImmediatePriority,Li=i.unstable_UserBlockingPriority,Ss=i.unstable_NormalPriority,Hn=i.unstable_LowPriority,Na=i.unstable_IdlePriority,Nc=i.log,Ac=i.unstable_setDisableYieldValue,os=null,nn=null;function Fn(t){if(typeof Nc=="function"&&Ac(t),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(os,t)}catch{}}var Ct=Math.clz32?Math.clz32:Cc,jc=Math.log,Aa=Math.LN2;function Cc(t){return t>>>=0,t===0?32:31-(jc(t)/Aa|0)|0}var Ns=256,Ur=262144,Lt=4194304;function As(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function js(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?h=As(l):(x&=w,x!==0?h=As(x):a||(a=w&~t,a!==0&&(h=As(a))))):(w=l&~m,w!==0?h=As(w):x!==0?h=As(x):a||(a=l&~t,a!==0&&(h=As(a)))),h===0?0:n!==0&&n!==h&&(n&m)===0&&(m=h&-h,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:h}function cs(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function ah(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rc(){var t=Lt;return Lt<<=1,(Lt&62914560)===0&&(Lt=4194304),t}function Cs(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function zr(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function lh(t,n,a,l,h,m){var x=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var w=t.entanglements,D=t.expirationTimes,F=t.hiddenUpdates;for(a=x&~a;0<a;){var se=31-Ct(a),le=1<<se;w[se]=0,D[se]=-1;var G=F[se];if(G!==null)for(F[se]=null,se=0;se<G.length;se++){var $=G[se];$!==null&&($.lane&=-536870913)}a&=~le}l!==0&&Br(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~n))}function Br(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-Ct(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ul(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-Ct(a),h=1<<l;h&n|t[l]&n&&(t[l]|=n),a&=~h}}function zl(t,n){var a=n&-n;return a=(a&42)!==0?1:qr(a),(a&(t.suspendedLanes|n))!==0?0:a}function qr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ai(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ic(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:av(t.type))}function us(t,n){var a=he.p;try{return he.p=t,n()}finally{he.p=a}}var ds=Math.random().toString(36).slice(2),Pt="__reactFiber$"+ds,Zt="__reactProps$"+ds,Rs="__reactContainer$"+ds,ja="__reactEvents$"+ds,oh="__reactListeners$"+ds,kc="__reactHandles$"+ds,Dc="__reactResources$"+ds,Is="__reactMarker$"+ds;function Ca(t){delete t[Pt],delete t[Zt],delete t[ja],delete t[oh],delete t[kc]}function ks(t){var n=t[Pt];if(n)return n;for(var a=t.parentNode;a;){if(n=a[Rs]||a[Pt]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Fy(t);t!==null;){if(a=t[Pt])return a;t=Fy(t)}return n}t=a,a=t.parentNode}return null}function Gn(t){if(t=t[Pt]||t[Rs]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function In(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function Ds(t){var n=t[Dc];return n||(n=t[Dc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ut(t){t[Is]=!0}var Bl=new Set,ql={};function Ms(t,n){Os(t,n),Os(t+"Capture",n)}function Os(t,n){for(ql[t]=n,t=0;t<n.length;t++)Bl.add(n[t])}var Hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fl={},Gl={};function Mc(t){return Ve.call(Gl,t)?!0:Ve.call(Fl,t)?!1:Hl.test(t)?Gl[t]=!0:(Fl[t]=!0,!1)}function Ra(t,n,a){if(Mc(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function kn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function zt(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function Jt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pi(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Yl(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,m=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(x){a=""+x,m.call(this,x)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ut(t){if(!t._valueTracker){var n=Pi(t)?"checked":"value";t._valueTracker=Yl(t,n,""+t[n])}}function Hr(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=Pi(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Vs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Fr=/[\n"\\]/g;function wn(t){return t.replace(Fr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ia(t,n,a,l,h,m,x,w){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),n!=null?x==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Jt(n)):t.value!==""+Jt(n)&&(t.value=""+Jt(n)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),n!=null?Kl(t,x,Jt(n)):a!=null?Kl(t,x,Jt(a)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+Jt(w):t.removeAttribute("name")}function Oc(t,n,a,l,h,m,x,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){ut(t);return}a=a!=null?""+Jt(a):"",n=n!=null?""+Jt(n):a,w||n===t.value||(t.value=n),t.defaultValue=n}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=w?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),ut(t)}function Kl(t,n,a){n==="number"&&Vs(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ui(t,n,a,l){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Jt(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Vc(t,n,a){if(n!=null&&(n=""+Jt(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+Jt(a):""}function zi(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(r(92));if(Me(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=Jt(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),ut(t)}function En(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Lc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||Lc.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function $l(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in n)l=n[h],n.hasOwnProperty(h)&&a[h]!==l&&Ql(t,h,l)}else for(var m in n)n.hasOwnProperty(m)&&Ql(t,m,n[m])}function ka(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Da(t){return Bi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function hs(){}var Xl=null;function Yn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qi=null,Ls=null;function Gr(t){var n=Gn(t);if(n&&(t=n.stateNode)){var a=t[Zt]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ia(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var h=l[Zt]||null;if(!h)throw Error(r(90));Ia(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&Hr(l)}break e;case"textarea":Vc(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&Ui(t,!!a.multiple,n,!1)}}}var Ma=!1;function Hi(t,n,a){if(Ma)return t(n,a);Ma=!0;try{var l=t(n);return l}finally{if(Ma=!1,(qi!==null||Ls!==null)&&(Iu(),qi&&(n=qi,t=Ls,Ls=qi=null,Gr(n),t)))for(n=0;n<t.length;n++)Gr(t[n])}}function fs(t,n){var a=t.stateNode;if(a===null)return null;var l=a[Zt]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yr=!1;if(Kn)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){Yr=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{Yr=!1}var Ps=null,Wl=null,Kr=null;function Zl(){if(Kr)return Kr;var t,n=Wl,a=n.length,l,h="value"in Ps?Ps.value:Ps.textContent,m=h.length;for(t=0;t<a&&n[t]===h[t];t++);var x=a-t;for(l=1;l<=x&&n[a-l]===h[m-l];l++);return Kr=h.slice(t,1<l?1-l:void 0)}function Qr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function li(){return!0}function ms(){return!1}function sn(t){function n(a,l,h,m,x){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(a=t[w],this[w]=a?a(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?li:ms,this.isPropagationStopped=ms,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=li)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=li)},persist:function(){},isPersistent:li}),n}var oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Us=sn(oi),Fi=E({},oi,{view:0,detail:0}),Jl=sn(Fi),Gi,Oa,zs,Va=E({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zs&&(zs&&t.type==="mousemove"?(Gi=t.screenX-zs.screenX,Oa=t.screenY-zs.screenY):Oa=Gi=0,zs=t),Gi)},movementY:function(t){return"movementY"in t?t.movementY:Oa}}),eo=sn(Va),$r=E({},Va,{dataTransfer:0}),Uc=sn($r),zc=E({},Fi,{relatedTarget:0}),Xr=sn(zc),to=E({},oi,{animationName:0,elapsedTime:0,pseudoElement:0}),Bc=sn(to),La=E({},oi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qc=sn(La),Hc=E({},oi,{data:0}),Bs=sn(Hc),Fc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Yc[t])?!!n[t]:!1}function Yi(){return Kc}var yn=E({},Fi,{key:function(t){if(t.key){var n=Fc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Qr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yi,charCode:function(t){return t.type==="keypress"?Qr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qc=sn(yn),$c=E({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ci=sn($c),u=E({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yi}),g=sn(u),b=E({},oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=sn(b),B=E({},Va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=sn(B),pe=E({},oi,{newState:0,oldState:0}),Ye=sn(pe),Rt=[9,13,27,32],lt=Kn&&"CompositionEvent"in window,Tt=null;Kn&&"documentMode"in document&&(Tt=document.documentMode);var Qn=Kn&&"TextEvent"in window&&!Tt,qs=Kn&&(!lt||Tt&&8<Tt&&11>=Tt),gs=" ",ps=!1;function Wr(t,n){switch(t){case"keyup":return Rt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function M1(t,n){switch(t){case"compositionend":return Pa(n);case"keypress":return n.which!==32?null:(ps=!0,gs);case"textInput":return t=n.data,t===gs&&ps?null:t;default:return null}}function O1(t,n){if(Ua)return t==="compositionend"||!lt&&Wr(t,n)?(t=Zl(),Kr=Wl=Ps=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return qs&&n.locale!=="ko"?null:n.data;default:return null}}var V1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!V1[t.type]:n==="textarea"}function Qg(t,n,a,l){qi?Ls?Ls.push(l):Ls=[l]:qi=l,n=Pu(n,"onChange"),0<n.length&&(a=new Us("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var no=null,so=null;function L1(t){Ry(t,0)}function Xc(t){var n=In(t);if(Hr(n))return t}function $g(t,n){if(t==="change")return n}var Xg=!1;if(Kn){var ch;if(Kn){var uh="oninput"in document;if(!uh){var Wg=document.createElement("div");Wg.setAttribute("oninput","return;"),uh=typeof Wg.oninput=="function"}ch=uh}else ch=!1;Xg=ch&&(!document.documentMode||9<document.documentMode)}function Zg(){no&&(no.detachEvent("onpropertychange",Jg),so=no=null)}function Jg(t){if(t.propertyName==="value"&&Xc(so)){var n=[];Qg(n,so,t,Yn(t)),Hi(L1,n)}}function P1(t,n,a){t==="focusin"?(Zg(),no=n,so=a,no.attachEvent("onpropertychange",Jg)):t==="focusout"&&Zg()}function U1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xc(so)}function z1(t,n){if(t==="click")return Xc(n)}function B1(t,n){if(t==="input"||t==="change")return Xc(n)}function q1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Dn=typeof Object.is=="function"?Object.is:q1;function io(t,n){if(Dn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Ve.call(n,h)||!Dn(t[h],n[h]))return!1}return!0}function ep(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tp(t,n){var a=ep(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ep(a)}}function np(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?np(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function sp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Vs(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Vs(t.document)}return n}function dh(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var H1=Kn&&"documentMode"in document&&11>=document.documentMode,za=null,hh=null,ro=null,fh=!1;function ip(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;fh||za==null||za!==Vs(l)||(l=za,"selectionStart"in l&&dh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ro&&io(ro,l)||(ro=l,l=Pu(hh,"onSelect"),0<l.length&&(n=new Us("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=za)))}function Zr(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Ba={animationend:Zr("Animation","AnimationEnd"),animationiteration:Zr("Animation","AnimationIteration"),animationstart:Zr("Animation","AnimationStart"),transitionrun:Zr("Transition","TransitionRun"),transitionstart:Zr("Transition","TransitionStart"),transitioncancel:Zr("Transition","TransitionCancel"),transitionend:Zr("Transition","TransitionEnd")},mh={},rp={};Kn&&(rp=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Jr(t){if(mh[t])return mh[t];if(!Ba[t])return t;var n=Ba[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in rp)return mh[t]=n[a];return t}var ap=Jr("animationend"),lp=Jr("animationiteration"),op=Jr("animationstart"),F1=Jr("transitionrun"),G1=Jr("transitionstart"),Y1=Jr("transitioncancel"),cp=Jr("transitionend"),up=new Map,gh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gh.push("scrollEnd");function ys(t,n){up.set(t,n),Ms(n,[t])}var Wc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},$n=[],qa=0,ph=0;function Zc(){for(var t=qa,n=ph=qa=0;n<t;){var a=$n[n];$n[n++]=null;var l=$n[n];$n[n++]=null;var h=$n[n];$n[n++]=null;var m=$n[n];if($n[n++]=null,l!==null&&h!==null){var x=l.pending;x===null?h.next=h:(h.next=x.next,x.next=h),l.pending=h}m!==0&&dp(a,h,m)}}function Jc(t,n,a,l){$n[qa++]=t,$n[qa++]=n,$n[qa++]=a,$n[qa++]=l,ph|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function yh(t,n,a,l){return Jc(t,n,a,l),eu(t)}function ea(t,n){return Jc(t,null,null,n),eu(t)}function dp(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&n!==null&&(h=31-Ct(a),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[n]:l.push(n),n.lane=a|536870912),m):null}function eu(t){if(50<jo)throw jo=0,Af=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ha={};function K1(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,n,a,l){return new K1(t,n,a,l)}function vh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ui(t,n){var a=t.alternate;return a===null?(a=Mn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function hp(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function tu(t,n,a,l,h,m){var x=0;if(l=t,typeof t=="function")vh(t)&&(x=1);else if(typeof t=="string")x=Z2(t,a,L.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=Mn(31,a,n,h),t.elementType=j,t.lanes=m,t;case W:return ta(a.children,h,m,n);case z:x=8,h|=24;break;case ne:return t=Mn(12,a,n,h|2),t.elementType=ne,t.lanes=m,t;case ye:return t=Mn(13,a,n,h),t.elementType=ye,t.lanes=m,t;case Ee:return t=Mn(19,a,n,h),t.elementType=Ee,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ge:x=10;break e;case Z:x=9;break e;case ue:x=11;break e;case R:x=14;break e;case T:x=16,l=null;break e}x=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return n=Mn(x,a,n,h),n.elementType=t,n.type=l,n.lanes=m,n}function ta(t,n,a,l){return t=Mn(7,t,l,n),t.lanes=a,t}function xh(t,n,a){return t=Mn(6,t,null,n),t.lanes=a,t}function fp(t){var n=Mn(18,null,null,0);return n.stateNode=t,n}function bh(t,n,a){return n=Mn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var mp=new WeakMap;function Xn(t,n){if(typeof t=="object"&&t!==null){var a=mp.get(t);return a!==void 0?a:(n={value:t,source:n,stack:we(n)},mp.set(t,n),n)}return{value:t,source:n,stack:we(n)}}var Fa=[],Ga=0,nu=null,ao=0,Wn=[],Zn=0,Ki=null,Hs=1,Fs="";function di(t,n){Fa[Ga++]=ao,Fa[Ga++]=nu,nu=t,ao=n}function gp(t,n,a){Wn[Zn++]=Hs,Wn[Zn++]=Fs,Wn[Zn++]=Ki,Ki=t;var l=Hs;t=Fs;var h=32-Ct(l)-1;l&=~(1<<h),a+=1;var m=32-Ct(n)+h;if(30<m){var x=h-h%5;m=(l&(1<<x)-1).toString(32),l>>=x,h-=x,Hs=1<<32-Ct(n)+h|a<<h|l,Fs=m+t}else Hs=1<<m|a<<h|l,Fs=t}function _h(t){t.return!==null&&(di(t,1),gp(t,1,0))}function wh(t){for(;t===nu;)nu=Fa[--Ga],Fa[Ga]=null,ao=Fa[--Ga],Fa[Ga]=null;for(;t===Ki;)Ki=Wn[--Zn],Wn[Zn]=null,Fs=Wn[--Zn],Wn[Zn]=null,Hs=Wn[--Zn],Wn[Zn]=null}function pp(t,n){Wn[Zn++]=Hs,Wn[Zn++]=Fs,Wn[Zn++]=Ki,Hs=n.id,Fs=n.overflow,Ki=t}var rn=null,bt=null,st=!1,Qi=null,Jn=!1,Eh=Error(r(519));function $i(t){var n=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lo(Xn(n,t)),Eh}function yp(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Pt]=t,n[Zt]=l,a){case"dialog":We("cancel",n),We("close",n);break;case"iframe":case"object":case"embed":We("load",n);break;case"video":case"audio":for(a=0;a<Ro.length;a++)We(Ro[a],n);break;case"source":We("error",n);break;case"img":case"image":case"link":We("error",n),We("load",n);break;case"details":We("toggle",n);break;case"input":We("invalid",n),Oc(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":We("invalid",n);break;case"textarea":We("invalid",n),zi(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||My(n.textContent,a)?(l.popover!=null&&(We("beforetoggle",n),We("toggle",n)),l.onScroll!=null&&We("scroll",n),l.onScrollEnd!=null&&We("scrollend",n),l.onClick!=null&&(n.onclick=hs),n=!0):n=!1,n||$i(t,!0)}function vp(t){for(rn=t.return;rn;)switch(rn.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:rn=rn.return}}function Ya(t){if(t!==rn)return!1;if(!st)return vp(t),st=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||qf(t.type,t.memoizedProps)),a=!a),a&&bt&&$i(t),vp(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));bt=Hy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));bt=Hy(t)}else n===27?(n=bt,cr(t.type)?(t=Kf,Kf=null,bt=t):bt=n):bt=rn?ts(t.stateNode.nextSibling):null;return!0}function na(){bt=rn=null,st=!1}function Th(){var t=Qi;return t!==null&&(An===null?An=t:An.push.apply(An,t),Qi=null),t}function lo(t){Qi===null?Qi=[t]:Qi.push(t)}var Sh=S(null),sa=null,hi=null;function Xi(t,n,a){J(Sh,n._currentValue),n._currentValue=a}function fi(t){t._currentValue=Sh.current,P(Sh)}function Nh(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Ah(t,n,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var x=h.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=h;for(var D=0;D<n.length;D++)if(w.context===n[D]){m.lanes|=a,w=m.alternate,w!==null&&(w.lanes|=a),Nh(m.return,a,t),l||(x=null);break e}m=w.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(r(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Nh(x,a,t),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===t){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function Ka(t,n,a,l){t=null;for(var h=n,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var w=h.type;Dn(h.pendingProps.value,x.value)||(t!==null?t.push(w):t=[w])}}else if(h===oe.current){if(x=h.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Oo):t=[Oo])}h=h.return}t!==null&&Ah(n,t,a,l),n.flags|=262144}function su(t){for(t=t.firstContext;t!==null;){if(!Dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ia(t){sa=t,hi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function an(t){return xp(sa,t)}function iu(t,n){return sa===null&&ia(t),xp(t,n)}function xp(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},hi===null){if(t===null)throw Error(r(308));hi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else hi=hi.next=n;return a}var Q1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},$1=i.unstable_scheduleCallback,X1=i.unstable_NormalPriority,Bt={$$typeof:ge,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jh(){return{controller:new Q1,data:new Map,refCount:0}}function oo(t){t.refCount--,t.refCount===0&&$1(X1,function(){t.controller.abort()})}var co=null,Ch=0,Qa=0,$a=null;function W1(t,n){if(co===null){var a=co=[];Ch=0,Qa=Df(),$a={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ch++,n.then(bp,bp),n}function bp(){if(--Ch===0&&co!==null){$a!==null&&($a.status="fulfilled");var t=co;co=null,Qa=0,$a=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function Z1(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var _p=Y.S;Y.S=function(t,n){iy=Vt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&W1(t,n),_p!==null&&_p(t,n)};var ra=S(null);function Rh(){var t=ra.current;return t!==null?t:yt.pooledCache}function ru(t,n){n===null?J(ra,ra.current):J(ra,n.pool)}function wp(){var t=Rh();return t===null?null:{parent:Bt._currentValue,pool:t}}var Xa=Error(r(460)),Ih=Error(r(474)),au=Error(r(542)),lu={then:function(){}};function Ep(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Tp(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(hs,hs),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Np(t),t;default:if(typeof n.status=="string")n.then(hs,hs);else{if(t=yt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=l}},function(l){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Np(t),t}throw la=n,Xa}}function aa(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(la=a,Xa):a}}var la=null;function Sp(){if(la===null)throw Error(r(459));var t=la;return la=null,t}function Np(t){if(t===Xa||t===au)throw Error(r(483))}var Wa=null,uo=0;function ou(t){var n=uo;return uo+=1,Wa===null&&(Wa=[]),Tp(Wa,t,n)}function ho(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function cu(t,n){throw n.$$typeof===A?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Ap(t){function n(U,O){if(t){var H=U.deletions;H===null?(U.deletions=[O],U.flags|=16):H.push(O)}}function a(U,O){if(!t)return null;for(;O!==null;)n(U,O),O=O.sibling;return null}function l(U){for(var O=new Map;U!==null;)U.key!==null?O.set(U.key,U):O.set(U.index,U),U=U.sibling;return O}function h(U,O){return U=ui(U,O),U.index=0,U.sibling=null,U}function m(U,O,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<O?(U.flags|=67108866,O):H):(U.flags|=67108866,O)):(U.flags|=1048576,O)}function x(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function w(U,O,H,re){return O===null||O.tag!==6?(O=xh(H,U.mode,re),O.return=U,O):(O=h(O,H),O.return=U,O)}function D(U,O,H,re){var ke=H.type;return ke===W?se(U,O,H.props.children,re,H.key):O!==null&&(O.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===T&&aa(ke)===O.type)?(O=h(O,H.props),ho(O,H),O.return=U,O):(O=tu(H.type,H.key,H.props,null,U.mode,re),ho(O,H),O.return=U,O)}function F(U,O,H,re){return O===null||O.tag!==4||O.stateNode.containerInfo!==H.containerInfo||O.stateNode.implementation!==H.implementation?(O=bh(H,U.mode,re),O.return=U,O):(O=h(O,H.children||[]),O.return=U,O)}function se(U,O,H,re,ke){return O===null||O.tag!==7?(O=ta(H,U.mode,re,ke),O.return=U,O):(O=h(O,H),O.return=U,O)}function le(U,O,H){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=xh(""+O,U.mode,H),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case q:return H=tu(O.type,O.key,O.props,null,U.mode,H),ho(H,O),H.return=U,H;case ee:return O=bh(O,U.mode,H),O.return=U,O;case T:return O=aa(O),le(U,O,H)}if(Me(O)||V(O))return O=ta(O,U.mode,H,null),O.return=U,O;if(typeof O.then=="function")return le(U,ou(O),H);if(O.$$typeof===ge)return le(U,iu(U,O),H);cu(U,O)}return null}function G(U,O,H,re){var ke=O!==null?O.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ke!==null?null:w(U,O,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case q:return H.key===ke?D(U,O,H,re):null;case ee:return H.key===ke?F(U,O,H,re):null;case T:return H=aa(H),G(U,O,H,re)}if(Me(H)||V(H))return ke!==null?null:se(U,O,H,re,null);if(typeof H.then=="function")return G(U,O,ou(H),re);if(H.$$typeof===ge)return G(U,O,iu(U,H),re);cu(U,H)}return null}function $(U,O,H,re,ke){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return U=U.get(H)||null,w(O,U,""+re,ke);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case q:return U=U.get(re.key===null?H:re.key)||null,D(O,U,re,ke);case ee:return U=U.get(re.key===null?H:re.key)||null,F(O,U,re,ke);case T:return re=aa(re),$(U,O,H,re,ke)}if(Me(re)||V(re))return U=U.get(H)||null,se(O,U,re,ke,null);if(typeof re.then=="function")return $(U,O,H,ou(re),ke);if(re.$$typeof===ge)return $(U,O,H,iu(O,re),ke);cu(O,re)}return null}function Ne(U,O,H,re){for(var ke=null,rt=null,je=O,Qe=O=0,Je=null;je!==null&&Qe<H.length;Qe++){je.index>Qe?(Je=je,je=null):Je=je.sibling;var at=G(U,je,H[Qe],re);if(at===null){je===null&&(je=Je);break}t&&je&&at.alternate===null&&n(U,je),O=m(at,O,Qe),rt===null?ke=at:rt.sibling=at,rt=at,je=Je}if(Qe===H.length)return a(U,je),st&&di(U,Qe),ke;if(je===null){for(;Qe<H.length;Qe++)je=le(U,H[Qe],re),je!==null&&(O=m(je,O,Qe),rt===null?ke=je:rt.sibling=je,rt=je);return st&&di(U,Qe),ke}for(je=l(je);Qe<H.length;Qe++)Je=$(je,U,Qe,H[Qe],re),Je!==null&&(t&&Je.alternate!==null&&je.delete(Je.key===null?Qe:Je.key),O=m(Je,O,Qe),rt===null?ke=Je:rt.sibling=Je,rt=Je);return t&&je.forEach(function(mr){return n(U,mr)}),st&&di(U,Qe),ke}function Le(U,O,H,re){if(H==null)throw Error(r(151));for(var ke=null,rt=null,je=O,Qe=O=0,Je=null,at=H.next();je!==null&&!at.done;Qe++,at=H.next()){je.index>Qe?(Je=je,je=null):Je=je.sibling;var mr=G(U,je,at.value,re);if(mr===null){je===null&&(je=Je);break}t&&je&&mr.alternate===null&&n(U,je),O=m(mr,O,Qe),rt===null?ke=mr:rt.sibling=mr,rt=mr,je=Je}if(at.done)return a(U,je),st&&di(U,Qe),ke;if(je===null){for(;!at.done;Qe++,at=H.next())at=le(U,at.value,re),at!==null&&(O=m(at,O,Qe),rt===null?ke=at:rt.sibling=at,rt=at);return st&&di(U,Qe),ke}for(je=l(je);!at.done;Qe++,at=H.next())at=$(je,U,Qe,at.value,re),at!==null&&(t&&at.alternate!==null&&je.delete(at.key===null?Qe:at.key),O=m(at,O,Qe),rt===null?ke=at:rt.sibling=at,rt=at);return t&&je.forEach(function(cw){return n(U,cw)}),st&&di(U,Qe),ke}function pt(U,O,H,re){if(typeof H=="object"&&H!==null&&H.type===W&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case q:e:{for(var ke=H.key;O!==null;){if(O.key===ke){if(ke=H.type,ke===W){if(O.tag===7){a(U,O.sibling),re=h(O,H.props.children),re.return=U,U=re;break e}}else if(O.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===T&&aa(ke)===O.type){a(U,O.sibling),re=h(O,H.props),ho(re,H),re.return=U,U=re;break e}a(U,O);break}else n(U,O);O=O.sibling}H.type===W?(re=ta(H.props.children,U.mode,re,H.key),re.return=U,U=re):(re=tu(H.type,H.key,H.props,null,U.mode,re),ho(re,H),re.return=U,U=re)}return x(U);case ee:e:{for(ke=H.key;O!==null;){if(O.key===ke)if(O.tag===4&&O.stateNode.containerInfo===H.containerInfo&&O.stateNode.implementation===H.implementation){a(U,O.sibling),re=h(O,H.children||[]),re.return=U,U=re;break e}else{a(U,O);break}else n(U,O);O=O.sibling}re=bh(H,U.mode,re),re.return=U,U=re}return x(U);case T:return H=aa(H),pt(U,O,H,re)}if(Me(H))return Ne(U,O,H,re);if(V(H)){if(ke=V(H),typeof ke!="function")throw Error(r(150));return H=ke.call(H),Le(U,O,H,re)}if(typeof H.then=="function")return pt(U,O,ou(H),re);if(H.$$typeof===ge)return pt(U,O,iu(U,H),re);cu(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,O!==null&&O.tag===6?(a(U,O.sibling),re=h(O,H),re.return=U,U=re):(a(U,O),re=xh(H,U.mode,re),re.return=U,U=re),x(U)):a(U,O)}return function(U,O,H,re){try{uo=0;var ke=pt(U,O,H,re);return Wa=null,ke}catch(je){if(je===Xa||je===au)throw je;var rt=Mn(29,je,null,U.mode);return rt.lanes=re,rt.return=U,rt}finally{}}}var oa=Ap(!0),jp=Ap(!1),Wi=!1;function kh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Zi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ji(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ot&2)!==0){var h=l.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),l.pending=n,n=eu(t),dp(t,null,a),n}return Jc(t,l,n,a),eu(t)}function fo(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Ul(t,a)}}function Mh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?h=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?h=m=n:m=m.next=n}else h=m=n;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Oh=!1;function mo(){if(Oh){var t=$a;if(t!==null)throw t}}function go(t,n,a,l){Oh=!1;var h=t.updateQueue;Wi=!1;var m=h.firstBaseUpdate,x=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var D=w,F=D.next;D.next=null,x===null?m=F:x.next=F,x=D;var se=t.alternate;se!==null&&(se=se.updateQueue,w=se.lastBaseUpdate,w!==x&&(w===null?se.firstBaseUpdate=F:w.next=F,se.lastBaseUpdate=D))}if(m!==null){var le=h.baseState;x=0,se=F=D=null,w=m;do{var G=w.lane&-536870913,$=G!==w.lane;if($?(Ze&G)===G:(l&G)===G){G!==0&&G===Qa&&(Oh=!0),se!==null&&(se=se.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ne=t,Le=w;G=n;var pt=a;switch(Le.tag){case 1:if(Ne=Le.payload,typeof Ne=="function"){le=Ne.call(pt,le,G);break e}le=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Le.payload,G=typeof Ne=="function"?Ne.call(pt,le,G):Ne,G==null)break e;le=E({},le,G);break e;case 2:Wi=!0}}G=w.callback,G!==null&&(t.flags|=64,$&&(t.flags|=8192),$=h.callbacks,$===null?h.callbacks=[G]:$.push(G))}else $={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},se===null?(F=se=$,D=le):se=se.next=$,x|=G;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;$=w,w=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(!0);se===null&&(D=le),h.baseState=D,h.firstBaseUpdate=F,h.lastBaseUpdate=se,m===null&&(h.shared.lanes=0),ir|=x,t.lanes=x,t.memoizedState=le}}function Cp(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function Rp(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Cp(a[t],n)}var Za=S(null),uu=S(0);function Ip(t,n){t=wi,J(uu,t),J(Za,n),wi=t|n.baseLanes}function Vh(){J(uu,wi),J(Za,Za.current)}function Lh(){wi=uu.current,P(Za),P(uu)}var On=S(null),es=null;function er(t){var n=t.alternate;J(It,It.current&1),J(On,t),es===null&&(n===null||Za.current!==null||n.memoizedState!==null)&&(es=t)}function Ph(t){J(It,It.current),J(On,t),es===null&&(es=t)}function kp(t){t.tag===22?(J(It,It.current),J(On,t),es===null&&(es=t)):tr()}function tr(){J(It,It.current),J(On,On.current)}function Vn(t){P(On),es===t&&(es=null),P(It)}var It=S(0);function du(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gf(a)||Yf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var mi=0,Ke=null,mt=null,qt=null,hu=!1,Ja=!1,ca=!1,fu=0,po=0,el=null,J1=0;function At(){throw Error(r(321))}function Uh(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Dn(t[a],n[a]))return!1;return!0}function zh(t,n,a,l,h,m){return mi=m,Ke=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Y.H=t===null||t.memoizedState===null?g0:tf,ca=!1,m=a(l,h),ca=!1,Ja&&(m=Mp(n,a,l,h)),Dp(t),m}function Dp(t){Y.H=xo;var n=mt!==null&&mt.next!==null;if(mi=0,qt=mt=Ke=null,hu=!1,po=0,el=null,n)throw Error(r(300));t===null||Ht||(t=t.dependencies,t!==null&&su(t)&&(Ht=!0))}function Mp(t,n,a,l){Ke=t;var h=0;do{if(Ja&&(el=null),po=0,Ja=!1,25<=h)throw Error(r(301));if(h+=1,qt=mt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=p0,m=n(a,l)}while(Ja);return m}function e2(){var t=Y.H,n=t.useState()[0];return n=typeof n.then=="function"?yo(n):n,t=t.useState()[0],(mt!==null?mt.memoizedState:null)!==t&&(Ke.flags|=1024),n}function Bh(){var t=fu!==0;return fu=0,t}function qh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Hh(t){if(hu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}hu=!1}mi=0,qt=mt=Ke=null,Ja=!1,po=fu=0,el=null}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Ke.memoizedState=qt=t:qt=qt.next=t,qt}function kt(){if(mt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var n=qt===null?Ke.memoizedState:qt.next;if(n!==null)qt=n,mt=t;else{if(t===null)throw Ke.alternate===null?Error(r(467)):Error(r(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},qt===null?Ke.memoizedState=qt=t:qt=qt.next=t}return qt}function mu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yo(t){var n=po;return po+=1,el===null&&(el=[]),t=Tp(el,t,n),n=Ke,(qt===null?n.memoizedState:qt.next)===null&&(n=n.alternate,Y.H=n===null||n.memoizedState===null?g0:tf),t}function gu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yo(t);if(t.$$typeof===ge)return an(t)}throw Error(r(438,String(t)))}function Fh(t){var n=null,a=Ke.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=mu(),Ke.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=k;return n.index++,a}function gi(t,n){return typeof n=="function"?n(t):n}function pu(t){var n=kt();return Gh(n,mt,t)}function Gh(t,n,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var x=h.next;h.next=m.next,m.next=x}n.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{n=h.next;var w=x=null,D=null,F=n,se=!1;do{var le=F.lane&-536870913;if(le!==F.lane?(Ze&le)===le:(mi&le)===le){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),le===Qa&&(se=!0);else if((mi&G)===G){F=F.next,G===Qa&&(se=!0);continue}else le={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(w=D=le,x=m):D=D.next=le,Ke.lanes|=G,ir|=G;le=F.action,ca&&a(m,le),m=F.hasEagerState?F.eagerState:a(m,le)}else G={lane:le,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(w=D=G,x=m):D=D.next=G,Ke.lanes|=le,ir|=le;F=F.next}while(F!==null&&F!==n);if(D===null?x=m:D.next=w,!Dn(m,t.memoizedState)&&(Ht=!0,se&&(a=$a,a!==null)))throw a;t.memoizedState=m,t.baseState=x,t.baseQueue=D,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Yh(t){var n=kt(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,m=n.memoizedState;if(h!==null){a.pending=null;var x=h=h.next;do m=t(m,x.action),x=x.next;while(x!==h);Dn(m,n.memoizedState)||(Ht=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,l]}function Op(t,n,a){var l=Ke,h=kt(),m=st;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=n();var x=!Dn((mt||h).memoizedState,a);if(x&&(h.memoizedState=a,Ht=!0),h=h.queue,$h(Pp.bind(null,l,h,t),[t]),h.getSnapshot!==n||x||qt!==null&&qt.memoizedState.tag&1){if(l.flags|=2048,tl(9,{destroy:void 0},Lp.bind(null,l,h,a,n),null),yt===null)throw Error(r(349));m||(mi&127)!==0||Vp(l,n,a)}return a}function Vp(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Ke.updateQueue,n===null?(n=mu(),Ke.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Lp(t,n,a,l){n.value=a,n.getSnapshot=l,Up(n)&&zp(t)}function Pp(t,n,a){return a(function(){Up(n)&&zp(t)})}function Up(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Dn(t,a)}catch{return!0}}function zp(t){var n=ea(t,2);n!==null&&jn(n,t,2)}function Kh(t){var n=vn();if(typeof t=="function"){var a=t;if(t=a(),ca){Fn(!0);try{a()}finally{Fn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:t},n}function Bp(t,n,a,l){return t.baseState=a,Gh(t,mt,typeof l=="function"?l:gi)}function t2(t,n,a,l,h){if(xu(t))throw Error(r(485));if(t=n.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};Y.T!==null?a(!0):m.isTransition=!1,l(m),a=n.pending,a===null?(m.next=n.pending=m,qp(n,m)):(m.next=a.next,n.pending=a.next=m)}}function qp(t,n){var a=n.action,l=n.payload,h=t.state;if(n.isTransition){var m=Y.T,x={};Y.T=x;try{var w=a(h,l),D=Y.S;D!==null&&D(x,w),Hp(t,n,w)}catch(F){Qh(t,n,F)}finally{m!==null&&x.types!==null&&(m.types=x.types),Y.T=m}}else try{m=a(h,l),Hp(t,n,m)}catch(F){Qh(t,n,F)}}function Hp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Fp(t,n,l)},function(l){return Qh(t,n,l)}):Fp(t,n,a)}function Fp(t,n,a){n.status="fulfilled",n.value=a,Gp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,qp(t,a)))}function Qh(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Gp(n),n=n.next;while(n!==l)}t.action=null}function Gp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Yp(t,n){return n}function Kp(t,n){if(st){var a=yt.formState;if(a!==null){e:{var l=Ke;if(st){if(bt){t:{for(var h=bt,m=Jn;h.nodeType!==8;){if(!m){h=null;break t}if(h=ts(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){bt=ts(h.nextSibling),l=h.data==="F!";break e}}$i(l)}l=!1}l&&(n=a[0])}}return a=vn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yp,lastRenderedState:n},a.queue=l,a=h0.bind(null,Ke,l),l.dispatch=a,l=Kh(!1),m=ef.bind(null,Ke,!1,l.queue),l=vn(),h={state:n,dispatch:null,action:t,pending:null},l.queue=h,a=t2.bind(null,Ke,h,m,a),h.dispatch=a,l.memoizedState=t,[n,a,!1]}function Qp(t){var n=kt();return $p(n,mt,t)}function $p(t,n,a){if(n=Gh(t,n,Yp)[0],t=pu(gi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=yo(n)}catch(x){throw x===Xa?au:x}else l=n;n=kt();var h=n.queue,m=h.dispatch;return a!==n.memoizedState&&(Ke.flags|=2048,tl(9,{destroy:void 0},n2.bind(null,h,a),null)),[l,m,t]}function n2(t,n){t.action=n}function Xp(t){var n=kt(),a=mt;if(a!==null)return $p(n,a,t);kt(),n=n.memoizedState,a=kt();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function tl(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=Ke.updateQueue,n===null&&(n=mu(),Ke.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Wp(){return kt().memoizedState}function yu(t,n,a,l){var h=vn();Ke.flags|=t,h.memoizedState=tl(1|n,{destroy:void 0},a,l===void 0?null:l)}function vu(t,n,a,l){var h=kt();l=l===void 0?null:l;var m=h.memoizedState.inst;mt!==null&&l!==null&&Uh(l,mt.memoizedState.deps)?h.memoizedState=tl(n,m,a,l):(Ke.flags|=t,h.memoizedState=tl(1|n,m,a,l))}function Zp(t,n){yu(8390656,8,t,n)}function $h(t,n){vu(2048,8,t,n)}function s2(t){Ke.flags|=4;var n=Ke.updateQueue;if(n===null)n=mu(),Ke.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Jp(t){var n=kt().memoizedState;return s2({ref:n,nextImpl:t}),function(){if((ot&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}function e0(t,n){return vu(4,2,t,n)}function t0(t,n){return vu(4,4,t,n)}function n0(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function s0(t,n,a){a=a!=null?a.concat([t]):null,vu(4,4,n0.bind(null,n,t),a)}function Xh(){}function i0(t,n){var a=kt();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Uh(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function r0(t,n){var a=kt();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Uh(n,l[1]))return l[0];if(l=t(),ca){Fn(!0);try{t()}finally{Fn(!1)}}return a.memoizedState=[l,n],l}function Wh(t,n,a){return a===void 0||(mi&1073741824)!==0&&(Ze&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=ay(),Ke.lanes|=t,ir|=t,a)}function a0(t,n,a,l){return Dn(a,n)?a:Za.current!==null?(t=Wh(t,a,l),Dn(t,n)||(Ht=!0),t):(mi&42)===0||(mi&1073741824)!==0&&(Ze&261930)===0?(Ht=!0,t.memoizedState=a):(t=ay(),Ke.lanes|=t,ir|=t,n)}function l0(t,n,a,l,h){var m=he.p;he.p=m!==0&&8>m?m:8;var x=Y.T,w={};Y.T=w,ef(t,!1,n,a);try{var D=h(),F=Y.S;if(F!==null&&F(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var se=Z1(D,l);vo(t,n,se,Un(t))}else vo(t,n,l,Un(t))}catch(le){vo(t,n,{then:function(){},status:"rejected",reason:le},Un())}finally{he.p=m,x!==null&&w.types!==null&&(x.types=w.types),Y.T=x}}function i2(){}function Zh(t,n,a,l){if(t.tag!==5)throw Error(r(476));var h=o0(t).queue;l0(t,h,n,be,a===null?i2:function(){return c0(t),a(l)})}function o0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:be},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function c0(t){var n=o0(t);n.next===null&&(n=t.alternate.memoizedState),vo(t,n.next.queue,{},Un())}function Jh(){return an(Oo)}function u0(){return kt().memoizedState}function d0(){return kt().memoizedState}function r2(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Un();t=Zi(a);var l=Ji(n,t,a);l!==null&&(jn(l,n,a),fo(l,n,a)),n={cache:jh()},t.payload=n;return}n=n.return}}function a2(t,n,a){var l=Un();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xu(t)?f0(n,a):(a=yh(t,n,a,l),a!==null&&(jn(a,t,l),m0(a,n,l)))}function h0(t,n,a){var l=Un();vo(t,n,a,l)}function vo(t,n,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xu(t))f0(n,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var x=n.lastRenderedState,w=m(x,a);if(h.hasEagerState=!0,h.eagerState=w,Dn(w,x))return Jc(t,n,h,0),yt===null&&Zc(),!1}catch{}finally{}if(a=yh(t,n,h,l),a!==null)return jn(a,t,l),m0(a,n,l),!0}return!1}function ef(t,n,a,l){if(l={lane:2,revertLane:Df(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},xu(t)){if(n)throw Error(r(479))}else n=yh(t,a,l,2),n!==null&&jn(n,t,2)}function xu(t){var n=t.alternate;return t===Ke||n!==null&&n===Ke}function f0(t,n){Ja=hu=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function m0(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Ul(t,a)}}var xo={readContext:an,use:gu,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At};xo.useEffectEvent=At;var g0={readContext:an,use:gu,useCallback:function(t,n){return vn().memoizedState=[t,n===void 0?null:n],t},useContext:an,useEffect:Zp,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,yu(4194308,4,n0.bind(null,n,t),a)},useLayoutEffect:function(t,n){return yu(4194308,4,t,n)},useInsertionEffect:function(t,n){yu(4,2,t,n)},useMemo:function(t,n){var a=vn();n=n===void 0?null:n;var l=t();if(ca){Fn(!0);try{t()}finally{Fn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=vn();if(a!==void 0){var h=a(n);if(ca){Fn(!0);try{a(n)}finally{Fn(!1)}}}else h=n;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=a2.bind(null,Ke,t),[l.memoizedState,t]},useRef:function(t){var n=vn();return t={current:t},n.memoizedState=t},useState:function(t){t=Kh(t);var n=t.queue,a=h0.bind(null,Ke,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Xh,useDeferredValue:function(t,n){var a=vn();return Wh(a,t,n)},useTransition:function(){var t=Kh(!1);return t=l0.bind(null,Ke,t.queue,!0,!1),vn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=Ke,h=vn();if(st){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),yt===null)throw Error(r(349));(Ze&127)!==0||Vp(l,n,a)}h.memoizedState=a;var m={value:a,getSnapshot:n};return h.queue=m,Zp(Pp.bind(null,l,m,t),[t]),l.flags|=2048,tl(9,{destroy:void 0},Lp.bind(null,l,m,a,n),null),a},useId:function(){var t=vn(),n=yt.identifierPrefix;if(st){var a=Fs,l=Hs;a=(l&~(1<<32-Ct(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=fu++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=J1++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Jh,useFormState:Kp,useActionState:Kp,useOptimistic:function(t){var n=vn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=ef.bind(null,Ke,!0,a),a.dispatch=n,[t,n]},useMemoCache:Fh,useCacheRefresh:function(){return vn().memoizedState=r2.bind(null,Ke)},useEffectEvent:function(t){var n=vn(),a={impl:t};return n.memoizedState=a,function(){if((ot&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},tf={readContext:an,use:gu,useCallback:i0,useContext:an,useEffect:$h,useImperativeHandle:s0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:r0,useReducer:pu,useRef:Wp,useState:function(){return pu(gi)},useDebugValue:Xh,useDeferredValue:function(t,n){var a=kt();return a0(a,mt.memoizedState,t,n)},useTransition:function(){var t=pu(gi)[0],n=kt().memoizedState;return[typeof t=="boolean"?t:yo(t),n]},useSyncExternalStore:Op,useId:u0,useHostTransitionStatus:Jh,useFormState:Qp,useActionState:Qp,useOptimistic:function(t,n){var a=kt();return Bp(a,mt,t,n)},useMemoCache:Fh,useCacheRefresh:d0};tf.useEffectEvent=Jp;var p0={readContext:an,use:gu,useCallback:i0,useContext:an,useEffect:$h,useImperativeHandle:s0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:r0,useReducer:Yh,useRef:Wp,useState:function(){return Yh(gi)},useDebugValue:Xh,useDeferredValue:function(t,n){var a=kt();return mt===null?Wh(a,t,n):a0(a,mt.memoizedState,t,n)},useTransition:function(){var t=Yh(gi)[0],n=kt().memoizedState;return[typeof t=="boolean"?t:yo(t),n]},useSyncExternalStore:Op,useId:u0,useHostTransitionStatus:Jh,useFormState:Xp,useActionState:Xp,useOptimistic:function(t,n){var a=kt();return mt!==null?Bp(a,mt,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Fh,useCacheRefresh:d0};p0.useEffectEvent=Jp;function nf(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:E({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var sf={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Un(),h=Zi(l);h.payload=n,a!=null&&(h.callback=a),n=Ji(t,h,l),n!==null&&(jn(n,t,l),fo(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Un(),h=Zi(l);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Ji(t,h,l),n!==null&&(jn(n,t,l),fo(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Un(),l=Zi(a);l.tag=2,n!=null&&(l.callback=n),n=Ji(t,l,a),n!==null&&(jn(n,t,a),fo(n,t,a))}};function y0(t,n,a,l,h,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,x):n.prototype&&n.prototype.isPureReactComponent?!io(a,l)||!io(h,m):!0}function v0(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&sf.enqueueReplaceState(n,n.state,null)}function ua(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function x0(t){Wc(t)}function b0(t){console.error(t)}function _0(t){Wc(t)}function bu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function w0(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function rf(t,n,a){return a=Zi(a),a.tag=3,a.payload={element:null},a.callback=function(){bu(t,n)},a}function E0(t){return t=Zi(t),t.tag=3,t}function T0(t,n,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){w0(n,a,l)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){w0(n,a,l),typeof h!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function l2(t,n,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ka(n,a,h,!0),a=On.current,a!==null){switch(a.tag){case 31:case 13:return es===null?ku():a.alternate===null&&jt===0&&(jt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===lu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Rf(t,l,h)),!1;case 22:return a.flags|=65536,l===lu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Rf(t,l,h)),!1}throw Error(r(435,a.tag))}return Rf(t,l,h),ku(),!1}if(st)return n=On.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,l!==Eh&&(t=Error(r(422),{cause:l}),lo(Xn(t,a)))):(l!==Eh&&(n=Error(r(423),{cause:l}),lo(Xn(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Xn(l,a),h=rf(t.stateNode,l,h),Mh(t,h),jt!==4&&(jt=2)),!1;var m=Error(r(520),{cause:l});if(m=Xn(m,a),Ao===null?Ao=[m]:Ao.push(m),jt!==4&&(jt=2),n===null)return!0;l=Xn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=rf(a.stateNode,l,t),Mh(a,t),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(rr===null||!rr.has(m))))return a.flags|=65536,h&=-h,a.lanes|=h,h=E0(h),T0(h,t,a,l),Mh(a,h),!1}a=a.return}while(a!==null);return!1}var af=Error(r(461)),Ht=!1;function ln(t,n,a,l){n.child=t===null?jp(n,null,a,l):oa(n,t.child,a,l)}function S0(t,n,a,l,h){a=a.render;var m=n.ref;if("ref"in l){var x={};for(var w in l)w!=="ref"&&(x[w]=l[w])}else x=l;return ia(n),l=zh(t,n,a,x,m,h),w=Bh(),t!==null&&!Ht?(qh(t,n,h),pi(t,n,h)):(st&&w&&_h(n),n.flags|=1,ln(t,n,l,h),n.child)}function N0(t,n,a,l,h){if(t===null){var m=a.type;return typeof m=="function"&&!vh(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,A0(t,n,m,l,h)):(t=tu(a.type,null,l,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(m=t.child,!mf(t,h)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:io,a(x,l)&&t.ref===n.ref)return pi(t,n,h)}return n.flags|=1,t=ui(m,l),t.ref=n.ref,t.return=n,n.child=t}function A0(t,n,a,l,h){if(t!==null){var m=t.memoizedProps;if(io(m,l)&&t.ref===n.ref)if(Ht=!1,n.pendingProps=l=m,mf(t,h))(t.flags&131072)!==0&&(Ht=!0);else return n.lanes=t.lanes,pi(t,n,h)}return lf(t,n,a,l,h)}function j0(t,n,a,l){var h=l.children,m=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,t!==null){for(l=n.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~m}else l=0,n.child=null;return C0(t,n,m,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&ru(n,m!==null?m.cachePool:null),m!==null?Ip(n,m):Vh(),kp(n);else return l=n.lanes=536870912,C0(t,n,m!==null?m.baseLanes|a:a,a,l)}else m!==null?(ru(n,m.cachePool),Ip(n,m),tr(),n.memoizedState=null):(t!==null&&ru(n,null),Vh(),tr());return ln(t,n,h,a),n.child}function bo(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function C0(t,n,a,l,h){var m=Rh();return m=m===null?null:{parent:Bt._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},t!==null&&ru(n,null),Vh(),kp(n),t!==null&&Ka(t,n,l,!0),n.childLanes=h,null}function _u(t,n){return n=Eu({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function R0(t,n,a){return oa(n,t.child,null,a),t=_u(n,n.pendingProps),t.flags|=2,Vn(n),n.memoizedState=null,t}function o2(t,n,a){var l=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(st){if(l.mode==="hidden")return t=_u(n,l),n.lanes=536870912,bo(null,t);if(Ph(n),(t=bt)?(t=qy(t,Jn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ki!==null?{id:Hs,overflow:Fs}:null,retryLane:536870912,hydrationErrors:null},a=fp(t),a.return=n,n.child=a,rn=n,bt=null)):t=null,t===null)throw $i(n);return n.lanes=536870912,null}return _u(n,l)}var m=t.memoizedState;if(m!==null){var x=m.dehydrated;if(Ph(n),h)if(n.flags&256)n.flags&=-257,n=R0(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(r(558));else if(Ht||Ka(t,n,a,!1),h=(a&t.childLanes)!==0,Ht||h){if(l=yt,l!==null&&(x=zl(l,a),x!==0&&x!==m.retryLane))throw m.retryLane=x,ea(t,x),jn(l,t,x),af;ku(),n=R0(t,n,a)}else t=m.treeContext,bt=ts(x.nextSibling),rn=n,st=!0,Qi=null,Jn=!1,t!==null&&pp(n,t),n=_u(n,l),n.flags|=4096;return n}return t=ui(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function wu(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function lf(t,n,a,l,h){return ia(n),a=zh(t,n,a,l,void 0,h),l=Bh(),t!==null&&!Ht?(qh(t,n,h),pi(t,n,h)):(st&&l&&_h(n),n.flags|=1,ln(t,n,a,h),n.child)}function I0(t,n,a,l,h,m){return ia(n),n.updateQueue=null,a=Mp(n,l,a,h),Dp(t),l=Bh(),t!==null&&!Ht?(qh(t,n,m),pi(t,n,m)):(st&&l&&_h(n),n.flags|=1,ln(t,n,a,m),n.child)}function k0(t,n,a,l,h){if(ia(n),n.stateNode===null){var m=Ha,x=a.contextType;typeof x=="object"&&x!==null&&(m=an(x)),m=new a(l,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=sf,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=l,m.state=n.memoizedState,m.refs={},kh(n),x=a.contextType,m.context=typeof x=="object"&&x!==null?an(x):Ha,m.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(nf(n,a,x,l),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&sf.enqueueReplaceState(m,m.state,null),go(n,l,m,h),mo(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){m=n.stateNode;var w=n.memoizedProps,D=ua(a,w);m.props=D;var F=m.context,se=a.contextType;x=Ha,typeof se=="object"&&se!==null&&(x=an(se));var le=a.getDerivedStateFromProps;se=typeof le=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=n.pendingProps!==w,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||F!==x)&&v0(n,m,l,x),Wi=!1;var G=n.memoizedState;m.state=G,go(n,l,m,h),mo(),F=n.memoizedState,w||G!==F||Wi?(typeof le=="function"&&(nf(n,a,le,l),F=n.memoizedState),(D=Wi||y0(n,a,D,l,G,F,x))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=F),m.props=l,m.state=F,m.context=x,l=D):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{m=n.stateNode,Dh(t,n),x=n.memoizedProps,se=ua(a,x),m.props=se,le=n.pendingProps,G=m.context,F=a.contextType,D=Ha,typeof F=="object"&&F!==null&&(D=an(F)),w=a.getDerivedStateFromProps,(F=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==le||G!==D)&&v0(n,m,l,D),Wi=!1,G=n.memoizedState,m.state=G,go(n,l,m,h),mo();var $=n.memoizedState;x!==le||G!==$||Wi||t!==null&&t.dependencies!==null&&su(t.dependencies)?(typeof w=="function"&&(nf(n,a,w,l),$=n.memoizedState),(se=Wi||y0(n,a,se,l,G,$,D)||t!==null&&t.dependencies!==null&&su(t.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,$,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,$,D)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=$),m.props=l,m.state=$,m.context=D,l=se):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(n.flags|=1024),l=!1)}return m=l,wu(t,n),l=(n.flags&128)!==0,m||l?(m=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,t!==null&&l?(n.child=oa(n,t.child,null,h),n.child=oa(n,null,a,h)):ln(t,n,a,h),n.memoizedState=m.state,t=n.child):t=pi(t,n,h),t}function D0(t,n,a,l){return na(),n.flags|=256,ln(t,n,a,l),n.child}var of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cf(t){return{baseLanes:t,cachePool:wp()}}function uf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=Pn),t}function M0(t,n,a){var l=n.pendingProps,h=!1,m=(n.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(It.current&2)!==0),x&&(h=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,t===null){if(st){if(h?er(n):tr(),(t=bt)?(t=qy(t,Jn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ki!==null?{id:Hs,overflow:Fs}:null,retryLane:536870912,hydrationErrors:null},a=fp(t),a.return=n,n.child=a,rn=n,bt=null)):t=null,t===null)throw $i(n);return Yf(t)?n.lanes=32:n.lanes=536870912,null}var w=l.children;return l=l.fallback,h?(tr(),h=n.mode,w=Eu({mode:"hidden",children:w},h),l=ta(l,h,a,null),w.return=n,l.return=n,w.sibling=l,n.child=w,l=n.child,l.memoizedState=cf(a),l.childLanes=uf(t,x,a),n.memoizedState=of,bo(null,l)):(er(n),df(n,w))}var D=t.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(m)n.flags&256?(er(n),n.flags&=-257,n=hf(t,n,a)):n.memoizedState!==null?(tr(),n.child=t.child,n.flags|=128,n=null):(tr(),w=l.fallback,h=n.mode,l=Eu({mode:"visible",children:l.children},h),w=ta(w,h,a,null),w.flags|=2,l.return=n,w.return=n,l.sibling=w,n.child=l,oa(n,t.child,null,a),l=n.child,l.memoizedState=cf(a),l.childLanes=uf(t,x,a),n.memoizedState=of,n=bo(null,l));else if(er(n),Yf(w)){if(x=w.nextSibling&&w.nextSibling.dataset,x)var F=x.dgst;x=F,l=Error(r(419)),l.stack="",l.digest=x,lo({value:l,source:null,stack:null}),n=hf(t,n,a)}else if(Ht||Ka(t,n,a,!1),x=(a&t.childLanes)!==0,Ht||x){if(x=yt,x!==null&&(l=zl(x,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,ea(t,l),jn(x,t,l),af;Gf(w)||ku(),n=hf(t,n,a)}else Gf(w)?(n.flags|=192,n.child=t.child,n=null):(t=D.treeContext,bt=ts(w.nextSibling),rn=n,st=!0,Qi=null,Jn=!1,t!==null&&pp(n,t),n=df(n,l.children),n.flags|=4096);return n}return h?(tr(),w=l.fallback,h=n.mode,D=t.child,F=D.sibling,l=ui(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,F!==null?w=ui(F,w):(w=ta(w,h,a,null),w.flags|=2),w.return=n,l.return=n,l.sibling=w,n.child=l,bo(null,l),l=n.child,w=t.child.memoizedState,w===null?w=cf(a):(h=w.cachePool,h!==null?(D=Bt._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=wp(),w={baseLanes:w.baseLanes|a,cachePool:h}),l.memoizedState=w,l.childLanes=uf(t,x,a),n.memoizedState=of,bo(t.child,l)):(er(n),a=t.child,t=a.sibling,a=ui(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(x=n.deletions,x===null?(n.deletions=[t],n.flags|=16):x.push(t)),n.child=a,n.memoizedState=null,a)}function df(t,n){return n=Eu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Eu(t,n){return t=Mn(22,t,null,n),t.lanes=0,t}function hf(t,n,a){return oa(n,t.child,null,a),t=df(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function O0(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Nh(t.return,n,a)}function ff(t,n,a,l,h,m){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:m}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=a,x.tailMode=h,x.treeForkCount=m)}function V0(t,n,a){var l=n.pendingProps,h=l.revealOrder,m=l.tail;l=l.children;var x=It.current,w=(x&2)!==0;if(w?(x=x&1|2,n.flags|=128):x&=1,J(It,x),ln(t,n,l,a),l=st?ao:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&O0(t,a,n);else if(t.tag===19)O0(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&du(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),ff(n,!1,h,a,m,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&du(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}ff(n,!0,a,null,m,l);break;case"together":ff(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function pi(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),ir|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Ka(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=ui(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=ui(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function mf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&su(t)))}function c2(t,n,a){switch(n.tag){case 3:Ae(n,n.stateNode.containerInfo),Xi(n,Bt,t.memoizedState.cache),na();break;case 27:case 5:te(n);break;case 4:Ae(n,n.stateNode.containerInfo);break;case 10:Xi(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Ph(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(er(n),n.flags|=128,null):(a&n.child.childLanes)!==0?M0(t,n,a):(er(n),t=pi(t,n,a),t!==null?t.sibling:null);er(n);break;case 19:var h=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ka(t,n,a,!1),l=(a&n.childLanes)!==0),h){if(l)return V0(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),J(It,It.current),l)break;return null;case 22:return n.lanes=0,j0(t,n,a,n.pendingProps);case 24:Xi(n,Bt,t.memoizedState.cache)}return pi(t,n,a)}function L0(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ht=!0;else{if(!mf(t,a)&&(n.flags&128)===0)return Ht=!1,c2(t,n,a);Ht=(t.flags&131072)!==0}else Ht=!1,st&&(n.flags&1048576)!==0&&gp(n,ao,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=aa(n.elementType),n.type=t,typeof t=="function")vh(t)?(l=ua(t,l),n.tag=1,n=k0(null,n,t,l,a)):(n.tag=0,n=lf(null,n,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===ue){n.tag=11,n=S0(null,n,t,l,a);break e}else if(h===R){n.tag=14,n=N0(null,n,t,l,a);break e}}throw n=de(t)||t,Error(r(306,n,""))}}return n;case 0:return lf(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,h=ua(l,n.pendingProps),k0(t,n,l,h,a);case 3:e:{if(Ae(n,n.stateNode.containerInfo),t===null)throw Error(r(387));l=n.pendingProps;var m=n.memoizedState;h=m.element,Dh(t,n),go(n,l,null,a);var x=n.memoizedState;if(l=x.cache,Xi(n,Bt,l),l!==m.cache&&Ah(n,[Bt],a,!0),mo(),l=x.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=D0(t,n,l,a);break e}else if(l!==h){h=Xn(Error(r(424)),n),lo(h),n=D0(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=ts(t.firstChild),rn=n,st=!0,Qi=null,Jn=!0,a=jp(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(na(),l===h){n=pi(t,n,a);break e}ln(t,n,l,a)}n=n.child}return n;case 26:return wu(t,n),t===null?(a=Qy(n.type,null,n.pendingProps,null))?n.memoizedState=a:st||(a=n.type,t=n.pendingProps,l=Uu(X.current).createElement(a),l[Pt]=n,l[Zt]=t,on(l,a,t),Ut(l),n.stateNode=l):n.memoizedState=Qy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return te(n),t===null&&st&&(l=n.stateNode=Gy(n.type,n.pendingProps,X.current),rn=n,Jn=!0,h=bt,cr(n.type)?(Kf=h,bt=ts(l.firstChild)):bt=h),ln(t,n,n.pendingProps.children,a),wu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&st&&((h=l=bt)&&(l=U2(l,n.type,n.pendingProps,Jn),l!==null?(n.stateNode=l,rn=n,bt=ts(l.firstChild),Jn=!1,h=!0):h=!1),h||$i(n)),te(n),h=n.type,m=n.pendingProps,x=t!==null?t.memoizedProps:null,l=m.children,qf(h,m)?l=null:x!==null&&qf(h,x)&&(n.flags|=32),n.memoizedState!==null&&(h=zh(t,n,e2,null,null,a),Oo._currentValue=h),wu(t,n),ln(t,n,l,a),n.child;case 6:return t===null&&st&&((t=a=bt)&&(a=z2(a,n.pendingProps,Jn),a!==null?(n.stateNode=a,rn=n,bt=null,t=!0):t=!1),t||$i(n)),null;case 13:return M0(t,n,a);case 4:return Ae(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=oa(n,null,l,a):ln(t,n,l,a),n.child;case 11:return S0(t,n,n.type,n.pendingProps,a);case 7:return ln(t,n,n.pendingProps,a),n.child;case 8:return ln(t,n,n.pendingProps.children,a),n.child;case 12:return ln(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,Xi(n,n.type,l.value),ln(t,n,l.children,a),n.child;case 9:return h=n.type._context,l=n.pendingProps.children,ia(n),h=an(h),l=l(h),n.flags|=1,ln(t,n,l,a),n.child;case 14:return N0(t,n,n.type,n.pendingProps,a);case 15:return A0(t,n,n.type,n.pendingProps,a);case 19:return V0(t,n,a);case 31:return o2(t,n,a);case 22:return j0(t,n,a,n.pendingProps);case 24:return ia(n),l=an(Bt),t===null?(h=Rh(),h===null&&(h=yt,m=jh(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=a),h=m),n.memoizedState={parent:l,cache:h},kh(n),Xi(n,Bt,h)):((t.lanes&a)!==0&&(Dh(t,n),go(n,null,null,a),mo()),h=t.memoizedState,m=n.memoizedState,h.parent!==l?(h={parent:l,cache:l},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Xi(n,Bt,l)):(l=m.cache,Xi(n,Bt,l),l!==h.cache&&Ah(n,[Bt],a,!0))),ln(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function yi(t){t.flags|=4}function gf(t,n,a,l,h){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(uy())t.flags|=8192;else throw la=lu,Ih}else t.flags&=-16777217}function P0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Jy(n))if(uy())t.flags|=8192;else throw la=lu,Ih}function Tu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Rc():536870912,t.lanes|=n,rl|=n)}function _o(t,n){if(!st)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function _t(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function u2(t,n,a){var l=n.pendingProps;switch(wh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(n),null;case 1:return _t(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),fi(Bt),Re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ya(n)?yi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Th())),_t(n),null;case 26:var h=n.type,m=n.memoizedState;return t===null?(yi(n),m!==null?(_t(n),P0(n,m)):(_t(n),gf(n,h,null,l,a))):m?m!==t.memoizedState?(yi(n),_t(n),P0(n,m)):(_t(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&yi(n),_t(n),gf(n,h,t,l,a)),null;case 27:if(xe(n),a=X.current,h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&yi(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return _t(n),null}t=L.current,Ya(n)?yp(n):(t=Gy(h,l,a),n.stateNode=t,yi(n))}return _t(n),null;case 5:if(xe(n),h=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&yi(n);else{if(!l){if(n.stateNode===null)throw Error(r(166));return _t(n),null}if(m=L.current,Ya(n))yp(n);else{var x=Uu(X.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?x.createElement(h,{is:l.is}):x.createElement(h)}}m[Pt]=n,m[Zt]=l;e:for(x=n.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===n)break e;for(;x.sibling===null;){if(x.return===null||x.return===n)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}n.stateNode=m;e:switch(on(m,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&yi(n)}}return _t(n),gf(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&yi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(r(166));if(t=X.current,Ya(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,h=rn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Pt]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||My(t.nodeValue,a)),t||$i(n,!0)}else t=Uu(t).createTextNode(l),t[Pt]=n,n.stateNode=t}return _t(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=Ya(n),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Pt]=n}else na(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;_t(n),t=!1}else a=Th(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(Vn(n),n):(Vn(n),null);if((n.flags&128)!==0)throw Error(r(558))}return _t(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ya(n),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Pt]=n}else na(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;_t(n),h=!1}else h=Th(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Vn(n),n):(Vn(n),null)}return Vn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),Tu(n,n.updateQueue),_t(n),null);case 4:return Re(),t===null&&Lf(n.stateNode.containerInfo),_t(n),null;case 10:return fi(n.type),_t(n),null;case 19:if(P(It),l=n.memoizedState,l===null)return _t(n),null;if(h=(n.flags&128)!==0,m=l.rendering,m===null)if(h)_o(l,!1);else{if(jt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(m=du(t),m!==null){for(n.flags|=128,_o(l,!1),t=m.updateQueue,n.updateQueue=t,Tu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)hp(a,t),a=a.sibling;return J(It,It.current&1|2),st&&di(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&Vt()>Cu&&(n.flags|=128,h=!0,_o(l,!1),n.lanes=4194304)}else{if(!h)if(t=du(m),t!==null){if(n.flags|=128,h=!0,t=t.updateQueue,n.updateQueue=t,Tu(n,t),_o(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!st)return _t(n),null}else 2*Vt()-l.renderingStartTime>Cu&&a!==536870912&&(n.flags|=128,h=!0,_o(l,!1),n.lanes=4194304);l.isBackwards?(m.sibling=n.child,n.child=m):(t=l.last,t!==null?t.sibling=m:n.child=m,l.last=m)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Vt(),t.sibling=null,a=It.current,J(It,h?a&1|2:a&1),st&&di(n,l.treeForkCount),t):(_t(n),null);case 22:case 23:return Vn(n),Lh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(_t(n),n.subtreeFlags&6&&(n.flags|=8192)):_t(n),a=n.updateQueue,a!==null&&Tu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&P(ra),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),fi(Bt),_t(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function d2(t,n){switch(wh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return fi(Bt),Re(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return xe(n),null;case 31:if(n.memoizedState!==null){if(Vn(n),n.alternate===null)throw Error(r(340));na()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Vn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));na()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return P(It),null;case 4:return Re(),null;case 10:return fi(n.type),null;case 22:case 23:return Vn(n),Lh(),t!==null&&P(ra),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return fi(Bt),null;case 25:return null;default:return null}}function U0(t,n){switch(wh(n),n.tag){case 3:fi(Bt),Re();break;case 26:case 27:case 5:xe(n);break;case 4:Re();break;case 31:n.memoizedState!==null&&Vn(n);break;case 13:Vn(n);break;case 19:P(It);break;case 10:fi(n.type);break;case 22:case 23:Vn(n),Lh(),t!==null&&P(ra);break;case 24:fi(Bt)}}function wo(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var m=a.create,x=a.inst;l=m(),x.destroy=l}a=a.next}while(a!==h)}}catch(w){ht(n,n.return,w)}}function nr(t,n,a){try{var l=n.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var x=l.inst,w=x.destroy;if(w!==void 0){x.destroy=void 0,h=n;var D=a,F=w;try{F()}catch(se){ht(h,D,se)}}}l=l.next}while(l!==m)}}catch(se){ht(n,n.return,se)}}function z0(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Rp(n,a)}catch(l){ht(t,t.return,l)}}}function B0(t,n,a){a.props=ua(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ht(t,n,l)}}function Eo(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ht(t,n,h)}}function Gs(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ht(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ht(t,n,h)}else a.current=null}function q0(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ht(t,t.return,h)}}function pf(t,n,a){try{var l=t.stateNode;D2(l,t.type,a,n),l[Zt]=n}catch(h){ht(t,t.return,h)}}function H0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&cr(t.type)||t.tag===4}function yf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||H0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&cr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=hs));else if(l!==4&&(l===27&&cr(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(vf(t,n,a),t=t.sibling;t!==null;)vf(t,n,a),t=t.sibling}function Su(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&cr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Su(t,n,a),t=t.sibling;t!==null;)Su(t,n,a),t=t.sibling}function F0(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);on(n,l,a),n[Pt]=t,n[Zt]=a}catch(m){ht(t,t.return,m)}}var vi=!1,Ft=!1,xf=!1,G0=typeof WeakSet=="function"?WeakSet:Set,en=null;function h2(t,n){if(t=t.containerInfo,zf=Yu,t=sp(t),dh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var x=0,w=-1,D=-1,F=0,se=0,le=t,G=null;t:for(;;){for(var $;le!==a||h!==0&&le.nodeType!==3||(w=x+h),le!==m||l!==0&&le.nodeType!==3||(D=x+l),le.nodeType===3&&(x+=le.nodeValue.length),($=le.firstChild)!==null;)G=le,le=$;for(;;){if(le===t)break t;if(G===a&&++F===h&&(w=x),G===m&&++se===l&&(D=x),($=le.nextSibling)!==null)break;le=G,G=le.parentNode}le=$}a=w===-1||D===-1?null:{start:w,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bf={focusedElem:t,selectionRange:a},Yu=!1,en=n;en!==null;)if(n=en,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,en=t;else for(;en!==null;){switch(n=en,m=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=n,h=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Ne=ua(a.type,h);t=l.getSnapshotBeforeUpdate(Ne,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Le){ht(a,a.return,Le)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Ff(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ff(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,en=t;break}en=n.return}}function Y0(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:bi(t,a),l&4&&wo(5,a);break;case 1:if(bi(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(x){ht(a,a.return,x)}else{var h=ua(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(x){ht(a,a.return,x)}}l&64&&z0(a),l&512&&Eo(a,a.return);break;case 3:if(bi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Rp(t,n)}catch(x){ht(a,a.return,x)}}break;case 27:n===null&&l&4&&F0(a);case 26:case 5:bi(t,a),n===null&&l&4&&q0(a),l&512&&Eo(a,a.return);break;case 12:bi(t,a);break;case 31:bi(t,a),l&4&&$0(t,a);break;case 13:bi(t,a),l&4&&X0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=_2.bind(null,a),B2(t,a))));break;case 22:if(l=a.memoizedState!==null||vi,!l){n=n!==null&&n.memoizedState!==null||Ft,h=vi;var m=Ft;vi=l,(Ft=n)&&!m?_i(t,a,(a.subtreeFlags&8772)!==0):bi(t,a),vi=h,Ft=m}break;case 30:break;default:bi(t,a)}}function K0(t){var n=t.alternate;n!==null&&(t.alternate=null,K0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ca(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var St=null,Tn=!1;function xi(t,n,a){for(a=a.child;a!==null;)Q0(t,n,a),a=a.sibling}function Q0(t,n,a){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(os,a)}catch{}switch(a.tag){case 26:Ft||Gs(a,n),xi(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ft||Gs(a,n);var l=St,h=Tn;cr(a.type)&&(St=a.stateNode,Tn=!1),xi(t,n,a),ko(a.stateNode),St=l,Tn=h;break;case 5:Ft||Gs(a,n);case 6:if(l=St,h=Tn,St=null,xi(t,n,a),St=l,Tn=h,St!==null)if(Tn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(a.stateNode)}catch(m){ht(a,n,m)}else try{St.removeChild(a.stateNode)}catch(m){ht(a,n,m)}break;case 18:St!==null&&(Tn?(t=St,zy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),fl(t)):zy(St,a.stateNode));break;case 4:l=St,h=Tn,St=a.stateNode.containerInfo,Tn=!0,xi(t,n,a),St=l,Tn=h;break;case 0:case 11:case 14:case 15:nr(2,a,n),Ft||nr(4,a,n),xi(t,n,a);break;case 1:Ft||(Gs(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&B0(a,n,l)),xi(t,n,a);break;case 21:xi(t,n,a);break;case 22:Ft=(l=Ft)||a.memoizedState!==null,xi(t,n,a),Ft=l;break;default:xi(t,n,a)}}function $0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{fl(t)}catch(a){ht(n,n.return,a)}}}function X0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{fl(t)}catch(a){ht(n,n.return,a)}}function f2(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new G0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new G0),n;default:throw Error(r(435,t.tag))}}function Nu(t,n){var a=f2(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var h=w2.bind(null,t,l);l.then(h,h)}})}function Sn(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],m=t,x=n,w=x;e:for(;w!==null;){switch(w.tag){case 27:if(cr(w.type)){St=w.stateNode,Tn=!1;break e}break;case 5:St=w.stateNode,Tn=!1;break e;case 3:case 4:St=w.stateNode.containerInfo,Tn=!0;break e}w=w.return}if(St===null)throw Error(r(160));Q0(m,x,h),St=null,Tn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)W0(n,t),n=n.sibling}var vs=null;function W0(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Sn(n,t),Nn(t),l&4&&(nr(3,t,t.return),wo(3,t),nr(5,t,t.return));break;case 1:Sn(n,t),Nn(t),l&512&&(Ft||a===null||Gs(a,a.return)),l&64&&vi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=vs;if(Sn(n,t),Nn(t),l&512&&(Ft||a===null||Gs(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Is]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),on(m,l,a),m[Pt]=t,Ut(m),l=m;break e;case"link":var x=Wy("link","href",h).get(l+(a.href||""));if(x){for(var w=0;w<x.length;w++)if(m=x[w],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(w,1);break t}}m=h.createElement(l),on(m,l,a),h.head.appendChild(m);break;case"meta":if(x=Wy("meta","content",h).get(l+(a.content||""))){for(w=0;w<x.length;w++)if(m=x[w],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(w,1);break t}}m=h.createElement(l),on(m,l,a),h.head.appendChild(m);break;default:throw Error(r(468,l))}m[Pt]=t,Ut(m),l=m}t.stateNode=l}else Zy(h,t.type,t.stateNode);else t.stateNode=Xy(h,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?Zy(h,t.type,t.stateNode):Xy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&pf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Sn(n,t),Nn(t),l&512&&(Ft||a===null||Gs(a,a.return)),a!==null&&l&4&&pf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Sn(n,t),Nn(t),l&512&&(Ft||a===null||Gs(a,a.return)),t.flags&32){h=t.stateNode;try{En(h,"")}catch(Ne){ht(t,t.return,Ne)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,pf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(xf=!0);break;case 6:if(Sn(n,t),Nn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Ne){ht(t,t.return,Ne)}}break;case 3:if(qu=null,h=vs,vs=zu(n.containerInfo),Sn(n,t),vs=h,Nn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{fl(n.containerInfo)}catch(Ne){ht(t,t.return,Ne)}xf&&(xf=!1,Z0(t));break;case 4:l=vs,vs=zu(t.stateNode.containerInfo),Sn(n,t),Nn(t),vs=l;break;case 12:Sn(n,t),Nn(t);break;case 31:Sn(n,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nu(t,l)));break;case 13:Sn(n,t),Nn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ju=Vt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nu(t,l)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,F=vi,se=Ft;if(vi=F||h,Ft=se||D,Sn(n,t),Ft=se,vi=F,Nn(t),l&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||D||vi||Ft||da(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){D=a=n;try{if(m=D.stateNode,h)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{w=D.stateNode;var le=D.memoizedProps.style,G=le!=null&&le.hasOwnProperty("display")?le.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Ne){ht(D,D.return,Ne)}}}else if(n.tag===6){if(a===null){D=n;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(Ne){ht(D,D.return,Ne)}}}else if(n.tag===18){if(a===null){D=n;try{var $=D.stateNode;h?By($,!0):By(D.stateNode,!1)}catch(Ne){ht(D,D.return,Ne)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Nu(t,a))));break;case 19:Sn(n,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Nu(t,l)));break;case 30:break;case 21:break;default:Sn(n,t),Nn(t)}}function Nn(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(H0(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,m=yf(t);Su(t,m,h);break;case 5:var x=a.stateNode;a.flags&32&&(En(x,""),a.flags&=-33);var w=yf(t);Su(t,w,x);break;case 3:case 4:var D=a.stateNode.containerInfo,F=yf(t);vf(t,F,D);break;default:throw Error(r(161))}}catch(se){ht(t,t.return,se)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Z0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Z0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function bi(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Y0(t,n.alternate,n),n=n.sibling}function da(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:nr(4,n,n.return),da(n);break;case 1:Gs(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&B0(n,n.return,a),da(n);break;case 27:ko(n.stateNode);case 26:case 5:Gs(n,n.return),da(n);break;case 22:n.memoizedState===null&&da(n);break;case 30:da(n);break;default:da(n)}t=t.sibling}}function _i(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,h=t,m=n,x=m.flags;switch(m.tag){case 0:case 11:case 15:_i(h,m,a),wo(4,m);break;case 1:if(_i(h,m,a),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){ht(l,l.return,F)}if(l=m,h=l.updateQueue,h!==null){var w=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)Cp(D[h],w)}catch(F){ht(l,l.return,F)}}a&&x&64&&z0(m),Eo(m,m.return);break;case 27:F0(m);case 26:case 5:_i(h,m,a),a&&l===null&&x&4&&q0(m),Eo(m,m.return);break;case 12:_i(h,m,a);break;case 31:_i(h,m,a),a&&x&4&&$0(h,m);break;case 13:_i(h,m,a),a&&x&4&&X0(h,m);break;case 22:m.memoizedState===null&&_i(h,m,a),Eo(m,m.return);break;case 30:break;default:_i(h,m,a)}n=n.sibling}}function bf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&oo(a))}function _f(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oo(t))}function xs(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)J0(t,n,a,l),n=n.sibling}function J0(t,n,a,l){var h=n.flags;switch(n.tag){case 0:case 11:case 15:xs(t,n,a,l),h&2048&&wo(9,n);break;case 1:xs(t,n,a,l);break;case 3:xs(t,n,a,l),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oo(t)));break;case 12:if(h&2048){xs(t,n,a,l),t=n.stateNode;try{var m=n.memoizedProps,x=m.id,w=m.onPostCommit;typeof w=="function"&&w(x,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ht(n,n.return,D)}}else xs(t,n,a,l);break;case 31:xs(t,n,a,l);break;case 13:xs(t,n,a,l);break;case 23:break;case 22:m=n.stateNode,x=n.alternate,n.memoizedState!==null?m._visibility&2?xs(t,n,a,l):To(t,n):m._visibility&2?xs(t,n,a,l):(m._visibility|=2,nl(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),h&2048&&bf(x,n);break;case 24:xs(t,n,a,l),h&2048&&_f(n.alternate,n);break;default:xs(t,n,a,l)}}function nl(t,n,a,l,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=t,x=n,w=a,D=l,F=x.flags;switch(x.tag){case 0:case 11:case 15:nl(m,x,w,D,h),wo(8,x);break;case 23:break;case 22:var se=x.stateNode;x.memoizedState!==null?se._visibility&2?nl(m,x,w,D,h):To(m,x):(se._visibility|=2,nl(m,x,w,D,h)),h&&F&2048&&bf(x.alternate,x);break;case 24:nl(m,x,w,D,h),h&&F&2048&&_f(x.alternate,x);break;default:nl(m,x,w,D,h)}n=n.sibling}}function To(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,h=l.flags;switch(l.tag){case 22:To(a,l),h&2048&&bf(l.alternate,l);break;case 24:To(a,l),h&2048&&_f(l.alternate,l);break;default:To(a,l)}n=n.sibling}}var So=8192;function sl(t,n,a){if(t.subtreeFlags&So)for(t=t.child;t!==null;)ey(t,n,a),t=t.sibling}function ey(t,n,a){switch(t.tag){case 26:sl(t,n,a),t.flags&So&&t.memoizedState!==null&&J2(a,vs,t.memoizedState,t.memoizedProps);break;case 5:sl(t,n,a);break;case 3:case 4:var l=vs;vs=zu(t.stateNode.containerInfo),sl(t,n,a),vs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=So,So=16777216,sl(t,n,a),So=l):sl(t,n,a));break;default:sl(t,n,a)}}function ty(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function No(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];en=l,sy(l,t)}ty(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ny(t),t=t.sibling}function ny(t){switch(t.tag){case 0:case 11:case 15:No(t),t.flags&2048&&nr(9,t,t.return);break;case 3:No(t);break;case 12:No(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Au(t)):No(t);break;default:No(t)}}function Au(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];en=l,sy(l,t)}ty(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:nr(8,n,n.return),Au(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Au(n));break;default:Au(n)}t=t.sibling}}function sy(t,n){for(;en!==null;){var a=en;switch(a.tag){case 0:case 11:case 15:nr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:oo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,en=l;else e:for(a=t;en!==null;){l=en;var h=l.sibling,m=l.return;if(K0(l),l===a){en=null;break e}if(h!==null){h.return=m,en=h;break e}en=m}}}var m2={getCacheForType:function(t){var n=an(Bt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return an(Bt).controller.signal}},g2=typeof WeakMap=="function"?WeakMap:Map,ot=0,yt=null,Xe=null,Ze=0,dt=0,Ln=null,sr=!1,il=!1,wf=!1,wi=0,jt=0,ir=0,ha=0,Ef=0,Pn=0,rl=0,Ao=null,An=null,Tf=!1,ju=0,iy=0,Cu=1/0,Ru=null,rr=null,Xt=0,ar=null,al=null,Ei=0,Sf=0,Nf=null,ry=null,jo=0,Af=null;function Un(){return(ot&2)!==0&&Ze!==0?Ze&-Ze:Y.T!==null?Df():Ic()}function ay(){if(Pn===0)if((Ze&536870912)===0||st){var t=Ur;Ur<<=1,(Ur&3932160)===0&&(Ur=262144),Pn=t}else Pn=536870912;return t=On.current,t!==null&&(t.flags|=32),Pn}function jn(t,n,a){(t===yt&&(dt===2||dt===9)||t.cancelPendingCommit!==null)&&(ll(t,0),lr(t,Ze,Pn,!1)),zr(t,a),((ot&2)===0||t!==yt)&&(t===yt&&((ot&2)===0&&(ha|=a),jt===4&&lr(t,Ze,Pn,!1)),Ys(t))}function ly(t,n,a){if((ot&6)!==0)throw Error(r(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||cs(t,n),h=l?v2(t,n):Cf(t,n,!0),m=l;do{if(h===0){il&&!l&&lr(t,n,0,!1);break}else{if(a=t.current.alternate,m&&!p2(a)){h=Cf(t,n,!1),m=!1;continue}if(h===2){if(m=n,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;e:{var w=t;h=Ao;var D=w.current.memoizedState.isDehydrated;if(D&&(ll(w,x).flags|=256),x=Cf(w,x,!1),x!==2){if(wf&&!D){w.errorRecoveryDisabledLanes|=m,ha|=m,h=4;break e}m=An,An=h,m!==null&&(An===null?An=m:An.push.apply(An,m))}h=x}if(m=!1,h!==2)continue}}if(h===1){ll(t,0),lr(t,n,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:lr(l,n,Pn,!sr);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=ju+300-Vt(),10<h)){if(lr(l,n,Pn,!sr),js(l,0,!0)!==0)break e;Ei=n,l.timeoutHandle=Py(oy.bind(null,l,a,An,Ru,Tf,n,Pn,ha,rl,sr,m,"Throttled",-0,0),h);break e}oy(l,a,An,Ru,Tf,n,Pn,ha,rl,sr,m,null,-0,0)}}break}while(!0);Ys(t)}function oy(t,n,a,l,h,m,x,w,D,F,se,le,G,$){if(t.timeoutHandle=-1,le=n.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hs},ey(n,m,le);var Ne=(m&62914560)===m?ju-Vt():(m&4194048)===m?iy-Vt():0;if(Ne=ew(le,Ne),Ne!==null){Ei=m,t.cancelPendingCommit=Ne(py.bind(null,t,n,m,a,l,h,x,w,D,se,le,null,G,$)),lr(t,m,x,!F);return}}py(t,n,m,a,l,h,x,w,D)}function p2(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],m=h.getSnapshot;h=h.value;try{if(!Dn(m(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function lr(t,n,a,l){n&=~Ef,n&=~ha,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var h=n;0<h;){var m=31-Ct(h),x=1<<m;l[m]=-1,h&=~x}a!==0&&Br(t,a,n)}function Iu(){return(ot&6)===0?(Co(0),!1):!0}function jf(){if(Xe!==null){if(dt===0)var t=Xe.return;else t=Xe,hi=sa=null,Hh(t),Wa=null,uo=0,t=Xe;for(;t!==null;)U0(t.alternate,t),t=t.return;Xe=null}}function ll(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,V2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ei=0,jf(),yt=t,Xe=a=ui(t.current,null),Ze=n,dt=0,Ln=null,sr=!1,il=cs(t,n),wf=!1,rl=Pn=Ef=ha=ir=jt=0,An=Ao=null,Tf=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var h=31-Ct(l),m=1<<h;n|=t[h],l&=~m}return wi=n,Zc(),a}function cy(t,n){Ke=null,Y.H=xo,n===Xa||n===au?(n=Sp(),dt=3):n===Ih?(n=Sp(),dt=4):dt=n===af?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ln=n,Xe===null&&(jt=1,bu(t,Xn(n,t.current)))}function uy(){var t=On.current;return t===null?!0:(Ze&4194048)===Ze?es===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?t===es:!1}function dy(){var t=Y.H;return Y.H=xo,t===null?xo:t}function hy(){var t=Y.A;return Y.A=m2,t}function ku(){jt=4,sr||(Ze&4194048)!==Ze&&On.current!==null||(il=!0),(ir&134217727)===0&&(ha&134217727)===0||yt===null||lr(yt,Ze,Pn,!1)}function Cf(t,n,a){var l=ot;ot|=2;var h=dy(),m=hy();(yt!==t||Ze!==n)&&(Ru=null,ll(t,n)),n=!1;var x=jt;e:do try{if(dt!==0&&Xe!==null){var w=Xe,D=Ln;switch(dt){case 8:jf(),x=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(n=!0);var F=dt;if(dt=0,Ln=null,ol(t,w,D,F),a&&il){x=0;break e}break;default:F=dt,dt=0,Ln=null,ol(t,w,D,F)}}y2(),x=jt;break}catch(se){cy(t,se)}while(!0);return n&&t.shellSuspendCounter++,hi=sa=null,ot=l,Y.H=h,Y.A=m,Xe===null&&(yt=null,Ze=0,Zc()),x}function y2(){for(;Xe!==null;)fy(Xe)}function v2(t,n){var a=ot;ot|=2;var l=dy(),h=hy();yt!==t||Ze!==n?(Ru=null,Cu=Vt()+500,ll(t,n)):il=cs(t,n);e:do try{if(dt!==0&&Xe!==null){n=Xe;var m=Ln;t:switch(dt){case 1:dt=0,Ln=null,ol(t,n,m,1);break;case 2:case 9:if(Ep(m)){dt=0,Ln=null,my(n);break}n=function(){dt!==2&&dt!==9||yt!==t||(dt=7),Ys(t)},m.then(n,n);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Ep(m)?(dt=0,Ln=null,my(n)):(dt=0,Ln=null,ol(t,n,m,7));break;case 5:var x=null;switch(Xe.tag){case 26:x=Xe.memoizedState;case 5:case 27:var w=Xe;if(x?Jy(x):w.stateNode.complete){dt=0,Ln=null;var D=w.sibling;if(D!==null)Xe=D;else{var F=w.return;F!==null?(Xe=F,Du(F)):Xe=null}break t}}dt=0,Ln=null,ol(t,n,m,5);break;case 6:dt=0,Ln=null,ol(t,n,m,6);break;case 8:jf(),jt=6;break e;default:throw Error(r(462))}}x2();break}catch(se){cy(t,se)}while(!0);return hi=sa=null,Y.H=l,Y.A=h,ot=a,Xe!==null?0:(yt=null,Ze=0,Zc(),jt)}function x2(){for(;Xe!==null&&!xt();)fy(Xe)}function fy(t){var n=L0(t.alternate,t,wi);t.memoizedProps=t.pendingProps,n===null?Du(t):Xe=n}function my(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=I0(a,n,n.pendingProps,n.type,void 0,Ze);break;case 11:n=I0(a,n,n.pendingProps,n.type.render,n.ref,Ze);break;case 5:Hh(n);default:U0(a,n),n=Xe=hp(n,wi),n=L0(a,n,wi)}t.memoizedProps=t.pendingProps,n===null?Du(t):Xe=n}function ol(t,n,a,l){hi=sa=null,Hh(n),Wa=null,uo=0;var h=n.return;try{if(l2(t,h,n,a,Ze)){jt=1,bu(t,Xn(a,t.current)),Xe=null;return}}catch(m){if(h!==null)throw Xe=h,m;jt=1,bu(t,Xn(a,t.current)),Xe=null;return}n.flags&32768?(st||l===1?t=!0:il||(Ze&536870912)!==0?t=!1:(sr=t=!0,(l===2||l===9||l===3||l===6)&&(l=On.current,l!==null&&l.tag===13&&(l.flags|=16384))),gy(n,t)):Du(n)}function Du(t){var n=t;do{if((n.flags&32768)!==0){gy(n,sr);return}t=n.return;var a=u2(n.alternate,n,wi);if(a!==null){Xe=a;return}if(n=n.sibling,n!==null){Xe=n;return}Xe=n=t}while(n!==null);jt===0&&(jt=5)}function gy(t,n){do{var a=d2(t.alternate,t);if(a!==null){a.flags&=32767,Xe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Xe=t;return}Xe=t=a}while(t!==null);jt=6,Xe=null}function py(t,n,a,l,h,m,x,w,D){t.cancelPendingCommit=null;do Mu();while(Xt!==0);if((ot&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(m=n.lanes|n.childLanes,m|=ph,lh(t,a,m,x,w,D),t===yt&&(Xe=yt=null,Ze=0),al=n,ar=t,Ei=a,Sf=m,Nf=h,ry=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,E2(Ss,function(){return _y(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,h=he.p,he.p=2,x=ot,ot|=4;try{h2(t,n,a)}finally{ot=x,he.p=h,Y.T=l}}Xt=1,yy(),vy(),xy()}}function yy(){if(Xt===1){Xt=0;var t=ar,n=al,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=he.p;he.p=2;var h=ot;ot|=4;try{W0(n,t);var m=Bf,x=sp(t.containerInfo),w=m.focusedElem,D=m.selectionRange;if(x!==w&&w&&w.ownerDocument&&np(w.ownerDocument.documentElement,w)){if(D!==null&&dh(w)){var F=D.start,se=D.end;if(se===void 0&&(se=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(se,w.value.length);else{var le=w.ownerDocument||document,G=le&&le.defaultView||window;if(G.getSelection){var $=G.getSelection(),Ne=w.textContent.length,Le=Math.min(D.start,Ne),pt=D.end===void 0?Le:Math.min(D.end,Ne);!$.extend&&Le>pt&&(x=pt,pt=Le,Le=x);var U=tp(w,Le),O=tp(w,pt);if(U&&O&&($.rangeCount!==1||$.anchorNode!==U.node||$.anchorOffset!==U.offset||$.focusNode!==O.node||$.focusOffset!==O.offset)){var H=le.createRange();H.setStart(U.node,U.offset),$.removeAllRanges(),Le>pt?($.addRange(H),$.extend(O.node,O.offset)):(H.setEnd(O.node,O.offset),$.addRange(H))}}}}for(le=[],$=w;$=$.parentNode;)$.nodeType===1&&le.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<le.length;w++){var re=le[w];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Yu=!!zf,Bf=zf=null}finally{ot=h,he.p=l,Y.T=a}}t.current=n,Xt=2}}function vy(){if(Xt===2){Xt=0;var t=ar,n=al,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=he.p;he.p=2;var h=ot;ot|=4;try{Y0(t,n.alternate,n)}finally{ot=h,he.p=l,Y.T=a}}Xt=3}}function xy(){if(Xt===4||Xt===3){Xt=0,si();var t=ar,n=al,a=Ei,l=ry;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Xt=5:(Xt=0,al=ar=null,by(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(rr=null),ai(a),n=n.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(os,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=Y.T,h=he.p,he.p=2,Y.T=null;try{for(var m=t.onRecoverableError,x=0;x<l.length;x++){var w=l[x];m(w.value,{componentStack:w.stack})}}finally{Y.T=n,he.p=h}}(Ei&3)!==0&&Mu(),Ys(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Af?jo++:(jo=0,Af=t):jo=0,Co(0)}}function by(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,oo(n)))}function Mu(){return yy(),vy(),xy(),_y()}function _y(){if(Xt!==5)return!1;var t=ar,n=Sf;Sf=0;var a=ai(Ei),l=Y.T,h=he.p;try{he.p=32>a?32:a,Y.T=null,a=Nf,Nf=null;var m=ar,x=Ei;if(Xt=0,al=ar=null,Ei=0,(ot&6)!==0)throw Error(r(331));var w=ot;if(ot|=4,ny(m.current),J0(m,m.current,x,a),ot=w,Co(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(os,m)}catch{}return!0}finally{he.p=h,Y.T=l,by(t,n)}}function wy(t,n,a){n=Xn(a,n),n=rf(t.stateNode,n,2),t=Ji(t,n,2),t!==null&&(zr(t,2),Ys(t))}function ht(t,n,a){if(t.tag===3)wy(t,t,a);else for(;n!==null;){if(n.tag===3){wy(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(rr===null||!rr.has(l))){t=Xn(a,t),a=E0(2),l=Ji(n,a,2),l!==null&&(T0(a,l,n,t),zr(l,2),Ys(l));break}}n=n.return}}function Rf(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new g2;var h=new Set;l.set(n,h)}else h=l.get(n),h===void 0&&(h=new Set,l.set(n,h));h.has(a)||(wf=!0,h.add(a),t=b2.bind(null,t,n,a),n.then(t,t))}function b2(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,yt===t&&(Ze&a)===a&&(jt===4||jt===3&&(Ze&62914560)===Ze&&300>Vt()-ju?(ot&2)===0&&ll(t,0):Ef|=a,rl===Ze&&(rl=0)),Ys(t)}function Ey(t,n){n===0&&(n=Rc()),t=ea(t,n),t!==null&&(zr(t,n),Ys(t))}function _2(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),Ey(t,a)}function w2(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(n),Ey(t,a)}function E2(t,n){return me(t,n)}var Ou=null,cl=null,If=!1,Vu=!1,kf=!1,or=0;function Ys(t){t!==cl&&t.next===null&&(cl===null?Ou=cl=t:cl=cl.next=t),Vu=!0,If||(If=!0,S2())}function Co(t,n){if(!kf&&Vu){kf=!0;do for(var a=!1,l=Ou;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var x=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-Ct(42|t)+1)-1,m&=h&~(x&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Ay(l,m))}else m=Ze,m=js(l,l===yt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||cs(l,m)||(a=!0,Ay(l,m));l=l.next}while(a);kf=!1}}function T2(){Ty()}function Ty(){Vu=If=!1;var t=0;or!==0&&O2()&&(t=or);for(var n=Vt(),a=null,l=Ou;l!==null;){var h=l.next,m=Sy(l,n);m===0?(l.next=null,a===null?Ou=h:a.next=h,h===null&&(cl=a)):(a=l,(t!==0||(m&3)!==0)&&(Vu=!0)),l=h}Xt!==0&&Xt!==5||Co(t),or!==0&&(or=0)}function Sy(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-Ct(m),w=1<<x,D=h[x];D===-1?((w&a)===0||(w&l)!==0)&&(h[x]=ah(w,n)):D<=n&&(t.expiredLanes|=w),m&=~w}if(n=yt,a=Ze,a=js(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(dt===2||dt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ie(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||cs(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&Ie(l),ai(a)){case 2:case 8:a=Li;break;case 32:a=Ss;break;case 268435456:a=Na;break;default:a=Ss}return l=Ny.bind(null,t),a=me(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&Ie(l),t.callbackPriority=2,t.callbackNode=null,2}function Ny(t,n){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Mu()&&t.callbackNode!==a)return null;var l=Ze;return l=js(t,t===yt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ly(t,l,n),Sy(t,Vt()),t.callbackNode!=null&&t.callbackNode===a?Ny.bind(null,t):null)}function Ay(t,n){if(Mu())return null;ly(t,n,!0)}function S2(){L2(function(){(ot&6)!==0?me(ri,T2):Ty()})}function Df(){if(or===0){var t=Qa;t===0&&(t=Ns,Ns<<=1,(Ns&261888)===0&&(Ns=256)),or=t}return or}function jy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Da(""+t)}function Cy(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function N2(t,n,a,l,h){if(n==="submit"&&a&&a.stateNode===h){var m=jy((h[Zt]||null).action),x=l.submitter;x&&(n=(n=x[Zt]||null)?jy(n.formAction):x.getAttribute("formAction"),n!==null&&(m=n,x=null));var w=new Us("action","action",null,l,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(or!==0){var D=x?Cy(h,x):new FormData(h);Zh(a,{pending:!0,data:D,method:h.method,action:m},null,D)}}else typeof m=="function"&&(w.preventDefault(),D=x?Cy(h,x):new FormData(h),Zh(a,{pending:!0,data:D,method:h.method,action:m},m,D))},currentTarget:h}]})}}for(var Mf=0;Mf<gh.length;Mf++){var Of=gh[Mf],A2=Of.toLowerCase(),j2=Of[0].toUpperCase()+Of.slice(1);ys(A2,"on"+j2)}ys(ap,"onAnimationEnd"),ys(lp,"onAnimationIteration"),ys(op,"onAnimationStart"),ys("dblclick","onDoubleClick"),ys("focusin","onFocus"),ys("focusout","onBlur"),ys(F1,"onTransitionRun"),ys(G1,"onTransitionStart"),ys(Y1,"onTransitionCancel"),ys(cp,"onTransitionEnd"),Os("onMouseEnter",["mouseout","mouseover"]),Os("onMouseLeave",["mouseout","mouseover"]),Os("onPointerEnter",["pointerout","pointerover"]),Os("onPointerLeave",["pointerout","pointerover"]),Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ro));function Ry(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var m=void 0;if(n)for(var x=l.length-1;0<=x;x--){var w=l[x],D=w.instance,F=w.currentTarget;if(w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=F;try{m(h)}catch(se){Wc(se)}h.currentTarget=null,m=D}else for(x=0;x<l.length;x++){if(w=l[x],D=w.instance,F=w.currentTarget,w=w.listener,D!==m&&h.isPropagationStopped())break e;m=w,h.currentTarget=F;try{m(h)}catch(se){Wc(se)}h.currentTarget=null,m=D}}}}function We(t,n){var a=n[ja];a===void 0&&(a=n[ja]=new Set);var l=t+"__bubble";a.has(l)||(Iy(n,t,2,!1),a.add(l))}function Vf(t,n,a){var l=0;n&&(l|=4),Iy(a,t,l,n)}var Lu="_reactListening"+Math.random().toString(36).slice(2);function Lf(t){if(!t[Lu]){t[Lu]=!0,Bl.forEach(function(a){a!=="selectionchange"&&(C2.has(a)||Vf(a,!1,t),Vf(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Lu]||(n[Lu]=!0,Vf("selectionchange",!1,n))}}function Iy(t,n,a,l){switch(av(n)){case 2:var h=sw;break;case 8:h=iw;break;default:h=Zf}a=h.bind(null,n,a,t),h=void 0,!Yr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Pf(t,n,a,l,h){var m=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var w=l.stateNode.containerInfo;if(w===h)break;if(x===4)for(x=l.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;w!==null;){if(x=ks(w),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){l=m=x;continue e}w=w.parentNode}}l=l.return}Hi(function(){var F=m,se=Yn(a),le=[];e:{var G=up.get(t);if(G!==void 0){var $=Us,Ne=t;switch(t){case"keypress":if(Qr(a)===0)break e;case"keydown":case"keyup":$=Qc;break;case"focusin":Ne="focus",$=Xr;break;case"focusout":Ne="blur",$=Xr;break;case"beforeblur":case"afterblur":$=Xr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=g;break;case ap:case lp:case op:$=Bc;break;case cp:$=N;break;case"scroll":case"scrollend":$=Jl;break;case"wheel":$=Q;break;case"copy":case"cut":case"paste":$=qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ci;break;case"toggle":case"beforetoggle":$=Ye}var Le=(n&4)!==0,pt=!Le&&(t==="scroll"||t==="scrollend"),U=Le?G!==null?G+"Capture":null:G;Le=[];for(var O=F,H;O!==null;){var re=O;if(H=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||H===null||U===null||(re=fs(O,U),re!=null&&Le.push(Io(O,re,H))),pt)break;O=O.return}0<Le.length&&(G=new $(G,Ne,null,a,se),le.push({event:G,listeners:Le}))}}if((n&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",G&&a!==Xl&&(Ne=a.relatedTarget||a.fromElement)&&(ks(Ne)||Ne[Rs]))break e;if(($||G)&&(G=se.window===se?se:(G=se.ownerDocument)?G.defaultView||G.parentWindow:window,$?(Ne=a.relatedTarget||a.toElement,$=F,Ne=Ne?ks(Ne):null,Ne!==null&&(pt=d(Ne),Le=Ne.tag,Ne!==pt||Le!==5&&Le!==27&&Le!==6)&&(Ne=null)):($=null,Ne=F),$!==Ne)){if(Le=eo,re="onMouseLeave",U="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(Le=ci,re="onPointerLeave",U="onPointerEnter",O="pointer"),pt=$==null?G:In($),H=Ne==null?G:In(Ne),G=new Le(re,O+"leave",$,a,se),G.target=pt,G.relatedTarget=H,re=null,ks(se)===F&&(Le=new Le(U,O+"enter",Ne,a,se),Le.target=H,Le.relatedTarget=pt,re=Le),pt=re,$&&Ne)t:{for(Le=R2,U=$,O=Ne,H=0,re=U;re;re=Le(re))H++;re=0;for(var ke=O;ke;ke=Le(ke))re++;for(;0<H-re;)U=Le(U),H--;for(;0<re-H;)O=Le(O),re--;for(;H--;){if(U===O||O!==null&&U===O.alternate){Le=U;break t}U=Le(U),O=Le(O)}Le=null}else Le=null;$!==null&&ky(le,G,$,Le,!1),Ne!==null&&pt!==null&&ky(le,pt,Ne,Le,!0)}}e:{if(G=F?In(F):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var rt=$g;else if(Kg(G))if(Xg)rt=B1;else{rt=U1;var je=P1}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&ka(F.elementType)&&(rt=$g):rt=z1;if(rt&&(rt=rt(t,F))){Qg(le,rt,a,se);break e}je&&je(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Kl(G,"number",G.value)}switch(je=F?In(F):window,t){case"focusin":(Kg(je)||je.contentEditable==="true")&&(za=je,hh=F,ro=null);break;case"focusout":ro=hh=za=null;break;case"mousedown":fh=!0;break;case"contextmenu":case"mouseup":case"dragend":fh=!1,ip(le,a,se);break;case"selectionchange":if(H1)break;case"keydown":case"keyup":ip(le,a,se)}var Qe;if(lt)e:{switch(t){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else Ua?Wr(t,a)&&(Je="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Je="onCompositionStart");Je&&(qs&&a.locale!=="ko"&&(Ua||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&Ua&&(Qe=Zl()):(Ps=se,Wl="value"in Ps?Ps.value:Ps.textContent,Ua=!0)),je=Pu(F,Je),0<je.length&&(Je=new Bs(Je,t,null,a,se),le.push({event:Je,listeners:je}),Qe?Je.data=Qe:(Qe=Pa(a),Qe!==null&&(Je.data=Qe)))),(Qe=Qn?M1(t,a):O1(t,a))&&(Je=Pu(F,"onBeforeInput"),0<Je.length&&(je=new Bs("onBeforeInput","beforeinput",null,a,se),le.push({event:je,listeners:Je}),je.data=Qe)),N2(le,t,F,a,se)}Ry(le,n)})}function Io(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Pu(t,n){for(var a=n+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=fs(t,a),h!=null&&l.unshift(Io(t,h,m)),h=fs(t,n),h!=null&&l.push(Io(t,h,m))),t.tag===3)return l;t=t.return}return[]}function R2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ky(t,n,a,l,h){for(var m=n._reactName,x=[];a!==null&&a!==l;){var w=a,D=w.alternate,F=w.stateNode;if(w=w.tag,D!==null&&D===l)break;w!==5&&w!==26&&w!==27||F===null||(D=F,h?(F=fs(a,m),F!=null&&x.unshift(Io(a,F,D))):h||(F=fs(a,m),F!=null&&x.push(Io(a,F,D)))),a=a.return}x.length!==0&&t.push({event:n,listeners:x})}var I2=/\r\n?/g,k2=/\u0000|\uFFFD/g;function Dy(t){return(typeof t=="string"?t:""+t).replace(I2,`
`).replace(k2,"")}function My(t,n){return n=Dy(n),Dy(t)===n}function gt(t,n,a,l,h,m){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||En(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&En(t,""+l);break;case"className":kn(t,"class",l);break;case"tabIndex":kn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(t,a,l);break;case"style":$l(t,l,m);break;case"data":if(n!=="object"){kn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Da(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&gt(t,n,"name",h.name,h,null),gt(t,n,"formEncType",h.formEncType,h,null),gt(t,n,"formMethod",h.formMethod,h,null),gt(t,n,"formTarget",h.formTarget,h,null)):(gt(t,n,"encType",h.encType,h,null),gt(t,n,"method",h.method,h,null),gt(t,n,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Da(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=hs);break;case"onScroll":l!=null&&We("scroll",t);break;case"onScrollEnd":l!=null&&We("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Da(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":We("beforetoggle",t),We("toggle",t),Ra(t,"popover",l);break;case"xlinkActuate":zt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ra(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Pc.get(a)||a,Ra(t,a,l))}}function Uf(t,n,a,l,h,m){switch(a){case"style":$l(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?En(t,l):(typeof l=="number"||typeof l=="bigint")&&En(t,""+l);break;case"onScroll":l!=null&&We("scroll",t);break;case"onScrollEnd":l!=null&&We("scrollend",t);break;case"onClick":l!=null&&(t.onclick=hs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ql.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),m=t[Zt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(n,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ra(t,a,l)}}}function on(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",t),We("load",t);var l=!1,h=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:gt(t,n,m,x,a,null)}}h&&gt(t,n,"srcSet",a.srcSet,a,null),l&&gt(t,n,"src",a.src,a,null);return;case"input":We("invalid",t);var w=m=x=h=null,D=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var se=a[l];if(se!=null)switch(l){case"name":h=se;break;case"type":x=se;break;case"checked":D=se;break;case"defaultChecked":F=se;break;case"value":m=se;break;case"defaultValue":w=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,n));break;default:gt(t,n,l,se,a,null)}}Oc(t,m,w,D,F,x,h,!1);return;case"select":We("invalid",t),l=x=m=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":m=w;break;case"defaultValue":x=w;break;case"multiple":l=w;default:gt(t,n,h,w,a,null)}n=m,a=x,t.multiple=!!l,n!=null?Ui(t,!!l,n,!1):a!=null&&Ui(t,!!l,a,!0);return;case"textarea":We("invalid",t),m=h=l=null;for(x in a)if(a.hasOwnProperty(x)&&(w=a[x],w!=null))switch(x){case"value":l=w;break;case"defaultValue":h=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:gt(t,n,x,w,a,null)}zi(t,l,h,m);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(l=a[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:gt(t,n,D,l,a,null)}return;case"dialog":We("beforetoggle",t),We("toggle",t),We("cancel",t),We("close",t);break;case"iframe":case"object":We("load",t);break;case"video":case"audio":for(l=0;l<Ro.length;l++)We(Ro[l],t);break;case"image":We("error",t),We("load",t);break;case"details":We("toggle",t);break;case"embed":case"source":case"link":We("error",t),We("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:gt(t,n,F,l,a,null)}return;default:if(ka(n)){for(se in a)a.hasOwnProperty(se)&&(l=a[se],l!==void 0&&Uf(t,n,se,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&gt(t,n,w,l,a,null))}function D2(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,x=null,w=null,D=null,F=null,se=null;for($ in a){var le=a[$];if(a.hasOwnProperty($)&&le!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=le;default:l.hasOwnProperty($)||gt(t,n,$,null,l,le)}}for(var G in l){var $=l[G];if(le=a[G],l.hasOwnProperty(G)&&($!=null||le!=null))switch(G){case"type":m=$;break;case"name":h=$;break;case"checked":F=$;break;case"defaultChecked":se=$;break;case"value":x=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,n));break;default:$!==le&&gt(t,n,G,$,l,le)}}Ia(t,x,w,D,F,se,m,h);return;case"select":$=x=w=G=null;for(m in a)if(D=a[m],a.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":$=D;default:l.hasOwnProperty(m)||gt(t,n,m,null,l,D)}for(h in l)if(m=l[h],D=a[h],l.hasOwnProperty(h)&&(m!=null||D!=null))switch(h){case"value":G=m;break;case"defaultValue":w=m;break;case"multiple":x=m;default:m!==D&&gt(t,n,h,m,l,D)}n=w,a=x,l=$,G!=null?Ui(t,!!a,G,!1):!!l!=!!a&&(n!=null?Ui(t,!!a,n,!0):Ui(t,!!a,a?[]:"",!1));return;case"textarea":$=G=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:gt(t,n,w,null,l,h)}for(x in l)if(h=l[x],m=a[x],l.hasOwnProperty(x)&&(h!=null||m!=null))switch(x){case"value":G=h;break;case"defaultValue":$=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==m&&gt(t,n,x,h,l,m)}Vc(t,G,$);return;case"option":for(var Ne in a)if(G=a[Ne],a.hasOwnProperty(Ne)&&G!=null&&!l.hasOwnProperty(Ne))switch(Ne){case"selected":t.selected=!1;break;default:gt(t,n,Ne,null,l,G)}for(D in l)if(G=l[D],$=a[D],l.hasOwnProperty(D)&&G!==$&&(G!=null||$!=null))switch(D){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:gt(t,n,D,G,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in a)G=a[Le],a.hasOwnProperty(Le)&&G!=null&&!l.hasOwnProperty(Le)&&gt(t,n,Le,null,l,G);for(F in l)if(G=l[F],$=a[F],l.hasOwnProperty(F)&&G!==$&&(G!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,n));break;default:gt(t,n,F,G,l,$)}return;default:if(ka(n)){for(var pt in a)G=a[pt],a.hasOwnProperty(pt)&&G!==void 0&&!l.hasOwnProperty(pt)&&Uf(t,n,pt,void 0,l,G);for(se in l)G=l[se],$=a[se],!l.hasOwnProperty(se)||G===$||G===void 0&&$===void 0||Uf(t,n,se,G,l,$);return}}for(var U in a)G=a[U],a.hasOwnProperty(U)&&G!=null&&!l.hasOwnProperty(U)&&gt(t,n,U,null,l,G);for(le in l)G=l[le],$=a[le],!l.hasOwnProperty(le)||G===$||G==null&&$==null||gt(t,n,le,G,l,$)}function Oy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],m=h.transferSize,x=h.initiatorType,w=h.duration;if(m&&w&&Oy(x)){for(x=0,w=h.responseEnd,l+=1;l<a.length;l++){var D=a[l],F=D.startTime;if(F>w)break;var se=D.transferSize,le=D.initiatorType;se&&Oy(le)&&(D=D.responseEnd,x+=se*(D<w?1:(w-F)/(D-F)))}if(--l,n+=8*(m+x)/(h.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var zf=null,Bf=null;function Uu(t){return t.nodeType===9?t:t.ownerDocument}function Vy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ly(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function qf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Hf=null;function O2(){var t=window.event;return t&&t.type==="popstate"?t===Hf?!1:(Hf=t,!0):(Hf=null,!1)}var Py=typeof setTimeout=="function"?setTimeout:void 0,V2=typeof clearTimeout=="function"?clearTimeout:void 0,Uy=typeof Promise=="function"?Promise:void 0,L2=typeof queueMicrotask=="function"?queueMicrotask:typeof Uy<"u"?function(t){return Uy.resolve(null).then(t).catch(P2)}:Py;function P2(t){setTimeout(function(){throw t})}function cr(t){return t==="head"}function zy(t,n){var a=n,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),fl(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ko(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,ko(a);for(var m=a.firstChild;m;){var x=m.nextSibling,w=m.nodeName;m[Is]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=x}}else a==="body"&&ko(t.ownerDocument.body);a=h}while(a);fl(n)}function By(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Ff(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ff(a),Ca(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function U2(t,n,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Is])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ts(t.nextSibling),t===null)break}return null}function z2(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ts(t.nextSibling),t===null))return null;return t}function qy(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ts(t.nextSibling),t===null))return null;return t}function Gf(t){return t.data==="$?"||t.data==="$~"}function Yf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function B2(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ts(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Kf=null;function Hy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return ts(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function Fy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function Gy(t,n,a){switch(n=Uu(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function ko(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ca(t)}var ns=new Map,Yy=new Set;function zu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ti=he.d;he.d={f:q2,r:H2,D:F2,C:G2,L:Y2,m:K2,X:$2,S:Q2,M:X2};function q2(){var t=Ti.f(),n=Iu();return t||n}function H2(t){var n=Gn(t);n!==null&&n.tag===5&&n.type==="form"?c0(n):Ti.r(t)}var ul=typeof document>"u"?null:document;function Ky(t,n,a){var l=ul;if(l&&typeof n=="string"&&n){var h=wn(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Yy.has(h)||(Yy.add(h),t={rel:t,crossOrigin:a,href:n},l.querySelector(h)===null&&(n=l.createElement("link"),on(n,"link",t),Ut(n),l.head.appendChild(n)))}}function F2(t){Ti.D(t),Ky("dns-prefetch",t,null)}function G2(t,n){Ti.C(t,n),Ky("preconnect",t,n)}function Y2(t,n,a){Ti.L(t,n,a);var l=ul;if(l&&t&&n){var h='link[rel="preload"][as="'+wn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+wn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+wn(a.imageSizes)+'"]')):h+='[href="'+wn(t)+'"]';var m=h;switch(n){case"style":m=dl(t);break;case"script":m=hl(t)}ns.has(m)||(t=E({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),ns.set(m,t),l.querySelector(h)!==null||n==="style"&&l.querySelector(Do(m))||n==="script"&&l.querySelector(Mo(m))||(n=l.createElement("link"),on(n,"link",t),Ut(n),l.head.appendChild(n)))}}function K2(t,n){Ti.m(t,n);var a=ul;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+wn(l)+'"][href="'+wn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=hl(t)}if(!ns.has(m)&&(t=E({rel:"modulepreload",href:t},n),ns.set(m,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Mo(m)))return}l=a.createElement("link"),on(l,"link",t),Ut(l),a.head.appendChild(l)}}}function Q2(t,n,a){Ti.S(t,n,a);var l=ul;if(l&&t){var h=Ds(l).hoistableStyles,m=dl(t);n=n||"default";var x=h.get(m);if(!x){var w={loading:0,preload:null};if(x=l.querySelector(Do(m)))w.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":n},a),(a=ns.get(m))&&Qf(t,a);var D=x=l.createElement("link");Ut(D),on(D,"link",t),D._p=new Promise(function(F,se){D.onload=F,D.onerror=se}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Bu(x,n,l)}x={type:"stylesheet",instance:x,count:1,state:w},h.set(m,x)}}}function $2(t,n){Ti.X(t,n);var a=ul;if(a&&t){var l=Ds(a).hoistableScripts,h=hl(t),m=l.get(h);m||(m=a.querySelector(Mo(h)),m||(t=E({src:t,async:!0},n),(n=ns.get(h))&&$f(t,n),m=a.createElement("script"),Ut(m),on(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function X2(t,n){Ti.M(t,n);var a=ul;if(a&&t){var l=Ds(a).hoistableScripts,h=hl(t),m=l.get(h);m||(m=a.querySelector(Mo(h)),m||(t=E({src:t,async:!0,type:"module"},n),(n=ns.get(h))&&$f(t,n),m=a.createElement("script"),Ut(m),on(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function Qy(t,n,a,l){var h=(h=X.current)?zu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=dl(a.href),a=Ds(h).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=dl(a.href);var m=Ds(h).hoistableStyles,x=m.get(t);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=h.querySelector(Do(t)))&&!m._p&&(x.instance=m,x.state.loading=5),ns.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ns.set(t,a),m||W2(h,t,a,x.state))),n&&l===null)throw Error(r(528,""));return x}if(n&&l!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=hl(a),a=Ds(h).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function dl(t){return'href="'+wn(t)+'"'}function Do(t){return'link[rel="stylesheet"]['+t+"]"}function $y(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function W2(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),on(n,"link",a),Ut(n),t.head.appendChild(n))}function hl(t){return'[src="'+wn(t)+'"]'}function Mo(t){return"script[async]"+t}function Xy(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+wn(a.href)+'"]');if(l)return n.instance=l,Ut(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ut(l),on(l,"style",h),Bu(l,a.precedence,t),n.instance=l;case"stylesheet":h=dl(a.href);var m=t.querySelector(Do(h));if(m)return n.state.loading|=4,n.instance=m,Ut(m),m;l=$y(a),(h=ns.get(h))&&Qf(l,h),m=(t.ownerDocument||t).createElement("link"),Ut(m);var x=m;return x._p=new Promise(function(w,D){x.onload=w,x.onerror=D}),on(m,"link",l),n.state.loading|=4,Bu(m,a.precedence,t),n.instance=m;case"script":return m=hl(a.src),(h=t.querySelector(Mo(m)))?(n.instance=h,Ut(h),h):(l=a,(h=ns.get(m))&&(l=E({},a),$f(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Ut(h),on(h,"link",l),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Bu(l,a.precedence,t));return n.instance}function Bu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,x=0;x<l.length;x++){var w=l[x];if(w.dataset.precedence===n)m=w;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Qf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function $f(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var qu=null;function Wy(t,n,a){if(qu===null){var l=new Map,h=qu=new Map;h.set(a,l)}else h=qu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var m=a[h];if(!(m[Is]||m[Pt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(n)||"";x=t+x;var w=l.get(x);w?w.push(m):l.set(x,[m])}}return l}function Zy(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function Z2(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Jy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function J2(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=dl(l.href),m=n.querySelector(Do(h));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Hu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=m,Ut(m);return}m=n.ownerDocument||n,l=$y(l),(h=ns.get(h))&&Qf(l,h),m=m.createElement("link"),Ut(m);var x=m;x._p=new Promise(function(w,D){x.onload=w,x.onerror=D}),on(m,"link",l),a.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Hu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var Xf=0;function ew(t,n){return t.stylesheets&&t.count===0&&Gu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Gu(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+n);0<t.imgBytes&&Xf===0&&(Xf=62500*M2());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Gu(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Xf?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Hu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Fu=null;function Gu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Fu=new Map,n.forEach(tw,t),Fu=null,Hu.call(t))}function tw(t,n){if(!(n.state.loading&4)){var a=Fu.get(t);if(a)var l=a.get(null);else{a=new Map,Fu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var x=h[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),l=x)}l&&a.set(null,l)}h=n.instance,x=h.getAttribute("data-precedence"),m=a.get(x)||l,m===l&&a.set(null,h),a.set(x,h),this.count++,l=Hu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var Oo={$$typeof:ge,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function nw(t,n,a,l,h,m,x,w,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cs(0),this.hiddenUpdates=Cs(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function ev(t,n,a,l,h,m,x,w,D,F,se,le){return t=new nw(t,n,a,x,D,F,se,le,w),n=1,m===!0&&(n|=24),m=Mn(3,null,null,n),t.current=m,m.stateNode=t,n=jh(),n.refCount++,t.pooledCache=n,n.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:n},kh(m),t}function tv(t){return t?(t=Ha,t):Ha}function nv(t,n,a,l,h,m){h=tv(h),l.context===null?l.context=h:l.pendingContext=h,l=Zi(n),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Ji(t,l,n),a!==null&&(jn(a,t,n),fo(a,t,n))}function sv(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Wf(t,n){sv(t,n),(t=t.alternate)&&sv(t,n)}function iv(t){if(t.tag===13||t.tag===31){var n=ea(t,67108864);n!==null&&jn(n,t,67108864),Wf(t,67108864)}}function rv(t){if(t.tag===13||t.tag===31){var n=Un();n=qr(n);var a=ea(t,n);a!==null&&jn(a,t,n),Wf(t,n)}}var Yu=!0;function sw(t,n,a,l){var h=Y.T;Y.T=null;var m=he.p;try{he.p=2,Zf(t,n,a,l)}finally{he.p=m,Y.T=h}}function iw(t,n,a,l){var h=Y.T;Y.T=null;var m=he.p;try{he.p=8,Zf(t,n,a,l)}finally{he.p=m,Y.T=h}}function Zf(t,n,a,l){if(Yu){var h=Jf(l);if(h===null)Pf(t,n,l,Ku,a),lv(t,l);else if(aw(h,t,n,a,l))l.stopPropagation();else if(lv(t,l),n&4&&-1<rw.indexOf(t)){for(;h!==null;){var m=Gn(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=As(m.pendingLanes);if(x!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;x;){var D=1<<31-Ct(x);w.entanglements[1]|=D,x&=~D}Ys(m),(ot&6)===0&&(Cu=Vt()+500,Co(0))}}break;case 31:case 13:w=ea(m,2),w!==null&&jn(w,m,2),Iu(),Wf(m,2)}if(m=Jf(l),m===null&&Pf(t,n,l,Ku,a),m===h)break;h=m}h!==null&&l.stopPropagation()}else Pf(t,n,l,null,a)}}function Jf(t){return t=Yn(t),em(t)}var Ku=null;function em(t){if(Ku=null,t=ks(t),t!==null){var n=d(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Ku=t,null}function av(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ii()){case ri:return 2;case Li:return 8;case Ss:case Hn:return 32;case Na:return 268435456;default:return 32}default:return 32}}var tm=!1,ur=null,dr=null,hr=null,Vo=new Map,Lo=new Map,fr=[],rw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lv(t,n){switch(t){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Vo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(n.pointerId)}}function Po(t,n,a,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},n!==null&&(n=Gn(n),n!==null&&iv(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function aw(t,n,a,l,h){switch(n){case"focusin":return ur=Po(ur,t,n,a,l,h),!0;case"dragenter":return dr=Po(dr,t,n,a,l,h),!0;case"mouseover":return hr=Po(hr,t,n,a,l,h),!0;case"pointerover":var m=h.pointerId;return Vo.set(m,Po(Vo.get(m)||null,t,n,a,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Lo.set(m,Po(Lo.get(m)||null,t,n,a,l,h)),!0}return!1}function ov(t){var n=ks(t.target);if(n!==null){var a=d(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,us(t.priority,function(){rv(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,us(t.priority,function(){rv(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Jf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Xl=l,a.target.dispatchEvent(l),Xl=null}else return n=Gn(a),n!==null&&iv(n),t.blockedOn=a,!1;n.shift()}return!0}function cv(t,n,a){Qu(t)&&a.delete(n)}function lw(){tm=!1,ur!==null&&Qu(ur)&&(ur=null),dr!==null&&Qu(dr)&&(dr=null),hr!==null&&Qu(hr)&&(hr=null),Vo.forEach(cv),Lo.forEach(cv)}function $u(t,n){t.blockedOn===n&&(t.blockedOn=null,tm||(tm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,lw)))}var Xu=null;function uv(t){Xu!==t&&(Xu=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Xu===t&&(Xu=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],h=t[n+2];if(typeof l!="function"){if(em(l||a)===null)continue;break}var m=Gn(a);m!==null&&(t.splice(n,3),n-=3,Zh(m,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function fl(t){function n(D){return $u(D,t)}ur!==null&&$u(ur,t),dr!==null&&$u(dr,t),hr!==null&&$u(hr,t),Vo.forEach(n),Lo.forEach(n);for(var a=0;a<fr.length;a++){var l=fr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<fr.length&&(a=fr[0],a.blockedOn===null);)ov(a),a.blockedOn===null&&fr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],m=a[l+1],x=h[Zt]||null;if(typeof m=="function")x||uv(a);else if(x){var w=null;if(m&&m.hasAttribute("formAction")){if(h=m,x=m[Zt]||null)w=x.formAction;else if(em(h)!==null)continue}else w=x.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),uv(a)}}}function dv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return h=x})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function nm(t){this._internalRoot=t}Wu.prototype.render=nm.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,l=Un();nv(a,l,t,n,null,null)},Wu.prototype.unmount=nm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;nv(t.current,2,null,t,null,null),Iu(),n[Rs]=null}};function Wu(t){this._internalRoot=t}Wu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ic();t={blockedOn:null,target:t,priority:n};for(var a=0;a<fr.length&&n!==0&&n<fr[a].priority;a++);fr.splice(a,0,t),a===0&&ov(t)}};var hv=e.version;if(hv!=="19.2.0")throw Error(r(527,hv,"19.2.0"));he.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(n),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var ow={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{os=Zu.inject(ow),nn=Zu}catch{}}return zo.createRoot=function(t,n){if(!o(t))throw Error(r(299));var a=!1,l="",h=x0,m=b0,x=_0;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError)),n=ev(t,1,!1,null,null,a,l,null,h,m,x,dv),t[Rs]=n.current,Lf(t),new nm(n)},zo.hydrateRoot=function(t,n,a){if(!o(t))throw Error(r(299));var l=!1,h="",m=x0,x=b0,w=_0,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),n=ev(t,1,!0,n,a??null,l,h,D,m,x,w,dv),n.context=tv(null),a=n.current,l=Un(),l=qr(l),h=Zi(l),h.callback=null,Ji(a,h,l),a=l,n.current.lanes=a,zr(n,a),Ys(n),t[Rs]=n.current,Lf(t),new Wu(n)},zo.version="19.2.0",zo}var wv;function xw(){if(wv)return rm.exports;wv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),rm.exports=vw(),rm.exports}var bw=xw();const _w=()=>{};var Ev={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=function(i){const e=[];let s=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[s++]=o:o<2048?(e[s++]=o>>6|192,e[s++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[s++]=o>>18|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128,e[s++]=o&63|128):(e[s++]=o>>12|224,e[s++]=o>>6&63|128,e[s++]=o&63|128)}return e},ww=function(i){const e=[];let s=0,r=0;for(;s<i.length;){const o=i[s++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const d=i[s++];e[r++]=String.fromCharCode((o&31)<<6|d&63)}else if(o>239&&o<365){const d=i[s++],f=i[s++],p=i[s++],v=((o&7)<<18|(d&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const d=i[s++],f=i[s++];e[r++]=String.fromCharCode((o&15)<<12|(d&63)<<6|f&63)}}return e.join("")},ab={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const d=i[o],f=o+1<i.length,p=f?i[o+1]:0,v=o+2<i.length,y=v?i[o+2]:0,_=d>>2,E=(d&3)<<4|p>>4;let A=(p&15)<<2|y>>6,q=y&63;v||(q=64,f||(A=64)),r.push(s[_],s[E],s[A],s[q])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(rb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):ww(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const d=s[i.charAt(o++)],p=o<i.length?s[i.charAt(o)]:0;++o;const y=o<i.length?s[i.charAt(o)]:64;++o;const E=o<i.length?s[i.charAt(o)]:64;if(++o,d==null||p==null||y==null||E==null)throw new Ew;const A=d<<2|p>>4;if(r.push(A),y!==64){const q=p<<4&240|y>>2;if(r.push(q),E!==64){const ee=y<<6&192|E;r.push(ee)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Ew extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tw=function(i){const e=rb(i);return ab.encodeByteArray(e,!0)},yd=function(i){return Tw(i).replace(/\./g,"")},lb=function(i){try{return ab.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=()=>Sw().__FIREBASE_DEFAULTS__,Aw=()=>{if(typeof process>"u"||typeof Ev>"u")return;const i=Ev.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},jw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&lb(i[1]);return e&&JSON.parse(e)},Ld=()=>{try{return _w()||Nw()||Aw()||jw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},ob=i=>Ld()?.emulatorHosts?.[i],Cw=i=>{const e=ob(i);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},cb=()=>Ld()?.config,ub=i=>Ld()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function db(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,d=i.sub||i.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...i};return[yd(JSON.stringify(s)),yd(JSON.stringify(f)),""].join(".")}const Ko={};function kw(){const i={prod:[],emulator:[]};for(const e of Object.keys(Ko))Ko[e]?i.emulator.push(e):i.prod.push(e);return i}function Dw(i){let e=document.getElementById(i),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),s=!0),{created:s,element:e}}let Tv=!1;function hb(i,e){if(typeof window>"u"||typeof document>"u"||!Il(window.location.host)||Ko[i]===e||Ko[i]||Tv)return;Ko[i]=e;function s(A){return`__firebase__banner__${A}`}const r="__firebase__banner",d=kw().prod.length>0;function f(){const A=document.getElementById(r);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function v(A,q){A.setAttribute("width","24"),A.setAttribute("id",q),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Tv=!0,f()},A}function _(A,q){A.setAttribute("id",q),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=Dw(r),q=s("text"),ee=document.getElementById(q)||document.createElement("span"),W=s("learnmore"),z=document.getElementById(W)||document.createElement("a"),ne=s("preprendIcon"),Z=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ge=A.element;p(ge),_(z,W);const ue=y();v(Z,ne),ge.append(Z,ee,z,ue),document.body.appendChild(ge)}d?(ee.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ee.innerText="Preview backend running in this workspace."),ee.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Mw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function Ow(){const i=Ld()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Pw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Uw(){const i=pn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function zw(){return!Ow()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bw(){try{return typeof indexedDB=="object"}catch{return!1}}function qw(){return new Promise((i,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),s||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{s=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="FirebaseError";class Mi extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=Hw,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dc.prototype.create)}}class dc{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},o=`${this.service}/${e}`,d=this.errors[e],f=d?Fw(d,r):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Mi(o,p,r)}}function Fw(i,e){return i.replace(Gw,(s,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Gw=/\{\$([^}]+)}/g;function Yw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function va(i,e){if(i===e)return!0;const s=Object.keys(i),r=Object.keys(e);for(const o of s){if(!r.includes(o))return!1;const d=i[o],f=e[o];if(Sv(d)&&Sv(f)){if(!va(d,f))return!1}else if(d!==f)return!1}for(const o of r)if(!s.includes(o))return!1;return!0}function Sv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(i){const e=[];for(const[s,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bo(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,d]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(d)}}),e}function qo(i){const e=i.indexOf("?");if(!e)return"";const s=i.indexOf("#",e);return i.substring(e,s>0?s:void 0)}function Kw(i,e){const s=new Qw(i,e);return s.subscribe.bind(s)}class Qw{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let o;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");$w(e,["next","error","complete"])?o=e:o={next:e,error:s,complete:r},o.next===void 0&&(o.next=cm),o.error===void 0&&(o.error=cm),o.complete===void 0&&(o.complete=cm);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),d}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $w(i,e){if(typeof i!="object"||i===null)return!1;for(const s of e)if(s in i&&typeof i[s]=="function")return!0;return!1}function cm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(i){return i&&i._delegate?i._delegate:i}class xa{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new Rw;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:s});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Zw(e))try{this.getOrInitializeService({instanceIdentifier:ma})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);try{const d=this.getOrInitializeService({instanceIdentifier:o});r.resolve(d)}catch{}}}}clearInstance(e=ma){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ma){return this.instances.has(e)}getOptions(e=ma){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[d,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(d);r===p&&f.resolve(o)}return o}onInit(e,s){const r=this.normalizeInstanceIdentifier(s),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const d=this.instances.get(r);return d&&e(d,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const o of r)try{o(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ww(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ma){return this.component?this.component.multipleInstances?e:ma:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ww(i){return i===ma?void 0:i}function Zw(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Xw(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(et||(et={}));const eE={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},tE=et.INFO,nE={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},sE=(i,e,...s)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=nE[e];if(o)console[o](`[${r}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eg{constructor(e){this.name=e,this._logLevel=tE,this._logHandler=sE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const iE=(i,e)=>e.some(s=>i instanceof s);let Nv,Av;function rE(){return Nv||(Nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aE(){return Av||(Av=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fb=new WeakMap,Nm=new WeakMap,mb=new WeakMap,um=new WeakMap,tg=new WeakMap;function lE(i){const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("success",d),i.removeEventListener("error",f)},d=()=>{s(wr(i.result)),o()},f=()=>{r(i.error),o()};i.addEventListener("success",d),i.addEventListener("error",f)});return e.then(s=>{s instanceof IDBCursor&&fb.set(s,i)}).catch(()=>{}),tg.set(e,i),e}function oE(i){if(Nm.has(i))return;const e=new Promise((s,r)=>{const o=()=>{i.removeEventListener("complete",d),i.removeEventListener("error",f),i.removeEventListener("abort",f)},d=()=>{s(),o()},f=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",d),i.addEventListener("error",f),i.addEventListener("abort",f)});Nm.set(i,e)}let Am={get(i,e,s){if(i instanceof IDBTransaction){if(e==="done")return Nm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||mb.get(i);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return wr(i[e])},set(i,e,s){return i[e]=s,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function cE(i){Am=i(Am)}function uE(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=i.call(dm(this),e,...s);return mb.set(r,e.sort?e.sort():[e]),wr(r)}:aE().includes(i)?function(...e){return i.apply(dm(this),e),wr(fb.get(this))}:function(...e){return wr(i.apply(dm(this),e))}}function dE(i){return typeof i=="function"?uE(i):(i instanceof IDBTransaction&&oE(i),iE(i,rE())?new Proxy(i,Am):i)}function wr(i){if(i instanceof IDBRequest)return lE(i);if(um.has(i))return um.get(i);const e=dE(i);return e!==i&&(um.set(i,e),tg.set(e,i)),e}const dm=i=>tg.get(i);function hE(i,e,{blocked:s,upgrade:r,blocking:o,terminated:d}={}){const f=indexedDB.open(i,e),p=wr(f);return r&&f.addEventListener("upgradeneeded",v=>{r(wr(f.result),v.oldVersion,v.newVersion,wr(f.transaction),v)}),s&&f.addEventListener("blocked",v=>s(v.oldVersion,v.newVersion,v)),p.then(v=>{d&&v.addEventListener("close",()=>d()),o&&v.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const fE=["get","getKey","getAll","getAllKeys","count"],mE=["put","add","delete","clear"],hm=new Map;function jv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(hm.get(e))return hm.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,o=mE.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(o||fE.includes(s)))return;const d=async function(f,...p){const v=this.transaction(f,o?"readwrite":"readonly");let y=v.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[s](...p),o&&v.done]))[0]};return hm.set(e,d),d}cE(i=>({...i,get:(e,s,r)=>jv(e,s)||i.get(e,s,r),has:(e,s)=>!!jv(e,s)||i.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(pE(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function pE(i){return i.getComponent()?.type==="VERSION"}const jm="@firebase/app",Cv="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new eg("@firebase/app"),yE="@firebase/app-compat",vE="@firebase/analytics-compat",xE="@firebase/analytics",bE="@firebase/app-check-compat",_E="@firebase/app-check",wE="@firebase/auth",EE="@firebase/auth-compat",TE="@firebase/database",SE="@firebase/data-connect",NE="@firebase/database-compat",AE="@firebase/functions",jE="@firebase/functions-compat",CE="@firebase/installations",RE="@firebase/installations-compat",IE="@firebase/messaging",kE="@firebase/messaging-compat",DE="@firebase/performance",ME="@firebase/performance-compat",OE="@firebase/remote-config",VE="@firebase/remote-config-compat",LE="@firebase/storage",PE="@firebase/storage-compat",UE="@firebase/firestore",zE="@firebase/ai",BE="@firebase/firestore-compat",qE="firebase",HE="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="[DEFAULT]",FE={[jm]:"fire-core",[yE]:"fire-core-compat",[xE]:"fire-analytics",[vE]:"fire-analytics-compat",[_E]:"fire-app-check",[bE]:"fire-app-check-compat",[wE]:"fire-auth",[EE]:"fire-auth-compat",[TE]:"fire-rtdb",[SE]:"fire-data-connect",[NE]:"fire-rtdb-compat",[AE]:"fire-fn",[jE]:"fire-fn-compat",[CE]:"fire-iid",[RE]:"fire-iid-compat",[IE]:"fire-fcm",[kE]:"fire-fcm-compat",[DE]:"fire-perf",[ME]:"fire-perf-compat",[OE]:"fire-rc",[VE]:"fire-rc-compat",[LE]:"fire-gcs",[PE]:"fire-gcs-compat",[UE]:"fire-fst",[BE]:"fire-fst-compat",[zE]:"fire-vertex","fire-js":"fire-js",[qE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new Map,GE=new Map,Rm=new Map;function Rv(i,e){try{i.container.addComponent(e)}catch(s){Ci.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,s)}}function Tl(i){const e=i.name;if(Rm.has(e))return Ci.debug(`There were multiple attempts to register component ${e}.`),!1;Rm.set(e,i);for(const s of vd.values())Rv(s,i);for(const s of GE.values())Rv(s,i);return!0}function ng(i,e){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(e)}function is(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new dc("app","Firebase",YE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,s,r){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=HE;function gb(i,e={}){let s=i;typeof e!="object"&&(e={name:e});const r={name:Cm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Er.create("bad-app-name",{appName:String(o)});if(s||(s=cb()),!s)throw Er.create("no-options");const d=vd.get(o);if(d){if(va(s,d.options)&&va(r,d.config))return d;throw Er.create("duplicate-app",{appName:o})}const f=new Jw(o);for(const v of Rm.values())f.addComponent(v);const p=new KE(s,r,f);return vd.set(o,p),p}function pb(i=Cm){const e=vd.get(i);if(!e&&i===Cm&&cb())return gb();if(!e)throw Er.create("no-app",{appName:i});return e}function Tr(i,e,s){let r=FE[i]??i;s&&(r+=`-${s}`);const o=r.match(/\s|\//),d=e.match(/\s|\//);if(o||d){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ci.warn(f.join(" "));return}Tl(new xa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firebase-heartbeat-database",$E=1,tc="firebase-heartbeat-store";let fm=null;function yb(){return fm||(fm=hE(QE,$E,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(tc)}catch(s){console.warn(s)}}}}).catch(i=>{throw Er.create("idb-open",{originalErrorMessage:i.message})})),fm}async function XE(i){try{const s=(await yb()).transaction(tc),r=await s.objectStore(tc).get(vb(i));return await s.done,r}catch(e){if(e instanceof Mi)Ci.warn(e.message);else{const s=Er.create("idb-get",{originalErrorMessage:e?.message});Ci.warn(s.message)}}}async function Iv(i,e){try{const r=(await yb()).transaction(tc,"readwrite");await r.objectStore(tc).put(e,vb(i)),await r.done}catch(s){if(s instanceof Mi)Ci.warn(s.message);else{const r=Er.create("idb-set",{originalErrorMessage:s?.message});Ci.warn(r.message)}}}function vb(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=1024,ZE=30;class JE{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new tT(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=kv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>ZE){const o=nT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ci.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=kv(),{heartbeatsToSend:s,unsentEntries:r}=eT(this._heartbeatsCache.heartbeats),o=yd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ci.warn(e),""}}}function kv(){return new Date().toISOString().substring(0,10)}function eT(i,e=WE){const s=[];let r=i.slice();for(const o of i){const d=s.find(f=>f.agent===o.agent);if(d){if(d.dates.push(o.date),Dv(s)>e){d.dates.pop();break}}else if(s.push({agent:o.agent,dates:[o.date]}),Dv(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class tT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bw()?qw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await XE(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Dv(i){return yd(JSON.stringify({version:2,heartbeats:i})).length}function nT(i){if(i.length===0)return-1;let e=0,s=i[0].date;for(let r=1;r<i.length;r++)i[r].date<s&&(s=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(i){Tl(new xa("platform-logger",e=>new gE(e),"PRIVATE")),Tl(new xa("heartbeat",e=>new JE(e),"PRIVATE")),Tr(jm,Cv,i),Tr(jm,Cv,"esm2020"),Tr("fire-js","")}sT("");function xb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iT=xb,bb=new dc("auth","Firebase",xb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new eg("@firebase/auth");function rT(i,...e){xd.logLevel<=et.WARN&&xd.warn(`Auth (${kl}): ${i}`,...e)}function ld(i,...e){xd.logLevel<=et.ERROR&&xd.error(`Auth (${kl}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(i,...e){throw sg(i,...e)}function $s(i,...e){return sg(i,...e)}function _b(i,e,s){const r={...iT(),[e]:s};return new dc("auth","Firebase",r).create(e,{appName:i.name})}function Ai(i){return _b(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sg(i,...e){if(typeof i!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(s,...r)}return bb.create(i,...e)}function Ue(i,e,...s){if(!i)throw sg(e,...s)}function Si(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ld(e),new Error(e)}function Ri(i,e){i||Si(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(){return typeof self<"u"&&self.location?.href||""}function aT(){return Mv()==="http:"||Mv()==="https:"}function Mv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aT()||Lw()||"connection"in navigator)?navigator.onLine:!0}function oT(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,s){this.shortDelay=e,this.longDelay=s,Ri(s>e,"Short delay should be less than long delay!"),this.isMobile=Mw()||Pw()}get(){return lT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(i,e){Ri(i.emulator,"Emulator should always be set here");const{url:s}=i.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dT=new fc(3e4,6e4);function Oi(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Vi(i,e,s,r,o={}){return Eb(i,o,async()=>{let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});const p=hc({key:i.config.apiKey,...f}).slice(1),v=await i._getAdditionalHeaders();v["Content-Type"]="application/json",i.languageCode&&(v["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:v,...d};return Vw()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Il(i.emulatorConfig.host)&&(y.credentials="include"),wb.fetch()(await Tb(i,i.config.apiHost,s,p),y)})}async function Eb(i,e,s){i._canInitEmulator=!1;const r={...cT,...e};try{const o=new fT(i),d=await Promise.race([s(),o.promise]);o.clearNetworkTimeout();const f=await d.json();if("needConfirmation"in f)throw Ju(i,"account-exists-with-different-credential",f);if(d.ok&&!("errorMessage"in f))return f;{const p=d.ok?f.errorMessage:f.error.message,[v,y]=p.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ju(i,"credential-already-in-use",f);if(v==="EMAIL_EXISTS")throw Ju(i,"email-already-in-use",f);if(v==="USER_DISABLED")throw Ju(i,"user-disabled",f);const _=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw _b(i,_,y);Es(i,_)}}catch(o){if(o instanceof Mi)throw o;Es(i,"network-request-failed",{message:String(o)})}}async function mc(i,e,s,r,o={}){const d=await Vi(i,e,s,r,o);return"mfaPendingCredential"in d&&Es(i,"multi-factor-auth-required",{_serverResponse:d}),d}async function Tb(i,e,s,r){const o=`${e}${s}?${r}`,d=i,f=d.config.emulator?ig(i.config,o):`${i.config.apiScheme}://${o}`;return uT.includes(s)&&(await d._persistenceManagerAvailable,d._getPersistenceType()==="COOKIE")?d._getPersistence()._getFinalTarget(f).toString():f}function hT(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r($s(this.auth,"network-request-failed")),dT.get())})}}function Ju(i,e,s){const r={appName:i.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const o=$s(i,e,r);return o.customData._tokenResponse=s,o}function Ov(i){return i!==void 0&&i.enterprise!==void 0}class mT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return hT(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gT(i,e){return Vi(i,"GET","/v2/recaptchaConfig",Oi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pT(i,e){return Vi(i,"POST","/v1/accounts:delete",e)}async function bd(i,e){return Vi(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yT(i,e=!1){const s=Ot(i),r=await s.getIdToken(e),o=rg(r);Ue(o&&o.exp&&o.auth_time&&o.iat,s.auth,"internal-error");const d=typeof o.firebase=="object"?o.firebase:void 0,f=d?.sign_in_provider;return{claims:o,token:r,authTime:Qo(mm(o.auth_time)),issuedAtTime:Qo(mm(o.iat)),expirationTime:Qo(mm(o.exp)),signInProvider:f||null,signInSecondFactor:d?.sign_in_second_factor||null}}function mm(i){return Number(i)*1e3}function rg(i){const[e,s,r]=i.split(".");if(e===void 0||s===void 0||r===void 0)return ld("JWT malformed, contained fewer than 3 sections"),null;try{const o=lb(s);return o?JSON.parse(o):(ld("Failed to decode base64 JWT payload"),null)}catch(o){return ld("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Vv(i){const e=rg(i);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(i,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Mi&&vT(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function vT({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _d(i){const e=i.auth,s=await i.getIdToken(),r=await nc(i,bd(e,{idToken:s}));Ue(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const d=o.providerUserInfo?.length?Sb(o.providerUserInfo):[],f=_T(i.providerData,d),p=i.isAnonymous,v=!(i.email&&o.passwordHash)&&!f?.length,y=p?v:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new km(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,_)}async function bT(i){const e=Ot(i);await _d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _T(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Sb(i){return i.map(({providerId:e,...s})=>({providerId:e,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wT(i,e){const s=await Eb(i,{},async()=>{const r=hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:d}=i.config,f=await Tb(i,o,"/v1/token",`key=${d}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:p,body:r};return i.emulatorConfig&&Il(i.emulatorConfig.host)&&(v.credentials="include"),wb.fetch()(f,v)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function ET(i,e){return Vi(i,"POST","/v2/accounts:revokeToken",Oi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const s=Vv(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:o,expiresIn:d}=await wT(e,s);this.updateTokensAndExpiration(r,o,Number(d))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:o,expirationTime:d}=s,f=new bl;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Ue(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),d&&(Ue(typeof d=="number","internal-error",{appName:e}),f.expirationTime=d),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bl,this.toJSON())}_performRefresh(){return Si("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(i,e){Ue(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ws{constructor({uid:e,auth:s,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new xT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new km(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await nc(this,this.stsTokenManager.getToken(this.auth,e));return Ue(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return yT(this,e)}reload(){return bT(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>({...s})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new ws({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await _d(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(is(this.auth.app))return Promise.reject(Ai(this.auth));const e=await this.getIdToken();return await nc(this,pT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){const r=s.displayName??void 0,o=s.email??void 0,d=s.phoneNumber??void 0,f=s.photoURL??void 0,p=s.tenantId??void 0,v=s._redirectEventId??void 0,y=s.createdAt??void 0,_=s.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:q,providerData:ee,stsTokenManager:W}=s;Ue(E&&W,e,"internal-error");const z=bl.fromJSON(this.name,W);Ue(typeof E=="string",e,"internal-error"),gr(r,e.name),gr(o,e.name),Ue(typeof A=="boolean",e,"internal-error"),Ue(typeof q=="boolean",e,"internal-error"),gr(d,e.name),gr(f,e.name),gr(p,e.name),gr(v,e.name),gr(y,e.name),gr(_,e.name);const ne=new ws({uid:E,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:q,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:z,createdAt:y,lastLoginAt:_});return ee&&Array.isArray(ee)&&(ne.providerData=ee.map(Z=>({...Z}))),v&&(ne._redirectEventId=v),ne}static async _fromIdTokenResponse(e,s,r=!1){const o=new bl;o.updateFromServerResponse(s);const d=new ws({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await _d(d),d}static async _fromGetAccountInfoResponse(e,s,r){const o=s.users[0];Ue(o.localId!==void 0,"internal-error");const d=o.providerUserInfo!==void 0?Sb(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!d?.length,p=new bl;p.updateFromIdToken(r);const v=new ws({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new km(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!d?.length};return Object.assign(v,y),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=new Map;function Ni(i){Ri(i instanceof Function,"Expected a class definition");let e=Lv.get(i);return e?(Ri(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Lv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Nb.type="NONE";const Pv=Nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(i,e,s){return`firebase:${i}:${e}:${s}`}class _l{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:o,name:d}=this.auth;this.fullUserKey=od(this.userKey,o.apiKey,d),this.fullPersistenceKey=od("persistence",o.apiKey,d),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await bd(this.auth,{idToken:e}).catch(()=>{});return s?ws._fromGetAccountInfoResponse(this.auth,s,e):null}return ws._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new _l(Ni(Pv),e,r);const o=(await Promise.all(s.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let d=o[0]||Ni(Pv);const f=od(r,e.config.apiKey,e.name);let p=null;for(const y of s)try{const _=await y._get(f);if(_){let E;if(typeof _=="string"){const A=await bd(e,{idToken:_}).catch(()=>{});if(!A)break;E=await ws._fromGetAccountInfoResponse(e,A,_)}else E=ws._fromJSON(e,_);y!==d&&(p=E),d=y;break}}catch{}const v=o.filter(y=>y._shouldAllowMigration);return!d._shouldAllowMigration||!v.length?new _l(d,e,r):(d=v[0],p&&await d._set(f,p.toJSON()),await Promise.all(s.map(async y=>{if(y!==d)try{await y._remove(f)}catch{}})),new _l(d,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ab(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kb(e))return"Blackberry";if(Db(e))return"Webos";if(jb(e))return"Safari";if((e.includes("chrome/")||Cb(e))&&!e.includes("edge/"))return"Chrome";if(Ib(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(s);if(r?.length===2)return r[1]}return"Other"}function Ab(i=pn()){return/firefox\//i.test(i)}function jb(i=pn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cb(i=pn()){return/crios\//i.test(i)}function Rb(i=pn()){return/iemobile/i.test(i)}function Ib(i=pn()){return/android/i.test(i)}function kb(i=pn()){return/blackberry/i.test(i)}function Db(i=pn()){return/webos/i.test(i)}function ag(i=pn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function TT(i=pn()){return ag(i)&&!!window.navigator?.standalone}function ST(){return Uw()&&document.documentMode===10}function Mb(i=pn()){return ag(i)||Ib(i)||Db(i)||kb(i)||/windows phone/i.test(i)||Rb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(i,e=[]){let s;switch(i){case"Browser":s=Uv(pn());break;case"Worker":s=`${Uv(pn())}-${i}`;break;default:s=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${kl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=d=>new Promise((f,p)=>{try{const v=e(d);f(v)}catch(v){p(v)}});r.onAbort=s,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const o of s)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AT(i,e={}){return Vi(i,"GET","/v2/passwordPolicy",Oi(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=6;class CT{constructor(e){const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??jT,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),o&&(s.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,o,d){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,s,r,o){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zv(this),this.idTokenSubscription=new zv(this),this.beforeStateQueue=new NT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(d=>this._resolvePersistenceManagerAvailable=d)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Ni(s)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await _l.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await bd(this,{idToken:e}),r=await ws._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(is(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===f)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(d){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await _d(e)}catch(s){if(s?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(is(this.app))return Promise.reject(Ai(this));const s=e?Ot(e):null;return s&&Ue(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return is(this.app)?Promise.reject(Ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return is(this.app)?Promise.reject(Ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AT(this),s=new CT(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dc("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await ET(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Ni(e)||this._popupRedirectResolver;Ue(s,this,"argument-error"),this.redirectPersistenceManager=await _l.create(this,[Ni(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,o){if(this._deleted)return()=>{};const d=typeof s=="function"?s:s.next.bind(s);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(p,this,"internal-error"),p.then(()=>{f||d(this.currentUser)}),typeof s=="function"){const v=e.addObserver(s,r,o);return()=>{f=!0,v()}}else{const v=e.addObserver(s);return()=>{f=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ob(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const s=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();s&&(e["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(is(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&rT(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Or(i){return Ot(i)}class zv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Kw(s=>this.observer=s)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IT(i){Pd=i}function Vb(i){return Pd.loadJS(i)}function kT(){return Pd.recaptchaEnterpriseScript}function DT(){return Pd.gapiScript}function MT(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class OT{constructor(){this.enterprise=new VT}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class VT{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const LT="recaptcha-enterprise",Lb="NO_RECAPTCHA";class PT{constructor(e){this.type=LT,this.auth=Or(e)}async verify(e="verify",s=!1){async function r(d){if(!s){if(d.tenantId==null&&d._agentRecaptchaConfig!=null)return d._agentRecaptchaConfig.siteKey;if(d.tenantId!=null&&d._tenantRecaptchaConfigs[d.tenantId]!==void 0)return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(async(f,p)=>{gT(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new mT(v);return d.tenantId==null?d._agentRecaptchaConfig=y:d._tenantRecaptchaConfigs[d.tenantId]=y,f(y.siteKey)}}).catch(v=>{p(v)})})}function o(d,f,p){const v=window.grecaptcha;Ov(v)?v.enterprise.ready(()=>{v.enterprise.execute(d,{action:e}).then(y=>{f(y)}).catch(()=>{f(Lb)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new OT().execute("siteKey",{action:"verify"}):new Promise((d,f)=>{r(this.auth).then(p=>{if(!s&&Ov(window.grecaptcha))o(p,d,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let v=kT();v.length!==0&&(v+=p),Vb(v).then(()=>{o(p,d,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function Bv(i,e,s,r=!1,o=!1){const d=new PT(i);let f;if(o)f=Lb;else try{f=await d.verify(s)}catch{f=await d.verify(s,!0)}const p={...e};if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const v=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const v=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function wd(i,e,s,r,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await Bv(i,e,s,s==="getOobCode");return r(i,d)}else return r(i,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Bv(i,e,s,s==="getOobCode");return r(i,f)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(i,e){const s=ng(i,"auth");if(s.isInitialized()){const o=s.getImmediate(),d=s.getOptions();if(va(d,e??{}))return o;Es(o,"already-initialized")}return s.initialize({options:e})}function zT(i,e){const s=e?.persistence||[],r=(Array.isArray(s)?s:[s]).map(Ni);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function BT(i,e,s){const r=Or(i);Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,d=Pb(e),{host:f,port:p}=qT(e),v=p===null?"":`:${p}`,y={url:`${d}//${f}${v}/`},_=Object.freeze({host:f,port:p,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ue(va(y,r.config.emulator)&&va(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Il(f)?(db(`${d}//${f}${v}`),hb("Auth",!0)):HT()}function Pb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function qT(i){const e=Pb(i),s=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const d=o[1];return{host:d,port:qv(r.substr(d.length+1))}}else{const[d,f]=r.split(":");return{host:d,port:qv(f)}}}function qv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function HT(){function i(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Si("not implemented")}_getIdTokenResponse(e){return Si("not implemented")}_linkToIdToken(e,s){return Si("not implemented")}_getReauthenticationResolver(e){return Si("not implemented")}}async function FT(i,e){return Vi(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(i,e){return mc(i,"POST","/v1/accounts:signInWithPassword",Oi(i,e))}async function YT(i,e){return Vi(i,"POST","/v1/accounts:sendOobCode",Oi(i,e))}async function KT(i,e){return YT(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QT(i,e){return mc(i,"POST","/v1/accounts:signInWithEmailLink",Oi(i,e))}async function $T(i,e){return mc(i,"POST","/v1/accounts:signInWithEmailLink",Oi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends lg{constructor(e,s,r,o=null){super("password",r),this._email=e,this._password=s,this._tenantId=o}static _fromEmailAndPassword(e,s){return new sc(e,s,"password")}static _fromEmailAndCode(e,s,r=null){return new sc(e,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s?.email&&s?.password){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wd(e,s,"signInWithPassword",GT);case"emailLink":return QT(e,{email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wd(e,r,"signUpPassword",FT);case"emailLink":return $T(e,{idToken:s,email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(i,e){return mc(i,"POST","/v1/accounts:signInWithIdp",Oi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="http://localhost";class ba extends lg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):Es("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...d}=s;if(!r||!o)return null;const f=new ba(r,o);return f.idToken=d.idToken||void 0,f.accessToken=d.accessToken||void 0,f.secret=d.secret,f.nonce=d.nonce,f.pendingToken=d.pendingToken||null,f}_getIdTokenResponse(e){const s=this.buildRequest();return wl(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,wl(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,wl(e,s)}buildRequest(){const e={requestUri:XT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=hc(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZT(i){const e=Bo(qo(i)).link,s=e?Bo(qo(e)).deep_link_id:null,r=Bo(qo(i)).deep_link_id;return(r?Bo(qo(r)).link:null)||r||s||e||i}class og{constructor(e){const s=Bo(qo(e)),r=s.apiKey??null,o=s.oobCode??null,d=WT(s.mode??null);Ue(r&&o&&d,"argument-error"),this.apiKey=r,this.operation=d,this.code=o,this.continueUrl=s.continueUrl??null,this.languageCode=s.lang??null,this.tenantId=s.tenantId??null}static parseLink(e){const s=ZT(e);try{return new og(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(){this.providerId=Dl.PROVIDER_ID}static credential(e,s){return sc._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const r=og.parseLink(s);return Ue(r,"argument-error"),sc._fromEmailAndCode(e,r.code,r.tenantId)}}Dl.PROVIDER_ID="password";Dl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Ub{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends gc{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return ba._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return vr.credential(s,r)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends gc{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.GITHUB_SIGN_IN_METHOD="github.com";xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends gc{constructor(){super("twitter.com")}static credential(e,s){return ba._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return br.credential(s,r)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JT(i,e){return mc(i,"POST","/v1/accounts:signUp",Oi(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,o=!1){const d=await ws._fromIdTokenResponse(e,r,o),f=Hv(r);return new _a({user:d,providerId:f,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const o=Hv(r);return new _a({user:e,providerId:o,_tokenResponse:r,operationType:s})}}function Hv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed extends Mi{constructor(e,s,r,o){super(s.code,s.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,o){return new Ed(e,s,r,o)}}function zb(i,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(i):s._getIdTokenResponse(i)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(i,d,e,r):d})}async function eS(i,e,s=!1){const r=await nc(i,e._linkToIdToken(i.auth,await i.getIdToken()),s);return _a._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(i,e,s=!1){const{auth:r}=i;if(is(r.app))return Promise.reject(Ai(r));const o="reauthenticate";try{const d=await nc(i,zb(r,o,e,i),s);Ue(d.idToken,r,"internal-error");const f=rg(d.idToken);Ue(f,r,"internal-error");const{sub:p}=f;return Ue(i.uid===p,r,"user-mismatch"),_a._forOperation(i,o,d)}catch(d){throw d?.code==="auth/user-not-found"&&Es(r,"user-mismatch"),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bb(i,e,s=!1){if(is(i.app))return Promise.reject(Ai(i));const r="signIn",o=await zb(i,r,e),d=await _a._fromIdTokenResponse(i,r,o);return s||await i._updateCurrentUser(d.user),d}async function nS(i,e){return Bb(Or(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qb(i){const e=Or(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sS(i,e,s){const r=Or(i);await wd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",KT)}async function iS(i,e,s){if(is(i.app))return Promise.reject(Ai(i));const r=Or(i),f=await wd(r,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JT).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&qb(i),v}),p=await _a._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(p.user),p}function rS(i,e,s){return is(i.app)?Promise.reject(Ai(i)):nS(Ot(i),Dl.credential(e,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qb(i),r})}function aS(i,e,s,r){return Ot(i).onIdTokenChanged(e,s,r)}function lS(i,e,s){return Ot(i).beforeAuthStateChanged(e,s)}function oS(i,e,s,r){return Ot(i).onAuthStateChanged(e,s,r)}function cS(i){return Ot(i).signOut()}const Td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Td,"1"),this.storage.removeItem(Td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=1e3,dS=10;class Fb extends Hb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),o=this.localCache[s];r!==o&&e(s,o,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((f,p,v)=>{this.notifyListeners(f,v)});return}const r=e.key;s?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!s&&this.localCache[r]===f||this.notifyListeners(r,f)},d=this.storage.getItem(r);ST()&&d!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,dS):o()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},uS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fb.type="LOCAL";const hS=Fb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb extends Hb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Gb.type="SESSION";const Yb=Gb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(o=>o.isListeningto(e));if(s)return s;const r=new Ud(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:o,data:d}=s.data,f=this.handlersMap[o];if(!f?.size)return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(f).map(async y=>y(s.origin,d)),v=await fS(p);s.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:v})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ud.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(i="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return i+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let d,f;return new Promise((p,v)=>{const y=cg("",20);o.port1.start();const _=setTimeout(()=>{v(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(_),d=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),p(A.data.response);break;default:clearTimeout(_),clearTimeout(d),v(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:s},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(){return window}function gS(i){Xs().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){return typeof Xs().WorkerGlobalScope<"u"&&typeof Xs().importScripts=="function"}async function pS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yS(){return navigator?.serviceWorker?.controller||null}function vS(){return Kb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="firebaseLocalStorageDb",xS=1,Sd="firebaseLocalStorage",$b="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function zd(i,e){return i.transaction([Sd],e?"readwrite":"readonly").objectStore(Sd)}function bS(){const i=indexedDB.deleteDatabase(Qb);return new pc(i).toPromise()}function Dm(){const i=indexedDB.open(Qb,xS);return new Promise((e,s)=>{i.addEventListener("error",()=>{s(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Sd,{keyPath:$b})}catch(o){s(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Sd)?e(r):(r.close(),await bS(),e(await Dm()))})})}async function Fv(i,e,s){const r=zd(i,!0).put({[$b]:e,value:s});return new pc(r).toPromise()}async function _S(i,e){const s=zd(i,!1).get(e),r=await new pc(s).toPromise();return r===void 0?null:r.value}function Gv(i,e){const s=zd(i,!0).delete(e);return new pc(s).toPromise()}const wS=800,ES=3;class Xb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dm(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>ES)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ud._getInstance(vS()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pS(),!this.activeServiceWorker)return;this.sender=new mS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dm();return await Fv(e,Td,"1"),await Gv(e,Td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>Fv(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>_S(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Gv(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const d=zd(o,!1).getAll();return new pc(d).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:d}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(d)&&(this.notifyListeners(o,d),s.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),s.push(o));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xb.type="LOCAL";const TS=Xb;new fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(i,e){return e?Ni(e):(Ue(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends lg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,s){return wl(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function NS(i){return Bb(i.auth,new ug(i),i.bypassAuthState)}function AS(i){const{auth:e,user:s}=i;return Ue(s,e,"internal-error"),tS(s,new ug(i),i.bypassAuthState)}async function jS(i){const{auth:e,user:s}=i;return Ue(s,e,"internal-error"),eS(s,new ug(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,s,r,o,d=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:o,tenantId:d,error:f,type:p}=e;if(f){this.reject(f);return}const v={auth:this.auth,requestUri:s,sessionId:r,tenantId:d||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(v))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NS;case"linkViaPopup":case"linkViaRedirect":return jS;case"reauthViaPopup":case"reauthViaRedirect":return AS;default:Es(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=new fc(2e3,1e4);class xl extends Wb{constructor(e,s,r,o,d){super(e,s,o,d),this.provider=r,this.authWindow=null,this.pollId=null,xl.currentPopupAction&&xl.currentPopupAction.cancel(),xl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=cg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject($s(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject($s(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($s(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CS.get())};e()}}xl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="pendingRedirect",cd=new Map;class IS extends Wb{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=cd.get(this.auth._key());if(!e){try{const r=await kS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}cd.set(this.auth._key(),e)}return this.bypassAuthState||cd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kS(i,e){const s=OS(e),r=MS(i);if(!await r._isAvailable())return!1;const o=await r._get(s)==="true";return await r._remove(s),o}function DS(i,e){cd.set(i._key(),e)}function MS(i){return Ni(i._redirectPersistence)}function OS(i){return od(RS,i.config.apiKey,i.name)}async function VS(i,e,s=!1){if(is(i.app))return Promise.reject(Ai(i));const r=Or(i),o=SS(r,e),f=await new IS(r,o,s).execute();return f&&!s&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=600*1e3;class PS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!US(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){if(e.error&&!Zb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";s.onError($s(this.auth,r))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yv(e))}saveEventToCache(e){this.cachedEventUids.add(Yv(e)),this.lastProcessedEventTime=Date.now()}}function Yv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Zb({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function US(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(i,e={}){return Vi(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qS=/^https?/;async function HS(i){if(i.config.emulator)return;const{authorizedDomains:e}=await zS(i);for(const s of e)try{if(FS(s))return}catch{}Es(i,"unauthorized-domain")}function FS(i){const e=Im(),{protocol:s,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&r===""?s==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&f.hostname===r}if(!qS.test(s))return!1;if(BS.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new fc(3e4,6e4);function Kv(){const i=Xs().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let s=0;s<i.CP.length;s++)i.CP[s]=null}}function YS(i){return new Promise((e,s)=>{function r(){Kv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kv(),s($s(i,"network-request-failed"))},timeout:GS.get()})}if(Xs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Xs().gapi?.load)r();else{const o=MT("iframefcb");return Xs()[o]=()=>{gapi.load?r():s($s(i,"network-request-failed"))},Vb(`${DT()}?onload=${o}`).catch(d=>s(d))}}).catch(e=>{throw ud=null,e})}let ud=null;function KS(i){return ud=ud||YS(i),ud}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=new fc(5e3,15e3),$S="__/auth/iframe",XS="emulator/auth/iframe",WS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JS(i){const e=i.config;Ue(e.authDomain,i,"auth-domain-config-required");const s=e.emulator?ig(e,XS):`https://${i.config.authDomain}/${$S}`,r={apiKey:e.apiKey,appName:i.name,v:kl},o=ZS.get(i.config.apiHost);o&&(r.eid=o);const d=i._getFrameworks();return d.length&&(r.fw=d.join(",")),`${s}?${hc(r).slice(1)}`}async function eN(i){const e=await KS(i),s=Xs().gapi;return Ue(s,i,"internal-error"),e.open({where:document.body,url:JS(i),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WS,dontclear:!0},r=>new Promise(async(o,d)=>{await r.restyle({setHideOnLeave:!1});const f=$s(i,"network-request-failed"),p=Xs().setTimeout(()=>{d(f)},QS.get());function v(){Xs().clearTimeout(p),o(r)}r.ping(v).then(v,()=>{d(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nN=500,sN=600,iN="_blank",rN="http://localhost";class Qv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aN(i,e,s,r=nN,o=sN){const d=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const v={...tN,width:r.toString(),height:o.toString(),top:d,left:f},y=pn().toLowerCase();s&&(p=Cb(y)?iN:s),Ab(y)&&(e=e||rN,v.scrollbars="yes");const _=Object.entries(v).reduce((A,[q,ee])=>`${A}${q}=${ee},`,"");if(TT(y)&&p!=="_self")return lN(e||"",p),new Qv(null);const E=window.open(e||"",p,_);Ue(E,i,"popup-blocked");try{E.focus()}catch{}return new Qv(E)}function lN(i,e){const s=document.createElement("a");s.href=i,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="__/auth/handler",cN="emulator/auth/handler",uN=encodeURIComponent("fac");async function $v(i,e,s,r,o,d){Ue(i.config.authDomain,i,"auth-domain-config-required"),Ue(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:s,redirectUrl:r,v:kl,eventId:o};if(e instanceof Ub){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",Yw(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))f[_]=E}if(e instanceof gc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const p=f;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const v=await i._getAppCheckToken(),y=v?`#${uN}=${encodeURIComponent(v)}`:"";return`${dN(i)}?${hc(p).slice(1)}${y}`}function dN({config:i}){return i.emulator?ig(i,cN):`https://${i.authDomain}/${oN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="webStorageSupport";class hN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yb,this._completeRedirectFn=VS,this._overrideRedirectResult=DS}async _openPopup(e,s,r,o){Ri(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const d=await $v(e,s,r,Im(),o);return aN(e,d,cg())}async _openRedirect(e,s,r,o){await this._originValidation(e);const d=await $v(e,s,r,Im(),o);return gS(d),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:o,promise:d}=this.eventManagers[s];return o?Promise.resolve(o):(Ri(d,"If manager is not set, promise should be"),d)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await eN(e),r=new PS(e);return s.register("authEvent",o=>(Ue(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(gm,{type:gm},o=>{const d=o?.[0]?.[gm];d!==void 0&&s(!!d),Es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=HS(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Mb()||jb()||ag()}}const fN=hN;var Xv="@firebase/auth",Wv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pN(i){Tl(new xa("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),d=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;Ue(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:f,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ob(i)},y=new RT(r,o,d,v);return zT(y,s),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),Tl(new xa("auth-internal",e=>{const s=Or(e.getProvider("auth").getImmediate());return(r=>new mN(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(Xv,Wv,gN(i)),Tr(Xv,Wv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=300,vN=ub("authIdTokenMaxAge")||yN;let Zv=null;const xN=i=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>vN)return;const o=s?.token;Zv!==o&&(Zv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function bN(i=pb()){const e=ng(i,"auth");if(e.isInitialized())return e.getImmediate();const s=UT(i,{popupRedirectResolver:fN,persistence:[TS,hS,Yb]}),r=ub("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const d=new URL(r,location.origin);if(location.origin===d.origin){const f=xN(d.toString());lS(s,f,()=>f(s.currentUser)),aS(s,p=>f(p))}}const o=ob("auth");return o&&BT(s,`http://${o}`),s}function _N(){return document.getElementsByTagName("head")?.[0]??document}IT({loadJS(i){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const d=$s("internal-error");d.customData=o,s(d)},r.type="text/javascript",r.charset="UTF-8",_N().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pN("Browser");var wN="firebase",EN="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(wN,EN,"app");var Jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sr,Jb;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,T){function j(){}j.prototype=T.prototype,R.F=T.prototype,R.prototype=new j,R.prototype.constructor=R,R.D=function(k,C,V){for(var I=Array(arguments.length-2),de=2;de<arguments.length;de++)I[de-2]=arguments[de];return T.prototype[C].apply(k,I)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,s),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,T,j){j||(j=0);const k=Array(16);if(typeof T=="string")for(var C=0;C<16;++C)k[C]=T.charCodeAt(j++)|T.charCodeAt(j++)<<8|T.charCodeAt(j++)<<16|T.charCodeAt(j++)<<24;else for(C=0;C<16;++C)k[C]=T[j++]|T[j++]<<8|T[j++]<<16|T[j++]<<24;T=R.g[0],j=R.g[1],C=R.g[2];let V=R.g[3],I;I=T+(V^j&(C^V))+k[0]+3614090360&4294967295,T=j+(I<<7&4294967295|I>>>25),I=V+(C^T&(j^C))+k[1]+3905402710&4294967295,V=T+(I<<12&4294967295|I>>>20),I=C+(j^V&(T^j))+k[2]+606105819&4294967295,C=V+(I<<17&4294967295|I>>>15),I=j+(T^C&(V^T))+k[3]+3250441966&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(V^j&(C^V))+k[4]+4118548399&4294967295,T=j+(I<<7&4294967295|I>>>25),I=V+(C^T&(j^C))+k[5]+1200080426&4294967295,V=T+(I<<12&4294967295|I>>>20),I=C+(j^V&(T^j))+k[6]+2821735955&4294967295,C=V+(I<<17&4294967295|I>>>15),I=j+(T^C&(V^T))+k[7]+4249261313&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(V^j&(C^V))+k[8]+1770035416&4294967295,T=j+(I<<7&4294967295|I>>>25),I=V+(C^T&(j^C))+k[9]+2336552879&4294967295,V=T+(I<<12&4294967295|I>>>20),I=C+(j^V&(T^j))+k[10]+4294925233&4294967295,C=V+(I<<17&4294967295|I>>>15),I=j+(T^C&(V^T))+k[11]+2304563134&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(V^j&(C^V))+k[12]+1804603682&4294967295,T=j+(I<<7&4294967295|I>>>25),I=V+(C^T&(j^C))+k[13]+4254626195&4294967295,V=T+(I<<12&4294967295|I>>>20),I=C+(j^V&(T^j))+k[14]+2792965006&4294967295,C=V+(I<<17&4294967295|I>>>15),I=j+(T^C&(V^T))+k[15]+1236535329&4294967295,j=C+(I<<22&4294967295|I>>>10),I=T+(C^V&(j^C))+k[1]+4129170786&4294967295,T=j+(I<<5&4294967295|I>>>27),I=V+(j^C&(T^j))+k[6]+3225465664&4294967295,V=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(V^T))+k[11]+643717713&4294967295,C=V+(I<<14&4294967295|I>>>18),I=j+(V^T&(C^V))+k[0]+3921069994&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(C^V&(j^C))+k[5]+3593408605&4294967295,T=j+(I<<5&4294967295|I>>>27),I=V+(j^C&(T^j))+k[10]+38016083&4294967295,V=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(V^T))+k[15]+3634488961&4294967295,C=V+(I<<14&4294967295|I>>>18),I=j+(V^T&(C^V))+k[4]+3889429448&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(C^V&(j^C))+k[9]+568446438&4294967295,T=j+(I<<5&4294967295|I>>>27),I=V+(j^C&(T^j))+k[14]+3275163606&4294967295,V=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(V^T))+k[3]+4107603335&4294967295,C=V+(I<<14&4294967295|I>>>18),I=j+(V^T&(C^V))+k[8]+1163531501&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(C^V&(j^C))+k[13]+2850285829&4294967295,T=j+(I<<5&4294967295|I>>>27),I=V+(j^C&(T^j))+k[2]+4243563512&4294967295,V=T+(I<<9&4294967295|I>>>23),I=C+(T^j&(V^T))+k[7]+1735328473&4294967295,C=V+(I<<14&4294967295|I>>>18),I=j+(V^T&(C^V))+k[12]+2368359562&4294967295,j=C+(I<<20&4294967295|I>>>12),I=T+(j^C^V)+k[5]+4294588738&4294967295,T=j+(I<<4&4294967295|I>>>28),I=V+(T^j^C)+k[8]+2272392833&4294967295,V=T+(I<<11&4294967295|I>>>21),I=C+(V^T^j)+k[11]+1839030562&4294967295,C=V+(I<<16&4294967295|I>>>16),I=j+(C^V^T)+k[14]+4259657740&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(j^C^V)+k[1]+2763975236&4294967295,T=j+(I<<4&4294967295|I>>>28),I=V+(T^j^C)+k[4]+1272893353&4294967295,V=T+(I<<11&4294967295|I>>>21),I=C+(V^T^j)+k[7]+4139469664&4294967295,C=V+(I<<16&4294967295|I>>>16),I=j+(C^V^T)+k[10]+3200236656&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(j^C^V)+k[13]+681279174&4294967295,T=j+(I<<4&4294967295|I>>>28),I=V+(T^j^C)+k[0]+3936430074&4294967295,V=T+(I<<11&4294967295|I>>>21),I=C+(V^T^j)+k[3]+3572445317&4294967295,C=V+(I<<16&4294967295|I>>>16),I=j+(C^V^T)+k[6]+76029189&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(j^C^V)+k[9]+3654602809&4294967295,T=j+(I<<4&4294967295|I>>>28),I=V+(T^j^C)+k[12]+3873151461&4294967295,V=T+(I<<11&4294967295|I>>>21),I=C+(V^T^j)+k[15]+530742520&4294967295,C=V+(I<<16&4294967295|I>>>16),I=j+(C^V^T)+k[2]+3299628645&4294967295,j=C+(I<<23&4294967295|I>>>9),I=T+(C^(j|~V))+k[0]+4096336452&4294967295,T=j+(I<<6&4294967295|I>>>26),I=V+(j^(T|~C))+k[7]+1126891415&4294967295,V=T+(I<<10&4294967295|I>>>22),I=C+(T^(V|~j))+k[14]+2878612391&4294967295,C=V+(I<<15&4294967295|I>>>17),I=j+(V^(C|~T))+k[5]+4237533241&4294967295,j=C+(I<<21&4294967295|I>>>11),I=T+(C^(j|~V))+k[12]+1700485571&4294967295,T=j+(I<<6&4294967295|I>>>26),I=V+(j^(T|~C))+k[3]+2399980690&4294967295,V=T+(I<<10&4294967295|I>>>22),I=C+(T^(V|~j))+k[10]+4293915773&4294967295,C=V+(I<<15&4294967295|I>>>17),I=j+(V^(C|~T))+k[1]+2240044497&4294967295,j=C+(I<<21&4294967295|I>>>11),I=T+(C^(j|~V))+k[8]+1873313359&4294967295,T=j+(I<<6&4294967295|I>>>26),I=V+(j^(T|~C))+k[15]+4264355552&4294967295,V=T+(I<<10&4294967295|I>>>22),I=C+(T^(V|~j))+k[6]+2734768916&4294967295,C=V+(I<<15&4294967295|I>>>17),I=j+(V^(C|~T))+k[13]+1309151649&4294967295,j=C+(I<<21&4294967295|I>>>11),I=T+(C^(j|~V))+k[4]+4149444226&4294967295,T=j+(I<<6&4294967295|I>>>26),I=V+(j^(T|~C))+k[11]+3174756917&4294967295,V=T+(I<<10&4294967295|I>>>22),I=C+(T^(V|~j))+k[2]+718787259&4294967295,C=V+(I<<15&4294967295|I>>>17),I=j+(V^(C|~T))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+C&4294967295,R.g[3]=R.g[3]+V&4294967295}r.prototype.v=function(R,T){T===void 0&&(T=R.length);const j=T-this.blockSize,k=this.C;let C=this.h,V=0;for(;V<T;){if(C==0)for(;V<=j;)o(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<T;)if(k[C++]=R.charCodeAt(V++),C==this.blockSize){o(this,k),C=0;break}}else for(;V<T;)if(k[C++]=R[V++],C==this.blockSize){o(this,k),C=0;break}}this.h=C,this.o+=T},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var j=R.length-8;j<R.length;++j)R[j]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,j=0;j<4;++j)for(let k=0;k<32;k+=8)R[T++]=this.g[j]>>>k&255;return R};function d(R,T){var j=p;return Object.prototype.hasOwnProperty.call(j,R)?j[R]:j[R]=T(R)}function f(R,T){this.h=T;const j=[];let k=!0;for(let C=R.length-1;C>=0;C--){const V=R[C]|0;k&&V==T||(j[C]=V,k=!1)}this.g=j}var p={};function v(R){return-128<=R&&R<128?d(R,function(T){return new f([T|0],T<0?-1:0)}):new f([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return z(y(-R));const T=[];let j=1;for(let k=0;R>=j;k++)T[k]=R/j|0,j*=4294967296;return new f(T,0)}function _(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return z(_(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=y(Math.pow(T,8));let k=E;for(let V=0;V<R.length;V+=8){var C=Math.min(8,R.length-V);const I=parseInt(R.substring(V,V+C),T);C<8?(C=y(Math.pow(T,C)),k=k.j(C).add(y(I))):(k=k.j(j),k=k.add(y(I)))}return k}var E=v(0),A=v(1),q=v(16777216);i=f.prototype,i.m=function(){if(W(this))return-z(this).m();let R=0,T=1;for(let j=0;j<this.g.length;j++){const k=this.i(j);R+=(k>=0?k:4294967296+k)*T,T*=4294967296}return R},i.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(ee(this))return"0";if(W(this))return"-"+z(this).toString(R);const T=y(Math.pow(R,6));var j=this;let k="";for(;;){const C=ue(j,T).g;j=ne(j,C.j(T));let V=((j.g.length>0?j.g[0]:j.h)>>>0).toString(R);if(j=C,ee(j))return V+k;for(;V.length<6;)V="0"+V;k=V+k}},i.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function ee(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function W(R){return R.h==-1}i.l=function(R){return R=ne(this,R),W(R)?-1:ee(R)?0:1};function z(R){const T=R.g.length,j=[];for(let k=0;k<T;k++)j[k]=~R.g[k];return new f(j,~R.h).add(A)}i.abs=function(){return W(this)?z(this):this},i.add=function(R){const T=Math.max(this.g.length,R.g.length),j=[];let k=0;for(let C=0;C<=T;C++){let V=k+(this.i(C)&65535)+(R.i(C)&65535),I=(V>>>16)+(this.i(C)>>>16)+(R.i(C)>>>16);k=I>>>16,V&=65535,I&=65535,j[C]=I<<16|V}return new f(j,j[j.length-1]&-2147483648?-1:0)};function ne(R,T){return R.add(z(T))}i.j=function(R){if(ee(this)||ee(R))return E;if(W(this))return W(R)?z(this).j(z(R)):z(z(this).j(R));if(W(R))return z(this.j(z(R)));if(this.l(q)<0&&R.l(q)<0)return y(this.m()*R.m());const T=this.g.length+R.g.length,j=[];for(var k=0;k<2*T;k++)j[k]=0;for(k=0;k<this.g.length;k++)for(let C=0;C<R.g.length;C++){const V=this.i(k)>>>16,I=this.i(k)&65535,de=R.i(C)>>>16,Me=R.i(C)&65535;j[2*k+2*C]+=I*Me,Z(j,2*k+2*C),j[2*k+2*C+1]+=V*Me,Z(j,2*k+2*C+1),j[2*k+2*C+1]+=I*de,Z(j,2*k+2*C+1),j[2*k+2*C+2]+=V*de,Z(j,2*k+2*C+2)}for(R=0;R<T;R++)j[R]=j[2*R+1]<<16|j[2*R];for(R=T;R<2*T;R++)j[R]=0;return new f(j,0)};function Z(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function ge(R,T){this.g=R,this.h=T}function ue(R,T){if(ee(T))throw Error("division by zero");if(ee(R))return new ge(E,E);if(W(R))return T=ue(z(R),T),new ge(z(T.g),z(T.h));if(W(T))return T=ue(R,z(T)),new ge(z(T.g),T.h);if(R.g.length>30){if(W(R)||W(T))throw Error("slowDivide_ only works with positive integers.");for(var j=A,k=T;k.l(R)<=0;)j=ye(j),k=ye(k);var C=Ee(j,1),V=Ee(k,1);for(k=Ee(k,2),j=Ee(j,2);!ee(k);){var I=V.add(k);I.l(R)<=0&&(C=C.add(j),V=I),k=Ee(k,1),j=Ee(j,1)}return T=ne(R,C.j(T)),new ge(C,T)}for(C=E;R.l(T)>=0;){for(j=Math.max(1,Math.floor(R.m()/T.m())),k=Math.ceil(Math.log(j)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),V=y(j),I=V.j(T);W(I)||I.l(R)>0;)j-=k,V=y(j),I=V.j(T);ee(V)&&(V=A),C=C.add(V),R=ne(R,I)}return new ge(C,R)}i.B=function(R){return ue(this,R).h},i.and=function(R){const T=Math.max(this.g.length,R.g.length),j=[];for(let k=0;k<T;k++)j[k]=this.i(k)&R.i(k);return new f(j,this.h&R.h)},i.or=function(R){const T=Math.max(this.g.length,R.g.length),j=[];for(let k=0;k<T;k++)j[k]=this.i(k)|R.i(k);return new f(j,this.h|R.h)},i.xor=function(R){const T=Math.max(this.g.length,R.g.length),j=[];for(let k=0;k<T;k++)j[k]=this.i(k)^R.i(k);return new f(j,this.h^R.h)};function ye(R){const T=R.g.length+1,j=[];for(let k=0;k<T;k++)j[k]=R.i(k)<<1|R.i(k-1)>>>31;return new f(j,R.h)}function Ee(R,T){const j=T>>5;T%=32;const k=R.g.length-j,C=[];for(let V=0;V<k;V++)C[V]=T>0?R.i(V+j)>>>T|R.i(V+j+1)<<32-T:R.i(V+j);return new f(C,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Jb=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=_,Sr=f}).apply(typeof Jv<"u"?Jv:typeof self<"u"?self:typeof window<"u"?window:{});var ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var e_,Ho,t_,dd,Mm,n_,s_,i_;(function(){var i,e=Object.defineProperty;function s(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ed=="object"&&ed];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=s(this);function o(u,g){if(g)e:{var b=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var B=u[N];if(!(B in b))break e;b=b[B]}u=u[u.length-1],N=b[u],g=g(N),g!=N&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var b=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&b.push([N,g[N]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function v(u,g,b){return u.call.apply(u.bind,arguments)}function y(u,g,b){return y=v,y.apply(null,arguments)}function _(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function E(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(N,B,Q){for(var pe=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)pe[Ye-2]=arguments[Ye];return g.prototype[B].apply(N,pe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function q(u){const g=u.length;if(g>0){const b=Array(g);for(let N=0;N<g;N++)b[N]=u[N];return b}return[]}function ee(u,g){for(let N=1;N<arguments.length;N++){const B=arguments[N];var b=typeof B;if(b=b!="object"?b:B?Array.isArray(B)?"array":b:"null",b=="array"||b=="object"&&typeof B.length=="number"){b=u.length||0;const Q=B.length||0;u.length=b+Q;for(let pe=0;pe<Q;pe++)u[b+pe]=B[pe]}else u.push(B)}}class W{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function z(u){f.setTimeout(()=>{throw u},0)}function ne(){var u=R;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Z{constructor(){this.h=this.g=null}add(g,b){const N=ge.get();N.set(g,b),this.h?this.h.next=N:this.g=N,this.h=N}}var ge=new W(()=>new ue,u=>u.reset());class ue{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,Ee=!1,R=new Z,T=()=>{const u=Promise.resolve(void 0);ye=()=>{u.then(j)}};function j(){for(var u;u=ne();){try{u.h.call(u.g)}catch(b){z(b)}var g=ge;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}Ee=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};f.addEventListener("test",b,g),f.removeEventListener("test",b,g)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function de(u,g){C.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}E(de,C),de.prototype.init=function(u,g){const b=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),Y=0;function he(u,g,b,N,B){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!N,this.ha=B,this.key=++Y,this.da=this.fa=!1}function be(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Be(u,g,b){for(const N in u)g.call(b,u[N],N,u)}function $e(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function S(u){const g={};for(const b in u)g[b]=u[b];return g}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(u,g){let b,N;for(let B=1;B<arguments.length;B++){N=arguments[B];for(b in N)u[b]=N[b];for(let Q=0;Q<P.length;Q++)b=P[Q],Object.prototype.hasOwnProperty.call(N,b)&&(u[b]=N[b])}}function L(u){this.src=u,this.g={},this.h=0}L.prototype.add=function(u,g,b,N,B){const Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);const pe=X(u,g,N,B);return pe>-1?(g=u[pe],b||(g.fa=!1)):(g=new he(g,this.src,Q,!!N,B),g.fa=b,u.push(g)),g};function M(u,g){const b=g.type;if(b in u.g){var N=u.g[b],B=Array.prototype.indexOf.call(N,g,void 0),Q;(Q=B>=0)&&Array.prototype.splice.call(N,B,1),Q&&(be(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function X(u,g,b,N){for(let B=0;B<u.length;++B){const Q=u[B];if(!Q.da&&Q.listener==g&&Q.capture==!!b&&Q.ha==N)return B}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),Ae={};function Re(u,g,b,N,B){if(Array.isArray(g)){for(let Q=0;Q<g.length;Q++)Re(u,g[Q],b,N,B);return null}return b=we(b),u&&u[Me]?u.J(g,b,p(N)?!!N.capture:!1,B):te(u,g,b,!1,N,B)}function te(u,g,b,N,B,Q){if(!g)throw Error("Invalid event type");const pe=p(B)?!!B.capture:!!B;let Ye=K(u);if(Ye||(u[oe]=Ye=new L(u)),b=Ye.add(g,b,N,pe,Q),b.proxy)return b;if(N=xe(),b.proxy=N,N.src=u,N.listener=b,u.addEventListener)V||(B=pe),B===void 0&&(B=!1),u.addEventListener(g.toString(),N,B);else if(u.attachEvent)u.attachEvent(Ce(g.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function xe(){function u(b){return g.call(u.src,u.listener,b)}const g=Te;return u}function fe(u,g,b,N,B){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)fe(u,g[Q],b,N,B);else N=p(N)?!!N.capture:!!N,b=we(b),u&&u[Me]?(u=u.i,Q=String(g).toString(),Q in u.g&&(g=u.g[Q],b=X(g,b,N,B),b>-1&&(be(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[Q],u.h--)))):u&&(u=K(u))&&(g=u.g[g.toString()],u=-1,g&&(u=X(g,b,N,B)),(b=u>-1?g[u]:null)&&Oe(b))}function Oe(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Me])M(g.i,u);else{var b=u.type,N=u.proxy;g.removeEventListener?g.removeEventListener(b,N,u.capture):g.detachEvent?g.detachEvent(Ce(b),N):g.addListener&&g.removeListener&&g.removeListener(N),(b=K(g))?(M(b,u),b.h==0&&(b.src=null,g[oe]=null)):be(u)}}}function Ce(u){return u in Ae?Ae[u]:Ae[u]="on"+u}function Te(u,g){if(u.da)u=!0;else{g=new de(g,this);const b=u.listener,N=u.ha||u.src;u.fa&&Oe(u),u=b.call(N,g)}return u}function K(u){return u=u[oe],u instanceof L?u:null}var ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function we(u){return typeof u=="function"?u:(u[ve]||(u[ve]=function(g){return u.handleEvent(g)}),u[ve])}function Ve(){k.call(this),this.i=new L(this),this.M=this,this.G=null}E(Ve,k),Ve.prototype[Me]=!0,Ve.prototype.removeEventListener=function(u,g,b,N){fe(this,u,g,b,N)};function me(u,g){var b,N=u.G;if(N)for(b=[];N;N=N.G)b.push(N);if(u=u.M,N=g.type||g,typeof g=="string")g=new C(g,u);else if(g instanceof C)g.target=g.target||u;else{var B=g;g=new C(N,u),J(g,B)}B=!0;let Q,pe;if(b)for(pe=b.length-1;pe>=0;pe--)Q=g.g=b[pe],B=Ie(Q,N,!0,g)&&B;if(Q=g.g=u,B=Ie(Q,N,!0,g)&&B,B=Ie(Q,N,!1,g)&&B,b)for(pe=0;pe<b.length;pe++)Q=g.g=b[pe],B=Ie(Q,N,!1,g)&&B}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let N=0;N<b.length;N++)be(b[N]);delete u.g[g],u.h--}}this.G=null},Ve.prototype.J=function(u,g,b,N){return this.i.add(String(u),g,!1,b,N)},Ve.prototype.K=function(u,g,b,N){return this.i.add(String(u),g,!0,b,N)};function Ie(u,g,b,N){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let B=!0;for(let Q=0;Q<g.length;++Q){const pe=g[Q];if(pe&&!pe.da&&pe.capture==b){const Ye=pe.listener,Rt=pe.ha||pe.src;pe.fa&&M(u.i,pe),B=Ye.call(Rt,N)!==!1&&B}}return B&&!N.defaultPrevented}function xt(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function si(u){u.g=xt(()=>{u.g=null,u.i&&(u.i=!1,si(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Vt extends k{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:si(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ii(u){k.call(this),this.h=u,this.g={}}E(ii,k);var ri=[];function Li(u){Be(u.g,function(g,b){this.g.hasOwnProperty(b)&&Oe(g)},u),u.g={}}ii.prototype.N=function(){ii.Z.N.call(this),Li(this)},ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ss=f.JSON.stringify,Hn=f.JSON.parse,Na=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Nc(){}function Ac(){}var os={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nn(){C.call(this,"d")}E(nn,C);function Fn(){C.call(this,"c")}E(Fn,C);var Ct={},jc=null;function Aa(){return jc=jc||new Ve}Ct.Ia="serverreachability";function Cc(u){C.call(this,Ct.Ia,u)}E(Cc,C);function Ns(u){const g=Aa();me(g,new Cc(g))}Ct.STAT_EVENT="statevent";function Ur(u,g){C.call(this,Ct.STAT_EVENT,u),this.stat=g}E(Ur,C);function Lt(u){const g=Aa();me(g,new Ur(g,u))}Ct.Ja="timingevent";function As(u,g){C.call(this,Ct.Ja,u),this.size=g}E(As,C);function js(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function cs(){this.g=!0}cs.prototype.ua=function(){this.g=!1};function ah(u,g,b,N,B,Q){u.info(function(){if(u.g)if(Q){var pe="",Ye=Q.split("&");for(let lt=0;lt<Ye.length;lt++){var Rt=Ye[lt].split("=");if(Rt.length>1){const Tt=Rt[0];Rt=Rt[1];const Qn=Tt.split("_");pe=Qn.length>=2&&Qn[1]=="type"?pe+(Tt+"="+Rt+"&"):pe+(Tt+"=redacted&")}}}else pe=null;else pe=Q;return"XMLHTTP REQ ("+N+") [attempt "+B+"]: "+g+`
`+b+`
`+pe})}function Rc(u,g,b,N,B,Q,pe){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+B+"]: "+g+`
`+b+`
`+Q+" "+pe})}function Cs(u,g,b,N){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+lh(u,b)+(N?" "+N:"")})}function zr(u,g){u.info(function(){return"TIMEOUT: "+g})}cs.prototype.info=function(){};function lh(u,g){if(!u.g)return g;if(!g)return null;try{const Q=JSON.parse(g);if(Q){for(u=0;u<Q.length;u++)if(Array.isArray(Q[u])){var b=Q[u];if(!(b.length<2)){var N=b[1];if(Array.isArray(N)&&!(N.length<1)){var B=N[0];if(B!="noop"&&B!="stop"&&B!="close")for(let pe=1;pe<N.length;pe++)N[pe]=""}}}}return Ss(Q)}catch{return g}}var Br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ul={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zl;function qr(){}E(qr,Nc),qr.prototype.g=function(){return new XMLHttpRequest},zl=new qr;function ai(u){return encodeURIComponent(String(u))}function Ic(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function us(u,g,b,N){this.j=u,this.i=g,this.l=b,this.S=N||1,this.V=new ii(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ds}function ds(){this.i=null,this.g="",this.h=!1}var Pt={},Zt={};function Rs(u,g,b){u.M=1,u.A=Hr(zt(g)),u.u=b,u.R=!0,ja(u,null)}function ja(u,g){u.F=Date.now(),Is(u),u.B=zt(u.A);var b=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),ka(b.i,"t",N),u.C=0,b=u.j.L,u.h=new ds,u.g=Yc(u.j,b?g:null,!u.u),u.P>0&&(u.O=new Vt(y(u.Y,u,u.g),u.P)),g=u.V,b=u.g,N=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(ri[0]=B.toString()),B=ri);for(let Q=0;Q<B.length;Q++){const pe=Re(b,B[Q],N||g.handleEvent,!1,g.h||g);if(!pe)break;g.g[pe.key]=pe}g=u.J?S(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Ns(),ah(u.i,u.v,u.B,u.l,u.S,u.u)}us.prototype.ba=function(u){u=u.target;const g=this.O;g&&ms(u)==3?g.j():this.Y(u)},us.prototype.Y=function(u){try{if(u==this.g)e:{const Ye=ms(this.g),Rt=this.g.ya(),lt=this.g.ca();if(!(Ye<3)&&(Ye!=3||this.g&&(this.h.h||this.g.la()||sn(this.g)))){this.K||Ye!=4||Rt==7||(Rt==8||lt<=0?Ns(3):Ns(2)),ks(this);var g=this.g.ca();this.X=g;var b=oh(this);if(this.o=g==200,Rc(this.i,this.v,this.B,this.l,this.S,Ye,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,B=this.g;if((N=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(N)){var Q=N;break t}}Q=null}if(u=Q)Cs(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ds(this,u);else{this.o=!1,this.m=3,Lt(12),In(this),Gn(this);break e}}if(this.R){u=!0;let Tt;for(;!this.K&&this.C<b.length;)if(Tt=Dc(this,b),Tt==Zt){Ye==4&&(this.m=4,Lt(14),u=!1),Cs(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==Pt){this.m=4,Lt(15),Cs(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else Cs(this.i,this.l,Tt,null),Ds(this,Tt);if(kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||b.length!=0||this.h.h||(this.m=1,Lt(16),u=!1),this.o=this.o&&u,!u)Cs(this.i,this.l,b,"[Invalid Chunked Response]"),In(this),Gn(this);else if(b.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),to(pe),pe.P=!0,Lt(11))}}else Cs(this.i,this.l,b,null),Ds(this,b);Ye==4&&In(this),this.o&&!this.K&&(Ye==4?qc(this.j,this):(this.o=!1,Is(this)))}else oi(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),In(this),Gn(this)}}}catch{}finally{}};function oh(u){if(!kc(u))return u.g.la();const g=sn(u.g);if(g==="")return"";let b="";const N=g.length,B=ms(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return In(u),Gn(u),"";u.h.i=new f.TextDecoder}for(let Q=0;Q<N;Q++)u.h.h=!0,b+=u.h.i.decode(g[Q],{stream:!(B&&Q==N-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function kc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Dc(u,g){var b=u.C,N=g.indexOf(`
`,b);return N==-1?Zt:(b=Number(g.substring(b,N)),isNaN(b)?Pt:(N+=1,N+b>g.length?Zt:(g=g.slice(N,N+b),u.C=N+b,g)))}us.prototype.cancel=function(){this.K=!0,In(this)};function Is(u){u.T=Date.now()+u.H,Ca(u,u.H)}function Ca(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=js(y(u.aa,u),g)}function ks(u){u.D&&(f.clearTimeout(u.D),u.D=null)}us.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(zr(this.i,this.B),this.M!=2&&(Ns(),Lt(17)),In(this),this.m=2,Gn(this)):Ca(this,this.T-u)};function Gn(u){u.j.I==0||u.K||qc(u.j,u)}function In(u){ks(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Li(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ds(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||Os(b.h,u))){if(!u.L&&Os(b.h,u)&&b.I==3){try{var N=b.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var B=N;if(B[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)La(b),Gi(b);else break e;Xr(b),Lt(18)}}else b.xa=B[1],0<b.xa-b.K&&B[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=js(y(b.Va,b),6e3));Ms(b.h)<=1&&b.ta&&(b.ta=void 0)}else Bs(b,11)}else if((u.L||b.g==u)&&La(b),!I(g))for(B=b.Ba.g.parse(g),g=0;g<B.length;g++){let lt=B[g];const Tt=lt[0];if(!(Tt<=b.K))if(b.K=Tt,lt=lt[1],b.I==2)if(lt[0]=="c"){b.M=lt[1],b.ba=lt[2];const Qn=lt[3];Qn!=null&&(b.ka=Qn,b.j.info("VER="+b.ka));const qs=lt[4];qs!=null&&(b.za=qs,b.j.info("SVER="+b.za));const gs=lt[5];gs!=null&&typeof gs=="number"&&gs>0&&(N=1.5*gs,b.O=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const ps=u.g;if(ps){const Wr=ps.g?ps.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wr){var Q=N.h;Q.g||Wr.indexOf("spdy")==-1&&Wr.indexOf("quic")==-1&&Wr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Hl(Q,Q.h),Q.h=null))}if(N.G){const Pa=ps.g?ps.g.getResponseHeader("X-HTTP-Session-Id"):null;Pa&&(N.wa=Pa,ut(N.J,N.G,Pa))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),N=b;var pe=u;if(N.na=Gc(N,N.L?N.ba:null,N.W),pe.L){Fl(N.h,pe);var Ye=pe,Rt=N.O;Rt&&(Ye.H=Rt),Ye.D&&(ks(Ye),Is(Ye)),N.g=pe}else zc(N);b.i.length>0&&zs(b)}else lt[0]!="stop"&&lt[0]!="close"||Bs(b,7);else b.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Bs(b,7):Jl(b):lt[0]!="noop"&&b.l&&b.l.qa(lt),b.A=0)}}Ns(4)}catch{}}var Ut=class{constructor(u,g){this.g=u,this.map=g}};function Bl(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ql(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ms(u){return u.h?1:u.g?u.g.size:0}function Os(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Hl(u,g){u.g?u.g.add(g):u.h=g}function Fl(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Bl.prototype.cancel=function(){if(this.i=Gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Gl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return q(u.i)}var Mc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const N=u[b].indexOf("=");let B,Q=null;N>=0?(B=u[b].substring(0,N),Q=u[b].substring(N+1)):B=u[b],g(B,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function kn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof kn?(this.l=u.l,Jt(this,u.j),this.o=u.o,this.g=u.g,Pi(this,u.u),this.h=u.h,Yl(this,Pc(u.i)),this.m=u.m):u&&(g=String(u).match(Mc))?(this.l=!1,Jt(this,g[1]||"",!0),this.o=Vs(g[2]||""),this.g=Vs(g[3]||"",!0),Pi(this,g[4]),this.h=Vs(g[5]||"",!0),Yl(this,g[6]||"",!0),this.m=Vs(g[7]||"")):(this.l=!1,this.i=new zi(null,this.l))}kn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Fr(g,Ia,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Fr(g,Ia,!0),"@"),u.push(ai(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Fr(b,b.charAt(0)=="/"?Kl:Oc,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Fr(b,Vc)),u.join("")},kn.prototype.resolve=function(u){const g=zt(this);let b=!!u.j;b?Jt(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var N=u.h;if(b)Pi(g,u.u);else if(b=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var B=g.h.lastIndexOf("/");B!=-1&&(N=g.h.slice(0,B+1)+N)}if(B=N,B==".."||B==".")N="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){N=B.lastIndexOf("/",0)==0,B=B.split("/");const Q=[];for(let pe=0;pe<B.length;){const Ye=B[pe++];Ye=="."?N&&pe==B.length&&Q.push(""):Ye==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),N&&pe==B.length&&Q.push("")):(Q.push(Ye),N=!0)}N=Q.join("/")}else N=B}return b?g.h=N:b=u.i.toString()!=="",b?Yl(g,Pc(u.i)):b=!!u.m,b&&(g.m=u.m),g};function zt(u){return new kn(u)}function Jt(u,g,b){u.j=b?Vs(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Pi(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Yl(u,g,b){g instanceof zi?(u.i=g,Da(u.i,u.l)):(b||(g=Fr(g,Ui)),u.i=new zi(g,u.l))}function ut(u,g,b){u.i.set(g,b)}function Hr(u){return ut(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Vs(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Fr(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,wn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function wn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ia=/[#\/\?@]/g,Oc=/[#\?:]/g,Kl=/[#\?]/g,Ui=/[#\?@]/g,Vc=/#/g;function zi(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function En(u){u.g||(u.g=new Map,u.h=0,u.i&&Ra(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}i=zi.prototype,i.add=function(u,g){En(this),this.i=null,u=Bi(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Lc(u,g){En(u),g=Bi(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Ql(u,g){return En(u),g=Bi(u,g),u.g.has(g)}i.forEach=function(u,g){En(this),this.g.forEach(function(b,N){b.forEach(function(B){u.call(g,B,N,this)},this)},this)};function $l(u,g){En(u);let b=[];if(typeof g=="string")Ql(u,g)&&(b=b.concat(u.g.get(Bi(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}i.set=function(u,g){return En(this),this.i=null,u=Bi(this,u),Ql(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},i.get=function(u,g){return u?(u=$l(this,u),u.length>0?String(u[0]):g):g};function ka(u,g,b){Lc(u,g),b.length>0&&(u.i=null,u.g.set(Bi(u,g),q(b)),u.h+=b.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var b=g[N];const B=ai(b);b=$l(this,b);for(let Q=0;Q<b.length;Q++){let pe=B;b[Q]!==""&&(pe+="="+ai(b[Q])),u.push(pe)}}return this.i=u.join("&")};function Pc(u){const g=new zi;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Bi(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Da(u,g){g&&!u.j&&(En(u),u.i=null,u.g.forEach(function(b,N){const B=N.toLowerCase();N!=B&&(Lc(this,N),ka(this,B,b))},u)),u.j=g}function hs(u,g){const b=new cs;if(f.Image){const N=new Image;N.onload=_(Yn,b,"TestLoadImage: loaded",!0,g,N),N.onerror=_(Yn,b,"TestLoadImage: error",!1,g,N),N.onabort=_(Yn,b,"TestLoadImage: abort",!1,g,N),N.ontimeout=_(Yn,b,"TestLoadImage: timeout",!1,g,N),f.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else g(!1)}function Xl(u,g){const b=new cs,N=new AbortController,B=setTimeout(()=>{N.abort(),Yn(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:N.signal}).then(Q=>{clearTimeout(B),Q.ok?Yn(b,"TestPingServer: ok",!0,g):Yn(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Yn(b,"TestPingServer: error",!1,g)})}function Yn(u,g,b,N,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),N(b)}catch{}}function qi(){this.g=new Na}function Ls(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Ls,Nc),Ls.prototype.g=function(){return new Gr(this.i,this.h)};function Gr(u,g){Ve.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Gr,Ve),i=Gr.prototype,i.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,fs(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hi(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,fs(this)),this.g&&(this.readyState=3,fs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ma(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ma(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Hi(this):fs(this),this.readyState==3&&Ma(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,Hi(this))},i.Na=function(u){this.g&&(this.response=u,Hi(this))},i.ga=function(){this.g&&Hi(this)};function Hi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,fs(u)}i.setRequestHeader=function(u,g){this.A.append(u,g)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function fs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Kn(u){let g="";return Be(u,function(b,N){g+=N,g+=":",g+=b,g+=`\r
`}),g}function Yr(u,g,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=Kn(b),typeof u=="string"?b!=null&&ai(b):ut(u,g,b))}function ft(u){Ve.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ft,Ve);var Ps=/^https?$/i,Wl=["POST","PUT"];i=ft.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,g,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zl.g(),this.g.onreadystatechange=A(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Q){Kr(this,Q);return}if(u=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var B in N)b.set(B,N[B]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Q of N.keys())b.set(Q,N.get(Q));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(Wl,g,void 0)>=0)||N||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,pe]of b)this.g.setRequestHeader(Q,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Q){Kr(this,Q)}};function Kr(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Zl(u),li(u)}function Zl(u){u.A||(u.A=!0,me(u,"complete"),me(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,me(this,"complete"),me(this,"abort"),li(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),ft.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Qr(this):this.Xa())},i.Xa=function(){Qr(this)};function Qr(u){if(u.h&&typeof d<"u"){if(u.v&&ms(u)==4)setTimeout(u.Ca.bind(u),0);else if(me(u,"readystatechange"),ms(u)==4){u.h=!1;try{const Q=u.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var N;if(N=Q===0){let pe=String(u.D).match(Mc)[1]||null;!pe&&f.self&&f.self.location&&(pe=f.self.location.protocol.slice(0,-1)),N=!Ps.test(pe?pe.toLowerCase():"")}b=N}if(b)me(u,"complete"),me(u,"success");else{u.o=6;try{var B=ms(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",Zl(u)}}finally{li(u)}}}}function li(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||me(u,"ready");try{b.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ms(u){return u.g?u.g.readyState:0}i.ca=function(){try{return ms(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Hn(g)}};function sn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function oi(u){const g={};u=(u.g&&ms(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(I(u[N]))continue;var b=Ic(u[N]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Q=g[B]||[];g[B]=Q,Q.push(b)}$e(g,function(N){return N.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Us(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function Fi(u){this.za=0,this.i=[],this.j=new cs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Us("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Us("baseRetryDelayMs",5e3,u),this.Za=Us("retryDelaySeedMs",1e4,u),this.Ta=Us("forwardChannelMaxRetries",2,u),this.va=Us("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Bl(u&&u.concurrentRequestLimit),this.Ba=new qi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Fi.prototype,i.ka=8,i.I=1,i.connect=function(u,g,b,N){Lt(0),this.W=u,this.H=g||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.J=Gc(this,null,this.W),zs(this)};function Jl(u){if(Oa(u),u.I==3){var g=u.V++,b=zt(u.J);if(ut(b,"SID",u.M),ut(b,"RID",g),ut(b,"TYPE","terminate"),$r(u,b),g=new us(u,u.j,g),g.M=2,g.A=Hr(zt(b)),b=!1,f.navigator&&f.navigator.sendBeacon)try{b=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&f.Image&&(new Image().src=g.A,b=!0),b||(g.g=Yc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Is(g)}Fc(u)}function Gi(u){u.g&&(to(u),u.g.cancel(),u.g=null)}function Oa(u){Gi(u),u.v&&(f.clearTimeout(u.v),u.v=null),La(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function zs(u){if(!ql(u.h)&&!u.m){u.m=!0;var g=u.Ea;ye||T(),Ee||(ye(),Ee=!0),R.add(g,u),u.D=0}}function Va(u,g){return Ms(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=js(y(u.Ea,u,g),Hc(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new us(this,this.j,u);let Q=this.o;if(this.U&&(Q?(Q=S(Q),J(Q,this.U)):Q=this.U),this.u!==null||this.R||(B.J=Q,Q=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Uc(this,B,g),b=zt(this.J),ut(b,"RID",u),ut(b,"CVER",22),this.G&&ut(b,"X-HTTP-Session-Id",this.G),$r(this,b),Q&&(this.R?g="headers="+ai(Kn(Q))+"&"+g:this.u&&Yr(b,this.u,Q)),Hl(this.h,B),this.Ra&&ut(b,"TYPE","init"),this.S?(ut(b,"$req",g),ut(b,"SID","null"),B.U=!0,Rs(B,b,null)):Rs(B,b,g),this.I=2}}else this.I==3&&(u?eo(this,u):this.i.length==0||ql(this.h)||eo(this))};function eo(u,g){var b;g?b=g.l:b=u.V++;const N=zt(u.J);ut(N,"SID",u.M),ut(N,"RID",b),ut(N,"AID",u.K),$r(u,N),u.u&&u.o&&Yr(N,u.u,u.o),b=new us(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Uc(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Hl(u.h,b),Rs(b,N,g)}function $r(u,g){u.H&&Be(u.H,function(b,N){ut(g,N,b)}),u.l&&Be({},function(b,N){ut(g,N,b)})}function Uc(u,g,b){b=Math.min(u.i.length,b);const N=u.l?y(u.l.Ka,u.l,u):null;e:{var B=u.i;let Ye=-1;for(;;){const Rt=["count="+b];Ye==-1?b>0?(Ye=B[0].g,Rt.push("ofs="+Ye)):Ye=0:Rt.push("ofs="+Ye);let lt=!0;for(let Tt=0;Tt<b;Tt++){var Q=B[Tt].g;const Qn=B[Tt].map;if(Q-=Ye,Q<0)Ye=Math.max(0,B[Tt].g-100),lt=!1;else try{Q="req"+Q+"_"||"";try{var pe=Qn instanceof Map?Qn:Object.entries(Qn);for(const[qs,gs]of pe){let ps=gs;p(gs)&&(ps=Ss(gs)),Rt.push(Q+qs+"="+encodeURIComponent(ps))}}catch(qs){throw Rt.push(Q+"type="+encodeURIComponent("_badmap")),qs}}catch{N&&N(Qn)}}if(lt){pe=Rt.join("&");break e}}pe=void 0}return u=u.i.splice(0,b),g.G=u,pe}function zc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;ye||T(),Ee||(ye(),Ee=!0),R.add(g,u),u.A=0}}function Xr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=js(y(u.Da,u),Hc(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,Bc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=js(y(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),Gi(this),Bc(this))};function to(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Bc(u){u.g=new us(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=zt(u.na);ut(g,"RID","rpc"),ut(g,"SID",u.M),ut(g,"AID",u.K),ut(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ut(g,"TO",u.ia),ut(g,"TYPE","xmlhttp"),$r(u,g),u.u&&u.o&&Yr(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Hr(zt(g)),b.u=null,b.R=!0,ja(b,u)}i.Va=function(){this.C!=null&&(this.C=null,Gi(this),Xr(this),Lt(19))};function La(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function qc(u,g){var b=null;if(u.g==g){La(u),to(u),u.g=null;var N=2}else if(Os(u.h,g))b=g.G,Fl(u.h,g),N=1;else return;if(u.I!=0){if(g.o)if(N==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var B=u.D;N=Aa(),me(N,new As(N,b)),zs(u)}else zc(u);else if(B=g.m,B==3||B==0&&g.X>0||!(N==1&&Va(u,g)||N==2&&Xr(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),B){case 1:Bs(u,5);break;case 4:Bs(u,10);break;case 3:Bs(u,6);break;default:Bs(u,2)}}}function Hc(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Bs(u,g){if(u.j.info("Error code "+g),g==2){var b=y(u.bb,u),N=u.Ua;const B=!N;N=new kn(N||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Jt(N,"https"),Hr(N),B?hs(N.toString(),b):Xl(N.toString(),b)}else Lt(2);u.I=0,u.l&&u.l.pa(g),Fc(u),Oa(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Fc(u){if(u.I=0,u.ja=[],u.l){const g=Gl(u.h);(g.length!=0||u.i.length!=0)&&(ee(u.ja,g),ee(u.ja,u.i),u.h.i.length=0,q(u.i),u.i.length=0),u.l.oa()}}function Gc(u,g,b){var N=b instanceof kn?zt(b):new kn(b);if(N.g!="")g&&(N.g=g+"."+N.g),Pi(N,N.u);else{var B=f.location;N=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;const Q=new kn(null);N&&Jt(Q,N),g&&(Q.g=g),B&&Pi(Q,B),b&&(Q.h=b),N=Q}return b=u.G,g=u.wa,b&&g&&ut(N,b,g),ut(N,"VER",u.ka),$r(u,N),N}function Yc(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new ft(new Ls({ab:b})):new ft(u.ma),g.Fa(u.L),g}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kc(){}i=Kc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Yi(){}Yi.prototype.g=function(u,g){return new yn(u,g)};function yn(u,g){Ve.call(this),this.g=new Fi(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!I(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!I(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ci(this)}E(yn,Ve),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Jl(this.g)},yn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=Ss(u),u=b);g.i.push(new Ut(g.Ya++,u)),g.I==3&&zs(g)},yn.prototype.N=function(){this.g.l=null,delete this.j,Jl(this.g),delete this.g,yn.Z.N.call(this)};function Qc(u){nn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(Qc,nn);function $c(){Fn.call(this),this.status=1}E($c,Fn);function ci(u){this.g=u}E(ci,Kc),ci.prototype.ra=function(){me(this.g,"a")},ci.prototype.qa=function(u){me(this.g,new Qc(u))},ci.prototype.pa=function(u){me(this.g,new $c)},ci.prototype.oa=function(){me(this.g,"b")},Yi.prototype.createWebChannel=Yi.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,i_=function(){return new Yi},s_=function(){return Aa()},n_=Ct,Mm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,dd=Br,Ul.COMPLETE="complete",t_=Ul,Ac.EventType=os,os.OPEN="a",os.CLOSE="b",os.ERROR="c",os.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,Ho=Ac,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,e_=ft}).apply(typeof ed<"u"?ed:typeof self<"u"?self:typeof window<"u"?window:{});const ex="@firebase/firestore",tx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new eg("@firebase/firestore");function gl(){return wa.logLevel}function Se(i,...e){if(wa.logLevel<=et.DEBUG){const s=e.map(dg);wa.debug(`Firestore (${Ml}): ${i}`,...s)}}function Ii(i,...e){if(wa.logLevel<=et.ERROR){const s=e.map(dg);wa.error(`Firestore (${Ml}): ${i}`,...s)}}function Sl(i,...e){if(wa.logLevel<=et.WARN){const s=e.map(dg);wa.warn(`Firestore (${Ml}): ${i}`,...s)}}function dg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(i,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,r_(i,r,s)}function r_(i,e,s){let r=`FIRESTORE (${Ml}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw Ii(r),new Error(r)}function ct(i,e,s,r){let o="Unexpected state";typeof s=="string"?o=s:r=s,i||r_(e,o,r)}function Ge(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Mi{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(mn.UNAUTHENTICATED)))}shutdown(){}}class SN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class NN{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){ct(this.o===void 0,42304);let r=this.i;const o=v=>this.i!==r?(r=this.i,s(v)):Promise.resolve();let d=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Nr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const v=d;e.enqueueRetryable((async()=>{await v.promise,await o(this.currentUser)}))},p=v=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((v=>p(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Nr)}}),0),f()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string",31837,{l:r}),new a_(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class AN{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jN{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new AN(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CN{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,is(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){ct(this.o===void 0,3512);const r=d=>{d.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const f=d.token!==this.m;return this.m=d.token,Se("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?s(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>r(d)))};const o=d=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>o(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?o(d):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(ct(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new nx(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<i;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=RN(40);for(let d=0;d<o.length;++d)r.length<20&&o[d]<s&&(r+=e.charAt(o[d]%62))}return r}}function tt(i,e){return i<e?-1:i>e?1:0}function Om(i,e){const s=Math.min(i.length,e.length);for(let r=0;r<s;r++){const o=i.charAt(r),d=e.charAt(r);if(o!==d)return pm(o)===pm(d)?tt(o,d):pm(o)?1:-1}return tt(i.length,e.length)}const IN=55296,kN=57343;function pm(i){const e=i.charCodeAt(0);return e>=IN&&e<=kN}function Nl(i,e,s){return i.length===e.length&&i.every(((r,o)=>s(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="__name__";class Qs{constructor(e,s,r){s===void 0?s=0:s>e.length&&ze(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&ze(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return Qs.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Qs?e.forEach((r=>{s.push(r)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let o=0;o<r;o++){const d=Qs.compareSegments(e.get(o),s.get(o));if(d!==0)return d}return tt(e.length,s.length)}static compareSegments(e,s){const r=Qs.isNumericId(e),o=Qs.isNumericId(s);return r&&!o?-1:!r&&o?1:r&&o?Qs.extractNumericId(e).compare(Qs.extractNumericId(s)):Om(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sr.fromString(e.substring(4,e.length-2))}}class vt extends Qs{construct(e,s,r){return new vt(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter((o=>o.length>0)))}return new vt(s)}static emptyPath(){return new vt([])}}const DN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Qs{construct(e,s,r){return new un(e,s,r)}static isValidIdentifier(e){return DN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sx}static keyField(){return new un([sx])}static fromServerFormat(e){const s=[];let r="",o=0;const d=()=>{if(r.length===0)throw new _e(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new _e(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new _e(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(r+=p,o++):(d(),o++)}if(d(),f)throw new _e(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(s)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(vt.fromString(e))}static fromName(e){return new De(vt.fromString(e).popFirst(5))}static empty(){return new De(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return vt.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(i,e,s){if(!s)throw new _e(ae.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function MN(i,e,s,r){if(e===!0&&r===!0)throw new _e(ae.INVALID_ARGUMENT,`${i} and ${s} cannot be used together.`)}function ix(i){if(!De.isDocumentKey(i))throw new _e(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function rx(i){if(De.isDocumentKey(i))throw new _e(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function o_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Bd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ze(12329,{type:typeof i})}function Bn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new _e(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Bd(i);throw new _e(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(i,e){const s={typeString:i};return e&&(s.value=e),s}function yc(i,e){if(!o_(i))throw new _e(ae.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const o=e[r].typeString,d="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){s=`JSON missing required field: '${r}'`;break}const f=i[r];if(o&&typeof f!==o){s=`JSON field '${r}' must be a ${o}.`;break}if(d!==void 0&&f!==d.value){s=`Expected '${r}' field to equal '${d.value}'`;break}}if(s)throw new _e(ae.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=-62135596800,lx=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*lx);return new wt(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new _e(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new _e(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<ax)throw new _e(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lx}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yc(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ax;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Qt("string",wt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new wt(0,0))}static max(){return new qe(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=-1;function ON(i,e){const s=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=qe.fromTimestamp(r===1e9?new wt(s+1,0):new wt(s,r));return new jr(o,De.empty(),e)}function VN(i){return new jr(i.readTime,i.key,ic)}class jr{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new jr(qe.min(),De.empty(),ic)}static max(){return new jr(qe.max(),De.empty(),ic)}}function LN(i,e){let s=i.readTime.compareTo(e.readTime);return s!==0?s:(s=De.comparator(i.documentKey,e.documentKey),s!==0?s:tt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(i){if(i.code!==ae.FAILED_PRECONDITION||i.message!==PN)throw i;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new ce(((r,o)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(r,o)},this.catchCallback=d=>{this.wrapFailure(s,d).next(r,o)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof ce?s:ce.resolve(s)}catch(s){return ce.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):ce.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):ce.reject(s)}static resolve(e){return new ce(((s,r)=>{s(e)}))}static reject(e){return new ce(((s,r)=>{r(e)}))}static waitFor(e){return new ce(((s,r)=>{let o=0,d=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++d,f&&d===o&&s()}),(v=>r(v)))})),f=!0,d===o&&s()}))}static or(e){let s=ce.resolve(!1);for(const r of e)s=s.next((o=>o?ce.resolve(o):r()));return s}static forEach(e,s){const r=[];return e.forEach(((o,d)=>{r.push(s.call(this,o,d))})),this.waitFor(r)}static mapArray(e,s){return new ce(((r,o)=>{const d=e.length,f=new Array(d);let p=0;for(let v=0;v<d;v++){const y=v;s(e[y]).next((_=>{f[y]=_,++p,p===d&&r(f)}),(_=>o(_)))}}))}static doWhile(e,s){return new ce(((r,o)=>{const d=()=>{e()===!0?s().next((()=>{d()}),o):r()};d()}))}}function zN(i){const e=i.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Vl(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>s.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=-1;function Hd(i){return i==null}function Nd(i){return i===0&&1/i==-1/0}function BN(i){return typeof i=="number"&&Number.isInteger(i)&&!Nd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="";function qN(i){let e="";for(let s=0;s<i.length;s++)e.length>0&&(e=ox(e)),e=HN(i.get(s),e);return ox(e)}function HN(i,e){let s=e;const r=i.length;for(let o=0;o<r;o++){const d=i.charAt(o);switch(d){case"\0":s+="";break;case c_:s+="";break;default:s+=d}}return s}function ox(i){return i+c_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(i){let e=0;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e++;return e}function Vr(i,e){for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e(s,i[s])}function u_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,s){this.comparator=e,this.root=s||cn.EMPTY}insert(e,s){return new Nt(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return s+r.left.size;o<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,r)=>(e(s,r),!1)))}toString(){const e=[];return this.inorderTraversal(((s,r)=>(e.push(`${s}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new td(this.root,e,this.comparator,!1)}getReverseIterator(){return new td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new td(this.root,e,this.comparator,!0)}}class td{constructor(e,s,r,o){this.isReverse=o,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=s?r(e.key,s):1,s&&o&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,s,r,o,d){this.key=e,this.value=s,this.color=r??cn.RED,this.left=o??cn.EMPTY,this.right=d??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,o,d){return new cn(e??this.key,s??this.value,r??this.color,o??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let o=this;const d=r(e,o.key);return o=d<0?o.copy(null,null,null,o.left.insert(e,s,r),null):d===0?o.copy(null,s,null,null,null):o.copy(null,null,null,null,o.right.insert(e,s,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,o=this;if(s(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,s),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),s(e,o.key)===0){if(o.right.isEmpty())return cn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,s))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ze(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw ze(57766)}get value(){throw ze(16141)}get color(){throw ze(16727)}get left(){throw ze(29726)}get right(){throw ze(36894)}copy(e,s,r,o,d){return this}insert(e,s,r){return new cn(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,r)=>(e(s),!1)))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;s(o.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new ux(this.data.getIterator())}getIteratorFrom(e){return new ux(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((r=>{s=s.add(r)})),s}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=r.getNext().key;if(this.comparator(o,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new Wt(this.comparator);return s.data=e,s}}class ux{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new zn([])}unionWith(e){let s=new Wt(un.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new zn(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Nl(this.fields,e.fields,((s,r)=>s.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(o){try{return atob(o)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new d_("Invalid base64 string: "+d):d}})(e);return new dn(s)}static fromUint8Array(e){const s=(function(o){let d="";for(let f=0;f<o.length;++f)d+=String.fromCharCode(o[f]);return d})(e);return new dn(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const r=new Uint8Array(s.length);for(let o=0;o<s.length;o++)r[o]=s.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const FN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(i){if(ct(!!i,39018),typeof i=="string"){let e=0;const s=FN.exec(i);if(ct(!!s,46558,{timestamp:i}),s[1]){let o=s[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(i.seconds),nanos:Dt(i.nanos)}}function Dt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Rr(i){return typeof i=="string"?dn.fromBase64String(i):dn.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="server_timestamp",f_="__type__",m_="__previous_value__",g_="__local_write_time__";function mg(i){return(i?.mapValue?.fields||{})[f_]?.stringValue===h_}function Fd(i){const e=i.mapValue.fields[m_];return mg(e)?Fd(e):e}function rc(i){const e=Cr(i.mapValue.fields[g_].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,s,r,o,d,f,p,v,y,_){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=o,this.ssl=d,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=v,this.useFetchStreams=y,this.isUsingEmulator=_}}const Ad="(default)";class ac{constructor(e,s){this.projectId=e,this.database=s||Ad}static empty(){return new ac("","")}get isDefaultDatabase(){return this.database===Ad}isEqual(e){return e instanceof ac&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="__type__",YN="__max__",nd={mapValue:{}},y_="__vector__",jd="value";function Ir(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?mg(i)?4:QN(i)?9007199254740991:KN(i)?10:11:ze(28295,{value:i})}function ti(i,e){if(i===e)return!0;const s=Ir(i);if(s!==Ir(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return rc(i).isEqual(rc(e));case 3:return(function(o,d){if(typeof o.timestampValue=="string"&&typeof d.timestampValue=="string"&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const f=Cr(o.timestampValue),p=Cr(d.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,d){return Rr(o.bytesValue).isEqual(Rr(d.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,d){return Dt(o.geoPointValue.latitude)===Dt(d.geoPointValue.latitude)&&Dt(o.geoPointValue.longitude)===Dt(d.geoPointValue.longitude)})(i,e);case 2:return(function(o,d){if("integerValue"in o&&"integerValue"in d)return Dt(o.integerValue)===Dt(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const f=Dt(o.doubleValue),p=Dt(d.doubleValue);return f===p?Nd(f)===Nd(p):isNaN(f)&&isNaN(p)}return!1})(i,e);case 9:return Nl(i.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return(function(o,d){const f=o.mapValue.fields||{},p=d.mapValue.fields||{};if(cx(f)!==cx(p))return!1;for(const v in f)if(f.hasOwnProperty(v)&&(p[v]===void 0||!ti(f[v],p[v])))return!1;return!0})(i,e);default:return ze(52216,{left:i})}}function lc(i,e){return(i.values||[]).find((s=>ti(s,e)))!==void 0}function Al(i,e){if(i===e)return 0;const s=Ir(i),r=Ir(e);if(s!==r)return tt(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return tt(i.booleanValue,e.booleanValue);case 2:return(function(d,f){const p=Dt(d.integerValue||d.doubleValue),v=Dt(f.integerValue||f.doubleValue);return p<v?-1:p>v?1:p===v?0:isNaN(p)?isNaN(v)?0:-1:1})(i,e);case 3:return dx(i.timestampValue,e.timestampValue);case 4:return dx(rc(i),rc(e));case 5:return Om(i.stringValue,e.stringValue);case 6:return(function(d,f){const p=Rr(d),v=Rr(f);return p.compareTo(v)})(i.bytesValue,e.bytesValue);case 7:return(function(d,f){const p=d.split("/"),v=f.split("/");for(let y=0;y<p.length&&y<v.length;y++){const _=tt(p[y],v[y]);if(_!==0)return _}return tt(p.length,v.length)})(i.referenceValue,e.referenceValue);case 8:return(function(d,f){const p=tt(Dt(d.latitude),Dt(f.latitude));return p!==0?p:tt(Dt(d.longitude),Dt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return hx(i.arrayValue,e.arrayValue);case 10:return(function(d,f){const p=d.fields||{},v=f.fields||{},y=p[jd]?.arrayValue,_=v[jd]?.arrayValue,E=tt(y?.values?.length||0,_?.values?.length||0);return E!==0?E:hx(y,_)})(i.mapValue,e.mapValue);case 11:return(function(d,f){if(d===nd.mapValue&&f===nd.mapValue)return 0;if(d===nd.mapValue)return 1;if(f===nd.mapValue)return-1;const p=d.fields||{},v=Object.keys(p),y=f.fields||{},_=Object.keys(y);v.sort(),_.sort();for(let E=0;E<v.length&&E<_.length;++E){const A=Om(v[E],_[E]);if(A!==0)return A;const q=Al(p[v[E]],y[_[E]]);if(q!==0)return q}return tt(v.length,_.length)})(i.mapValue,e.mapValue);default:throw ze(23264,{he:s})}}function dx(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return tt(i,e);const s=Cr(i),r=Cr(e),o=tt(s.seconds,r.seconds);return o!==0?o:tt(s.nanos,r.nanos)}function hx(i,e){const s=i.values||[],r=e.values||[];for(let o=0;o<s.length&&o<r.length;++o){const d=Al(s[o],r[o]);if(d)return d}return tt(s.length,r.length)}function jl(i){return Vm(i)}function Vm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(s){const r=Cr(s);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(s){return Rr(s).toBase64()})(i.bytesValue):"referenceValue"in i?(function(s){return De.fromName(s).toString()})(i.referenceValue):"geoPointValue"in i?(function(s){return`geo(${s.latitude},${s.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(s){let r="[",o=!0;for(const d of s.values||[])o?o=!1:r+=",",r+=Vm(d);return r+"]"})(i.arrayValue):"mapValue"in i?(function(s){const r=Object.keys(s.fields||{}).sort();let o="{",d=!0;for(const f of r)d?d=!1:o+=",",o+=`${f}:${Vm(s.fields[f])}`;return o+"}"})(i.mapValue):ze(61005,{value:i})}function hd(i){switch(Ir(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fd(i);return e?16+hd(e):16;case 5:return 2*i.stringValue.length;case 6:return Rr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,d)=>o+hd(d)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return Vr(r.fields,((d,f)=>{o+=d.length+hd(f)})),o})(i.mapValue);default:throw ze(13486,{value:i})}}function fx(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Lm(i){return!!i&&"integerValue"in i}function gg(i){return!!i&&"arrayValue"in i}function mx(i){return!!i&&"nullValue"in i}function gx(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function fd(i){return!!i&&"mapValue"in i}function KN(i){return(i?.mapValue?.fields||{})[p_]?.stringValue===y_}function $o(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Vr(i.mapValue.fields,((s,r)=>e.mapValue.fields[s]=$o(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(i.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=$o(i.arrayValue.values[s]);return e}return{...i}}function QN(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===YN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!fd(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(s)}setAll(e){let s=un.emptyPath(),r={},o=[];e.forEach(((f,p)=>{if(!s.isImmediateParentOf(p)){const v=this.getFieldsMap(s);this.applyChanges(v,r,o),r={},o=[],s=p.popLast()}f?r[p.lastSegment()]=$o(f):o.push(p.lastSegment())}));const d=this.getFieldsMap(s);this.applyChanges(d,r,o)}delete(e){const s=this.field(e.popLast());fd(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=s.mapValue.fields[e.get(r)];fd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=o),s=o}return s.mapValue.fields}applyChanges(e,s,r){Vr(s,((o,d)=>e[o]=d));for(const o of r)delete e[o]}clone(){return new Rn($o(this.value))}}function v_(i){const e=[];return Vr(i.fields,((s,r)=>{const o=new un([s]);if(fd(r)){const d=v_(r.mapValue).fields;if(d.length===0)e.push(o);else for(const f of d)e.push(o.child(f))}else e.push(o)})),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,s,r,o,d,f,p){this.key=e,this.documentType=s,this.version=r,this.readTime=o,this.createTime=d,this.data=f,this.documentState=p}static newInvalidDocument(e){return new gn(e,0,qe.min(),qe.min(),qe.min(),Rn.empty(),0)}static newFoundDocument(e,s,r,o){return new gn(e,1,s,qe.min(),r,o,0)}static newNoDocument(e,s){return new gn(e,2,s,qe.min(),qe.min(),Rn.empty(),0)}static newUnknownDocument(e,s){return new gn(e,3,s,qe.min(),qe.min(),Rn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,s){this.position=e,this.inclusive=s}}function px(i,e,s){let r=0;for(let o=0;o<i.position.length;o++){const d=e[o],f=i.position[o];if(d.field.isKeyField()?r=De.comparator(De.fromName(f.referenceValue),s.key):r=Al(f,s.data.field(d.field)),d.dir==="desc"&&(r*=-1),r!==0)break}return r}function yx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let s=0;s<i.position.length;s++)if(!ti(i.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,s="asc"){this.field=e,this.dir=s}}function $N(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{}class Kt extends x_{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new WN(e,s,r):s==="array-contains"?new eA(e,r):s==="in"?new tA(e,r):s==="not-in"?new nA(e,r):s==="array-contains-any"?new sA(e,r):new Kt(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new ZN(e,r):new JN(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(Al(s,this.value)):s!==null&&Ir(this.value)===Ir(s)&&this.matchesComparison(Al(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ts extends x_{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new Ts(e,s)}matches(e){return b_(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function b_(i){return i.op==="and"}function __(i){return XN(i)&&b_(i)}function XN(i){for(const e of i.filters)if(e instanceof Ts)return!1;return!0}function Pm(i){if(i instanceof Kt)return i.field.canonicalString()+i.op.toString()+jl(i.value);if(__(i))return i.filters.map((e=>Pm(e))).join(",");{const e=i.filters.map((s=>Pm(s))).join(",");return`${i.op}(${e})`}}function w_(i,e){return i instanceof Kt?(function(r,o){return o instanceof Kt&&r.op===o.op&&r.field.isEqual(o.field)&&ti(r.value,o.value)})(i,e):i instanceof Ts?(function(r,o){return o instanceof Ts&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((d,f,p)=>d&&w_(f,o.filters[p])),!0):!1})(i,e):void ze(19439)}function E_(i){return i instanceof Kt?(function(s){return`${s.field.canonicalString()} ${s.op} ${jl(s.value)}`})(i):i instanceof Ts?(function(s){return s.op.toString()+" {"+s.getFilters().map(E_).join(" ,")+"}"})(i):"Filter"}class WN extends Kt{constructor(e,s,r){super(e,s,r),this.key=De.fromName(r.referenceValue)}matches(e){const s=De.comparator(e.key,this.key);return this.matchesComparison(s)}}class ZN extends Kt{constructor(e,s){super(e,"in",s),this.keys=T_("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class JN extends Kt{constructor(e,s){super(e,"not-in",s),this.keys=T_("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function T_(i,e){return(e.arrayValue?.values||[]).map((s=>De.fromName(s.referenceValue)))}class eA extends Kt{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return gg(s)&&lc(s.arrayValue,this.value)}}class tA extends Kt{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&lc(this.value.arrayValue,s)}}class nA extends Kt{constructor(e,s){super(e,"not-in",s)}matches(e){if(lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!lc(this.value.arrayValue,s)}}class sA extends Kt{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!gg(s)||!s.arrayValue.values)&&s.arrayValue.values.some((r=>lc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,s=null,r=[],o=[],d=null,f=null,p=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=o,this.limit=d,this.startAt=f,this.endAt=p,this.Te=null}}function vx(i,e=null,s=[],r=[],o=null,d=null,f=null){return new iA(i,e,s,r,o,d,f)}function pg(i){const e=Ge(i);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((r=>Pm(r))).join(","),s+="|ob:",s+=e.orderBy.map((r=>(function(d){return d.field.canonicalString()+d.dir})(r))).join(","),Hd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((r=>jl(r))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((r=>jl(r))).join(",")),e.Te=s}return e.Te}function yg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<i.orderBy.length;s++)if(!$N(i.orderBy[s],e.orderBy[s]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let s=0;s<i.filters.length;s++)if(!w_(i.filters[s],e.filters[s]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!yx(i.startAt,e.startAt)&&yx(i.endAt,e.endAt)}function Um(i){return De.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,s=null,r=[],o=[],d=null,f="F",p=null,v=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=o,this.limit=d,this.limitType=f,this.startAt=p,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rA(i,e,s,r,o,d,f,p){return new Ll(i,e,s,r,o,d,f,p)}function vg(i){return new Ll(i)}function xx(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function S_(i){return i.collectionGroup!==null}function Xo(i){const e=Ge(i);if(e.Ie===null){e.Ie=[];const s=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),s.add(d.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Wt(un.comparator);return f.filters.forEach((v=>{v.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((d=>{s.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new oc(d,r))})),s.has(un.keyField().canonicalString())||e.Ie.push(new oc(un.keyField(),r))}return e.Ie}function Ws(i){const e=Ge(i);return e.Ee||(e.Ee=aA(e,Xo(i))),e.Ee}function aA(i,e){if(i.limitType==="F")return vx(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const d=o.dir==="desc"?"asc":"desc";return new oc(o.field,d)}));const s=i.endAt?new Cd(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Cd(i.startAt.position,i.startAt.inclusive):null;return vx(i.path,i.collectionGroup,e,i.filters,i.limit,s,r)}}function zm(i,e){const s=i.filters.concat([e]);return new Ll(i.path,i.collectionGroup,i.explicitOrderBy.slice(),s,i.limit,i.limitType,i.startAt,i.endAt)}function Bm(i,e,s){return new Ll(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,s,i.startAt,i.endAt)}function Gd(i,e){return yg(Ws(i),Ws(e))&&i.limitType===e.limitType}function N_(i){return`${pg(Ws(i))}|lt:${i.limitType}`}function pl(i){return`Query(target=${(function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map((o=>E_(o))).join(", ")}]`),Hd(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map((o=>jl(o))).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map((o=>jl(o))).join(",")),`Target(${r})`})(Ws(i))}; limitType=${i.limitType})`}function Yd(i,e){return e.isFoundDocument()&&(function(r,o){const d=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(d):De.isDocumentKey(r.path)?r.path.isEqual(d):r.path.isImmediateParentOf(d)})(i,e)&&(function(r,o){for(const d of Xo(r))if(!d.field.isKeyField()&&o.data.field(d.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const d of r.filters)if(!d.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(f,p,v){const y=px(f,p,v);return f.inclusive?y<=0:y<0})(r.startAt,Xo(r),o)||r.endAt&&!(function(f,p,v){const y=px(f,p,v);return f.inclusive?y>=0:y>0})(r.endAt,Xo(r),o))})(i,e)}function lA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function A_(i){return(e,s)=>{let r=!1;for(const o of Xo(i)){const d=oA(o,e,s);if(d!==0)return d;r=r||o.field.isKeyField()}return 0}}function oA(i,e,s){const r=i.field.isKeyField()?De.comparator(e.key,s.key):(function(d,f,p){const v=f.data.field(d),y=p.data.field(d);return v!==null&&y!==null?Al(v,y):ze(42886)})(i.field,e,s);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ze(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[o,d]of r)if(this.equalsFn(o,e))return d}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return void(o[d]=[e,s]);o.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[s]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Vr(this.inner,((s,r)=>{for(const[o,d]of r)e(o,d)}))}isEmpty(){return u_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=new Nt(De.comparator);function ki(){return cA}const j_=new Nt(De.comparator);function Fo(...i){let e=j_;for(const s of i)e=e.insert(s.key,s);return e}function C_(i){let e=j_;return i.forEach(((s,r)=>e=e.insert(s,r.overlayedDocument))),e}function ga(){return Wo()}function R_(){return Wo()}function Wo(){return new Ta((i=>i.toString()),((i,e)=>i.isEqual(e)))}const uA=new Nt(De.comparator),dA=new Wt(De.comparator);function nt(...i){let e=dA;for(const s of i)e=e.add(s);return e}const hA=new Wt(tt);function fA(){return hA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nd(e)?"-0":e}}function I_(i){return{integerValue:""+i}}function mA(i,e){return BN(e)?I_(e):xg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this._=void 0}}function gA(i,e,s){return i instanceof Rd?(function(o,d){const f={fields:{[f_]:{stringValue:h_},[g_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&mg(d)&&(d=Fd(d)),d&&(f.fields[m_]=d),{mapValue:f}})(s,e):i instanceof cc?D_(i,e):i instanceof uc?M_(i,e):(function(o,d){const f=k_(o,d),p=bx(f)+bx(o.Ae);return Lm(f)&&Lm(o.Ae)?I_(p):xg(o.serializer,p)})(i,e)}function pA(i,e,s){return i instanceof cc?D_(i,e):i instanceof uc?M_(i,e):s}function k_(i,e){return i instanceof Id?(function(r){return Lm(r)||(function(d){return!!d&&"doubleValue"in d})(r)})(e)?e:{integerValue:0}:null}class Rd extends Kd{}class cc extends Kd{constructor(e){super(),this.elements=e}}function D_(i,e){const s=O_(e);for(const r of i.elements)s.some((o=>ti(o,r)))||s.push(r);return{arrayValue:{values:s}}}class uc extends Kd{constructor(e){super(),this.elements=e}}function M_(i,e){let s=O_(e);for(const r of i.elements)s=s.filter((o=>!ti(o,r)));return{arrayValue:{values:s}}}class Id extends Kd{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function bx(i){return Dt(i.integerValue||i.doubleValue)}function O_(i){return gg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function yA(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof cc&&o instanceof cc||r instanceof uc&&o instanceof uc?Nl(r.elements,o.elements,ti):r instanceof Id&&o instanceof Id?ti(r.Ae,o.Ae):r instanceof Rd&&o instanceof Rd})(i.transform,e.transform)}class vA{constructor(e,s){this.version=e,this.transformResults=s}}class _n{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function md(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Qd{}function V_(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new $d(i.key,_n.none()):new vc(i.key,i.data,_n.none());{const s=i.data,r=Rn.empty();let o=new Wt(un.comparator);for(let d of e.fields)if(!o.has(d)){let f=s.field(d);f===null&&d.length>1&&(d=d.popLast(),f=s.field(d)),f===null?r.delete(d):r.set(d,f),o=o.add(d)}return new Lr(i.key,r,new zn(o.toArray()),_n.none())}}function xA(i,e,s){i instanceof vc?(function(o,d,f){const p=o.value.clone(),v=wx(o.fieldTransforms,d,f.transformResults);p.setAll(v),d.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(i,e,s):i instanceof Lr?(function(o,d,f){if(!md(o.precondition,d))return void d.convertToUnknownDocument(f.version);const p=wx(o.fieldTransforms,d,f.transformResults),v=d.data;v.setAll(L_(o)),v.setAll(p),d.convertToFoundDocument(f.version,v).setHasCommittedMutations()})(i,e,s):(function(o,d,f){d.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,s)}function Zo(i,e,s,r){return i instanceof vc?(function(d,f,p,v){if(!md(d.precondition,f))return p;const y=d.value.clone(),_=Ex(d.fieldTransforms,v,f);return y.setAll(_),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(i,e,s,r):i instanceof Lr?(function(d,f,p,v){if(!md(d.precondition,f))return p;const y=Ex(d.fieldTransforms,v,f),_=f.data;return _.setAll(L_(d)),_.setAll(y),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),p===null?null:p.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((E=>E.field)))})(i,e,s,r):(function(d,f,p){return md(d.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(i,e,s)}function bA(i,e){let s=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),d=k_(r.transform,o||null);d!=null&&(s===null&&(s=Rn.empty()),s.set(r.field,d))}return s||null}function _x(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Nl(r,o,((d,f)=>yA(d,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class vc extends Qd{constructor(e,s,r,o=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Lr extends Qd{constructor(e,s,r,o,d=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=o,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function L_(i){const e=new Map;return i.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const r=i.data.field(s);e.set(s,r)}})),e}function wx(i,e,s){const r=new Map;ct(i.length===s.length,32656,{Re:s.length,Ve:i.length});for(let o=0;o<s.length;o++){const d=i[o],f=d.transform,p=e.data.field(d.field);r.set(d.field,pA(f,p,s[o]))}return r}function Ex(i,e,s){const r=new Map;for(const o of i){const d=o.transform,f=s.data.field(o.field);r.set(o.field,gA(d,f,e))}return r}class $d extends Qd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _A extends Qd{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,s,r,o){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let o=0;o<this.mutations.length;o++){const d=this.mutations[o];d.key.isEqual(e.key)&&xA(d,e,r[o])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=Zo(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=Zo(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=R_();return this.mutations.forEach((o=>{const d=e.get(o.key),f=d.overlayedDocument;let p=this.applyToLocalView(f,d.mutatedFields);p=s.has(o.key)?null:p;const v=V_(f,p);v!==null&&r.set(o.key,v),f.isValidDocument()||f.convertToNoDocument(qe.min())})),r}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),nt())}isEqual(e){return this.batchId===e.batchId&&Nl(this.mutations,e.mutations,((s,r)=>_x(s,r)))&&Nl(this.baseMutations,e.baseMutations,((s,r)=>_x(s,r)))}}class bg{constructor(e,s,r,o){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=o}static from(e,s,r){ct(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return uA})();const d=e.mutations;for(let f=0;f<d.length;f++)o=o.insert(d[f].key,r[f].version);return new bg(e,s,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,it;function SA(i){switch(i){case ae.OK:return ze(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return ze(15467,{code:i})}}function P_(i){if(i===void 0)return Ii("GRPC error has no .code"),ae.UNKNOWN;switch(i){case Gt.OK:return ae.OK;case Gt.CANCELLED:return ae.CANCELLED;case Gt.UNKNOWN:return ae.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return ae.INTERNAL;case Gt.UNAVAILABLE:return ae.UNAVAILABLE;case Gt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Gt.NOT_FOUND:return ae.NOT_FOUND;case Gt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Gt.ABORTED:return ae.ABORTED;case Gt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Gt.DATA_LOSS:return ae.DATA_LOSS;default:return ze(39323,{code:i})}}(it=Gt||(Gt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=new Sr([4294967295,4294967295],0);function Tx(i){const e=NA().encode(i),s=new Jb;return s.update(e),new Uint8Array(s.digest())}function Sx(i){const e=new DataView(i.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new Sr([s,r],0),new Sr([o,d],0)]}class _g{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Go(`Invalid padding: ${s}`);if(r<0)throw new Go(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Go(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Go(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=Sr.fromNumber(this.ge)}ye(e,s,r){let o=e.add(s.multiply(Sr.fromNumber(r)));return o.compare(AA)===1&&(o=new Sr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=Tx(e),[r,o]=Sx(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(r,o,d);if(!this.we(f))return!1}return!0}static create(e,s,r){const o=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),f=new _g(d,o,s);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const s=Tx(e),[r,o]=Sx(s);for(let d=0;d<this.hashCount;d++){const f=this.ye(r,o,d);this.Se(f)}}Se(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,s,r,o,d){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const o=new Map;return o.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new Xd(qe.min(),o,new Nt(tt),ki(),nt())}}class xc{constructor(e,s,r,o,d){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new xc(r,s,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,s,r,o){this.be=e,this.removedTargetIds=s,this.key=r,this.De=o}}class U_{constructor(e,s){this.targetId=e,this.Ce=s}}class z_{constructor(e,s,r=dn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=o}}class Nx{constructor(){this.ve=0,this.Fe=Ax(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nt(),s=nt(),r=nt();return this.Fe.forEach(((o,d)=>{switch(d){case 0:e=e.add(o);break;case 2:s=s.add(o);break;case 1:r=r.add(o);break;default:ze(38017,{changeType:d})}})),new xc(this.Me,this.xe,e,s,r)}qe(){this.Oe=!1,this.Fe=Ax()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jA{constructor(e){this.Ge=e,this.ze=new Map,this.je=ki(),this.Je=sd(),this.He=sd(),this.Ye=new Nt(tt)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const r=this.nt(s);switch(e.state){case 0:this.rt(s)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),r.Le(e.resumeToken));break;default:ze(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((r,o)=>{this.rt(o)&&s(o)}))}st(e){const s=e.targetId,r=e.Ce.count,o=this.ot(s);if(o){const d=o.target;if(Um(d))if(r===0){const f=new De(d.path);this.et(s,f,gn.newNoDocument(f,qe.min()))}else ct(r===1,20013,{expectedCount:r});else{const f=this._t(s);if(f!==r){const p=this.ut(e),v=p?this.ct(p,e,f):1;if(v!==0){this.it(s);const y=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,y)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:d=0}=s;let f,p;try{f=Rr(r).toUint8Array()}catch(v){if(v instanceof d_)return Sl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{p=new _g(f,o,d)}catch(v){return Sl(v instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return p.ge===0?null:p}ct(e,s,r){return s.Ce.count===r-this.Pt(e,s.targetId)?0:2}Pt(e,s){const r=this.Ge.getRemoteKeysForTarget(s);let o=0;return r.forEach((d=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${d.path.canonicalString()}`;e.mightContain(p)||(this.et(s,d,null),o++)})),o}Tt(e){const s=new Map;this.ze.forEach(((d,f)=>{const p=this.ot(f);if(p){if(d.current&&Um(p.target)){const v=new De(p.target.path);this.It(v).has(f)||this.Et(f,v)||this.et(f,v,gn.newNoDocument(v,e))}d.Be&&(s.set(f,d.ke()),d.qe())}}));let r=nt();this.He.forEach(((d,f)=>{let p=!0;f.forEachWhile((v=>{const y=this.ot(v);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(d))})),this.je.forEach(((d,f)=>f.setReadTime(e)));const o=new Xd(e,s,this.Ye,this.je,r);return this.je=ki(),this.Je=sd(),this.He=sd(),this.Ye=new Nt(tt),o}Xe(e,s){if(!this.rt(e))return;const r=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,r),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,s)?o.Qe(s,1):o.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),r&&(this.je=this.je.insert(s,r))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new Nx,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new Wt(tt),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new Wt(tt),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||Se("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Nx),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function sd(){return new Nt(De.comparator)}function Ax(){return new Nt(De.comparator)}const CA={asc:"ASCENDING",desc:"DESCENDING"},RA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IA={and:"AND",or:"OR"};class kA{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function qm(i,e){return i.useProto3Json||Hd(e)?e:{value:e}}function kd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function DA(i,e){return kd(i,e.toTimestamp())}function Zs(i){return ct(!!i,49232),qe.fromTimestamp((function(s){const r=Cr(s);return new wt(r.seconds,r.nanos)})(i))}function wg(i,e){return Hm(i,e).canonicalString()}function Hm(i,e){const s=(function(o){return new vt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?s:s.child(e)}function q_(i){const e=vt.fromString(i);return ct(K_(e),10190,{key:e.toString()}),e}function Fm(i,e){return wg(i.databaseId,e.path)}function ym(i,e){const s=q_(e);if(s.get(1)!==i.databaseId.projectId)throw new _e(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+i.databaseId.projectId);if(s.get(3)!==i.databaseId.database)throw new _e(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+i.databaseId.database);return new De(F_(s))}function H_(i,e){return wg(i.databaseId,e)}function MA(i){const e=q_(i);return e.length===4?vt.emptyPath():F_(e)}function Gm(i){return new vt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function F_(i){return ct(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function jx(i,e,s){return{name:Fm(i,e),fields:s.value.mapValue.fields}}function OA(i,e){let s;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ze(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],d=(function(y,_){return y.useProto3Json?(ct(_===void 0||typeof _=="string",58123),dn.fromBase64String(_||"")):(ct(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),dn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const _=y.code===void 0?ae.UNKNOWN:P_(y.code);return new _e(_,y.message||"")})(f);s=new z_(r,o,d,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=ym(i,r.document.name),d=Zs(r.document.updateTime),f=r.document.createTime?Zs(r.document.createTime):qe.min(),p=new Rn({mapValue:{fields:r.document.fields}}),v=gn.newFoundDocument(o,d,f,p),y=r.targetIds||[],_=r.removedTargetIds||[];s=new gd(y,_,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=ym(i,r.document),d=r.readTime?Zs(r.readTime):qe.min(),f=gn.newNoDocument(o,d),p=r.removedTargetIds||[];s=new gd([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=ym(i,r.document),d=r.removedTargetIds||[];s=new gd([],d,o,null)}else{if(!("filter"in e))return ze(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:d}=r,f=new TA(o,d),p=r.targetId;s=new U_(p,f)}}return s}function VA(i,e){let s;if(e instanceof vc)s={update:jx(i,e.key,e.value)};else if(e instanceof $d)s={delete:Fm(i,e.key)};else if(e instanceof Lr)s={update:jx(i,e.key,e.data),updateMask:GA(e.fieldMask)};else{if(!(e instanceof _A))return ze(16599,{Vt:e.type});s={verify:Fm(i,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((r=>(function(d,f){const p=f.transform;if(p instanceof Rd)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof cc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof uc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Id)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw ze(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(s.currentDocument=(function(o,d){return d.updateTime!==void 0?{updateTime:DA(o,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:ze(27497)})(i,e.precondition)),s}function LA(i,e){return i&&i.length>0?(ct(e!==void 0,14353),i.map((s=>(function(o,d){let f=o.updateTime?Zs(o.updateTime):Zs(d);return f.isEqual(qe.min())&&(f=Zs(d)),new vA(f,o.transformResults||[])})(s,e)))):[]}function PA(i,e){return{documents:[H_(i,e.path)]}}function UA(i,e){const s={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=H_(i,o);const d=(function(y){if(y.length!==0)return Y_(Ts.create(y,"and"))})(e.filters);d&&(s.structuredQuery.where=d);const f=(function(y){if(y.length!==0)return y.map((_=>(function(A){return{field:yl(A.field),direction:qA(A.dir)}})(_)))})(e.orderBy);f&&(s.structuredQuery.orderBy=f);const p=qm(i,e.limit);return p!==null&&(s.structuredQuery.limit=p),e.startAt&&(s.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:s,parent:o}}function zA(i){let e=MA(i.parent);const s=i.structuredQuery,r=s.from?s.from.length:0;let o=null;if(r>0){ct(r===1,65062);const _=s.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let d=[];s.where&&(d=(function(E){const A=G_(E);return A instanceof Ts&&__(A)?A.getFilters():[A]})(s.where));let f=[];s.orderBy&&(f=(function(E){return E.map((A=>(function(ee){return new oc(vl(ee.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ee.direction))})(A)))})(s.orderBy));let p=null;s.limit&&(p=(function(E){let A;return A=typeof E=="object"?E.value:E,Hd(A)?null:A})(s.limit));let v=null;s.startAt&&(v=(function(E){const A=!!E.before,q=E.values||[];return new Cd(q,A)})(s.startAt));let y=null;return s.endAt&&(y=(function(E){const A=!E.before,q=E.values||[];return new Cd(q,A)})(s.endAt)),rA(e,o,f,d,p,"F",v,y)}function BA(i,e){const s=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ze(28987,{purpose:o})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function G_(i){return i.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=vl(s.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=vl(s.unaryFilter.field);return Kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=vl(s.unaryFilter.field);return Kt.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=vl(s.unaryFilter.field);return Kt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ze(61313);default:return ze(60726)}})(i):i.fieldFilter!==void 0?(function(s){return Kt.create(vl(s.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ze(58110);default:return ze(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(s){return Ts.create(s.compositeFilter.filters.map((r=>G_(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ze(1026)}})(s.compositeFilter.op))})(i):ze(30097,{filter:i})}function qA(i){return CA[i]}function HA(i){return RA[i]}function FA(i){return IA[i]}function yl(i){return{fieldPath:i.canonicalString()}}function vl(i){return un.fromServerFormat(i.fieldPath)}function Y_(i){return i instanceof Kt?(function(s){if(s.op==="=="){if(gx(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NAN"}};if(mx(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(gx(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NOT_NAN"}};if(mx(s.value))return{unaryFilter:{field:yl(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(s.field),op:HA(s.op),value:s.value}}})(i):i instanceof Ts?(function(s){const r=s.getFilters().map((o=>Y_(o)));return r.length===1?r[0]:{compositeFilter:{op:FA(s.op),filters:r}}})(i):ze(54877,{filter:i})}function GA(i){const e=[];return i.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function K_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,s,r,o,d=qe.min(),f=qe.min(),p=dn.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=v}withSequenceNumber(e){return new _r(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _r(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.yt=e}}function KA(i){const e=zA({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Bm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.Cn=new $A}addToCollectionParentIndex(e,s){return this.Cn.add(s),ce.resolve()}getCollectionParents(e,s){return ce.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return ce.resolve()}deleteFieldIndex(e,s){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,s){return ce.resolve()}getDocumentsMatchingTarget(e,s){return ce.resolve(null)}getIndexType(e,s){return ce.resolve(0)}getFieldIndexes(e,s){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,s){return ce.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,s){return ce.resolve(jr.min())}updateCollectionGroup(e,s,r){return ce.resolve()}updateIndexEntries(e,s){return ce.resolve()}}class $A{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s]||new Wt(vt.comparator),d=!o.has(r);return this.index[s]=o.add(r),d}has(e){const s=e.lastSegment(),r=e.popLast(),o=this.index[s];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Wt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Q_=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(Q_,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cl(0)}static cr(){return new Cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx="LruGarbageCollector",XA=1048576;function Ix([i,e],[s,r]){const o=tt(i,s);return o===0?tt(e,r):o}class WA{constructor(e){this.Ir=e,this.buffer=new Wt(Ix),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();Ix(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class ZA{constructor(e,s,r){this.garbageCollector=e,this.asyncQueue=s,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(Rx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Vl(s)?Se(Rx,"Ignoring IndexedDB error during garbage collection: ",s):await Ol(s)}await this.Vr(3e5)}))}}class JA{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((r=>Math.floor(s/100*r)))}nthSequenceNumber(e,s){if(s===0)return ce.resolve(qd.ce);const r=new WA(s);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,s,r){return this.mr.removeTargets(e,s,r)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(Cx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cx):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let r,o,d,f,p,v,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,f=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,p=Date.now(),this.removeTargets(e,r,s)))).next((E=>(d=E,v=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(y=Date.now(),gl()<=et.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${d} targets in `+(v-p)+`ms
	Removed ${E} documents in `+(y-v)+`ms
Total Duration: ${y-_}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:d,documentsRemoved:E}))))}}function ej(i,e){return new JA(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.changes=new Ta((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?ce.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,s,r,o){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,s)))).next((o=>(r!==null&&Zo(r.mutation,o,zn.empty(),wt.now()),o)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.getLocalViewOfDocuments(e,r,nt()).next((()=>r))))}getLocalViewOfDocuments(e,s,r=nt()){const o=ga();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,r).next((d=>{let f=Fo();return d.forEach(((p,v)=>{f=f.insert(p,v.overlayedDocument)})),f}))))}getOverlayedDocuments(e,s){const r=ga();return this.populateOverlays(e,r,s).next((()=>this.computeViews(e,s,r,nt())))}populateOverlays(e,s,r){const o=[];return r.forEach((d=>{s.has(d)||o.push(d)})),this.documentOverlayCache.getOverlays(e,o).next((d=>{d.forEach(((f,p)=>{s.set(f,p)}))}))}computeViews(e,s,r,o){let d=ki();const f=Wo(),p=(function(){return Wo()})();return s.forEach(((v,y)=>{const _=r.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Lr)?d=d.insert(y.key,y):_!==void 0?(f.set(y.key,_.mutation.getFieldMask()),Zo(_.mutation,y,_.mutation.getFieldMask(),wt.now())):f.set(y.key,zn.empty())})),this.recalculateAndSaveOverlays(e,d).next((v=>(v.forEach(((y,_)=>f.set(y,_))),s.forEach(((y,_)=>p.set(y,new nj(_,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,s){const r=Wo();let o=new Nt(((f,p)=>f-p)),d=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((f=>{for(const p of f)p.keys().forEach((v=>{const y=s.get(v);if(y===null)return;let _=r.get(v)||zn.empty();_=p.applyToLocalView(y,_),r.set(v,_);const E=(o.get(p.batchId)||nt()).add(v);o=o.insert(p.batchId,E)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),y=v.key,_=v.value,E=R_();_.forEach((A=>{if(!d.has(A)){const q=V_(s.get(A),r.get(A));q!==null&&E.set(A,q),d=d.add(A)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ce.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,s,r,o){return(function(f){return De.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):S_(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,o):this.getDocumentsMatchingCollectionQuery(e,s,r,o)}getNextDocuments(e,s,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,o).next((d=>{const f=o-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,o-d.size):ce.resolve(ga());let p=ic,v=d;return f.next((y=>ce.forEach(y,((_,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),d.get(_)?ce.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{v=v.insert(_,A)}))))).next((()=>this.populateOverlays(e,y,d))).next((()=>this.computeViews(e,v,y,nt()))).next((_=>({batchId:p,changes:C_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new De(s)).next((r=>{let o=Fo();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,s,r,o){const d=s.collectionGroup;let f=Fo();return this.indexManager.getCollectionParents(e,d).next((p=>ce.forEach(p,(v=>{const y=(function(E,A){return new Ll(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(s,v.child(d));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((_=>{_.forEach(((E,A)=>{f=f.insert(E,A)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,s,r,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next((f=>(d=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,d,o)))).next((f=>{d.forEach(((v,y)=>{const _=y.getKey();f.get(_)===null&&(f=f.insert(_,gn.newInvalidDocument(_)))}));let p=Fo();return f.forEach(((v,y)=>{const _=d.get(v);_!==void 0&&Zo(_.mutation,y,zn.empty(),wt.now()),Yd(s,y)&&(p=p.insert(v,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return ce.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(o){return{id:o.id,version:o.version,createTime:Zs(o.createTime)}})(s)),ce.resolve()}getNamedQuery(e,s){return ce.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(o){return{name:o.name,query:KA(o.bundledQuery),readTime:Zs(o.readTime)}})(s)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.overlays=new Nt(De.comparator),this.qr=new Map}getOverlay(e,s){return ce.resolve(this.overlays.get(s))}getOverlays(e,s){const r=ga();return ce.forEach(s,(o=>this.getOverlay(e,o).next((d=>{d!==null&&r.set(o,d)})))).next((()=>r))}saveOverlays(e,s,r){return r.forEach(((o,d)=>{this.St(e,s,d)})),ce.resolve()}removeOverlaysForBatchId(e,s,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(r)),ce.resolve()}getOverlaysForCollection(e,s,r){const o=ga(),d=s.length+1,f=new De(s.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const v=p.getNext().value,y=v.getKey();if(!s.isPrefixOf(y.path))break;y.path.length===d&&v.largestBatchId>r&&o.set(v.getKey(),v)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,s,r,o){let d=new Nt(((y,_)=>y-_));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===s&&y.largestBatchId>r){let _=d.get(y.largestBatchId);_===null&&(_=ga(),d=d.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const p=ga(),v=d.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((y,_)=>p.set(y,_))),!(p.size()>=o)););return ce.resolve(p)}St(e,s,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new EA(s,r));let d=this.qr.get(s);d===void 0&&(d=nt(),this.qr.set(s,d)),this.qr.set(s,d.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(){this.Qr=new Wt(tn.$r),this.Ur=new Wt(tn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const r=new tn(e,s);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,s){e.forEach((r=>this.addReference(r,s)))}removeReference(e,s){this.Gr(new tn(e,s))}zr(e,s){e.forEach((r=>this.removeReference(r,s)))}jr(e){const s=new De(new vt([])),r=new tn(s,e),o=new tn(s,e+1),d=[];return this.Ur.forEachInRange([r,o],(f=>{this.Gr(f),d.push(f.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new De(new vt([])),r=new tn(s,e),o=new tn(s,e+1);let d=nt();return this.Ur.forEachInRange([r,o],(f=>{d=d.add(f.key)})),d}containsKey(e){const s=new tn(e,0),r=this.Qr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return De.comparator(e.key,s.key)||tt(e.Yr,s.Yr)}static Kr(e,s){return tt(e.Yr,s.Yr)||De.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new Wt(tn.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,o){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new wA(d,s,r,o);this.mutationQueue.push(f);for(const p of o)this.Zr=this.Zr.add(new tn(p.key,d)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ce.resolve(f)}lookupMutationBatch(e,s){return ce.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,o=this.ei(r),d=o<0?0:o;return ce.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?fg:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new tn(s,0),o=new tn(s,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([r,o],(f=>{const p=this.Xr(f.Yr);d.push(p)})),ce.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new Wt(tt);return s.forEach((o=>{const d=new tn(o,0),f=new tn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,f],(p=>{r=r.add(p.Yr)}))})),ce.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,o=r.length+1;let d=r;De.isDocumentKey(d)||(d=d.child(""));const f=new tn(new De(d),0);let p=new Wt(tt);return this.Zr.forEachWhile((v=>{const y=v.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(v.Yr)),!0)}),f),ce.resolve(this.ti(p))}ti(e){const s=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&s.push(o)})),s}removeMutationBatch(e,s){ct(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ce.forEach(s.mutations,(o=>{const d=new tn(o.key,s.batchId);return r=r.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,s){const r=new tn(s,0),o=this.Zr.firstAfterOrEqual(r);return ce.resolve(s.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.ri=e,this.docs=(function(){return new Nt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,o=this.docs.get(r),d=o?o.size:0,f=this.ri(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:f}),this.size+=f-d,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return ce.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(s))}getEntries(e,s){let r=ki();return s.forEach((o=>{const d=this.docs.get(o);r=r.insert(o,d?d.document.mutableCopy():gn.newInvalidDocument(o))})),ce.resolve(r)}getDocumentsMatchingQuery(e,s,r,o){let d=ki();const f=s.path,p=new De(f.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:y,value:{document:_}}=v.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||LN(VN(_),r)<=0||(o.has(_.key)||Yd(s,_))&&(d=d.insert(_.key,_.mutableCopy()))}return ce.resolve(d)}getAllFromCollectionGroup(e,s,r,o){ze(9500)}ii(e,s){return ce.forEach(this.docs,(r=>s(r)))}newChangeBuffer(e){return new cj(this)}getSize(e){return ce.resolve(this.size)}}class cj extends tj{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?s.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),ce.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.persistence=e,this.si=new Ta((s=>pg(s)),yg),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.oi=0,this._i=new Eg,this.targetCount=0,this.ai=Cl.ur()}forEachTarget(e,s){return this.si.forEach(((r,o)=>s(o))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.oi&&(this.oi=s),ce.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new Cl(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,ce.resolve()}updateTargetData(e,s){return this.Pr(s),ce.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,s,r){let o=0;const d=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=s&&r.get(p.targetId)===null&&(this.si.delete(f),d.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ce.waitFor(d).next((()=>o))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,s){const r=this.si.get(s)||null;return ce.resolve(r)}addMatchingKeys(e,s,r){return this._i.Wr(s,r),ce.resolve()}removeMatchingKeys(e,s,r){this._i.zr(s,r);const o=this.persistence.referenceDelegate,d=[];return o&&s.forEach((f=>{d.push(o.markPotentiallyOrphaned(e,f))})),ce.waitFor(d)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),ce.resolve()}getMatchingKeysForTargetId(e,s){const r=this._i.Hr(s);return ce.resolve(r)}containsKey(e,s){return ce.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,s){this.ui={},this.overlays={},this.ci=new qd(0),this.li=!1,this.li=!0,this.hi=new aj,this.referenceDelegate=e(this),this.Pi=new uj(this),this.indexManager=new QA,this.remoteDocumentCache=(function(o){return new oj(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new YA(s),this.Ii=new ij(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new rj,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.ui[e.toKey()];return r||(r=new lj(s,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,r){Se("MemoryPersistence","Starting transaction:",e);const o=new dj(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((d=>this.referenceDelegate.di(o).next((()=>d)))).toPromise().then((d=>(o.raiseOnCommittedEvent(),d)))}Ai(e,s){return ce.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,s))))}}class dj extends UN{constructor(e){super(),this.currentSequenceNumber=e}}class Tg{constructor(e){this.persistence=e,this.Ri=new Eg,this.Vi=null}static mi(e){return new Tg(e)}get fi(){if(this.Vi)return this.Vi;throw ze(60996)}addReference(e,s,r){return this.Ri.addReference(r,s),this.fi.delete(r.toString()),ce.resolve()}removeReference(e,s,r){return this.Ri.removeReference(r,s),this.fi.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),ce.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next((o=>{o.forEach((d=>this.fi.add(d.toString())))})).next((()=>r.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,(r=>{const o=De.fromPath(r);return this.gi(e,o).next((d=>{d||s.removeEntry(o,qe.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((r=>{r?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return ce.or([()=>ce.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class Dd{constructor(e,s){this.persistence=e,this.pi=new Ta((r=>qN(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=ej(this,s)}static mi(e,s){return new Dd(e,s)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>s.next((o=>r+o))))}wr(e){let s=0;return this.pr(e,(r=>{s++})).next((()=>s))}pr(e,s){return ce.forEach(this.pi,((r,o)=>this.br(e,r,o).next((d=>d?ce.resolve():s(o)))))}removeTargets(e,s,r){return this.persistence.getTargetCache().removeTargets(e,s,r)}removeOrphanedDocuments(e,s){let r=0;const o=this.persistence.getRemoteDocumentCache(),d=o.newChangeBuffer();return o.ii(e,(f=>this.br(e,f,s).next((p=>{p||(r++,d.removeEntry(f,qe.min()))})))).next((()=>d.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),ce.resolve()}removeTarget(e,s){const r=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}removeReference(e,s,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),ce.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=hd(e.data.value)),s}br(e,s,r){return ce.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const o=this.pi.get(s);return ce.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,s,r,o){this.targetId=e,this.fromCache=s,this.Es=r,this.ds=o}static As(e,s){let r=nt(),o=nt();for(const d of s.docChanges)switch(d.type){case 0:r=r.add(d.doc.key);break;case 1:o=o.add(d.doc.key)}return new Sg(e,s.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return zw()?8:zN(pn())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,r,o){const d={result:null};return this.ys(e,s).next((f=>{d.result=f})).next((()=>{if(!d.result)return this.ws(e,s,o,r).next((f=>{d.result=f}))})).next((()=>{if(d.result)return;const f=new hj;return this.Ss(e,s,f).next((p=>{if(d.result=p,this.Vs)return this.bs(e,s,f,p.size)}))})).next((()=>d.result))}bs(e,s,r,o){return r.documentReadCount<this.fs?(gl()<=et.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",pl(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(gl()<=et.DEBUG&&Se("QueryEngine","Query:",pl(s),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(gl()<=et.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",pl(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ws(s))):ce.resolve())}ys(e,s){if(xx(s))return ce.resolve(null);let r=Ws(s);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(s.limit!==null&&o===1&&(s=Bm(s,null,"F"),r=Ws(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next((d=>{const f=nt(...d);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((v=>{const y=this.Ds(s,p);return this.Cs(s,y,f,v.readTime)?this.ys(e,Bm(s,null,"F")):this.vs(e,y,s,v)}))))})))))}ws(e,s,r,o){return xx(s)||o.isEqual(qe.min())?ce.resolve(null):this.ps.getDocuments(e,r).next((d=>{const f=this.Ds(s,d);return this.Cs(s,f,r,o)?ce.resolve(null):(gl()<=et.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),pl(s)),this.vs(e,f,s,ON(o,ic)).next((p=>p)))}))}Ds(e,s){let r=new Wt(A_(e));return s.forEach(((o,d)=>{Yd(e,d)&&(r=r.add(d))})),r}Cs(e,s,r,o){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const d=e.limitType==="F"?s.last():s.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(o)>0)}Ss(e,s,r){return gl()<=et.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",pl(s)),this.ps.getDocumentsMatchingQuery(e,s,jr.min(),r)}vs(e,s,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((d=>(s.forEach((f=>{d=d.insert(f.key,f)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="LocalStore",mj=3e8;class gj{constructor(e,s,r,o){this.persistence=e,this.Fs=s,this.serializer=o,this.Ms=new Nt(tt),this.xs=new Ta((d=>pg(d)),yg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function pj(i,e,s,r){return new gj(i,e,s,r)}async function X_(i,e){const s=Ge(i);return await s.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return s.mutationQueue.getAllMutationBatches(r).next((d=>(o=d,s.Bs(e),s.mutationQueue.getAllMutationBatches(r)))).next((d=>{const f=[],p=[];let v=nt();for(const y of o){f.push(y.batchId);for(const _ of y.mutations)v=v.add(_.key)}for(const y of d){p.push(y.batchId);for(const _ of y.mutations)v=v.add(_.key)}return s.localDocuments.getDocuments(r,v).next((y=>({Ls:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function yj(i,e){const s=Ge(i);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),d=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,v,y,_){const E=y.batch,A=E.keys();let q=ce.resolve();return A.forEach((ee=>{q=q.next((()=>_.getEntry(v,ee))).next((W=>{const z=y.docVersions.get(ee);ct(z!==null,48541),W.version.compareTo(z)<0&&(E.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),_.addEntry(W)))}))})),q.next((()=>p.mutationQueue.removeMutationBatch(v,E)))})(s,r,e,d).next((()=>d.apply(r))).next((()=>s.mutationQueue.performConsistencyCheck(r))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let v=nt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(v=v.add(p.batch.mutations[y].key));return v})(e)))).next((()=>s.localDocuments.getDocuments(r,o)))}))}function W_(i){const e=Ge(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function vj(i,e){const s=Ge(i),r=e.snapshotVersion;let o=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const f=s.Ns.newChangeBuffer({trackRemovals:!0});o=s.Ms;const p=[];e.targetChanges.forEach(((_,E)=>{const A=o.get(E);if(!A)return;p.push(s.Pi.removeMatchingKeys(d,_.removedDocuments,E).next((()=>s.Pi.addMatchingKeys(d,_.addedDocuments,E))));let q=A.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(E)!==null?q=q.withResumeToken(dn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):_.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(_.resumeToken,r)),o=o.insert(E,q),(function(W,z,ne){return W.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=mj?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(A,q,_)&&p.push(s.Pi.updateTargetData(d,q))}));let v=ki(),y=nt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(s.persistence.referenceDelegate.updateLimboDocument(d,_))})),p.push(xj(d,f,e.documentUpdates).next((_=>{v=_.ks,y=_.qs}))),!r.isEqual(qe.min())){const _=s.Pi.getLastRemoteSnapshotVersion(d).next((E=>s.Pi.setTargetsMetadata(d,d.currentSequenceNumber,r)));p.push(_)}return ce.waitFor(p).next((()=>f.apply(d))).next((()=>s.localDocuments.getLocalViewOfDocuments(d,v,y))).next((()=>v))})).then((d=>(s.Ms=o,d)))}function xj(i,e,s){let r=nt(),o=nt();return s.forEach((d=>r=r.add(d))),e.getEntries(i,r).next((d=>{let f=ki();return s.forEach(((p,v)=>{const y=d.get(p);v.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),v.isNoDocument()&&v.version.isEqual(qe.min())?(e.removeEntry(p,v.readTime),f=f.insert(p,v)):!y.isValidDocument()||v.version.compareTo(y.version)>0||v.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(v),f=f.insert(p,v)):Se(Ng,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",v.version)})),{ks:f,qs:o}}))}function bj(i,e){const s=Ge(i);return s.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=fg),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function _j(i,e){const s=Ge(i);return s.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return s.Pi.getTargetData(r,e).next((d=>d?(o=d,ce.resolve(o)):s.Pi.allocateTargetId(r).next((f=>(o=new _r(e,f,"TargetPurposeListen",r.currentSequenceNumber),s.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=s.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(r.targetId,r),s.xs.set(e,r.targetId)),r}))}async function Ym(i,e,s){const r=Ge(i),o=r.Ms.get(e),d=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",d,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Vl(f))throw f;Se(Ng,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function kx(i,e,s){const r=Ge(i);let o=qe.min(),d=nt();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(v,y,_){const E=Ge(v),A=E.xs.get(_);return A!==void 0?ce.resolve(E.Ms.get(A)):E.Pi.getTargetData(y,_)})(r,f,Ws(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((v=>{d=v}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,s?o:qe.min(),s?d:nt()))).next((p=>(wj(r,lA(e),p),{documents:p,Qs:d})))))}function wj(i,e,s){let r=i.Os.get(e)||qe.min();s.forEach(((o,d)=>{d.readTime.compareTo(r)>0&&(r=d.readTime)})),i.Os.set(e,r)}class Dx{constructor(){this.activeTargetIds=fA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ej{constructor(){this.Mo=new Dx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,r){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Dx,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="ConnectivityMonitor";class Ox{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(Mx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(Mx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id=null;function Km(){return id===null?id=(function(){return 268435456+Math.round(2147483648*Math.random())})():id++,"0x"+id.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="RestConnection",Sj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Ad?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,s,r,o,d){const f=Km(),p=this.zo(e,s.toUriEncodedString());Se(vm,`Sending RPC '${e}' ${f}:`,p,r);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,o,d);const{host:y}=new URL(p),_=Il(y);return this.Jo(e,p,v,r,_).then((E=>(Se(vm,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw Sl(vm,`RPC '${e}' ${f} failed with error: `,E,"url: ",p,"request:",r),E}))}Ho(e,s,r,o,d,f){return this.Go(e,s,r,o,d)}jo(e,s,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ml})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((o,d)=>e[d]=o)),r&&r.headers.forEach(((o,d)=>e[d]=o))}zo(e,s){const r=Sj[e];return`${this.Uo}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class jj extends Nj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,r,o,d){const f=Km();return new Promise(((p,v)=>{const y=new e_;y.setWithCredentials(!0),y.listenOnce(t_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case dd.NO_ERROR:const E=y.getResponseJson();Se(fn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),p(E);break;case dd.TIMEOUT:Se(fn,`RPC '${e}' ${f} timed out`),v(new _e(ae.DEADLINE_EXCEEDED,"Request time out"));break;case dd.HTTP_ERROR:const A=y.getStatus();if(Se(fn,`RPC '${e}' ${f} failed with status:`,A,"response text:",y.getResponseText()),A>0){let q=y.getResponseJson();Array.isArray(q)&&(q=q[0]);const ee=q?.error;if(ee&&ee.status&&ee.message){const W=(function(ne){const Z=ne.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(Z)>=0?Z:ae.UNKNOWN})(ee.status);v(new _e(W,ee.message))}else v(new _e(ae.UNKNOWN,"Server responded with status "+y.getStatus()))}else v(new _e(ae.UNAVAILABLE,"Connection failed."));break;default:ze(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Se(fn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);Se(fn,`RPC '${e}' ${f} sending request:`,o),y.send(s,"POST",_,r,15)}))}T_(e,s,r){const o=Km(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=i_(),p=s_(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(v.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,s,r),v.encodeInitMessageHeaders=!0;const _=d.join("");Se(fn,`Creating RPC '${e}' stream ${o}: ${_}`,v);const E=f.createWebChannel(_,v);this.I_(E);let A=!1,q=!1;const ee=new Aj({Yo:z=>{q?Se(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(A||(Se(fn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),Se(fn,`RPC '${e}' stream ${o} sending:`,z),E.send(z))},Zo:()=>E.close()}),W=(z,ne,Z)=>{z.listen(ne,(ge=>{try{Z(ge)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return W(E,Ho.EventType.OPEN,(()=>{q||(Se(fn,`RPC '${e}' stream ${o} transport opened.`),ee.o_())})),W(E,Ho.EventType.CLOSE,(()=>{q||(q=!0,Se(fn,`RPC '${e}' stream ${o} transport closed`),ee.a_(),this.E_(E))})),W(E,Ho.EventType.ERROR,(z=>{q||(q=!0,Sl(fn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),ee.a_(new _e(ae.UNAVAILABLE,"The operation could not be completed")))})),W(E,Ho.EventType.MESSAGE,(z=>{if(!q){const ne=z.data[0];ct(!!ne,16349);const Z=ne,ge=Z?.error||Z[0]?.error;if(ge){Se(fn,`RPC '${e}' stream ${o} received error:`,ge);const ue=ge.status;let ye=(function(T){const j=Gt[T];if(j!==void 0)return P_(j)})(ue),Ee=ge.message;ye===void 0&&(ye=ae.INTERNAL,Ee="Unknown error status: "+ue+" with message "+ge.message),q=!0,ee.a_(new _e(ye,Ee)),E.close()}else Se(fn,`RPC '${e}' stream ${o} received:`,ne),ee.u_(ne)}})),W(p,n_.STAT_EVENT,(z=>{z.stat===Mm.PROXY?Se(fn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===Mm.NOPROXY&&Se(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{ee.__()}),0),ee}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function xm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(i){return new kA(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,s,r=1e3,o=1.5,d=6e4){this.Mi=e,this.timerId=s,this.d_=r,this.A_=o,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,s-r);o>0&&Se("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="PersistentStream";class J_{constructor(e,s,r,o,d,f,p,v){this.Mi=e,this.S_=r,this.b_=o,this.connection=d,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Z_(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===ae.RESOURCE_EXHAUSTED?(Ii(s.toString()),Ii("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===s&&this.G_(r,o)}),(r=>{e((()=>{const o=new _e(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,s){const r=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(Vx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(Se(Vx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Cj extends J_{constructor(e,s,r,o,d,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,o,f),this.serializer=d}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=OA(this.serializer,e),r=(function(d){if(!("targetChange"in d))return qe.min();const f=d.targetChange;return f.targetIds&&f.targetIds.length?qe.min():f.readTime?Zs(f.readTime):qe.min()})(e);return this.listener.H_(s,r)}Y_(e){const s={};s.database=Gm(this.serializer),s.addTarget=(function(d,f){let p;const v=f.target;if(p=Um(v)?{documents:PA(d,v)}:{query:UA(d,v).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=B_(d,f.resumeToken);const y=qm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(qe.min())>0){p.readTime=kd(d,f.snapshotVersion.toTimestamp());const y=qm(d,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=BA(this.serializer,e);r&&(s.labels=r),this.q_(s)}Z_(e){const s={};s.database=Gm(this.serializer),s.removeTarget=e,this.q_(s)}}class Rj extends J_{constructor(e,s,r,o,d,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,o,f),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=LA(e.writeResults,e.commitTime),r=Zs(e.commitTime);return this.listener.na(r,s)}ra(){const e={};e.database=Gm(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((r=>VA(this.serializer,r)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{}class kj extends Ij{constructor(e,s,r,o){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Go(e,Hm(s,r),o,d,f))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new _e(ae.UNKNOWN,d.toString())}))}Ho(e,s,r,o,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,Hm(s,r),o,f,p,d))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new _e(ae.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Dj{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ii(s),this.aa=!1):Se("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class Mj{constructor(e,s,r,o,d){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{Sa(this)&&(Se(Ea,"Restarting streams for network reachability change."),await(async function(v){const y=Ge(v);y.Ea.add(4),await bc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Zd(y)})(this))}))})),this.Ra=new Dj(r,o)}}async function Zd(i){if(Sa(i))for(const e of i.da)await e(!0)}async function bc(i){for(const e of i.da)await e(!1)}function e1(i,e){const s=Ge(i);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),Rg(s)?Cg(s):Pl(s).O_()&&jg(s,e))}function Ag(i,e){const s=Ge(i),r=Pl(s);s.Ia.delete(e),r.O_()&&t1(s,e),s.Ia.size===0&&(r.O_()?r.L_():Sa(s)&&s.Ra.set("Unknown"))}function jg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const s=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Pl(i).Y_(e)}function t1(i,e){i.Va.Ue(e),Pl(i).Z_(e)}function Cg(i){i.Va=new jA({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Pl(i).start(),i.Ra.ua()}function Rg(i){return Sa(i)&&!Pl(i).x_()&&i.Ia.size>0}function Sa(i){return Ge(i).Ea.size===0}function n1(i){i.Va=void 0}async function Oj(i){i.Ra.set("Online")}async function Vj(i){i.Ia.forEach(((e,s)=>{jg(i,e)}))}async function Lj(i,e){n1(i),Rg(i)?(i.Ra.ha(e),Cg(i)):i.Ra.set("Unknown")}async function Pj(i,e,s){if(i.Ra.set("Online"),e instanceof z_&&e.state===2&&e.cause)try{await(async function(o,d){const f=d.cause;for(const p of d.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.Va.removeTarget(p))})(i,e)}catch(r){Se(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Md(i,r)}else if(e instanceof gd?i.Va.Ze(e):e instanceof U_?i.Va.st(e):i.Va.tt(e),!s.isEqual(qe.min()))try{const r=await W_(i.localStore);s.compareTo(r)>=0&&await(function(d,f){const p=d.Va.Tt(f);return p.targetChanges.forEach(((v,y)=>{if(v.resumeToken.approximateByteSize()>0){const _=d.Ia.get(y);_&&d.Ia.set(y,_.withResumeToken(v.resumeToken,f))}})),p.targetMismatches.forEach(((v,y)=>{const _=d.Ia.get(v);if(!_)return;d.Ia.set(v,_.withResumeToken(dn.EMPTY_BYTE_STRING,_.snapshotVersion)),t1(d,v);const E=new _r(_.target,v,y,_.sequenceNumber);jg(d,E)})),d.remoteSyncer.applyRemoteEvent(p)})(i,s)}catch(r){Se(Ea,"Failed to raise snapshot:",r),await Md(i,r)}}async function Md(i,e,s){if(!Vl(e))throw e;i.Ea.add(1),await bc(i),i.Ra.set("Offline"),s||(s=()=>W_(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Se(Ea,"Retrying IndexedDB access"),await s(),i.Ea.delete(1),await Zd(i)}))}function s1(i,e){return e().catch((s=>Md(i,s,e)))}async function Jd(i){const e=Ge(i),s=kr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fg;for(;Uj(e);)try{const o=await bj(e.localStore,r);if(o===null){e.Ta.length===0&&s.L_();break}r=o.batchId,zj(e,o)}catch(o){await Md(e,o)}i1(e)&&r1(e)}function Uj(i){return Sa(i)&&i.Ta.length<10}function zj(i,e){i.Ta.push(e);const s=kr(i);s.O_()&&s.X_&&s.ea(e.mutations)}function i1(i){return Sa(i)&&!kr(i).x_()&&i.Ta.length>0}function r1(i){kr(i).start()}async function Bj(i){kr(i).ra()}async function qj(i){const e=kr(i);for(const s of i.Ta)e.ea(s.mutations)}async function Hj(i,e,s){const r=i.Ta.shift(),o=bg.from(r,e,s);await s1(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Jd(i)}async function Fj(i,e){e&&kr(i).X_&&await(async function(r,o){if((function(f){return SA(f)&&f!==ae.ABORTED})(o.code)){const d=r.Ta.shift();kr(r).B_(),await s1(r,(()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o))),await Jd(r)}})(i,e),i1(i)&&r1(i)}async function Lx(i,e){const s=Ge(i);s.asyncQueue.verifyOperationInProgress(),Se(Ea,"RemoteStore received new credentials");const r=Sa(s);s.Ea.add(3),await bc(s),r&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await Zd(s)}async function Gj(i,e){const s=Ge(i);e?(s.Ea.delete(2),await Zd(s)):e||(s.Ea.add(2),await bc(s),s.Ra.set("Unknown"))}function Pl(i){return i.ma||(i.ma=(function(s,r,o){const d=Ge(s);return d.sa(),new Cj(r,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(i.datastore,i.asyncQueue,{Xo:Oj.bind(null,i),t_:Vj.bind(null,i),r_:Lj.bind(null,i),H_:Pj.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Rg(i)?Cg(i):i.Ra.set("Unknown")):(await i.ma.stop(),n1(i))}))),i.ma}function kr(i){return i.fa||(i.fa=(function(s,r,o){const d=Ge(s);return d.sa(),new Rj(r,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:Bj.bind(null,i),r_:Fj.bind(null,i),ta:qj.bind(null,i),na:Hj.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Jd(i)):(await i.fa.stop(),i.Ta.length>0&&(Se(Ea,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,s,r,o,d){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=o,this.removalCallback=d,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,o,d){const f=Date.now()+r,p=new Ig(e,s,f,o,d);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kg(i,e){if(Ii("AsyncQueue",`${e}: ${i}`),Vl(i))return new _e(ae.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{static emptySet(e){return new El(e.comparator)}constructor(e){this.comparator=e?(s,r)=>e(s,r)||De.comparator(s.key,r.key):(s,r)=>De.comparator(s.key,r.key),this.keyedMap=Fo(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,r)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof El)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const o=s.getNext().key,d=r.getNext().key;if(!o.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new El;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.ga=new Nt(De.comparator)}track(e){const s=e.doc.key,r=this.ga.get(s);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(s,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(s):e.type===1&&r.type===2?this.ga=this.ga.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):ze(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,r)=>{e.push(r)})),e}}class Rl{constructor(e,s,r,o,d,f,p,v,y){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=d,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=y}static fromInitialDocuments(e,s,r,o,d){const f=[];return s.forEach((p=>{f.push({type:0,doc:p})})),new Rl(e,s,El.emptySet(s),f,r,o,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(s[o].type!==r[o].type||!s[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Kj{constructor(){this.queries=Ux(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,r){const o=Ge(s),d=o.queries;o.queries=Ux(),d.forEach(((f,p)=>{for(const v of p.Sa)v.onError(r)}))})(this,new _e(ae.ABORTED,"Firestore shutting down"))}}function Ux(){return new Ta((i=>N_(i)),Gd)}async function a1(i,e){const s=Ge(i);let r=3;const o=e.query;let d=s.queries.get(o);d?!d.ba()&&e.Da()&&(r=2):(d=new Yj,r=e.Da()?0:1);try{switch(r){case 0:d.wa=await s.onListen(o,!0);break;case 1:d.wa=await s.onListen(o,!1);break;case 2:await s.onFirstRemoteStoreListen(o)}}catch(f){const p=kg(f,`Initialization of query '${pl(e.query)}' failed`);return void e.onError(p)}s.queries.set(o,d),d.Sa.push(e),e.va(s.onlineState),d.wa&&e.Fa(d.wa)&&Dg(s)}async function l1(i,e){const s=Ge(i),r=e.query;let o=3;const d=s.queries.get(r);if(d){const f=d.Sa.indexOf(e);f>=0&&(d.Sa.splice(f,1),d.Sa.length===0?o=e.Da()?0:1:!d.ba()&&e.Da()&&(o=2))}switch(o){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function Qj(i,e){const s=Ge(i);let r=!1;for(const o of e){const d=o.query,f=s.queries.get(d);if(f){for(const p of f.Sa)p.Fa(o)&&(r=!0);f.wa=o}}r&&Dg(s)}function $j(i,e,s){const r=Ge(i),o=r.queries.get(e);if(o)for(const d of o.Sa)d.onError(s);r.queries.delete(e)}function Dg(i){i.Ca.forEach((e=>{e.next()}))}var Qm,zx;(zx=Qm||(Qm={})).Ma="default",zx.Cache="cache";class o1{constructor(e,s,r){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Rl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const r=s!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class Xj{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=nt(),this.mutatedKeys=nt(),this.eu=A_(e),this.tu=new El(this.eu)}get nu(){return this.Ya}ru(e,s){const r=s?s.iu:new Px,o=s?s.tu:this.tu;let d=s?s.mutatedKeys:this.mutatedKeys,f=o,p=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const A=o.get(_),q=Yd(this.query,E)?E:null,ee=!!A&&this.mutatedKeys.has(A.key),W=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let z=!1;A&&q?A.data.isEqual(q.data)?ee!==W&&(r.track({type:3,doc:q}),z=!0):this.su(A,q)||(r.track({type:2,doc:q}),z=!0,(v&&this.eu(q,v)>0||y&&this.eu(q,y)<0)&&(p=!0)):!A&&q?(r.track({type:0,doc:q}),z=!0):A&&!q&&(r.track({type:1,doc:A}),z=!0,(v||y)&&(p=!0)),z&&(q?(f=f.add(q),d=W?d.add(_):d.delete(_)):(f=f.delete(_),d=d.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),d=d.delete(_.key),r.track({type:1,doc:_})}return{tu:f,iu:r,Cs:p,mutatedKeys:d}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,o){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,E)=>(function(q,ee){const W=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze(20277,{Rt:z})}};return W(q)-W(ee)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),o=o??!1;const p=s&&!o?this._u():[],v=this.Xa.size===0&&this.current&&!o?1:0,y=v!==this.Za;return this.Za=v,f.length!==0||y?{snapshot:new Rl(this.query,e.tu,d,f,e.mutatedKeys,v===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Px,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=nt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const s=[];return e.forEach((r=>{this.Xa.has(r)||s.push(new u1(r))})),this.Xa.forEach((r=>{e.has(r)||s.push(new c1(r))})),s}cu(e){this.Ya=e.Qs,this.Xa=nt();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return Rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Mg="SyncEngine";class Wj{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class Zj{constructor(e){this.key=e,this.hu=!1}}class Jj{constructor(e,s,r,o,d,f){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=o,this.currentUser=d,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ta((p=>N_(p)),Gd),this.Iu=new Map,this.Eu=new Set,this.du=new Nt(De.comparator),this.Au=new Map,this.Ru=new Eg,this.Vu={},this.mu=new Map,this.fu=Cl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function e4(i,e,s=!0){const r=p1(i);let o;const d=r.Tu.get(e);return d?(r.sharedClientState.addLocalQueryTarget(d.targetId),o=d.view.lu()):o=await d1(r,e,s,!0),o}async function t4(i,e){const s=p1(i);await d1(s,e,!0,!1)}async function d1(i,e,s,r){const o=await _j(i.localStore,Ws(e)),d=o.targetId,f=i.sharedClientState.addLocalQueryTarget(d,s);let p;return r&&(p=await n4(i,e,d,f==="current",o.resumeToken)),i.isPrimaryClient&&s&&e1(i.remoteStore,o),p}async function n4(i,e,s,r,o){i.pu=(E,A,q)=>(async function(W,z,ne,Z){let ge=z.view.ru(ne);ge.Cs&&(ge=await kx(W.localStore,z.query,!1).then((({documents:R})=>z.view.ru(R,ge))));const ue=Z&&Z.targetChanges.get(z.targetId),ye=Z&&Z.targetMismatches.get(z.targetId)!=null,Ee=z.view.applyChanges(ge,W.isPrimaryClient,ue,ye);return qx(W,z.targetId,Ee.au),Ee.snapshot})(i,E,A,q);const d=await kx(i.localStore,e,!0),f=new Xj(e,d.Qs),p=f.ru(d.documents),v=xc.createSynthesizedTargetChangeForCurrentChange(s,r&&i.onlineState!=="Offline",o),y=f.applyChanges(p,i.isPrimaryClient,v);qx(i,s,y.au);const _=new Wj(e,s,f);return i.Tu.set(e,_),i.Iu.has(s)?i.Iu.get(s).push(e):i.Iu.set(s,[e]),y.snapshot}async function s4(i,e,s){const r=Ge(i),o=r.Tu.get(e),d=r.Iu.get(o.targetId);if(d.length>1)return r.Iu.set(o.targetId,d.filter((f=>!Gd(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Ym(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),s&&Ag(r.remoteStore,o.targetId),$m(r,o.targetId)})).catch(Ol)):($m(r,o.targetId),await Ym(r.localStore,o.targetId,!0))}async function i4(i,e){const s=Ge(i),r=s.Tu.get(e),o=s.Iu.get(r.targetId);s.isPrimaryClient&&o.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),Ag(s.remoteStore,r.targetId))}async function r4(i,e,s){const r=h4(i);try{const o=await(function(f,p){const v=Ge(f),y=wt.now(),_=p.reduce(((q,ee)=>q.add(ee.key)),nt());let E,A;return v.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let ee=ki(),W=nt();return v.Ns.getEntries(q,_).next((z=>{ee=z,ee.forEach(((ne,Z)=>{Z.isValidDocument()||(W=W.add(ne))}))})).next((()=>v.localDocuments.getOverlayedDocuments(q,ee))).next((z=>{E=z;const ne=[];for(const Z of p){const ge=bA(Z,E.get(Z.key).overlayedDocument);ge!=null&&ne.push(new Lr(Z.key,ge,v_(ge.value.mapValue),_n.exists(!0)))}return v.mutationQueue.addMutationBatch(q,y,ne,p)})).next((z=>{A=z;const ne=z.applyToLocalDocumentSet(E,W);return v.documentOverlayCache.saveOverlays(q,z.batchId,ne)}))})).then((()=>({batchId:A.batchId,changes:C_(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,p,v){let y=f.Vu[f.currentUser.toKey()];y||(y=new Nt(tt)),y=y.insert(p,v),f.Vu[f.currentUser.toKey()]=y})(r,o.batchId,s),await _c(r,o.changes),await Jd(r.remoteStore)}catch(o){const d=kg(o,"Failed to persist write");s.reject(d)}}async function h1(i,e){const s=Ge(i);try{const r=await vj(s.localStore,e);e.targetChanges.forEach(((o,d)=>{const f=s.Au.get(d);f&&(ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?ct(f.hu,14607):o.removedDocuments.size>0&&(ct(f.hu,42227),f.hu=!1))})),await _c(s,r,e)}catch(r){await Ol(r)}}function Bx(i,e,s){const r=Ge(i);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const o=[];r.Tu.forEach(((d,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const v=Ge(f);v.onlineState=p;let y=!1;v.queries.forEach(((_,E)=>{for(const A of E.Sa)A.va(p)&&(y=!0)})),y&&Dg(v)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a4(i,e,s){const r=Ge(i);r.sharedClientState.updateQueryState(e,"rejected",s);const o=r.Au.get(e),d=o&&o.key;if(d){let f=new Nt(De.comparator);f=f.insert(d,gn.newNoDocument(d,qe.min()));const p=nt().add(d),v=new Xd(qe.min(),new Map,new Nt(tt),f,p);await h1(r,v),r.du=r.du.remove(d),r.Au.delete(e),Og(r)}else await Ym(r.localStore,e,!1).then((()=>$m(r,e,s))).catch(Ol)}async function l4(i,e){const s=Ge(i),r=e.batch.batchId;try{const o=await yj(s.localStore,e);m1(s,r,null),f1(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await _c(s,o)}catch(o){await Ol(o)}}async function o4(i,e,s){const r=Ge(i);try{const o=await(function(f,p){const v=Ge(f);return v.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return v.mutationQueue.lookupMutationBatch(y,p).next((E=>(ct(E!==null,37113),_=E.keys(),v.mutationQueue.removeMutationBatch(y,E)))).next((()=>v.mutationQueue.performConsistencyCheck(y))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(y,_,p))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>v.localDocuments.getDocuments(y,_)))}))})(r.localStore,e);m1(r,e,s),f1(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await _c(r,o)}catch(o){await Ol(o)}}function f1(i,e){(i.mu.get(e)||[]).forEach((s=>{s.resolve()})),i.mu.delete(e)}function m1(i,e,s){const r=Ge(i);let o=r.Vu[r.currentUser.toKey()];if(o){const d=o.get(e);d&&(s?d.reject(s):d.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function $m(i,e,s=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),s&&i.Pu.yu(r,s);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||g1(i,r)}))}function g1(i,e){i.Eu.delete(e.path.canonicalString());const s=i.du.get(e);s!==null&&(Ag(i.remoteStore,s),i.du=i.du.remove(e),i.Au.delete(s),Og(i))}function qx(i,e,s){for(const r of s)r instanceof c1?(i.Ru.addReference(r.key,e),c4(i,r)):r instanceof u1?(Se(Mg,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||g1(i,r.key)):ze(19791,{wu:r})}function c4(i,e){const s=e.key,r=s.path.canonicalString();i.du.get(s)||i.Eu.has(r)||(Se(Mg,"New document in limbo: "+s),i.Eu.add(r),Og(i))}function Og(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const s=new De(vt.fromString(e)),r=i.fu.next();i.Au.set(r,new Zj(s)),i.du=i.du.insert(s,r),e1(i.remoteStore,new _r(Ws(vg(s.path)),r,"TargetPurposeLimboResolution",qd.ce))}}async function _c(i,e,s){const r=Ge(i),o=[],d=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,v)=>{f.push(r.pu(v,e,s).then((y=>{if((y||s)&&r.isPrimaryClient){const _=y?!y.fromCache:s?.targetChanges.get(v.targetId)?.current;r.sharedClientState.updateQueryState(v.targetId,_?"current":"not-current")}if(y){o.push(y);const _=Sg.As(v.targetId,y);d.push(_)}})))})),await Promise.all(f),r.Pu.H_(o),await(async function(v,y){const _=Ge(v);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ce.forEach(y,(A=>ce.forEach(A.Es,(q=>_.persistence.referenceDelegate.addReference(E,A.targetId,q))).next((()=>ce.forEach(A.ds,(q=>_.persistence.referenceDelegate.removeReference(E,A.targetId,q)))))))))}catch(E){if(!Vl(E))throw E;Se(Ng,"Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const q=_.Ms.get(A),ee=q.snapshotVersion,W=q.withLastLimboFreeSnapshotVersion(ee);_.Ms=_.Ms.insert(A,W)}}})(r.localStore,d))}async function u4(i,e){const s=Ge(i);if(!s.currentUser.isEqual(e)){Se(Mg,"User change. New user:",e.toKey());const r=await X_(s.localStore,e);s.currentUser=e,(function(d,f){d.mu.forEach((p=>{p.forEach((v=>{v.reject(new _e(ae.CANCELLED,f))}))})),d.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _c(s,r.Ls)}}function d4(i,e){const s=Ge(i),r=s.Au.get(e);if(r&&r.hu)return nt().add(r.key);{let o=nt();const d=s.Iu.get(e);if(!d)return o;for(const f of d){const p=s.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function p1(i){const e=Ge(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a4.bind(null,e),e.Pu.H_=Qj.bind(null,e.eventManager),e.Pu.yu=$j.bind(null,e.eventManager),e}function h4(i){const e=Ge(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o4.bind(null,e),e}class Od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return pj(this.persistence,new fj,e.initialUser,this.serializer)}Cu(e){return new $_(Tg.mi,this.serializer)}Du(e){return new Ej}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Od.provider={build:()=>new Od};class f4 extends Od{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){ct(this.persistence.referenceDelegate instanceof Dd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZA(r,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new $_((r=>Dd.mi(r,s)),this.serializer)}}class Xm{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=u4.bind(null,this.syncEngine),await Gj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Kj})()}createDatastore(e){const s=Wd(e.databaseInfo.databaseId),r=(function(d){return new jj(d)})(e.databaseInfo);return(function(d,f,p,v){return new kj(d,f,p,v)})(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return(function(r,o,d,f,p){return new Mj(r,o,d,f,p)})(this.localStore,this.datastore,e.asyncQueue,(s=>Bx(this.syncEngine,s,0)),(function(){return Ox.v()?new Ox:new Tj})())}createSyncEngine(e,s){return(function(o,d,f,p,v,y,_){const E=new Jj(o,d,f,p,v,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const r=Ge(s);Se(Ea,"RemoteStore shutting down."),r.Ea.add(5),await bc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Xm.provider={build:()=>new Xm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ii("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="FirestoreClient";class m4{constructor(e,s,r,o,d){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=o,this.user=mn.UNAUTHENTICATED,this.clientId=hg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(r,(async f=>{Se(Dr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(Se(Dr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=kg(s,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function bm(i,e){i.asyncQueue.verifyOperationInProgress(),Se(Dr,"Initializing OfflineComponentProvider");const s=i.configuration;await e.initialize(s);let r=s.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await X_(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Hx(i,e){i.asyncQueue.verifyOperationInProgress();const s=await g4(i);Se(Dr,"Initializing OnlineComponentProvider"),await e.initialize(s,i.configuration),i.setCredentialChangeListener((r=>Lx(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>Lx(e.remoteStore,o))),i._onlineComponents=e}async function g4(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Se(Dr,"Using user provided OfflineComponentProvider");try{await bm(i,i._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(s))throw s;Sl("Error using user provided cache. Falling back to memory cache: "+s),await bm(i,new Od)}}else Se(Dr,"Using default OfflineComponentProvider"),await bm(i,new f4(void 0));return i._offlineComponents}async function v1(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Se(Dr,"Using user provided OnlineComponentProvider"),await Hx(i,i._uninitializedComponentsProvider._online)):(Se(Dr,"Using default OnlineComponentProvider"),await Hx(i,new Xm))),i._onlineComponents}function p4(i){return v1(i).then((e=>e.syncEngine))}async function Wm(i){const e=await v1(i),s=e.eventManager;return s.onListen=e4.bind(null,e.syncEngine),s.onUnlisten=s4.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=t4.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=i4.bind(null,e.syncEngine),s}function y4(i,e,s={}){const r=new Nr;return i.asyncQueue.enqueueAndForget((async()=>(function(d,f,p,v,y){const _=new y1({next:A=>{_.Nu(),f.enqueueAndForget((()=>l1(d,E))),A.fromCache&&v.source==="server"?y.reject(new _e(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new o1(p,_,{includeMetadataChanges:!0,qa:!0});return a1(d,E)})(await Wm(i),i.asyncQueue,e,s,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firestore.googleapis.com",Gx=!0;class Yx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=b1,this.ssl=Gx}else this.host=e.host,this.ssl=e.ssl??Gx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Q_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XA)throw new _e(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new _e(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eh{constructor(e,s,r,o){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new TN;switch(r.type){case"firstParty":return new jN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const r=Fx.get(s);r&&(Se("ComponentProvider","Removing Datastore"),Fx.delete(s),r.terminate())})(this),Promise.resolve()}}function v4(i,e,s,r={}){i=Bn(i,eh);const o=Il(e),d=i._getSettings(),f={...d,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${s}`;o&&(db(`https://${p}`),hb("Firestore",!0)),d.host!==b1&&d.host!==p&&Sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...d,host:p,ssl:o,emulatorOptions:r};if(!va(v,f)&&(i._setSettings(v),r.mockUserToken)){let y,_;if(typeof r.mockUserToken=="string")y=r.mockUserToken,_=mn.MOCK_USER;else{y=Iw(r.mockUserToken,i._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new _e(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new mn(E)}i._authCredentials=new SN(new a_(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pr(this.firestore,e,this._query)}}class Mt{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(yc(s,Mt._jsonSchema))return new Mt(e,r||null,new De(vt.fromString(s.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Qt("string",Mt._jsonSchemaVersion),referencePath:Qt("string")};class Ar extends Pr{constructor(e,s,r){super(e,s,vg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new De(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function Et(i,e,...s){if(i=Ot(i),l_("collection","path",e),i instanceof eh){const r=vt.fromString(e,...s);return rx(r),new Ar(i,null,r)}{if(!(i instanceof Mt||i instanceof Ar))throw new _e(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(vt.fromString(e,...s));return rx(r),new Ar(i.firestore,null,r)}}function $t(i,e,...s){if(i=Ot(i),arguments.length===1&&(e=hg.newId()),l_("doc","path",e),i instanceof eh){const r=vt.fromString(e,...s);return ix(r),new Mt(i,null,new De(r))}{if(!(i instanceof Mt||i instanceof Ar))throw new _e(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(vt.fromString(e,...s));return ix(r),new Mt(i.firestore,i instanceof Ar?i.converter:null,new De(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="AsyncQueue";class Qx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Z_(this,"async_queue_retry"),this._c=()=>{const r=xm();r&&Se(Kx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const s=xm();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=xm();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new Nr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vl(e))throw e;Se(Kx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ii("INTERNAL UNHANDLED ERROR: ",$x(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=s,s}enqueueAfterDelay(e,s,r){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const o=Ig.createAndSchedule(this,e,s,r,(d=>this.hc(d)));return this.tc.push(o),o}uc(){this.nc&&ze(47125,{Pc:$x(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,r)=>s.targetTimeMs-r.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function $x(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(i){return(function(s,r){if(typeof s!="object"||s===null)return!1;const o=s;for(const d of r)if(d in o&&typeof o[d]=="function")return!0;return!1})(i,["next","error","complete"])}class Di extends eh{constructor(e,s,r,o){super(e,s,r,o),this.type="firestore",this._queue=new Qx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qx(e),this._firestoreClient=void 0,await e}}}function x4(i,e){const s=typeof i=="object"?i:pb(),r=typeof i=="string"?i:Ad,o=ng(s,"firestore").getImmediate({identifier:r});if(!o._initialized){const d=Cw("firestore");d&&v4(o,...d)}return o}function th(i){if(i._terminated)throw new _e(ae.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||b4(i),i._firestoreClient}function b4(i){const e=i._freezeSettings(),s=(function(o,d,f,p){return new GN(o,d,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,x1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new m4(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&(function(o){const d=o?._online.build();return{_offline:o?._offline.build(d),_online:d}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rs(dn.fromBase64String(e))}catch(s){throw new _e(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new rs(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yc(e,rs._jsonSchema))return rs.fromBase64String(e.bytes)}}rs._jsonSchemaVersion="firestore/bytes/1.0",rs._jsonSchema={type:Qt("string",rs._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new _e(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new _e(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new _e(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Js._jsonSchemaVersion}}static fromJSON(e){if(yc(e,Js._jsonSchema))return new Js(e.latitude,e.longitude)}}Js._jsonSchemaVersion="firestore/geoPoint/1.0",Js._jsonSchema={type:Qt("string",Js._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let d=0;d<r.length;++d)if(r[d]!==o[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ei._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yc(e,ei._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new ei(e.vectorValues);throw new _e(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ei._jsonSchemaVersion="firestore/vectorValue/1.0",ei._jsonSchema={type:Qt("string",ei._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=/^__.*__$/;class w4{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,s,this.fieldTransforms):new vc(e,this.data,s,this.fieldTransforms)}}class _1{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Lr(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function w1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze(40011,{Ac:i})}}class Lg{constructor(e,s,r,o,d,f){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=o,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Lg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.gc(e),r}yc(e){const s=this.path?.child(e),r=this.Vc({path:s,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(w1(this.Ac)&&_4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class E4{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Wd(e)}Cc(e,s,r,o=!1){return new Lg({Ac:e,methodName:s,Dc:r,path:un.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ec(i){const e=i._freezeSettings(),s=Wd(i._databaseId);return new E4(i._databaseId,!!e.ignoreUndefinedProperties,s)}function Pg(i,e,s,r,o,d={}){const f=i.Cc(d.merge||d.mergeFields?2:0,e,s,o);Ug("Data must be an object, but it was:",f,r);const p=S1(r,f);let v,y;if(d.merge)v=new zn(f.fieldMask),y=f.fieldTransforms;else if(d.mergeFields){const _=[];for(const E of d.mergeFields){const A=Zm(e,E,s);if(!f.contains(A))throw new _e(ae.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);A1(_,A)||_.push(A)}v=new zn(_),y=f.fieldTransforms.filter((E=>v.covers(E.field)))}else v=null,y=f.fieldTransforms;return new w4(new Rn(p),v,y)}class nh extends Vg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nh}}function E1(i,e,s,r){const o=i.Cc(1,e,s);Ug("Data must be an object, but it was:",o,r);const d=[],f=Rn.empty();Vr(r,((v,y)=>{const _=zg(e,v,s);y=Ot(y);const E=o.yc(_);if(y instanceof nh)d.push(_);else{const A=Tc(y,E);A!=null&&(d.push(_),f.set(_,A))}}));const p=new zn(d);return new _1(f,p,o.fieldTransforms)}function T1(i,e,s,r,o,d){const f=i.Cc(1,e,s),p=[Zm(e,r,s)],v=[o];if(d.length%2!=0)throw new _e(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<d.length;A+=2)p.push(Zm(e,d[A])),v.push(d[A+1]);const y=[],_=Rn.empty();for(let A=p.length-1;A>=0;--A)if(!A1(y,p[A])){const q=p[A];let ee=v[A];ee=Ot(ee);const W=f.yc(q);if(ee instanceof nh)y.push(q);else{const z=Tc(ee,W);z!=null&&(y.push(q),_.set(q,z))}}const E=new zn(y);return new _1(_,E,f.fieldTransforms)}function T4(i,e,s,r=!1){return Tc(s,i.Cc(r?4:3,e))}function Tc(i,e){if(N1(i=Ot(i)))return Ug("Unsupported field value:",e,i),S1(i,e);if(i instanceof Vg)return(function(r,o){if(!w1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const d=r._toFieldTransform(o);d&&o.fieldTransforms.push(d)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const d=[];let f=0;for(const p of r){let v=Tc(p,o.wc(f));v==null&&(v={nullValue:"NULL_VALUE"}),d.push(v),f++}return{arrayValue:{values:d}}})(i,e)}return(function(r,o){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const d=wt.fromDate(r);return{timestampValue:kd(o.serializer,d)}}if(r instanceof wt){const d=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kd(o.serializer,d)}}if(r instanceof Js)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rs)return{bytesValue:B_(o.serializer,r._byteString)};if(r instanceof Mt){const d=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(d))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:wg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ei)return(function(f,p){return{mapValue:{fields:{[p_]:{stringValue:y_},[jd]:{arrayValue:{values:f.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return xg(p.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Bd(r)}`)})(i,e)}function S1(i,e){const s={};return u_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vr(i,((r,o)=>{const d=Tc(o,e.mc(r));d!=null&&(s[r]=d)})),{mapValue:{fields:s}}}function N1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof wt||i instanceof Js||i instanceof rs||i instanceof Mt||i instanceof Vg||i instanceof ei)}function Ug(i,e,s){if(!N1(s)||!o_(s)){const r=Bd(s);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function Zm(i,e,s){if((e=Ot(e))instanceof wc)return e._internalPath;if(typeof e=="string")return zg(i,e);throw Vd("Field path arguments must be of type string or ",i,!1,void 0,s)}const S4=new RegExp("[~\\*/\\[\\]]");function zg(i,e,s){if(e.search(S4)>=0)throw Vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,s);try{return new wc(...e.split("."))._internalPath}catch{throw Vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,s)}}function Vd(i,e,s,r,o){const d=r&&!r.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;s&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(d||f)&&(v+=" (found",d&&(v+=` in field ${r}`),f&&(v+=` in document ${o}`),v+=")"),new _e(ae.INVALID_ARGUMENT,p+i+v)}function A1(i,e){return i.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,s,r,o,d){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=o,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(sh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class N4 extends j1{data(){return super.data()}}function sh(i,e){return typeof e=="string"?zg(i,e):e instanceof wc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new _e(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bg{}class R1 extends Bg{}function qn(i,e,...s){let r=[];e instanceof Bg&&r.push(e),r=r.concat(s),(function(d){const f=d.filter((v=>v instanceof qg)).length,p=d.filter((v=>v instanceof ih)).length;if(f>1||f>0&&p>0)throw new _e(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class ih extends R1{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new ih(e,s,r)}_apply(e){const s=this._parse(e);return I1(e._query,s),new Pr(e.firestore,e.converter,zm(e._query,s))}_parse(e){const s=Ec(e.firestore);return(function(d,f,p,v,y,_,E){let A;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new _e(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Zx(E,_);const ee=[];for(const W of E)ee.push(Wx(v,d,W));A={arrayValue:{values:ee}}}else A=Wx(v,d,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Zx(E,_),A=T4(p,f,E,_==="in"||_==="not-in");return Kt.create(y,_,A)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function A4(i,e,s){const r=e,o=sh("where",i);return ih._create(o,r,s)}class qg extends Bg{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new qg(e,s)}_parse(e){const s=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return s.length===1?s[0]:Ts.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(o,d){let f=o;const p=d.getFlattenedFilters();for(const v of p)I1(f,v),f=zm(f,v)})(e._query,s),new Pr(e.firestore,e.converter,zm(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hg extends R1{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new Hg(e,s)}_apply(e){const s=(function(o,d,f){if(o.startAt!==null)throw new _e(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new _e(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oc(d,f)})(e._query,this._field,this._direction);return new Pr(e.firestore,e.converter,(function(o,d){const f=o.explicitOrderBy.concat([d]);return new Ll(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,s))}}function ls(i,e="asc"){const s=e,r=sh("orderBy",i);return Hg._create(r,s)}function Wx(i,e,s){if(typeof(s=Ot(s))=="string"){if(s==="")throw new _e(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!S_(e)&&s.indexOf("/")!==-1)throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(vt.fromString(s));if(!De.isDocumentKey(r))throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fx(i,new De(r))}if(s instanceof Mt)return fx(i,s._key);throw new _e(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bd(s)}.`)}function Zx(i,e){if(!Array.isArray(i)||i.length===0)throw new _e(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I1(i,e){const s=(function(o,d){for(const f of o)for(const p of f.getFlattenedFilters())if(d.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new _e(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class j4{convertValue(e,s="none"){switch(Ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw ze(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return Vr(e,((o,d)=>{r[o]=this.convertValue(d,s)})),r}convertVectorValue(e){const s=e.fields?.[jd].arrayValue?.values?.map((r=>Dt(r.doubleValue)));return new ei(s)}convertGeoPoint(e){return new Js(Dt(e.latitude),Dt(e.longitude))}convertArray(e,s){return(e.values||[]).map((r=>this.convertValue(r,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const r=Fd(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const s=Cr(e);return new wt(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=vt.fromString(e);ct(K_(r),9688,{name:e});const o=new ac(r.get(1),r.get(3)),d=new De(r.popFirst(5));return o.isEqual(s)||Ii(`Document ${d} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(i,e,s){let r;return r=i?s&&(s.merge||s.mergeFields)?i.toFirestore(e,s):i.toFirestore(e):e,r}class Yo{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pa extends j1{constructor(e,s,r,o,d,f){super(e,s,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(sh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=pa._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}pa._jsonSchemaVersion="firestore/documentSnapshot/1.0",pa._jsonSchema={type:Qt("string",pa._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class pd extends pa{data(e={}){return super.data(e)}}class ya{constructor(e,s,r,o){this._firestore=e,this._userDataWriter=s,this._snapshot=o,this.metadata=new Yo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((r=>{e.call(s,new pd(this._firestore,this._userDataWriter,r.key,r,new Yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new _e(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(o,d){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const v=new pd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Yo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:v,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>d||p.type!==3)).map((p=>{const v=new pd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Yo(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),_=f.indexOf(p.doc.key)),{type:C4(p.type),doc:v,oldIndex:y,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ya._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],o=[];return this.docs.forEach((d=>{d._document!==null&&(s.push(d._document),r.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),o.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function C4(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze(61501,{type:i})}}ya._jsonSchemaVersion="firestore/querySnapshot/1.0",ya._jsonSchema={type:Qt("string",ya._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Gg extends j4{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,s)}}function R4(i){i=Bn(i,Pr);const e=Bn(i.firestore,Di),s=th(e),r=new Gg(e);return C1(i._query),y4(s,i._query).then((o=>new ya(e,r,i,o)))}function I4(i,e,s){i=Bn(i,Mt);const r=Bn(i.firestore,Di),o=Fg(i.converter,e,s);return Sc(r,[Pg(Ec(r),"setDoc",i._key,o,i.converter!==null,s).toMutation(i._key,_n.none())])}function ni(i,e,s,...r){i=Bn(i,Mt);const o=Bn(i.firestore,Di),d=Ec(o);let f;return f=typeof(e=Ot(e))=="string"||e instanceof wc?T1(d,"updateDoc",i._key,e,s,r):E1(d,"updateDoc",i._key,e),Sc(o,[f.toMutation(i._key,_n.exists(!0))])}function Mr(i){return Sc(Bn(i.firestore,Di),[new $d(i._key,_n.none())])}function ji(i,e){const s=Bn(i.firestore,Di),r=$t(i),o=Fg(i.converter,e);return Sc(s,[Pg(Ec(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,_n.exists(!1))]).then((()=>r))}function bn(i,...e){i=Ot(i);let s={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Xx(e[r])||(s=e[r++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Xx(e[r])){const v=e[r];e[r]=v.next?.bind(v),e[r+1]=v.error?.bind(v),e[r+2]=v.complete?.bind(v)}let d,f,p;if(i instanceof Mt)f=Bn(i.firestore,Di),p=vg(i._key.path),d={next:v=>{e[r]&&e[r](k4(f,i,v))},error:e[r+1],complete:e[r+2]};else{const v=Bn(i,Pr);f=Bn(v.firestore,Di),p=v._query;const y=new Gg(f);d={next:_=>{e[r]&&e[r](new ya(f,y,v,_))},error:e[r+1],complete:e[r+2]},C1(i._query)}return(function(y,_,E,A){const q=new y1(A),ee=new o1(_,q,E);return y.asyncQueue.enqueueAndForget((async()=>a1(await Wm(y),ee))),()=>{q.Nu(),y.asyncQueue.enqueueAndForget((async()=>l1(await Wm(y),ee)))}})(th(f),p,o,d)}function Sc(i,e){return(function(r,o){const d=new Nr;return r.asyncQueue.enqueueAndForget((async()=>r4(await p4(r),o,d))),d.promise})(th(i),e)}function k4(i,e,s){const r=s.docs.get(e._key),o=new Gg(i);return new pa(i,o,e._key,r,new Yo(s.hasPendingWrites,s.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,s){this._firestore=e,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=Ec(e)}set(e,s,r){this._verifyNotCommitted();const o=_m(e,this._firestore),d=Fg(o.converter,s,r),f=Pg(this._dataReader,"WriteBatch.set",o._key,d,o.converter!==null,r);return this._mutations.push(f.toMutation(o._key,_n.none())),this}update(e,s,r,...o){this._verifyNotCommitted();const d=_m(e,this._firestore);let f;return f=typeof(s=Ot(s))=="string"||s instanceof wc?T1(this._dataReader,"WriteBatch.update",d._key,s,r,o):E1(this._dataReader,"WriteBatch.update",d._key,s),this._mutations.push(f.toMutation(d._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const s=_m(e,this._firestore);return this._mutations=this._mutations.concat(new $d(s._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _m(i,e){if((i=Ot(i)).firestore!==e)throw new _e(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(i){return th(i=Bn(i,Di)),new D4(i,(e=>Sc(i,e)))}(function(e,s=!0){(function(o){Ml=o})(kl),Tl(new xa("firestore",((r,{instanceIdentifier:o,options:d})=>{const f=r.getProvider("app").getImmediate(),p=new Di(new NN(r.getProvider("auth-internal")),new CN(f,r.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new _e(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ac(y.options.projectId,_)})(f,o),f);return d={useFetchStreams:s,...d},p._setSettings(d),p}),"PUBLIC").setMultipleInstances(!0)),Tr(ex,tx,e),Tr(ex,tx,"esm2020")})();const O4={apiKey:"AIzaSyBdOtc0a5LLwWANuCXf4lzEvM9PWP2h2Pc",authDomain:"ihsan-54330.firebaseapp.com",projectId:"ihsan-54330",storageBucket:"ihsan-54330.firebasestorage.app",messagingSenderId:"584561275824",appId:"1:584561275824:web:d4ba348c661764cf6b9c75"},k1=gb(O4),as=bN(k1),He=x4(k1),wm={Lock:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Mail:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ArrowRight:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l7 7m7-7H3"})})};function V4(){const[i,e]=ie.useState(!0),[s,r]=ie.useState(""),[o,d]=ie.useState(""),[f,p]=ie.useState(""),[v,y]=ie.useState(""),[_,E]=ie.useState(!1),A=async W=>{W.preventDefault(),p(""),y(""),E(!0);try{if(i)await rS(as,s,o);else{const ne=(await iS(as,s,o)).user;await I4($t(He,"users",ne.uid),{email:ne.email,role:"user",createdAt:new Date().toISOString()}),y("Hesap baaryla oluturuldu! Ynlendiriliyorsunuz...")}}catch(z){p(ee(z.code))}finally{E(!1)}},q=async()=>{if(!s){p("Ltfen ifre sfrlama iin e-posta adresinizi giriniz.");return}try{await sS(as,s),y("ifre sfrlama balants e-posta adresinize gnderildi."),p("")}catch(W){p(ee(W.code))}},ee=W=>{switch(W){case"auth/invalid-email":return"Geersiz e-posta format.";case"auth/user-not-found":return"Bu e-posta ile kaytl kullanc bulunamad.";case"auth/wrong-password":return"Hatal ifre.";case"auth/email-already-in-use":return"Bu e-posta adresi zaten kullanmda.";case"auth/weak-password":return"ifre ok zayf (en az 6 karakter olmal).";case"auth/too-many-requests":return"ok fazla baarsz deneme. Ltfen bekleyin.";default:return"Bir hata olutu: "+W}};return c.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),c.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"}),c.jsxs("div",{className:"relative w-full max-w-md m-4",children:[c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-2xl blur opacity-30"}),c.jsxs("div",{className:"relative bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-8 sm:p-10",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Erelebiler Ahap"}),c.jsx("p",{className:"text-indigo-200 text-sm font-medium",children:i?"Ynetim paneline giri yapn":"Yeni hesap oluturun"})]}),f&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-red-500/20 border border-red-500/50 text-red-200 text-sm text-center backdrop-blur-sm",children:f}),v&&c.jsx("div",{className:"mb-6 p-3 rounded-lg bg-emerald-500/20 border border-emerald-500/50 text-emerald-200 text-sm text-center backdrop-blur-sm",children:v}),c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(wm.Mail,{})}),c.jsx("input",{id:"email",type:"email",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"E-posta Adresi",value:s,onChange:W=>r(W.target.value)})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-indigo-300 group-focus-within:text-white transition-colors",children:c.jsx(wm.Lock,{})}),c.jsx("input",{id:"password",type:"password",required:!0,className:"w-full bg-black/20 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all",placeholder:"ifre",value:o,onChange:W=>d(W.target.value)})]})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsx("button",{type:"button",onClick:q,className:"text-xs font-medium text-indigo-300 hover:text-white transition-colors",children:"ifremi unuttum?"})}),c.jsx("button",{type:"submit",disabled:_,className:`w-full flex items-center justify-center py-3.5 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-900/30 transform transition-all hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 focus:ring-offset-slate-900 ${_?"opacity-70 cursor-not-allowed":""}`,children:_?c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):c.jsxs(c.Fragment,{children:[i?"Giri Yap":"Kaydol",c.jsx("span",{className:"ml-2",children:c.jsx(wm.ArrowRight,{})})]})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-white/10 text-center",children:c.jsxs("p",{className:"text-sm text-indigo-200",children:[i?"Hesabnz yok mu?":"Zaten hesabnz var m?"," ",c.jsx("button",{onClick:()=>e(!i),className:"font-bold text-white hover:text-indigo-300 transition-colors ml-1",children:i?"Hemen kaydolun":"Giri yapn"})]})})]})]})]})}const pr={TrendingUp:()=>c.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Users:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Cart:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),Document:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Sun:()=>c.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Alert:()=>c.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},L4=({data:i})=>{if(!i||i.length===0)return c.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"Veri Yok"});const e=200,s=600,r=20,o=Math.max(...i.map(p=>p.value))||100,d=i.map((p,v)=>{const y=i.length>1?v/(i.length-1)*(s-r*2)+r:s/2,_=e-r-p.value/o*(e-r*2),E=isNaN(y)?r:y,A=isNaN(_)?e-r:_;return`${E},${A}`}).join(" "),f=`${d} ${s-r},${e-r} ${r},${e-r}`;return c.jsxs("svg",{viewBox:`0 0 ${s} ${e}`,className:"w-full h-full overflow-visible",children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"gradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#6366f1",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#6366f1",stopOpacity:"0"})]})}),c.jsx("line",{x1:r,y1:e-r,x2:s-r,y2:e-r,stroke:"#e5e7eb",strokeWidth:"1"}),i.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M ${f}`,fill:"url(#gradient)",stroke:"none"}),c.jsx("polyline",{points:d,fill:"none",stroke:"#6366f1",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]}),i.map((p,v)=>{const y=i.length>1?v/(i.length-1)*(s-r*2)+r:s/2,_=e-r-p.value/o*(e-r*2),E=isNaN(y)?r:y,A=isNaN(_)?e-r:_;return c.jsx("circle",{cx:E,cy:A,r:"4",fill:"white",stroke:"#6366f1",strokeWidth:"2",className:"hover:r-6 transition-all"},v)})]})},rd=({title:i,value:e,subtext:s,icon:r,color:o})=>c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl p-6 border border-white/50 shadow-lg flex items-start justify-between group hover:scale-[1.02] transition-all",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1",children:i}),c.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:e}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[c.jsx(pr.TrendingUp,{})," ",s]})]}),c.jsx("div",{className:`p-3 rounded-xl text-white shadow-lg ${o}`,children:c.jsx(r,{})})]});function Jx({onNavigate:i=()=>{}}){const[e,s]=ie.useState(null),[r,o]=ie.useState(!0),[d,f]=ie.useState({activeOrders:0,pendingProposals:0,totalWorkers:0,inventoryCount:0}),[p,v]=ie.useState([]),[y,_]=ie.useState([]),[E,A]=ie.useState([]),[q,ee]=ie.useState([]);return ie.useEffect(()=>{const W=as.onAuthStateChanged(ue=>{s(ue),o(!1)}),z=bn(qn(Et(He,"siparisler"),ls("createdAt","desc")),ue=>{const ye=ue.docs.map(T=>T.data());_(ye.slice(0,5));const Ee={};ye.forEach(T=>{const j=T.date?T.date.slice(0,7):"N/A";Ee[j]=(Ee[j]||0)+1});const R=Object.entries(Ee).map(([T,j])=>({label:T,value:j})).sort((T,j)=>T.label.localeCompare(j.label));ee(R),f(T=>({...T,activeOrders:ye.length}))}),ne=bn(Et(He,"teklifler"),ue=>{f(ye=>({...ye,pendingProposals:ue.size}))}),Z=bn(Et(He,"employees"),ue=>{const ye=ue.docs.map(T=>T.data());f(T=>({...T,totalWorkers:ye.length}));const Ee=new Date().toISOString().split("T")[0],R=ye.filter(T=>{const j=T.attendance?.[Ee];return j&&["paid_leave","unpaid_leave","off"].includes(j.type)});v(R)}),ge=bn(Et(He,"inventory_movements"),ue=>{const ye=ue.docs.map(T=>T.data()),Ee={};ye.forEach(T=>{const j=Number(T.quantity)||0,k=T.action==="add"?j:-j;Ee[T.productName]||(Ee[T.productName]=0),Ee[T.productName]+=k});const R=Object.entries(Ee).filter(([T,j])=>j<100).map(([T,j])=>({name:T,qty:j}));A(R.slice(0,5)),f(T=>({...T,inventoryCount:Object.keys(Ee).length}))});return()=>{W(),z(),ne(),Z(),ge()}},[]),r?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):e?.email!=="furkan@avci.jp"?c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(pr.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",e?.email,")"]})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ho Geldiniz, Furkan Bey"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"letmenizin genel performans zeti ve gncel durumu."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[c.jsx(rd,{title:"Aktif Sipariler",value:d.activeOrders,subtext:"Geen aya gre art",icon:pr.Cart,color:"bg-indigo-600"}),c.jsx(rd,{title:"Bekleyen Teklifler",value:d.pendingProposals,subtext:"Onay bekleyen",icon:pr.Document,color:"bg-purple-600"}),c.jsx(rd,{title:"Toplam Stok Kalemi",value:d.inventoryCount,subtext:"Kritik seviye kontrol",icon:pr.Box,color:"bg-emerald-600"}),c.jsx(rd,{title:"Toplam Personel",value:d.totalWorkers,subtext:"Aktif alan",icon:pr.Users,color:"bg-orange-500"})]}),c.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sipari Performans"}),c.jsx("select",{className:"bg-gray-50 border-none text-sm text-gray-500 rounded-lg focus:ring-0",children:c.jsx("option",{children:"Bu Yl"})})]}),c.jsx(L4,{data:q})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg overflow-hidden",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Son Sipariler"}),c.jsx("button",{onClick:()=>i("siparis"),className:"text-xs text-indigo-600 font-bold hover:underline",children:"Tmn Gr"})]}),c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:"Sipari No"}),c.jsx("th",{className:"px-6 py-3",children:"Mteri"}),c.jsx("th",{className:"px-6 py-3",children:"Tarih"}),c.jsx("th",{className:"px-6 py-3 text-right",children:"Durum"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[y.map((W,z)=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-600",children:["#",W.siparisNo]}),c.jsxs("td",{className:"px-6 py-4 text-gray-700",children:["Mteri ID: ",W.customerId?.slice(0,5),"..."]}),c.jsx("td",{className:"px-6 py-4 text-gray-500",children:W.date}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Aktif"})})]},z)),y.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-400",children:"Sipari bulunamad."})})]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-purple-900 rounded-2xl shadow-xl p-6 text-white relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-5 rounded-full blur-2xl"}),c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:c.jsx(pr.Sun,{})}),c.jsx("h3",{className:"text-lg font-bold",children:"zindeki Personeller"})]}),c.jsx("div",{className:"space-y-4",children:p.length>0?p.map((W,z)=>c.jsxs("div",{className:"flex items-center justify-between bg-white/10 p-3 rounded-xl backdrop-blur-md border border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-400 flex items-center justify-center text-white font-bold shadow-sm",children:W.name[0]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:W.name}),c.jsx("p",{className:"text-xs text-indigo-200",children:W.role})]})]}),c.jsx("span",{className:"text-xs bg-orange-500/20 text-orange-200 px-2 py-1 rounded border border-orange-500/30",children:"zinli"})]},z)):c.jsxs("div",{className:"text-center py-6 text-indigo-200 text-sm bg-white/5 rounded-xl border border-dashed border-white/10",children:["Bugn izinli personel yok. ",c.jsx("br",{})," Herkes alyor."]})})]}),c.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-lg p-6",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[c.jsx(pr.Alert,{})," Kritik Stok Uyarlar"]}),c.jsx("div",{className:"space-y-3",children:E.length>0?E.map((W,z)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-xl border border-red-100",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:W.name}),c.jsxs("span",{className:"text-sm font-bold text-red-600",children:[W.qty," ",c.jsx("span",{className:"text-[10px] font-normal text-red-400",children:"Mevcut"})]})]},z)):c.jsx("div",{className:"text-center py-4 text-emerald-600 text-sm bg-emerald-50 rounded-xl",children:"Tm stok seviyeleri normal."})}),c.jsx("button",{onClick:()=>i("stok"),className:"w-full mt-4 py-2 text-xs text-gray-500 font-bold uppercase tracking-wide hover:bg-gray-50 rounded-lg transition-colors",children:"Stok Sayfasna Git"})]})]})]})]})}const Pe={Plus:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Box:()=>c.jsx("svg",{className:"w-4 h-4 text-indigo-500",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"})}),Filter:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Check:()=>c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),ChevronDown:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),ChevronUp:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}),Printer:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Download:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Wallet:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Upload:()=>c.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:()=>c.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),CheckCircleFilled:()=>c.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),CircleOutline:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("circle",{cx:"12",cy:"12",r:"9",strokeWidth:"2"})}),Tools:()=>c.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Chart:()=>c.jsx("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})},Yt=ib.forwardRef(({className:i="",...e},s)=>c.jsx("input",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      disabled:bg-gray-100 placeholder-gray-400 text-gray-700
      [&::-webkit-inner-spin-button]:appearance-none
      ${i}
    `,...e})),P4=ib.forwardRef(({className:i="",...e},s)=>c.jsx("textarea",{ref:s,className:`
      w-full bg-white border border-gray-300 rounded-xl px-4 py-3 text-sm
      focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 transition-all shadow-sm
      resize-y whitespace-pre-wrap break-all min-h-[80px] text-gray-700
      ${i}
    `,...e})),xn=({children:i,variant:e="primary",className:s="",...r})=>{const o={primary:"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200",secondary:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 shadow-sm",danger:"bg-red-50 text-red-600 border border-red-200 hover:bg-red-100",success:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-lg shadow-emerald-200",ghost:"bg-transparent text-gray-500 hover:bg-gray-100 border-transparent"};return c.jsx("button",{className:`
        flex items-center justify-center px-5 py-2.5 rounded-xl text-sm font-bold transition-all
        disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-sm
        ${o[e]}
        ${s}
      `,...r,children:i})},D1=({checked:i,onChange:e})=>c.jsx("div",{className:"flex items-center cursor-pointer group select-none",onClick:()=>e(!i),children:c.jsx("div",{className:`relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${i?"bg-indigo-600":"bg-gray-300"}`,children:c.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-4":"translate-x-0"}`})})}),Jo=({options:i,selected:e,onChange:s,placeholder:r="Seiniz...",isMulti:o=!1,onDeleteItem:d=null,allowNew:f=!1})=>{const[p,v]=ie.useState(!1),[y,_]=ie.useState(""),E=ie.useRef(null);ie.useEffect(()=>{const z=ne=>{E.current&&!E.current.contains(ne.target)&&v(!1)};return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const A=z=>{if(o){const ne=e.includes(z)?e.filter(Z=>Z!==z):[...e,z];s(ne)}else s(z),v(!1),_("")},q=z=>{_(z.target.value),f&&s(z.target.value)},ee=o?e.length>0?`(${e.length})`:"":e||r,W=i.filter(z=>z.toLowerCase().includes(f?typeof e=="string"?e.toLowerCase():"":y.toLowerCase()));return c.jsxs("div",{className:"relative w-full",ref:E,children:[f?c.jsxs("div",{className:"relative",children:[c.jsx(Yt,{placeholder:r,value:e,onChange:q,onFocus:()=>v(!0)}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 cursor-pointer",onClick:()=>v(!p),children:c.jsx(Pe.ChevronDown,{})})]}):c.jsxs("button",{type:"button",onClick:()=>v(!p),className:`w-full flex items-center justify-between px-3 py-1.5 rounded-lg text-xs font-bold transition-all border backdrop-blur-md text-left ${o&&e.length>0||!o&&e?"bg-indigo-100 border-indigo-200 text-indigo-700":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[o&&c.jsx(Pe.Filter,{className:"mr-2 w-4 h-4 shrink-0"}),c.jsx("span",{className:"truncate",children:o?`${r} ${ee}`:ee})]}),c.jsx(Pe.ChevronDown,{})]}),p&&c.jsxs("div",{className:"absolute left-0 right-0 mt-2 max-h-60 overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-xl rounded-xl border border-white/50 shadow-2xl z-[100] p-2 min-w-[200px]",children:[!f&&c.jsx("div",{className:"px-2 pb-2",children:c.jsx("input",{autoFocus:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-xs focus:outline-none focus:ring-1 focus:ring-indigo-500",placeholder:"Ara...",value:y,onChange:z=>_(z.target.value)})}),c.jsx("div",{className:"mb-2 px-2 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:f?"nerilenler":"Seenekler"}),c.jsxs("div",{className:"space-y-1",children:[W.map(z=>{const ne=o?e.includes(z):e===z;return c.jsxs("div",{onClick:()=>f?s(z):A(z),className:`group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors text-xs font-medium ${ne?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-600"}`,children:[c.jsxs("div",{className:"flex items-center flex-grow overflow-hidden",children:[o&&c.jsx("div",{className:`w-4 h-4 rounded flex items-center justify-center border mr-2 flex-shrink-0 ${ne?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300"}`,children:ne&&c.jsx(Pe.Check,{})}),c.jsx("span",{className:"truncate",children:z})]}),d&&c.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),d(z)},className:"ml-2 p-1.5 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Sil",children:c.jsx(Pe.Trash,{})})]},z)}),W.length===0&&c.jsx("div",{className:"px-3 py-2 text-xs text-gray-400 text-center",children:"Sonu yok."})]}),o&&e.length>0&&c.jsx("button",{type:"button",onClick:()=>s([]),className:"w-full mt-2 py-1.5 text-xs text-red-500 font-bold hover:bg-red-50 rounded-lg transition-colors",children:"Temizle"})]})]})},ec=({isOpen:i,onClose:e,title:s,children:r,maxWidth:o="max-w-xl"})=>i?c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-sm transition-all overflow-y-auto",children:c.jsxs("div",{className:`relative w-full ${o} flex flex-col bg-white/90 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/50 h-auto overflow-visible my-8`,children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200/50 flex justify-between items-center bg-white/40 flex-shrink-0 rounded-t-3xl",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:s}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:""})]}),c.jsx("div",{className:"p-8 space-y-6 overflow-visible",children:r})]})}):null,Yg=({children:i,className:e=""})=>c.jsx("div",{className:`bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl border border-white/60 overflow-hidden ${e}`,children:i}),rh=({startDate:i,endDate:e,onStartChange:s,onEndChange:r})=>c.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 rounded-lg border border-gray-200 px-3 py-1.5",children:[c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Ba:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:i,onChange:o=>s(o.target.value)}),c.jsx("div",{className:"h-4 w-px bg-gray-300"}),c.jsx("span",{className:"text-xs text-gray-400 font-bold mr-1",children:"Bit:"}),c.jsx("input",{type:"date",className:"bg-transparent border-none text-xs p-1 focus:ring-0 text-gray-600",value:e,onChange:o=>r(o.target.value)})]}),bs=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ",U4=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function z4(){const[i,e]=ie.useState(null),[s,r]=ie.useState(!0),[o,d]=ie.useState([]),[f,p]=ie.useState([]),[v,y]=ie.useState(!1),[_,E]=ie.useState({start:"",end:""}),[A,q]=ie.useState({}),[ee,W]=ie.useState(!1),[z,ne]=ie.useState(!1),[Z,ge]=ie.useState(!1),[ue,ye]=ie.useState(null),[Ee,R]=ie.useState(null),[T,j]=ie.useState({docNo:"",date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[]}),[k,C]=ie.useState({name:"",company:"",phone:"",email:""}),[V,I]=ie.useState(null),[de,Me]=ie.useState({docNo:"",amount:"",type:"Nakit",note:"",date:new Date().toISOString().split("T")[0]});if(ie.useEffect(()=>{const K=as.onAuthStateChanged(Ie=>{e(Ie),r(!1)}),ve=qn(Et(He,"customers"),ls("createdAt","desc")),we=bn(ve,Ie=>{d(Ie.docs.map(xt=>({id:xt.id,...xt.data()})))}),Ve=qn(Et(He,"sales"),ls("createdAt","desc")),me=bn(Ve,Ie=>{p(Ie.docs.map(xt=>({id:xt.id,...xt.data()})))});return()=>{K(),we(),me()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Pe.Lock,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."})]});const Y=K=>{const ve=parseFloat(K.qty)||0,we=parseFloat(K.unitPrice)||0,Ve=parseFloat(K.vatRate)||0,me=ve*we,Ie=me*(Ve/100);return me+Ie},he=K=>{if(!K)return{subtotal:0,totalVAT:0,grandTotal:0};const ve=K.reduce((Ve,me)=>Ve+(parseFloat(me.qty)||0)*(parseFloat(me.unitPrice)||0),0),we=K.reduce((Ve,me)=>Ve+Y(me),0);return{subtotal:ve,totalVAT:we-ve,grandTotal:we}},be=K=>K?K.reduce((ve,we)=>ve+Y(we),0):0,Be=K=>{const ve=f.filter(me=>me.customerId===K);let we=0,Ve=0;return ve.forEach(me=>{me.type==="payment"?Ve+=parseFloat(me.amount)||0:we+=be(me.items)}),we-Ve},$e=K=>{q(ve=>({...ve,[K]:!ve[K]}))},S=K=>{let ve=f.filter(me=>me.customerId===K);ve.sort((me,Ie)=>new Date(me.date)-new Date(Ie.date));let we=0;const Ve=[];return ve.forEach(me=>{if(me.type==="payment"){const Ie=parseFloat(me.amount)||0;we-=Ie,Ve.push({docNo:me.docNo||"-",date:me.date,action:"TAHSLAT",ek:"-",desc:`${me.paymentMethod} ile deme - ${me.note||""}`,qty:"-",unitPrice:"-",borc:Ie,alacak:0,balance:we})}else me.items?.forEach(Ie=>{const xt=Y(Ie);we+=xt,Ve.push({docNo:me.docNo,date:me.date,action:"SATI",ek:Ie.ek||"",desc:Ie.name,qty:Ie.qty,unitPrice:Ie.unitPrice,borc:0,alacak:xt,balance:we})})}),Ve},P=async K=>{K.preventDefault();try{await ji(Et(He,"customers"),{...k,createdAt:new Date().toISOString()}),C({name:"",company:"",phone:"",email:""}),ne(!1)}catch(ve){alert("Hata: "+ve.message)}},J=async K=>{window.confirm("Mteriyi ve tm verilerini silmek istiyor musunuz?")&&await Mr($t(He,"customers",K))},L=K=>{ye(K),I(null);const ve="TH-"+Date.now().toString().slice(-6);Me({docNo:ve,amount:"",type:"Nakit",note:"",date:new Date().toISOString().split("T")[0]}),ge(!0)},M=(K,ve)=>{ye(ve),I(K),Me({docNo:K.docNo||"",amount:K.amount,type:K.paymentMethod,note:K.note,date:K.date}),ge(!0)},X=async K=>{if(K.preventDefault(),!!ue)try{const ve={customerId:ue.id,type:"payment",docNo:de.docNo,amount:parseFloat(de.amount),paymentMethod:de.type,note:de.note,date:de.date,createdAt:V?V.createdAt:new Date().toISOString()};V?await ni($t(He,"sales",V.id),ve):await ji(Et(He,"sales"),ve),ge(!1)}catch(ve){alert("Hata: "+ve.message)}},oe=K=>{ye(K),R(null);const ve="DOC-"+Date.now().toString().slice(-6);j({docNo:ve,date:new Date().toISOString().split("T")[0],description:"",status:"active",items:[{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),W(!0)},Ae=(K,ve)=>{ye(ve),R(K);const we=(K.items||[]).map(Ve=>({...Ve,ek:Ve.ek||""}));j({docNo:K.docNo,date:K.date,description:K.description,status:K.status,items:we}),W(!0)},Re=async K=>{if(window.confirm("Bu kayd silmek istediinize emin misiniz?"))try{await Mr($t(He,"sales",K))}catch(ve){alert("Hata: "+ve.message)}},te=async K=>{K.preventDefault();try{const ve={customerId:ue.id,...T,type:"sale",createdAt:Ee?Ee.createdAt:new Date().toISOString()};Ee?await ni($t(He,"sales",Ee.id),ve):await ji(Et(He,"sales"),ve),W(!1)}catch(ve){alert("Hata: "+ve.message)}},xe=(K,ve,we)=>{const Ve=[...T.items];Ve[K][ve]=we,j({...T,items:Ve})},fe=()=>j({...T,items:[...T.items,{ek:"",name:"",qty:1,unitPrice:0,vatRate:20}]}),Oe=K=>j({...T,items:T.items.filter((ve,we)=>we!==K)}),Ce=K=>{const ve=S(K.id);let we="data:text/csv;charset=utf-8,\uFEFF";we+=`Tarih,Belge No,Hareket,Ek,Aciklama,Miktar,Birim Fiyat,Odeme (Borc),Tutar (Alacak),Bakiye
`,ve.forEach(Ie=>{const xt=Vt=>bs(Vt).replace(" ",""),si=[`"${Ie.date}"`,`"${Ie.docNo}"`,`"${Ie.action}"`,`"${Ie.ek}"`,`"${Ie.desc}"`,`"${Ie.qty}"`,`"${xt(Ie.unitPrice)}"`,`"${xt(Ie.borc)}"`,`"${xt(Ie.alacak)}"`,`"${xt(Ie.balance)}"`].join(",");we+=si+`
`});const Ve=encodeURI(we),me=document.createElement("a");me.setAttribute("href",Ve),me.setAttribute("download",`${K.name}_Ekstre.csv`),document.body.appendChild(me),me.click(),document.body.removeChild(me)},Te=K=>{const ve=S(K.id),we=window.open("","","height=800,width=1000");if(!we)return;const Ve=`
      <html><head><title>Ekstre - ${K.name}</title>
      <style>
        body{font-family:'Helvetica',sans-serif;padding:20px;color:#333}
        h2{text-align:center;color:#4f46e5;margin-bottom:5px}
        h4{text-align:center;color:#666;margin-top:0;margin-bottom:30px}
        table{width:100%;border-collapse:collapse;font-size:11px;margin-top:20px}
        th{background:#f3f4f6;border:1px solid #d1d5db;padding:8px;text-align:left}
        td{border:1px solid #d1d5db;padding:6px}
        .right{text-align:right}
        .payment-row{background-color:#f0fdf4} 
        .sale-row{background-color:#fff}
        .bold{font-weight:bold}
      </style>
      </head><body>
        <h2>${K.name}</h2>
        <h4 style="text-align:center;color:#666">Hesap Ekstresi</h4>
        <table>
          <thead>
            <tr><th>Tarih</th><th>Belge No</th><th width="10%">Ek</th><th>Aklama</th><th class="right">Miktar</th><th class="right">B.Fiyat</th><th class="right">deme (Alnan)</th><th class="right">Tutar (Bor)</th><th class="right">Bakiye</th></tr>
          </thead>
          <tbody>
            ${ve.map(me=>`
              <tr class="${me.action==="TAHSLAT"?"payment-row":"sale-row"}">
                <td>${me.date}</td>
                <td>${me.docNo}</td>
                <td>${me.ek}</td>
                <td>${me.desc}</td>
                <td class="right">${me.qty}</td>
                <td class="right">${me.unitPrice!=="-"?bs(me.unitPrice):"-"}</td>
                <td class="right">${me.borc>0?bs(me.borc):"-"}</td>
                <td class="right">${me.alacak>0?bs(me.alacak):"-"}</td>
                <td class="right bold" style="color:${me.balance>0?"#dc2626":"#059669"}">${bs(me.balance)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </body></html>
    `;we.document.write(Ve),setTimeout(()=>{we.document.close(),we.print()},500)};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 z-40 relative",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mteriler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Cari hesap ve sat ynetimi"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60 shadow-sm",children:[c.jsx(rh,{startDate:_.start,endDate:_.end,onStartChange:K=>E({..._,start:K}),onEndChange:K=>E({..._,end:K})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"px-2",children:c.jsx(D1,{checked:v,onChange:y,label:"Tamamlananlar"})}),c.jsxs("button",{onClick:()=>ne(!0),className:"flex items-center justify-center px-5 py-2.5 rounded-xl shadow-lg shadow-indigo-200 text-sm font-bold text-white bg-indigo-600/90 hover:bg-indigo-600 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Pe.Plus,{})})," Yeni Mteri"]})]})]}),c.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 pb-10 space-y-6",children:o.map(K=>{const ve=f.filter(me=>{const Ie=me.customerId===K.id;let xt=!0;return _.start&&me.date<_.start&&(xt=!1),_.end&&me.date>_.end&&(xt=!1),Ie&&xt}).sort((me,Ie)=>new Date(Ie.date)-new Date(me.date)),we=Be(K.id),Ve=A[K.id];return c.jsxs(Yg,{className:"overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-gradient-to-r from-gray-50/50 to-white/50",children:[c.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>$e(K.id),children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-2xl p-3 text-indigo-600 mr-4 shadow-sm",children:c.jsx(Pe.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:K.name}),c.jsx("p",{className:"text-xs text-gray-500",children:K.company})]}),c.jsx("div",{className:"ml-4 text-indigo-400",children:Ve?c.jsx(Pe.ChevronDown,{className:"transform rotate-180"}):c.jsx(Pe.ChevronDown,{})})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-4",children:[c.jsxs("div",{className:"text-right px-4 border-r border-gray-200",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider block",children:"Gncel Bakiye"}),c.jsx("span",{className:`text-xl font-black ${we>0?"text-red-500":"text-emerald-600"}`,children:bs(we)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(xn,{variant:"success",className:"px-4 py-2 text-xs",onClick:()=>L(K),children:[c.jsx(Pe.Wallet,{})," ",c.jsx("span",{className:"ml-2",children:"deme Al"})]}),c.jsxs(xn,{variant:"primary",className:"px-4 py-2 text-xs",onClick:()=>oe(K),children:[c.jsx(Pe.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Sat Yap"})]}),c.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded-xl p-1 ml-2 shadow-sm",children:[c.jsx("button",{onClick:()=>Te(K),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-gray-50 rounded-lg transition-all",title:"Rapor",children:c.jsx(Pe.Printer,{})}),c.jsx("button",{onClick:()=>Ce(K),className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-gray-50 rounded-lg transition-all",title:"Excel",children:c.jsx(Pe.Download,{})}),c.jsx("div",{className:"w-px h-4 bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>J(K.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Mteriyi Sil",children:c.jsx(Pe.Trash,{})})]})]})]})]}),Ve&&(ve.length>0?c.jsx("div",{className:"bg-white/40 max-h-[500px] overflow-y-auto custom-scrollbar",children:ve.map(me=>{const Ie=me.type==="payment",xt=Ie?me.amount:be(me.items);return c.jsxs("div",{className:`px-6 py-3 border-b border-gray-50 flex items-center justify-between hover:bg-white transition-colors group ${Ie?"bg-emerald-50/30":""}`,children:[c.jsxs("div",{className:"flex items-center gap-4 overflow-hidden",children:[c.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${Ie?"bg-emerald-400":"bg-indigo-400"}`}),c.jsxs("div",{className:"min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-700",children:Ie?"TAHSLAT":`SATI #${me.docNo}`}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1.5 rounded-md bg-white",children:U4(me.date)})]}),c.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:Ie?`${me.paymentMethod} ile deme - ${me.note||""}`:`${me.items?.length||0} Kalem rn`})]})]}),c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("span",{className:`text-sm font-bold ${Ie?"text-emerald-600":"text-red-500"}`,children:[Ie?"-":"+",bs(xt)]}),!Ie&&c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>Ae(me,K),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Pe.Edit,{})}),c.jsx("button",{onClick:()=>Re(me.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx(Pe.Trash,{})})]}),Ie&&c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>M(me,K),className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(Pe.Edit,{})}),c.jsx("button",{onClick:()=>Re(me.id),className:"p-1.5 text-gray-300 hover:text-red-600",children:c.jsx(Pe.Trash,{})})]})]})]},me.id)})}):c.jsx("div",{className:"px-6 py-8 text-center text-xs text-gray-400 italic bg-white/20",children:"Hareket bulunamad."}))]},K.id)})}),c.jsx(ec,{isOpen:z,onClose:()=>ne(!1),title:"Yeni Mteri",maxWidth:"max-w-lg",children:c.jsxs("form",{onSubmit:P,className:"space-y-4",children:[c.jsx(Yt,{required:!0,placeholder:"Ad Soyad / Firma nvan",value:k.name,onChange:K=>C({...k,name:K.target.value})}),c.jsx(Yt,{placeholder:"Firma (Opsiyonel)",value:k.company,onChange:K=>C({...k,company:K.target.value})}),c.jsx(Yt,{placeholder:"Telefon",value:k.phone,onChange:K=>C({...k,phone:K.target.value})}),c.jsx(Yt,{placeholder:"E-Posta",value:k.email,onChange:K=>C({...k,email:K.target.value})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx(xn,{variant:"secondary",type:"button",onClick:()=>ne(!1),children:"ptal"}),c.jsx(xn,{variant:"primary",type:"submit",children:"Kaydet"})]})]})}),c.jsxs(ec,{isOpen:Z,onClose:()=>ge(!1),title:V?"deme Dzenle":"deme Al",maxWidth:"max-w-md",children:[c.jsx("div",{className:"mb-4 text-xs text-gray-500 text-center",children:ue?.name}),c.jsxs("form",{onSubmit:X,className:"space-y-6",children:[c.jsx("div",{className:"grid grid-cols-3 gap-2 p-1 bg-gray-100 rounded-xl",children:["Nakit","Kredi Kart","ek"].map(K=>c.jsx("button",{type:"button",onClick:()=>Me({...de,type:K}),className:`py-2 text-xs font-bold rounded-lg transition-all ${de.type===K?"bg-white text-emerald-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:K},K))}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tutar"}),c.jsx("input",{type:"number",autoFocus:!0,required:!0,className:"w-full border border-emerald-200 rounded-2xl px-4 py-4 text-2xl font-bold text-emerald-700 focus:ring-2 focus:ring-emerald-500 bg-emerald-50/30 text-center",placeholder:"0.00",value:de.amount,onChange:K=>Me({...de,amount:K.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Detaylar"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[c.jsx(Yt,{placeholder:"Belge No",value:de.docNo,onChange:K=>Me({...de,docNo:K.target.value})}),c.jsx(Yt,{type:"date",required:!0,value:de.date,onChange:K=>Me({...de,date:K.target.value})})]}),c.jsx(Yt,{placeholder:"Not (Opsiyonel)",value:de.note,onChange:K=>Me({...de,note:K.target.value})})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx(xn,{variant:"secondary",type:"button",onClick:()=>ge(!1),children:"ptal"}),c.jsx(xn,{variant:"success",type:"submit",children:"Kaydet"})]})]})]}),c.jsx(ec,{isOpen:ee,onClose:()=>W(!1),title:Ee?"Sat Dzenle":"Yeni Sat",maxWidth:"max-w-5xl",children:c.jsxs("form",{onSubmit:te,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Belge No"}),c.jsx(Yt,{value:T.docNo,onChange:K=>j({...T,docNo:K.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tarih"}),c.jsx(Yt,{type:"date",required:!0,value:T.date,onChange:K=>j({...T,date:K.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Aklama"}),c.jsx(Yt,{value:T.description,onChange:K=>j({...T,description:K.target.value})})]})]}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsxs("table",{className:"min-w-full border-separate border-spacing-y-2",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-xs text-gray-400 font-bold uppercase pl-2",children:[c.jsx("th",{className:"pl-2 w-24",children:"Ek"}),c.jsx("th",{className:"pl-2",children:"rn"}),c.jsx("th",{className:"text-center",children:"Miktar"}),c.jsx("th",{className:"text-right",children:"Birim Fiyat"}),c.jsx("th",{className:"text-center",children:"KDV %"}),c.jsx("th",{className:"text-right pr-2",children:"Toplam"}),c.jsx("th",{})]})}),c.jsx("tbody",{className:"space-y-2",children:T.items.map((K,ve)=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"text",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"Ek",value:K.ek,onChange:we=>xe(ve,"ek",we.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 font-medium shadow-sm",placeholder:"rn Ad",value:K.name,onChange:we=>xe(ve,"name",we.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-center shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0",value:K.qty,onChange:we=>xe(ve,"qty",we.target.value)})}),c.jsx("td",{className:"p-2 align-top",children:c.jsx("input",{type:"number",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 text-right shadow-sm [&::-webkit-inner-spin-button]:appearance-none",placeholder:"0.00",value:K.unitPrice,onChange:we=>xe(ve,"unitPrice",we.target.value)})}),c.jsx("td",{className:"p-2 align-top text-center",children:c.jsxs("select",{className:"bg-white border border-gray-300 rounded-lg px-2 py-2 text-xs focus:ring-2 focus:ring-indigo-500 shadow-sm",value:K.vatRate,onChange:we=>xe(ve,"vatRate",we.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"p-2 align-top text-right font-bold text-indigo-600 pt-3",children:bs(Y(K))}),c.jsx("td",{className:"p-2 align-top text-center pt-3",children:c.jsx("button",{type:"button",onClick:()=>Oe(ve),className:"text-gray-400 hover:text-red-500",children:c.jsx(Pe.Trash,{})})})]},ve))})]}),c.jsx("button",{type:"button",onClick:fe,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 hover:border-indigo-400 hover:text-indigo-600 transition-colors text-sm font-bold mt-4",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end mt-8",children:c.jsxs("div",{className:"w-96 p-6 bg-gray-50 rounded-2xl border border-gray-200 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:bs(he(T.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-4",children:[c.jsx("span",{children:"KDV Toplam"}),c.jsx("span",{className:"font-medium",children:bs(he(T.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[c.jsx("span",{className:"text-lg font-bold text-gray-700",children:"Genel Toplam"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600 whitespace-nowrap",children:bs(he(T.items).grandTotal)})]})]})}),c.jsxs("div",{className:"pt-6 flex flex-row-reverse gap-3 border-t border-gray-200 mt-4",children:[c.jsx(xn,{type:"submit",variant:"primary",children:"Kaydet"}),c.jsx(xn,{type:"button",variant:"secondary",onClick:()=>W(!1),children:"ptal"})]})]})})]})}const eb={kanat:{title:"KANAT KISMI",steps:[{id:"kasnak",label:"Kasnak aklma"},{id:"yuzey_bicilme",label:"Yzey Biilme"},{id:"cnc",label:"CNC Oyma"},{id:"tutkal",label:"Yzey Tutkal Atma"},{id:"pvc",label:"Yzeye PVC Baslma"},{id:"pres",label:"Kap Pres"},{id:"ebatlama",label:"Kap Ebatlama"},{id:"kenar",label:"Kap Kenar Bantlama"},{id:"kilit",label:"Kap Kol Kilit Delii"},{id:"paket",label:"Kap Paketleme"}]},kasa:{title:"KASA KISMI",steps:[{id:"18mdf_bicilme",label:"18mm MDF Biilme"},{id:"18mdf_pres",label:"18mm MDF Pres"},{id:"36mdf_bicilme",label:"36mm MDF Biilme"},{id:"profil",label:"Kasa Profilden ekilme"},{id:"sarma",label:"Kasa Sarma"},{id:"kesim",label:"Kasa 45 Kesim"},{id:"paket",label:"Kasa Paketleme"}]},pervaz:{title:"PERVAZ KISMI",steps:[{id:"8mm_bicilme",label:"8mm Biilme"},{id:"4mm_bicilme",label:"4mm Biilme"},{id:"yapilim",label:"Pervaz Yaplm"},{id:"sarma",label:"Pervaz Sarma"},{id:"kertme",label:"Pervaz Kertme"},{id:"paket",label:"Pervaz Paketleme"}]},ek_parca:{title:"EK PARA KISMI",steps:[{id:"6mm_bicme",label:"6mm MDF Bime"},{id:"sarma",label:"Ek Para Sarma"},{id:"kulak",label:"Ek Paraya Kulak Ekleme"},{id:"paket",label:"Ek Para Paketleme"}]}},tb=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";function B4(){const[i,e]=ie.useState(null),[s,r]=ie.useState(!0),[o,d]=ie.useState([]),[f,p]=ie.useState([]),[v,y]=ie.useState({start:"",end:""}),[_,E]=ie.useState(!1),[A,q]=ie.useState(!1),[ee,W]=ie.useState(!1),[z,ne]=ie.useState({}),[Z,ge]=ie.useState({}),ue=ie.useRef(null),[ye,Ee]=ie.useState(null),[R,T]=ie.useState(null),[j,k]=ie.useState({en:6,boy:4}),[C,V]=ie.useState({siparisNo:"",customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[]});if(ie.useEffect(()=>{const te=as.onAuthStateChanged(Te=>{e(Te),r(!1)}),xe=qn(Et(He,"customers"),ls("name","asc")),fe=bn(xe,Te=>{p(Te.docs.map(K=>({id:K.id,...K.data()})))}),Oe=qn(Et(He,"siparisler"),ls("createdAt","desc")),Ce=bn(Oe,Te=>{d(Te.docs.map(K=>({id:K.id,...K.data()})))});return()=>{te(),fe(),Ce()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});const I=i?.email==="furkan@avci.jp",de=te=>{if(!te)return;const xe=new FileReader;xe.onload=fe=>{const Oe=new Image;Oe.onload=()=>{const Ce=document.createElement("canvas"),Te=800,K=800;let ve=Oe.width,we=Oe.height;ve>we?ve>Te&&(we*=Te/ve,ve=Te):we>K&&(ve*=K/we,we=K),Ce.width=ve,Ce.height=we,Ce.getContext("2d").drawImage(Oe,0,0,ve,we);const me=Ce.toDataURL("image/jpeg",.8);V(Ie=>({...Ie,image:me}))},Oe.src=fe.target.result},xe.readAsDataURL(te)},Me=te=>{te.preventDefault(),W(!0)},Y=()=>W(!1),he=te=>{te.preventDefault(),W(!1),te.dataTransfer.files&&te.dataTransfer.files[0]&&de(te.dataTransfer.files[0])},be=te=>{te.clipboardData.files&&te.clipboardData.files[0]&&de(te.clipboardData.files[0])},Be=()=>{Ee(null);const te="SP-"+Date.now().toString().slice(-6);V({siparisNo:te,customerId:"",date:new Date().toISOString().split("T")[0],note:"",image:null,items:[{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]}),k({en:6,boy:4}),E(!0)},$e=te=>{Ee(te),V({siparisNo:te.siparisNo,customerId:te.customerId,date:te.date,note:te.note||"",image:te.image,items:te.items||[]}),E(!0)},S=async te=>{if(window.confirm("Bu siparii silmek istediinize emin misiniz?"))try{await Mr($t(He,"siparisler",te))}catch(xe){alert(xe.message)}},P=async te=>{if(te.preventDefault(),!C.customerId){alert("Ltfen bir mteri seiniz.");return}try{const xe={...C,createdAt:ye?ye.createdAt:new Date().toISOString()};ye?await ni($t(He,"siparisler",ye.id),xe):await ji(Et(He,"siparisler"),{...xe,productionStatus:{}}),E(!1)}catch(xe){alert(xe.message)}},J=(te,xe,fe)=>{const Oe=[...C.items],Ce=Oe[te];if(Ce[xe]=fe,xe==="en1"){const Te=parseFloat(fe);isNaN(Te)?fe===""&&(Ce.en2=""):Ce.en2=Te-j.en}if(xe==="boy1"){const Te=parseFloat(fe);isNaN(Te)?fe===""&&(Ce.boy2=""):Ce.boy2=Te-j.boy}V({...C,items:Oe})},L=()=>{V({...C,items:[...C.items,{en1:"",boy1:"",genislik:"",takim:"",aciklama:"",en2:"",boy2:"",sekil:""}]})},M=te=>{const xe=C.items.filter((fe,Oe)=>Oe!==te);V({...C,items:xe})},X=(te,xe)=>{const fe=parseFloat(xe)||0,Oe={...j,[te]:fe};k(Oe);const Ce=C.items.map(Te=>({...Te,en2:Te.en1?parseFloat(Te.en1)-Oe.en:Te.en2,boy2:Te.boy1?parseFloat(Te.boy1)-Oe.boy:Te.boy2}));V({...C,items:Ce})},oe=te=>{T(te),q(!0)},Ae=async(te,xe)=>{if(!R)return;const fe=R.productionStatus||{},Oe=fe[te]||{},Ce={...fe,[te]:{...Oe,[xe]:!Oe[xe]}};T({...R,productionStatus:Ce}),await ni($t(He,"siparisler",R.id),{productionStatus:Ce})},Re=te=>{const xe=f.find(Ce=>Ce.id===te.customerId)||{name:"Bilinmeyen Mteri"},fe=window.open("","","height=800,width=1000");if(!fe){alert("Pop-up engelleyiciyi kapatn.");return}const Oe=`
      <html><head><title>Sipari - ${te.siparisNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; display: flex; flex-direction: column; padding: 15mm 20mm; box-sizing: border-box; }
        .brand-title { font-size: 24px; font-weight: bold; color: #4f46e5; text-transform: uppercase; margin-bottom: 5px; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-bottom: 20px; align-items: flex-end; flex-shrink: 0; }
        .meta-table { font-size: 12px; border-collapse: collapse; }
        .meta-table td { padding: 3px 10px; border: 1px solid #eee; }
        .meta-label { font-weight: bold; background: #f9fafb; color: #666; }
        
        table.main { width: 100%; border-collapse: collapse; font-size: 11px; table-layout: fixed; flex-shrink: 0; }
        table.main th { background: #f3f4f6; border: 1px solid #999; padding: 8px 4px; text-align: center; font-weight: bold; }
        table.main td { border: 1px solid #999; padding: 8px 4px; text-align: center; vertical-align: middle; }
        
        /* Column Widths */
        .col-desc { text-align: left !important; white-space: pre-wrap; word-wrap: break-word; word-break: break-all; }
        
        .group-kasa { background: #fff7ed; font-weight: bold; }
        .group-net { background: #f0fdf4; }
        
        .order-note { margin-top: 20px; font-size: 12px; white-space: pre-wrap; word-wrap: break-word; border: 1px solid #eee; padding: 10px; background: #fcfcfc; flex-shrink: 0; }
        
        /* Image Styling */
        .door-image-container {
          flex-grow: 1;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          padding-top: 20px;
          min-height: 100px; 
        }
        .door-image {
          max-width: 100%;
          max-height: 100%;
          object-fit: contain;
          border: 1px solid #eee;
        }
        
        @media print { .no-print { display: none; } }
      </style>
      </head><body>
        <div class="header">
          <div>
            <div class="brand-title">Erelebiler Orman rnleri</div>
            <div style="font-size:12px;color:#666">Sipari Takip Formu</div>
          </div>
          <div style="text-align:right">
            <table class="meta-table">
              <tr><td class="meta-label">Mteri:</td><td><strong>${xe.name}</strong></td></tr>
              <tr><td class="meta-label">Sipari No:</td><td>#${te.siparisNo}</td></tr>
              <tr><td class="meta-label">Tarih:</td><td>${tb(te.date)}</td></tr>
            </table>
          </div>
        </div>

        <table class="main">
          <colgroup>
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
            <col style="width: 6%"> <!-- Genislik -->
            <col style="width: 6%"> <!-- Takim -->
            <col style="width: 58%"> <!-- Aciklama -->
            <col style="width: 6%"> <!-- Sekil -->
            <col style="width: 6%"> <!-- En -->
            <col style="width: 6%"> <!-- Boy -->
          </colgroup>
          <thead>
            <tr>
              <th colspan="3" class="group-kasa">KASA LS</th>
              <th colspan="3">DETAYLAR</th>
              <th colspan="2" class="group-net">NET L</th>
            </tr>
            <tr>
              <th class="group-kasa">EN</th>
              <th class="group-kasa">BOY</th>
              <th class="group-kasa">GENLK</th>
              <th>TAKIM</th>
              <th>AIKLAMA</th>
              <th>EKL</th>
              <th class="group-net">EN</th>
              <th class="group-net">BOY</th>
            </tr>
          </thead>
          <tbody>
            ${te.items.map(Ce=>`
              <tr>
                <td class="group-kasa">${Ce.en1||"-"}</td>
                <td class="group-kasa">${Ce.boy1||"-"}</td>
                <td class="group-kasa">${Ce.genislik||"-"}</td>
                <td>${Ce.takim||""}</td>
                <td class="col-desc">${Ce.aciklama||""}</td>
                <td>${Ce.sekil||""}</td>
                <td class="group-net"><strong>${Ce.en2||""}</strong></td>
                <td class="group-net"><strong>${Ce.boy2||""}</strong></td>
              </tr>
            `).join("")}
          </tbody>
        </table>
        
        ${te.note?`
          <div class="order-note">
            <strong>NOT:</strong> ${te.note}
          </div>
        `:""}

        ${te.image?`
          <div class="door-image-container">
            <img src="${te.image}" class="door-image" />
          </div>
        `:""}

        <script>window.onload=function(){window.print()}<\/script>
      </body></html>
    `;fe.document.write(Oe),fe.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:be,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sipari Formu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"retim siparileri ve kap lleri"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:v.start,endDate:v.end,onStartChange:te=>y({...v,start:te}),onEndChange:te=>y({...v,end:te})}),I&&c.jsxs("button",{onClick:Be,className:"flex items-center justify-center px-5 py-2.5 border border-white/20 rounded-lg shadow-lg text-sm font-medium text-white bg-indigo-600/90 hover:bg-indigo-600 hover:shadow-indigo-200 backdrop-blur-sm transition-all",children:[c.jsx("span",{className:"mr-2",children:c.jsx(Pe.Plus,{})})," Sipari Ekle"]})]})]}),c.jsx("div",{className:"space-y-8",children:f.map(te=>{const xe=o.filter(fe=>{const Oe=fe.customerId===te.id;let Ce=!0;return v.start&&(Ce=Ce&&fe.date>=v.start),v.end&&(Ce=Ce&&fe.date<=v.end),Oe&&Ce});return xe.length===0?null:c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 overflow-hidden transition-all hover:shadow-xl",children:[c.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-2 text-indigo-600",children:c.jsx(Pe.User,{})}),c.jsx("h3",{className:"ml-3 text-lg font-bold text-gray-800",children:te.name})]}),c.jsxs("span",{className:"text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:[xe.length," Sipari"]})]}),c.jsx("div",{className:"divide-y divide-gray-100",children:xe.map(fe=>{const Oe=z[fe.id],Ce=Z[fe.id];return c.jsxs("div",{className:"hover:bg-gray-50/50 transition-colors",children:[c.jsxs("div",{className:"px-6 py-4 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-grow",children:[c.jsx("div",{className:"w-12 h-16 bg-gray-100 rounded border flex items-center justify-center text-gray-300 overflow-hidden shrink-0",children:fe.image?c.jsx("img",{src:fe.image,alt:"Door",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-xs",children:"Yok"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("p",{className:"text-sm font-bold text-indigo-600",children:["#",fe.siparisNo]}),c.jsx("span",{className:"text-[10px] text-gray-400 border px-1 rounded",children:tb(fe.date)})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[fe.items?.length||0," Kalem rn"]}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsxs("button",{onClick:()=>ne(Te=>({...Te,[fe.id]:!Te[fe.id]})),className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 flex items-center gap-1",children:[Oe?c.jsx(Pe.ChevronUp,{}):c.jsx(Pe.ChevronDown,{})," erik"]}),c.jsxs("button",{onClick:()=>ge(Te=>({...Te,[fe.id]:!Te[fe.id]})),className:"text-xs font-bold text-purple-500 hover:text-purple-700 flex items-center gap-1",children:[Ce?c.jsx(Pe.ChevronUp,{}):c.jsx(Pe.ChevronDown,{})," retim Durumu"]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2 self-end md:self-center",children:[c.jsxs("button",{onClick:()=>oe(fe),className:"px-3 py-1.5 bg-purple-50 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors text-xs font-bold flex items-center",children:[c.jsx(Pe.Tools,{})," ",c.jsx("span",{className:"ml-1",children:"Durum Dzenle"})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200 mx-1"}),c.jsx("button",{onClick:()=>Re(fe),className:"p-2 text-gray-400 hover:text-indigo-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Pe.Printer,{})}),I&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>$e(fe),className:"p-2 text-gray-400 hover:text-blue-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Pe.Edit,{})}),c.jsx("button",{onClick:()=>S(fe.id),className:"p-2 text-gray-400 hover:text-red-600 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow transition-all",children:c.jsx(Pe.Trash,{})})]})]})]}),Oe&&c.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-100",children:c.jsxs("table",{className:"w-full text-xs text-left text-gray-600",children:[c.jsx("thead",{className:"text-[10px] uppercase text-gray-400 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"pb-2",children:"Aklama"}),c.jsx("th",{className:"pb-2",children:"Takm"}),c.jsx("th",{className:"pb-2",children:"Kasa ls (En x Boy x Gen)"}),c.jsx("th",{className:"pb-2",children:"Net l (En x Boy)"}),c.jsx("th",{className:"pb-2",children:"ekil"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:fe.items?.map((Te,K)=>c.jsxs("tr",{children:[c.jsx("td",{className:"py-2 font-medium",children:Te.aciklama||"-"}),c.jsx("td",{className:"py-2",children:Te.takim||"-"}),c.jsxs("td",{className:"py-2 text-orange-600",children:[Te.en1||"-"," x ",Te.boy1||"-"," x ",Te.genislik||"-"]}),c.jsxs("td",{className:"py-2 text-green-600 font-bold",children:[Te.en2," x ",Te.boy2]}),c.jsx("td",{className:"py-2",children:Te.sekil||"-"})]},K))})]})}),Ce&&c.jsx("div",{className:"bg-purple-50/50 px-6 py-4 border-t border-gray-100",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(eb).map(([Te,K])=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-purple-100 shadow-sm",children:[c.jsx("h5",{className:"text-xs font-bold text-gray-500 uppercase border-b border-gray-100 pb-2 mb-3",children:K.title.replace(" KISMI","")}),c.jsx("ul",{className:"space-y-2",children:K.steps.map(ve=>{const we=fe.productionStatus?.[Te]?.[ve.id];return c.jsxs("li",{className:"flex items-center justify-between text-xs",children:[c.jsx("span",{className:we?"text-purple-700 font-medium":"text-gray-400",children:ve.label}),we?c.jsx(Pe.CheckCircleFilled,{className:"w-4 h-4 text-emerald-500"}):c.jsx(Pe.CircleOutline,{className:"w-4 h-4 text-gray-300"})]},ve.id)})})]},Te))})})]},fe.id)})})]},te.id)})}),_&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 bg-gray-900/20 backdrop-blur-sm transition-all",children:c.jsx("div",{className:"w-full max-w-6xl h-[95vh] flex flex-col bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/40 overflow-hidden",children:c.jsxs("form",{onSubmit:P,className:"flex flex-col h-full",children:[c.jsxs("div",{className:"px-6 py-4 border-b border-gray-200/50 flex justify-between items-center bg-white/40",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:ye?"Siparii Dzenle":"Yeni Sipari"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:c.jsx("span",{className:"text-3xl font-light",children:""})})]}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow custom-scrollbar",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6 bg-white/50 p-4 rounded-xl border border-white/60 shadow-sm",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari No"}),c.jsx("input",{value:C.siparisNo,onChange:te=>V({...C,siparisNo:te.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 border-gray-300"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Mteri Se"}),c.jsxs("select",{required:!0,value:C.customerId,onChange:te=>V({...C,customerId:te.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300",children:[c.jsx("option",{value:"",children:"Seiniz..."}),f.map(te=>c.jsxs("option",{value:te.id,children:[te.name," (",te.company,")"]},te.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tarih"}),c.jsx("input",{type:"date",required:!0,value:C.date,onChange:te=>V({...C,date:te.target.value}),className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm border-gray-300"})]}),c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-lg transition-all relative h-full min-h-[80px] ${ee?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:Me,onDragLeave:Y,onDrop:he,children:[c.jsx("input",{ref:ue,type:"file",accept:"image/jpeg",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:te=>de(te.target.files[0])}),C.image?c.jsxs("div",{className:"relative w-full h-full flex justify-center group",children:[c.jsx("img",{src:C.image,alt:"Preview",className:"h-20 object-contain"}),c.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-black/20 transition-colors flex items-end justify-center pb-1",children:c.jsx("span",{className:"text-[10px] bg-white px-1 rounded shadow",children:"Deitir"})})]}):c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Pe.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:ee?"Brakn":"Grsel (Srkle/Yaptr)"})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Sipari Notu"}),c.jsx("textarea",{rows:"2",placeholder:"Varsa ek notlarnz buraya giriniz...",className:"w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 resize-y whitespace-pre-wrap break-all border-gray-300",value:C.note,onChange:te=>V({...C,note:te.target.value})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 p-3 bg-indigo-50/50 rounded-lg border border-indigo-100 text-sm",children:[c.jsx("span",{className:"font-bold text-indigo-700",children:"Otomatik Hesaplama (Dlecek):"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"En:"}),c.jsx("input",{type:"number",value:j.en,onChange:te=>X("en",te.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{children:"Boy:"}),c.jsx("input",{type:"number",value:j.boy,onChange:te=>X("boy",te.target.value),className:"w-14 border border-gray-300 rounded px-1 py-0.5 text-center [&::-webkit-inner-spin-button]:appearance-none"})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden bg-white/40 shadow-sm",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs sm:text-sm",children:[c.jsxs("colgroup",{children:[c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"58%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"6%"}}),c.jsx("col",{style:{width:"50px"}})]}),c.jsxs("thead",{className:"bg-gray-50/80",children:[c.jsxs("tr",{children:[c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-orange-50/50 text-orange-800",children:"KASA LS"}),c.jsx("th",{colSpan:3,className:"px-2 py-2 text-center border-r border-gray-200 bg-gray-50 text-gray-600",children:"DETAYLAR"}),c.jsx("th",{colSpan:2,className:"px-2 py-2 text-center border-r border-gray-200 bg-green-50/50 text-green-800",children:"NET L"}),c.jsx("th",{className:"bg-gray-50"})]}),c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30",children:"BOY"}),c.jsx("th",{className:"px-1 py-2 bg-orange-50/30 border-r border-gray-200",children:"GENLK"}),c.jsx("th",{className:"px-1 py-2",children:"TAKIM"}),c.jsx("th",{className:"px-1 py-2",children:"AIKLAMA"}),c.jsx("th",{className:"px-1 py-2 border-l border-gray-200",children:"EKL"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30 border-l border-gray-200",children:"EN"}),c.jsx("th",{className:"px-1 py-2 bg-green-50/30",children:"BOY"}),c.jsx("th",{className:"w-8"})]})]}),c.jsx("tbody",{className:"bg-white/60 divide-y divide-gray-100",children:C.items.map((te,xe)=>c.jsxs("tr",{className:"hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:te.en1,onChange:fe=>J(xe,"en1",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",placeholder:"0",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50 focus:border-orange-300 [&::-webkit-inner-spin-button]:appearance-none",value:te.boy1,onChange:fe=>J(xe,"boy1",fe.target.value)})}),c.jsx("td",{className:"p-1 border-r border-gray-200",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:bg-orange-50",value:te.genislik,onChange:fe=>J(xe,"genislik",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"text",className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500",value:te.takim,onChange:fe=>J(xe,"takim",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("textarea",{rows:"1",className:"w-full text-left border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 resize-none overflow-hidden whitespace-pre-wrap break-all",style:{minHeight:"24px"},value:te.aciklama,onChange:fe=>J(xe,"aciklama",fe.target.value),onInput:fe=>{fe.target.style.height="auto",fe.target.style.height=fe.target.scrollHeight+"px"}})}),c.jsxs("td",{className:"p-1 border-l border-gray-200",children:[c.jsx("input",{list:`shapes-${xe}`,className:"w-full text-center border border-gray-300 rounded px-1 py-1 focus:ring-indigo-500 cursor-pointer",value:te.sekil,onChange:fe=>J(xe,"sekil",fe.target.value),placeholder:"Seiniz..."}),c.jsxs("datalist",{id:`shapes-${xe}`,children:[c.jsx("option",{value:"Kapal"}),c.jsx("option",{value:"Caml"})]})]}),c.jsx("td",{className:"p-1 border-l border-gray-200",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:te.en2,onChange:fe=>J(xe,"en2",fe.target.value)})}),c.jsx("td",{className:"p-1",children:c.jsx("input",{type:"number",className:"w-full text-center font-bold text-green-700 border border-green-100 bg-green-50/30 rounded px-1 py-1 [&::-webkit-inner-spin-button]:appearance-none",value:te.boy2,onChange:fe=>J(xe,"boy2",fe.target.value)})}),c.jsx("td",{className:"p-1 text-center",children:c.jsx("button",{type:"button",onClick:()=>M(xe),className:"text-gray-300 hover:text-red-500",children:c.jsx("span",{className:"text-lg",children:""})})})]},xe))})]}),c.jsx("button",{type:"button",onClick:L,className:"w-full py-2 bg-gray-50/50 text-gray-500 text-xs font-bold uppercase tracking-wide hover:bg-indigo-50 hover:text-indigo-600 transition-all border-t border-gray-100",children:"+ Satr Ekle"})]})]}),c.jsxs("div",{className:"px-6 py-4 border-t border-gray-200/50 flex flex-row-reverse bg-white/40 rounded-b-2xl shrink-0 gap-3",children:[c.jsx("button",{type:"submit",className:"px-6 py-2.5 rounded-xl bg-indigo-600/90 text-white font-medium shadow-lg hover:bg-indigo-600 backdrop-blur-sm transition-all",children:ye?"Kaydet":"Olutur"}),c.jsx("button",{type:"button",onClick:()=>E(!1),className:"px-6 py-2.5 rounded-xl text-gray-600 font-medium hover:bg-gray-100/50 transition-colors",children:"ptal"})]})]})})}),A&&R&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Sipari Durumu Takip"}),c.jsxs("p",{className:"text-sm text-indigo-600 font-medium",children:["#",R.siparisNo]})]}),c.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600 text-3xl",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(eb).map(([te,xe])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-gray-100 pb-2 mb-3",children:xe.title}),c.jsx("div",{className:"space-y-2",children:xe.steps.map(fe=>{const Oe=R.productionStatus?.[te]?.[fe.id];return c.jsxs("button",{onClick:()=>Ae(te,fe.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all ${Oe?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-gray-50 border border-transparent text-gray-500 hover:bg-gray-100"}`,children:[c.jsx("span",{children:fe.label}),c.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${Oe?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-gray-300"}`,children:Oe&&c.jsx(Pe.Check,{})})]},fe.id)})})]},te))})]})})]})}const q4=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"short"}):"-",H4=({showRaw:i,setShowRaw:e,showManufactured:s,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-indigo-100 border-indigo-200 text-indigo-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),nb=({item:i,isAdd:e,onEdit:s,onDelete:r})=>c.jsxs(Yg,{className:"p-3 flex items-center justify-between gap-2 hover:bg-white/90 transition-all group",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold ${e?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:e?"GR":"IK"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-800 truncate",children:i.productName}),c.jsx("div",{className:"flex items-center gap-2 text-[10px] text-gray-400 mt-0.5",children:c.jsx("span",{children:q4(i.date)})})]})]}),c.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:`text-sm font-black tracking-tight ${e?"text-emerald-600":"text-red-600"}`,children:i.quantity.toLocaleString("tr-TR")}),c.jsx("span",{className:"text-[10px] font-medium text-gray-400 ml-1",children:i.unit})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>s(i),className:"p-1.5 text-gray-400 hover:text-blue-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Pe.Edit,{})}),c.jsx("button",{onClick:()=>r(i.id),className:"p-1.5 text-gray-400 hover:text-red-600 bg-white border border-gray-200 rounded-md shadow-sm",children:c.jsx(Pe.Trash,{})})]})]})]});function F4(){const[i,e]=ie.useState(null),[s,r]=ie.useState(!0),[o,d]=ie.useState([]),[f,p]=ie.useState({start:"",end:""}),[v,y]=ie.useState(!1),[_,E]=ie.useState([]),[A,q]=ie.useState(!0),[ee,W]=ie.useState(!0),[z,ne]=ie.useState(null),[Z,ge]=ie.useState({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]}),ue=ie.useMemo(()=>[...new Set(o.map(de=>de.productName))].sort(),[o]),ye=ie.useMemo(()=>{const de=o.map(Y=>Y.unit).filter(Boolean),Me=["adet","kg","m2","m3","mt","paket"];return[...new Set([...Me,...de])].sort()},[o]);ie.useEffect(()=>{const de=as.onAuthStateChanged(he=>{e(he),r(!1)}),Me=qn(Et(He,"inventory_movements"),ls("date","desc")),Y=bn(Me,he=>{d(he.docs.map(be=>({id:be.id,...be.data()})))});return()=>{de(),Y()}},[]);const Ee=ie.useMemo(()=>o.filter(de=>{let Me=!0;if(f.start&&(Me=Me&&de.date>=f.start),f.end&&(Me=Me&&de.date<=f.end),de.productType==="raw"&&!A||(de.productType==="manufactured"||de.productType==="uretilmis")&&!ee)return!1;let Y=!0;return _.length>0&&(Y=_.includes(de.productName)),Me&&Y}),[o,f,A,ee,_]),R=Ee.filter(de=>de.action==="add"),T=Ee.filter(de=>de.action==="remove"),j=async de=>{de.preventDefault();try{const Me={...Z,quantity:Number(Z.quantity),createdAt:new Date().toISOString()};z?await ni($t(He,"inventory_movements",z),Me):await ji(Et(He,"inventory_movements"),Me),I()}catch(Me){alert("Hata: "+Me.message)}},k=async de=>{window.confirm("Bu hareketi silmek istiyor musunuz?")&&await Mr($t(He,"inventory_movements",de))},C=async de=>{if(window.confirm(`"${de}" isimli rne ait TM KAYITLAR silinecek. Onaylyor musunuz?`))try{const Me=qn(Et(He,"inventory_movements"),A4("productName","==",de)),Y=await R4(Me),he=M4(He);Y.forEach(be=>{he.delete(be.ref)}),await he.commit(),_.includes(de)&&E(be=>be.filter(Be=>Be!==de)),Z.productName===de&&ge(be=>({...be,productName:""}))}catch(Me){alert("Silme hatas: "+Me.message)}},V=de=>{ne(de.id),ge({productType:de.productType,productName:de.productName,action:de.action,quantity:de.quantity,unit:de.unit,date:de.date}),y(!0)},I=()=>{y(!1),ne(null),ge({productType:"raw",productName:"",action:"add",quantity:"",unit:"",date:new Date().toISOString().split("T")[0]})};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):i?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-6 gap-4 shrink-0 relative z-50",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hareketler"}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Stok giri ve k kaytlar"})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 bg-white/60 backdrop-blur-md p-2 rounded-xl border border-gray-200/60",children:[c.jsx(rh,{startDate:f.start,endDate:f.end,onStartChange:de=>p({...f,start:de}),onEndChange:de=>p({...f,end:de})}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx(H4,{showRaw:A,setShowRaw:q,showManufactured:ee,setShowManufactured:W}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block"}),c.jsx("div",{className:"flex items-center",children:c.jsx(Jo,{options:ue,selected:_,onChange:E,placeholder:"rn Filtrele",isMulti:!0})}),c.jsx("button",{onClick:()=>y(!0),className:"w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-lg shadow-md hover:bg-indigo-700 transition-colors ml-2",title:"Hareket Ekle",children:c.jsx(Pe.Plus,{})})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden grid grid-cols-1 lg:grid-cols-2 gap-6 pb-4 z-0 relative",children:[c.jsxs("div",{className:"flex flex-col min-h-0 bg-emerald-50/30 rounded-2xl border border-emerald-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-emerald-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," rn Girileri"]}),c.jsxs("span",{className:"text-xs font-mono text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-md",children:[R.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[R.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"Giri kayd bulunamad."}),R.map(de=>c.jsx(nb,{item:de,isAdd:!0,onEdit:V,onDelete:k},de.id))]})]}),c.jsxs("div",{className:"flex flex-col min-h-0 bg-red-50/30 rounded-2xl border border-red-100/50 backdrop-blur-sm p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("h2",{className:"text-sm font-bold text-red-800 uppercase tracking-wider flex items-center gap-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," rn klar"]}),c.jsxs("span",{className:"text-xs font-mono text-red-600 bg-red-100 px-2 py-0.5 rounded-md",children:[T.length," Kayt"]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 space-y-3",children:[T.length===0&&c.jsx("div",{className:"text-center py-10 text-xs text-gray-400 italic",children:"k kayd bulunamad."}),T.map(de=>c.jsx(nb,{item:de,isAdd:!1,onEdit:V,onDelete:k},de.id))]})]})]}),c.jsx(ec,{isOpen:v,onClose:I,title:z?"Hareketi Dzenle":"Hareket Ekle",maxWidth:"max-w-xl",children:c.jsxs("form",{onSubmit:j,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Tr"}),c.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded-xl px-4 py-3 shadow-sm",children:[c.jsx("span",{className:`text-sm font-bold ${Z.productType==="raw"?"text-indigo-600":"text-purple-600"}`,children:Z.productType==="raw"?"HAM MADDE":"RETLM RN"}),c.jsx(D1,{checked:Z.productType==="manufactured",onChange:de=>ge({...Z,productType:de?"manufactured":"raw"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"rn Ad"}),c.jsx(Jo,{options:ue,selected:Z.productName,onChange:de=>ge({...Z,productName:de}),placeholder:"rn Sein veya Yazn",allowNew:!0,onDeleteItem:C})]}),c.jsxs("div",{className:"bg-gray-50/80 p-5 rounded-2xl border border-gray-200/60 grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Yn"}),c.jsxs("div",{className:"flex bg-white rounded-xl p-1 border border-gray-300 shadow-sm",children:[c.jsx("button",{type:"button",onClick:()=>ge({...Z,action:"add"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${Z.action==="add"?"bg-emerald-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"GR (EKLE)"}),c.jsx("button",{type:"button",onClick:()=>ge({...Z,action:"remove"}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${Z.action==="remove"?"bg-red-500 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"IKI (D)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Miktar"}),c.jsx(Yt,{type:"number",required:!0,min:"0",className:"font-bold text-gray-900",value:Z.quantity,onChange:de=>ge({...Z,quantity:de.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Birim"}),c.jsx(Jo,{options:ye,selected:Z.unit,onChange:de=>ge({...Z,unit:de}),placeholder:"Birim",isMulti:!1,allowNew:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"lem Tarihi"}),c.jsx(Yt,{type:"date",required:!0,value:Z.date,onChange:de=>ge({...Z,date:de.target.value})})]}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3",children:[c.jsx(xn,{type:"submit",variant:"primary",children:z?"Gncelle":"Kaydet"}),c.jsx(xn,{type:"button",variant:"secondary",onClick:I,children:"ptal"})]})]})})]}):c.jsx("div",{className:"p-10 text-center",children:"Giri yaplmal..."})}const G4=({showRaw:i,setShowRaw:e,showManufactured:s,setShowManufactured:r})=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>e(!i),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${i?"bg-pink-100 border-pink-200 text-pink-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"Ham Madde"}),c.jsx("button",{onClick:()=>r(!s),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${s?"bg-purple-100 border-purple-200 text-purple-700 shadow-sm":"bg-white/70 border-gray-200 text-gray-500 hover:bg-white"}`,children:"retilmi"})]}),Y4=({data:i,keys:e})=>{if(!i||i.length===0||e.length===0)return c.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400 font-medium bg-white/20 rounded-2xl backdrop-blur-sm border border-white/20",children:"Veri Yok"});const s=300,r=800,o=40,d=r-o*2,f=s-o*2,p=i.flatMap(_=>e.map(E=>_[E]||0)),v=Math.max(...p,10)*1.1,y=["#A78BFA","#F472B6","#818CF8","#FB7185","#C084FC","#E879F9"];return c.jsxs("div",{className:"w-full overflow-x-auto",children:[c.jsxs("svg",{viewBox:`0 0 ${r} ${s}`,className:"w-full h-auto min-w-[600px]",children:[[0,1,2,3,4].map(_=>{const E=s-o-_*(f/4);return c.jsxs("g",{children:[c.jsx("line",{x1:o,y1:E,x2:r-o,y2:E,stroke:"#e5e7eb",strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("text",{x:o-10,y:E+4,textAnchor:"end",fontSize:"10",fill:"#9CA3AF",children:Math.round(v/4*_)})]},_)}),e.map((_,E)=>{const A=y[E%y.length],q=i.map((ee,W)=>{const z=o+W*(d/(i.length-1||1)),ne=ee[_]||0,Z=s-o-ne/v*f,ge=isNaN(z)?o:z,ue=isNaN(Z)?s-o:Z;return`${ge},${ue}`}).join(" ");return c.jsxs("g",{children:[c.jsx("polyline",{fill:"none",stroke:A,strokeWidth:"3",points:q,strokeLinecap:"round",strokeLinejoin:"round",filter:"drop-shadow(0px 4px 4px rgba(0,0,0,0.1))"}),i.map((ee,W)=>{const z=o+W*(d/(i.length-1||1)),ne=ee[_]||0,Z=s-o-ne/v*f,ge=isNaN(z)?o:z,ue=isNaN(Z)?s-o:Z;return c.jsx("circle",{cx:ge,cy:ue,r:"4",fill:"white",stroke:A,strokeWidth:"2",className:"hover:r-6 transition-all cursor-pointer",children:c.jsx("title",{children:`${ee.month} - ${_}: ${ne}`})},W)})]},_)}),i.map((_,E)=>{const A=o+E*(d/(i.length-1||1));return c.jsx("text",{x:A,y:s-10,textAnchor:"middle",fontSize:"10",fill:"#4B5563",fontWeight:"500",children:_.month},E)})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:e.map((_,E)=>c.jsxs("div",{className:"flex items-center text-xs font-bold text-gray-500 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm",children:[c.jsx("span",{className:"w-3 h-3 rounded-full mr-2 shadow-sm",style:{backgroundColor:y[E%y.length]}}),_]},_))})]})},K4=({name:i,qty:e,unit:s,type:r,change:o,changePercent:d})=>{const f=r==="raw",p=e<0,v=d>10;let y="text-gray-400",_="bg-gray-100",E=c.jsx("div",{className:"w-2 h-1 bg-gray-400 rounded-full"});d>10?(y="text-emerald-600",_="bg-emerald-100/50",E=c.jsx(Pe.TrendingUp,{})):d<-10&&(y="text-red-600",_="bg-red-100/50",E=c.jsx(Pe.TrendingDown,{}));let A=f?"bg-pink-50/40 border-pink-200/60 hover:shadow-md":"bg-purple-50/40 border-purple-200/60 hover:shadow-md",q=f?"text-pink-900":"text-purple-900",ee=f?"text-pink-700/70":"text-purple-700/70";p?(A="bg-red-50/90 border-red-200 shadow-red-100/50 hover:shadow-red-200",q="text-red-700",ee="text-red-500"):v&&(A="bg-emerald-50/90 border-emerald-200 shadow-emerald-100/50 hover:shadow-emerald-200",q="text-emerald-800",ee="text-emerald-600");const W=f?"Ham Madde":"retilmi";return c.jsx("div",{className:`relative backdrop-blur-xl rounded-2xl border p-5 transition-all duration-300 hover:-translate-y-1 group ${A}`,children:c.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[c.jsxs("div",{className:"mb-4 min-h-[2.5rem]",children:[c.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-400 block mb-1",children:W}),c.jsx("h3",{className:"text-sm font-bold text-gray-700 leading-tight line-clamp-2",title:i,children:i})]}),c.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[c.jsx("span",{className:`text-4xl font-black tracking-tight ${q}`,children:e.toLocaleString("tr-TR")}),c.jsx("span",{className:`text-xs font-bold ${ee} uppercase`,children:s})]}),c.jsx("div",{className:"flex-grow"}),c.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200/40 pt-3 mt-2",children:[c.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_} ${y} text-xs font-bold`,children:[c.jsx("span",{className:"w-3 h-3 flex items-center justify-center",children:E}),c.jsxs("span",{children:["%",Math.abs(d).toFixed(0)]})]}),c.jsxs("div",{className:"text-[10px] font-medium text-gray-400",title:"Son 30 gnlk deiim",children:[o>0?"+":"",o.toLocaleString("tr-TR")," (30 Gn)"]})]})]})})};function Q4(){const[i,e]=ie.useState([]),[s,r]=ie.useState(!0),[o,d]=ie.useState(!0),[f,p]=ie.useState(!0),[v,y]=ie.useState([]),[_,E]=ie.useState("year");ie.useEffect(()=>{const z=qn(Et(He,"inventory_movements"),ls("date","asc")),ne=bn(z,Z=>{const ge=Z.docs.map(ue=>ue.data());e(ge),r(!1)});return()=>ne()},[]);const A=ie.useMemo(()=>{const z={},ne=new Date;return ne.setDate(ne.getDate()-30),i.forEach(Z=>{const ge=Number(Z.quantity)||0,ue=Z.action==="add"?ge:-ge,ye=new Date(Z.date);z[Z.productName]||(z[Z.productName]={name:Z.productName,qty:0,unit:Z.unit,type:Z.productType||"raw",change30Days:0}),z[Z.productName].qty+=ue,z[Z.productName].type=Z.productType||z[Z.productName].type,ye>=ne&&(z[Z.productName].change30Days+=ue)}),Object.values(z).map(Z=>{const ge=Z.qty-Z.change30Days;let ue=0;return ge!==0?ue=Z.change30Days/Math.abs(ge)*100:Z.change30Days!==0&&(ue=100),{...Z,changePercent:ue}})},[i]),q=ie.useMemo(()=>A.filter(z=>!(z.type==="raw"&&!o||(z.type==="manufactured"||z.type==="uretilmis")&&!f||v.length>0&&!v.includes(z.name))),[A,o,f,v]),ee=ie.useMemo(()=>A.map(z=>z.name).sort(),[A]),W=ie.useMemo(()=>{const z=q.sort((ue,ye)=>Math.abs(ye.qty)-Math.abs(ue.qty)).slice(0,5).map(ue=>ue.name);if(z.length===0)return{data:[],keys:[]};const ne={},Z={};return z.forEach(ue=>Z[ue]=0),i.forEach(ue=>{if(!z.includes(ue.productName))return;const ye=ue.date?ue.date.slice(0,7):"N/A";if(ye==="N/A")return;if(_==="year"){const T=new Date().getFullYear();if(new Date(ue.date).getFullYear()!==T)return}const Ee=Number(ue.quantity)||0,R=ue.action==="add"?Ee:-Ee;Z[ue.productName]||(Z[ue.productName]=0),Z[ue.productName]+=R,ne[ye]={...Z,month:ye}}),{data:Object.values(ne).sort((ue,ye)=>ue.month.localeCompare(ye.month)),keys:z}},[i,q,_]);return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-400 animate-pulse",children:"Veriler Ykleniyor..."}):c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 shrink-0",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Stok Durumu"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"rn bazl gncel envanter ve deiim grafikleri"})]}),c.jsxs("div",{className:"flex bg-white/60 backdrop-blur-md p-1.5 rounded-2xl border border-white/50 shadow-lg",children:[c.jsx(G4,{showRaw:o,setShowRaw:d,showManufactured:f,setShowManufactured:p}),c.jsx("div",{className:"h-6 w-px bg-gray-300 hidden sm:block mx-2"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(Jo,{options:ee,selected:v,onChange:y,placeholder:"rn Filtrele",isMulti:!0})})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar pb-10 pr-2",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-10",children:q.length>0?q.map((z,ne)=>c.jsx(K4,{name:z.name,qty:z.qty,unit:z.unit,type:z.type,change:z.change30Days,changePercent:z.changePercent},ne)):c.jsxs("div",{className:"col-span-full py-16 text-center bg-white/40 backdrop-blur-md rounded-3xl border border-dashed border-gray-300 text-gray-400 flex flex-col items-center justify-center",children:[c.jsx(Pe.Box,{className:"w-12 h-12 mb-2 opacity-20"}),c.jsx("p",{children:"Grntlenecek rn bulunamad."})]})}),W.data.length>0&&c.jsxs("div",{className:"bg-white/60 backdrop-blur-xl rounded-3xl shadow-xl border border-white/60 p-8 relative overflow-hidden mb-10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 opacity-50"}),c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white p-2.5 rounded-xl shadow-sm text-purple-600 border border-purple-50",children:c.jsx(Pe.Chart,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stok Deiim Grafii"}),c.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"En yksek hacimli rnlerin hareketleri"})]})]}),c.jsxs("select",{className:"bg-white/50 border-gray-200 text-sm font-bold text-gray-600 rounded-xl focus:ring-2 focus:ring-indigo-500/20 cursor-pointer shadow-sm px-4 py-2",value:_,onChange:z=>E(z.target.value),children:[c.jsx("option",{value:"year",children:"Bu Yl"}),c.jsx("option",{value:"all",children:"Tm Zamanlar"})]})]}),c.jsx(Y4,{data:W.data,keys:W.keys})]})]})]})}const Em=`Teklifimiz ile ilgili sorularnz cevaplamaya hazr olduumuzu belirtir, almalarnzda baarlar dileriz.
Sayglarmzla,`,Ks=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ",ad=i=>i?new Date(i).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}):"-";function $4(){const[i,e]=ie.useState(null),[s,r]=ie.useState(!0),[o,d]=ie.useState([]),[f,p]=ie.useState([]),[v,y]=ie.useState({start:"",end:""}),[_,E]=ie.useState(!1),[A,q]=ie.useState(!1),ee=ie.useRef(null),[W,z]=ie.useState(null),[ne,Z]=ie.useState({teklifNo:"",teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:"",note:Em,images:[],items:[]}),ge=ie.useMemo(()=>f.map(S=>S.name).sort(),[f]);if(ie.useEffect(()=>{const S=as.onAuthStateChanged(X=>{e(X),r(!1)}),P=qn(Et(He,"teklifler"),ls("createdAt","desc")),J=bn(P,X=>{d(X.docs.map(oe=>({id:oe.id,...oe.data()})))}),L=qn(Et(He,"customers"),ls("name","asc")),M=bn(L,X=>{p(X.docs.map(oe=>({id:oe.id,...oe.data()})))});return()=>{S(),J(),M()}},[]),s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(Pe.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]});const ue=(S,P,J)=>{const L=S*P,M=L*(J/100);return L+M},ye=S=>{if(!S)return{subtotal:0,totalVAT:0,grandTotal:0};const P=S.reduce((L,M)=>L+Number(M.quantity)*Number(M.price),0),J=S.reduce((L,M)=>L+Number(M.quantity)*Number(M.price)*(Number(M.vat)/100),0);return{subtotal:P,totalVAT:J,grandTotal:P+J}},Ee=S=>{const P=Array.from(S.target.files||S.dataTransfer.files);P.length&&P.forEach(J=>{if(!J.type.startsWith("image/"))return;const L=new FileReader;L.onload=M=>{const X=new Image;X.onload=()=>{const oe=document.createElement("canvas"),Ae=1e3;let Re=X.width,te=X.height;Re>te?Re>Ae&&(te*=Ae/Re,Re=Ae):te>Ae&&(Re*=Ae/te,te=Ae),oe.width=Re,oe.height=te,oe.getContext("2d").drawImage(X,0,0,Re,te);const fe=oe.toDataURL("image/jpeg",.7);Z(Oe=>({...Oe,images:[...Oe.images,fe]}))},X.src=M.target.result},L.readAsDataURL(J)})},R=S=>{Z(P=>({...P,images:P.images.filter((J,L)=>L!==S)}))},T=(S,P)=>{const J=[...ne.images];P===-1&&S>0?[J[S],J[S-1]]=[J[S-1],J[S]]:P===1&&S<J.length-1&&([J[S],J[S+1]]=[J[S+1],J[S]]),Z({...ne,images:J})},j=S=>{S.preventDefault(),q(!0)},k=()=>q(!1),C=S=>{S.preventDefault(),q(!1),Ee(S)},V=S=>{S.clipboardData.files&&S.clipboardData.files.length>0&&(S.preventDefault(),Ee({target:{files:S.clipboardData.files}}))},I=()=>{z(null);const S="TK-"+Date.now().toString().slice(-6),P=new Date;P.setDate(P.getDate()+7),Z({teklifNo:S,teklifName:"",customerName:"",date:new Date().toISOString().split("T")[0],validityDate:P.toISOString().split("T")[0],note:Em,images:[],items:[{description:"",quantity:1,price:0,vat:20,total:0}]}),E(!0)},de=S=>{z(S.id),Z({teklifNo:S.teklifNo,teklifName:S.teklifName||"",customerName:S.customerName,date:S.date,validityDate:S.validityDate||"",note:S.note||Em,images:S.images||[],items:S.items||[]}),E(!0)},Me=async S=>{if(window.confirm("Bu teklifi silmek istediinize emin misiniz?"))try{await Mr($t(He,"teklifler",S))}catch(P){alert(P.message)}},Y=async S=>{if(S.preventDefault(),!ne.customerName){alert("Ltfen mteri ad giriniz.");return}try{const P={...ne,createdAt:new Date().toISOString()};W?await ni($t(He,"teklifler",W),P):await ji(Et(He,"teklifler"),P),E(!1)}catch(P){alert(P.message)}},he=(S,P,J)=>{const L=[...ne.items],M=L[S];M[P]=J;const X=parseFloat(P==="quantity"?J:M.quantity),oe=parseFloat(P==="price"?J:M.price),Ae=parseFloat(P==="vat"?J:M.vat);!isNaN(X)&&!isNaN(oe)&&!isNaN(Ae)&&(M.total=ue(X,oe,Ae)),Z({...ne,items:L})},be=()=>{Z({...ne,items:[...ne.items,{description:"",quantity:1,price:0,vat:20,total:0}]})},Be=S=>{Z({...ne,items:ne.items.filter((P,J)=>J!==S)})},$e=S=>{const P=window.open("","","height=800,width=1000");if(!P){alert("Pop-up engelleyiciyi kapatn.");return}const J=ye(S.items||[]),L=S.images||[],M=`
      <html><head><title>Teklif - ${S.teklifNo}</title>
      <style>
        @page { size: A4; margin: 0; }
        html, body { width: 210mm; min-height: 297mm; margin: 0; padding: 0; }
        body { font-family: 'Helvetica', sans-serif; color: #333; padding: 15mm 20mm; box-sizing: border-box; display: flex; flex-direction: column; position: relative; }
        
        /* Background Image */
        .bg-watermark { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }
        .bg-watermark img { width: 100%; height: 100%; object-fit: cover; }

        .content { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; }

        /* Header */
        .header-container { display: flex; justify-content: space-between; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #e2e8f0; }
        .company-name { font-size: 26px; font-weight: bold; color: #be185d; margin-bottom: 5px; text-transform: uppercase; }
        .company-details { font-size: 12px; color: #555; line-height: 1.4; font-weight: 500; }
        .invoice-title { font-size: 32px; font-weight: bold; color: #db2777; letter-spacing: 2px; margin-bottom: 10px; text-align: right; }
        .meta-table { width: 100%; border-collapse: collapse; font-size: 12px; }
        .meta-table td { padding: 3px 0; border-bottom: 1px solid #f0f0f0; }
        .meta-label { font-weight: bold; color: #831843; text-align: left; padding-right: 15px; }
        .meta-value { font-weight: bold; color: #333; text-align: right; }
        
        /* Customer */
        .customer-box { background: rgba(255, 255, 255, 0.9); padding: 10px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #fbcfe8; }
        .customer-label { font-size: 9px; font-weight: bold; text-transform: uppercase; color: #db2777; margin-bottom: 3px; }
        .customer-name { font-size: 16px; font-weight: bold; color: #831843; }

        /* Items Table */
        table.items { width: 100%; border-collapse: collapse; font-size: 11px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.85); }
        table.items th { background: #be185d; color: white; padding: 8px; text-align: left; font-weight: bold; text-transform: uppercase; }
        table.items td { border-bottom: 1px solid #fce7f3; padding: 8px; vertical-align: top; }
        .text-right { text-align: right; } .text-center { text-align: center; }
        .col-desc { width: 45%; }

        /* Totals */
        .totals-wrapper { display: flex; justify-content: flex-end; margin-bottom: 15px; }
        .totals-container { width: 250px; background: rgba(255, 255, 255, 0.85); padding: 10px; border-radius: 8px; }
        .total-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 12px; }
        .grand-total { font-size: 15px; font-weight: bold; color: #be185d; border-top: 2px solid #fce7f3; padding-top: 8px; margin-top: 4px; }
        
        /* Notes */
        .notes-section { margin-top: 10px; background: rgba(255, 255, 255, 0.8); padding: 10px; border-radius: 5px; border-left: 4px solid #be185d; font-size: 11px; color: #444; white-space: pre-wrap; }
        
        /* Images Grid - Compact */
        .image-section { margin-top: 15px; }
        .image-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .proposal-image { max-width: 45%; max-height: 200px; object-fit: contain; border: 1px solid #fce7f3; background: white; padding: 3px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        
        .footer { margin-top: auto; border-top: 1px solid #fce7f3; padding-top: 10px; font-size: 9px; color: #9d174d; text-align: center; font-weight: bold; }
      </style>
      </head><body>
        <div class="bg-watermark"><img src="https://imgur.com/dM24v7h.png" /></div>
        <div class="content">
          <div class="header-container">
            <div class="company-info">
              <div class="company-name">  <br>  <br>  <br></div>
            </div>
            <div class="meta-info">
              <div class="invoice-title">  <br>  <br>  <br></div>
              <table class="meta-table" align="right">
                <tr><td class="meta-label">Teklif No:</td><td class="meta-value">#${S.teklifNo}</td></tr>
                <tr><td class="meta-label">Tarih:</td><td class="meta-value">${ad(S.date)}</td></tr>
                <tr><td class="meta-label">Geerlilik:</td><td class="meta-value">${ad(S.validityDate)}</td></tr>
              </table>
            </div>
          </div>

          <div class="customer-box">
            <div class="customer-name">${S.customerName}</div>
          </div>

          <table class="items">
            <thead><tr><th class="col-desc">Aklama</th><th class="text-center">Miktar</th><th class="text-right">Birim Fiyat</th><th class="text-center">KDV %</th><th class="text-right">Tutar</th></tr></thead>
            <tbody>
              ${S.items.map(X=>`
                <tr>
                  <td>${X.description}</td>
                  <td class="text-center">${X.quantity}</td>
                  <td class="text-right">${Ks(X.price)}</td>
                  <td class="text-center">%${X.vat}</td>
                  <td class="text-right"><strong>${Ks(X.total)}</strong></td>
                </tr>
              `).join("")}
            </tbody>
          </table>

          <div class="totals-wrapper">
            <div class="totals-container">
              <div class="total-row"><span>Ara Toplam:</span> <span>${Ks(J.subtotal)}</span></div>
              <div class="total-row"><span>Toplam KDV:</span> <span>${Ks(J.totalVAT)}</span></div>
              <div class="total-row grand-total"><span>Genel Toplam:</span> <span>${Ks(J.grandTotal)}</span></div>
            </div>
          </div>

          ${S.note?`<div class="notes-section"><strong>NOT:</strong><br/>${S.note}</div>`:""}

          <div class="image-section">
             <div class="image-grid">
               ${L.map(X=>`<img src="${X}" class="proposal-image" />`).join("")}
             </div>
          </div>

          <div class="footer">ERCELEBILER AHSAP - Profesyonel zmler</div>
        </div>
        <script>setTimeout(() => { window.print(); }, 1000);<\/script>
      </body></html>
    `;P.document.write(M),P.document.close()};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",onPaste:_?V:void 0,children:[c.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center xl:justify-between mb-8 gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Teklif Ynetimi"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Mteri teklifleri ve fiyatlandrma"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center bg-white p-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsx(rh,{startDate:v.start,endDate:v.end,onStartChange:S=>y({...v,start:S}),onEndChange:S=>y({...v,end:S})}),c.jsxs("button",{onClick:I,className:"flex items-center justify-center px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold text-sm",children:[c.jsx(Pe.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"Teklif Olutur"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[o.length===0&&c.jsx("div",{className:"text-center text-gray-400 py-12 border-2 border-dashed border-gray-200 rounded-2xl",children:"Henz kaytl teklif yok."}),o.filter(S=>{let P=!0;return v.start&&S.date<v.start&&(P=!1),v.end&&S.date>v.end&&(P=!1),P}).map(S=>{const P=ye(S.items);return c.jsxs(Yg,{className:"p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:scale-[1.01] transition-transform duration-200",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 bg-indigo-50 rounded-xl p-3 text-indigo-600 shadow-inner",children:c.jsx(Pe.Clipboard,{})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800",children:S.teklifName||"simsiz Teklif"}),c.jsxs("span",{className:"text-xs font-mono bg-gray-100 text-gray-500 border border-gray-200 px-2 py-0.5 rounded",children:["#",S.teklifNo]})]}),c.jsx("p",{className:"text-sm text-gray-600 mt-1 font-medium",children:S.customerName}),c.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-gray-400",children:[c.jsxs("span",{children:["Tarih: ",ad(S.date)]}),c.jsx("span",{children:""}),c.jsxs("span",{children:["Geerlilik: ",ad(S.validityDate)]})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-6 w-full md:w-auto border-t md:border-t-0 pt-4 md:pt-0 border-gray-100",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"block text-xl font-black text-emerald-600",children:Ks(P.grandTotal)}),c.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wider",children:"Genel Toplam"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(xn,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-gray-400 hover:text-indigo-600",onClick:()=>$e(S),children:c.jsx(Pe.Printer,{})}),c.jsx(xn,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-blue-600",onClick:()=>de(S),children:c.jsx(Pe.Edit,{})}),c.jsx(xn,{variant:"secondary",className:"w-8 h-8 !p-0 flex items-center justify-center text-red-600",onClick:()=>Me(S.id),children:c.jsx(Pe.Trash,{})})]})]})]},S.id)})]}),c.jsx(ec,{isOpen:_,onClose:()=>E(!1),title:W?"Teklifi Dzenle":"Yeni Teklif Olutur",maxWidth:"max-w-5xl",children:c.jsxs("form",{onSubmit:Y,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 bg-gray-50/50 p-6 rounded-2xl border border-gray-200/60",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif No"}),c.jsx(Yt,{value:ne.teklifNo,onChange:S=>Z({...ne,teklifNo:S.target.value})})]}),c.jsxs("div",{className:"md:col-span-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Teklif Ad"}),c.jsx(Yt,{required:!0,placeholder:"rn: Mutfak Dolab Projesi",value:ne.teklifName,onChange:S=>Z({...ne,teklifName:S.target.value})})]}),c.jsxs("div",{className:"md:col-span-6",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Mteri Ad / Firma"}),c.jsx(Jo,{options:ge,selected:ne.customerName,onChange:S=>Z({...ne,customerName:S}),placeholder:"Mteri Sein veya Yazn",allowNew:!0})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Tarih"}),c.jsx(Yt,{type:"date",required:!0,value:ne.date,onChange:S=>Z({...ne,date:S.target.value})})]}),c.jsxs("div",{className:"md:col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Geerlilik Tarihi"}),c.jsx(Yt,{type:"date",required:!0,value:ne.validityDate,onChange:S=>Z({...ne,validityDate:S.target.value})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Not (PDF Alt Bilgi)"}),c.jsx(P4,{rows:"4",value:ne.note,onChange:S=>Z({...ne,note:S.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Grseller (Srkle Brak veya CTRL+V)"}),c.jsxs("div",{className:"flex gap-2 items-start",children:[c.jsxs("div",{className:`flex flex-col items-center justify-center border-2 border-dashed rounded-xl transition-all relative h-32 w-32 shrink-0 cursor-pointer ${A?"border-indigo-500 bg-indigo-50":"border-gray-300 hover:bg-gray-50"}`,onDragOver:j,onDragLeave:k,onDrop:C,children:[c.jsx("input",{ref:ee,type:"file",multiple:!0,accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:Ee}),c.jsxs("div",{className:"text-center text-gray-400 pointer-events-none",children:[c.jsx(Pe.Upload,{}),c.jsx("span",{className:"text-[10px] block mt-1",children:"Ekle"})]})]}),c.jsx("div",{className:"flex gap-2 overflow-x-auto h-32 pb-2 custom-scrollbar",children:ne.images.map((S,P)=>c.jsxs("div",{className:"relative shrink-0 w-32 h-full rounded-lg overflow-hidden border border-gray-200 group bg-white",children:[c.jsx("img",{src:S,className:"w-full h-full object-contain"}),c.jsx("button",{type:"button",onClick:()=>R(P),className:"absolute top-1 right-1 bg-red-500 text-white w-5 h-5 flex items-center justify-center rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""}),c.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex justify-between opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{type:"button",onClick:()=>T(P,-1),disabled:P===0,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""}),c.jsx("button",{type:"button",onClick:()=>T(P,1),disabled:P===ne.images.length-1,className:"bg-black/50 text-white px-1.5 rounded text-xs disabled:opacity-30",children:""})]})]},P))})]})]})]}),c.jsxs("div",{className:"border border-gray-200 rounded-xl overflow-hidden shadow-sm bg-white/60",children:[c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80 text-xs text-gray-500 font-bold uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left tracking-wider",children:"Aklama"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"Miktar"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Birim Fiyat"}),c.jsx("th",{className:"px-4 py-3 text-center w-24 tracking-wider",children:"KDV %"}),c.jsx("th",{className:"px-4 py-3 text-right w-32 tracking-wider",children:"Tutar"}),c.jsx("th",{className:"w-12"})]})}),c.jsx("tbody",{className:"bg-white/40 divide-y divide-gray-100",children:ne.items.map((S,P)=>c.jsxs("tr",{className:"group hover:bg-white transition-colors",children:[c.jsx("td",{className:"p-2",children:c.jsx(Yt,{placeholder:"rn/Hizmet aklamas",value:S.description,onChange:J=>he(P,"description",J.target.value),className:"bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white"})}),c.jsx("td",{className:"p-2",children:c.jsx(Yt,{type:"number",min:"1",className:"text-center bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:S.quantity,onChange:J=>he(P,"quantity",J.target.value)})}),c.jsx("td",{className:"p-2",children:c.jsx(Yt,{type:"number",min:"0",step:"0.01",className:"text-right bg-transparent border-transparent hover:bg-white hover:border-gray-200 focus:bg-white [&::-webkit-inner-spin-button]:appearance-none",value:S.price,onChange:J=>he(P,"price",J.target.value)})}),c.jsx("td",{className:"p-2 text-center",children:c.jsxs("select",{className:"bg-transparent border-none rounded-lg text-sm font-medium text-gray-600 cursor-pointer hover:bg-white focus:ring-2 focus:ring-indigo-500 p-2",value:S.vat,onChange:J=>he(P,"vat",J.target.value),children:[c.jsx("option",{value:"0",children:"%0"}),c.jsx("option",{value:"1",children:"1%"}),c.jsx("option",{value:"10",children:"%10"}),c.jsx("option",{value:"20",children:"%20"})]})}),c.jsx("td",{className:"px-4 py-2 text-right text-sm font-bold text-indigo-600",children:Ks(S.total)}),c.jsx("td",{className:"p-2 text-center",children:c.jsx("button",{type:"button",onClick:()=>Be(P),className:"p-2 text-gray-300 hover:text-red-500 transition-colors",children:c.jsx(Pe.Trash,{})})})]},P))})]}),c.jsx("button",{type:"button",onClick:be,className:"w-full py-3 border-t border-dashed border-gray-300 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-colors text-xs font-bold uppercase tracking-wider",children:"+ Yeni Satr Ekle"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("div",{className:"w-72 bg-white/60 p-6 rounded-2xl border border-white/60 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{children:"Ara Toplam"}),c.jsx("span",{className:"font-medium",children:Ks(ye(ne.items).subtotal)})]}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[c.jsx("span",{children:"Toplam KDV"}),c.jsx("span",{className:"font-medium",children:Ks(ye(ne.items).totalVAT)})]}),c.jsxs("div",{className:"flex justify-between text-xl font-bold text-indigo-600 pt-4 border-t border-gray-200/50",children:[c.jsx("span",{children:"Genel Toplam"}),c.jsx("span",{children:Ks(ye(ne.items).grandTotal)})]})]})}),c.jsxs("div",{className:"pt-4 flex flex-row-reverse gap-3 border-t border-gray-200/50",children:[c.jsx(xn,{type:"submit",variant:"primary",children:W?"Kaydet":"Olutur"}),c.jsx(xn,{type:"button",variant:"secondary",onClick:()=>E(!1),children:"ptal"})]})]})})]})}const ss={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Calculator:()=>c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),TrendingUp:()=>c.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),TrendingDown:()=>c.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),Variable:()=>c.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Refresh:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},X4="86715dfc9d1046e7e8a0d95a",W4=`https://v6.exchangerate-api.com/v6/${X4}/latest/USD`,Tm=({ops:i,onChange:e,allowRefs:s=!1,rows:r=[],constants:o=[],constantsMap:d})=>{const f=(y,_,E)=>{const A=[...i];A[y]={...A[y],[_]:E},_==="type"&&E!=="op"&&(A[y].value=""),e(A)},p=()=>{e([...i,{type:"op",value:"+"},{type:"num",value:0}])},v=y=>{if(y===0)return;const _=[...i];_.splice(y,2),e(_)};return c.jsxs("div",{className:"flex flex-wrap items-center gap-3 py-2",children:[i.map((y,_)=>_%2!==0?c.jsxs("div",{className:"relative group",children:[c.jsxs("select",{className:"bg-gray-100 border-0 rounded-lg text-center font-bold text-gray-600 w-12 py-2 focus:ring-2 focus:ring-indigo-500 cursor-pointer hover:bg-gray-200 transition-colors appearance-none",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"+",children:"+"}),c.jsx("option",{value:"-",children:"-"}),c.jsx("option",{value:"*",children:""}),c.jsx("option",{value:"/",children:""})]}),c.jsx("button",{type:"button",onClick:()=>v(_),className:"absolute -top-4 -right-3 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center shadow-md z-20 hover:bg-red-600 transition-colors",title:"lemi Sil",children:""})]},_):c.jsxs("div",{className:"flex bg-white border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-indigo-500 shadow-sm items-center",children:[c.jsxs("select",{className:"bg-gray-50 border-r border-gray-300 text-[10px] uppercase font-bold text-gray-500 px-2 py-2 cursor-pointer focus:outline-none hover:bg-gray-100 h-full",value:y.type,onChange:E=>f(_,"type",E.target.value),children:[c.jsx("option",{value:"num",children:"Say"}),c.jsx("option",{value:"const",children:"Sabit"}),s&&c.jsx("option",{value:"ref",children:"Ref"})]}),y.type==="num"&&c.jsx("input",{type:"number",className:"w-24 border-none text-sm px-3 py-2 focus:ring-0 text-gray-900",placeholder:"0",value:y.value,onChange:E=>f(_,"value",E.target.value)}),y.type==="const"&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-white cursor-pointer text-gray-900",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),o.map(E=>c.jsx("option",{value:E.id,children:E.name},E.id))]}),y.type==="ref"&&s&&c.jsxs("select",{className:"w-36 border-none text-sm px-3 py-2 focus:ring-0 bg-indigo-50 text-indigo-700 font-medium cursor-pointer",value:y.value,onChange:E=>f(_,"value",E.target.value),children:[c.jsx("option",{value:"",children:"Seiniz..."}),r.map(E=>c.jsx("option",{value:E.id,children:E.name||"simsiz Satr"},E.id))]})]},_)),c.jsx("button",{type:"button",onClick:p,className:"w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center hover:bg-indigo-100 hover:shadow-md transition-all z-10",children:c.jsx(ss.Plus,{})})]})};function Z4(){const[i,e]=ie.useState(null),[s,r]=ie.useState(!0),[o,d]=ie.useState([]),[f,p]=ie.useState([]),[v,y]=ie.useState({TRY:1,USD:1,EUR:1}),[_,E]=ie.useState(null),[A,q]=ie.useState(!1),[ee,W]=ie.useState(!1),[z,ne]=ie.useState(null),[Z,ge]=ie.useState({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),[ue,ye]=ie.useState({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"});ie.useEffect(()=>{const M=as.onAuthStateChanged(te=>{e(te),r(!1)}),X=qn(Et(He,"pricing_constants"),ls("name","asc")),oe=bn(X,te=>{d(te.docs.map(xe=>({id:xe.id,...xe.data()})))}),Ae=qn(Et(He,"pricing_items"),ls("updatedAt","desc")),Re=bn(Ae,te=>{p(te.docs.map(xe=>({id:xe.id,...xe.data()})))});return Ee(),()=>{M(),oe(),Re()}},[]);const Ee=async()=>{try{const X=await(await fetch(W4)).json();if(X&&X.conversion_rates){const oe=X.conversion_rates.TRY,Ae=X.conversion_rates.EUR,Re=oe/Ae;y({TRY:1,USD:oe,EUR:Re}),E(new Date().toLocaleTimeString())}}catch(M){console.error("Rate fetch error",M)}},R=(M,X)=>{if(!X||X==="None"||X==="TRY")return parseFloat(M)||0;const oe=v[X]||1;return parseFloat(M)*oe},T=(M,X)=>{if(X==="TRY")return M;const oe=v[X]||1;return M/oe},j=(M,X={})=>{if(M.type==="num")return parseFloat(M.value)||0;if(M.type==="const"){const oe=o.find(Ae=>Ae.id===M.value);return oe?R(oe.value,oe.currency):0}return M.type==="ref"&&X[M.value]||0},k=(M,X={})=>{if(!M||M.length===0)return 0;let oe=j(M[0],X);for(let Ae=1;Ae<M.length;Ae+=2){const Re=M[Ae].value,te=j(M[Ae+1],X);switch(Re){case"+":oe+=te;break;case"-":oe-=te;break;case"*":oe*=te;break;case"/":oe=te!==0?oe/te:0;break}}return oe},C=M=>{const X={};(M.rows||[]).forEach(Ae=>{X[Ae.id]=k(Ae.ops,X)});const oe=k(M.finalFormula?.ops,X);return T(oe,M.finalCurrency||"TRY")},V=M=>k(M,{}),I=ie.useMemo(()=>C(ue),[ue,o,v]),de=ie.useMemo(()=>V(Z.ops),[Z.ops,o,v]),Me=async M=>{M.preventDefault();const X=V(Z.ops),oe={...Z,value:X};z?await ni($t(He,"pricing_constants",z),oe):await ji(Et(He,"pricing_constants"),oe),ge({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),ne(null),q(!1)},Y=async M=>await Mr($t(He,"pricing_constants",M)),he=()=>{const M="row_"+Date.now();ye({...ue,rows:[...ue.rows,{id:M,name:"",ops:[{type:"num",value:0}]}]})},be=M=>{const X=[...ue.rows];X.splice(M,1),ye({...ue,rows:X})},Be=(M,X)=>{const oe=[...ue.rows];oe[M].name=X,ye({...ue,rows:oe})},$e=(M,X)=>{const oe=[...ue.rows];oe[M].ops=X,ye({...ue,rows:oe})},S=async M=>{M.preventDefault();const X={...ue,updatedAt:new Date().toISOString()};z?await ni($t(He,"pricing_items",z),X):await ji(Et(He,"pricing_items"),X),ye({title:"",unitType:"adet",rows:[],finalFormula:{ops:[{type:"num",value:0}]},finalCurrency:"TRY"}),ne(null),W(!1)},P=M=>{const X={...M,rows:M.rows||[],finalFormula:M.finalFormula||{ops:[{type:"num",value:0}]},finalCurrency:M.finalCurrency||"TRY"};ye(X),ne(M.id),W(!0)},J=async M=>{window.confirm("Silmek istediinize emin misiniz?")&&await Mr($t(He,"pricing_items",M))};return s?c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."}):i?.email==="furkan@avci.jp"?c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-8 gap-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Fiyatlandrma"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maliyet analizi ve hesaplama motoru"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-white px-4 py-2 rounded-xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"USD"}),c.jsxs("span",{className:"text-lg font-bold text-green-600",children:[v.USD.toFixed(2)," "]})]}),c.jsx("div",{className:"h-6 w-px bg-gray-200"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-400",children:"EUR"}),c.jsxs("span",{className:"text-lg font-bold text-indigo-600",children:[v.EUR.toFixed(2)," "]})]}),c.jsx("button",{onClick:Ee,className:"text-gray-400 hover:text-gray-600 ml-2",children:c.jsx(ss.Refresh,{})})]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsxs("button",{onClick:()=>{ne(null),ge({name:"",unit:"",currency:"TRY",ops:[{type:"num",value:0}]}),q(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl shadow-sm hover:bg-gray-50 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-purple-500",children:c.jsx(ss.Variable,{})}),"Sabitler"]}),c.jsxs("button",{onClick:()=>{ne(null),ye({title:"",unitType:"adet",rows:[{id:"init",name:"Girdi Maliyeti",ops:[{type:"num",value:0}]}],finalFormula:{ops:[{type:"ref",value:"init"}]},finalCurrency:"TRY"}),W(!0)},className:"flex-1 flex items-center justify-center px-4 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-medium text-sm",children:[c.jsx("span",{className:"mr-2 text-white",children:c.jsx(ss.Calculator,{})}),"Fiyatlandrma"]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-1 space-y-6",children:c.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/50 shadow-lg p-6 h-[calc(100vh-200px)] flex flex-col",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center shrink-0",children:[c.jsx("span",{className:"bg-purple-100 p-1.5 rounded-lg mr-2",children:c.jsx(ss.Variable,{})}),"Sabit Deerler"]}),c.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-grow",children:[o.map(M=>{const X=R(M.value,M.currency);return c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-white hover:shadow-sm border border-transparent hover:border-gray-100 transition-all group",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-700",children:M.name}),c.jsxs("p",{className:"text-xs text-gray-500",children:[M.value?.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",M.currency!=="None"?M.currency:"",M.unit?c.jsxs("span",{className:"text-gray-300 mx-1",children:["/ ",M.unit]}):""]}),M.currency!=="TRY"&&M.currency!=="None"&&c.jsxs("p",{className:"text-[10px] text-emerald-600 font-medium mt-0.5",children:["~ ",X.toFixed(2)," "]})]}),c.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>{ge({...M,ops:M.ops||[{type:"num",value:M.value}]}),ne(M.id),q(!0)},className:"p-1.5 text-gray-400 hover:text-blue-600",children:c.jsx(ss.Edit,{})}),c.jsx("button",{onClick:()=>Y(M.id),className:"p-1.5 text-gray-400 hover:text-red-600",children:c.jsx(ss.Trash,{})})]})]},M.id)}),o.length===0&&c.jsx("div",{className:"text-center text-xs text-gray-400 italic py-4",children:"Sabit deer eklenmedi."})]})]})}),c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Gncel Fiyatlar"}),c.jsxs("span",{className:"text-xs text-gray-400",children:["Son Gncelleme: ",_||"..."]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[calc(100vh-200px)] overflow-y-auto custom-scrollbar pr-2 pb-4",children:f.map(M=>{const X=C(M),oe=M.finalCurrency||"TRY",Ae=Math.random()>.5?"up":"down",Re=(Math.random()*5).toFixed(1);return c.jsxs("div",{className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 relative group hover:shadow-xl transition-shadow",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-gray-50 px-3 py-1 rounded-bl-2xl text-xs text-gray-400 border-b border-l border-gray-100",children:new Date(M.updatedAt).toLocaleDateString("tr-TR")}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:M.title}),c.jsx("p",{className:"text-xs text-gray-500 mb-4 uppercase tracking-wider",children:M.unitType}),c.jsxs("div",{className:"flex items-end justify-between mb-4",children:[c.jsx("div",{children:c.jsxs("span",{className:"text-3xl font-bold text-indigo-600",children:[X.toLocaleString("tr-TR",{maximumFractionDigits:2})," ",oe]})}),c.jsx("div",{className:"flex flex-col items-end",children:c.jsxs("div",{className:`flex items-center text-xs font-bold ${Ae==="up"?"text-emerald-500":"text-red-500"}`,children:[Ae==="up"?c.jsx(ss.TrendingUp,{}):c.jsx(ss.TrendingDown,{}),c.jsxs("span",{className:"ml-1",children:["%",Re]})]})})]}),c.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100",children:[c.jsx("button",{onClick:()=>P(M),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 transition-colors",children:"Dzenle"}),c.jsx("button",{onClick:()=>J(M.id),className:"flex-1 py-2 text-xs font-medium bg-gray-50 text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-colors",children:"Sil"})]})]},M.id)})})]})]}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-xl w-full p-6 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Sabit Deer Ekle"}),c.jsxs("form",{onSubmit:Me,className:"space-y-6 overflow-y-auto custom-scrollbar px-1 pb-2",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad"}),c.jsx("input",{required:!0,placeholder:"rn: ilik Saat",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:Z.name,onChange:M=>ge({...Z,name:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Birim"}),c.jsx("input",{placeholder:"kg, m2...",className:"w-full border-gray-200 rounded-xl px-4 py-2.5 text-sm bg-gray-50 focus:bg-white transition-colors",value:Z.unit,onChange:M=>ge({...Z,unit:M.target.value})})]})]}),c.jsxs("div",{className:"bg-purple-50/50 p-5 rounded-xl border border-purple-100",children:[c.jsx("label",{className:"block text-xs font-bold text-purple-800 mb-3 uppercase",children:"Hesaplama Forml"}),c.jsx(Tm,{ops:Z.ops,onChange:M=>ge({...Z,ops:M}),allowRefs:!1,constants:o})]}),c.jsxs("div",{className:"flex items-center justify-between bg-gray-900 text-white p-5 rounded-xl shadow-lg",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-gray-400 text-xs block",children:"Hesaplanan Deer"}),c.jsx("span",{className:"text-2xl font-bold",children:de.toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsxs("div",{className:"w-32",children:[c.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Para Birimi"}),c.jsxs("select",{className:"w-full bg-gray-800 border-none rounded-lg text-sm text-white font-bold focus:ring-1 focus:ring-purple-500 cursor-pointer",value:Z.currency,onChange:M=>ge({...Z,currency:M.target.value}),children:[c.jsx("option",{value:"None",children:"Say"}),c.jsx("option",{value:"TRY",children:"TRY ()"}),c.jsx("option",{value:"USD",children:"USD ($)"}),c.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-5 py-2.5 text-gray-600 hover:bg-gray-100 rounded-xl text-sm font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-purple-600 text-white rounded-xl text-sm font-medium hover:bg-purple-700 shadow-lg shadow-purple-200 transition-all",children:"Kaydet"})]})]})]})}),ee&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-7xl w-full h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-5 border-b border-gray-200 flex justify-between items-center bg-gray-50",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Fiyatlandrma Oluturucu"}),c.jsx("button",{onClick:()=>W(!1),className:"text-gray-400 hover:text-gray-600 text-3xl font-light leading-none",children:""})]}),c.jsx("div",{className:"p-8 overflow-y-auto flex-grow custom-scrollbar bg-slate-50",children:c.jsxs("form",{id:"pricingForm",onSubmit:S,className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"rn Tanm"}),c.jsx("input",{required:!0,placeholder:"rn: 18mm MDF Levha Maliyeti",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm focus:ring-indigo-500 focus:border-indigo-500",value:ue.title,onChange:M=>ye({...ue,title:M.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5",children:"Birim / Tr"}),c.jsx("input",{placeholder:"adet, m3, kg...",className:"w-full border-gray-300 rounded-xl px-4 py-2.5 text-sm shadow-sm",value:ue.unitType,onChange:M=>ye({...ue,unitType:M.target.value})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-end pb-2 border-b border-gray-200",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 uppercase tracking-wider",children:"Hesaplama Admlar"}),c.jsxs("button",{type:"button",onClick:he,className:"flex items-center text-xs bg-indigo-100 text-indigo-700 px-3 py-1.5 rounded-lg hover:bg-indigo-200 font-bold transition-colors",children:[c.jsx("span",{className:"mr-1 text-lg leading-none",children:"+"})," Yeni Satr"]})]}),ue.rows.map((M,X)=>c.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col xl:flex-row items-start xl:items-center gap-4 group",children:[c.jsxs("div",{className:"w-full xl:w-64 shrink-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Adm Ad"}),c.jsx("input",{placeholder:"rn: Ham Madde",className:"w-full text-sm font-medium bg-gray-50 border-transparent rounded-lg focus:bg-white focus:border-indigo-300 focus:ring-0 transition-all px-3 py-2",value:M.name,onChange:oe=>Be(X,oe.target.value)})]}),c.jsxs("div",{className:"flex-grow w-full overflow-x-auto pb-2 xl:pb-0",children:[c.jsx("label",{className:"block xl:hidden text-[10px] font-bold text-gray-400 uppercase mb-1",children:"Forml"}),c.jsx(Tm,{ops:M.ops,onChange:oe=>$e(X,oe),allowRefs:!0,rows:ue.rows.slice(0,X),constants:o})]}),c.jsxs("div",{className:"flex items-center gap-4 w-full xl:w-auto justify-between xl:justify-start border-t xl:border-t-0 xl:border-l border-gray-100 pt-3 xl:pt-0 xl:pl-4 mt-2 xl:mt-0",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-[10px] text-gray-400 block uppercase font-bold",children:"Ara Toplam"}),c.jsx("span",{className:"font-mono font-bold text-indigo-600 text-lg",children:k(M.ops,C({...ue,finalFormula:null})).toLocaleString("tr-TR",{maximumFractionDigits:2})})]}),c.jsx("button",{type:"button",onClick:()=>be(X),className:"p-2 text-gray-300 hover:text-red-500 bg-gray-50 hover:bg-red-50 rounded-lg transition-colors",children:c.jsx(ss.Trash,{})})]})]},M.id))]}),c.jsxs("div",{className:"bg-indigo-900 text-white p-6 rounded-2xl shadow-xl",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-indigo-200 uppercase tracking-wider flex items-center",children:[c.jsx(ss.Calculator,{}),c.jsx("span",{className:"ml-2",children:"Son lem (Final Fiyat)"})]}),c.jsxs("div",{className:"flex items-center bg-indigo-800 rounded-lg p-1",children:[c.jsx("span",{className:"text-xs text-indigo-300 px-2",children:"Para Birimi:"}),c.jsxs("select",{className:"bg-transparent border-none text-sm font-bold text-white focus:ring-0 cursor-pointer py-1",value:ue.finalCurrency,onChange:M=>ye({...ue,finalCurrency:M.target.value}),children:[c.jsx("option",{value:"TRY",children:"TRY"}),c.jsx("option",{value:"USD",children:"USD"}),c.jsx("option",{value:"EUR",children:"EUR"})]})]})]}),c.jsx("div",{className:"bg-indigo-800/50 p-4 rounded-xl border border-indigo-700 mb-6 overflow-x-auto",children:c.jsx(Tm,{ops:ue.finalFormula.ops,onChange:M=>ye({...ue,finalFormula:{...ue.finalFormula,ops:M}}),allowRefs:!0,rows:ue.rows,constants:o})}),c.jsxs("div",{className:"flex justify-between items-end border-t border-indigo-700/50 pt-4",children:[c.jsx("div",{className:"text-xs text-indigo-400",children:"* Tm hesaplamalar gncel kur zerinden yaplr."}),c.jsxs("div",{className:"text-right text-white",children:[c.jsx("span",{className:"text-sm text-indigo-300 block mb-1",children:"Hesaplanan Birim Fiyat"}),c.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-2",children:[I.toLocaleString("tr-TR",{maximumFractionDigits:2}),c.jsx("span",{className:"text-lg font-medium text-indigo-400",children:ue.finalCurrency})]})]})]})]})]})}),c.jsxs("div",{className:"px-8 py-5 border-t border-gray-200 bg-gray-50 flex flex-row-reverse gap-3",children:[c.jsx("button",{onClick:S,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 hover:shadow-indigo-300 transition-all font-bold text-sm",children:"Kaydet"}),c.jsx("button",{onClick:()=>W(!1),className:"px-6 py-3 bg-white border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium text-sm",children:"ptal"})]})]})})]}):c.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center p-8",children:[c.jsx(ss.Lock,{}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4",children:"Eriim Reddedildi"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Bu sayfay grntleme yetkiniz bulunmamaktadr."}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Gerekli Yetki: Ynetici (",i?.email,")"]})]})}const fa={Plus:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),Trash:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Edit:()=>c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),User:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Cash:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),History:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lock:()=>c.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},ml={ONLINE:{color:"bg-emerald-500",text:"alyor",ring:"ring-emerald-200"},OFFLINE:{color:"bg-gray-400",text:"Mesai D",ring:"ring-gray-200"},OVERTIME:{color:"bg-purple-500",text:"Fazla Mesai",ring:"ring-purple-200"},LEAVE:{color:"bg-yellow-500",text:"zinli",ring:"ring-yellow-200"}},sb=["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],J4=["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],Sm=2.5,_s=i=>new Intl.NumberFormat("tr-TR",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(i||0)+" ";function eC(){const[i,e]=ie.useState(null),[s,r]=ie.useState(!0),[o,d]=ie.useState([]),[f,p]=ie.useState(new Date),[v,y]=ie.useState(!1),[_,E]=ie.useState(!1),[A,q]=ie.useState(null),[ee,W]=ie.useState(new Date),[z,ne]=ie.useState(!1),[Z,ge]=ie.useState(new Date().getFullYear()),[ue,ye]=ie.useState(!1),[Ee,R]=ie.useState(null),[T,j]=ie.useState({type:"work",overtimeSlots:0,lateness:0}),[k,C]=ie.useState({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}});ie.useEffect(()=>{const L=as.onAuthStateChanged(Ae=>{e(Ae),r(!1)}),M=qn(Et(He,"employees"),ls("name","asc")),X=bn(M,Ae=>{d(Ae.docs.map(Re=>({id:Re.id,...Re.data()})))}),oe=setInterval(()=>p(new Date),6e4);return()=>{L(),X(),clearInterval(oe)}},[]);const V=L=>{const M=f.toISOString().split("T")[0],X=f.getDay(),oe=f.getHours(),Ae=f.getMinutes(),Re=oe*60+Ae,te=L.attendance?.[M];if(te){if(["paid_leave","unpaid_leave"].includes(te.type))return ml.LEAVE;if(te.overtimeSlots>0)return ml.OVERTIME}const[xe,fe]=L.startHour.split(":").map(Number),[Oe,Ce]=L.endHour.split(":").map(Number),Te=xe*60+fe,K=Oe*60+Ce;return L.workDays.includes(X)?Re>=Te&&Re<K?ml.ONLINE:Re>=K&&te?.overtimeSlots>0?ml.OVERTIME:ml.OFFLINE:ml.OFFLINE},I=L=>{if(!L.attendance)return{used:0,remaining:L.vacationTotal};let M=0;return Object.values(L.attendance).forEach(X=>{X.type==="paid_leave"&&M++}),{used:M,remaining:L.vacationTotal-M}},de=(L,M)=>{const X=M.getFullYear(),oe=M.getMonth(),Ae=new Date(X,oe+1,0).getDate();let Re=0,te=0,xe=0,fe=0,Oe=0;for(let ri=1;ri<=Ae;ri++){const Li=`${X}-${String(oe+1).padStart(2,"0")}-${String(ri).padStart(2,"0")}`,Ss=new Date(Li).getDay(),Hn=L.attendance?.[Li],Na=L.workDays.includes(Ss);Hn?(Hn.type==="work"&&Re++,Hn.type==="paid_leave"&&Oe++,Hn.type==="unpaid_leave"&&fe++,Hn.overtimeSlots&&(te+=parseInt(Hn.overtimeSlots)),Hn.lateness&&(xe+=parseFloat(Hn.lateness))):Na&&Re++}const Ce=parseFloat(L.salaryAmount)||0,Te=L.customDailyRate&&parseFloat(L.customDailyRate)>0?parseFloat(L.customDailyRate):Ce/30,K=parseFloat(L.customDeductionRate),ve=!isNaN(K)&&K>0?K:Te,we=Te/9,Ve=L.customOvertimeMultiplier?parseFloat(L.customOvertimeMultiplier):1.5,me=te*Sm,Ie=me*(we*Ve),xt=fe*ve,si=xe*we,Vt=xt+si,ii=Ce+Ie-Vt+(parseFloat(L.insurance)||0)+(parseFloat(L.allowance)||0);return{workedDays:Re,totalOvertimeSlots:te,totalOvertimeHours:me,unpaidLeaveDays:fe,paidLeaveDays:Oe,overtimePay:Ie,totalLatenessHours:xe,latenessDeduction:si,totalDeduction:Vt,totalSalary:ii,dailyRate:Te,hourlyRate:we,deductionRate:ve}},Me=(L,M)=>{const X=new Date(L,M,1);let oe=0;return o.forEach(Ae=>{oe+=de(Ae,X).totalSalary}),oe},Y=ie.useMemo(()=>{let L=0,M=0;const X=new Date(ee);return X.setMonth(ee.getMonth()-1),o.forEach(oe=>{L+=de(oe,ee).totalSalary,M+=de(oe,X).totalSalary}),{thisMonthTotal:L,lastMonthTotal:M}},[o,ee]),he=()=>{E(!1),C({name:"",role:"",salaryType:"monthly",salaryAmount:0,insurance:0,allowance:0,vacationTotal:14,workDays:[1,2,3,4,5],startHour:"09:00",endHour:"18:00",customDailyRate:"",customOvertimeMultiplier:"1.5",customDeductionRate:"",attendance:{}}),y(!0)},be=()=>{A&&(E(!0),C({name:A.name,role:A.role,salaryType:A.salaryType,salaryAmount:A.salaryAmount,insurance:A.insurance,allowance:A.allowance,vacationTotal:A.vacationTotal,workDays:A.workDays,startHour:A.startHour,endHour:A.endHour,customDailyRate:A.customDailyRate||"",customOvertimeMultiplier:A.customOvertimeMultiplier||"1.5",customDeductionRate:A.customDeductionRate||"",attendance:A.attendance||{}}),q(null),y(!0))},Be=async L=>{L.preventDefault();try{const M={...k,updatedAt:new Date().toISOString()};_&&A?await ni($t(He,"employees",A.id),M):await ji(Et(He,"employees"),{...M,createdAt:new Date().toISOString()}),y(!1)}catch(M){alert("Hata: "+M.message)}},$e=async L=>{window.confirm("alan silmek istediinize emin misiniz?")&&(await Mr($t(He,"employees",L)),q(null))},S=(L,M)=>{R(L),j({type:M?.type||"work",overtimeSlots:M?.overtimeSlots||0,lateness:M?.lateness||0}),ye(!0)},P=async L=>{if(L.preventDefault(),!A||!Ee)return;const M={...A.attendance};M[Ee]={type:T.type,overtimeSlots:parseInt(T.overtimeSlots)||0,lateness:parseFloat(T.lateness)||0},await ni($t(He,"employees",A.id),{attendance:M}),q({...A,attendance:M}),ye(!1)};if(s)return c.jsx("div",{className:"p-10 text-center",children:"Ykleniyor..."});if(i?.email!=="furkan@avci.jp")return c.jsxs("div",{className:"p-10 text-center text-red-500",children:[c.jsx(fa.Lock,{})," Yetkisiz Eriim"]});const J=({employee:L,date:M,onDateClick:X})=>{const oe=M.getFullYear(),Ae=M.getMonth(),Re=new Date(oe,Ae+1,0).getDate(),te=new Date(oe,Ae,1).getDay(),xe=[];for(let fe=0;fe<te;fe++)xe.push(null);for(let fe=1;fe<=Re;fe++)xe.push(fe);return c.jsxs("div",{className:"w-full",children:[c.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 text-center",children:sb.map((fe,Oe)=>c.jsx("div",{className:"text-xs font-bold text-gray-400 uppercase",children:fe.slice(0,3)},Oe))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:xe.map((fe,Oe)=>{if(!fe)return c.jsx("div",{},Oe);const Ce=`${oe}-${String(Ae+1).padStart(2,"0")}-${String(fe).padStart(2,"0")}`,Te=L.attendance?.[Ce],K=new Date(Ce).getDay(),ve=L.workDays.includes(K);let we="bg-gray-50 text-gray-400 border-gray-100";return ve&&(we="bg-white border-emerald-200 text-gray-700 shadow-sm"),Te&&(Te.type==="paid_leave"&&(we="bg-yellow-50 border-yellow-200 text-yellow-700"),Te.type==="unpaid_leave"&&(we="bg-red-50 border-red-200 text-red-700"),Te.type==="work"&&(Te.overtimeSlots>0||Te.lateness>0)&&(we="bg-purple-50 border-purple-200 text-purple-700 font-bold shadow-md"),Te.type==="off"&&(we="bg-gray-200 border-gray-300 text-gray-400")),c.jsxs("div",{onClick:()=>X(Ce,Te),className:`h-14 rounded-xl border flex flex-col items-center justify-center cursor-pointer transition-all hover:shadow-md relative ${we}`,children:[c.jsx("span",{className:"text-sm",children:fe}),c.jsxs("div",{className:"flex gap-1 absolute bottom-1",children:[Te?.overtimeSlots>0&&c.jsxs("span",{className:"text-[9px] bg-purple-500 text-white px-1 rounded-full",children:["+",Te.overtimeSlots,"M"]}),Te?.lateness>0&&c.jsxs("span",{className:"text-[9px] bg-red-500 text-white px-1 rounded-full",children:["-",Te.lateness,"s"]})]})]},Oe)})})]})};return c.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-8 font-sans",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-emerald-500 rounded-2xl p-6 text-white shadow-lg shadow-emerald-200 relative overflow-hidden cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ne(!0),children:[c.jsxs("div",{className:"relative z-10",children:[c.jsxs("p",{className:"text-emerald-100 text-xs font-bold uppercase tracking-wider mb-1",children:["Bu Ay denecek (",ee.toLocaleString("tr-TR",{month:"long"}),")"]}),c.jsx("h2",{className:"text-3xl font-bold",children:_s(Y.thisMonthTotal)})]}),c.jsx("div",{className:"absolute right-0 bottom-0 p-4 opacity-10",children:c.jsx(fa.Cash,{})})]}),c.jsxs("div",{className:"bg-white rounded-2xl p-6 text-gray-700 border border-gray-200 shadow-sm cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>ne(!0),children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Geen Ay denen"}),c.jsx("h2",{className:"text-3xl font-bold text-indigo-900",children:_s(Y.lastMonthTotal)})]}),c.jsx("div",{className:"flex items-center justify-end",children:c.jsxs("button",{onClick:he,className:"flex items-center px-6 py-4 bg-indigo-600 text-white rounded-2xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:[c.jsx(fa.Plus,{})," ",c.jsx("span",{className:"ml-2",children:"alan Ekle"})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:o.map(L=>{const M=V(L),X=I(L);return c.jsxs("div",{onClick:()=>q(L),className:"bg-white shadow-lg rounded-2xl border border-gray-100 p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden group",children:[c.jsx("div",{className:`absolute top-4 right-4 flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold text-white ${M.color} ${M.ring} ring-offset-2 ring-2`,children:M.text}),c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:c.jsx(fa.User,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:L.name}),c.jsx("p",{className:"text-sm text-gray-500",children:L.role})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"Mesai"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[L.startHour," - ",L.endHour]})]}),c.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100",children:[c.jsx("span",{className:"text-gray-400 text-xs block mb-1",children:"zin"}),c.jsxs("span",{className:"font-semibold text-gray-700",children:[X.remaining," gn kald"]})]})]})]},L.id)})}),A&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 flex justify-between items-center bg-gray-50/50",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:c.jsx("span",{className:"text-xl font-bold",children:A.name[0]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:A.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:A.role})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:be,className:"flex items-center px-4 py-2 bg-indigo-50 text-indigo-600 rounded-xl hover:bg-indigo-100 transition-colors text-sm font-bold",children:[c.jsx(fa.Edit,{})," ",c.jsx("span",{className:"ml-2",children:"Dzenle"})]}),c.jsx("button",{onClick:()=>$e(A.id),className:"p-2 text-red-400 hover:bg-red-50 rounded-xl transition-colors",children:c.jsx(fa.Trash,{})}),c.jsx("button",{onClick:()=>q(null),className:"text-gray-400 hover:text-gray-600 text-3xl leading-none ml-2",children:""})]})]}),c.jsxs("div",{className:"flex-grow overflow-hidden flex flex-col lg:flex-row",children:[c.jsxs("div",{className:"lg:w-1/3 bg-gray-50 border-r border-gray-200 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-6",children:["Finansal zet (",ee.toLocaleString("tr-TR",{month:"long"}),")"]}),(()=>{const L=de(A,ee);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"text-gray-500",children:"Tahmini deme"}),c.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:_s(L.totalSalary)})]}),c.jsx("div",{className:"h-px bg-gray-100 my-3"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Maa"}),c.jsx("span",{children:_s(Number(A.salaryAmount))})]}),c.jsxs("div",{className:"flex justify-between text-purple-600",children:[c.jsxs("span",{children:["Mesai (",L.totalOvertimeSlots,"x)"]}),c.jsxs("span",{children:["+",_s(L.overtimePay)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Gecikme (",L.totalLatenessHours,"s)"]}),c.jsxs("span",{children:["-",_s(L.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-red-500",children:[c.jsxs("span",{children:["Kesinti (",L.unpaidLeaveDays," gn)"]}),c.jsxs("span",{children:["-",_s(L.totalDeduction-L.latenessDeduction)]})]}),c.jsxs("div",{className:"flex justify-between text-emerald-600",children:[c.jsx("span",{children:"Yan Haklar"}),c.jsxs("span",{children:["+",_s(Number(A.insurance)+Number(A.allowance))]})]})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl text-xs text-indigo-700 leading-relaxed border border-indigo-100",children:["1 Mesai = ",Sm," Saat",c.jsx("br",{}),"Saatlik cret = ",_s(L.hourlyRate),c.jsx("br",{}),"Gnlk Kesinti = ",_s(L.deductionRate)]})]})})()]}),c.jsxs("div",{className:"lg:w-2/3 p-8 overflow-y-auto custom-scrollbar",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>W(new Date(ee.setMonth(ee.getMonth()-1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""}),c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:ee.toLocaleString("tr-TR",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>W(new Date(ee.setMonth(ee.getMonth()+1))),className:"p-2 hover:bg-gray-100 rounded-full",children:""})]}),c.jsxs("div",{className:"flex gap-2 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-white border border-emerald-200 rounded-full"})," alt"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-purple-100 rounded-full"})," Mesai/Ceza"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-yellow-100 rounded-full"})," zin"]})]})]}),c.jsx(J,{employee:A,date:ee,onDateClick:S})]})]})]})}),z&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/30 backdrop-blur-md",children:c.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/50 w-full max-w-4xl p-8 relative",children:[c.jsx("button",{onClick:()=>ne(!1),className:"absolute top-6 right-6 text-gray-400 hover:text-gray-600 text-3xl",children:""}),c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl text-indigo-600",children:c.jsx(fa.History,{})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"deme Gemii"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Yllk maa deme zeti"})]})]}),c.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[c.jsx("button",{onClick:()=>ge(L=>L-1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""}),c.jsx("span",{className:"text-3xl font-bold text-indigo-900 tracking-tight",children:Z}),c.jsx("button",{onClick:()=>ge(L=>L+1),className:"p-2 bg-white border rounded-full hover:bg-gray-50 transition-colors",children:""})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:J4.map((L,M)=>{const X=Me(Z,M),oe=new Date().getMonth()===M&&new Date().getFullYear()===Z;return c.jsxs("div",{className:`p-5 rounded-2xl border transition-all ${oe?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-200 transform scale-105":"bg-white border-gray-100 hover:border-indigo-200 hover:shadow-md"}`,children:[c.jsx("div",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${oe?"text-indigo-200":"text-gray-400"}`,children:L}),c.jsx("div",{className:`text-lg font-bold ${oe?"text-white":"text-gray-800"}`,children:X>0?_s(X):"-"})]},L)})})]})}),v&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 flex flex-col max-h-[90vh]",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:_?"alan Dzenle":"Yeni alan Ekle"}),c.jsxs("form",{onSubmit:Be,className:"space-y-6 overflow-y-auto custom-scrollbar px-1",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ad Soyad"}),c.jsx("input",{required:!0,className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.name,onChange:L=>C({...k,name:L.target.value})})]}),c.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Pozisyon"}),c.jsx("input",{className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm focus:ring-2 focus:ring-indigo-500",value:k.role,onChange:L=>C({...k,role:L.target.value})})]})]}),c.jsxs("div",{className:"bg-indigo-50 p-5 rounded-xl border border-indigo-100 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-indigo-900 border-b border-indigo-200 pb-2",children:"Maa ve Giderler"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Maa Tipi"}),c.jsxs("select",{className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryType,onChange:L=>C({...k,salaryType:L.target.value}),children:[c.jsx("option",{value:"monthly",children:"Aylk"}),c.jsx("option",{value:"hourly",children:"Saatlik"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Tutar (Net)"}),c.jsx("input",{type:"number",required:!0,className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.salaryAmount,onChange:L=>C({...k,salaryAmount:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"SGK / Prim"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.insurance,onChange:L=>C({...k,insurance:L.target.value})})]}),c.jsxs("div",{className:"col-span-3",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Yol + Yemek (Aylk)"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.allowance,onChange:L=>C({...k,allowance:L.target.value})})]})]})]}),c.jsxs("div",{className:"bg-gray-50 p-5 rounded-xl border border-gray-200 space-y-4",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700 border-b border-gray-300 pb-2",children:"Hesaplama Ayarlar (Opsiyonel)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Gnlk Maliyet"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDailyRate,onChange:L=>C({...k,customDailyRate:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Mesai arpan"}),c.jsx("input",{type:"number",placeholder:"1.5",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customOvertimeMultiplier,onChange:L=>C({...k,customOvertimeMultiplier:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Kesinti creti"}),c.jsx("input",{type:"number",placeholder:"Oto",className:"w-full border border-gray-300 rounded-lg text-sm py-2 px-4",value:k.customDeductionRate,onChange:L=>C({...k,customDeductionRate:L.target.value})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Yllk zin"}),c.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.vacationTotal,onChange:L=>C({...k,vacationTotal:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Balang Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.startHour,onChange:L=>C({...k,startHour:L.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Biti Saati"}),c.jsx("input",{type:"time",className:"w-full border border-gray-300 rounded-xl px-4 py-2.5 text-sm",value:k.endHour,onChange:L=>C({...k,endHour:L.target.value})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"alma Gnleri"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:sb.map((L,M)=>c.jsx("button",{type:"button",onClick:()=>{const X=k.workDays.includes(M)?k.workDays.filter(oe=>oe!==M):[...k.workDays,M];C({...k,workDays:X})},className:`px-3 py-1 rounded-full text-xs font-bold border transition-all ${k.workDays.includes(M)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-400 border-gray-200"}`,children:L.slice(0,3)},L))})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[c.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-2.5 text-gray-600 hover:bg-gray-50 rounded-xl font-medium transition-colors",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all font-bold",children:_?"Gncelle":"Kaydet"})]})]})]})}),ue&&c.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-gray-900/20 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Gn Dzenle"}),c.jsx("p",{className:"text-sm text-gray-500 mb-6",children:Ee}),c.jsxs("form",{onSubmit:P,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Durum"}),c.jsx("div",{className:"space-y-2",children:[{id:"work",label:"alt (Normal)"},{id:"paid_leave",label:"cretli zin"},{id:"unpaid_leave",label:"cretsiz zin"},{id:"off",label:"zin (Bo Gn)"}].map(L=>c.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50",children:[c.jsx("input",{type:"radio",name:"dayType",value:L.id,checked:T.type===L.id,onChange:M=>j({...T,type:M.target.value}),className:"text-indigo-600 focus:ring-indigo-500"}),c.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:L.label})]},L.id))})]}),T.type==="work"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:["Fazla Mesai (1 Mesai = ",Sm,"s)"]}),c.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(L=>c.jsx("button",{type:"button",onClick:()=>j({...T,overtimeSlots:T.overtimeSlots===L?0:L}),className:`flex-1 py-2 rounded-lg border text-sm font-bold transition-all ${T.overtimeSlots===L?"bg-purple-600 text-white border-purple-600 shadow-lg":"bg-white text-gray-400 border-gray-200 hover:bg-purple-50"}`,children:L},L))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gecikme (Saat)"}),c.jsx("input",{type:"number",step:"0.5",className:"w-full border border-red-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-red-500 text-red-600 font-bold",value:T.lateness,onChange:L=>j({...T,lateness:L.target.value}),placeholder:"rn: 1.5"}),c.jsx("p",{className:"text-[10px] text-red-400 mt-1",children:"* Maatan dlecektir."})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>ye(!1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg text-sm",children:"ptal"}),c.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700",children:"Kaydet"})]})]})]})})]})}function tC(){const[i,e]=ie.useState(null),[s,r]=ie.useState(!0),[o,d]=ie.useState("dashboard"),[f,p]=ie.useState(!1);ie.useEffect(()=>{const A=oS(as,q=>{e(q),r(!1)});return()=>A()},[]);const v=async()=>{try{await cS(as)}catch(A){console.error("k yaplrken hata:",A)}},y={Home:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Users:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Box:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),Chart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z"})}),Cart:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),File:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Logout:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Calculator:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Briefcase:()=>c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Menu:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),X:()=>c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})},_=[{id:"dashboard",label:"Dashboard",icon:y.Home},{id:"musteriler",label:"Mteriler",icon:y.Users},{id:"urunler",label:"rnler",icon:y.Box},{id:"stok",label:"Stok Durumu",icon:y.Chart},{id:"siparis",label:"Sipari Formu",icon:y.Cart},{id:"teklif",label:"Teklif Formu",icon:y.File},{id:"fiyatlandirma",label:"Fiyatlandrma",icon:y.Calculator},{id:"calisan",label:"alanlar",icon:y.Briefcase}],E=()=>{switch(o){case"dashboard":return c.jsx(Jx,{onNavigate:d});case"musteriler":return c.jsx(z4,{});case"urunler":return c.jsx(F4,{});case"stok":return c.jsx(Q4,{});case"siparis":return c.jsx(B4,{});case"teklif":return c.jsx($4,{});case"fiyatlandirma":return c.jsx(Z4,{});case"calisan":return c.jsx(eC,{});default:return c.jsx(Jx,{onNavigate:d})}};return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),c.jsx("p",{className:"mt-4 text-indigo-600 font-medium",children:"Ykleniyor..."})]})}):i?c.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans text-gray-900 overflow-hidden",children:[f&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm md:hidden transition-opacity duration-300",onClick:()=>p(!1)}),c.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900/95 backdrop-blur-xl text-white shadow-2xl transform transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:static
      `,children:[c.jsxs("div",{className:"flex items-center justify-between h-20 px-6 border-b border-white/10 bg-slate-900/50",children:[c.jsx("h1",{className:"text-xl font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 truncate",children:"Erelebiler Ahap"}),c.jsx("button",{onClick:()=>p(!1),className:"md:hidden text-gray-400 hover:text-white transition-colors",children:c.jsx(y.X,{})})]}),c.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto custom-scrollbar",style:{height:"calc(100% - 160px)"},children:_.map(A=>c.jsxs("button",{onClick:()=>{d(A.id),p(!1)},className:`
                w-full flex items-center px-4 py-3.5 text-sm font-medium rounded-xl transition-all duration-200 group
                ${o===A.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-[1.02]":"text-slate-400 hover:bg-white/5 hover:text-white"}
              `,children:[c.jsx("span",{className:`mr-3 transition-transform group-hover:scale-110 ${o===A.id?"text-white":"text-slate-500 group-hover:text-indigo-400"}`,children:c.jsx(A.icon,{})}),A.label]},A.id))}),c.jsx("div",{className:"absolute bottom-0 w-full p-4 bg-slate-900/80 border-t border-white/5 backdrop-blur-md",children:c.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center overflow-hidden",children:[c.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-xs font-bold text-white shadow-inner shrink-0",children:i.email?i.email[0].toUpperCase():"U"}),c.jsxs("div",{className:"ml-3 overflow-hidden",children:[c.jsx("p",{className:"text-xs font-medium text-white truncate w-24",children:i.email}),c.jsxs("p",{className:"text-[10px] text-emerald-400 flex items-center gap-1",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"})," evrimii"]})]})]}),c.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-white/10 rounded-lg transition-colors",title:"k Yap",children:c.jsx(y.Logout,{})})]})})]}),c.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden bg-gray-50/50",children:[c.jsxs("header",{className:"md:hidden flex items-center justify-between px-4 py-3 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm sticky top-0 z-30",children:[c.jsx("button",{onClick:()=>p(!0),className:"p-2 -ml-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:c.jsx(y.Menu,{})}),c.jsx("span",{className:"font-bold text-gray-800 text-lg",children:"Erelebiler Ahap"}),c.jsx("div",{className:"w-8"})," "]}),c.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar",children:c.jsx("div",{className:"w-full h-full",children:E()})})]})]}):c.jsx(V4,{})}bw.createRoot(document.getElementById("root")).render(c.jsx(ie.StrictMode,{children:c.jsx(tC,{})}));
