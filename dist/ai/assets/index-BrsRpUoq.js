(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();var Vd={exports:{}},gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function xS(){if(H_)return gl;H_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return gl.Fragment=t,gl.jsx=i,gl.jsxs=i,gl}var G_;function US(){return G_||(G_=1,Vd.exports=xS()),Vd.exports}var st=US(),xd={exports:{}},vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function LS(){if(F_)return vt;F_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),D=Symbol.iterator;function H(M){return M===null||typeof M!="object"?null:(M=D&&M[D]||M["@@iterator"],typeof M=="function"?M:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,Z={};function ct(M,K,et){this.props=M,this.context=K,this.refs=Z,this.updater=et||$}ct.prototype.isReactComponent={},ct.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},ct.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function lt(){}lt.prototype=ct.prototype;function dt(M,K,et){this.props=M,this.context=K,this.refs=Z,this.updater=et||$}var jt=dt.prototype=new lt;jt.constructor=dt,W(jt,ct.prototype),jt.isPureReactComponent=!0;var Wt=Array.isArray;function Mt(){}var w={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function R(M,K,et){var it=et.ref;return{$$typeof:r,type:M,key:K,ref:it!==void 0?it:null,props:et}}function V(M,K){return R(M.type,K,M.props)}function N(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function x(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(et){return K[et]})}var I=/\/+/g;function Yt(M,K){return typeof M=="object"&&M!==null&&M.key!=null?x(""+M.key):K.toString(36)}function ue(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Mt,Mt):(M.status="pending",M.then(function(K){M.status==="pending"&&(M.status="fulfilled",M.value=K)},function(K){M.status==="pending"&&(M.status="rejected",M.reason=K)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function q(M,K,et,it,yt){var St=typeof M;(St==="undefined"||St==="boolean")&&(M=null);var Ut=!1;if(M===null)Ut=!0;else switch(St){case"bigint":case"string":case"number":Ut=!0;break;case"object":switch(M.$$typeof){case r:case t:Ut=!0;break;case A:return Ut=M._init,q(Ut(M._payload),K,et,it,yt)}}if(Ut)return yt=yt(M),Ut=it===""?"."+Yt(M,0):it,Wt(yt)?(et="",Ut!=null&&(et=Ut.replace(I,"$&/")+"/"),q(yt,K,et,"",function(os){return os})):yt!=null&&(N(yt)&&(yt=V(yt,et+(yt.key==null||M&&M.key===yt.key?"":(""+yt.key).replace(I,"$&/")+"/")+Ut)),K.push(yt)),1;Ut=0;var Ne=it===""?".":it+":";if(Wt(M))for(var se=0;se<M.length;se++)it=M[se],St=Ne+Yt(it,se),Ut+=q(it,K,et,St,yt);else if(se=H(M),typeof se=="function")for(M=se.call(M),se=0;!(it=M.next()).done;)it=it.value,St=Ne+Yt(it,se++),Ut+=q(it,K,et,St,yt);else if(St==="object"){if(typeof M.then=="function")return q(ue(M),K,et,it,yt);throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Ut}function tt(M,K,et){if(M==null)return M;var it=[],yt=0;return q(M,it,"","",function(St){return K.call(et,St,yt++)}),it}function ut(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(et){(M._status===0||M._status===-1)&&(M._status=1,M._result=et)},function(et){(M._status===0||M._status===-1)&&(M._status=2,M._result=et)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var Vt=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ht={map:tt,forEach:function(M,K,et){tt(M,function(){K.apply(this,arguments)},et)},count:function(M){var K=0;return tt(M,function(){K++}),K},toArray:function(M){return tt(M,function(K){return K})||[]},only:function(M){if(!N(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return vt.Activity=S,vt.Children=Ht,vt.Component=ct,vt.Fragment=i,vt.Profiler=l,vt.PureComponent=dt,vt.StrictMode=s,vt.Suspense=y,vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,vt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return w.H.useMemoCache(M)}},vt.cache=function(M){return function(){return M.apply(null,arguments)}},vt.cacheSignal=function(){return null},vt.cloneElement=function(M,K,et){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var it=W({},M.props),yt=M.key;if(K!=null)for(St in K.key!==void 0&&(yt=""+K.key),K)!b.call(K,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&K.ref===void 0||(it[St]=K[St]);var St=arguments.length-2;if(St===1)it.children=et;else if(1<St){for(var Ut=Array(St),Ne=0;Ne<St;Ne++)Ut[Ne]=arguments[Ne+2];it.children=Ut}return R(M.type,yt,it)},vt.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},vt.createElement=function(M,K,et){var it,yt={},St=null;if(K!=null)for(it in K.key!==void 0&&(St=""+K.key),K)b.call(K,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(yt[it]=K[it]);var Ut=arguments.length-2;if(Ut===1)yt.children=et;else if(1<Ut){for(var Ne=Array(Ut),se=0;se<Ut;se++)Ne[se]=arguments[se+2];yt.children=Ne}if(M&&M.defaultProps)for(it in Ut=M.defaultProps,Ut)yt[it]===void 0&&(yt[it]=Ut[it]);return R(M,St,yt)},vt.createRef=function(){return{current:null}},vt.forwardRef=function(M){return{$$typeof:g,render:M}},vt.isValidElement=N,vt.lazy=function(M){return{$$typeof:A,_payload:{_status:-1,_result:M},_init:ut}},vt.memo=function(M,K){return{$$typeof:_,type:M,compare:K===void 0?null:K}},vt.startTransition=function(M){var K=w.T,et={};w.T=et;try{var it=M(),yt=w.S;yt!==null&&yt(et,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(Mt,Vt)}catch(St){Vt(St)}finally{K!==null&&et.types!==null&&(K.types=et.types),w.T=K}},vt.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},vt.use=function(M){return w.H.use(M)},vt.useActionState=function(M,K,et){return w.H.useActionState(M,K,et)},vt.useCallback=function(M,K){return w.H.useCallback(M,K)},vt.useContext=function(M){return w.H.useContext(M)},vt.useDebugValue=function(){},vt.useDeferredValue=function(M,K){return w.H.useDeferredValue(M,K)},vt.useEffect=function(M,K){return w.H.useEffect(M,K)},vt.useEffectEvent=function(M){return w.H.useEffectEvent(M)},vt.useId=function(){return w.H.useId()},vt.useImperativeHandle=function(M,K,et){return w.H.useImperativeHandle(M,K,et)},vt.useInsertionEffect=function(M,K){return w.H.useInsertionEffect(M,K)},vt.useLayoutEffect=function(M,K){return w.H.useLayoutEffect(M,K)},vt.useMemo=function(M,K){return w.H.useMemo(M,K)},vt.useOptimistic=function(M,K){return w.H.useOptimistic(M,K)},vt.useReducer=function(M,K,et){return w.H.useReducer(M,K,et)},vt.useRef=function(M){return w.H.useRef(M)},vt.useState=function(M){return w.H.useState(M)},vt.useSyncExternalStore=function(M,K,et){return w.H.useSyncExternalStore(M,K,et)},vt.useTransition=function(){return w.H.useTransition()},vt.version="19.2.0",vt}var Q_;function Im(){return Q_||(Q_=1,xd.exports=LS()),xd.exports}var zt=Im(),Ud={exports:{}},pl={},Ld={exports:{}},kd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function kS(){return K_||(K_=1,(function(r){function t(q,tt){var ut=q.length;q.push(tt);t:for(;0<ut;){var Vt=ut-1>>>1,Ht=q[Vt];if(0<l(Ht,tt))q[Vt]=tt,q[ut]=Ht,ut=Vt;else break t}}function i(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var tt=q[0],ut=q.pop();if(ut!==tt){q[0]=ut;t:for(var Vt=0,Ht=q.length,M=Ht>>>1;Vt<M;){var K=2*(Vt+1)-1,et=q[K],it=K+1,yt=q[it];if(0>l(et,ut))it<Ht&&0>l(yt,et)?(q[Vt]=yt,q[it]=ut,Vt=it):(q[Vt]=et,q[K]=ut,Vt=K);else if(it<Ht&&0>l(yt,ut))q[Vt]=yt,q[it]=ut,Vt=it;else break t}}return tt}function l(q,tt){var ut=q.sortIndex-tt.sortIndex;return ut!==0?ut:q.id-tt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var y=[],_=[],A=1,S=null,D=3,H=!1,$=!1,W=!1,Z=!1,ct=typeof setTimeout=="function"?setTimeout:null,lt=typeof clearTimeout=="function"?clearTimeout:null,dt=typeof setImmediate<"u"?setImmediate:null;function jt(q){for(var tt=i(_);tt!==null;){if(tt.callback===null)s(_);else if(tt.startTime<=q)s(_),tt.sortIndex=tt.expirationTime,t(y,tt);else break;tt=i(_)}}function Wt(q){if(W=!1,jt(q),!$)if(i(y)!==null)$=!0,Mt||(Mt=!0,x());else{var tt=i(_);tt!==null&&ue(Wt,tt.startTime-q)}}var Mt=!1,w=-1,b=5,R=-1;function V(){return Z?!0:!(r.unstable_now()-R<b)}function N(){if(Z=!1,Mt){var q=r.unstable_now();R=q;var tt=!0;try{t:{$=!1,W&&(W=!1,lt(w),w=-1),H=!0;var ut=D;try{e:{for(jt(q),S=i(y);S!==null&&!(S.expirationTime>q&&V());){var Vt=S.callback;if(typeof Vt=="function"){S.callback=null,D=S.priorityLevel;var Ht=Vt(S.expirationTime<=q);if(q=r.unstable_now(),typeof Ht=="function"){S.callback=Ht,jt(q),tt=!0;break e}S===i(y)&&s(y),jt(q)}else s(y);S=i(y)}if(S!==null)tt=!0;else{var M=i(_);M!==null&&ue(Wt,M.startTime-q),tt=!1}}break t}finally{S=null,D=ut,H=!1}tt=void 0}}finally{tt?x():Mt=!1}}}var x;if(typeof dt=="function")x=function(){dt(N)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Yt=I.port2;I.port1.onmessage=N,x=function(){Yt.postMessage(null)}}else x=function(){ct(N,0)};function ue(q,tt){w=ct(function(){q(r.unstable_now())},tt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(q){switch(D){case 1:case 2:case 3:var tt=3;break;default:tt=D}var ut=D;D=tt;try{return q()}finally{D=ut}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(q,tt){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ut=D;D=q;try{return tt()}finally{D=ut}},r.unstable_scheduleCallback=function(q,tt,ut){var Vt=r.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?Vt+ut:Vt):ut=Vt,q){case 1:var Ht=-1;break;case 2:Ht=250;break;case 5:Ht=1073741823;break;case 4:Ht=1e4;break;default:Ht=5e3}return Ht=ut+Ht,q={id:A++,callback:tt,priorityLevel:q,startTime:ut,expirationTime:Ht,sortIndex:-1},ut>Vt?(q.sortIndex=ut,t(_,q),i(y)===null&&q===i(_)&&(W?(lt(w),w=-1):W=!0,ue(Wt,ut-Vt))):(q.sortIndex=Ht,t(y,q),$||H||($=!0,Mt||(Mt=!0,x()))),q},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(q){var tt=D;return function(){var ut=D;D=tt;try{return q.apply(this,arguments)}finally{D=ut}}}})(kd)),kd}var Y_;function PS(){return Y_||(Y_=1,Ld.exports=kS()),Ld.exports}var Pd={exports:{}},Ye={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function zS(){if(X_)return Ye;X_=1;var r=Im();function t(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)_+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(y,_,A){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:y,containerInfo:_,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Ye.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ye.createPortal=function(y,_){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return c(y,_,null,A)},Ye.flushSync=function(y){var _=d.T,A=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=_,s.p=A,s.d.f()}},Ye.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(y,_))},Ye.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Ye.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var A=_.as,S=g(A,_.crossOrigin),D=typeof _.integrity=="string"?_.integrity:void 0,H=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;A==="style"?s.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:S,integrity:D,fetchPriority:H}):A==="script"&&s.d.X(y,{crossOrigin:S,integrity:D,fetchPriority:H,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Ye.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var A=g(_.as,_.crossOrigin);s.d.M(y,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(y)},Ye.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var A=_.as,S=g(A,_.crossOrigin);s.d.L(y,A,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Ye.preloadModule=function(y,_){if(typeof y=="string")if(_){var A=g(_.as,_.crossOrigin);s.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(y)},Ye.requestFormReset=function(y){s.d.r(y)},Ye.unstable_batchedUpdates=function(y,_){return y(_)},Ye.useFormState=function(y,_,A){return d.H.useFormState(y,_,A)},Ye.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ye.version="19.2.0",Ye}var $_;function BS(){if($_)return Pd.exports;$_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Pd.exports=zS(),Pd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function qS(){if(Z_)return pl;Z_=1;var r=PS(),t=Im(),i=BS();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function y(e){if(c(e)!==e)throw Error(s(188))}function _(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,o=n;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return y(h),e;if(f===o)return y(h),n;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var p=!1,E=h.child;E;){if(E===a){p=!0,a=h,o=f;break}if(E===o){p=!0,o=h,a=f;break}E=E.sibling}if(!p){for(E=f.child;E;){if(E===a){p=!0,a=f,o=h;break}if(E===o){p=!0,o=f,a=h;break}E=E.sibling}if(!p)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function A(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=A(e),n!==null)return n;e=e.sibling}return null}var S=Object.assign,D=Symbol.for("react.element"),H=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),ct=Symbol.for("react.profiler"),lt=Symbol.for("react.consumer"),dt=Symbol.for("react.context"),jt=Symbol.for("react.forward_ref"),Wt=Symbol.for("react.suspense"),Mt=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function x(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function Yt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case ct:return"Profiler";case Z:return"StrictMode";case Wt:return"Suspense";case Mt:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case $:return"Portal";case dt:return e.displayName||"Context";case lt:return(e._context.displayName||"Context")+".Consumer";case jt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case w:return n=e.displayName||null,n!==null?n:Yt(e.type)||"Memo";case b:n=e._payload,e=e._init;try{return Yt(e(n))}catch{}}return null}var ue=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},Vt=[],Ht=-1;function M(e){return{current:e}}function K(e){0>Ht||(e.current=Vt[Ht],Vt[Ht]=null,Ht--)}function et(e,n){Ht++,Vt[Ht]=e.current,e.current=n}var it=M(null),yt=M(null),St=M(null),Ut=M(null);function Ne(e,n){switch(et(St,n),et(yt,e),et(it,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?f_(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=f_(n),e=d_(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}K(it),et(it,e)}function se(){K(it),K(yt),K(St)}function os(e){e.memoizedState!==null&&et(Ut,e);var n=it.current,a=d_(n,e.type);n!==a&&(et(yt,e),et(it,a))}function $s(e){yt.current===e&&(K(it),K(yt)),Ut.current===e&&(K(Ut),hl._currentValue=ut)}var Zs,Js;function ti(e){if(Zs===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Zs=n&&n[1]||"",Js=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zs+e+Js}var co=!1;function ls(e,n){if(!e||co)return"";co=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(j){var z=j}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(j){z=j}e.call(Y.prototype)}}else{try{throw Error()}catch(j){z=j}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(j){if(j&&z&&typeof j.stack=="string")return[j.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),p=f[0],E=f[1];if(p&&E){var C=p.split(`
`),P=E.split(`
`);for(h=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;if(o===C.length||h===P.length)for(o=C.length-1,h=P.length-1;1<=o&&0<=h&&C[o]!==P[h];)h--;for(;1<=o&&0<=h;o--,h--)if(C[o]!==P[h]){if(o!==1||h!==1)do if(o--,h--,0>h||C[o]!==P[h]){var G=`
`+C[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=h);break}}}finally{co=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ti(a):""}function ho(e,n){switch(e.tag){case 26:case 27:case 5:return ti(e.type);case 16:return ti("Lazy");case 13:return e.child!==n&&n!==null?ti("Suspense Fallback"):ti("Suspense");case 19:return ti("SuspenseList");case 0:case 15:return ls(e.type,!1);case 11:return ls(e.type.render,!1);case 1:return ls(e.type,!0);case 31:return ti("Activity");default:return""}}function fo(e){try{var n="",a=null;do n+=ho(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var _e=Object.prototype.hasOwnProperty,Oe=r.unstable_scheduleCallback,sr=r.unstable_cancelCallback,xh=r.unstable_shouldYield,$l=r.unstable_requestPaint,We=r.unstable_now,us=r.unstable_getCurrentPriorityLevel,mo=r.unstable_ImmediatePriority,go=r.unstable_UserBlockingPriority,ar=r.unstable_NormalPriority,Uh=r.unstable_LowPriority,Zl=r.unstable_IdlePriority,Jl=r.log,Wl=r.unstable_setDisableYieldValue,Pn=null,ze=null;function bn(e){if(typeof Jl=="function"&&Wl(e),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(Pn,e)}catch{}}var de=Math.clz32?Math.clz32:eu,tu=Math.log,Ws=Math.LN2;function eu(e){return e>>>=0,e===0?32:31-(tu(e)/Ws|0)|0}var ei=256,cs=262144,ve=4194304;function ni(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ii(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var h=0,f=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=ni(o):(p&=E,p!==0?h=ni(p):a||(a=E&~e,a!==0&&(h=ni(a))))):(E=o&~f,E!==0?h=ni(E):p!==0?h=ni(p):a||(a=o&~e,a!==0&&(h=ni(a)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:h}function zn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Lh(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nu(){var e=ve;return ve<<=1,(ve&62914560)===0&&(ve=4194304),e}function ri(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function hs(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function kh(e,n,a,o,h,f){var p=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,C=e.expirationTimes,P=e.hiddenUpdates;for(a=p&~a;0<a;){var G=31-de(a),Y=1<<G;E[G]=0,C[G]=-1;var z=P[G];if(z!==null)for(P[G]=null,G=0;G<z.length;G++){var j=z[G];j!==null&&(j.lane&=-536870913)}a&=~Y}o!==0&&fs(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(p&~n))}function fs(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-de(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function po(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-de(a),h=1<<o;h&n|e[o]&n&&(e[o]|=n),a&=~h}}function yo(e,n){var a=n&-n;return a=(a&42)!==0?1:ds(a),(a&(e.suspendedLanes|n))!==0?0:a}function ds(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ni(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function iu(){var e=tt.p;return e!==0?e:(e=window.event,e===void 0?32:L_(e.type))}function Bn(e,n){var a=tt.p;try{return tt.p=e,n()}finally{tt.p=a}}var qn=Math.random().toString(36).slice(2),Ee="__reactFiber$"+qn,xe="__reactProps$"+qn,si="__reactContainer$"+qn,ta="__reactEvents$"+qn,Ph="__reactListeners$"+qn,ru="__reactHandles$"+qn,su="__reactResources$"+qn,ai="__reactMarker$"+qn;function ea(e){delete e[Ee],delete e[xe],delete e[ta],delete e[Ph],delete e[ru]}function oi(e){var n=e[Ee];if(n)return n;for(var a=e.parentNode;a;){if(n=a[si]||a[Ee]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=E_(e);e!==null;){if(a=e[Ee])return a;e=E_(e)}return n}e=a,a=e.parentNode}return null}function wn(e){if(e=e[Ee]||e[si]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function fn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function li(e){var n=e[su];return n||(n=e[su]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Te(e){e[ai]=!0}var _o=new Set,vo={};function ui(e,n){ci(e,n),ci(e+"Capture",n)}function ci(e,n){for(vo[e]=n,e=0;e<n.length;e++)_o.add(n[e])}var Eo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),To={},Ao={};function au(e){return _e.call(Ao,e)?!0:_e.call(To,e)?!1:Eo.test(e)?Ao[e]=!0:(To[e]=!0,!1)}function na(e,n,a){if(au(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function dn(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Ae(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function Ue(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function or(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function So(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return h.call(this)},set:function(p){a=""+p,f.call(this,p)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ft(e){if(!e._valueTracker){var n=or(e)?"checked":"value";e._valueTracker=So(e,n,""+e[n])}}function ms(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=or(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function hi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var gs=/[\n"\\]/g;function nn(e){return e.replace(gs,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function ia(e,n,a,o,h,f,p,E){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),n!=null?p==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ue(n)):e.value!==""+Ue(n)&&(e.value=""+Ue(n)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),n!=null?bo(e,p,Ue(n)):a!=null?bo(e,p,Ue(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+Ue(E):e.removeAttribute("name")}function ou(e,n,a,o,h,f,p,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){Ft(e);return}a=a!=null?""+Ue(a):"",n=n!=null?""+Ue(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),Ft(e)}function bo(e,n,a){n==="number"&&hi(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function lr(e,n,a,o){if(e=e.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=n.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Ue(a),n=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}n!==null||e[h].disabled||(n=e[h])}n!==null&&(n.selected=!0)}}function lu(e,n,a){if(n!=null&&(n=""+Ue(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Ue(a):""}function ur(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(s(92));if(ue(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Ue(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Ft(e)}function rn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var uu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wo(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||uu.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Ro(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&wo(e,h,o)}else for(var f in n)n.hasOwnProperty(f)&&wo(e,f,n[f])}function ra(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sa(e){return cr.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function jn(){}var Io=null;function Rn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hr=null,fi=null;function ps(e){var n=wn(e);if(n&&(e=n.stateNode)){var a=e[xe]||null;t:switch(e=n.stateNode,n.type){case"input":if(ia(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+nn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var h=o[xe]||null;if(!h)throw Error(s(90));ia(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&ms(o)}break t;case"textarea":lu(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&lr(e,!!a.multiple,n,!1)}}}var aa=!1;function fr(e,n,a){if(aa)return e(n,a);aa=!0;try{var o=e(n);return o}finally{if(aa=!1,(hr!==null||fi!==null)&&(ic(),hr&&(n=hr,e=fi,fi=hr=null,ps(n),e)))for(n=0;n<e.length;n++)ps(e[n])}}function Hn(e,n){var a=e.stateNode;if(a===null)return null;var o=a[xe]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ys=!1;if(In)try{var Xt={};Object.defineProperty(Xt,"passive",{get:function(){ys=!0}}),window.addEventListener("test",Xt,Xt),window.removeEventListener("test",Xt,Xt)}catch{ys=!1}var di=null,Co=null,_s=null;function Do(){if(_s)return _s;var e,n=Co,a=n.length,o,h="value"in di?di.value:di.textContent,f=h.length;for(e=0;e<a&&n[e]===h[e];e++);var p=a-e;for(o=1;o<=p&&n[a-o]===h[f-o];o++);return _s=h.slice(e,1<o?1-o:void 0)}function vs(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Oi(){return!0}function Gn(){return!1}function Be(e){function n(a,o,h,f,p){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=p,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Oi:Gn,this.isPropagationStopped=Gn,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),n}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=Be(Mi),dr=S({},Mi,{view:0,detail:0}),No=Be(dr),mr,oa,gi,la=S({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gi&&(gi&&e.type==="mousemove"?(mr=e.screenX-gi.screenX,oa=e.screenY-gi.screenY):oa=mr=0,gi=e),mr)},movementY:function(e){return"movementY"in e?e.movementY:oa}}),Oo=Be(la),Es=S({},la,{dataTransfer:0}),hu=Be(Es),fu=S({},dr,{relatedTarget:0}),Ts=Be(fu),Mo=S({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),du=Be(Mo),ua=S({},Mi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mu=Be(ua),gu=S({},Mi,{data:0}),pi=Be(gu),pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=_u[e])?!!n[e]:!1}function gr(){return vu}var tn=S({},dr,{key:function(e){if(e.key){var n=pu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gr,charCode:function(e){return e.type==="keypress"?vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Eu=Be(tn),Tu=S({},la,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vi=Be(Tu),u=S({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gr}),m=Be(u),v=S({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=Be(v),L=S({},la,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),B=Be(L),J=S({},Mi,{newState:0,oldState:0}),Tt=Be(J),me=[9,13,27,32],Bt=In&&"CompositionEvent"in window,ae=null;In&&"documentMode"in document&&(ae=document.documentMode);var Cn=In&&"TextEvent"in window&&!ae,yi=In&&(!Bt||ae&&8<ae&&11>=ae),Fn=" ",Qn=!1;function As(e,n){switch(e){case"keyup":return me.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ca(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ha=!1;function rA(e,n){switch(e){case"compositionend":return ca(n);case"keypress":return n.which!==32?null:(Qn=!0,Fn);case"textInput":return e=n.data,e===Fn&&Qn?null:e;default:return null}}function sA(e,n){if(ha)return e==="compositionend"||!Bt&&As(e,n)?(e=Do(),_s=Co=di=null,ha=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return yi&&n.locale!=="ko"?null:n.data;default:return null}}var aA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sg(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!aA[e.type]:n==="textarea"}function bg(e,n,a,o){hr?fi?fi.push(o):fi=[o]:hr=o,n=cc(n,"onChange"),0<n.length&&(a=new mi("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Vo=null,xo=null;function oA(e){a_(e,0)}function Au(e){var n=fn(e);if(ms(n))return e}function wg(e,n){if(e==="change")return n}var Rg=!1;if(In){var zh;if(In){var Bh="oninput"in document;if(!Bh){var Ig=document.createElement("div");Ig.setAttribute("oninput","return;"),Bh=typeof Ig.oninput=="function"}zh=Bh}else zh=!1;Rg=zh&&(!document.documentMode||9<document.documentMode)}function Cg(){Vo&&(Vo.detachEvent("onpropertychange",Dg),xo=Vo=null)}function Dg(e){if(e.propertyName==="value"&&Au(xo)){var n=[];bg(n,xo,e,Rn(e)),fr(oA,n)}}function lA(e,n,a){e==="focusin"?(Cg(),Vo=n,xo=a,Vo.attachEvent("onpropertychange",Dg)):e==="focusout"&&Cg()}function uA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Au(xo)}function cA(e,n){if(e==="click")return Au(n)}function hA(e,n){if(e==="input"||e==="change")return Au(n)}function fA(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var mn=typeof Object.is=="function"?Object.is:fA;function Uo(e,n){if(mn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!_e.call(n,h)||!mn(e[h],n[h]))return!1}return!0}function Ng(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Og(e,n){var a=Ng(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ng(a)}}function Mg(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Mg(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Vg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=hi(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=hi(e.document)}return n}function qh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var dA=In&&"documentMode"in document&&11>=document.documentMode,fa=null,jh=null,Lo=null,Hh=!1;function xg(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hh||fa==null||fa!==hi(o)||(o=fa,"selectionStart"in o&&qh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Lo&&Uo(Lo,o)||(Lo=o,o=cc(jh,"onSelect"),0<o.length&&(n=new mi("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=fa)))}function Ss(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var da={animationend:Ss("Animation","AnimationEnd"),animationiteration:Ss("Animation","AnimationIteration"),animationstart:Ss("Animation","AnimationStart"),transitionrun:Ss("Transition","TransitionRun"),transitionstart:Ss("Transition","TransitionStart"),transitioncancel:Ss("Transition","TransitionCancel"),transitionend:Ss("Transition","TransitionEnd")},Gh={},Ug={};In&&(Ug=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function bs(e){if(Gh[e])return Gh[e];if(!da[e])return e;var n=da[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Ug)return Gh[e]=n[a];return e}var Lg=bs("animationend"),kg=bs("animationiteration"),Pg=bs("animationstart"),mA=bs("transitionrun"),gA=bs("transitionstart"),pA=bs("transitioncancel"),zg=bs("transitionend"),Bg=new Map,Fh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fh.push("scrollEnd");function Kn(e,n){Bg.set(e,n),ui(n,[e])}var Su=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Dn=[],ma=0,Qh=0;function bu(){for(var e=ma,n=Qh=ma=0;n<e;){var a=Dn[n];Dn[n++]=null;var o=Dn[n];Dn[n++]=null;var h=Dn[n];Dn[n++]=null;var f=Dn[n];if(Dn[n++]=null,o!==null&&h!==null){var p=o.pending;p===null?h.next=h:(h.next=p.next,p.next=h),o.pending=h}f!==0&&qg(a,h,f)}}function wu(e,n,a,o){Dn[ma++]=e,Dn[ma++]=n,Dn[ma++]=a,Dn[ma++]=o,Qh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Kh(e,n,a,o){return wu(e,n,a,o),Ru(e)}function ws(e,n){return wu(e,null,null,n),Ru(e)}function qg(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,h&&n!==null&&(h=31-de(a),e=f.hiddenUpdates,o=e[h],o===null?e[h]=[n]:o.push(n),n.lane=a|536870912),f):null}function Ru(e){if(50<rl)throw rl=0,id=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ga={};function yA(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(e,n,a,o){return new yA(e,n,a,o)}function Yh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xi(e,n){var a=e.alternate;return a===null?(a=gn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function jg(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Iu(e,n,a,o,h,f){var p=0;if(o=e,typeof e=="function")Yh(e)&&(p=1);else if(typeof e=="string")p=AS(e,a,it.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case R:return e=gn(31,a,n,h),e.elementType=R,e.lanes=f,e;case W:return Rs(a.children,h,f,n);case Z:p=8,h|=24;break;case ct:return e=gn(12,a,n,h|2),e.elementType=ct,e.lanes=f,e;case Wt:return e=gn(13,a,n,h),e.elementType=Wt,e.lanes=f,e;case Mt:return e=gn(19,a,n,h),e.elementType=Mt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dt:p=10;break t;case lt:p=9;break t;case jt:p=11;break t;case w:p=14;break t;case b:p=16,o=null;break t}p=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=gn(p,a,n,h),n.elementType=e,n.type=o,n.lanes=f,n}function Rs(e,n,a,o){return e=gn(7,e,o,n),e.lanes=a,e}function Xh(e,n,a){return e=gn(6,e,null,n),e.lanes=a,e}function Hg(e){var n=gn(18,null,null,0);return n.stateNode=e,n}function $h(e,n,a){return n=gn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Gg=new WeakMap;function Nn(e,n){if(typeof e=="object"&&e!==null){var a=Gg.get(e);return a!==void 0?a:(n={value:e,source:n,stack:fo(n)},Gg.set(e,n),n)}return{value:e,source:n,stack:fo(n)}}var pa=[],ya=0,Cu=null,ko=0,On=[],Mn=0,pr=null,_i=1,vi="";function Ui(e,n){pa[ya++]=ko,pa[ya++]=Cu,Cu=e,ko=n}function Fg(e,n,a){On[Mn++]=_i,On[Mn++]=vi,On[Mn++]=pr,pr=e;var o=_i;e=vi;var h=32-de(o)-1;o&=~(1<<h),a+=1;var f=32-de(n)+h;if(30<f){var p=h-h%5;f=(o&(1<<p)-1).toString(32),o>>=p,h-=p,_i=1<<32-de(n)+h|a<<h|o,vi=f+e}else _i=1<<f|a<<h|o,vi=e}function Zh(e){e.return!==null&&(Ui(e,1),Fg(e,1,0))}function Jh(e){for(;e===Cu;)Cu=pa[--ya],pa[ya]=null,ko=pa[--ya],pa[ya]=null;for(;e===pr;)pr=On[--Mn],On[Mn]=null,vi=On[--Mn],On[Mn]=null,_i=On[--Mn],On[Mn]=null}function Qg(e,n){On[Mn++]=_i,On[Mn++]=vi,On[Mn++]=pr,_i=n.id,vi=n.overflow,pr=e}var qe=null,ie=null,xt=!1,yr=null,Vn=!1,Wh=Error(s(519));function _r(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Po(Nn(n,e)),Wh}function Kg(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Ee]=e,n[xe]=o,a){case"dialog":Rt("cancel",n),Rt("close",n);break;case"iframe":case"object":case"embed":Rt("load",n);break;case"video":case"audio":for(a=0;a<al.length;a++)Rt(al[a],n);break;case"source":Rt("error",n);break;case"img":case"image":case"link":Rt("error",n),Rt("load",n);break;case"details":Rt("toggle",n);break;case"input":Rt("invalid",n),ou(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Rt("invalid",n);break;case"textarea":Rt("invalid",n),ur(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||c_(n.textContent,a)?(o.popover!=null&&(Rt("beforetoggle",n),Rt("toggle",n)),o.onScroll!=null&&Rt("scroll",n),o.onScrollEnd!=null&&Rt("scrollend",n),o.onClick!=null&&(n.onclick=jn),n=!0):n=!1,n||_r(e,!0)}function Yg(e){for(qe=e.return;qe;)switch(qe.tag){case 5:case 31:case 13:Vn=!1;return;case 27:case 3:Vn=!0;return;default:qe=qe.return}}function _a(e){if(e!==qe)return!1;if(!xt)return Yg(e),xt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||_d(e.type,e.memoizedProps)),a=!a),a&&ie&&_r(e),Yg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));ie=v_(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));ie=v_(e)}else n===27?(n=ie,Mr(e.type)?(e=Sd,Sd=null,ie=e):ie=n):ie=qe?Un(e.stateNode.nextSibling):null;return!0}function Is(){ie=qe=null,xt=!1}function tf(){var e=yr;return e!==null&&(ln===null?ln=e:ln.push.apply(ln,e),yr=null),e}function Po(e){yr===null?yr=[e]:yr.push(e)}var ef=M(null),Cs=null,Li=null;function vr(e,n,a){et(ef,n._currentValue),n._currentValue=a}function ki(e){e._currentValue=ef.current,K(ef)}function nf(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function rf(e,n,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var p=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var C=0;C<n.length;C++)if(E.context===n[C]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),nf(f.return,a,e),o||(p=null);break t}f=E.next}}else if(h.tag===18){if(p=h.return,p===null)throw Error(s(341));p.lanes|=a,f=p.alternate,f!==null&&(f.lanes|=a),nf(p,a,e),p=null}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===e){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}}function va(e,n,a,o){e=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var p=h.alternate;if(p===null)throw Error(s(387));if(p=p.memoizedProps,p!==null){var E=h.type;mn(h.pendingProps.value,p.value)||(e!==null?e.push(E):e=[E])}}else if(h===Ut.current){if(p=h.alternate,p===null)throw Error(s(387));p.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(hl):e=[hl])}h=h.return}e!==null&&rf(n,e,a,o),n.flags|=262144}function Du(e){for(e=e.firstContext;e!==null;){if(!mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ds(e){Cs=e,Li=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function je(e){return Xg(Cs,e)}function Nu(e,n){return Cs===null&&Ds(e),Xg(e,n)}function Xg(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Li===null){if(e===null)throw Error(s(308));Li=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Li=Li.next=n;return a}var _A=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},vA=r.unstable_scheduleCallback,EA=r.unstable_NormalPriority,Se={$$typeof:dt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sf(){return{controller:new _A,data:new Map,refCount:0}}function zo(e){e.refCount--,e.refCount===0&&vA(EA,function(){e.controller.abort()})}var Bo=null,af=0,Ea=0,Ta=null;function TA(e,n){if(Bo===null){var a=Bo=[];af=0,Ea=ud(),Ta={status:"pending",value:void 0,then:function(o){a.push(o)}}}return af++,n.then($g,$g),n}function $g(){if(--af===0&&Bo!==null){Ta!==null&&(Ta.status="fulfilled");var e=Bo;Bo=null,Ea=0,Ta=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function AA(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Zg=q.S;q.S=function(e,n){xy=We(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&TA(e,n),Zg!==null&&Zg(e,n)};var Ns=M(null);function of(){var e=Ns.current;return e!==null?e:te.pooledCache}function Ou(e,n){n===null?et(Ns,Ns.current):et(Ns,n.pool)}function Jg(){var e=of();return e===null?null:{parent:Se._currentValue,pool:e}}var Aa=Error(s(460)),lf=Error(s(474)),Mu=Error(s(542)),Vu={then:function(){}};function Wg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function tp(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(jn,jn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,np(e),e;default:if(typeof n.status=="string")n.then(jn,jn);else{if(e=te,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,np(e),e}throw Ms=n,Aa}}function Os(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ms=a,Aa):a}}var Ms=null;function ep(){if(Ms===null)throw Error(s(459));var e=Ms;return Ms=null,e}function np(e){if(e===Aa||e===Mu)throw Error(s(483))}var Sa=null,qo=0;function xu(e){var n=qo;return qo+=1,Sa===null&&(Sa=[]),tp(Sa,e,n)}function jo(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Uu(e,n){throw n.$$typeof===D?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function ip(e){function n(U,O){if(e){var k=U.deletions;k===null?(U.deletions=[O],U.flags|=16):k.push(O)}}function a(U,O){if(!e)return null;for(;O!==null;)n(U,O),O=O.sibling;return null}function o(U){for(var O=new Map;U!==null;)U.key!==null?O.set(U.key,U):O.set(U.index,U),U=U.sibling;return O}function h(U,O){return U=xi(U,O),U.index=0,U.sibling=null,U}function f(U,O,k){return U.index=k,e?(k=U.alternate,k!==null?(k=k.index,k<O?(U.flags|=67108866,O):k):(U.flags|=67108866,O)):(U.flags|=1048576,O)}function p(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function E(U,O,k,F){return O===null||O.tag!==6?(O=Xh(k,U.mode,F),O.return=U,O):(O=h(O,k),O.return=U,O)}function C(U,O,k,F){var ht=k.type;return ht===W?G(U,O,k.props.children,F,k.key):O!==null&&(O.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===b&&Os(ht)===O.type)?(O=h(O,k.props),jo(O,k),O.return=U,O):(O=Iu(k.type,k.key,k.props,null,U.mode,F),jo(O,k),O.return=U,O)}function P(U,O,k,F){return O===null||O.tag!==4||O.stateNode.containerInfo!==k.containerInfo||O.stateNode.implementation!==k.implementation?(O=$h(k,U.mode,F),O.return=U,O):(O=h(O,k.children||[]),O.return=U,O)}function G(U,O,k,F,ht){return O===null||O.tag!==7?(O=Rs(k,U.mode,F,ht),O.return=U,O):(O=h(O,k),O.return=U,O)}function Y(U,O,k){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Xh(""+O,U.mode,k),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case H:return k=Iu(O.type,O.key,O.props,null,U.mode,k),jo(k,O),k.return=U,k;case $:return O=$h(O,U.mode,k),O.return=U,O;case b:return O=Os(O),Y(U,O,k)}if(ue(O)||x(O))return O=Rs(O,U.mode,k,null),O.return=U,O;if(typeof O.then=="function")return Y(U,xu(O),k);if(O.$$typeof===dt)return Y(U,Nu(U,O),k);Uu(U,O)}return null}function z(U,O,k,F){var ht=O!==null?O.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ht!==null?null:E(U,O,""+k,F);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case H:return k.key===ht?C(U,O,k,F):null;case $:return k.key===ht?P(U,O,k,F):null;case b:return k=Os(k),z(U,O,k,F)}if(ue(k)||x(k))return ht!==null?null:G(U,O,k,F,null);if(typeof k.then=="function")return z(U,O,xu(k),F);if(k.$$typeof===dt)return z(U,O,Nu(U,k),F);Uu(U,k)}return null}function j(U,O,k,F,ht){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return U=U.get(k)||null,E(O,U,""+F,ht);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case H:return U=U.get(F.key===null?k:F.key)||null,C(O,U,F,ht);case $:return U=U.get(F.key===null?k:F.key)||null,P(O,U,F,ht);case b:return F=Os(F),j(U,O,k,F,ht)}if(ue(F)||x(F))return U=U.get(k)||null,G(O,U,F,ht,null);if(typeof F.then=="function")return j(U,O,k,xu(F),ht);if(F.$$typeof===dt)return j(U,O,k,Nu(O,F),ht);Uu(O,F)}return null}function at(U,O,k,F){for(var ht=null,kt=null,ot=O,bt=O=0,Ct=null;ot!==null&&bt<k.length;bt++){ot.index>bt?(Ct=ot,ot=null):Ct=ot.sibling;var Pt=z(U,ot,k[bt],F);if(Pt===null){ot===null&&(ot=Ct);break}e&&ot&&Pt.alternate===null&&n(U,ot),O=f(Pt,O,bt),kt===null?ht=Pt:kt.sibling=Pt,kt=Pt,ot=Ct}if(bt===k.length)return a(U,ot),xt&&Ui(U,bt),ht;if(ot===null){for(;bt<k.length;bt++)ot=Y(U,k[bt],F),ot!==null&&(O=f(ot,O,bt),kt===null?ht=ot:kt.sibling=ot,kt=ot);return xt&&Ui(U,bt),ht}for(ot=o(ot);bt<k.length;bt++)Ct=j(ot,U,bt,k[bt],F),Ct!==null&&(e&&Ct.alternate!==null&&ot.delete(Ct.key===null?bt:Ct.key),O=f(Ct,O,bt),kt===null?ht=Ct:kt.sibling=Ct,kt=Ct);return e&&ot.forEach(function(kr){return n(U,kr)}),xt&&Ui(U,bt),ht}function mt(U,O,k,F){if(k==null)throw Error(s(151));for(var ht=null,kt=null,ot=O,bt=O=0,Ct=null,Pt=k.next();ot!==null&&!Pt.done;bt++,Pt=k.next()){ot.index>bt?(Ct=ot,ot=null):Ct=ot.sibling;var kr=z(U,ot,Pt.value,F);if(kr===null){ot===null&&(ot=Ct);break}e&&ot&&kr.alternate===null&&n(U,ot),O=f(kr,O,bt),kt===null?ht=kr:kt.sibling=kr,kt=kr,ot=Ct}if(Pt.done)return a(U,ot),xt&&Ui(U,bt),ht;if(ot===null){for(;!Pt.done;bt++,Pt=k.next())Pt=Y(U,Pt.value,F),Pt!==null&&(O=f(Pt,O,bt),kt===null?ht=Pt:kt.sibling=Pt,kt=Pt);return xt&&Ui(U,bt),ht}for(ot=o(ot);!Pt.done;bt++,Pt=k.next())Pt=j(ot,U,bt,Pt.value,F),Pt!==null&&(e&&Pt.alternate!==null&&ot.delete(Pt.key===null?bt:Pt.key),O=f(Pt,O,bt),kt===null?ht=Pt:kt.sibling=Pt,kt=Pt);return e&&ot.forEach(function(VS){return n(U,VS)}),xt&&Ui(U,bt),ht}function Jt(U,O,k,F){if(typeof k=="object"&&k!==null&&k.type===W&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case H:t:{for(var ht=k.key;O!==null;){if(O.key===ht){if(ht=k.type,ht===W){if(O.tag===7){a(U,O.sibling),F=h(O,k.props.children),F.return=U,U=F;break t}}else if(O.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===b&&Os(ht)===O.type){a(U,O.sibling),F=h(O,k.props),jo(F,k),F.return=U,U=F;break t}a(U,O);break}else n(U,O);O=O.sibling}k.type===W?(F=Rs(k.props.children,U.mode,F,k.key),F.return=U,U=F):(F=Iu(k.type,k.key,k.props,null,U.mode,F),jo(F,k),F.return=U,U=F)}return p(U);case $:t:{for(ht=k.key;O!==null;){if(O.key===ht)if(O.tag===4&&O.stateNode.containerInfo===k.containerInfo&&O.stateNode.implementation===k.implementation){a(U,O.sibling),F=h(O,k.children||[]),F.return=U,U=F;break t}else{a(U,O);break}else n(U,O);O=O.sibling}F=$h(k,U.mode,F),F.return=U,U=F}return p(U);case b:return k=Os(k),Jt(U,O,k,F)}if(ue(k))return at(U,O,k,F);if(x(k)){if(ht=x(k),typeof ht!="function")throw Error(s(150));return k=ht.call(k),mt(U,O,k,F)}if(typeof k.then=="function")return Jt(U,O,xu(k),F);if(k.$$typeof===dt)return Jt(U,O,Nu(U,k),F);Uu(U,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,O!==null&&O.tag===6?(a(U,O.sibling),F=h(O,k),F.return=U,U=F):(a(U,O),F=Xh(k,U.mode,F),F.return=U,U=F),p(U)):a(U,O)}return function(U,O,k,F){try{qo=0;var ht=Jt(U,O,k,F);return Sa=null,ht}catch(ot){if(ot===Aa||ot===Mu)throw ot;var kt=gn(29,ot,null,U.mode);return kt.lanes=F,kt.return=U,kt}finally{}}}var Vs=ip(!0),rp=ip(!1),Er=!1;function uf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Tr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(qt&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=Ru(e),qg(e,null,a),n}return wu(e,o,n,a),Ru(e)}function Ho(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,po(e,a)}}function hf(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=p:f=f.next=p,a=a.next}while(a!==null);f===null?h=f=n:f=f.next=n}else h=f=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var ff=!1;function Go(){if(ff){var e=Ta;if(e!==null)throw e}}function Fo(e,n,a,o){ff=!1;var h=e.updateQueue;Er=!1;var f=h.firstBaseUpdate,p=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var C=E,P=C.next;C.next=null,p===null?f=P:p.next=P,p=C;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==p&&(E===null?G.firstBaseUpdate=P:E.next=P,G.lastBaseUpdate=C))}if(f!==null){var Y=h.baseState;p=0,G=P=C=null,E=f;do{var z=E.lane&-536870913,j=z!==E.lane;if(j?(It&z)===z:(o&z)===z){z!==0&&z===Ea&&(ff=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var at=e,mt=E;z=n;var Jt=a;switch(mt.tag){case 1:if(at=mt.payload,typeof at=="function"){Y=at.call(Jt,Y,z);break t}Y=at;break t;case 3:at.flags=at.flags&-65537|128;case 0:if(at=mt.payload,z=typeof at=="function"?at.call(Jt,Y,z):at,z==null)break t;Y=S({},Y,z);break t;case 2:Er=!0}}z=E.callback,z!==null&&(e.flags|=64,j&&(e.flags|=8192),j=h.callbacks,j===null?h.callbacks=[z]:j.push(z))}else j={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(P=G=j,C=Y):G=G.next=j,p|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;j=E,E=j.next,j.next=null,h.lastBaseUpdate=j,h.shared.pending=null}}while(!0);G===null&&(C=Y),h.baseState=C,h.firstBaseUpdate=P,h.lastBaseUpdate=G,f===null&&(h.shared.lanes=0),Ir|=p,e.lanes=p,e.memoizedState=Y}}function sp(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function ap(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)sp(a[e],n)}var ba=M(null),Lu=M(0);function op(e,n){e=Qi,et(Lu,e),et(ba,n),Qi=e|n.baseLanes}function df(){et(Lu,Qi),et(ba,ba.current)}function mf(){Qi=Lu.current,K(ba),K(Lu)}var pn=M(null),xn=null;function Sr(e){var n=e.alternate;et(ge,ge.current&1),et(pn,e),xn===null&&(n===null||ba.current!==null||n.memoizedState!==null)&&(xn=e)}function gf(e){et(ge,ge.current),et(pn,e),xn===null&&(xn=e)}function lp(e){e.tag===22?(et(ge,ge.current),et(pn,e),xn===null&&(xn=e)):br()}function br(){et(ge,ge.current),et(pn,pn.current)}function yn(e){K(pn),xn===e&&(xn=null),K(ge)}var ge=M(0);function ku(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Td(a)||Ad(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Pi=0,At=null,$t=null,be=null,Pu=!1,wa=!1,xs=!1,zu=0,Qo=0,Ra=null,SA=0;function ce(){throw Error(s(321))}function pf(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!mn(e[a],n[a]))return!1;return!0}function yf(e,n,a,o,h,f){return Pi=f,At=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,q.H=e===null||e.memoizedState===null?Fp:Mf,xs=!1,f=a(o,h),xs=!1,wa&&(f=cp(n,a,o,h)),up(e),f}function up(e){q.H=Xo;var n=$t!==null&&$t.next!==null;if(Pi=0,be=$t=At=null,Pu=!1,Qo=0,Ra=null,n)throw Error(s(300));e===null||we||(e=e.dependencies,e!==null&&Du(e)&&(we=!0))}function cp(e,n,a,o){At=e;var h=0;do{if(wa&&(Ra=null),Qo=0,wa=!1,25<=h)throw Error(s(301));if(h+=1,be=$t=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}q.H=Qp,f=n(a,o)}while(wa);return f}function bA(){var e=q.H,n=e.useState()[0];return n=typeof n.then=="function"?Ko(n):n,e=e.useState()[0],($t!==null?$t.memoizedState:null)!==e&&(At.flags|=1024),n}function _f(){var e=zu!==0;return zu=0,e}function vf(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Ef(e){if(Pu){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Pu=!1}Pi=0,be=$t=At=null,wa=!1,Qo=zu=0,Ra=null}function en(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?At.memoizedState=be=e:be=be.next=e,be}function pe(){if($t===null){var e=At.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var n=be===null?At.memoizedState:be.next;if(n!==null)be=n,$t=e;else{if(e===null)throw At.alternate===null?Error(s(467)):Error(s(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},be===null?At.memoizedState=be=e:be=be.next=e}return be}function Bu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(e){var n=Qo;return Qo+=1,Ra===null&&(Ra=[]),e=tp(Ra,e,n),n=At,(be===null?n.memoizedState:be.next)===null&&(n=n.alternate,q.H=n===null||n.memoizedState===null?Fp:Mf),e}function qu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ko(e);if(e.$$typeof===dt)return je(e)}throw Error(s(438,String(e)))}function Tf(e){var n=null,a=At.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=At.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Bu(),At.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=V;return n.index++,a}function zi(e,n){return typeof n=="function"?n(e):n}function ju(e){var n=pe();return Af(n,$t,e)}function Af(e,n,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var p=h.next;h.next=f.next,f.next=p}n.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{n=h.next;var E=p=null,C=null,P=n,G=!1;do{var Y=P.lane&-536870913;if(Y!==P.lane?(It&Y)===Y:(Pi&Y)===Y){var z=P.revertLane;if(z===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),Y===Ea&&(G=!0);else if((Pi&z)===z){P=P.next,z===Ea&&(G=!0);continue}else Y={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},C===null?(E=C=Y,p=f):C=C.next=Y,At.lanes|=z,Ir|=z;Y=P.action,xs&&a(f,Y),f=P.hasEagerState?P.eagerState:a(f,Y)}else z={lane:Y,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},C===null?(E=C=z,p=f):C=C.next=z,At.lanes|=Y,Ir|=Y;P=P.next}while(P!==null&&P!==n);if(C===null?p=f:C.next=E,!mn(f,e.memoizedState)&&(we=!0,G&&(a=Ta,a!==null)))throw a;e.memoizedState=f,e.baseState=p,e.baseQueue=C,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Sf(e){var n=pe(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=n.memoizedState;if(h!==null){a.pending=null;var p=h=h.next;do f=e(f,p.action),p=p.next;while(p!==h);mn(f,n.memoizedState)||(we=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function hp(e,n,a){var o=At,h=pe(),f=xt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=n();var p=!mn(($t||h).memoizedState,a);if(p&&(h.memoizedState=a,we=!0),h=h.queue,Rf(mp.bind(null,o,h,e),[e]),h.getSnapshot!==n||p||be!==null&&be.memoizedState.tag&1){if(o.flags|=2048,Ia(9,{destroy:void 0},dp.bind(null,o,h,a,n),null),te===null)throw Error(s(349));f||(Pi&127)!==0||fp(o,n,a)}return a}function fp(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=At.updateQueue,n===null?(n=Bu(),At.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function dp(e,n,a,o){n.value=a,n.getSnapshot=o,gp(n)&&pp(e)}function mp(e,n,a){return a(function(){gp(n)&&pp(e)})}function gp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!mn(e,a)}catch{return!0}}function pp(e){var n=ws(e,2);n!==null&&un(n,e,2)}function bf(e){var n=en();if(typeof e=="function"){var a=e;if(e=a(),xs){bn(!0);try{a()}finally{bn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:e},n}function yp(e,n,a,o){return e.baseState=a,Af(e,$t,typeof o=="function"?o:zi)}function wA(e,n,a,o,h){if(Fu(e))throw Error(s(485));if(e=n.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){f.listeners.push(p)}};q.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,_p(n,f)):(f.next=a.next,n.pending=a.next=f)}}function _p(e,n){var a=n.action,o=n.payload,h=e.state;if(n.isTransition){var f=q.T,p={};q.T=p;try{var E=a(h,o),C=q.S;C!==null&&C(p,E),vp(e,n,E)}catch(P){wf(e,n,P)}finally{f!==null&&p.types!==null&&(f.types=p.types),q.T=f}}else try{f=a(h,o),vp(e,n,f)}catch(P){wf(e,n,P)}}function vp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Ep(e,n,o)},function(o){return wf(e,n,o)}):Ep(e,n,a)}function Ep(e,n,a){n.status="fulfilled",n.value=a,Tp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,_p(e,a)))}function wf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Tp(n),n=n.next;while(n!==o)}e.action=null}function Tp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Ap(e,n){return n}function Sp(e,n){if(xt){var a=te.formState;if(a!==null){t:{var o=At;if(xt){if(ie){e:{for(var h=ie,f=Vn;h.nodeType!==8;){if(!f){h=null;break e}if(h=Un(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ie=Un(h.nextSibling),o=h.data==="F!";break t}}_r(o)}o=!1}o&&(n=a[0])}}return a=en(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:n},a.queue=o,a=jp.bind(null,At,o),o.dispatch=a,o=bf(!1),f=Of.bind(null,At,!1,o.queue),o=en(),h={state:n,dispatch:null,action:e,pending:null},o.queue=h,a=wA.bind(null,At,h,f,a),h.dispatch=a,o.memoizedState=e,[n,a,!1]}function bp(e){var n=pe();return wp(n,$t,e)}function wp(e,n,a){if(n=Af(e,n,Ap)[0],e=ju(zi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Ko(n)}catch(p){throw p===Aa?Mu:p}else o=n;n=pe();var h=n.queue,f=h.dispatch;return a!==n.memoizedState&&(At.flags|=2048,Ia(9,{destroy:void 0},RA.bind(null,h,a),null)),[o,f,e]}function RA(e,n){e.action=n}function Rp(e){var n=pe(),a=$t;if(a!==null)return wp(n,a,e);pe(),n=n.memoizedState,a=pe();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function Ia(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=At.updateQueue,n===null&&(n=Bu(),At.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Ip(){return pe().memoizedState}function Hu(e,n,a,o){var h=en();At.flags|=e,h.memoizedState=Ia(1|n,{destroy:void 0},a,o===void 0?null:o)}function Gu(e,n,a,o){var h=pe();o=o===void 0?null:o;var f=h.memoizedState.inst;$t!==null&&o!==null&&pf(o,$t.memoizedState.deps)?h.memoizedState=Ia(n,f,a,o):(At.flags|=e,h.memoizedState=Ia(1|n,f,a,o))}function Cp(e,n){Hu(8390656,8,e,n)}function Rf(e,n){Gu(2048,8,e,n)}function IA(e){At.flags|=4;var n=At.updateQueue;if(n===null)n=Bu(),At.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Dp(e){var n=pe().memoizedState;return IA({ref:n,nextImpl:e}),function(){if((qt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Np(e,n){return Gu(4,2,e,n)}function Op(e,n){return Gu(4,4,e,n)}function Mp(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Vp(e,n,a){a=a!=null?a.concat([e]):null,Gu(4,4,Mp.bind(null,n,e),a)}function If(){}function xp(e,n){var a=pe();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&pf(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Up(e,n){var a=pe();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&pf(n,o[1]))return o[0];if(o=e(),xs){bn(!0);try{e()}finally{bn(!1)}}return a.memoizedState=[o,n],o}function Cf(e,n,a){return a===void 0||(Pi&1073741824)!==0&&(It&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Ly(),At.lanes|=e,Ir|=e,a)}function Lp(e,n,a,o){return mn(a,n)?a:ba.current!==null?(e=Cf(e,a,o),mn(e,n)||(we=!0),e):(Pi&42)===0||(Pi&1073741824)!==0&&(It&261930)===0?(we=!0,e.memoizedState=a):(e=Ly(),At.lanes|=e,Ir|=e,n)}function kp(e,n,a,o,h){var f=tt.p;tt.p=f!==0&&8>f?f:8;var p=q.T,E={};q.T=E,Of(e,!1,n,a);try{var C=h(),P=q.S;if(P!==null&&P(E,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var G=AA(C,o);Yo(e,n,G,En(e))}else Yo(e,n,o,En(e))}catch(Y){Yo(e,n,{then:function(){},status:"rejected",reason:Y},En())}finally{tt.p=f,p!==null&&E.types!==null&&(p.types=E.types),q.T=p}}function CA(){}function Df(e,n,a,o){if(e.tag!==5)throw Error(s(476));var h=Pp(e).queue;kp(e,h,n,ut,a===null?CA:function(){return zp(e),a(o)})}function Pp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:ut},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function zp(e){var n=Pp(e);n.next===null&&(n=e.alternate.memoizedState),Yo(e,n.next.queue,{},En())}function Nf(){return je(hl)}function Bp(){return pe().memoizedState}function qp(){return pe().memoizedState}function DA(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=En();e=Tr(a);var o=Ar(n,e,a);o!==null&&(un(o,n,a),Ho(o,n,a)),n={cache:sf()},e.payload=n;return}n=n.return}}function NA(e,n,a){var o=En();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Fu(e)?Hp(n,a):(a=Kh(e,n,a,o),a!==null&&(un(a,e,o),Gp(a,n,o)))}function jp(e,n,a){var o=En();Yo(e,n,a,o)}function Yo(e,n,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fu(e))Hp(n,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var p=n.lastRenderedState,E=f(p,a);if(h.hasEagerState=!0,h.eagerState=E,mn(E,p))return wu(e,n,h,0),te===null&&bu(),!1}catch{}finally{}if(a=Kh(e,n,h,o),a!==null)return un(a,e,o),Gp(a,n,o),!0}return!1}function Of(e,n,a,o){if(o={lane:2,revertLane:ud(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Fu(e)){if(n)throw Error(s(479))}else n=Kh(e,a,o,2),n!==null&&un(n,e,2)}function Fu(e){var n=e.alternate;return e===At||n!==null&&n===At}function Hp(e,n){wa=Pu=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Gp(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,po(e,a)}}var Xo={readContext:je,use:qu,useCallback:ce,useContext:ce,useEffect:ce,useImperativeHandle:ce,useLayoutEffect:ce,useInsertionEffect:ce,useMemo:ce,useReducer:ce,useRef:ce,useState:ce,useDebugValue:ce,useDeferredValue:ce,useTransition:ce,useSyncExternalStore:ce,useId:ce,useHostTransitionStatus:ce,useFormState:ce,useActionState:ce,useOptimistic:ce,useMemoCache:ce,useCacheRefresh:ce};Xo.useEffectEvent=ce;var Fp={readContext:je,use:qu,useCallback:function(e,n){return en().memoizedState=[e,n===void 0?null:n],e},useContext:je,useEffect:Cp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Hu(4194308,4,Mp.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Hu(4194308,4,e,n)},useInsertionEffect:function(e,n){Hu(4,2,e,n)},useMemo:function(e,n){var a=en();n=n===void 0?null:n;var o=e();if(xs){bn(!0);try{e()}finally{bn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=en();if(a!==void 0){var h=a(n);if(xs){bn(!0);try{a(n)}finally{bn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=NA.bind(null,At,e),[o.memoizedState,e]},useRef:function(e){var n=en();return e={current:e},n.memoizedState=e},useState:function(e){e=bf(e);var n=e.queue,a=jp.bind(null,At,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:If,useDeferredValue:function(e,n){var a=en();return Cf(a,e,n)},useTransition:function(){var e=bf(!1);return e=kp.bind(null,At,e.queue,!0,!1),en().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=At,h=en();if(xt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),te===null)throw Error(s(349));(It&127)!==0||fp(o,n,a)}h.memoizedState=a;var f={value:a,getSnapshot:n};return h.queue=f,Cp(mp.bind(null,o,f,e),[e]),o.flags|=2048,Ia(9,{destroy:void 0},dp.bind(null,o,f,a,n),null),a},useId:function(){var e=en(),n=te.identifierPrefix;if(xt){var a=vi,o=_i;a=(o&~(1<<32-de(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=zu++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=SA++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Nf,useFormState:Sp,useActionState:Sp,useOptimistic:function(e){var n=en();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Of.bind(null,At,!0,a),a.dispatch=n,[e,n]},useMemoCache:Tf,useCacheRefresh:function(){return en().memoizedState=DA.bind(null,At)},useEffectEvent:function(e){var n=en(),a={impl:e};return n.memoizedState=a,function(){if((qt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Mf={readContext:je,use:qu,useCallback:xp,useContext:je,useEffect:Rf,useImperativeHandle:Vp,useInsertionEffect:Np,useLayoutEffect:Op,useMemo:Up,useReducer:ju,useRef:Ip,useState:function(){return ju(zi)},useDebugValue:If,useDeferredValue:function(e,n){var a=pe();return Lp(a,$t.memoizedState,e,n)},useTransition:function(){var e=ju(zi)[0],n=pe().memoizedState;return[typeof e=="boolean"?e:Ko(e),n]},useSyncExternalStore:hp,useId:Bp,useHostTransitionStatus:Nf,useFormState:bp,useActionState:bp,useOptimistic:function(e,n){var a=pe();return yp(a,$t,e,n)},useMemoCache:Tf,useCacheRefresh:qp};Mf.useEffectEvent=Dp;var Qp={readContext:je,use:qu,useCallback:xp,useContext:je,useEffect:Rf,useImperativeHandle:Vp,useInsertionEffect:Np,useLayoutEffect:Op,useMemo:Up,useReducer:Sf,useRef:Ip,useState:function(){return Sf(zi)},useDebugValue:If,useDeferredValue:function(e,n){var a=pe();return $t===null?Cf(a,e,n):Lp(a,$t.memoizedState,e,n)},useTransition:function(){var e=Sf(zi)[0],n=pe().memoizedState;return[typeof e=="boolean"?e:Ko(e),n]},useSyncExternalStore:hp,useId:Bp,useHostTransitionStatus:Nf,useFormState:Rp,useActionState:Rp,useOptimistic:function(e,n){var a=pe();return $t!==null?yp(a,$t,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Tf,useCacheRefresh:qp};Qp.useEffectEvent=Dp;function Vf(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:S({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var xf={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=En(),h=Tr(o);h.payload=n,a!=null&&(h.callback=a),n=Ar(e,h,o),n!==null&&(un(n,e,o),Ho(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=En(),h=Tr(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Ar(e,h,o),n!==null&&(un(n,e,o),Ho(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=En(),o=Tr(a);o.tag=2,n!=null&&(o.callback=n),n=Ar(e,o,a),n!==null&&(un(n,e,a),Ho(n,e,a))}};function Kp(e,n,a,o,h,f,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,p):n.prototype&&n.prototype.isPureReactComponent?!Uo(a,o)||!Uo(h,f):!0}function Yp(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&xf.enqueueReplaceState(n,n.state,null)}function Us(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=S({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}function Xp(e){Su(e)}function $p(e){console.error(e)}function Zp(e){Su(e)}function Qu(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Jp(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Uf(e,n,a){return a=Tr(a),a.tag=3,a.payload={element:null},a.callback=function(){Qu(e,n)},a}function Wp(e){return e=Tr(e),e.tag=3,e}function ty(e,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){Jp(n,a,o)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Jp(n,a,o),typeof h!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function OA(e,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&va(n,a,h,!0),a=pn.current,a!==null){switch(a.tag){case 31:case 13:return xn===null?rc():a.alternate===null&&he===0&&(he=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Vu?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),ad(e,o,h)),!1;case 22:return a.flags|=65536,o===Vu?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),ad(e,o,h)),!1}throw Error(s(435,a.tag))}return ad(e,o,h),rc(),!1}if(xt)return n=pn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Wh&&(e=Error(s(422),{cause:o}),Po(Nn(e,a)))):(o!==Wh&&(n=Error(s(423),{cause:o}),Po(Nn(n,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Nn(o,a),h=Uf(e.stateNode,o,h),hf(e,h),he!==4&&(he=2)),!1;var f=Error(s(520),{cause:o});if(f=Nn(f,a),il===null?il=[f]:il.push(f),he!==4&&(he=2),n===null)return!0;o=Nn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Uf(a.stateNode,o,e),hf(a,e),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Cr===null||!Cr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Wp(h),ty(h,e,a,o),hf(a,h),!1}a=a.return}while(a!==null);return!1}var Lf=Error(s(461)),we=!1;function He(e,n,a,o){n.child=e===null?rp(n,null,a,o):Vs(n,e.child,a,o)}function ey(e,n,a,o,h){a=a.render;var f=n.ref;if("ref"in o){var p={};for(var E in o)E!=="ref"&&(p[E]=o[E])}else p=o;return Ds(n),o=yf(e,n,a,p,f,h),E=_f(),e!==null&&!we?(vf(e,n,h),Bi(e,n,h)):(xt&&E&&Zh(n),n.flags|=1,He(e,n,o,h),n.child)}function ny(e,n,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!Yh(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,iy(e,n,f,o,h)):(e=Iu(a.type,null,o,n,n.mode,h),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!Gf(e,h)){var p=f.memoizedProps;if(a=a.compare,a=a!==null?a:Uo,a(p,o)&&e.ref===n.ref)return Bi(e,n,h)}return n.flags|=1,e=xi(f,o),e.ref=n.ref,e.return=n,n.child=e}function iy(e,n,a,o,h){if(e!==null){var f=e.memoizedProps;if(Uo(f,o)&&e.ref===n.ref)if(we=!1,n.pendingProps=o=f,Gf(e,h))(e.flags&131072)!==0&&(we=!0);else return n.lanes=e.lanes,Bi(e,n,h)}return kf(e,n,a,o,h)}function ry(e,n,a,o){var h=o.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,e!==null){for(o=n.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~f}else o=0,n.child=null;return sy(e,n,f,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ou(n,f!==null?f.cachePool:null),f!==null?op(n,f):df(),lp(n);else return o=n.lanes=536870912,sy(e,n,f!==null?f.baseLanes|a:a,a,o)}else f!==null?(Ou(n,f.cachePool),op(n,f),br(),n.memoizedState=null):(e!==null&&Ou(n,null),df(),br());return He(e,n,h,a),n.child}function $o(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function sy(e,n,a,o,h){var f=of();return f=f===null?null:{parent:Se._currentValue,pool:f},n.memoizedState={baseLanes:a,cachePool:f},e!==null&&Ou(n,null),df(),lp(n),e!==null&&va(e,n,o,!0),n.childLanes=h,null}function Ku(e,n){return n=Xu({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function ay(e,n,a){return Vs(n,e.child,null,a),e=Ku(n,n.pendingProps),e.flags|=2,yn(n),n.memoizedState=null,e}function MA(e,n,a){var o=n.pendingProps,h=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(xt){if(o.mode==="hidden")return e=Ku(n,o),n.lanes=536870912,$o(null,e);if(gf(n),(e=ie)?(e=__(e,Vn),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:pr!==null?{id:_i,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},a=Hg(e),a.return=n,n.child=a,qe=n,ie=null)):e=null,e===null)throw _r(n);return n.lanes=536870912,null}return Ku(n,o)}var f=e.memoizedState;if(f!==null){var p=f.dehydrated;if(gf(n),h)if(n.flags&256)n.flags&=-257,n=ay(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(we||va(e,n,a,!1),h=(a&e.childLanes)!==0,we||h){if(o=te,o!==null&&(p=yo(o,a),p!==0&&p!==f.retryLane))throw f.retryLane=p,ws(e,p),un(o,e,p),Lf;rc(),n=ay(e,n,a)}else e=f.treeContext,ie=Un(p.nextSibling),qe=n,xt=!0,yr=null,Vn=!1,e!==null&&Qg(n,e),n=Ku(n,o),n.flags|=4096;return n}return e=xi(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Yu(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function kf(e,n,a,o,h){return Ds(n),a=yf(e,n,a,o,void 0,h),o=_f(),e!==null&&!we?(vf(e,n,h),Bi(e,n,h)):(xt&&o&&Zh(n),n.flags|=1,He(e,n,a,h),n.child)}function oy(e,n,a,o,h,f){return Ds(n),n.updateQueue=null,a=cp(n,o,a,h),up(e),o=_f(),e!==null&&!we?(vf(e,n,f),Bi(e,n,f)):(xt&&o&&Zh(n),n.flags|=1,He(e,n,a,f),n.child)}function ly(e,n,a,o,h){if(Ds(n),n.stateNode===null){var f=ga,p=a.contextType;typeof p=="object"&&p!==null&&(f=je(p)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=xf,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},uf(n),p=a.contextType,f.context=typeof p=="object"&&p!==null?je(p):ga,f.state=n.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(Vf(n,a,p,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(p=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),p!==f.state&&xf.enqueueReplaceState(f,f.state,null),Fo(n,o,f,h),Go(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,C=Us(a,E);f.props=C;var P=f.context,G=a.contextType;p=ga,typeof G=="object"&&G!==null&&(p=je(G));var Y=a.getDerivedStateFromProps;G=typeof Y=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||P!==p)&&Yp(n,f,o,p),Er=!1;var z=n.memoizedState;f.state=z,Fo(n,o,f,h),Go(),P=n.memoizedState,E||z!==P||Er?(typeof Y=="function"&&(Vf(n,a,Y,o),P=n.memoizedState),(C=Er||Kp(n,a,C,o,z,P,p))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=P),f.props=o,f.state=P,f.context=p,o=C):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,cf(e,n),p=n.memoizedProps,G=Us(a,p),f.props=G,Y=n.pendingProps,z=f.context,P=a.contextType,C=ga,typeof P=="object"&&P!==null&&(C=je(P)),E=a.getDerivedStateFromProps,(P=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(p!==Y||z!==C)&&Yp(n,f,o,C),Er=!1,z=n.memoizedState,f.state=z,Fo(n,o,f,h),Go();var j=n.memoizedState;p!==Y||z!==j||Er||e!==null&&e.dependencies!==null&&Du(e.dependencies)?(typeof E=="function"&&(Vf(n,a,E,o),j=n.memoizedState),(G=Er||Kp(n,a,G,o,z,j,C)||e!==null&&e.dependencies!==null&&Du(e.dependencies))?(P||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,j,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,j,C)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=j),f.props=o,f.state=j,f.context=C,o=G):(typeof f.componentDidUpdate!="function"||p===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Yu(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=Vs(n,e.child,null,h),n.child=Vs(n,null,a,h)):He(e,n,a,h),n.memoizedState=f.state,e=n.child):e=Bi(e,n,h),e}function uy(e,n,a,o){return Is(),n.flags|=256,He(e,n,a,o),n.child}var Pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zf(e){return{baseLanes:e,cachePool:Jg()}}function Bf(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=vn),e}function cy(e,n,a){var o=n.pendingProps,h=!1,f=(n.flags&128)!==0,p;if((p=f)||(p=e!==null&&e.memoizedState===null?!1:(ge.current&2)!==0),p&&(h=!0,n.flags&=-129),p=(n.flags&32)!==0,n.flags&=-33,e===null){if(xt){if(h?Sr(n):br(),(e=ie)?(e=__(e,Vn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:pr!==null?{id:_i,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},a=Hg(e),a.return=n,n.child=a,qe=n,ie=null)):e=null,e===null)throw _r(n);return Ad(e)?n.lanes=32:n.lanes=536870912,null}var E=o.children;return o=o.fallback,h?(br(),h=n.mode,E=Xu({mode:"hidden",children:E},h),o=Rs(o,h,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,o=n.child,o.memoizedState=zf(a),o.childLanes=Bf(e,p,a),n.memoizedState=Pf,$o(null,o)):(Sr(n),qf(n,E))}var C=e.memoizedState;if(C!==null&&(E=C.dehydrated,E!==null)){if(f)n.flags&256?(Sr(n),n.flags&=-257,n=jf(e,n,a)):n.memoizedState!==null?(br(),n.child=e.child,n.flags|=128,n=null):(br(),E=o.fallback,h=n.mode,o=Xu({mode:"visible",children:o.children},h),E=Rs(E,h,a,null),E.flags|=2,o.return=n,E.return=n,o.sibling=E,n.child=o,Vs(n,e.child,null,a),o=n.child,o.memoizedState=zf(a),o.childLanes=Bf(e,p,a),n.memoizedState=Pf,n=$o(null,o));else if(Sr(n),Ad(E)){if(p=E.nextSibling&&E.nextSibling.dataset,p)var P=p.dgst;p=P,o=Error(s(419)),o.stack="",o.digest=p,Po({value:o,source:null,stack:null}),n=jf(e,n,a)}else if(we||va(e,n,a,!1),p=(a&e.childLanes)!==0,we||p){if(p=te,p!==null&&(o=yo(p,a),o!==0&&o!==C.retryLane))throw C.retryLane=o,ws(e,o),un(p,e,o),Lf;Td(E)||rc(),n=jf(e,n,a)}else Td(E)?(n.flags|=192,n.child=e.child,n=null):(e=C.treeContext,ie=Un(E.nextSibling),qe=n,xt=!0,yr=null,Vn=!1,e!==null&&Qg(n,e),n=qf(n,o.children),n.flags|=4096);return n}return h?(br(),E=o.fallback,h=n.mode,C=e.child,P=C.sibling,o=xi(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,P!==null?E=xi(P,E):(E=Rs(E,h,a,null),E.flags|=2),E.return=n,o.return=n,o.sibling=E,n.child=o,$o(null,o),o=n.child,E=e.child.memoizedState,E===null?E=zf(a):(h=E.cachePool,h!==null?(C=Se._currentValue,h=h.parent!==C?{parent:C,pool:C}:h):h=Jg(),E={baseLanes:E.baseLanes|a,cachePool:h}),o.memoizedState=E,o.childLanes=Bf(e,p,a),n.memoizedState=Pf,$o(e.child,o)):(Sr(n),a=e.child,e=a.sibling,a=xi(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(p=n.deletions,p===null?(n.deletions=[e],n.flags|=16):p.push(e)),n.child=a,n.memoizedState=null,a)}function qf(e,n){return n=Xu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Xu(e,n){return e=gn(22,e,null,n),e.lanes=0,e}function jf(e,n,a){return Vs(n,e.child,null,a),e=qf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function hy(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),nf(e.return,n,a)}function Hf(e,n,a,o,h,f){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:f}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=a,p.tailMode=h,p.treeForkCount=f)}function fy(e,n,a){var o=n.pendingProps,h=o.revealOrder,f=o.tail;o=o.children;var p=ge.current,E=(p&2)!==0;if(E?(p=p&1|2,n.flags|=128):p&=1,et(ge,p),He(e,n,o,a),o=xt?ko:0,!E&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hy(e,a,n);else if(e.tag===19)hy(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(a=n.child,h=null;a!==null;)e=a.alternate,e!==null&&ku(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),Hf(n,!1,h,a,f,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(e=h.alternate,e!==null&&ku(e)===null){n.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}Hf(n,!0,a,null,f,o);break;case"together":Hf(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Bi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Ir|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(va(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=xi(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=xi(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Gf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Du(e)))}function VA(e,n,a){switch(n.tag){case 3:Ne(n,n.stateNode.containerInfo),vr(n,Se,e.memoizedState.cache),Is();break;case 27:case 5:os(n);break;case 4:Ne(n,n.stateNode.containerInfo);break;case 10:vr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,gf(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Sr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?cy(e,n,a):(Sr(n),e=Bi(e,n,a),e!==null?e.sibling:null);Sr(n);break;case 19:var h=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(va(e,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return fy(e,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),et(ge,ge.current),o)break;return null;case 22:return n.lanes=0,ry(e,n,a,n.pendingProps);case 24:vr(n,Se,e.memoizedState.cache)}return Bi(e,n,a)}function dy(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)we=!0;else{if(!Gf(e,a)&&(n.flags&128)===0)return we=!1,VA(e,n,a);we=(e.flags&131072)!==0}else we=!1,xt&&(n.flags&1048576)!==0&&Fg(n,ko,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=Os(n.elementType),n.type=e,typeof e=="function")Yh(e)?(o=Us(e,o),n.tag=1,n=ly(null,n,e,o,a)):(n.tag=0,n=kf(null,n,e,o,a));else{if(e!=null){var h=e.$$typeof;if(h===jt){n.tag=11,n=ey(null,n,e,o,a);break t}else if(h===w){n.tag=14,n=ny(null,n,e,o,a);break t}}throw n=Yt(e)||e,Error(s(306,n,""))}}return n;case 0:return kf(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=Us(o,n.pendingProps),ly(e,n,o,h,a);case 3:t:{if(Ne(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var f=n.memoizedState;h=f.element,cf(e,n),Fo(n,o,null,a);var p=n.memoizedState;if(o=p.cache,vr(n,Se,o),o!==f.cache&&rf(n,[Se],a,!0),Go(),o=p.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:p.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=uy(e,n,o,a);break t}else if(o!==h){h=Nn(Error(s(424)),n),Po(h),n=uy(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ie=Un(e.firstChild),qe=n,xt=!0,yr=null,Vn=!0,a=rp(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Is(),o===h){n=Bi(e,n,a);break t}He(e,n,o,a)}n=n.child}return n;case 26:return Yu(e,n),e===null?(a=b_(n.type,null,n.pendingProps,null))?n.memoizedState=a:xt||(a=n.type,e=n.pendingProps,o=hc(St.current).createElement(a),o[Ee]=n,o[xe]=e,Ge(o,a,e),Te(o),n.stateNode=o):n.memoizedState=b_(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return os(n),e===null&&xt&&(o=n.stateNode=T_(n.type,n.pendingProps,St.current),qe=n,Vn=!0,h=ie,Mr(n.type)?(Sd=h,ie=Un(o.firstChild)):ie=h),He(e,n,n.pendingProps.children,a),Yu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&xt&&((h=o=ie)&&(o=uS(o,n.type,n.pendingProps,Vn),o!==null?(n.stateNode=o,qe=n,ie=Un(o.firstChild),Vn=!1,h=!0):h=!1),h||_r(n)),os(n),h=n.type,f=n.pendingProps,p=e!==null?e.memoizedProps:null,o=f.children,_d(h,f)?o=null:p!==null&&_d(h,p)&&(n.flags|=32),n.memoizedState!==null&&(h=yf(e,n,bA,null,null,a),hl._currentValue=h),Yu(e,n),He(e,n,o,a),n.child;case 6:return e===null&&xt&&((e=a=ie)&&(a=cS(a,n.pendingProps,Vn),a!==null?(n.stateNode=a,qe=n,ie=null,e=!0):e=!1),e||_r(n)),null;case 13:return cy(e,n,a);case 4:return Ne(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Vs(n,null,o,a):He(e,n,o,a),n.child;case 11:return ey(e,n,n.type,n.pendingProps,a);case 7:return He(e,n,n.pendingProps,a),n.child;case 8:return He(e,n,n.pendingProps.children,a),n.child;case 12:return He(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,vr(n,n.type,o.value),He(e,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,Ds(n),h=je(h),o=o(h),n.flags|=1,He(e,n,o,a),n.child;case 14:return ny(e,n,n.type,n.pendingProps,a);case 15:return iy(e,n,n.type,n.pendingProps,a);case 19:return fy(e,n,a);case 31:return MA(e,n,a);case 22:return ry(e,n,a,n.pendingProps);case 24:return Ds(n),o=je(Se),e===null?(h=of(),h===null&&(h=te,f=sf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),n.memoizedState={parent:o,cache:h},uf(n),vr(n,Se,h)):((e.lanes&a)!==0&&(cf(e,n),Fo(n,null,null,a),Go()),h=e.memoizedState,f=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),vr(n,Se,o)):(o=f.cache,vr(n,Se,o),o!==h.cache&&rf(n,[Se],a,!0))),He(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function qi(e){e.flags|=4}function Ff(e,n,a,o,h){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(By())e.flags|=8192;else throw Ms=Vu,lf}else e.flags&=-16777217}function my(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!D_(n))if(By())e.flags|=8192;else throw Ms=Vu,lf}function $u(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?nu():536870912,e.lanes|=n,Oa|=n)}function Zo(e,n){if(!xt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function re(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function xA(e,n,a){var o=n.pendingProps;switch(Jh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(n),null;case 1:return re(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),ki(Se),se(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(_a(n)?qi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,tf())),re(n),null;case 26:var h=n.type,f=n.memoizedState;return e===null?(qi(n),f!==null?(re(n),my(n,f)):(re(n),Ff(n,h,null,o,a))):f?f!==e.memoizedState?(qi(n),re(n),my(n,f)):(re(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&qi(n),re(n),Ff(n,h,e,o,a)),null;case 27:if($s(n),a=St.current,h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return re(n),null}e=it.current,_a(n)?Kg(n):(e=T_(h,o,a),n.stateNode=e,qi(n))}return re(n),null;case 5:if($s(n),h=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return re(n),null}if(f=it.current,_a(n))Kg(n);else{var p=hc(St.current);switch(f){case 1:f=p.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=p.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=p.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=p.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?p.createElement("select",{is:o.is}):p.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?p.createElement(h,{is:o.is}):p.createElement(h)}}f[Ee]=n,f[xe]=o;t:for(p=n.child;p!==null;){if(p.tag===5||p.tag===6)f.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break t;for(;p.sibling===null;){if(p.return===null||p.return===n)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}n.stateNode=f;t:switch(Ge(f,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&qi(n)}}return re(n),Ff(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=St.current,_a(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,h=qe,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Ee]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||c_(e.nodeValue,a)),e||_r(n,!0)}else e=hc(e).createTextNode(o),e[Ee]=n,n.stateNode=e}return re(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=_a(n),a!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ee]=n}else Is(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;re(n),e=!1}else a=tf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(yn(n),n):(yn(n),null);if((n.flags&128)!==0)throw Error(s(558))}return re(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=_a(n),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ee]=n}else Is(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;re(n),h=!1}else h=tf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(yn(n),n):(yn(n),null)}return yn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),$u(n,n.updateQueue),re(n),null);case 4:return se(),e===null&&dd(n.stateNode.containerInfo),re(n),null;case 10:return ki(n.type),re(n),null;case 19:if(K(ge),o=n.memoizedState,o===null)return re(n),null;if(h=(n.flags&128)!==0,f=o.rendering,f===null)if(h)Zo(o,!1);else{if(he!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=ku(e),f!==null){for(n.flags|=128,Zo(o,!1),e=f.updateQueue,n.updateQueue=e,$u(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)jg(a,e),a=a.sibling;return et(ge,ge.current&1|2),xt&&Ui(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&We()>ec&&(n.flags|=128,h=!0,Zo(o,!1),n.lanes=4194304)}else{if(!h)if(e=ku(f),e!==null){if(n.flags|=128,h=!0,e=e.updateQueue,n.updateQueue=e,$u(n,e),Zo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!xt)return re(n),null}else 2*We()-o.renderingStartTime>ec&&a!==536870912&&(n.flags|=128,h=!0,Zo(o,!1),n.lanes=4194304);o.isBackwards?(f.sibling=n.child,n.child=f):(e=o.last,e!==null?e.sibling=f:n.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=We(),e.sibling=null,a=ge.current,et(ge,h?a&1|2:a&1),xt&&Ui(n,o.treeForkCount),e):(re(n),null);case 22:case 23:return yn(n),mf(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(re(n),n.subtreeFlags&6&&(n.flags|=8192)):re(n),a=n.updateQueue,a!==null&&$u(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&K(Ns),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),ki(Se),re(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function UA(e,n){switch(Jh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ki(Se),se(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return $s(n),null;case 31:if(n.memoizedState!==null){if(yn(n),n.alternate===null)throw Error(s(340));Is()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(yn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Is()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return K(ge),null;case 4:return se(),null;case 10:return ki(n.type),null;case 22:case 23:return yn(n),mf(),e!==null&&K(Ns),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return ki(Se),null;case 25:return null;default:return null}}function gy(e,n){switch(Jh(n),n.tag){case 3:ki(Se),se();break;case 26:case 27:case 5:$s(n);break;case 4:se();break;case 31:n.memoizedState!==null&&yn(n);break;case 13:yn(n);break;case 19:K(ge);break;case 10:ki(n.type);break;case 22:case 23:yn(n),mf(),e!==null&&K(Ns);break;case 24:ki(Se)}}function Jo(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,p=a.inst;o=f(),p.destroy=o}a=a.next}while(a!==h)}}catch(E){Kt(n,n.return,E)}}function wr(e,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var p=o.inst,E=p.destroy;if(E!==void 0){p.destroy=void 0,h=n;var C=a,P=E;try{P()}catch(G){Kt(h,C,G)}}}o=o.next}while(o!==f)}}catch(G){Kt(n,n.return,G)}}function py(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{ap(n,a)}catch(o){Kt(e,e.return,o)}}}function yy(e,n,a){a.props=Us(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Kt(e,n,o)}}function Wo(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(h){Kt(e,n,h)}}function Ei(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Kt(e,n,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Kt(e,n,h)}else a.current=null}function _y(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Kt(e,e.return,h)}}function Qf(e,n,a){try{var o=e.stateNode;iS(o,e.type,a,n),o[xe]=n}catch(h){Kt(e,e.return,h)}}function vy(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Mr(e.type)||e.tag===4}function Kf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||vy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Mr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yf(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=jn));else if(o!==4&&(o===27&&Mr(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Yf(e,n,a),e=e.sibling;e!==null;)Yf(e,n,a),e=e.sibling}function Zu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&Mr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Zu(e,n,a),e=e.sibling;e!==null;)Zu(e,n,a),e=e.sibling}function Ey(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);Ge(n,o,a),n[Ee]=e,n[xe]=a}catch(f){Kt(e,e.return,f)}}var ji=!1,Re=!1,Xf=!1,Ty=typeof WeakSet=="function"?WeakSet:Set,Le=null;function LA(e,n){if(e=e.containerInfo,pd=_c,e=Vg(e),qh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var p=0,E=-1,C=-1,P=0,G=0,Y=e,z=null;e:for(;;){for(var j;Y!==a||h!==0&&Y.nodeType!==3||(E=p+h),Y!==f||o!==0&&Y.nodeType!==3||(C=p+o),Y.nodeType===3&&(p+=Y.nodeValue.length),(j=Y.firstChild)!==null;)z=Y,Y=j;for(;;){if(Y===e)break e;if(z===a&&++P===h&&(E=p),z===f&&++G===o&&(C=p),(j=Y.nextSibling)!==null)break;Y=z,z=Y.parentNode}Y=j}a=E===-1||C===-1?null:{start:E,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(yd={focusedElem:e,selectionRange:a},_c=!1,Le=n;Le!==null;)if(n=Le,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Le=e;else for(;Le!==null;){switch(n=Le,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)h=e[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=n,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var at=Us(a.type,h);e=o.getSnapshotBeforeUpdate(at,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(mt){Kt(a,a.return,mt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Ed(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Le=e;break}Le=n.return}}function Ay(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Gi(e,a),o&4&&Jo(5,a);break;case 1:if(Gi(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(p){Kt(a,a.return,p)}else{var h=Us(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(h,n,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Kt(a,a.return,p)}}o&64&&py(a),o&512&&Wo(a,a.return);break;case 3:if(Gi(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{ap(e,n)}catch(p){Kt(a,a.return,p)}}break;case 27:n===null&&o&4&&Ey(a);case 26:case 5:Gi(e,a),n===null&&o&4&&_y(a),o&512&&Wo(a,a.return);break;case 12:Gi(e,a);break;case 31:Gi(e,a),o&4&&wy(e,a);break;case 13:Gi(e,a),o&4&&Ry(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=FA.bind(null,a),hS(e,a))));break;case 22:if(o=a.memoizedState!==null||ji,!o){n=n!==null&&n.memoizedState!==null||Re,h=ji;var f=Re;ji=o,(Re=n)&&!f?Fi(e,a,(a.subtreeFlags&8772)!==0):Gi(e,a),ji=h,Re=f}break;case 30:break;default:Gi(e,a)}}function Sy(e){var n=e.alternate;n!==null&&(e.alternate=null,Sy(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&ea(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var oe=null,sn=!1;function Hi(e,n,a){for(a=a.child;a!==null;)by(e,n,a),a=a.sibling}function by(e,n,a){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(Pn,a)}catch{}switch(a.tag){case 26:Re||Ei(a,n),Hi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Re||Ei(a,n);var o=oe,h=sn;Mr(a.type)&&(oe=a.stateNode,sn=!1),Hi(e,n,a),ll(a.stateNode),oe=o,sn=h;break;case 5:Re||Ei(a,n);case 6:if(o=oe,h=sn,oe=null,Hi(e,n,a),oe=o,sn=h,oe!==null)if(sn)try{(oe.nodeType===9?oe.body:oe.nodeName==="HTML"?oe.ownerDocument.body:oe).removeChild(a.stateNode)}catch(f){Kt(a,n,f)}else try{oe.removeChild(a.stateNode)}catch(f){Kt(a,n,f)}break;case 18:oe!==null&&(sn?(e=oe,p_(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),za(e)):p_(oe,a.stateNode));break;case 4:o=oe,h=sn,oe=a.stateNode.containerInfo,sn=!0,Hi(e,n,a),oe=o,sn=h;break;case 0:case 11:case 14:case 15:wr(2,a,n),Re||wr(4,a,n),Hi(e,n,a);break;case 1:Re||(Ei(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&yy(a,n,o)),Hi(e,n,a);break;case 21:Hi(e,n,a);break;case 22:Re=(o=Re)||a.memoizedState!==null,Hi(e,n,a),Re=o;break;default:Hi(e,n,a)}}function wy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{za(e)}catch(a){Kt(n,n.return,a)}}}function Ry(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{za(e)}catch(a){Kt(n,n.return,a)}}function kA(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Ty),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Ty),n;default:throw Error(s(435,e.tag))}}function Ju(e,n){var a=kA(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var h=QA.bind(null,e,o);o.then(h,h)}})}function an(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,p=n,E=p;t:for(;E!==null;){switch(E.tag){case 27:if(Mr(E.type)){oe=E.stateNode,sn=!1;break t}break;case 5:oe=E.stateNode,sn=!1;break t;case 3:case 4:oe=E.stateNode.containerInfo,sn=!0;break t}E=E.return}if(oe===null)throw Error(s(160));by(f,p,h),oe=null,sn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Iy(n,e),n=n.sibling}var Yn=null;function Iy(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:an(n,e),on(e),o&4&&(wr(3,e,e.return),Jo(3,e),wr(5,e,e.return));break;case 1:an(n,e),on(e),o&512&&(Re||a===null||Ei(a,a.return)),o&64&&ji&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Yn;if(an(n,e),on(e),o&512&&(Re||a===null||Ei(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ai]||f[Ee]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Ge(f,o,a),f[Ee]=e,Te(f),o=f;break t;case"link":var p=I_("link","href",h).get(o+(a.href||""));if(p){for(var E=0;E<p.length;E++)if(f=p[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(E,1);break e}}f=h.createElement(o),Ge(f,o,a),h.head.appendChild(f);break;case"meta":if(p=I_("meta","content",h).get(o+(a.content||""))){for(E=0;E<p.length;E++)if(f=p[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(E,1);break e}}f=h.createElement(o),Ge(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Ee]=e,Te(f),o=f}e.stateNode=o}else C_(h,e.type,e.stateNode);else e.stateNode=R_(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?C_(h,e.type,e.stateNode):R_(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Qf(e,e.memoizedProps,a.memoizedProps)}break;case 27:an(n,e),on(e),o&512&&(Re||a===null||Ei(a,a.return)),a!==null&&o&4&&Qf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(an(n,e),on(e),o&512&&(Re||a===null||Ei(a,a.return)),e.flags&32){h=e.stateNode;try{rn(h,"")}catch(at){Kt(e,e.return,at)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Qf(e,h,a!==null?a.memoizedProps:h)),o&1024&&(Xf=!0);break;case 6:if(an(n,e),on(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(at){Kt(e,e.return,at)}}break;case 3:if(mc=null,h=Yn,Yn=fc(n.containerInfo),an(n,e),Yn=h,on(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{za(n.containerInfo)}catch(at){Kt(e,e.return,at)}Xf&&(Xf=!1,Cy(e));break;case 4:o=Yn,Yn=fc(e.stateNode.containerInfo),an(n,e),on(e),Yn=o;break;case 12:an(n,e),on(e);break;case 31:an(n,e),on(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ju(e,o)));break;case 13:an(n,e),on(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(tc=We()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ju(e,o)));break;case 22:h=e.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,P=ji,G=Re;if(ji=P||h,Re=G||C,an(n,e),Re=G,ji=P,on(e),o&8192)t:for(n=e.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||C||ji||Re||Ls(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){C=a=n;try{if(f=C.stateNode,h)p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{E=C.stateNode;var Y=C.memoizedProps.style,z=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(at){Kt(C,C.return,at)}}}else if(n.tag===6){if(a===null){C=n;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(at){Kt(C,C.return,at)}}}else if(n.tag===18){if(a===null){C=n;try{var j=C.stateNode;h?y_(j,!0):y_(C.stateNode,!1)}catch(at){Kt(C,C.return,at)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Ju(e,a))));break;case 19:an(n,e),on(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ju(e,o)));break;case 30:break;case 21:break;default:an(n,e),on(e)}}function on(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(vy(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Kf(e);Zu(e,f,h);break;case 5:var p=a.stateNode;a.flags&32&&(rn(p,""),a.flags&=-33);var E=Kf(e);Zu(e,E,p);break;case 3:case 4:var C=a.stateNode.containerInfo,P=Kf(e);Yf(e,P,C);break;default:throw Error(s(161))}}catch(G){Kt(e,e.return,G)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Cy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Cy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Gi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ay(e,n.alternate,n),n=n.sibling}function Ls(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:wr(4,n,n.return),Ls(n);break;case 1:Ei(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&yy(n,n.return,a),Ls(n);break;case 27:ll(n.stateNode);case 26:case 5:Ei(n,n.return),Ls(n);break;case 22:n.memoizedState===null&&Ls(n);break;case 30:Ls(n);break;default:Ls(n)}e=e.sibling}}function Fi(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=e,f=n,p=f.flags;switch(f.tag){case 0:case 11:case 15:Fi(h,f,a),Jo(4,f);break;case 1:if(Fi(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(P){Kt(o,o.return,P)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)sp(C[h],E)}catch(P){Kt(o,o.return,P)}}a&&p&64&&py(f),Wo(f,f.return);break;case 27:Ey(f);case 26:case 5:Fi(h,f,a),a&&o===null&&p&4&&_y(f),Wo(f,f.return);break;case 12:Fi(h,f,a);break;case 31:Fi(h,f,a),a&&p&4&&wy(h,f);break;case 13:Fi(h,f,a),a&&p&4&&Ry(h,f);break;case 22:f.memoizedState===null&&Fi(h,f,a),Wo(f,f.return);break;case 30:break;default:Fi(h,f,a)}n=n.sibling}}function $f(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&zo(a))}function Zf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&zo(e))}function Xn(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Dy(e,n,a,o),n=n.sibling}function Dy(e,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Xn(e,n,a,o),h&2048&&Jo(9,n);break;case 1:Xn(e,n,a,o);break;case 3:Xn(e,n,a,o),h&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&zo(e)));break;case 12:if(h&2048){Xn(e,n,a,o),e=n.stateNode;try{var f=n.memoizedProps,p=f.id,E=f.onPostCommit;typeof E=="function"&&E(p,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Kt(n,n.return,C)}}else Xn(e,n,a,o);break;case 31:Xn(e,n,a,o);break;case 13:Xn(e,n,a,o);break;case 23:break;case 22:f=n.stateNode,p=n.alternate,n.memoizedState!==null?f._visibility&2?Xn(e,n,a,o):tl(e,n):f._visibility&2?Xn(e,n,a,o):(f._visibility|=2,Ca(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),h&2048&&$f(p,n);break;case 24:Xn(e,n,a,o),h&2048&&Zf(n.alternate,n);break;default:Xn(e,n,a,o)}}function Ca(e,n,a,o,h){for(h=h&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,p=n,E=a,C=o,P=p.flags;switch(p.tag){case 0:case 11:case 15:Ca(f,p,E,C,h),Jo(8,p);break;case 23:break;case 22:var G=p.stateNode;p.memoizedState!==null?G._visibility&2?Ca(f,p,E,C,h):tl(f,p):(G._visibility|=2,Ca(f,p,E,C,h)),h&&P&2048&&$f(p.alternate,p);break;case 24:Ca(f,p,E,C,h),h&&P&2048&&Zf(p.alternate,p);break;default:Ca(f,p,E,C,h)}n=n.sibling}}function tl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,h=o.flags;switch(o.tag){case 22:tl(a,o),h&2048&&$f(o.alternate,o);break;case 24:tl(a,o),h&2048&&Zf(o.alternate,o);break;default:tl(a,o)}n=n.sibling}}var el=8192;function Da(e,n,a){if(e.subtreeFlags&el)for(e=e.child;e!==null;)Ny(e,n,a),e=e.sibling}function Ny(e,n,a){switch(e.tag){case 26:Da(e,n,a),e.flags&el&&e.memoizedState!==null&&SS(a,Yn,e.memoizedState,e.memoizedProps);break;case 5:Da(e,n,a);break;case 3:case 4:var o=Yn;Yn=fc(e.stateNode.containerInfo),Da(e,n,a),Yn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=el,el=16777216,Da(e,n,a),el=o):Da(e,n,a));break;default:Da(e,n,a)}}function Oy(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function nl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Le=o,Vy(o,e)}Oy(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)My(e),e=e.sibling}function My(e){switch(e.tag){case 0:case 11:case 15:nl(e),e.flags&2048&&wr(9,e,e.return);break;case 3:nl(e);break;case 12:nl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Wu(e)):nl(e);break;default:nl(e)}}function Wu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Le=o,Vy(o,e)}Oy(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:wr(8,n,n.return),Wu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Wu(n));break;default:Wu(n)}e=e.sibling}}function Vy(e,n){for(;Le!==null;){var a=Le;switch(a.tag){case 0:case 11:case 15:wr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:zo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Le=o;else t:for(a=e;Le!==null;){o=Le;var h=o.sibling,f=o.return;if(Sy(o),o===a){Le=null;break t}if(h!==null){h.return=f,Le=h;break t}Le=f}}}var PA={getCacheForType:function(e){var n=je(Se),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return je(Se).controller.signal}},zA=typeof WeakMap=="function"?WeakMap:Map,qt=0,te=null,wt=null,It=0,Qt=0,_n=null,Rr=!1,Na=!1,Jf=!1,Qi=0,he=0,Ir=0,ks=0,Wf=0,vn=0,Oa=0,il=null,ln=null,td=!1,tc=0,xy=0,ec=1/0,nc=null,Cr=null,Me=0,Dr=null,Ma=null,Ki=0,ed=0,nd=null,Uy=null,rl=0,id=null;function En(){return(qt&2)!==0&&It!==0?It&-It:q.T!==null?ud():iu()}function Ly(){if(vn===0)if((It&536870912)===0||xt){var e=cs;cs<<=1,(cs&3932160)===0&&(cs=262144),vn=e}else vn=536870912;return e=pn.current,e!==null&&(e.flags|=32),vn}function un(e,n,a){(e===te&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)&&(Va(e,0),Nr(e,It,vn,!1)),hs(e,a),((qt&2)===0||e!==te)&&(e===te&&((qt&2)===0&&(ks|=a),he===4&&Nr(e,It,vn,!1)),Ti(e))}function ky(e,n,a){if((qt&6)!==0)throw Error(s(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||zn(e,n),h=o?jA(e,n):sd(e,n,!0),f=o;do{if(h===0){Na&&!o&&Nr(e,n,0,!1);break}else{if(a=e.current.alternate,f&&!BA(a)){h=sd(e,n,!1),f=!1;continue}if(h===2){if(f=n,e.errorRecoveryDisabledLanes&f)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){n=p;t:{var E=e;h=il;var C=E.current.memoizedState.isDehydrated;if(C&&(Va(E,p).flags|=256),p=sd(E,p,!1),p!==2){if(Jf&&!C){E.errorRecoveryDisabledLanes|=f,ks|=f,h=4;break t}f=ln,ln=h,f!==null&&(ln===null?ln=f:ln.push.apply(ln,f))}h=p}if(f=!1,h!==2)continue}}if(h===1){Va(e,0),Nr(e,n,0,!0);break}t:{switch(o=e,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Nr(o,n,vn,!Rr);break t;case 2:ln=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(h=tc+300-We(),10<h)){if(Nr(o,n,vn,!Rr),ii(o,0,!0)!==0)break t;Ki=n,o.timeoutHandle=m_(Py.bind(null,o,a,ln,nc,td,n,vn,ks,Oa,Rr,f,"Throttled",-0,0),h);break t}Py(o,a,ln,nc,td,n,vn,ks,Oa,Rr,f,null,-0,0)}}break}while(!0);Ti(e)}function Py(e,n,a,o,h,f,p,E,C,P,G,Y,z,j){if(e.timeoutHandle=-1,Y=n.subtreeFlags,Y&8192||(Y&16785408)===16785408){Y={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:jn},Ny(n,f,Y);var at=(f&62914560)===f?tc-We():(f&4194048)===f?xy-We():0;if(at=bS(Y,at),at!==null){Ki=f,e.cancelPendingCommit=at(Qy.bind(null,e,n,f,a,o,h,p,E,C,G,Y,null,z,j)),Nr(e,f,p,!P);return}}Qy(e,n,f,a,o,h,p,E,C)}function BA(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!mn(f(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Nr(e,n,a,o){n&=~Wf,n&=~ks,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var h=n;0<h;){var f=31-de(h),p=1<<f;o[f]=-1,h&=~p}a!==0&&fs(e,a,n)}function ic(){return(qt&6)===0?(sl(0),!1):!0}function rd(){if(wt!==null){if(Qt===0)var e=wt.return;else e=wt,Li=Cs=null,Ef(e),Sa=null,qo=0,e=wt;for(;e!==null;)gy(e.alternate,e),e=e.return;wt=null}}function Va(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,aS(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ki=0,rd(),te=e,wt=a=xi(e.current,null),It=n,Qt=0,_n=null,Rr=!1,Na=zn(e,n),Jf=!1,Oa=vn=Wf=ks=Ir=he=0,ln=il=null,td=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var h=31-de(o),f=1<<h;n|=e[h],o&=~f}return Qi=n,bu(),a}function zy(e,n){At=null,q.H=Xo,n===Aa||n===Mu?(n=ep(),Qt=3):n===lf?(n=ep(),Qt=4):Qt=n===Lf?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,_n=n,wt===null&&(he=1,Qu(e,Nn(n,e.current)))}function By(){var e=pn.current;return e===null?!0:(It&4194048)===It?xn===null:(It&62914560)===It||(It&536870912)!==0?e===xn:!1}function qy(){var e=q.H;return q.H=Xo,e===null?Xo:e}function jy(){var e=q.A;return q.A=PA,e}function rc(){he=4,Rr||(It&4194048)!==It&&pn.current!==null||(Na=!0),(Ir&134217727)===0&&(ks&134217727)===0||te===null||Nr(te,It,vn,!1)}function sd(e,n,a){var o=qt;qt|=2;var h=qy(),f=jy();(te!==e||It!==n)&&(nc=null,Va(e,n)),n=!1;var p=he;t:do try{if(Qt!==0&&wt!==null){var E=wt,C=_n;switch(Qt){case 8:rd(),p=6;break t;case 3:case 2:case 9:case 6:pn.current===null&&(n=!0);var P=Qt;if(Qt=0,_n=null,xa(e,E,C,P),a&&Na){p=0;break t}break;default:P=Qt,Qt=0,_n=null,xa(e,E,C,P)}}qA(),p=he;break}catch(G){zy(e,G)}while(!0);return n&&e.shellSuspendCounter++,Li=Cs=null,qt=o,q.H=h,q.A=f,wt===null&&(te=null,It=0,bu()),p}function qA(){for(;wt!==null;)Hy(wt)}function jA(e,n){var a=qt;qt|=2;var o=qy(),h=jy();te!==e||It!==n?(nc=null,ec=We()+500,Va(e,n)):Na=zn(e,n);t:do try{if(Qt!==0&&wt!==null){n=wt;var f=_n;e:switch(Qt){case 1:Qt=0,_n=null,xa(e,n,f,1);break;case 2:case 9:if(Wg(f)){Qt=0,_n=null,Gy(n);break}n=function(){Qt!==2&&Qt!==9||te!==e||(Qt=7),Ti(e)},f.then(n,n);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:Wg(f)?(Qt=0,_n=null,Gy(n)):(Qt=0,_n=null,xa(e,n,f,7));break;case 5:var p=null;switch(wt.tag){case 26:p=wt.memoizedState;case 5:case 27:var E=wt;if(p?D_(p):E.stateNode.complete){Qt=0,_n=null;var C=E.sibling;if(C!==null)wt=C;else{var P=E.return;P!==null?(wt=P,sc(P)):wt=null}break e}}Qt=0,_n=null,xa(e,n,f,5);break;case 6:Qt=0,_n=null,xa(e,n,f,6);break;case 8:rd(),he=6;break t;default:throw Error(s(462))}}HA();break}catch(G){zy(e,G)}while(!0);return Li=Cs=null,q.H=o,q.A=h,qt=a,wt!==null?0:(te=null,It=0,bu(),he)}function HA(){for(;wt!==null&&!xh();)Hy(wt)}function Hy(e){var n=dy(e.alternate,e,Qi);e.memoizedProps=e.pendingProps,n===null?sc(e):wt=n}function Gy(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=oy(a,n,n.pendingProps,n.type,void 0,It);break;case 11:n=oy(a,n,n.pendingProps,n.type.render,n.ref,It);break;case 5:Ef(n);default:gy(a,n),n=wt=jg(n,Qi),n=dy(a,n,Qi)}e.memoizedProps=e.pendingProps,n===null?sc(e):wt=n}function xa(e,n,a,o){Li=Cs=null,Ef(n),Sa=null,qo=0;var h=n.return;try{if(OA(e,h,n,a,It)){he=1,Qu(e,Nn(a,e.current)),wt=null;return}}catch(f){if(h!==null)throw wt=h,f;he=1,Qu(e,Nn(a,e.current)),wt=null;return}n.flags&32768?(xt||o===1?e=!0:Na||(It&536870912)!==0?e=!1:(Rr=e=!0,(o===2||o===9||o===3||o===6)&&(o=pn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Fy(n,e)):sc(n)}function sc(e){var n=e;do{if((n.flags&32768)!==0){Fy(n,Rr);return}e=n.return;var a=xA(n.alternate,n,Qi);if(a!==null){wt=a;return}if(n=n.sibling,n!==null){wt=n;return}wt=n=e}while(n!==null);he===0&&(he=5)}function Fy(e,n){do{var a=UA(e.alternate,e);if(a!==null){a.flags&=32767,wt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){wt=e;return}wt=e=a}while(e!==null);he=6,wt=null}function Qy(e,n,a,o,h,f,p,E,C){e.cancelPendingCommit=null;do ac();while(Me!==0);if((qt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(f=n.lanes|n.childLanes,f|=Qh,kh(e,a,f,p,E,C),e===te&&(wt=te=null,It=0),Ma=n,Dr=e,Ki=a,ed=f,nd=h,Uy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,KA(ar,function(){return Zy(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=q.T,q.T=null,h=tt.p,tt.p=2,p=qt,qt|=4;try{LA(e,n,a)}finally{qt=p,tt.p=h,q.T=o}}Me=1,Ky(),Yy(),Xy()}}function Ky(){if(Me===1){Me=0;var e=Dr,n=Ma,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var o=tt.p;tt.p=2;var h=qt;qt|=4;try{Iy(n,e);var f=yd,p=Vg(e.containerInfo),E=f.focusedElem,C=f.selectionRange;if(p!==E&&E&&E.ownerDocument&&Mg(E.ownerDocument.documentElement,E)){if(C!==null&&qh(E)){var P=C.start,G=C.end;if(G===void 0&&(G=P),"selectionStart"in E)E.selectionStart=P,E.selectionEnd=Math.min(G,E.value.length);else{var Y=E.ownerDocument||document,z=Y&&Y.defaultView||window;if(z.getSelection){var j=z.getSelection(),at=E.textContent.length,mt=Math.min(C.start,at),Jt=C.end===void 0?mt:Math.min(C.end,at);!j.extend&&mt>Jt&&(p=Jt,Jt=mt,mt=p);var U=Og(E,mt),O=Og(E,Jt);if(U&&O&&(j.rangeCount!==1||j.anchorNode!==U.node||j.anchorOffset!==U.offset||j.focusNode!==O.node||j.focusOffset!==O.offset)){var k=Y.createRange();k.setStart(U.node,U.offset),j.removeAllRanges(),mt>Jt?(j.addRange(k),j.extend(O.node,O.offset)):(k.setEnd(O.node,O.offset),j.addRange(k))}}}}for(Y=[],j=E;j=j.parentNode;)j.nodeType===1&&Y.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Y.length;E++){var F=Y[E];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}_c=!!pd,yd=pd=null}finally{qt=h,tt.p=o,q.T=a}}e.current=n,Me=2}}function Yy(){if(Me===2){Me=0;var e=Dr,n=Ma,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var o=tt.p;tt.p=2;var h=qt;qt|=4;try{Ay(e,n.alternate,n)}finally{qt=h,tt.p=o,q.T=a}}Me=3}}function Xy(){if(Me===4||Me===3){Me=0,$l();var e=Dr,n=Ma,a=Ki,o=Uy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Me=5:(Me=0,Ma=Dr=null,$y(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Cr=null),Ni(a),n=n.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(Pn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=q.T,h=tt.p,tt.p=2,q.T=null;try{for(var f=e.onRecoverableError,p=0;p<o.length;p++){var E=o[p];f(E.value,{componentStack:E.stack})}}finally{q.T=n,tt.p=h}}(Ki&3)!==0&&ac(),Ti(e),h=e.pendingLanes,(a&261930)!==0&&(h&42)!==0?e===id?rl++:(rl=0,id=e):rl=0,sl(0)}}function $y(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,zo(n)))}function ac(){return Ky(),Yy(),Xy(),Zy()}function Zy(){if(Me!==5)return!1;var e=Dr,n=ed;ed=0;var a=Ni(Ki),o=q.T,h=tt.p;try{tt.p=32>a?32:a,q.T=null,a=nd,nd=null;var f=Dr,p=Ki;if(Me=0,Ma=Dr=null,Ki=0,(qt&6)!==0)throw Error(s(331));var E=qt;if(qt|=4,My(f.current),Dy(f,f.current,p,a),qt=E,sl(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(Pn,f)}catch{}return!0}finally{tt.p=h,q.T=o,$y(e,n)}}function Jy(e,n,a){n=Nn(a,n),n=Uf(e.stateNode,n,2),e=Ar(e,n,2),e!==null&&(hs(e,2),Ti(e))}function Kt(e,n,a){if(e.tag===3)Jy(e,e,a);else for(;n!==null;){if(n.tag===3){Jy(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Cr===null||!Cr.has(o))){e=Nn(a,e),a=Wp(2),o=Ar(n,a,2),o!==null&&(ty(a,o,n,e),hs(o,2),Ti(o));break}}n=n.return}}function ad(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new zA;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(Jf=!0,h.add(a),e=GA.bind(null,e,n,a),n.then(e,e))}function GA(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,te===e&&(It&a)===a&&(he===4||he===3&&(It&62914560)===It&&300>We()-tc?(qt&2)===0&&Va(e,0):Wf|=a,Oa===It&&(Oa=0)),Ti(e)}function Wy(e,n){n===0&&(n=nu()),e=ws(e,n),e!==null&&(hs(e,n),Ti(e))}function FA(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Wy(e,a)}function QA(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Wy(e,a)}function KA(e,n){return Oe(e,n)}var oc=null,Ua=null,od=!1,lc=!1,ld=!1,Or=0;function Ti(e){e!==Ua&&e.next===null&&(Ua===null?oc=Ua=e:Ua=Ua.next=e),lc=!0,od||(od=!0,XA())}function sl(e,n){if(!ld&&lc){ld=!0;do for(var a=!1,o=oc;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var p=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-de(42|e)+1)-1,f&=h&~(p&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,i_(o,f))}else f=It,f=ii(o,o===te?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||zn(o,f)||(a=!0,i_(o,f));o=o.next}while(a);ld=!1}}function YA(){t_()}function t_(){lc=od=!1;var e=0;Or!==0&&sS()&&(e=Or);for(var n=We(),a=null,o=oc;o!==null;){var h=o.next,f=e_(o,n);f===0?(o.next=null,a===null?oc=h:a.next=h,h===null&&(Ua=a)):(a=o,(e!==0||(f&3)!==0)&&(lc=!0)),o=h}Me!==0&&Me!==5||sl(e),Or!==0&&(Or=0)}function e_(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var p=31-de(f),E=1<<p,C=h[p];C===-1?((E&a)===0||(E&o)!==0)&&(h[p]=Lh(E,n)):C<=n&&(e.expiredLanes|=E),f&=~E}if(n=te,a=It,a=ii(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(Qt===2||Qt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&sr(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||zn(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&sr(o),Ni(a)){case 2:case 8:a=go;break;case 32:a=ar;break;case 268435456:a=Zl;break;default:a=ar}return o=n_.bind(null,e),a=Oe(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&sr(o),e.callbackPriority=2,e.callbackNode=null,2}function n_(e,n){if(Me!==0&&Me!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ac()&&e.callbackNode!==a)return null;var o=It;return o=ii(e,e===te?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(ky(e,o,n),e_(e,We()),e.callbackNode!=null&&e.callbackNode===a?n_.bind(null,e):null)}function i_(e,n){if(ac())return null;ky(e,n,!0)}function XA(){oS(function(){(qt&6)!==0?Oe(mo,YA):t_()})}function ud(){if(Or===0){var e=Ea;e===0&&(e=ei,ei<<=1,(ei&261888)===0&&(ei=256)),Or=e}return Or}function r_(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:sa(""+e)}function s_(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function $A(e,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var f=r_((h[xe]||null).action),p=o.submitter;p&&(n=(n=p[xe]||null)?r_(n.formAction):p.getAttribute("formAction"),n!==null&&(f=n,p=null));var E=new mi("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Or!==0){var C=p?s_(h,p):new FormData(h);Df(a,{pending:!0,data:C,method:h.method,action:f},null,C)}}else typeof f=="function"&&(E.preventDefault(),C=p?s_(h,p):new FormData(h),Df(a,{pending:!0,data:C,method:h.method,action:f},f,C))},currentTarget:h}]})}}for(var cd=0;cd<Fh.length;cd++){var hd=Fh[cd],ZA=hd.toLowerCase(),JA=hd[0].toUpperCase()+hd.slice(1);Kn(ZA,"on"+JA)}Kn(Lg,"onAnimationEnd"),Kn(kg,"onAnimationIteration"),Kn(Pg,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(mA,"onTransitionRun"),Kn(gA,"onTransitionStart"),Kn(pA,"onTransitionCancel"),Kn(zg,"onTransitionEnd"),ci("onMouseEnter",["mouseout","mouseover"]),ci("onMouseLeave",["mouseout","mouseover"]),ci("onPointerEnter",["pointerout","pointerover"]),ci("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(al));function a_(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var p=o.length-1;0<=p;p--){var E=o[p],C=E.instance,P=E.currentTarget;if(E=E.listener,C!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=P;try{f(h)}catch(G){Su(G)}h.currentTarget=null,f=C}else for(p=0;p<o.length;p++){if(E=o[p],C=E.instance,P=E.currentTarget,E=E.listener,C!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=P;try{f(h)}catch(G){Su(G)}h.currentTarget=null,f=C}}}}function Rt(e,n){var a=n[ta];a===void 0&&(a=n[ta]=new Set);var o=e+"__bubble";a.has(o)||(o_(n,e,2,!1),a.add(o))}function fd(e,n,a){var o=0;n&&(o|=4),o_(a,e,o,n)}var uc="_reactListening"+Math.random().toString(36).slice(2);function dd(e){if(!e[uc]){e[uc]=!0,_o.forEach(function(a){a!=="selectionchange"&&(WA.has(a)||fd(a,!1,e),fd(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[uc]||(n[uc]=!0,fd("selectionchange",!1,n))}}function o_(e,n,a,o){switch(L_(n)){case 2:var h=IS;break;case 8:h=CS;break;default:h=Cd}a=h.bind(null,n,a,e),h=void 0,!ys||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(n,a,{capture:!0,passive:h}):e.addEventListener(n,a,!0):h!==void 0?e.addEventListener(n,a,{passive:h}):e.addEventListener(n,a,!1)}function md(e,n,a,o,h){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var p=o.tag;if(p===3||p===4){var E=o.stateNode.containerInfo;if(E===h)break;if(p===4)for(p=o.return;p!==null;){var C=p.tag;if((C===3||C===4)&&p.stateNode.containerInfo===h)return;p=p.return}for(;E!==null;){if(p=oi(E),p===null)return;if(C=p.tag,C===5||C===6||C===26||C===27){o=f=p;continue t}E=E.parentNode}}o=o.return}fr(function(){var P=f,G=Rn(a),Y=[];t:{var z=Bg.get(e);if(z!==void 0){var j=mi,at=e;switch(e){case"keypress":if(vs(a)===0)break t;case"keydown":case"keyup":j=Eu;break;case"focusin":at="focus",j=Ts;break;case"focusout":at="blur",j=Ts;break;case"beforeblur":case"afterblur":j=Ts;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Oo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=m;break;case Lg:case kg:case Pg:j=du;break;case zg:j=T;break;case"scroll":case"scrollend":j=No;break;case"wheel":j=B;break;case"copy":case"cut":case"paste":j=mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Vi;break;case"toggle":case"beforetoggle":j=Tt}var mt=(n&4)!==0,Jt=!mt&&(e==="scroll"||e==="scrollend"),U=mt?z!==null?z+"Capture":null:z;mt=[];for(var O=P,k;O!==null;){var F=O;if(k=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||k===null||U===null||(F=Hn(O,U),F!=null&&mt.push(ol(O,F,k))),Jt)break;O=O.return}0<mt.length&&(z=new j(z,at,null,a,G),Y.push({event:z,listeners:mt}))}}if((n&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",z&&a!==Io&&(at=a.relatedTarget||a.fromElement)&&(oi(at)||at[si]))break t;if((j||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,j?(at=a.relatedTarget||a.toElement,j=P,at=at?oi(at):null,at!==null&&(Jt=c(at),mt=at.tag,at!==Jt||mt!==5&&mt!==27&&mt!==6)&&(at=null)):(j=null,at=P),j!==at)){if(mt=Oo,F="onMouseLeave",U="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(mt=Vi,F="onPointerLeave",U="onPointerEnter",O="pointer"),Jt=j==null?z:fn(j),k=at==null?z:fn(at),z=new mt(F,O+"leave",j,a,G),z.target=Jt,z.relatedTarget=k,F=null,oi(G)===P&&(mt=new mt(U,O+"enter",at,a,G),mt.target=k,mt.relatedTarget=Jt,F=mt),Jt=F,j&&at)e:{for(mt=tS,U=j,O=at,k=0,F=U;F;F=mt(F))k++;F=0;for(var ht=O;ht;ht=mt(ht))F++;for(;0<k-F;)U=mt(U),k--;for(;0<F-k;)O=mt(O),F--;for(;k--;){if(U===O||O!==null&&U===O.alternate){mt=U;break e}U=mt(U),O=mt(O)}mt=null}else mt=null;j!==null&&l_(Y,z,j,mt,!1),at!==null&&Jt!==null&&l_(Y,Jt,at,mt,!0)}}t:{if(z=P?fn(P):window,j=z.nodeName&&z.nodeName.toLowerCase(),j==="select"||j==="input"&&z.type==="file")var kt=wg;else if(Sg(z))if(Rg)kt=hA;else{kt=uA;var ot=lA}else j=z.nodeName,!j||j.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?P&&ra(P.elementType)&&(kt=wg):kt=cA;if(kt&&(kt=kt(e,P))){bg(Y,kt,a,G);break t}ot&&ot(e,z,P),e==="focusout"&&P&&z.type==="number"&&P.memoizedProps.value!=null&&bo(z,"number",z.value)}switch(ot=P?fn(P):window,e){case"focusin":(Sg(ot)||ot.contentEditable==="true")&&(fa=ot,jh=P,Lo=null);break;case"focusout":Lo=jh=fa=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,xg(Y,a,G);break;case"selectionchange":if(dA)break;case"keydown":case"keyup":xg(Y,a,G)}var bt;if(Bt)t:{switch(e){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else ha?As(e,a)&&(Ct="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ct="onCompositionStart");Ct&&(yi&&a.locale!=="ko"&&(ha||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&ha&&(bt=Do()):(di=G,Co="value"in di?di.value:di.textContent,ha=!0)),ot=cc(P,Ct),0<ot.length&&(Ct=new pi(Ct,e,null,a,G),Y.push({event:Ct,listeners:ot}),bt?Ct.data=bt:(bt=ca(a),bt!==null&&(Ct.data=bt)))),(bt=Cn?rA(e,a):sA(e,a))&&(Ct=cc(P,"onBeforeInput"),0<Ct.length&&(ot=new pi("onBeforeInput","beforeinput",null,a,G),Y.push({event:ot,listeners:Ct}),ot.data=bt)),$A(Y,e,P,a,G)}a_(Y,n)})}function ol(e,n,a){return{instance:e,listener:n,currentTarget:a}}function cc(e,n){for(var a=n+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Hn(e,a),h!=null&&o.unshift(ol(e,h,f)),h=Hn(e,n),h!=null&&o.push(ol(e,h,f))),e.tag===3)return o;e=e.return}return[]}function tS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function l_(e,n,a,o,h){for(var f=n._reactName,p=[];a!==null&&a!==o;){var E=a,C=E.alternate,P=E.stateNode;if(E=E.tag,C!==null&&C===o)break;E!==5&&E!==26&&E!==27||P===null||(C=P,h?(P=Hn(a,f),P!=null&&p.unshift(ol(a,P,C))):h||(P=Hn(a,f),P!=null&&p.push(ol(a,P,C)))),a=a.return}p.length!==0&&e.push({event:n,listeners:p})}var eS=/\r\n?/g,nS=/\u0000|\uFFFD/g;function u_(e){return(typeof e=="string"?e:""+e).replace(eS,`
`).replace(nS,"")}function c_(e,n){return n=u_(n),u_(e)===n}function Zt(e,n,a,o,h,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||rn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&rn(e,""+o);break;case"className":dn(e,"class",o);break;case"tabIndex":dn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":dn(e,a,o);break;case"style":Ro(e,o,f);break;case"data":if(n!=="object"){dn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=sa(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&Zt(e,n,"name",h.name,h,null),Zt(e,n,"formEncType",h.formEncType,h,null),Zt(e,n,"formMethod",h.formMethod,h,null),Zt(e,n,"formTarget",h.formTarget,h,null)):(Zt(e,n,"encType",h.encType,h,null),Zt(e,n,"method",h.method,h,null),Zt(e,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=sa(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=jn);break;case"onScroll":o!=null&&Rt("scroll",e);break;case"onScrollEnd":o!=null&&Rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=sa(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Rt("beforetoggle",e),Rt("toggle",e),na(e,"popover",o);break;case"xlinkActuate":Ae(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ae(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ae(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ae(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ae(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ae(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ae(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":na(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cu.get(a)||a,na(e,a,o))}}function gd(e,n,a,o,h,f){switch(a){case"style":Ro(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?rn(e,o):(typeof o=="number"||typeof o=="bigint")&&rn(e,""+o);break;case"onScroll":o!=null&&Rt("scroll",e);break;case"onScrollEnd":o!=null&&Rt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vo.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),f=e[xe]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(n,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):na(e,a,o)}}}function Ge(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",e),Rt("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var p=a[f];if(p!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Zt(e,n,f,p,a,null)}}h&&Zt(e,n,"srcSet",a.srcSet,a,null),o&&Zt(e,n,"src",a.src,a,null);return;case"input":Rt("invalid",e);var E=f=p=h=null,C=null,P=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":h=G;break;case"type":p=G;break;case"checked":C=G;break;case"defaultChecked":P=G;break;case"value":f=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:Zt(e,n,o,G,a,null)}}ou(e,f,E,C,P,p,h,!1);return;case"select":Rt("invalid",e),o=p=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":p=E;break;case"multiple":o=E;default:Zt(e,n,h,E,a,null)}n=f,a=p,e.multiple=!!o,n!=null?lr(e,!!o,n,!1):a!=null&&lr(e,!!o,a,!0);return;case"textarea":Rt("invalid",e),f=h=o=null;for(p in a)if(a.hasOwnProperty(p)&&(E=a[p],E!=null))switch(p){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Zt(e,n,p,E,a,null)}ur(e,o,h,f);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(o=a[C],o!=null))switch(C){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Zt(e,n,C,o,a,null)}return;case"dialog":Rt("beforetoggle",e),Rt("toggle",e),Rt("cancel",e),Rt("close",e);break;case"iframe":case"object":Rt("load",e);break;case"video":case"audio":for(o=0;o<al.length;o++)Rt(al[o],e);break;case"image":Rt("error",e),Rt("load",e);break;case"details":Rt("toggle",e);break;case"embed":case"source":case"link":Rt("error",e),Rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(o=a[P],o!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Zt(e,n,P,o,a,null)}return;default:if(ra(n)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&gd(e,n,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Zt(e,n,E,o,a,null))}function iS(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,p=null,E=null,C=null,P=null,G=null;for(j in a){var Y=a[j];if(a.hasOwnProperty(j)&&Y!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":C=Y;default:o.hasOwnProperty(j)||Zt(e,n,j,null,o,Y)}}for(var z in o){var j=o[z];if(Y=a[z],o.hasOwnProperty(z)&&(j!=null||Y!=null))switch(z){case"type":f=j;break;case"name":h=j;break;case"checked":P=j;break;case"defaultChecked":G=j;break;case"value":p=j;break;case"defaultValue":E=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,n));break;default:j!==Y&&Zt(e,n,z,j,o,Y)}}ia(e,p,E,C,P,G,f,h);return;case"select":j=p=E=z=null;for(f in a)if(C=a[f],a.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":j=C;default:o.hasOwnProperty(f)||Zt(e,n,f,null,o,C)}for(h in o)if(f=o[h],C=a[h],o.hasOwnProperty(h)&&(f!=null||C!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":p=f;default:f!==C&&Zt(e,n,h,f,o,C)}n=E,a=p,o=j,z!=null?lr(e,!!a,z,!1):!!o!=!!a&&(n!=null?lr(e,!!a,n,!0):lr(e,!!a,a?[]:"",!1));return;case"textarea":j=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Zt(e,n,E,null,o,h)}for(p in o)if(h=o[p],f=a[p],o.hasOwnProperty(p)&&(h!=null||f!=null))switch(p){case"value":z=h;break;case"defaultValue":j=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Zt(e,n,p,h,o,f)}lu(e,z,j);return;case"option":for(var at in a)if(z=a[at],a.hasOwnProperty(at)&&z!=null&&!o.hasOwnProperty(at))switch(at){case"selected":e.selected=!1;break;default:Zt(e,n,at,null,o,z)}for(C in o)if(z=o[C],j=a[C],o.hasOwnProperty(C)&&z!==j&&(z!=null||j!=null))switch(C){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Zt(e,n,C,z,o,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in a)z=a[mt],a.hasOwnProperty(mt)&&z!=null&&!o.hasOwnProperty(mt)&&Zt(e,n,mt,null,o,z);for(P in o)if(z=o[P],j=a[P],o.hasOwnProperty(P)&&z!==j&&(z!=null||j!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,n));break;default:Zt(e,n,P,z,o,j)}return;default:if(ra(n)){for(var Jt in a)z=a[Jt],a.hasOwnProperty(Jt)&&z!==void 0&&!o.hasOwnProperty(Jt)&&gd(e,n,Jt,void 0,o,z);for(G in o)z=o[G],j=a[G],!o.hasOwnProperty(G)||z===j||z===void 0&&j===void 0||gd(e,n,G,z,o,j);return}}for(var U in a)z=a[U],a.hasOwnProperty(U)&&z!=null&&!o.hasOwnProperty(U)&&Zt(e,n,U,null,o,z);for(Y in o)z=o[Y],j=a[Y],!o.hasOwnProperty(Y)||z===j||z==null&&j==null||Zt(e,n,Y,z,o,j)}function h_(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],f=h.transferSize,p=h.initiatorType,E=h.duration;if(f&&E&&h_(p)){for(p=0,E=h.responseEnd,o+=1;o<a.length;o++){var C=a[o],P=C.startTime;if(P>E)break;var G=C.transferSize,Y=C.initiatorType;G&&h_(Y)&&(C=C.responseEnd,p+=G*(C<E?1:(E-P)/(C-P)))}if(--o,n+=8*(f+p)/(h.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var pd=null,yd=null;function hc(e){return e.nodeType===9?e:e.ownerDocument}function f_(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d_(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function _d(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var vd=null;function sS(){var e=window.event;return e&&e.type==="popstate"?e===vd?!1:(vd=e,!0):(vd=null,!1)}var m_=typeof setTimeout=="function"?setTimeout:void 0,aS=typeof clearTimeout=="function"?clearTimeout:void 0,g_=typeof Promise=="function"?Promise:void 0,oS=typeof queueMicrotask=="function"?queueMicrotask:typeof g_<"u"?function(e){return g_.resolve(null).then(e).catch(lS)}:m_;function lS(e){setTimeout(function(){throw e})}function Mr(e){return e==="head"}function p_(e,n){var a=n,o=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(h),za(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")ll(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ll(a);for(var f=a.firstChild;f;){var p=f.nextSibling,E=f.nodeName;f[ai]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=p}}else a==="body"&&ll(e.ownerDocument.body);a=h}while(a);za(n)}function y_(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Ed(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ed(a),ea(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function uS(e,n,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ai])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Un(e.nextSibling),e===null)break}return null}function cS(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Un(e.nextSibling),e===null))return null;return e}function __(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Un(e.nextSibling),e===null))return null;return e}function Td(e){return e.data==="$?"||e.data==="$~"}function Ad(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function hS(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Un(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Sd=null;function v_(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Un(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function E_(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function T_(e,n,a){switch(n=hc(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ll(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);ea(e)}var Ln=new Map,A_=new Set;function fc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Yi=tt.d;tt.d={f:fS,r:dS,D:mS,C:gS,L:pS,m:yS,X:vS,S:_S,M:ES};function fS(){var e=Yi.f(),n=ic();return e||n}function dS(e){var n=wn(e);n!==null&&n.tag===5&&n.type==="form"?zp(n):Yi.r(e)}var La=typeof document>"u"?null:document;function S_(e,n,a){var o=La;if(o&&typeof n=="string"&&n){var h=nn(n);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),A_.has(h)||(A_.add(h),e={rel:e,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),Ge(n,"link",e),Te(n),o.head.appendChild(n)))}}function mS(e){Yi.D(e),S_("dns-prefetch",e,null)}function gS(e,n){Yi.C(e,n),S_("preconnect",e,n)}function pS(e,n,a){Yi.L(e,n,a);var o=La;if(o&&e&&n){var h='link[rel="preload"][as="'+nn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+nn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+nn(a.imageSizes)+'"]')):h+='[href="'+nn(e)+'"]';var f=h;switch(n){case"style":f=ka(e);break;case"script":f=Pa(e)}Ln.has(f)||(e=S({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Ln.set(f,e),o.querySelector(h)!==null||n==="style"&&o.querySelector(ul(f))||n==="script"&&o.querySelector(cl(f))||(n=o.createElement("link"),Ge(n,"link",e),Te(n),o.head.appendChild(n)))}}function yS(e,n){Yi.m(e,n);var a=La;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+nn(o)+'"][href="'+nn(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Pa(e)}if(!Ln.has(f)&&(e=S({rel:"modulepreload",href:e},n),Ln.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cl(f)))return}o=a.createElement("link"),Ge(o,"link",e),Te(o),a.head.appendChild(o)}}}function _S(e,n,a){Yi.S(e,n,a);var o=La;if(o&&e){var h=li(o).hoistableStyles,f=ka(e);n=n||"default";var p=h.get(f);if(!p){var E={loading:0,preload:null};if(p=o.querySelector(ul(f)))E.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Ln.get(f))&&bd(e,a);var C=p=o.createElement("link");Te(C),Ge(C,"link",e),C._p=new Promise(function(P,G){C.onload=P,C.onerror=G}),C.addEventListener("load",function(){E.loading|=1}),C.addEventListener("error",function(){E.loading|=2}),E.loading|=4,dc(p,n,o)}p={type:"stylesheet",instance:p,count:1,state:E},h.set(f,p)}}}function vS(e,n){Yi.X(e,n);var a=La;if(a&&e){var o=li(a).hoistableScripts,h=Pa(e),f=o.get(h);f||(f=a.querySelector(cl(h)),f||(e=S({src:e,async:!0},n),(n=Ln.get(h))&&wd(e,n),f=a.createElement("script"),Te(f),Ge(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function ES(e,n){Yi.M(e,n);var a=La;if(a&&e){var o=li(a).hoistableScripts,h=Pa(e),f=o.get(h);f||(f=a.querySelector(cl(h)),f||(e=S({src:e,async:!0,type:"module"},n),(n=Ln.get(h))&&wd(e,n),f=a.createElement("script"),Te(f),Ge(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function b_(e,n,a,o){var h=(h=St.current)?fc(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=ka(a.href),a=li(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ka(a.href);var f=li(h).hoistableStyles,p=f.get(e);if(p||(h=h.ownerDocument||h,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,p),(f=h.querySelector(ul(e)))&&!f._p&&(p.instance=f,p.state.loading=5),Ln.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ln.set(e,a),f||TS(h,e,a,p.state))),n&&o===null)throw Error(s(528,""));return p}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Pa(a),a=li(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function ka(e){return'href="'+nn(e)+'"'}function ul(e){return'link[rel="stylesheet"]['+e+"]"}function w_(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function TS(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Ge(n,"link",a),Te(n),e.head.appendChild(n))}function Pa(e){return'[src="'+nn(e)+'"]'}function cl(e){return"script[async]"+e}function R_(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+nn(a.href)+'"]');if(o)return n.instance=o,Te(o),o;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Te(o),Ge(o,"style",h),dc(o,a.precedence,e),n.instance=o;case"stylesheet":h=ka(a.href);var f=e.querySelector(ul(h));if(f)return n.state.loading|=4,n.instance=f,Te(f),f;o=w_(a),(h=Ln.get(h))&&bd(o,h),f=(e.ownerDocument||e).createElement("link"),Te(f);var p=f;return p._p=new Promise(function(E,C){p.onload=E,p.onerror=C}),Ge(f,"link",o),n.state.loading|=4,dc(f,a.precedence,e),n.instance=f;case"script":return f=Pa(a.src),(h=e.querySelector(cl(f)))?(n.instance=h,Te(h),h):(o=a,(h=Ln.get(f))&&(o=S({},a),wd(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),Te(h),Ge(h,"link",o),e.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,dc(o,a.precedence,e));return n.instance}function dc(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,p=0;p<o.length;p++){var E=o[p];if(E.dataset.precedence===n)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function bd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function wd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var mc=null;function I_(e,n,a){if(mc===null){var o=new Map,h=mc=new Map;h.set(a,o)}else h=mc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[ai]||f[Ee]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var p=f.getAttribute(n)||"";p=e+p;var E=o.get(p);E?E.push(f):o.set(p,[f])}}return o}function C_(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function AS(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function D_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function SS(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=ka(o.href),f=n.querySelector(ul(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=gc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=f,Te(f);return}f=n.ownerDocument||n,o=w_(o),(h=Ln.get(h))&&bd(o,h),f=f.createElement("link"),Te(f);var p=f;p._p=new Promise(function(E,C){p.onload=E,p.onerror=C}),Ge(f,"link",o),a.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=gc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Rd=0;function bS(e,n){return e.stylesheets&&e.count===0&&yc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&yc(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&Rd===0&&(Rd=62500*rS());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&yc(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Rd?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function gc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var pc=null;function yc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,pc=new Map,n.forEach(wS,e),pc=null,gc.call(e))}function wS(e,n){if(!(n.state.loading&4)){var a=pc.get(e);if(a)var o=a.get(null);else{a=new Map,pc.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var p=h[f];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),o=p)}o&&a.set(null,o)}h=n.instance,p=h.getAttribute("data-precedence"),f=a.get(p)||o,f===o&&a.set(null,h),a.set(p,h),this.count++,o=gc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),n.state.loading|=4}}var hl={$$typeof:dt,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function RS(e,n,a,o,h,f,p,E,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ri(0),this.hiddenUpdates=ri(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function N_(e,n,a,o,h,f,p,E,C,P,G,Y){return e=new RS(e,n,a,p,C,P,G,Y,E),n=1,f===!0&&(n|=24),f=gn(3,null,null,n),e.current=f,f.stateNode=e,n=sf(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},uf(f),e}function O_(e){return e?(e=ga,e):ga}function M_(e,n,a,o,h,f){h=O_(h),o.context===null?o.context=h:o.pendingContext=h,o=Tr(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=Ar(e,o,n),a!==null&&(un(a,e,n),Ho(a,e,n))}function V_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Id(e,n){V_(e,n),(e=e.alternate)&&V_(e,n)}function x_(e){if(e.tag===13||e.tag===31){var n=ws(e,67108864);n!==null&&un(n,e,67108864),Id(e,67108864)}}function U_(e){if(e.tag===13||e.tag===31){var n=En();n=ds(n);var a=ws(e,n);a!==null&&un(a,e,n),Id(e,n)}}var _c=!0;function IS(e,n,a,o){var h=q.T;q.T=null;var f=tt.p;try{tt.p=2,Cd(e,n,a,o)}finally{tt.p=f,q.T=h}}function CS(e,n,a,o){var h=q.T;q.T=null;var f=tt.p;try{tt.p=8,Cd(e,n,a,o)}finally{tt.p=f,q.T=h}}function Cd(e,n,a,o){if(_c){var h=Dd(o);if(h===null)md(e,n,o,vc,a),k_(e,o);else if(NS(h,e,n,a,o))o.stopPropagation();else if(k_(e,o),n&4&&-1<DS.indexOf(e)){for(;h!==null;){var f=wn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var p=ni(f.pendingLanes);if(p!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;p;){var C=1<<31-de(p);E.entanglements[1]|=C,p&=~C}Ti(f),(qt&6)===0&&(ec=We()+500,sl(0))}}break;case 31:case 13:E=ws(f,2),E!==null&&un(E,f,2),ic(),Id(f,2)}if(f=Dd(o),f===null&&md(e,n,o,vc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else md(e,n,o,null,a)}}function Dd(e){return e=Rn(e),Nd(e)}var vc=null;function Nd(e){if(vc=null,e=oi(e),e!==null){var n=c(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===31){if(e=g(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return vc=e,null}function L_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(us()){case mo:return 2;case go:return 8;case ar:case Uh:return 32;case Zl:return 268435456;default:return 32}default:return 32}}var Od=!1,Vr=null,xr=null,Ur=null,fl=new Map,dl=new Map,Lr=[],DS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k_(e,n){switch(e){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":fl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(n.pointerId)}}function ml(e,n,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},n!==null&&(n=wn(n),n!==null&&x_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),e)}function NS(e,n,a,o,h){switch(n){case"focusin":return Vr=ml(Vr,e,n,a,o,h),!0;case"dragenter":return xr=ml(xr,e,n,a,o,h),!0;case"mouseover":return Ur=ml(Ur,e,n,a,o,h),!0;case"pointerover":var f=h.pointerId;return fl.set(f,ml(fl.get(f)||null,e,n,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,dl.set(f,ml(dl.get(f)||null,e,n,a,o,h)),!0}return!1}function P_(e){var n=oi(e.target);if(n!==null){var a=c(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,Bn(e.priority,function(){U_(a)});return}}else if(n===31){if(n=g(a),n!==null){e.blockedOn=n,Bn(e.priority,function(){U_(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ec(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Dd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Io=o,a.target.dispatchEvent(o),Io=null}else return n=wn(a),n!==null&&x_(n),e.blockedOn=a,!1;n.shift()}return!0}function z_(e,n,a){Ec(e)&&a.delete(n)}function OS(){Od=!1,Vr!==null&&Ec(Vr)&&(Vr=null),xr!==null&&Ec(xr)&&(xr=null),Ur!==null&&Ec(Ur)&&(Ur=null),fl.forEach(z_),dl.forEach(z_)}function Tc(e,n){e.blockedOn===n&&(e.blockedOn=null,Od||(Od=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,OS)))}var Ac=null;function B_(e){Ac!==e&&(Ac=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ac===e&&(Ac=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],h=e[n+2];if(typeof o!="function"){if(Nd(o||a)===null)continue;break}var f=wn(a);f!==null&&(e.splice(n,3),n-=3,Df(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function za(e){function n(C){return Tc(C,e)}Vr!==null&&Tc(Vr,e),xr!==null&&Tc(xr,e),Ur!==null&&Tc(Ur,e),fl.forEach(n),dl.forEach(n);for(var a=0;a<Lr.length;a++){var o=Lr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Lr.length&&(a=Lr[0],a.blockedOn===null);)P_(a),a.blockedOn===null&&Lr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],p=h[xe]||null;if(typeof f=="function")p||B_(a);else if(p){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,p=f[xe]||null)E=p.formAction;else if(Nd(h)!==null)continue}else E=p.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),B_(a)}}}function q_(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(p){return h=p})},focusReset:"manual",scroll:"manual"})}function n(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),h!==null&&(h(),h=null)}}}function Md(e){this._internalRoot=e}Sc.prototype.render=Md.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,o=En();M_(a,o,e,n,null,null)},Sc.prototype.unmount=Md.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;M_(e.current,2,null,e,null,null),ic(),n[si]=null}};function Sc(e){this._internalRoot=e}Sc.prototype.unstable_scheduleHydration=function(e){if(e){var n=iu();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Lr.length&&n!==0&&n<Lr[a].priority;a++);Lr.splice(a,0,e),a===0&&P_(e)}};var j_=t.version;if(j_!=="19.2.0")throw Error(s(527,j_,"19.2.0"));tt.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=_(n),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var MS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bc.isDisabled&&bc.supportsFiber)try{Pn=bc.inject(MS),ze=bc}catch{}}return pl.createRoot=function(e,n){if(!l(e))throw Error(s(299));var a=!1,o="",h=Xp,f=$p,p=Zp;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),n=N_(e,1,!1,null,null,a,o,null,h,f,p,q_),e[si]=n.current,dd(e),new Md(n)},pl.hydrateRoot=function(e,n,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=Xp,p=$p,E=Zp,C=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),n=N_(e,1,!0,n,a??null,o,h,C,f,p,E,q_),n.context=O_(null),a=n.current,o=En(),o=ds(o),h=Tr(o),h.callback=null,Ar(a,h,o),a=o,n.current.lanes=a,hs(n,a),Ti(n),e[si]=n.current,dd(e),new Sc(n)},pl.version="19.2.0",pl}var J_;function jS(){if(J_)return Ud.exports;J_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Ud.exports=qS(),Ud.exports}var HS=jS();const GS=()=>{};var W_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=function(r){const t=[];let i=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},FS=function(r){const t=[];let i=0,s=0;for(;i<r.length;){const l=r[i++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[i++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[i++],d=r[i++],g=r[i++],y=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(y>>10)),t[s++]=String.fromCharCode(56320+(y&1023))}else{const c=r[i++],d=r[i++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},OE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,g=d?r[l+1]:0,y=l+2<r.length,_=y?r[l+2]:0,A=c>>2,S=(c&3)<<4|g>>4;let D=(g&15)<<2|_>>6,H=_&63;y||(H=64,d||(D=64)),s.push(i[A],i[S],i[D],i[H])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(NE(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):FS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=i[r.charAt(l++)],g=l<r.length?i[r.charAt(l)]:0;++l;const _=l<r.length?i[r.charAt(l)]:64;++l;const S=l<r.length?i[r.charAt(l)]:64;if(++l,c==null||g==null||_==null||S==null)throw new QS;const D=c<<2|g>>4;if(s.push(D),_!==64){const H=g<<4&240|_>>2;if(s.push(H),S!==64){const $=_<<6&192|S;s.push($)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class QS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KS=function(r){const t=NE(r);return OE.encodeByteArray(t,!0)},jc=function(r){return KS(r).replace(/\./g,"")},ME=function(r){try{return OE.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=()=>YS().__FIREBASE_DEFAULTS__,$S=()=>{if(typeof process>"u"||typeof W_>"u")return;const r=W_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},ZS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&ME(r[1]);return t&&JSON.parse(t)},lh=()=>{try{return GS()||XS()||$S()||ZS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},VE=r=>lh()?.emulatorHosts?.[r],JS=r=>{const t=VE(r);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),s]:[t.substring(0,i),s]},xE=()=>lh()?.config,UE=r=>lh()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function LE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[jc(JSON.stringify(i)),jc(JSON.stringify(d)),""].join(".")}const Al={};function e1(){const r={prod:[],emulator:[]};for(const t of Object.keys(Al))Al[t]?r.emulator.push(t):r.prod.push(t);return r}function n1(r){let t=document.getElementById(r),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),i=!0),{created:i,element:t}}let tv=!1;function kE(r,t){if(typeof window>"u"||typeof document>"u"||!no(window.location.host)||Al[r]===t||Al[r]||tv)return;Al[r]=t;function i(D){return`__firebase__banner__${D}`}const s="__firebase__banner",c=e1().prod.length>0;function d(){const D=document.getElementById(s);D&&D.remove()}function g(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function y(D,H){D.setAttribute("width","24"),D.setAttribute("id",H),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function _(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{tv=!0,d()},D}function A(D,H){D.setAttribute("id",H),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function S(){const D=n1(s),H=i("text"),$=document.getElementById(H)||document.createElement("span"),W=i("learnmore"),Z=document.getElementById(W)||document.createElement("a"),ct=i("preprendIcon"),lt=document.getElementById(ct)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const dt=D.element;g(dt),A(Z,W);const jt=_();y(lt,ct),dt.append(lt,$,Z,jt),document.body.appendChild(dt)}c?($.innerText="Preview backend disconnected.",lt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(lt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function i1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function r1(){const r=lh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function s1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function a1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function o1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function l1(){const r=Je();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function u1(){return!r1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function c1(){try{return typeof indexedDB=="object"}catch{return!1}}function h1(){return new Promise((r,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="FirebaseError";class ir extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=f1,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zl.prototype.create)}}class zl{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?d1(c,s):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new ir(l,g,s)}}function d1(r,t){return r.replace(m1,(i,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const m1=/\{\$([^}]+)}/g;function g1(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Hs(r,t){if(r===t)return!0;const i=Object.keys(r),s=Object.keys(t);for(const l of i){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(ev(c)&&ev(d)){if(!Hs(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!i.includes(l))return!1;return!0}function ev(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(r){const t=[];for(const[i,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function p1(r,t){const i=new y1(r,t);return i.subscribe.bind(i)}class y1{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,s){let l;if(t===void 0&&i===void 0&&s===void 0)throw new Error("Missing Observer.");_1(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:s},l.next===void 0&&(l.next=zd),l.error===void 0&&(l.error=zd),l.complete===void 0&&(l.complete=zd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _1(r,t){if(typeof r!="object"||r===null)return!1;for(const i of t)if(i in r&&typeof r[i]=="function")return!0;return!1}function zd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(r){return r&&r._delegate?r._delegate:r}class Gs{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new WS;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(T1(t))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Ps){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ps){return this.instances.has(t)}getOptions(t=Ps){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&d.resolve(l)}return l}onInit(t,i){const s=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&t(c,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(s)for(const l of s)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:E1(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ps){return this.component?this.component.multipleInstances?t:Ps:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function E1(r){return r===Ps?void 0:r}function T1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new v1(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Dt||(Dt={}));const S1={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},b1=Dt.INFO,w1={[Dt.DEBUG]:"log",[Dt.VERBOSE]:"log",[Dt.INFO]:"info",[Dt.WARN]:"warn",[Dt.ERROR]:"error"},R1=(r,t,...i)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=w1[t];if(l)console[l](`[${s}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cm{constructor(t){this.name=t,this._logLevel=b1,this._logHandler=R1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?S1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Dt.DEBUG,...t),this._logHandler(this,Dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Dt.VERBOSE,...t),this._logHandler(this,Dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Dt.INFO,...t),this._logHandler(this,Dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Dt.WARN,...t),this._logHandler(this,Dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Dt.ERROR,...t),this._logHandler(this,Dt.ERROR,...t)}}const I1=(r,t)=>t.some(i=>r instanceof i);let nv,iv;function C1(){return nv||(nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D1(){return iv||(iv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PE=new WeakMap,em=new WeakMap,zE=new WeakMap,Bd=new WeakMap,Dm=new WeakMap;function N1(r){const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{i(Gr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&PE.set(i,r)}).catch(()=>{}),Dm.set(t,r),t}function O1(r){if(em.has(r))return;const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{i(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});em.set(r,t)}let nm={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return em.get(r);if(t==="objectStoreNames")return r.objectStoreNames||zE.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Gr(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function M1(r){nm=r(nm)}function V1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const s=r.call(qd(this),t,...i);return zE.set(s,t.sort?t.sort():[t]),Gr(s)}:D1().includes(r)?function(...t){return r.apply(qd(this),t),Gr(PE.get(this))}:function(...t){return Gr(r.apply(qd(this),t))}}function x1(r){return typeof r=="function"?V1(r):(r instanceof IDBTransaction&&O1(r),I1(r,C1())?new Proxy(r,nm):r)}function Gr(r){if(r instanceof IDBRequest)return N1(r);if(Bd.has(r))return Bd.get(r);const t=x1(r);return t!==r&&(Bd.set(r,t),Dm.set(t,r)),t}const qd=r=>Dm.get(r);function U1(r,t,{blocked:i,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),g=Gr(d);return s&&d.addEventListener("upgradeneeded",y=>{s(Gr(d.result),y.oldVersion,y.newVersion,Gr(d.transaction),y)}),i&&d.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),g.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const L1=["get","getKey","getAll","getAllKeys","count"],k1=["put","add","delete","clear"],jd=new Map;function rv(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(jd.get(t))return jd.get(t);const i=t.replace(/FromIndex$/,""),s=t!==i,l=k1.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(l||L1.includes(i)))return;const c=async function(d,...g){const y=this.transaction(d,l?"readwrite":"readonly");let _=y.store;return s&&(_=_.index(g.shift())),(await Promise.all([_[i](...g),l&&y.done]))[0]};return jd.set(t,c),c}M1(r=>({...r,get:(t,i,s)=>rv(t,i)||r.get(t,i,s),has:(t,i)=>!!rv(t,i)||r.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(z1(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function z1(r){return r.getComponent()?.type==="VERSION"}const im="@firebase/app",sv="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=new Cm("@firebase/app"),B1="@firebase/app-compat",q1="@firebase/analytics-compat",j1="@firebase/analytics",H1="@firebase/app-check-compat",G1="@firebase/app-check",F1="@firebase/auth",Q1="@firebase/auth-compat",K1="@firebase/database",Y1="@firebase/data-connect",X1="@firebase/database-compat",$1="@firebase/functions",Z1="@firebase/functions-compat",J1="@firebase/installations",W1="@firebase/installations-compat",tb="@firebase/messaging",eb="@firebase/messaging-compat",nb="@firebase/performance",ib="@firebase/performance-compat",rb="@firebase/remote-config",sb="@firebase/remote-config-compat",ab="@firebase/storage",ob="@firebase/storage-compat",lb="@firebase/firestore",ub="@firebase/ai",cb="@firebase/firestore-compat",hb="firebase",fb="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="[DEFAULT]",db={[im]:"fire-core",[B1]:"fire-core-compat",[j1]:"fire-analytics",[q1]:"fire-analytics-compat",[G1]:"fire-app-check",[H1]:"fire-app-check-compat",[F1]:"fire-auth",[Q1]:"fire-auth-compat",[K1]:"fire-rtdb",[Y1]:"fire-data-connect",[X1]:"fire-rtdb-compat",[$1]:"fire-fn",[Z1]:"fire-fn-compat",[J1]:"fire-iid",[W1]:"fire-iid-compat",[tb]:"fire-fcm",[eb]:"fire-fcm-compat",[nb]:"fire-perf",[ib]:"fire-perf-compat",[rb]:"fire-rc",[sb]:"fire-rc-compat",[ab]:"fire-gcs",[ob]:"fire-gcs-compat",[lb]:"fire-fst",[cb]:"fire-fst-compat",[ub]:"fire-vertex","fire-js":"fire-js",[hb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Map,mb=new Map,sm=new Map;function av(r,t){try{r.container.addComponent(t)}catch(i){Ji.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,i)}}function Xa(r){const t=r.name;if(sm.has(t))return Ji.debug(`There were multiple attempts to register component ${t}.`),!1;sm.set(t,r);for(const i of Hc.values())av(i,r);for(const i of mb.values())av(i,r);return!0}function Nm(r,t){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(t)}function $n(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new zl("app","Firebase",gb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(t,i,s){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=fb;function BE(r,t={}){let i=r;typeof t!="object"&&(t={name:t});const s={name:rm,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw Fr.create("bad-app-name",{appName:String(l)});if(i||(i=xE()),!i)throw Fr.create("no-options");const c=Hc.get(l);if(c){if(Hs(i,c.options)&&Hs(s,c.config))return c;throw Fr.create("duplicate-app",{appName:l})}const d=new A1(l);for(const y of sm.values())d.addComponent(y);const g=new pb(i,s,d);return Hc.set(l,g),g}function qE(r=rm){const t=Hc.get(r);if(!t&&r===rm&&xE())return BE();if(!t)throw Fr.create("no-app",{appName:r});return t}function Qr(r,t,i){let s=db[r]??r;i&&(s+=`-${i}`);const l=s.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ji.warn(d.join(" "));return}Xa(new Gs(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="firebase-heartbeat-database",_b=1,Cl="firebase-heartbeat-store";let Hd=null;function jE(){return Hd||(Hd=U1(yb,_b,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Cl)}catch(i){console.warn(i)}}}}).catch(r=>{throw Fr.create("idb-open",{originalErrorMessage:r.message})})),Hd}async function vb(r){try{const i=(await jE()).transaction(Cl),s=await i.objectStore(Cl).get(HE(r));return await i.done,s}catch(t){if(t instanceof ir)Ji.warn(t.message);else{const i=Fr.create("idb-get",{originalErrorMessage:t?.message});Ji.warn(i.message)}}}async function ov(r,t){try{const s=(await jE()).transaction(Cl,"readwrite");await s.objectStore(Cl).put(t,HE(r)),await s.done}catch(i){if(i instanceof ir)Ji.warn(i.message);else{const s=Fr.create("idb-set",{originalErrorMessage:i?.message});Ji.warn(s.message)}}}function HE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=1024,Tb=30;class Ab{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new bb(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Tb){const l=wb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ji.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lv(),{heartbeatsToSend:i,unsentEntries:s}=Sb(this._heartbeatsCache.heartbeats),l=jc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ji.warn(t),""}}}function lv(){return new Date().toISOString().substring(0,10)}function Sb(r,t=Eb){const i=[];let s=r.slice();for(const l of r){const c=i.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),uv(i)>t){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),uv(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class bb{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return c1()?h1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await vb(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return ov(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return ov(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function uv(r){return jc(JSON.stringify({version:2,heartbeats:r})).length}function wb(r){if(r.length===0)return-1;let t=0,i=r[0].date;for(let s=1;s<r.length;s++)r[s].date<i&&(i=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(r){Xa(new Gs("platform-logger",t=>new P1(t),"PRIVATE")),Xa(new Gs("heartbeat",t=>new Ab(t),"PRIVATE")),Qr(im,sv,r),Qr(im,sv,"esm2020"),Qr("fire-js","")}Rb("");var Ib="firebase",Cb="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr(Ib,Cb,"app");function GE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Db=GE,FE=new zl("auth","Firebase",GE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Cm("@firebase/auth");function Nb(r,...t){Gc.logLevel<=Dt.WARN&&Gc.warn(`Auth (${io}): ${r}`,...t)}function Oc(r,...t){Gc.logLevel<=Dt.ERROR&&Gc.error(`Auth (${io}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(r,...t){throw Om(r,...t)}function Si(r,...t){return Om(r,...t)}function QE(r,t,i){const s={...Db(),[t]:i};return new zl("auth","Firebase",s).create(t,{appName:r.name})}function Kr(r){return QE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Om(r,...t){if(typeof r!="string"){const i=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(i,...s)}return FE.create(r,...t)}function pt(r,t,...i){if(!r)throw Om(t,...i)}function Xi(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Oc(t),new Error(t)}function tr(r,t){r||Xi(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(){return typeof self<"u"&&self.location?.href||""}function Ob(){return cv()==="http:"||cv()==="https:"}function cv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ob()||a1()||"connection"in navigator)?navigator.onLine:!0}function Vb(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t,i){this.shortDelay=t,this.longDelay=i,tr(i>t,"Short delay should be less than long delay!"),this.isMobile=i1()||o1()}get(){return Mb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(r,t){tr(r.emulator,"Emulator should always be set here");const{url:i}=r.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{static initialize(t,i,s){this.fetchImpl=t,i&&(this.headersImpl=i),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Lb=new ql(3e4,6e4);function uh(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function ro(r,t,i,s,l={}){return YE(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const g=Bl({key:r.config.apiKey,...d}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const _={method:t,headers:y,...c};return s1()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&no(r.emulatorConfig.host)&&(_.credentials="include"),KE.fetch()(await $E(r,r.config.apiHost,i,g),_)})}async function YE(r,t,i){r._canInitEmulator=!1;const s={...xb,...t};try{const l=new kb(r),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw wc(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[y,_]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw wc(r,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw wc(r,"email-already-in-use",d);if(y==="USER_DISABLED")throw wc(r,"user-disabled",d);const A=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw QE(r,A,_);Wi(r,A)}}catch(l){if(l instanceof ir)throw l;Wi(r,"network-request-failed",{message:String(l)})}}async function XE(r,t,i,s,l={}){const c=await ro(r,t,i,s,l);return"mfaPendingCredential"in c&&Wi(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function $E(r,t,i,s){const l=`${t}${i}?${s}`,c=r,d=c.config.emulator?Mm(r.config,l):`${r.config.apiScheme}://${l}`;return Ub.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class kb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,s)=>{this.timer=setTimeout(()=>s(Si(this.auth,"network-request-failed")),Lb.get())})}}function wc(r,t,i){const s={appName:r.name};i.email&&(s.email=i.email),i.phoneNumber&&(s.phoneNumber=i.phoneNumber);const l=Si(r,t,s);return l.customData._tokenResponse=i,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pb(r,t){return ro(r,"POST","/v1/accounts:delete",t)}async function Fc(r,t){return ro(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function zb(r,t=!1){const i=Pe(r),s=await i.getIdToken(t),l=Vm(s);pt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:Sl(Gd(l.auth_time)),issuedAtTime:Sl(Gd(l.iat)),expirationTime:Sl(Gd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Gd(r){return Number(r)*1e3}function Vm(r){const[t,i,s]=r.split(".");if(t===void 0||i===void 0||s===void 0)return Oc("JWT malformed, contained fewer than 3 sections"),null;try{const l=ME(i);return l?JSON.parse(l):(Oc("Failed to decode base64 JWT payload"),null)}catch(l){return Oc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function hv(r){const t=Vm(r);return pt(t,"internal-error"),pt(typeof t.exp<"u","internal-error"),pt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(r,t,i=!1){if(i)return t;try{return await t}catch(s){throw s instanceof ir&&Bb(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Bb({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qc(r){const t=r.auth,i=await r.getIdToken(),s=await Dl(r,Fc(t,{idToken:i}));pt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const c=l.providerUserInfo?.length?ZE(l.providerUserInfo):[],d=Hb(r.providerData,c),g=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!d?.length,_=g?y:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new om(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(r,A)}async function jb(r){const t=Pe(r);await Qc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Hb(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function ZE(r){return r.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(r,t){const i=await YE(r,{},async()=>{const s=Bl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await $E(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:s};return r.emulatorConfig&&no(r.emulatorConfig.host)&&(y.credentials="include"),KE.fetch()(d,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function Fb(r,t){return ro(r,"POST","/v2/accounts:revokeToken",uh(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){pt(t.idToken,"internal-error"),pt(typeof t.idToken<"u","internal-error"),pt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):hv(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){pt(t.length!==0,"internal-error");const i=hv(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:s,refreshToken:l,expiresIn:c}=await Gb(t,i);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,i,s){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,i){const{refreshToken:s,accessToken:l,expirationTime:c}=i,d=new Fa;return s&&(pt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(pt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(pt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Fa,this.toJSON())}_performRefresh(){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(r,t){pt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Zn{constructor({uid:t,auth:i,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new qb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new om(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await Dl(this,this.stsTokenManager.getToken(this.auth,t));return pt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return zb(this,t)}reload(){return jb(this)}_assign(t){this!==t&&(pt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new Zn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),i&&await Qc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(Kr(this.auth));const t=await this.getIdToken();return await Dl(this,Pb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const s=i.displayName??void 0,l=i.email??void 0,c=i.phoneNumber??void 0,d=i.photoURL??void 0,g=i.tenantId??void 0,y=i._redirectEventId??void 0,_=i.createdAt??void 0,A=i.lastLoginAt??void 0,{uid:S,emailVerified:D,isAnonymous:H,providerData:$,stsTokenManager:W}=i;pt(S&&W,t,"internal-error");const Z=Fa.fromJSON(this.name,W);pt(typeof S=="string",t,"internal-error"),Pr(s,t.name),Pr(l,t.name),pt(typeof D=="boolean",t,"internal-error"),pt(typeof H=="boolean",t,"internal-error"),Pr(c,t.name),Pr(d,t.name),Pr(g,t.name),Pr(y,t.name),Pr(_,t.name),Pr(A,t.name);const ct=new Zn({uid:S,auth:t,email:l,emailVerified:D,displayName:s,isAnonymous:H,photoURL:d,phoneNumber:c,tenantId:g,stsTokenManager:Z,createdAt:_,lastLoginAt:A});return $&&Array.isArray($)&&(ct.providerData=$.map(lt=>({...lt}))),y&&(ct._redirectEventId=y),ct}static async _fromIdTokenResponse(t,i,s=!1){const l=new Fa;l.updateFromServerResponse(i);const c=new Zn({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Qc(c),c}static async _fromGetAccountInfoResponse(t,i,s){const l=i.users[0];pt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?ZE(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,g=new Fa;g.updateFromIdToken(s);const y=new Zn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new om(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;function $i(r){tr(r instanceof Function,"Expected a class definition");let t=fv.get(r);return t?(tr(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,fv.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}JE.type="NONE";const dv=JE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(r,t,i){return`firebase:${r}:${t}:${i}`}class Qa{constructor(t,i,s){this.persistence=t,this.auth=i,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=Mc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Mc("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Fc(this.auth,{idToken:t}).catch(()=>{});return i?Zn._fromGetAccountInfoResponse(this.auth,i,t):null}return Zn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,s="authUser"){if(!i.length)return new Qa($i(dv),t,s);const l=(await Promise.all(i.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=l[0]||$i(dv);const d=Mc(s,t.config.apiKey,t.name);let g=null;for(const _ of i)try{const A=await _._get(d);if(A){let S;if(typeof A=="string"){const D=await Fc(t,{idToken:A}).catch(()=>{});if(!D)break;S=await Zn._fromGetAccountInfoResponse(t,D,A)}else S=Zn._fromJSON(t,A);_!==c&&(g=S),c=_;break}}catch{}const y=l.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Qa(c,t,s):(c=y[0],g&&await c._set(d,g.toJSON()),await Promise.all(i.map(async _=>{if(_!==c)try{await _._remove(d)}catch{}})),new Qa(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(nT(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(WE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(rT(t))return"Blackberry";if(sT(t))return"Webos";if(tT(t))return"Safari";if((t.includes("chrome/")||eT(t))&&!t.includes("edge/"))return"Chrome";if(iT(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(i);if(s?.length===2)return s[1]}return"Other"}function WE(r=Je()){return/firefox\//i.test(r)}function tT(r=Je()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function eT(r=Je()){return/crios\//i.test(r)}function nT(r=Je()){return/iemobile/i.test(r)}function iT(r=Je()){return/android/i.test(r)}function rT(r=Je()){return/blackberry/i.test(r)}function sT(r=Je()){return/webos/i.test(r)}function xm(r=Je()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Qb(r=Je()){return xm(r)&&!!window.navigator?.standalone}function Kb(){return l1()&&document.documentMode===10}function aT(r=Je()){return xm(r)||iT(r)||sT(r)||rT(r)||/windows phone/i.test(r)||nT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r,t=[]){let i;switch(r){case"Browser":i=mv(Je());break;case"Worker":i=`${mv(Je())}-${r}`;break;default:i=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${io}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const s=c=>new Promise((d,g)=>{try{const y=t(c);d(y)}catch(y){g(y)}});s.onAbort=i,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const s of this.queue)await s(t),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(r,t={}){return ro(r,"GET","/v2/passwordPolicy",uh(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=6;class Zb{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??$b,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(i.meetsMinPasswordLength=t.length>=s),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,i,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(t,i,s,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gv(this),this.idTokenSubscription=new gv(this),this.beforeStateQueue=new Yb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=$i(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qa.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Fc(this,{idToken:t}),s=await Zn._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(s)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if($n(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(t);(!c||c===d)&&g?.user&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await Qc(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Vb()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if($n(this.app))return Promise.reject(Kr(this));const i=t?Pe(t):null;return i&&pt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&pt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return $n(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($i(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Xb(this),i=new Zb(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new zl("auth","Firebase",t())}onAuthStateChanged(t,i,s){return this.registerStateListener(this.authStateSubscription,t,i,s)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,s){return this.registerStateListener(this.idTokenSubscription,t,i,s)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(s.tenantId=this.tenantId),await Fb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const s=await this.getOrInitRedirectPersistenceManager(i);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&$i(t)||this._popupRedirectResolver;pt(i,this,"argument-error"),this.redirectPersistenceManager=await Qa.create(this,[$i(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,s,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof i=="function"){const y=t.addObserver(i,s,l);return()=>{d=!0,y()}}else{const y=t.addObserver(i);return()=>{d=!0,y()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=oT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&Nb(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ch(r){return Pe(r)}class gv{constructor(t){this.auth=t,this.observer=null,this.addObserver=p1(i=>this.observer=i)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wb(r){Um=r}function tw(r){return Um.loadJS(r)}function ew(){return Um.gapiScript}function nw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(r,t){const i=Nm(r,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(Hs(c,t??{}))return l;Wi(l,"already-initialized")}return i.initialize({options:t})}function rw(r,t){const i=t?.persistence||[],s=(Array.isArray(i)?i:[i]).map($i);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function sw(r,t,i){const s=ch(r);pt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=lT(t),{host:d,port:g}=aw(t),y=g===null?"":`:${g}`,_={url:`${c}//${d}${y}/`},A=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){pt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),pt(Hs(_,s.config.emulator)&&Hs(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,no(d)?(LE(`${c}//${d}${y}`),kE("Auth",!0)):ow()}function lT(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function aw(r){const t=lT(r),i=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!i)return{host:"",port:null};const s=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:pv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:pv(d)}}}function pv(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function ow(){function r(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Xi("not implemented")}_getIdTokenResponse(t){return Xi("not implemented")}_linkToIdToken(t,i){return Xi("not implemented")}_getReauthenticationResolver(t){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(r,t){return XE(r,"POST","/v1/accounts:signInWithIdp",uh(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="http://localhost";class Fs extends uT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new Fs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Wi("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...c}=i;if(!s||!l)return null;const d=new Fs(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return Ka(t,i)}_linkToIdToken(t,i){const s=this.buildRequest();return s.idToken=i,Ka(t,s)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Ka(t,i)}buildRequest(){const t={requestUri:lw,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=Bl(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends cT{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends jl{constructor(){super("facebook.com")}static credential(t){return Fs._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zr.credentialFromTaggedObject(t)}static credentialFromError(t){return zr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zr.credential(t.oauthAccessToken)}catch{return null}}}zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends jl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Fs._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return Br.credentialFromTaggedObject(t)}static credentialFromError(t){return Br.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:s}=t;if(!i&&!s)return null;try{return Br.credential(i,s)}catch{return null}}}Br.GOOGLE_SIGN_IN_METHOD="google.com";Br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends jl{constructor(){super("github.com")}static credential(t){return Fs._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qr.credentialFromTaggedObject(t)}static credentialFromError(t){return qr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qr.credential(t.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends jl{constructor(){super("twitter.com")}static credential(t,i){return Fs._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return jr.credentialFromTaggedObject(t)}static credentialFromError(t){return jr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:s}=t;if(!i||!s)return null;try{return jr.credential(i,s)}catch{return null}}}jr.TWITTER_SIGN_IN_METHOD="twitter.com";jr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uw(r,t){return XE(r,"POST","/v1/accounts:signUp",uh(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,s,l=!1){const c=await Zn._fromIdTokenResponse(t,s,l),d=yv(s);return new $r({user:c,providerId:d,_tokenResponse:s,operationType:i})}static async _forOperation(t,i,s){await t._updateTokensIfNecessary(s,!0);const l=yv(s);return new $r({user:t,providerId:l,_tokenResponse:s,operationType:i})}}function yv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cw(r){if($n(r.app))return Promise.reject(Kr(r));const t=ch(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new $r({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await uw(t,{returnSecureToken:!0}),s=await $r._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends ir{constructor(t,i,s,l){super(i.code,i.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,i,s,l){return new Kc(t,i,s,l)}}function hT(r,t,i,s){return(t==="reauthenticate"?i._getReauthenticationResolver(r):i._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Kc._fromErrorAndOperation(r,c,t,s):c})}async function hw(r,t,i=!1){const s=await Dl(r,t._linkToIdToken(r.auth,await r.getIdToken()),i);return $r._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(r,t,i=!1){const{auth:s}=r;if($n(s.app))return Promise.reject(Kr(s));const l="reauthenticate";try{const c=await Dl(r,hT(s,l,t,r),i);pt(c.idToken,s,"internal-error");const d=Vm(c.idToken);pt(d,s,"internal-error");const{sub:g}=d;return pt(r.uid===g,s,"user-mismatch"),$r._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Wi(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(r,t,i=!1){if($n(r.app))return Promise.reject(Kr(r));const s="signIn",l=await hT(r,s,t),c=await $r._fromIdTokenResponse(r,s,l);return i||await r._updateCurrentUser(c.user),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(r,t){return Pe(r).setPersistence(t)}function gw(r,t,i,s){return Pe(r).onIdTokenChanged(t,i,s)}function pw(r,t,i){return Pe(r).beforeAuthStateChanged(t,i)}function yw(r,t,i,s){return Pe(r).onAuthStateChanged(t,i,s)}const Yc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Yc,"1"),this.storage.removeItem(Yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=1e3,vw=10;class dT extends fT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const s=this.storage.getItem(i),l=this.localCache[i];s!==l&&t(i,l,s)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,g,y)=>{this.notifyListeners(d,y)});return}const s=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!i&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Kb()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,vw):l()}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:s}),!0)})},_w)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}dT.type="LOCAL";const mT=dT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT extends fT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}gT.type="SESSION";const pT=gT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const s=new hh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:s,eventType:l,data:c}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(d).map(async _=>_(i.origin,c)),y=await Ew(g);i.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:y})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(r="",t=10){let i="";for(let s=0;s<t;s++)i+=Math.floor(Math.random()*10);return r+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,y)=>{const _=Lm("",20);l.port1.start();const A=setTimeout(()=>{y(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(S){const D=S;if(D.data.eventId===_)switch(D.data.status){case"ack":clearTimeout(A),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(D.data.response);break;default:clearTimeout(A),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:_,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function Aw(r){bi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function Sw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bw(){return navigator?.serviceWorker?.controller||null}function ww(){return yT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="firebaseLocalStorageDb",Rw=1,Xc="firebaseLocalStorage",vT="fbase_key";class Hl{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function fh(r,t){return r.transaction([Xc],t?"readwrite":"readonly").objectStore(Xc)}function Iw(){const r=indexedDB.deleteDatabase(_T);return new Hl(r).toPromise()}function lm(){const r=indexedDB.open(_T,Rw);return new Promise((t,i)=>{r.addEventListener("error",()=>{i(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Xc,{keyPath:vT})}catch(l){i(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Xc)?t(s):(s.close(),await Iw(),t(await lm()))})})}async function _v(r,t,i){const s=fh(r,!0).put({[vT]:t,value:i});return new Hl(s).toPromise()}async function Cw(r,t){const i=fh(r,!1).get(t),s=await new Hl(i).toPromise();return s===void 0?null:s.value}function vv(r,t){const i=fh(r,!0).delete(t);return new Hl(i).toPromise()}const Dw=800,Nw=3;class ET{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lm(),this.db)}async _withRetries(t){let i=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(i++>Nw)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hh._getInstance(ww()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Sw(),!this.activeServiceWorker)return;this.sender=new Tw(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||bw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await lm();return await _v(t,Yc,"1"),await vv(t,Yc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(s=>_v(s,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(s=>Cw(s,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>vv(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=fh(l,!1).getAll();return new Hl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Dw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ET.type="LOCAL";const Ow=ET;new ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(r,t){return t?$i(t):(pt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km extends uT{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ka(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Ka(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Ka(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function Vw(r){return dw(r.auth,new km(r),r.bypassAuthState)}function xw(r){const{auth:t,user:i}=r;return pt(i,t,"internal-error"),fw(i,new km(r),r.bypassAuthState)}async function Uw(r){const{auth:t,user:i}=r;return pt(i,t,"internal-error"),hw(i,new km(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,i,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:s,postBody:l,tenantId:c,error:d,type:g}=t;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:i,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Vw;case"linkViaPopup":case"linkViaRedirect":return Uw;case"reauthViaPopup":case"reauthViaRedirect":return xw;default:Wi(this.auth,"internal-error")}}resolve(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=new ql(2e3,1e4);class Ga extends TT{constructor(t,i,s,l,c){super(t,i,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Ga.currentPopupAction&&Ga.currentPopupAction.cancel(),Ga.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return pt(t,this.auth,"internal-error"),t}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const t=Lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ga.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Lw.get())};t()}}Ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="pendingRedirect",Vc=new Map;class Pw extends TT{constructor(t,i,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,s),this.eventId=null}async execute(){let t=Vc.get(this.auth._key());if(!t){try{const s=await zw(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(i){t=()=>Promise.reject(i)}Vc.set(this.auth._key(),t)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zw(r,t){const i=jw(t),s=qw(r);if(!await s._isAvailable())return!1;const l=await s._get(i)==="true";return await s._remove(i),l}function Bw(r,t){Vc.set(r._key(),t)}function qw(r){return $i(r._redirectPersistence)}function jw(r){return Mc(kw,r.config.apiKey,r.name)}async function Hw(r,t,i=!1){if($n(r.app))return Promise.reject(Kr(r));const s=ch(r),l=Mw(s,t),d=await new Pw(s,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=600*1e3;class Fw{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(i=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Qw(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!AT(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";i.onError(Si(this.auth,s))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const s=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Gw&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ev(t))}saveEventToCache(t){this.cachedEventUids.add(Ev(t)),this.lastProcessedEventTime=Date.now()}}function Ev(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function AT({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function Qw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(r,t={}){return ro(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xw=/^https?/;async function $w(r){if(r.config.emulator)return;const{authorizedDomains:t}=await Kw(r);for(const i of t)try{if(Zw(i))return}catch{}Wi(r,"unauthorized-domain")}function Zw(r){const t=am(),{protocol:i,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?i==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===s}if(!Xw.test(i))return!1;if(Yw.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=new ql(3e4,6e4);function Tv(){const r=bi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let i=0;i<r.CP.length;i++)r.CP[i]=null}}function Ww(r){return new Promise((t,i)=>{function s(){Tv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Tv(),i(Si(r,"network-request-failed"))},timeout:Jw.get()})}if(bi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(bi().gapi?.load)s();else{const l=nw("iframefcb");return bi()[l]=()=>{gapi.load?s():i(Si(r,"network-request-failed"))},tw(`${ew()}?onload=${l}`).catch(c=>i(c))}}).catch(t=>{throw xc=null,t})}let xc=null;function tR(r){return xc=xc||Ww(r),xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new ql(5e3,15e3),nR="__/auth/iframe",iR="emulator/auth/iframe",rR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aR(r){const t=r.config;pt(t.authDomain,r,"auth-domain-config-required");const i=t.emulator?Mm(t,iR):`https://${r.config.authDomain}/${nR}`,s={apiKey:t.apiKey,appName:r.name,v:io},l=sR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${i}?${Bl(s).slice(1)}`}async function oR(r){const t=await tR(r),i=bi().gapi;return pt(i,r,"internal-error"),t.open({where:document.body,url:aR(r),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Si(r,"network-request-failed"),g=bi().setTimeout(()=>{c(d)},eR.get());function y(){bi().clearTimeout(g),l(s)}s.ping(y).then(y,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uR=500,cR=600,hR="_blank",fR="http://localhost";class Av{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dR(r,t,i,s=uR,l=cR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const y={...lR,width:s.toString(),height:l.toString(),top:c,left:d},_=Je().toLowerCase();i&&(g=eT(_)?hR:i),WE(_)&&(t=t||fR,y.scrollbars="yes");const A=Object.entries(y).reduce((D,[H,$])=>`${D}${H}=${$},`,"");if(Qb(_)&&g!=="_self")return mR(t||"",g),new Av(null);const S=window.open(t||"",g,A);pt(S,r,"popup-blocked");try{S.focus()}catch{}return new Av(S)}function mR(r,t){const i=document.createElement("a");i.href=r,i.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="__/auth/handler",pR="emulator/auth/handler",yR=encodeURIComponent("fac");async function Sv(r,t,i,s,l,c){pt(r.config.authDomain,r,"auth-domain-config-required"),pt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:i,redirectUrl:s,v:io,eventId:l};if(t instanceof cT){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",g1(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,S]of Object.entries({}))d[A]=S}if(t instanceof jl){const A=t.getScopes().filter(S=>S!=="");A.length>0&&(d.scopes=A.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const A of Object.keys(g))g[A]===void 0&&delete g[A];const y=await r._getAppCheckToken(),_=y?`#${yR}=${encodeURIComponent(y)}`:"";return`${_R(r)}?${Bl(g).slice(1)}${_}`}function _R({config:r}){return r.emulator?Mm(r,pR):`https://${r.authDomain}/${gR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="webStorageSupport";class vR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pT,this._completeRedirectFn=Hw,this._overrideRedirectResult=Bw}async _openPopup(t,i,s,l){tr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Sv(t,i,s,am(),l);return dR(t,c,Lm())}async _openRedirect(t,i,s,l){await this._originValidation(t);const c=await Sv(t,i,s,am(),l);return Aw(c),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(tr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[i]={promise:s},s.catch(()=>{delete this.eventManagers[i]}),s}async initAndGetManager(t){const i=await oR(t),s=new Fw(t);return i.register("authEvent",l=>(pt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=i,s}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Fd,{type:Fd},l=>{const c=l?.[0]?.[Fd];c!==void 0&&i(!!c),Wi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=$w(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return aT()||tT()||xm()}}const ER=vR;var bv="@firebase/auth",wv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SR(r){Xa(new Gs("auth",(t,{options:i})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;pt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oT(r)},_=new Jb(s,l,c,y);return rw(_,i),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,s)=>{t.getProvider("auth-internal").initialize()})),Xa(new Gs("auth-internal",t=>{const i=ch(t.getProvider("auth").getImmediate());return(s=>new TR(s))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qr(bv,wv,AR(r)),Qr(bv,wv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=300,wR=UE("authIdTokenMaxAge")||bR;let Rv=null;const RR=r=>async t=>{const i=t&&await t.getIdTokenResult(),s=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(s&&s>wR)return;const l=i?.token;Rv!==l&&(Rv=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function IR(r=qE()){const t=Nm(r,"auth");if(t.isInitialized())return t.getImmediate();const i=iw(r,{popupRedirectResolver:ER,persistence:[Ow,mT,pT]}),s=UE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=RR(c.toString());pw(i,d,()=>d(i.currentUser)),gw(i,g=>d(g))}}const l=VE("auth");return l&&sw(i,`http://${l}`),i}function CR(){return document.getElementsByTagName("head")?.[0]??document}Wb({loadJS(r){return new Promise((t,i)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=Si("internal-error");c.customData=l,i(c)},s.type="text/javascript",s.charset="UTF-8",CR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SR("Browser");var Iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yr,ST;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,b){function R(){}R.prototype=b.prototype,w.F=b.prototype,w.prototype=new R,w.prototype.constructor=w,w.D=function(V,N,x){for(var I=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)I[Yt-2]=arguments[Yt];return b.prototype[N].apply(V,I)}}function i(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(s,i),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(w,b,R){R||(R=0);const V=Array(16);if(typeof b=="string")for(var N=0;N<16;++N)V[N]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(N=0;N<16;++N)V[N]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=w.g[0],R=w.g[1],N=w.g[2];let x=w.g[3],I;I=b+(x^R&(N^x))+V[0]+3614090360&4294967295,b=R+(I<<7&4294967295|I>>>25),I=x+(N^b&(R^N))+V[1]+3905402710&4294967295,x=b+(I<<12&4294967295|I>>>20),I=N+(R^x&(b^R))+V[2]+606105819&4294967295,N=x+(I<<17&4294967295|I>>>15),I=R+(b^N&(x^b))+V[3]+3250441966&4294967295,R=N+(I<<22&4294967295|I>>>10),I=b+(x^R&(N^x))+V[4]+4118548399&4294967295,b=R+(I<<7&4294967295|I>>>25),I=x+(N^b&(R^N))+V[5]+1200080426&4294967295,x=b+(I<<12&4294967295|I>>>20),I=N+(R^x&(b^R))+V[6]+2821735955&4294967295,N=x+(I<<17&4294967295|I>>>15),I=R+(b^N&(x^b))+V[7]+4249261313&4294967295,R=N+(I<<22&4294967295|I>>>10),I=b+(x^R&(N^x))+V[8]+1770035416&4294967295,b=R+(I<<7&4294967295|I>>>25),I=x+(N^b&(R^N))+V[9]+2336552879&4294967295,x=b+(I<<12&4294967295|I>>>20),I=N+(R^x&(b^R))+V[10]+4294925233&4294967295,N=x+(I<<17&4294967295|I>>>15),I=R+(b^N&(x^b))+V[11]+2304563134&4294967295,R=N+(I<<22&4294967295|I>>>10),I=b+(x^R&(N^x))+V[12]+1804603682&4294967295,b=R+(I<<7&4294967295|I>>>25),I=x+(N^b&(R^N))+V[13]+4254626195&4294967295,x=b+(I<<12&4294967295|I>>>20),I=N+(R^x&(b^R))+V[14]+2792965006&4294967295,N=x+(I<<17&4294967295|I>>>15),I=R+(b^N&(x^b))+V[15]+1236535329&4294967295,R=N+(I<<22&4294967295|I>>>10),I=b+(N^x&(R^N))+V[1]+4129170786&4294967295,b=R+(I<<5&4294967295|I>>>27),I=x+(R^N&(b^R))+V[6]+3225465664&4294967295,x=b+(I<<9&4294967295|I>>>23),I=N+(b^R&(x^b))+V[11]+643717713&4294967295,N=x+(I<<14&4294967295|I>>>18),I=R+(x^b&(N^x))+V[0]+3921069994&4294967295,R=N+(I<<20&4294967295|I>>>12),I=b+(N^x&(R^N))+V[5]+3593408605&4294967295,b=R+(I<<5&4294967295|I>>>27),I=x+(R^N&(b^R))+V[10]+38016083&4294967295,x=b+(I<<9&4294967295|I>>>23),I=N+(b^R&(x^b))+V[15]+3634488961&4294967295,N=x+(I<<14&4294967295|I>>>18),I=R+(x^b&(N^x))+V[4]+3889429448&4294967295,R=N+(I<<20&4294967295|I>>>12),I=b+(N^x&(R^N))+V[9]+568446438&4294967295,b=R+(I<<5&4294967295|I>>>27),I=x+(R^N&(b^R))+V[14]+3275163606&4294967295,x=b+(I<<9&4294967295|I>>>23),I=N+(b^R&(x^b))+V[3]+4107603335&4294967295,N=x+(I<<14&4294967295|I>>>18),I=R+(x^b&(N^x))+V[8]+1163531501&4294967295,R=N+(I<<20&4294967295|I>>>12),I=b+(N^x&(R^N))+V[13]+2850285829&4294967295,b=R+(I<<5&4294967295|I>>>27),I=x+(R^N&(b^R))+V[2]+4243563512&4294967295,x=b+(I<<9&4294967295|I>>>23),I=N+(b^R&(x^b))+V[7]+1735328473&4294967295,N=x+(I<<14&4294967295|I>>>18),I=R+(x^b&(N^x))+V[12]+2368359562&4294967295,R=N+(I<<20&4294967295|I>>>12),I=b+(R^N^x)+V[5]+4294588738&4294967295,b=R+(I<<4&4294967295|I>>>28),I=x+(b^R^N)+V[8]+2272392833&4294967295,x=b+(I<<11&4294967295|I>>>21),I=N+(x^b^R)+V[11]+1839030562&4294967295,N=x+(I<<16&4294967295|I>>>16),I=R+(N^x^b)+V[14]+4259657740&4294967295,R=N+(I<<23&4294967295|I>>>9),I=b+(R^N^x)+V[1]+2763975236&4294967295,b=R+(I<<4&4294967295|I>>>28),I=x+(b^R^N)+V[4]+1272893353&4294967295,x=b+(I<<11&4294967295|I>>>21),I=N+(x^b^R)+V[7]+4139469664&4294967295,N=x+(I<<16&4294967295|I>>>16),I=R+(N^x^b)+V[10]+3200236656&4294967295,R=N+(I<<23&4294967295|I>>>9),I=b+(R^N^x)+V[13]+681279174&4294967295,b=R+(I<<4&4294967295|I>>>28),I=x+(b^R^N)+V[0]+3936430074&4294967295,x=b+(I<<11&4294967295|I>>>21),I=N+(x^b^R)+V[3]+3572445317&4294967295,N=x+(I<<16&4294967295|I>>>16),I=R+(N^x^b)+V[6]+76029189&4294967295,R=N+(I<<23&4294967295|I>>>9),I=b+(R^N^x)+V[9]+3654602809&4294967295,b=R+(I<<4&4294967295|I>>>28),I=x+(b^R^N)+V[12]+3873151461&4294967295,x=b+(I<<11&4294967295|I>>>21),I=N+(x^b^R)+V[15]+530742520&4294967295,N=x+(I<<16&4294967295|I>>>16),I=R+(N^x^b)+V[2]+3299628645&4294967295,R=N+(I<<23&4294967295|I>>>9),I=b+(N^(R|~x))+V[0]+4096336452&4294967295,b=R+(I<<6&4294967295|I>>>26),I=x+(R^(b|~N))+V[7]+1126891415&4294967295,x=b+(I<<10&4294967295|I>>>22),I=N+(b^(x|~R))+V[14]+2878612391&4294967295,N=x+(I<<15&4294967295|I>>>17),I=R+(x^(N|~b))+V[5]+4237533241&4294967295,R=N+(I<<21&4294967295|I>>>11),I=b+(N^(R|~x))+V[12]+1700485571&4294967295,b=R+(I<<6&4294967295|I>>>26),I=x+(R^(b|~N))+V[3]+2399980690&4294967295,x=b+(I<<10&4294967295|I>>>22),I=N+(b^(x|~R))+V[10]+4293915773&4294967295,N=x+(I<<15&4294967295|I>>>17),I=R+(x^(N|~b))+V[1]+2240044497&4294967295,R=N+(I<<21&4294967295|I>>>11),I=b+(N^(R|~x))+V[8]+1873313359&4294967295,b=R+(I<<6&4294967295|I>>>26),I=x+(R^(b|~N))+V[15]+4264355552&4294967295,x=b+(I<<10&4294967295|I>>>22),I=N+(b^(x|~R))+V[6]+2734768916&4294967295,N=x+(I<<15&4294967295|I>>>17),I=R+(x^(N|~b))+V[13]+1309151649&4294967295,R=N+(I<<21&4294967295|I>>>11),I=b+(N^(R|~x))+V[4]+4149444226&4294967295,b=R+(I<<6&4294967295|I>>>26),I=x+(R^(b|~N))+V[11]+3174756917&4294967295,x=b+(I<<10&4294967295|I>>>22),I=N+(b^(x|~R))+V[2]+718787259&4294967295,N=x+(I<<15&4294967295|I>>>17),I=R+(x^(N|~b))+V[9]+3951481745&4294967295,w.g[0]=w.g[0]+b&4294967295,w.g[1]=w.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,w.g[2]=w.g[2]+N&4294967295,w.g[3]=w.g[3]+x&4294967295}s.prototype.v=function(w,b){b===void 0&&(b=w.length);const R=b-this.blockSize,V=this.C;let N=this.h,x=0;for(;x<b;){if(N==0)for(;x<=R;)l(this,w,x),x+=this.blockSize;if(typeof w=="string"){for(;x<b;)if(V[N++]=w.charCodeAt(x++),N==this.blockSize){l(this,V),N=0;break}}else for(;x<b;)if(V[N++]=w[x++],N==this.blockSize){l(this,V),N=0;break}}this.h=N,this.o+=b},s.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var b=1;b<w.length-8;++b)w[b]=0;b=this.o*8;for(var R=w.length-8;R<w.length;++R)w[R]=b&255,b/=256;for(this.v(w),w=Array(16),b=0,R=0;R<4;++R)for(let V=0;V<32;V+=8)w[b++]=this.g[R]>>>V&255;return w};function c(w,b){var R=g;return Object.prototype.hasOwnProperty.call(R,w)?R[w]:R[w]=b(w)}function d(w,b){this.h=b;const R=[];let V=!0;for(let N=w.length-1;N>=0;N--){const x=w[N]|0;V&&x==b||(R[N]=x,V=!1)}this.g=R}var g={};function y(w){return-128<=w&&w<128?c(w,function(b){return new d([b|0],b<0?-1:0)}):new d([w|0],w<0?-1:0)}function _(w){if(isNaN(w)||!isFinite(w))return S;if(w<0)return Z(_(-w));const b=[];let R=1;for(let V=0;w>=R;V++)b[V]=w/R|0,R*=4294967296;return new d(b,0)}function A(w,b){if(w.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(w.charAt(0)=="-")return Z(A(w.substring(1),b));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=_(Math.pow(b,8));let V=S;for(let x=0;x<w.length;x+=8){var N=Math.min(8,w.length-x);const I=parseInt(w.substring(x,x+N),b);N<8?(N=_(Math.pow(b,N)),V=V.j(N).add(_(I))):(V=V.j(R),V=V.add(_(I)))}return V}var S=y(0),D=y(1),H=y(16777216);r=d.prototype,r.m=function(){if(W(this))return-Z(this).m();let w=0,b=1;for(let R=0;R<this.g.length;R++){const V=this.i(R);w+=(V>=0?V:4294967296+V)*b,b*=4294967296}return w},r.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if($(this))return"0";if(W(this))return"-"+Z(this).toString(w);const b=_(Math.pow(w,6));var R=this;let V="";for(;;){const N=jt(R,b).g;R=ct(R,N.j(b));let x=((R.g.length>0?R.g[0]:R.h)>>>0).toString(w);if(R=N,$(R))return x+V;for(;x.length<6;)x="0"+x;V=x+V}},r.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function $(w){if(w.h!=0)return!1;for(let b=0;b<w.g.length;b++)if(w.g[b]!=0)return!1;return!0}function W(w){return w.h==-1}r.l=function(w){return w=ct(this,w),W(w)?-1:$(w)?0:1};function Z(w){const b=w.g.length,R=[];for(let V=0;V<b;V++)R[V]=~w.g[V];return new d(R,~w.h).add(D)}r.abs=function(){return W(this)?Z(this):this},r.add=function(w){const b=Math.max(this.g.length,w.g.length),R=[];let V=0;for(let N=0;N<=b;N++){let x=V+(this.i(N)&65535)+(w.i(N)&65535),I=(x>>>16)+(this.i(N)>>>16)+(w.i(N)>>>16);V=I>>>16,x&=65535,I&=65535,R[N]=I<<16|x}return new d(R,R[R.length-1]&-2147483648?-1:0)};function ct(w,b){return w.add(Z(b))}r.j=function(w){if($(this)||$(w))return S;if(W(this))return W(w)?Z(this).j(Z(w)):Z(Z(this).j(w));if(W(w))return Z(this.j(Z(w)));if(this.l(H)<0&&w.l(H)<0)return _(this.m()*w.m());const b=this.g.length+w.g.length,R=[];for(var V=0;V<2*b;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(let N=0;N<w.g.length;N++){const x=this.i(V)>>>16,I=this.i(V)&65535,Yt=w.i(N)>>>16,ue=w.i(N)&65535;R[2*V+2*N]+=I*ue,lt(R,2*V+2*N),R[2*V+2*N+1]+=x*ue,lt(R,2*V+2*N+1),R[2*V+2*N+1]+=I*Yt,lt(R,2*V+2*N+1),R[2*V+2*N+2]+=x*Yt,lt(R,2*V+2*N+2)}for(w=0;w<b;w++)R[w]=R[2*w+1]<<16|R[2*w];for(w=b;w<2*b;w++)R[w]=0;return new d(R,0)};function lt(w,b){for(;(w[b]&65535)!=w[b];)w[b+1]+=w[b]>>>16,w[b]&=65535,b++}function dt(w,b){this.g=w,this.h=b}function jt(w,b){if($(b))throw Error("division by zero");if($(w))return new dt(S,S);if(W(w))return b=jt(Z(w),b),new dt(Z(b.g),Z(b.h));if(W(b))return b=jt(w,Z(b)),new dt(Z(b.g),b.h);if(w.g.length>30){if(W(w)||W(b))throw Error("slowDivide_ only works with positive integers.");for(var R=D,V=b;V.l(w)<=0;)R=Wt(R),V=Wt(V);var N=Mt(R,1),x=Mt(V,1);for(V=Mt(V,2),R=Mt(R,2);!$(V);){var I=x.add(V);I.l(w)<=0&&(N=N.add(R),x=I),V=Mt(V,1),R=Mt(R,1)}return b=ct(w,N.j(b)),new dt(N,b)}for(N=S;w.l(b)>=0;){for(R=Math.max(1,Math.floor(w.m()/b.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),x=_(R),I=x.j(b);W(I)||I.l(w)>0;)R-=V,x=_(R),I=x.j(b);$(x)&&(x=D),N=N.add(x),w=ct(w,I)}return new dt(N,w)}r.B=function(w){return jt(this,w).h},r.and=function(w){const b=Math.max(this.g.length,w.g.length),R=[];for(let V=0;V<b;V++)R[V]=this.i(V)&w.i(V);return new d(R,this.h&w.h)},r.or=function(w){const b=Math.max(this.g.length,w.g.length),R=[];for(let V=0;V<b;V++)R[V]=this.i(V)|w.i(V);return new d(R,this.h|w.h)},r.xor=function(w){const b=Math.max(this.g.length,w.g.length),R=[];for(let V=0;V<b;V++)R[V]=this.i(V)^w.i(V);return new d(R,this.h^w.h)};function Wt(w){const b=w.g.length+1,R=[];for(let V=0;V<b;V++)R[V]=w.i(V)<<1|w.i(V-1)>>>31;return new d(R,w.h)}function Mt(w,b){const R=b>>5;b%=32;const V=w.g.length-R,N=[];for(let x=0;x<V;x++)N[x]=b>0?w.i(x+R)>>>b|w.i(x+R+1)<<32-b:w.i(x+R);return new d(N,w.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,ST=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=A,Yr=d}).apply(typeof Iv<"u"?Iv:typeof self<"u"?self:typeof window<"u"?window:{});var Rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bT,yl,wT,Uc,um,RT,IT,CT;(function(){var r,t=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rc=="object"&&Rc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=i(this);function l(u,m){if(m)t:{var v=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var L=u[T];if(!(L in v))break t;v=v[L]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&t(v,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var v=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&v.push([T,m[T]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function y(u,m,v){return u.call.apply(u.bind,arguments)}function _(u,m,v){return _=y,_.apply(null,arguments)}function A(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function S(u,m){function v(){}v.prototype=m.prototype,u.Z=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(T,L,B){for(var J=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)J[Tt-2]=arguments[Tt];return m.prototype[L].apply(T,J)}}var D=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function H(u){const m=u.length;if(m>0){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function $(u,m){for(let T=1;T<arguments.length;T++){const L=arguments[T];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=u.length||0;const B=L.length||0;u.length=v+B;for(let J=0;J<B;J++)u[v+J]=L[J]}else u.push(L)}}class W{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Z(u){d.setTimeout(()=>{throw u},0)}function ct(){var u=w;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class lt{constructor(){this.h=this.g=null}add(m,v){const T=dt.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var dt=new W(()=>new jt,u=>u.reset());class jt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Wt,Mt=!1,w=new lt,b=()=>{const u=Promise.resolve(void 0);Wt=()=>{u.then(R)}};function R(){for(var u;u=ct();){try{u.h.call(u.g)}catch(v){Z(v)}var m=dt;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}Mt=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var x=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function Yt(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}S(Yt,N),Yt.prototype.init=function(u,m){const v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Yt.Z.h.call(this)},Yt.prototype.h=function(){Yt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ue="closure_listenable_"+(Math.random()*1e6|0),q=0;function tt(u,m,v,T,L){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=L,this.key=++q,this.da=this.fa=!1}function ut(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Vt(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function Ht(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function M(u){const m={};for(const v in u)m[v]=u[v];return m}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function et(u,m){let v,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(v in T)u[v]=T[v];for(let B=0;B<K.length;B++)v=K[B],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function it(u){this.src=u,this.g={},this.h=0}it.prototype.add=function(u,m,v,T,L){const B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);const J=St(u,m,T,L);return J>-1?(m=u[J],v||(m.fa=!1)):(m=new tt(m,this.src,B,!!T,L),m.fa=v,u.push(m)),m};function yt(u,m){const v=m.type;if(v in u.g){var T=u.g[v],L=Array.prototype.indexOf.call(T,m,void 0),B;(B=L>=0)&&Array.prototype.splice.call(T,L,1),B&&(ut(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function St(u,m,v,T){for(let L=0;L<u.length;++L){const B=u[L];if(!B.da&&B.listener==m&&B.capture==!!v&&B.ha==T)return L}return-1}var Ut="closure_lm_"+(Math.random()*1e6|0),Ne={};function se(u,m,v,T,L){if(Array.isArray(m)){for(let B=0;B<m.length;B++)se(u,m[B],v,T,L);return null}return v=fo(v),u&&u[ue]?u.J(m,v,g(T)?!!T.capture:!1,L):os(u,m,v,!1,T,L)}function os(u,m,v,T,L,B){if(!m)throw Error("Invalid event type");const J=g(L)?!!L.capture:!!L;let Tt=ls(u);if(Tt||(u[Ut]=Tt=new it(u)),v=Tt.add(m,v,T,J,B),v.proxy)return v;if(T=$s(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)x||(L=J),L===void 0&&(L=!1),u.addEventListener(m.toString(),T,L);else if(u.attachEvent)u.attachEvent(ti(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function $s(){function u(v){return m.call(u.src,u.listener,v)}const m=co;return u}function Zs(u,m,v,T,L){if(Array.isArray(m))for(var B=0;B<m.length;B++)Zs(u,m[B],v,T,L);else T=g(T)?!!T.capture:!!T,v=fo(v),u&&u[ue]?(u=u.i,B=String(m).toString(),B in u.g&&(m=u.g[B],v=St(m,v,T,L),v>-1&&(ut(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete u.g[B],u.h--)))):u&&(u=ls(u))&&(m=u.g[m.toString()],u=-1,m&&(u=St(m,v,T,L)),(v=u>-1?m[u]:null)&&Js(v))}function Js(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ue])yt(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(ti(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=ls(m))?(yt(v,u),v.h==0&&(v.src=null,m[Ut]=null)):ut(u)}}}function ti(u){return u in Ne?Ne[u]:Ne[u]="on"+u}function co(u,m){if(u.da)u=!0;else{m=new Yt(m,this);const v=u.listener,T=u.ha||u.src;u.fa&&Js(u),u=v.call(T,m)}return u}function ls(u){return u=u[Ut],u instanceof it?u:null}var ho="__closure_events_fn_"+(Math.random()*1e9>>>0);function fo(u){return typeof u=="function"?u:(u[ho]||(u[ho]=function(m){return u.handleEvent(m)}),u[ho])}function _e(){V.call(this),this.i=new it(this),this.M=this,this.G=null}S(_e,V),_e.prototype[ue]=!0,_e.prototype.removeEventListener=function(u,m,v,T){Zs(this,u,m,v,T)};function Oe(u,m){var v,T=u.G;if(T)for(v=[];T;T=T.G)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var L=m;m=new N(T,u),et(m,L)}L=!0;let B,J;if(v)for(J=v.length-1;J>=0;J--)B=m.g=v[J],L=sr(B,T,!0,m)&&L;if(B=m.g=u,L=sr(B,T,!0,m)&&L,L=sr(B,T,!1,m)&&L,v)for(J=0;J<v.length;J++)B=m.g=v[J],L=sr(B,T,!1,m)&&L}_e.prototype.N=function(){if(_e.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const v=u.g[m];for(let T=0;T<v.length;T++)ut(v[T]);delete u.g[m],u.h--}}this.G=null},_e.prototype.J=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},_e.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function sr(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let B=0;B<m.length;++B){const J=m[B];if(J&&!J.da&&J.capture==v){const Tt=J.listener,me=J.ha||J.src;J.fa&&yt(u.i,J),L=Tt.call(me,T)!==!1&&L}}return L&&!T.defaultPrevented}function xh(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function $l(u){u.g=xh(()=>{u.g=null,u.i&&(u.i=!1,$l(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class We extends V{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:$l(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function us(u){V.call(this),this.h=u,this.g={}}S(us,V);var mo=[];function go(u){Vt(u.g,function(m,v){this.g.hasOwnProperty(v)&&Js(m)},u),u.g={}}us.prototype.N=function(){us.Z.N.call(this),go(this)},us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=d.JSON.stringify,Uh=d.JSON.parse,Zl=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Jl(){}function Wl(){}var Pn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ze(){N.call(this,"d")}S(ze,N);function bn(){N.call(this,"c")}S(bn,N);var de={},tu=null;function Ws(){return tu=tu||new _e}de.Ia="serverreachability";function eu(u){N.call(this,de.Ia,u)}S(eu,N);function ei(u){const m=Ws();Oe(m,new eu(m))}de.STAT_EVENT="statevent";function cs(u,m){N.call(this,de.STAT_EVENT,u),this.stat=m}S(cs,N);function ve(u){const m=Ws();Oe(m,new cs(m,u))}de.Ja="timingevent";function ni(u,m){N.call(this,de.Ja,u),this.size=m}S(ni,N);function ii(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function Lh(u,m,v,T,L,B){u.info(function(){if(u.g)if(B){var J="",Tt=B.split("&");for(let Bt=0;Bt<Tt.length;Bt++){var me=Tt[Bt].split("=");if(me.length>1){const ae=me[0];me=me[1];const Cn=ae.split("_");J=Cn.length>=2&&Cn[1]=="type"?J+(ae+"="+me+"&"):J+(ae+"=redacted&")}}}else J=null;else J=B;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+m+`
`+v+`
`+J})}function nu(u,m,v,T,L,B,J){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+m+`
`+v+`
`+B+" "+J})}function ri(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+kh(u,v)+(T?" "+T:"")})}function hs(u,m){u.info(function(){return"TIMEOUT: "+m})}zn.prototype.info=function(){};function kh(u,m){if(!u.g)return m;if(!m)return null;try{const B=JSON.parse(m);if(B){for(u=0;u<B.length;u++)if(Array.isArray(B[u])){var v=B[u];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var L=T[0];if(L!="noop"&&L!="stop"&&L!="close")for(let J=1;J<T.length;J++)T[J]=""}}}}return ar(B)}catch{return m}}var fs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},po={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yo;function ds(){}S(ds,Jl),ds.prototype.g=function(){return new XMLHttpRequest},yo=new ds;function Ni(u){return encodeURIComponent(String(u))}function iu(u){var m=1;u=u.split(":");const v=[];for(;m>0&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function Bn(u,m,v,T){this.j=u,this.i=m,this.l=v,this.S=T||1,this.V=new us(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qn}function qn(){this.i=null,this.g="",this.h=!1}var Ee={},xe={};function si(u,m,v){u.M=1,u.A=ms(Ae(m)),u.u=v,u.R=!0,ta(u,null)}function ta(u,m){u.F=Date.now(),ai(u),u.B=Ae(u.A);var v=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),ra(v.i,"t",T),u.C=0,v=u.j.L,u.h=new qn,u.g=_u(u.j,v?m:null,!u.u),u.P>0&&(u.O=new We(_(u.Y,u,u.g),u.P)),m=u.V,v=u.g,T=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(mo[0]=L.toString()),L=mo);for(let B=0;B<L.length;B++){const J=se(v,L[B],T||m.handleEvent,!1,m.h||m);if(!J)break;m.g[J.key]=J}m=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),ei(),Lh(u.i,u.v,u.B,u.l,u.S,u.u)}Bn.prototype.ba=function(u){u=u.target;const m=this.O;m&&Gn(u)==3?m.j():this.Y(u)},Bn.prototype.Y=function(u){try{if(u==this.g)t:{const Tt=Gn(this.g),me=this.g.ya(),Bt=this.g.ca();if(!(Tt<3)&&(Tt!=3||this.g&&(this.h.h||this.g.la()||Be(this.g)))){this.K||Tt!=4||me==7||(me==8||Bt<=0?ei(3):ei(2)),oi(this);var m=this.g.ca();this.X=m;var v=Ph(this);if(this.o=m==200,nu(this.i,this.v,this.B,this.l,this.S,Tt,m),this.o){if(this.U&&!this.L){e:{if(this.g){var T,L=this.g;if((T=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(T)){var B=T;break e}}B=null}if(u=B)ri(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,li(this,u);else{this.o=!1,this.m=3,ve(12),fn(this),wn(this);break t}}if(this.R){u=!0;let ae;for(;!this.K&&this.C<v.length;)if(ae=su(this,v),ae==xe){Tt==4&&(this.m=4,ve(14),u=!1),ri(this.i,this.l,null,"[Incomplete Response]");break}else if(ae==Ee){this.m=4,ve(15),ri(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else ri(this.i,this.l,ae,null),li(this,ae);if(ru(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||v.length!=0||this.h.h||(this.m=1,ve(16),u=!1),this.o=this.o&&u,!u)ri(this.i,this.l,v,"[Invalid Chunked Response]"),fn(this),wn(this);else if(v.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Mo(J),J.P=!0,ve(11))}}else ri(this.i,this.l,v,null),li(this,v);Tt==4&&fn(this),this.o&&!this.K&&(Tt==4?mu(this.j,this):(this.o=!1,ai(this)))}else Mi(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,ve(12)):(this.m=0,ve(13)),fn(this),wn(this)}}}catch{}finally{}};function Ph(u){if(!ru(u))return u.g.la();const m=Be(u.g);if(m==="")return"";let v="";const T=m.length,L=Gn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return fn(u),wn(u),"";u.h.i=new d.TextDecoder}for(let B=0;B<T;B++)u.h.h=!0,v+=u.h.i.decode(m[B],{stream:!(L&&B==T-1)});return m.length=0,u.h.g+=v,u.C=0,u.h.g}function ru(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function su(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?xe:(v=Number(m.substring(v,T)),isNaN(v)?Ee:(T+=1,T+v>m.length?xe:(m=m.slice(T,T+v),u.C=T+v,m)))}Bn.prototype.cancel=function(){this.K=!0,fn(this)};function ai(u){u.T=Date.now()+u.H,ea(u,u.H)}function ea(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ii(_(u.aa,u),m)}function oi(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(hs(this.i,this.B),this.M!=2&&(ei(),ve(17)),fn(this),this.m=2,wn(this)):ea(this,this.T-u)};function wn(u){u.j.I==0||u.K||mu(u.j,u)}function fn(u){oi(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,go(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function li(u,m){try{var v=u.j;if(v.I!=0&&(v.g==u||ci(v.h,u))){if(!u.L&&ci(v.h,u)&&v.I==3){try{var T=v.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)ua(v),mr(v);else break t;Ts(v),ve(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ii(_(v.Va,v),6e3));ui(v.h)<=1&&v.ta&&(v.ta=void 0)}else pi(v,11)}else if((u.L||v.g==u)&&ua(v),!I(m))for(L=v.Ba.g.parse(m),m=0;m<L.length;m++){let Bt=L[m];const ae=Bt[0];if(!(ae<=v.K))if(v.K=ae,Bt=Bt[1],v.I==2)if(Bt[0]=="c"){v.M=Bt[1],v.ba=Bt[2];const Cn=Bt[3];Cn!=null&&(v.ka=Cn,v.j.info("VER="+v.ka));const yi=Bt[4];yi!=null&&(v.za=yi,v.j.info("SVER="+v.za));const Fn=Bt[5];Fn!=null&&typeof Fn=="number"&&Fn>0&&(T=1.5*Fn,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const Qn=u.g;if(Qn){const As=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(As){var B=T.h;B.g||As.indexOf("spdy")==-1&&As.indexOf("quic")==-1&&As.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Eo(B,B.h),B.h=null))}if(T.G){const ca=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;ca&&(T.wa=ca,Ft(T.J,T.G,ca))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var J=u;if(T.na=yu(T,T.L?T.ba:null,T.W),J.L){To(T.h,J);var Tt=J,me=T.O;me&&(Tt.H=me),Tt.D&&(oi(Tt),ai(Tt)),T.g=J}else fu(T);v.i.length>0&&gi(v)}else Bt[0]!="stop"&&Bt[0]!="close"||pi(v,7);else v.I==3&&(Bt[0]=="stop"||Bt[0]=="close"?Bt[0]=="stop"?pi(v,7):No(v):Bt[0]!="noop"&&v.l&&v.l.qa(Bt),v.A=0)}}ei(4)}catch{}}var Te=class{constructor(u,m){this.g=u,this.map=m}};function _o(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ui(u){return u.h?1:u.g?u.g.size:0}function ci(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Eo(u,m){u.g?u.g.add(m):u.h=m}function To(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}_o.prototype.cancel=function(){if(this.i=Ao(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ao(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.G);return m}return H(u.i)}var au=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function na(u,m){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const T=u[v].indexOf("=");let L,B=null;T>=0?(L=u[v].substring(0,T),B=u[v].substring(T+1)):L=u[v],m(L,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function dn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof dn?(this.l=u.l,Ue(this,u.j),this.o=u.o,this.g=u.g,or(this,u.u),this.h=u.h,So(this,cu(u.i)),this.m=u.m):u&&(m=String(u).match(au))?(this.l=!1,Ue(this,m[1]||"",!0),this.o=hi(m[2]||""),this.g=hi(m[3]||"",!0),or(this,m[4]),this.h=hi(m[5]||"",!0),So(this,m[6]||"",!0),this.m=hi(m[7]||"")):(this.l=!1,this.i=new ur(null,this.l))}dn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(gs(m,ia,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(gs(m,ia,!0),"@"),u.push(Ni(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(gs(v,v.charAt(0)=="/"?bo:ou,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",gs(v,lu)),u.join("")},dn.prototype.resolve=function(u){const m=Ae(this);let v=!!u.j;v?Ue(m,u.j):v=!!u.o,v?m.o=u.o:v=!!u.g,v?m.g=u.g:v=u.u!=null;var T=u.h;if(v)or(m,u.u);else if(v=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var L=m.h.lastIndexOf("/");L!=-1&&(T=m.h.slice(0,L+1)+T)}if(L=T,L==".."||L==".")T="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){T=L.lastIndexOf("/",0)==0,L=L.split("/");const B=[];for(let J=0;J<L.length;){const Tt=L[J++];Tt=="."?T&&J==L.length&&B.push(""):Tt==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),T&&J==L.length&&B.push("")):(B.push(Tt),T=!0)}T=B.join("/")}else T=L}return v?m.h=T:v=u.i.toString()!=="",v?So(m,cu(u.i)):v=!!u.m,v&&(m.m=u.m),m};function Ae(u){return new dn(u)}function Ue(u,m,v){u.j=v?hi(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function or(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function So(u,m,v){m instanceof ur?(u.i=m,sa(u.i,u.l)):(v||(m=gs(m,lr)),u.i=new ur(m,u.l))}function Ft(u,m,v){u.i.set(m,v)}function ms(u){return Ft(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function hi(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function gs(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,nn),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ia=/[#\/\?@]/g,ou=/[#\?:]/g,bo=/[#\?]/g,lr=/[#\?@]/g,lu=/#/g;function ur(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function rn(u){u.g||(u.g=new Map,u.h=0,u.i&&na(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=ur.prototype,r.add=function(u,m){rn(this),this.i=null,u=cr(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function uu(u,m){rn(u),m=cr(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function wo(u,m){return rn(u),m=cr(u,m),u.g.has(m)}r.forEach=function(u,m){rn(this),this.g.forEach(function(v,T){v.forEach(function(L){u.call(m,L,T,this)},this)},this)};function Ro(u,m){rn(u);let v=[];if(typeof m=="string")wo(u,m)&&(v=v.concat(u.g.get(cr(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)v=v.concat(u[m]);return v}r.set=function(u,m){return rn(this),this.i=null,u=cr(this,u),wo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=Ro(this,u),u.length>0?String(u[0]):m):m};function ra(u,m,v){uu(u,m),v.length>0&&(u.i=null,u.g.set(cr(u,m),H(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var v=m[T];const L=Ni(v);v=Ro(this,v);for(let B=0;B<v.length;B++){let J=L;v[B]!==""&&(J+="="+Ni(v[B])),u.push(J)}}return this.i=u.join("&")};function cu(u){const m=new ur;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function cr(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function sa(u,m){m&&!u.j&&(rn(u),u.i=null,u.g.forEach(function(v,T){const L=T.toLowerCase();T!=L&&(uu(this,T),ra(this,L,v))},u)),u.j=m}function jn(u,m){const v=new zn;if(d.Image){const T=new Image;T.onload=A(Rn,v,"TestLoadImage: loaded",!0,m,T),T.onerror=A(Rn,v,"TestLoadImage: error",!1,m,T),T.onabort=A(Rn,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=A(Rn,v,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Io(u,m){const v=new zn,T=new AbortController,L=setTimeout(()=>{T.abort(),Rn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(B=>{clearTimeout(L),B.ok?Rn(v,"TestPingServer: ok",!0,m):Rn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Rn(v,"TestPingServer: error",!1,m)})}function Rn(u,m,v,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(v)}catch{}}function hr(){this.g=new Zl}function fi(u){this.i=u.Sb||null,this.h=u.ab||!1}S(fi,Jl),fi.prototype.g=function(){return new ps(this.i,this.h)};function ps(u,m){_e.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(ps,_e),r=ps.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Hn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Hn(this)),this.g&&(this.readyState=3,Hn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;aa(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function aa(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?fr(this):Hn(this),this.readyState==3&&aa(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,fr(this))},r.Na=function(u){this.g&&(this.response=u,fr(this))},r.ga=function(){this.g&&fr(this)};function fr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Hn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Hn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ps.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function In(u){let m="";return Vt(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function ys(u,m,v){t:{for(T in v){var T=!1;break t}T=!0}T||(v=In(v),typeof u=="string"?v!=null&&Ni(v):Ft(u,m,v))}function Xt(u){_e.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Xt,_e);var di=/^https?$/i,Co=["POST","PUT"];r=Xt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yo.g(),this.g.onreadystatechange=D(_(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){_s(this,B);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)v.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())v.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),L=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Co,m,void 0)>=0)||T||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,J]of v)this.g.setRequestHeader(B,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(B){_s(this,B)}};function _s(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Do(u),Oi(u)}function Do(u){u.A||(u.A=!0,Oe(u,"complete"),Oe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Oe(this,"complete"),Oe(this,"abort"),Oi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),Xt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?vs(this):this.Xa())},r.Xa=function(){vs(this)};function vs(u){if(u.h&&typeof c<"u"){if(u.v&&Gn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Oe(u,"readystatechange"),Gn(u)==4){u.h=!1;try{const B=u.ca();t:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var v;if(!(v=m)){var T;if(T=B===0){let J=String(u.D).match(au)[1]||null;!J&&d.self&&d.self.location&&(J=d.self.location.protocol.slice(0,-1)),T=!di.test(J?J.toLowerCase():"")}v=T}if(v)Oe(u,"complete"),Oe(u,"success");else{u.o=6;try{var L=Gn(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",Do(u)}}finally{Oi(u)}}}}function Oi(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,m||Oe(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Gn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Gn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Uh(m)}};function Be(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Mi(u){const m={};u=(u.g&&Gn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(I(u[T]))continue;var v=iu(u[T]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const B=m[L]||[];m[L]=B,B.push(v)}Ht(m,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function dr(u){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mi("baseRetryDelayMs",5e3,u),this.Za=mi("retryDelaySeedMs",1e4,u),this.Ta=mi("forwardChannelMaxRetries",2,u),this.va=mi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new _o(u&&u.concurrentRequestLimit),this.Ba=new hr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=dr.prototype,r.ka=8,r.I=1,r.connect=function(u,m,v,T){ve(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=yu(this,null,this.W),gi(this)};function No(u){if(oa(u),u.I==3){var m=u.V++,v=Ae(u.J);if(Ft(v,"SID",u.M),Ft(v,"RID",m),Ft(v,"TYPE","terminate"),Es(u,v),m=new Bn(u,u.j,m),m.M=2,m.A=ms(Ae(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.A,v=!0),v||(m.g=_u(m.j,null),m.g.ea(m.A)),m.F=Date.now(),ai(m)}pu(u)}function mr(u){u.g&&(Mo(u),u.g.cancel(),u.g=null)}function oa(u){mr(u),u.v&&(d.clearTimeout(u.v),u.v=null),ua(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function gi(u){if(!vo(u.h)&&!u.m){u.m=!0;var m=u.Ea;Wt||b(),Mt||(Wt(),Mt=!0),w.add(m,u),u.D=0}}function la(u,m){return ui(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ii(_(u.Ea,u,m),gu(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new Bn(this,this.j,u);let B=this.o;if(this.U&&(B?(B=M(B),et(B,this.U)):B=this.U),this.u!==null||this.R||(L.J=B,B=null),this.S)t:{for(var m=0,v=0;v<this.i.length;v++){e:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=v;break t}if(m===4096||v===this.i.length-1){m=v+1;break t}}m=1e3}else m=1e3;m=hu(this,L,m),v=Ae(this.J),Ft(v,"RID",u),Ft(v,"CVER",22),this.G&&Ft(v,"X-HTTP-Session-Id",this.G),Es(this,v),B&&(this.R?m="headers="+Ni(In(B))+"&"+m:this.u&&ys(v,this.u,B)),Eo(this.h,L),this.Ra&&Ft(v,"TYPE","init"),this.S?(Ft(v,"$req",m),Ft(v,"SID","null"),L.U=!0,si(L,v,null)):si(L,v,m),this.I=2}}else this.I==3&&(u?Oo(this,u):this.i.length==0||vo(this.h)||Oo(this))};function Oo(u,m){var v;m?v=m.l:v=u.V++;const T=Ae(u.J);Ft(T,"SID",u.M),Ft(T,"RID",v),Ft(T,"AID",u.K),Es(u,T),u.u&&u.o&&ys(T,u.u,u.o),v=new Bn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),m&&(u.i=m.G.concat(u.i)),m=hu(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Eo(u.h,v),si(v,T,m)}function Es(u,m){u.H&&Vt(u.H,function(v,T){Ft(m,T,v)}),u.l&&Vt({},function(v,T){Ft(m,T,v)})}function hu(u,m,v){v=Math.min(u.i.length,v);const T=u.l?_(u.l.Ka,u.l,u):null;t:{var L=u.i;let Tt=-1;for(;;){const me=["count="+v];Tt==-1?v>0?(Tt=L[0].g,me.push("ofs="+Tt)):Tt=0:me.push("ofs="+Tt);let Bt=!0;for(let ae=0;ae<v;ae++){var B=L[ae].g;const Cn=L[ae].map;if(B-=Tt,B<0)Tt=Math.max(0,L[ae].g-100),Bt=!1;else try{B="req"+B+"_"||"";try{var J=Cn instanceof Map?Cn:Object.entries(Cn);for(const[yi,Fn]of J){let Qn=Fn;g(Fn)&&(Qn=ar(Fn)),me.push(B+yi+"="+encodeURIComponent(Qn))}}catch(yi){throw me.push(B+"type="+encodeURIComponent("_badmap")),yi}}catch{T&&T(Cn)}}if(Bt){J=me.join("&");break t}}J=void 0}return u=u.i.splice(0,v),m.G=u,J}function fu(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;Wt||b(),Mt||(Wt(),Mt=!0),w.add(m,u),u.A=0}}function Ts(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ii(_(u.Da,u),gu(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,du(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ii(_(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ve(10),mr(this),du(this))};function Mo(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function du(u){u.g=new Bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=Ae(u.na);Ft(m,"RID","rpc"),Ft(m,"SID",u.M),Ft(m,"AID",u.K),Ft(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ft(m,"TO",u.ia),Ft(m,"TYPE","xmlhttp"),Es(u,m),u.u&&u.o&&ys(m,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=ms(Ae(m)),v.u=null,v.R=!0,ta(v,u)}r.Va=function(){this.C!=null&&(this.C=null,mr(this),Ts(this),ve(19))};function ua(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function mu(u,m){var v=null;if(u.g==m){ua(u),Mo(u),u.g=null;var T=2}else if(ci(u.h,m))v=m.G,To(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var L=u.D;T=Ws(),Oe(T,new ni(T,v)),gi(u)}else fu(u);else if(L=m.m,L==3||L==0&&m.X>0||!(T==1&&la(u,m)||T==2&&Ts(u)))switch(v&&v.length>0&&(m=u.h,m.i=m.i.concat(v)),L){case 1:pi(u,5);break;case 4:pi(u,10);break;case 3:pi(u,6);break;default:pi(u,2)}}}function gu(u,m){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*m}function pi(u,m){if(u.j.info("Error code "+m),m==2){var v=_(u.bb,u),T=u.Ua;const L=!T;T=new dn(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ue(T,"https"),ms(T),L?jn(T.toString(),v):Io(T.toString(),v)}else ve(2);u.I=0,u.l&&u.l.pa(m),pu(u),oa(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ve(2)):(this.j.info("Failed to ping google.com"),ve(1))};function pu(u){if(u.I=0,u.ja=[],u.l){const m=Ao(u.h);(m.length!=0||u.i.length!=0)&&($(u.ja,m),$(u.ja,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.oa()}}function yu(u,m,v){var T=v instanceof dn?Ae(v):new dn(v);if(T.g!="")m&&(T.g=m+"."+T.g),or(T,T.u);else{var L=d.location;T=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const B=new dn(null);T&&Ue(B,T),m&&(B.g=m),L&&or(B,L),v&&(B.h=v),T=B}return v=u.G,m=u.wa,v&&m&&Ft(T,v,m),Ft(T,"VER",u.ka),Es(u,T),T}function _u(u,m,v){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new Xt(new fi({ab:v})):new Xt(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function vu(){}r=vu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function gr(){}gr.prototype.g=function(u,m){return new tn(u,m)};function tn(u,m){_e.call(this),this.g=new dr(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!I(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!I(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Vi(this)}S(tn,_e),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){No(this.g)},tn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=ar(u),u=v);m.i.push(new Te(m.Ya++,u)),m.I==3&&gi(m)},tn.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,tn.Z.N.call(this)};function Eu(u){ze.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const v in m){u=v;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}S(Eu,ze);function Tu(){bn.call(this),this.status=1}S(Tu,bn);function Vi(u){this.g=u}S(Vi,vu),Vi.prototype.ra=function(){Oe(this.g,"a")},Vi.prototype.qa=function(u){Oe(this.g,new Eu(u))},Vi.prototype.pa=function(u){Oe(this.g,new Tu)},Vi.prototype.oa=function(){Oe(this.g,"b")},gr.prototype.createWebChannel=gr.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,CT=function(){return new gr},IT=function(){return Ws()},RT=de,um={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fs.NO_ERROR=0,fs.TIMEOUT=8,fs.HTTP_ERROR=6,Uc=fs,po.COMPLETE="complete",wT=po,Wl.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",_e.prototype.listen=_e.prototype.J,yl=Wl,Xt.prototype.listenOnce=Xt.prototype.K,Xt.prototype.getLastError=Xt.prototype.Ha,Xt.prototype.getLastErrorCode=Xt.prototype.ya,Xt.prototype.getStatus=Xt.prototype.ca,Xt.prototype.getResponseJson=Xt.prototype.La,Xt.prototype.getResponseText=Xt.prototype.la,Xt.prototype.send=Xt.prototype.ea,Xt.prototype.setWithCredentials=Xt.prototype.Fa,bT=Xt}).apply(typeof Rc<"u"?Rc:typeof self<"u"?self:typeof window<"u"?window:{});const Cv="@firebase/firestore",Dv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $e=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new Cm("@firebase/firestore");function Ba(){return Qs.logLevel}function rt(r,...t){if(Qs.logLevel<=Dt.DEBUG){const i=t.map(Pm);Qs.debug(`Firestore (${so}): ${r}`,...i)}}function er(r,...t){if(Qs.logLevel<=Dt.ERROR){const i=t.map(Pm);Qs.error(`Firestore (${so}): ${r}`,...i)}}function $a(r,...t){if(Qs.logLevel<=Dt.WARN){const i=t.map(Pm);Qs.warn(`Firestore (${so}): ${r}`,...i)}}function Pm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(r,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,DT(r,s,i)}function DT(r,t,i){let s=`FIRESTORE (${so}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(i!==void 0)try{s+=" CONTEXT: "+JSON.stringify(i)}catch{s+=" CONTEXT: "+i}throw er(s),new Error(s)}function Gt(r,t,i,s){let l="Unexpected state";typeof i=="string"?l=i:s=i,r||DT(t,l,s)}function Et(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends ir{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class DR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable((()=>i($e.UNAUTHENTICATED)))}shutdown(){}}class NR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class OR{constructor(t){this.t=t,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Gt(this.o===void 0,42304);let s=this.i;const l=y=>this.i!==s?(s=this.i,i(y)):Promise.resolve();let c=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zi,t.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const y=c;t.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},g=y=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>g(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zi)}}),0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((s=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Gt(typeof s.accessToken=="string",31837,{l:s}),new NT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Gt(t===null||typeof t=="string",2055,{h:t}),new $e(t)}}class MR{constructor(t,i,s){this.P=t,this.T=i,this.I=s,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VR{constructor(t,i,s){this.P=t,this.T=i,this.I=s}getToken(){return Promise.resolve(new MR(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable((()=>i($e.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xR{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Gt(this.o===void 0,3512);const s=c=>{c.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,rt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable((()=>s(c)))};const l=c=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Nv(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((i=>i?(Gt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Nv(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let s=0;s<r;s++)i[s]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=UR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<i&&(s+=t.charAt(l[c]%62))}return s}}function Nt(r,t){return r<t?-1:r>t?1:0}function cm(r,t){const i=Math.min(r.length,t.length);for(let s=0;s<i;s++){const l=r.charAt(s),c=t.charAt(s);if(l!==c)return Qd(l)===Qd(c)?Nt(l,c):Qd(l)?1:-1}return Nt(r.length,t.length)}const LR=55296,kR=57343;function Qd(r){const t=r.charCodeAt(0);return t>=LR&&t<=kR}function Za(r,t,i){return r.length===t.length&&r.every(((s,l)=>i(s,t[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__name__";class Ai{constructor(t,i,s){i===void 0?i=0:i>t.length&&gt(637,{offset:i,range:t.length}),s===void 0?s=t.length-i:s>t.length-i&&gt(1746,{length:s,range:t.length-i}),this.segments=t,this.offset=i,this.len=s}get length(){return this.len}isEqual(t){return Ai.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof Ai?t.forEach((s=>{i.push(s)})):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,s=this.limit();i<s;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const s=Math.min(t.length,i.length);for(let l=0;l<s;l++){const c=Ai.compareSegments(t.get(l),i.get(l));if(c!==0)return c}return Nt(t.length,i.length)}static compareSegments(t,i){const s=Ai.isNumericId(t),l=Ai.isNumericId(i);return s&&!l?-1:!s&&l?1:s&&l?Ai.extractNumericId(t).compare(Ai.extractNumericId(i)):cm(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Yr.fromString(t.substring(4,t.length-2))}}class ee extends Ai{construct(t,i,s){return new ee(t,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const s of t){if(s.indexOf("//")>=0)throw new nt(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter((l=>l.length>0)))}return new ee(i)}static emptyPath(){return new ee([])}}const PR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends Ai{construct(t,i,s){return new Qe(t,i,s)}static isValidIdentifier(t){return PR.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ov}static keyField(){return new Qe([Ov])}static fromServerFormat(t){const i=[];let s="",l=0;const c=()=>{if(s.length===0)throw new nt(Q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new nt(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new nt(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=y,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(s+=g,l++):(c(),l++)}if(c(),d)throw new nt(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Qe(i)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.path=t}static fromPath(t){return new ft(ee.fromString(t))}static fromName(t){return new ft(ee.fromString(t).popFirst(5))}static empty(){return new ft(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ee.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ee.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ft(new ee(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(r,t,i){if(!i)throw new nt(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function zR(r,t,i,s){if(t===!0&&s===!0)throw new nt(Q.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function Mv(r){if(!ft.isDocumentKey(r))throw new nt(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Vv(r){if(ft.isDocumentKey(r))throw new nt(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function MT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function dh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":gt(12329,{type:typeof r})}function Sn(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new nt(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=dh(r);throw new nt(Q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return r}function BR(r,t){if(t<=0)throw new nt(Q.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(r,t){const i={typeString:r};return t&&(i.value=t),i}function Gl(r,t){if(!MT(r))throw new nt(Q.INVALID_ARGUMENT,"JSON must be an object");let i;for(const s in t)if(t[s]){const l=t[s].typeString,c="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){i=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){i=`JSON field '${s}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){i=`Expected '${s}' field to equal '${c.value}'`;break}}if(i)throw new nt(Q.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=-62135596800,Uv=1e6;class ne{static now(){return ne.fromMillis(Date.now())}static fromDate(t){return ne.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),s=Math.floor((t-1e3*i)*Uv);return new ne(i,s)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new nt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new nt(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<xv)throw new nt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nt(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uv}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ne._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Gl(t,ne._jsonSchema))return new ne(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-xv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ne._jsonSchemaVersion="firestore/timestamp/1.0",ne._jsonSchema={type:De("string",ne._jsonSchemaVersion),seconds:De("number"),nanoseconds:De("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{static fromTimestamp(t){return new _t(t)}static min(){return new _t(new ne(0,0))}static max(){return new _t(new ne(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=-1;function qR(r,t){const i=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=_t.fromTimestamp(s===1e9?new ne(i+1,0):new ne(i,s));return new Zr(l,ft.empty(),t)}function jR(r){return new Zr(r.readTime,r.key,Nl)}class Zr{constructor(t,i,s){this.readTime=t,this.documentKey=i,this.largestBatchId=s}static min(){return new Zr(_t.min(),ft.empty(),Nl)}static max(){return new Zr(_t.max(),ft.empty(),Nl)}}function HR(r,t){let i=r.readTime.compareTo(t.readTime);return i!==0?i:(i=ft.comparator(r.documentKey,t.documentKey),i!==0?i:Nt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==GR)throw r;rt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new X(((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(s,l)}}))}toPromise(){return new Promise(((t,i)=>{this.next(t,i)}))}wrapUserFunction(t){try{const i=t();return i instanceof X?i:X.resolve(i)}catch(i){return X.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction((()=>t(i))):X.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction((()=>t(i))):X.reject(i)}static resolve(t){return new X(((i,s)=>{i(t)}))}static reject(t){return new X(((i,s)=>{s(t)}))}static waitFor(t){return new X(((i,s)=>{let l=0,c=0,d=!1;t.forEach((g=>{++l,g.next((()=>{++c,d&&c===l&&i()}),(y=>s(y)))})),d=!0,c===l&&i()}))}static or(t){let i=X.resolve(!1);for(const s of t)i=i.next((l=>l?X.resolve(l):s()));return i}static forEach(t,i){const s=[];return t.forEach(((l,c)=>{s.push(i.call(this,l,c))})),this.waitFor(s)}static mapArray(t,i){return new X(((s,l)=>{const c=t.length,d=new Array(c);let g=0;for(let y=0;y<c;y++){const _=y;i(t[_]).next((A=>{d[_]=A,++g,g===c&&s(d)}),(A=>l(A)))}}))}static doWhile(t,i){return new X(((s,l)=>{const c=()=>{t()===!0?i().next((()=>{c()}),l):s()};c()}))}}function QR(r){const t=r.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function oo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>i.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}mh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=-1;function gh(r){return r==null}function $c(r){return r===0&&1/r==-1/0}function KR(r){return typeof r=="number"&&Number.isInteger(r)&&!$c(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="";function YR(r){let t="";for(let i=0;i<r.length;i++)t.length>0&&(t=Lv(t)),t=XR(r.get(i),t);return Lv(t)}function XR(r,t){let i=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":i+="";break;case VT:i+="";break;default:i+=c}}return i}function Lv(r){return r+VT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(r){let t=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t++;return t}function rs(r,t){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t(i,r[i])}function xT(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t,i){this.comparator=t,this.root=i||Fe.EMPTY}insert(t,i){return new le(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Fe.BLACK,null,null))}remove(t){return new le(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fe.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(t){let i=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return i+s.left.size;l<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((i,s)=>(t(i,s),!1)))}toString(){const t=[];return this.inorderTraversal(((i,s)=>(t.push(`${i}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ic(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ic(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ic(this.root,t,this.comparator,!0)}}class Ic{constructor(t,i,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=i?s(t.key,i):1,i&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fe{constructor(t,i,s,l,c){this.key=t,this.value=i,this.color=s??Fe.RED,this.left=l??Fe.EMPTY,this.right=c??Fe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,s,l,c){return new Fe(t??this.key,i??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,i,s),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Fe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let s,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return Fe.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw gt(27949);return t+(this.isRed()?0:1)}}Fe.EMPTY=null,Fe.RED=!0,Fe.BLACK=!1;Fe.EMPTY=new class{constructor(){this.size=0}get key(){throw gt(57766)}get value(){throw gt(16141)}get color(){throw gt(16727)}get left(){throw gt(29726)}get right(){throw gt(36894)}copy(t,i,s,l,c){return this}insert(t,i,s){return new Fe(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t){this.comparator=t,this.data=new le(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((i,s)=>(t(i),!1)))}forEachInRange(t,i){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let s;for(s=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new Pv(this.data.getIterator())}getIteratorFrom(t){return new Pv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach((s=>{i=i.add(s)})),i}isEqual(t){if(!(t instanceof Ve)||this.size!==t.size)return!1;const i=this.data.getIterator(),s=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((i=>{t.push(i)})),t}toString(){const t=[];return this.forEach((i=>t.push(i))),"SortedSet("+t.toString()+")"}copy(t){const i=new Ve(this.comparator);return i.data=t,i}}class Pv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t){this.fields=t,t.sort(Qe.comparator)}static empty(){return new An([])}unionWith(t){let i=new Ve(Qe.comparator);for(const s of this.fields)i=i.add(s);for(const s of t)i=i.add(s);return new An(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Za(this.fields,t.fields,((i,s)=>i.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.binaryString=t}static fromBase64String(t){const i=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new UT("Invalid base64 string: "+c):c}})(t);return new Ke(i)}static fromUint8Array(t){const i=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(t);return new Ke(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const s=new Uint8Array(i.length);for(let l=0;l<i.length;l++)s[l]=i.charCodeAt(l);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ke.EMPTY_BYTE_STRING=new Ke("");const $R=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(r){if(Gt(!!r,39018),typeof r=="string"){let t=0;const i=$R.exec(r);if(Gt(!!i,46558,{timestamp:r}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ye(r.seconds),nanos:ye(r.nanos)}}function ye(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Wr(r){return typeof r=="string"?Ke.fromBase64String(r):Ke.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="server_timestamp",kT="__type__",PT="__previous_value__",zT="__local_write_time__";function qm(r){return(r?.mapValue?.fields||{})[kT]?.stringValue===LT}function ph(r){const t=r.mapValue.fields[PT];return qm(t)?ph(t):t}function Ol(r){const t=Jr(r.mapValue.fields[zT].timestampValue);return new ne(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(t,i,s,l,c,d,g,y,_,A){this.databaseId=t,this.appId=i,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=A}}const Zc="(default)";class Ml{constructor(t,i){this.projectId=t,this.database=i||Zc}static empty(){return new Ml("","")}get isDefaultDatabase(){return this.database===Zc}isEqual(t){return t instanceof Ml&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="__type__",JR="__max__",Cc={mapValue:{}},qT="__vector__",Jc="value";function ts(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qm(r)?4:tI(r)?9007199254740991:WR(r)?10:11:gt(28295,{value:r})}function Di(r,t){if(r===t)return!0;const i=ts(r);if(i!==ts(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Ol(r).isEqual(Ol(t));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Jr(l.timestampValue),g=Jr(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos})(r,t);case 5:return r.stringValue===t.stringValue;case 6:return(function(l,c){return Wr(l.bytesValue).isEqual(Wr(c.bytesValue))})(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return(function(l,c){return ye(l.geoPointValue.latitude)===ye(c.geoPointValue.latitude)&&ye(l.geoPointValue.longitude)===ye(c.geoPointValue.longitude)})(r,t);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return ye(l.integerValue)===ye(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=ye(l.doubleValue),g=ye(c.doubleValue);return d===g?$c(d)===$c(g):isNaN(d)&&isNaN(g)}return!1})(r,t);case 9:return Za(r.arrayValue.values||[],t.arrayValue.values||[],Di);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(kv(d)!==kv(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!Di(d[y],g[y])))return!1;return!0})(r,t);default:return gt(52216,{left:r})}}function Vl(r,t){return(r.values||[]).find((i=>Di(i,t)))!==void 0}function Ja(r,t){if(r===t)return 0;const i=ts(r),s=ts(t);if(i!==s)return Nt(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return Nt(r.booleanValue,t.booleanValue);case 2:return(function(c,d){const g=ye(c.integerValue||c.doubleValue),y=ye(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1})(r,t);case 3:return zv(r.timestampValue,t.timestampValue);case 4:return zv(Ol(r),Ol(t));case 5:return cm(r.stringValue,t.stringValue);case 6:return(function(c,d){const g=Wr(c),y=Wr(d);return g.compareTo(y)})(r.bytesValue,t.bytesValue);case 7:return(function(c,d){const g=c.split("/"),y=d.split("/");for(let _=0;_<g.length&&_<y.length;_++){const A=Nt(g[_],y[_]);if(A!==0)return A}return Nt(g.length,y.length)})(r.referenceValue,t.referenceValue);case 8:return(function(c,d){const g=Nt(ye(c.latitude),ye(d.latitude));return g!==0?g:Nt(ye(c.longitude),ye(d.longitude))})(r.geoPointValue,t.geoPointValue);case 9:return Bv(r.arrayValue,t.arrayValue);case 10:return(function(c,d){const g=c.fields||{},y=d.fields||{},_=g[Jc]?.arrayValue,A=y[Jc]?.arrayValue,S=Nt(_?.values?.length||0,A?.values?.length||0);return S!==0?S:Bv(_,A)})(r.mapValue,t.mapValue);case 11:return(function(c,d){if(c===Cc.mapValue&&d===Cc.mapValue)return 0;if(c===Cc.mapValue)return 1;if(d===Cc.mapValue)return-1;const g=c.fields||{},y=Object.keys(g),_=d.fields||{},A=Object.keys(_);y.sort(),A.sort();for(let S=0;S<y.length&&S<A.length;++S){const D=cm(y[S],A[S]);if(D!==0)return D;const H=Ja(g[y[S]],_[A[S]]);if(H!==0)return H}return Nt(y.length,A.length)})(r.mapValue,t.mapValue);default:throw gt(23264,{he:i})}}function zv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Nt(r,t);const i=Jr(r),s=Jr(t),l=Nt(i.seconds,s.seconds);return l!==0?l:Nt(i.nanos,s.nanos)}function Bv(r,t){const i=r.values||[],s=t.values||[];for(let l=0;l<i.length&&l<s.length;++l){const c=Ja(i[l],s[l]);if(c)return c}return Nt(i.length,s.length)}function Wa(r){return hm(r)}function hm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(i){const s=Jr(i);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(i){return Wr(i).toBase64()})(r.bytesValue):"referenceValue"in r?(function(i){return ft.fromName(i).toString()})(r.referenceValue):"geoPointValue"in r?(function(i){return`geo(${i.latitude},${i.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(i){let s="[",l=!0;for(const c of i.values||[])l?l=!1:s+=",",s+=hm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(i){const s=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${hm(i.fields[d])}`;return l+"}"})(r.mapValue):gt(61005,{value:r})}function Lc(r){switch(ts(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ph(r);return t?16+Lc(t):16;case 5:return 2*r.stringValue.length;case 6:return Wr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((l,c)=>l+Lc(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let l=0;return rs(s.fields,((c,d)=>{l+=c.length+Lc(d)})),l})(r.mapValue);default:throw gt(13486,{value:r})}}function qv(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function fm(r){return!!r&&"integerValue"in r}function jm(r){return!!r&&"arrayValue"in r}function jv(r){return!!r&&"nullValue"in r}function Hv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function kc(r){return!!r&&"mapValue"in r}function WR(r){return(r?.mapValue?.fields||{})[BT]?.stringValue===qT}function bl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return rs(r.mapValue.fields,((i,s)=>t.mapValue.fields[i]=bl(s))),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=bl(r.arrayValue.values[i]);return t}return{...r}}function tI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===JR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t){this.value=t}static empty(){return new hn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let s=0;s<t.length-1;++s)if(i=(i.mapValue.fields||{})[t.get(s)],!kc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=bl(i)}setAll(t){let i=Qe.emptyPath(),s={},l=[];t.forEach(((d,g)=>{if(!i.isImmediateParentOf(g)){const y=this.getFieldsMap(i);this.applyChanges(y,s,l),s={},l=[],i=g.popLast()}d?s[g.lastSegment()]=bl(d):l.push(g.lastSegment())}));const c=this.getFieldsMap(i);this.applyChanges(c,s,l)}delete(t){const i=this.field(t.popLast());kc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Di(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=i.mapValue.fields[t.get(s)];kc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(s)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,s){rs(i,((l,c)=>t[l]=c));for(const l of s)delete t[l]}clone(){return new hn(bl(this.value))}}function jT(r){const t=[];return rs(r.fields,((i,s)=>{const l=new Qe([i]);if(kc(s)){const c=jT(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)})),new An(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,i,s,l,c,d,g){this.key=t,this.documentType=i,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(t){return new Ze(t,0,_t.min(),_t.min(),_t.min(),hn.empty(),0)}static newFoundDocument(t,i,s,l){return new Ze(t,1,i,_t.min(),s,l,0)}static newNoDocument(t,i){return new Ze(t,2,i,_t.min(),_t.min(),hn.empty(),0)}static newUnknownDocument(t,i){return new Ze(t,3,i,_t.min(),_t.min(),hn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ze&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,i){this.position=t,this.inclusive=i}}function Gv(r,t,i){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=ft.comparator(ft.fromName(d.referenceValue),i.key):s=Ja(d,i.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Fv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Di(r.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t,i="asc"){this.field=t,this.dir=i}}function eI(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{}class Ce extends HT{constructor(t,i,s){super(),this.field=t,this.op=i,this.value=s}static create(t,i,s){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,s):new iI(t,i,s):i==="array-contains"?new aI(t,s):i==="in"?new oI(t,s):i==="not-in"?new lI(t,s):i==="array-contains-any"?new uI(t,s):new Ce(t,i,s)}static createKeyFieldInFilter(t,i,s){return i==="in"?new rI(t,s):new sI(t,s)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Ja(i,this.value)):i!==null&&ts(this.value)===ts(i)&&this.matchesComparison(Ja(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends HT{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new Wn(t,i)}matches(t){return GT(this)?this.filters.find((i=>!i.matches(t)))===void 0:this.filters.find((i=>i.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,i)=>t.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GT(r){return r.op==="and"}function FT(r){return nI(r)&&GT(r)}function nI(r){for(const t of r.filters)if(t instanceof Wn)return!1;return!0}function dm(r){if(r instanceof Ce)return r.field.canonicalString()+r.op.toString()+Wa(r.value);if(FT(r))return r.filters.map((t=>dm(t))).join(",");{const t=r.filters.map((i=>dm(i))).join(",");return`${r.op}(${t})`}}function QT(r,t){return r instanceof Ce?(function(s,l){return l instanceof Ce&&s.op===l.op&&s.field.isEqual(l.field)&&Di(s.value,l.value)})(r,t):r instanceof Wn?(function(s,l){return l instanceof Wn&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce(((c,d,g)=>c&&QT(d,l.filters[g])),!0):!1})(r,t):void gt(19439)}function KT(r){return r instanceof Ce?(function(i){return`${i.field.canonicalString()} ${i.op} ${Wa(i.value)}`})(r):r instanceof Wn?(function(i){return i.op.toString()+" {"+i.getFilters().map(KT).join(" ,")+"}"})(r):"Filter"}class iI extends Ce{constructor(t,i,s){super(t,i,s),this.key=ft.fromName(s.referenceValue)}matches(t){const i=ft.comparator(t.key,this.key);return this.matchesComparison(i)}}class rI extends Ce{constructor(t,i){super(t,"in",i),this.keys=YT("in",i)}matches(t){return this.keys.some((i=>i.isEqual(t.key)))}}class sI extends Ce{constructor(t,i){super(t,"not-in",i),this.keys=YT("not-in",i)}matches(t){return!this.keys.some((i=>i.isEqual(t.key)))}}function YT(r,t){return(t.arrayValue?.values||[]).map((i=>ft.fromName(i.referenceValue)))}class aI extends Ce{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return jm(i)&&Vl(i.arrayValue,this.value)}}class oI extends Ce{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Vl(this.value.arrayValue,i)}}class lI extends Ce{constructor(t,i){super(t,"not-in",i)}matches(t){if(Vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Vl(this.value.arrayValue,i)}}class uI extends Ce{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!jm(i)||!i.arrayValue.values)&&i.arrayValue.values.some((s=>Vl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t,i=null,s=[],l=[],c=null,d=null,g=null){this.path=t,this.collectionGroup=i,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.Te=null}}function Qv(r,t=null,i=[],s=[],l=null,c=null,d=null){return new cI(r,t,i,s,l,c,d)}function Hm(r){const t=Et(r);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map((s=>dm(s))).join(","),i+="|ob:",i+=t.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),gh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>Wa(s))).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>Wa(s))).join(",")),t.Te=i}return t.Te}function Gm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!eI(r.orderBy[i],t.orderBy[i]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!QT(r.filters[i],t.filters[i]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Fv(r.startAt,t.startAt)&&Fv(r.endAt,t.endAt)}function mm(r){return ft.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,i=null,s=[],l=[],c=null,d="F",g=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hI(r,t,i,s,l,c,d,g){return new lo(r,t,i,s,l,c,d,g)}function yh(r){return new lo(r)}function Kv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function XT(r){return r.collectionGroup!==null}function wl(r){const t=Et(r);if(t.Ie===null){t.Ie=[];const i=new Set;for(const c of t.explicitOrderBy)t.Ie.push(c),i.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ve(Qe.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(g=g.add(_.field))}))})),g})(t).forEach((c=>{i.has(c.canonicalString())||c.isKeyField()||t.Ie.push(new xl(c,s))})),i.has(Qe.keyField().canonicalString())||t.Ie.push(new xl(Qe.keyField(),s))}return t.Ie}function wi(r){const t=Et(r);return t.Ee||(t.Ee=fI(t,wl(r))),t.Ee}function fI(r,t){if(r.limitType==="F")return Qv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new xl(l.field,c)}));const i=r.endAt?new Wc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Wc(r.startAt.position,r.startAt.inclusive):null;return Qv(r.path,r.collectionGroup,t,r.filters,r.limit,i,s)}}function gm(r,t){const i=r.filters.concat([t]);return new lo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),i,r.limit,r.limitType,r.startAt,r.endAt)}function th(r,t,i){return new lo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,i,r.startAt,r.endAt)}function _h(r,t){return Gm(wi(r),wi(t))&&r.limitType===t.limitType}function $T(r){return`${Hm(wi(r))}|lt:${r.limitType}`}function qa(r){return`Query(target=${(function(i){let s=i.path.canonicalString();return i.collectionGroup!==null&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map((l=>KT(l))).join(", ")}]`),gh(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map((l=>Wa(l))).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map((l=>Wa(l))).join(",")),`Target(${s})`})(wi(r))}; limitType=${r.limitType})`}function vh(r,t){return t.isFoundDocument()&&(function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ft.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,t)&&(function(s,l){for(const c of wl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(r,t)&&(function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0})(r,t)&&(function(s,l){return!(s.startAt&&!(function(d,g,y){const _=Gv(d,g,y);return d.inclusive?_<=0:_<0})(s.startAt,wl(s),l)||s.endAt&&!(function(d,g,y){const _=Gv(d,g,y);return d.inclusive?_>=0:_>0})(s.endAt,wl(s),l))})(r,t)}function dI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ZT(r){return(t,i)=>{let s=!1;for(const l of wl(r)){const c=mI(l,t,i);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function mI(r,t,i){const s=r.field.isKeyField()?ft.comparator(t.key,i.key):(function(c,d,g){const y=d.data.field(c),_=g.data.field(c);return y!==null&&_!==null?Ja(y,_):gt(42886)})(r.field,t,i);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return gt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,i){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[i]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){rs(this.inner,((i,s)=>{for(const[l,c]of s)t(l,c)}))}isEmpty(){return xT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new le(ft.comparator);function nr(){return gI}const JT=new le(ft.comparator);function _l(...r){let t=JT;for(const i of r)t=t.insert(i.key,i);return t}function WT(r){let t=JT;return r.forEach(((i,s)=>t=t.insert(i,s.overlayedDocument))),t}function Bs(){return Rl()}function t0(){return Rl()}function Rl(){return new Ys((r=>r.toString()),((r,t)=>r.isEqual(t)))}const pI=new le(ft.comparator),yI=new Ve(ft.comparator);function Ot(...r){let t=yI;for(const i of r)t=t.add(i);return t}const _I=new Ve(Nt);function vI(){return _I}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$c(t)?"-0":t}}function e0(r){return{integerValue:""+r}}function EI(r,t){return KR(t)?e0(t):Fm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this._=void 0}}function TI(r,t,i){return r instanceof Ul?(function(l,c){const d={fields:{[kT]:{stringValue:LT},[zT]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&qm(c)&&(c=ph(c)),c&&(d.fields[PT]=c),{mapValue:d}})(i,t):r instanceof Ll?i0(r,t):r instanceof kl?r0(r,t):(function(l,c){const d=n0(l,c),g=Yv(d)+Yv(l.Ae);return fm(d)&&fm(l.Ae)?e0(g):Fm(l.serializer,g)})(r,t)}function AI(r,t,i){return r instanceof Ll?i0(r,t):r instanceof kl?r0(r,t):i}function n0(r,t){return r instanceof eh?(function(s){return fm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(t)?t:{integerValue:0}:null}class Ul extends Eh{}class Ll extends Eh{constructor(t){super(),this.elements=t}}function i0(r,t){const i=s0(t);for(const s of r.elements)i.some((l=>Di(l,s)))||i.push(s);return{arrayValue:{values:i}}}class kl extends Eh{constructor(t){super(),this.elements=t}}function r0(r,t){let i=s0(t);for(const s of r.elements)i=i.filter((l=>!Di(l,s)));return{arrayValue:{values:i}}}class eh extends Eh{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function Yv(r){return ye(r.integerValue||r.doubleValue)}function s0(r){return jm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(t,i){this.field=t,this.transform=i}}function bI(r,t){return r.field.isEqual(t.field)&&(function(s,l){return s instanceof Ll&&l instanceof Ll||s instanceof kl&&l instanceof kl?Za(s.elements,l.elements,Di):s instanceof eh&&l instanceof eh?Di(s.Ae,l.Ae):s instanceof Ul&&l instanceof Ul})(r.transform,t.transform)}class wI{constructor(t,i){this.version=t,this.transformResults=i}}class Jn{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new Jn}static exists(t){return new Jn(void 0,t)}static updateTime(t){return new Jn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Pc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class Th{}function a0(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new l0(r.key,Jn.none()):new Fl(r.key,r.data,Jn.none());{const i=r.data,s=hn.empty();let l=new Ve(Qe.comparator);for(let c of t.fields)if(!l.has(c)){let d=i.field(c);d===null&&c.length>1&&(c=c.popLast(),d=i.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new ss(r.key,s,new An(l.toArray()),Jn.none())}}function RI(r,t,i){r instanceof Fl?(function(l,c,d){const g=l.value.clone(),y=$v(l.fieldTransforms,c,d.transformResults);g.setAll(y),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,t,i):r instanceof ss?(function(l,c,d){if(!Pc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=$v(l.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(o0(l)),y.setAll(g),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(r,t,i):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,t,i)}function Il(r,t,i,s){return r instanceof Fl?(function(c,d,g,y){if(!Pc(c.precondition,d))return g;const _=c.value.clone(),A=Zv(c.fieldTransforms,y,d);return _.setAll(A),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(r,t,i,s):r instanceof ss?(function(c,d,g,y){if(!Pc(c.precondition,d))return g;const _=Zv(c.fieldTransforms,y,d),A=d.data;return A.setAll(o0(c)),A.setAll(_),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(r,t,i,s):(function(c,d,g){return Pc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g})(r,t,i)}function II(r,t){let i=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=n0(s.transform,l||null);c!=null&&(i===null&&(i=hn.empty()),i.set(s.field,c))}return i||null}function Xv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!(function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Za(s,l,((c,d)=>bI(c,d)))})(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Fl extends Th{constructor(t,i,s,l=[]){super(),this.key=t,this.value=i,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ss extends Th{constructor(t,i,s,l,c=[]){super(),this.key=t,this.data=i,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function o0(r){const t=new Map;return r.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const s=r.data.field(i);t.set(i,s)}})),t}function $v(r,t,i){const s=new Map;Gt(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let l=0;l<i.length;l++){const c=r[l],d=c.transform,g=t.data.field(c.field);s.set(c.field,AI(d,g,i[l]))}return s}function Zv(r,t,i){const s=new Map;for(const l of r){const c=l.transform,d=i.data.field(l.field);s.set(l.field,TI(c,d,t))}return s}class l0 extends Th{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CI extends Th{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t,i,s,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,i){const s=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&RI(c,t,s[l])}}applyToLocalView(t,i){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(i=Il(s,t,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(i=Il(s,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const s=t0();return this.mutations.forEach((l=>{const c=t.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=i.has(l.key)?null:g;const y=a0(d,g);y!==null&&s.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(_t.min())})),s}keys(){return this.mutations.reduce(((t,i)=>t.add(i.key)),Ot())}isEqual(t){return this.batchId===t.batchId&&Za(this.mutations,t.mutations,((i,s)=>Xv(i,s)))&&Za(this.baseMutations,t.baseMutations,((i,s)=>Xv(i,s)))}}class Qm{constructor(t,i,s,l){this.batch=t,this.commitVersion=i,this.mutationResults=s,this.docVersions=l}static from(t,i,s){Gt(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=(function(){return pI})();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new Qm(t,i,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie,Lt;function MI(r){switch(r){case Q.OK:return gt(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return gt(15467,{code:r})}}function u0(r){if(r===void 0)return er("GRPC error has no .code"),Q.UNKNOWN;switch(r){case Ie.OK:return Q.OK;case Ie.CANCELLED:return Q.CANCELLED;case Ie.UNKNOWN:return Q.UNKNOWN;case Ie.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ie.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ie.INTERNAL:return Q.INTERNAL;case Ie.UNAVAILABLE:return Q.UNAVAILABLE;case Ie.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ie.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ie.NOT_FOUND:return Q.NOT_FOUND;case Ie.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ie.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ie.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ie.ABORTED:return Q.ABORTED;case Ie.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ie.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ie.DATA_LOSS:return Q.DATA_LOSS;default:return gt(39323,{code:r})}}(Lt=Ie||(Ie={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=new Yr([4294967295,4294967295],0);function Jv(r){const t=VI().encode(r),i=new ST;return i.update(t),new Uint8Array(i.digest())}function Wv(r){const t=new DataView(r.buffer),i=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new Yr([i,s],0),new Yr([l,c],0)]}class Km{constructor(t,i,s){if(this.bitmap=t,this.padding=i,this.hashCount=s,i<0||i>=8)throw new vl(`Invalid padding: ${i}`);if(s<0)throw new vl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new vl(`Invalid hash count: ${s}`);if(t.length===0&&i!==0)throw new vl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=Yr.fromNumber(this.ge)}ye(t,i,s){let l=t.add(i.multiply(Yr.fromNumber(s)));return l.compare(xI)===1&&(l=new Yr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=Jv(t),[s,l]=Wv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);if(!this.we(d))return!1}return!0}static create(t,i,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new Km(c,l,i);return s.forEach((g=>d.insert(g))),d}insert(t){if(this.ge===0)return;const i=Jv(t),[s,l]=Wv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,l,c);this.Se(d)}}Se(t){const i=Math.floor(t/8),s=t%8;this.bitmap[i]|=1<<s}}class vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(t,i,s,l,c){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,i,s){const l=new Map;return l.set(t,Ql.createSynthesizedTargetChangeForCurrentChange(t,i,s)),new Ah(_t.min(),l,new le(Nt),nr(),Ot())}}class Ql{constructor(t,i,s,l,c){this.resumeToken=t,this.current=i,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,i,s){return new Ql(s,i,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(t,i,s,l){this.be=t,this.removedTargetIds=i,this.key=s,this.De=l}}class c0{constructor(t,i){this.targetId=t,this.Ce=i}}class h0{constructor(t,i,s=Ke.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=s,this.cause=l}}class tE{constructor(){this.ve=0,this.Fe=eE(),this.Me=Ke.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ot(),i=Ot(),s=Ot();return this.Fe.forEach(((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:s=s.add(l);break;default:gt(38017,{changeType:c})}})),new Ql(this.Me,this.xe,t,i,s)}qe(){this.Oe=!1,this.Fe=eE()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UI{constructor(t){this.Ge=t,this.ze=new Map,this.je=nr(),this.Je=Dc(),this.He=Dc(),this.Ye=new le(Nt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,(i=>{const s=this.nt(i);switch(t.state){case 0:this.rt(i)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),s.Le(t.resumeToken));break;default:gt(56790,{state:t.state})}}))}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach(((s,l)=>{this.rt(l)&&i(l)}))}st(t){const i=t.targetId,s=t.Ce.count,l=this.ot(i);if(l){const c=l.target;if(mm(c))if(s===0){const d=new ft(c.path);this.et(i,d,Ze.newNoDocument(d,_t.min()))}else Gt(s===1,20013,{expectedCount:s});else{const d=this._t(i);if(d!==s){const g=this.ut(t),y=g?this.ct(g,t,d):1;if(y!==0){this.it(i);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=i;let d,g;try{d=Wr(s).toUint8Array()}catch(y){if(y instanceof UT)return $a("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Km(d,l,c)}catch(y){return $a(y instanceof vl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(t,i,s){return i.Ce.count===s-this.Pt(t,i.targetId)?0:2}Pt(t,i){const s=this.Ge.getRemoteKeysForTarget(i);let l=0;return s.forEach((c=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.et(i,c,null),l++)})),l}Tt(t){const i=new Map;this.ze.forEach(((c,d)=>{const g=this.ot(d);if(g){if(c.current&&mm(g.target)){const y=new ft(g.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,Ze.newNoDocument(y,t))}c.Be&&(i.set(d,c.ke()),c.qe())}}));let s=Ot();this.He.forEach(((c,d)=>{let g=!0;d.forEachWhile((y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(t)));const l=new Ah(t,i,this.Ye,this.je,s);return this.je=nr(),this.Je=Dc(),this.He=Dc(),this.Ye=new le(Nt),l}Xe(t,i){if(!this.rt(t))return;const s=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,s),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),s&&(this.je=this.je.insert(i,s))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new tE,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new Ve(Nt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new Ve(Nt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||rt("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new tE),this.Ge.getRemoteKeysForTarget(t).forEach((i=>{this.et(t,i,null)}))}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Dc(){return new le(ft.comparator)}function eE(){return new le(ft.comparator)}const LI={asc:"ASCENDING",desc:"DESCENDING"},kI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PI={and:"AND",or:"OR"};class zI{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function pm(r,t){return r.useProto3Json||gh(t)?t:{value:t}}function nh(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function f0(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function BI(r,t){return nh(r,t.toTimestamp())}function Ri(r){return Gt(!!r,49232),_t.fromTimestamp((function(i){const s=Jr(i);return new ne(s.seconds,s.nanos)})(r))}function Ym(r,t){return ym(r,t).canonicalString()}function ym(r,t){const i=(function(l){return new ee(["projects",l.projectId,"databases",l.database])})(r).child("documents");return t===void 0?i:i.child(t)}function d0(r){const t=ee.fromString(r);return Gt(_0(t),10190,{key:t.toString()}),t}function _m(r,t){return Ym(r.databaseId,t.path)}function Kd(r,t){const i=d0(t);if(i.get(1)!==r.databaseId.projectId)throw new nt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new nt(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new ft(g0(i))}function m0(r,t){return Ym(r.databaseId,t)}function qI(r){const t=d0(r);return t.length===4?ee.emptyPath():g0(t)}function vm(r){return new ee(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function g0(r){return Gt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function nE(r,t,i){return{name:_m(r,t),fields:i.value.mapValue.fields}}function jI(r,t){let i;if("targetChange"in t){t.targetChange;const s=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:gt(39313,{state:_})})(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=(function(_,A){return _.useProto3Json?(Gt(A===void 0||typeof A=="string",58123),Ke.fromBase64String(A||"")):(Gt(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Ke.fromUint8Array(A||new Uint8Array))})(r,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&(function(_){const A=_.code===void 0?Q.UNKNOWN:u0(_.code);return new nt(A,_.message||"")})(d);i=new h0(s,l,c,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Kd(r,s.document.name),c=Ri(s.document.updateTime),d=s.document.createTime?Ri(s.document.createTime):_t.min(),g=new hn({mapValue:{fields:s.document.fields}}),y=Ze.newFoundDocument(l,c,d,g),_=s.targetIds||[],A=s.removedTargetIds||[];i=new zc(_,A,y.key,y)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Kd(r,s.document),c=s.readTime?Ri(s.readTime):_t.min(),d=Ze.newNoDocument(l,c),g=s.removedTargetIds||[];i=new zc([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Kd(r,s.document),c=s.removedTargetIds||[];i=new zc([],c,l,null)}else{if(!("filter"in t))return gt(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new OI(l,c),g=s.targetId;i=new c0(g,d)}}return i}function HI(r,t){let i;if(t instanceof Fl)i={update:nE(r,t.key,t.value)};else if(t instanceof l0)i={delete:_m(r,t.key)};else if(t instanceof ss)i={update:nE(r,t.key,t.data),updateMask:JI(t.fieldMask)};else{if(!(t instanceof CI))return gt(16599,{Vt:t.type});i={verify:_m(r,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map((s=>(function(c,d){const g=d.transform;if(g instanceof Ul)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ll)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof kl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof eh)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw gt(20930,{transform:d.transform})})(0,s)))),t.precondition.isNone||(i.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:BI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:gt(27497)})(r,t.precondition)),i}function GI(r,t){return r&&r.length>0?(Gt(t!==void 0,14353),r.map((i=>(function(l,c){let d=l.updateTime?Ri(l.updateTime):Ri(c);return d.isEqual(_t.min())&&(d=Ri(c)),new wI(d,l.transformResults||[])})(i,t)))):[]}function FI(r,t){return{documents:[m0(r,t.path)]}}function QI(r,t){const i={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=m0(r,l);const c=(function(_){if(_.length!==0)return y0(Wn.create(_,"and"))})(t.filters);c&&(i.structuredQuery.where=c);const d=(function(_){if(_.length!==0)return _.map((A=>(function(D){return{field:ja(D.field),direction:XI(D.dir)}})(A)))})(t.orderBy);d&&(i.structuredQuery.orderBy=d);const g=pm(r,t.limit);return g!==null&&(i.structuredQuery.limit=g),t.startAt&&(i.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(t.startAt)),t.endAt&&(i.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(t.endAt)),{ft:i,parent:l}}function KI(r){let t=qI(r.parent);const i=r.structuredQuery,s=i.from?i.from.length:0;let l=null;if(s>0){Gt(s===1,65062);const A=i.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let c=[];i.where&&(c=(function(S){const D=p0(S);return D instanceof Wn&&FT(D)?D.getFilters():[D]})(i.where));let d=[];i.orderBy&&(d=(function(S){return S.map((D=>(function($){return new xl(Ha($.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(D)))})(i.orderBy));let g=null;i.limit&&(g=(function(S){let D;return D=typeof S=="object"?S.value:S,gh(D)?null:D})(i.limit));let y=null;i.startAt&&(y=(function(S){const D=!!S.before,H=S.values||[];return new Wc(H,D)})(i.startAt));let _=null;return i.endAt&&(_=(function(S){const D=!S.before,H=S.values||[];return new Wc(H,D)})(i.endAt)),hI(t,l,d,c,g,"F",y,_)}function YI(r,t){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt(28987,{purpose:l})}})(t.purpose);return i==null?null:{"goog-listen-tags":i}}function p0(r){return r.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=Ha(i.unaryFilter.field);return Ce.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ha(i.unaryFilter.field);return Ce.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ha(i.unaryFilter.field);return Ce.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ha(i.unaryFilter.field);return Ce.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gt(61313);default:return gt(60726)}})(r):r.fieldFilter!==void 0?(function(i){return Ce.create(Ha(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gt(58110);default:return gt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(i){return Wn.create(i.compositeFilter.filters.map((s=>p0(s))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return gt(1026)}})(i.compositeFilter.op))})(r):gt(30097,{filter:r})}function XI(r){return LI[r]}function $I(r){return kI[r]}function ZI(r){return PI[r]}function ja(r){return{fieldPath:r.canonicalString()}}function Ha(r){return Qe.fromServerFormat(r.fieldPath)}function y0(r){return r instanceof Ce?(function(i){if(i.op==="=="){if(Hv(i.value))return{unaryFilter:{field:ja(i.field),op:"IS_NAN"}};if(jv(i.value))return{unaryFilter:{field:ja(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Hv(i.value))return{unaryFilter:{field:ja(i.field),op:"IS_NOT_NAN"}};if(jv(i.value))return{unaryFilter:{field:ja(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(i.field),op:$I(i.op),value:i.value}}})(r):r instanceof Wn?(function(i){const s=i.getFilters().map((l=>y0(l)));return s.length===1?s[0]:{compositeFilter:{op:ZI(i.op),filters:s}}})(r):gt(54877,{filter:r})}function JI(r){const t=[];return r.fields.forEach((i=>t.push(i.canonicalString()))),{fieldPaths:t}}function _0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t,i,s,l,c=_t.min(),d=_t.min(),g=Ke.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(t){return new Hr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(t){this.yt=t}}function t2(r){const t=KI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?th(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.Cn=new n2}addToCollectionParentIndex(t,i){return this.Cn.add(i),X.resolve()}getCollectionParents(t,i){return X.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return X.resolve()}deleteFieldIndex(t,i){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,i){return X.resolve()}getDocumentsMatchingTarget(t,i){return X.resolve(null)}getIndexType(t,i){return X.resolve(0)}getFieldIndexes(t,i){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,i){return X.resolve(Zr.min())}getMinOffsetFromCollectionGroup(t,i){return X.resolve(Zr.min())}updateCollectionGroup(t,i,s){return X.resolve()}updateIndexEntries(t,i){return X.resolve()}}class n2{constructor(){this.index={}}add(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i]||new Ve(ee.comparator),c=!l.has(s);return this.index[i]=l.add(s),c}has(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ve(ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},v0=41943040;class cn{static withCacheSize(t){return new cn(t,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(v0,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new to(0)}static cr(){return new to(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="LruGarbageCollector",i2=1048576;function sE([r,t],[i,s]){const l=Nt(r,i);return l===0?Nt(t,s):l}class r2{constructor(t){this.Ir=t,this.buffer=new Ve(sE),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const s=this.buffer.last();sE(i,s)<0&&(this.buffer=this.buffer.delete(s).add(i))}}get maxValue(){return this.buffer.last()[0]}}class s2{constructor(t,i,s){this.garbageCollector=t,this.asyncQueue=i,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){rt(rE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){oo(i)?rt(rE,"Ignoring IndexedDB error during garbage collection: ",i):await ao(i)}await this.Vr(3e5)}))}}class a2{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next((s=>Math.floor(i/100*s)))}nthSequenceNumber(t,i){if(i===0)return X.resolve(mh.ce);const s=new r2(i);return this.mr.forEachTarget(t,(l=>s.Ar(l.sequenceNumber))).next((()=>this.mr.pr(t,(l=>s.Ar(l))))).next((()=>s.maxValue))}removeTargets(t,i,s){return this.mr.removeTargets(t,i,s)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(iE)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iE):this.yr(t,i)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let s,l,c,d,g,y,_;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,d=Date.now(),this.nthSequenceNumber(t,l)))).next((S=>(s=S,g=Date.now(),this.removeTargets(t,s,i)))).next((S=>(c=S,y=Date.now(),this.removeOrphanedDocuments(t,s)))).next((S=>(_=Date.now(),Ba()<=Dt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(y-g)+`ms
	Removed ${S} documents in `+(_-y)+`ms
Total Duration: ${_-A}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:S}))))}}function o2(r,t){return new a2(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.changes=new Ys((t=>t.toString()),((t,i)=>t.isEqual(i))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,Ze.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const s=this.changes.get(i);return s!==void 0?X.resolve(s):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(t,i,s,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,i){let s=null;return this.documentOverlayCache.getOverlay(t,i).next((l=>(s=l,this.remoteDocumentCache.getEntry(t,i)))).next((l=>(s!==null&&Il(s.mutation,l,An.empty(),ne.now()),l)))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next((s=>this.getLocalViewOfDocuments(t,s,Ot()).next((()=>s))))}getLocalViewOfDocuments(t,i,s=Ot()){const l=Bs();return this.populateOverlays(t,l,i).next((()=>this.computeViews(t,i,l,s).next((c=>{let d=_l();return c.forEach(((g,y)=>{d=d.insert(g,y.overlayedDocument)})),d}))))}getOverlayedDocuments(t,i){const s=Bs();return this.populateOverlays(t,s,i).next((()=>this.computeViews(t,i,s,Ot())))}populateOverlays(t,i,s){const l=[];return s.forEach((c=>{i.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(t,l).next((c=>{c.forEach(((d,g)=>{i.set(d,g)}))}))}computeViews(t,i,s,l){let c=nr();const d=Rl(),g=(function(){return Rl()})();return i.forEach(((y,_)=>{const A=s.get(_.key);l.has(_.key)&&(A===void 0||A.mutation instanceof ss)?c=c.insert(_.key,_):A!==void 0?(d.set(_.key,A.mutation.getFieldMask()),Il(A.mutation,_,A.mutation.getFieldMask(),ne.now())):d.set(_.key,An.empty())})),this.recalculateAndSaveOverlays(t,c).next((y=>(y.forEach(((_,A)=>d.set(_,A))),i.forEach(((_,A)=>g.set(_,new u2(A,d.get(_)??null)))),g)))}recalculateAndSaveOverlays(t,i){const s=Rl();let l=new le(((d,g)=>d-g)),c=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next((d=>{for(const g of d)g.keys().forEach((y=>{const _=i.get(y);if(_===null)return;let A=s.get(y)||An.empty();A=g.applyToLocalView(_,A),s.set(y,A);const S=(l.get(g.batchId)||Ot()).add(y);l=l.insert(g.batchId,S)}))})).next((()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),_=y.key,A=y.value,S=t0();A.forEach((D=>{if(!c.has(D)){const H=a0(i.get(D),s.get(D));H!==null&&S.set(D,H),c=c.add(D)}})),d.push(this.documentOverlayCache.saveOverlays(t,_,S))}return X.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,i,s,l){return(function(d){return ft.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):XT(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,s,l):this.getDocumentsMatchingCollectionQuery(t,i,s,l)}getNextDocuments(t,i,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,s,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,s.largestBatchId,l-c.size):X.resolve(Bs());let g=Nl,y=c;return d.next((_=>X.forEach(_,((A,S)=>(g<S.largestBatchId&&(g=S.largestBatchId),c.get(A)?X.resolve():this.remoteDocumentCache.getEntry(t,A).next((D=>{y=y.insert(A,D)}))))).next((()=>this.populateOverlays(t,_,c))).next((()=>this.computeViews(t,y,_,Ot()))).next((A=>({batchId:g,changes:WT(A)})))))}))}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new ft(i)).next((s=>{let l=_l();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l}))}getDocumentsMatchingCollectionGroupQuery(t,i,s,l){const c=i.collectionGroup;let d=_l();return this.indexManager.getCollectionParents(t,c).next((g=>X.forEach(g,(y=>{const _=(function(S,D){return new lo(D,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(i,y.child(c));return this.getDocumentsMatchingCollectionQuery(t,_,s,l).next((A=>{A.forEach(((S,D)=>{d=d.insert(S,D)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(t,i,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,s,c,l)))).next((d=>{c.forEach(((y,_)=>{const A=_.getKey();d.get(A)===null&&(d=d.insert(A,Ze.newInvalidDocument(A)))}));let g=_l();return d.forEach(((y,_)=>{const A=c.get(y);A!==void 0&&Il(A.mutation,_,An.empty(),ne.now()),vh(i,_)&&(g=g.insert(y,_))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return X.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Ri(l.createTime)}})(i)),X.resolve()}getNamedQuery(t,i){return X.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:t2(l.bundledQuery),readTime:Ri(l.readTime)}})(i)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.overlays=new le(ft.comparator),this.qr=new Map}getOverlay(t,i){return X.resolve(this.overlays.get(i))}getOverlays(t,i){const s=Bs();return X.forEach(i,(l=>this.getOverlay(t,l).next((c=>{c!==null&&s.set(l,c)})))).next((()=>s))}saveOverlays(t,i,s){return s.forEach(((l,c)=>{this.St(t,i,c)})),X.resolve()}removeOverlaysForBatchId(t,i,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),X.resolve()}getOverlaysForCollection(t,i,s){const l=Bs(),c=i.length+1,d=new ft(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,_=y.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===c&&y.largestBatchId>s&&l.set(y.getKey(),y)}return X.resolve(l)}getOverlaysForCollectionGroup(t,i,s,l){let c=new le(((_,A)=>_-A));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>s){let A=c.get(_.largestBatchId);A===null&&(A=Bs(),c=c.insert(_.largestBatchId,A)),A.set(_.getKey(),_)}}const g=Bs(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,A)=>g.set(_,A))),!(g.size()>=l)););return X.resolve(g)}St(t,i,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new NI(i,s));let c=this.qr.get(i);c===void 0&&(c=Ot(),this.qr.set(i,c)),this.qr.set(i,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(t){return X.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.Qr=new Ve(ke.$r),this.Ur=new Ve(ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const s=new ke(t,i);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,i){t.forEach((s=>this.addReference(s,i)))}removeReference(t,i){this.Gr(new ke(t,i))}zr(t,i){t.forEach((s=>this.removeReference(s,i)))}jr(t){const i=new ft(new ee([])),s=new ke(i,t),l=new ke(i,t+1),c=[];return this.Ur.forEachInRange([s,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new ft(new ee([])),s=new ke(i,t),l=new ke(i,t+1);let c=Ot();return this.Ur.forEachInRange([s,l],(d=>{c=c.add(d.key)})),c}containsKey(t){const i=new ke(t,0),s=this.Qr.firstAfterOrEqual(i);return s!==null&&t.isEqual(s.key)}}class ke{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return ft.comparator(t.key,i.key)||Nt(t.Yr,i.Yr)}static Kr(t,i){return Nt(t.Yr,i.Yr)||ft.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Ve(ke.$r)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,s,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new DI(c,i,s,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new ke(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return X.resolve(d)}lookupMutationBatch(t,i){return X.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const s=i+1,l=this.ei(s),c=l<0?0:l;return X.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Bm:this.tr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const s=new ke(i,0),l=new ke(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,l],(d=>{const g=this.Xr(d.Yr);c.push(g)})),X.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,i){let s=new Ve(Nt);return i.forEach((l=>{const c=new ke(l,0),d=new ke(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(g=>{s=s.add(g.Yr)}))})),X.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,i){const s=i.path,l=s.length+1;let c=s;ft.isDocumentKey(c)||(c=c.child(""));const d=new ke(new ft(c),0);let g=new Ve(Nt);return this.Zr.forEachWhile((y=>{const _=y.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(g=g.add(y.Yr)),!0)}),d),X.resolve(this.ti(g))}ti(t){const i=[];return t.forEach((s=>{const l=this.Xr(s);l!==null&&i.push(l)})),i}removeMutationBatch(t,i){Gt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return X.forEach(i.mutations,(l=>{const c=new ke(l.key,i.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,i){const s=new ke(i,0),l=this.Zr.firstAfterOrEqual(s);return X.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(t){this.ri=t,this.docs=(function(){return new le(ft.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const s=i.key,l=this.docs.get(s),c=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const s=this.docs.get(i);return X.resolve(s?s.document.mutableCopy():Ze.newInvalidDocument(i))}getEntries(t,i){let s=nr();return i.forEach((l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Ze.newInvalidDocument(l))})),X.resolve(s)}getDocumentsMatchingQuery(t,i,s,l){let c=nr();const d=i.path,g=new ft(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:_,value:{document:A}}=y.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||HR(jR(A),s)<=0||(l.has(A.key)||vh(i,A))&&(c=c.insert(A.key,A.mutableCopy()))}return X.resolve(c)}getAllFromCollectionGroup(t,i,s,l){gt(9500)}ii(t,i){return X.forEach(this.docs,(s=>i(s)))}newChangeBuffer(t){return new p2(this)}getSize(t){return X.resolve(this.size)}}class p2 extends l2{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach(((s,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)})),X.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(t){this.persistence=t,this.si=new Ys((i=>Hm(i)),Gm),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.oi=0,this._i=new Xm,this.targetCount=0,this.ai=to.ur()}forEachTarget(t,i){return this.si.forEach(((s,l)=>i(l))),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.oi&&(this.oi=i),X.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new to(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,X.resolve()}updateTargetData(t,i){return this.Pr(i),X.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,i,s){let l=0;const c=[];return this.si.forEach(((d,g)=>{g.sequenceNumber<=i&&s.get(g.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)})),X.waitFor(c).next((()=>l))}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,i){const s=this.si.get(i)||null;return X.resolve(s)}addMatchingKeys(t,i,s){return this._i.Wr(i,s),X.resolve()}removeMatchingKeys(t,i,s){this._i.zr(i,s);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach((d=>{c.push(l.markPotentiallyOrphaned(t,d))})),X.waitFor(c)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),X.resolve()}getMatchingKeysForTargetId(t,i){const s=this._i.Hr(i);return X.resolve(s)}containsKey(t,i){return X.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(t,i){this.ui={},this.overlays={},this.ci=new mh(0),this.li=!1,this.li=!0,this.hi=new d2,this.referenceDelegate=t(this),this.Pi=new y2(this),this.indexManager=new e2,this.remoteDocumentCache=(function(l){return new g2(l)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new WI(i),this.Ii=new h2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new f2,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let s=this.ui[t.toKey()];return s||(s=new m2(i,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,s){rt("MemoryPersistence","Starting transaction:",t);const l=new _2(this.ci.next());return this.referenceDelegate.Ei(),s(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(t,i){return X.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,i))))}}class _2 extends FR{constructor(t){super(),this.currentSequenceNumber=t}}class $m{constructor(t){this.persistence=t,this.Ri=new Xm,this.Vi=null}static mi(t){return new $m(t)}get fi(){if(this.Vi)return this.Vi;throw gt(60996)}addReference(t,i,s){return this.Ri.addReference(s,i),this.fi.delete(s.toString()),X.resolve()}removeReference(t,i,s){return this.Ri.removeReference(s,i),this.fi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),X.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,i.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(t,i)))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(s=>{const l=ft.fromPath(s);return this.gi(t,l).next((c=>{c||i.removeEntry(l,_t.min())}))})).next((()=>(this.Vi=null,i.apply(t))))}updateLimboDocument(t,i){return this.gi(t,i).next((s=>{s?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(t){return 0}gi(t,i){return X.or([()=>X.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class ih{constructor(t,i){this.persistence=t,this.pi=new Ys((s=>YR(s.path)),((s,l)=>s.isEqual(l))),this.garbageCollector=o2(this,i)}static mi(t,i){return new ih(t,i)}Ei(){}di(t){return X.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>i.next((l=>s+l))))}wr(t){let i=0;return this.pr(t,(s=>{i++})).next((()=>i))}pr(t,i){return X.forEach(this.pi,((s,l)=>this.br(t,s,l).next((c=>c?X.resolve():i(l)))))}removeTargets(t,i,s){return this.persistence.getTargetCache().removeTargets(t,i,s)}removeOrphanedDocuments(t,i){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(t,(d=>this.br(t,d,i).next((g=>{g||(s++,c.removeEntry(d,_t.min()))})))).next((()=>c.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),X.resolve()}removeTarget(t,i){const s=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}removeReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),X.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),X.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Lc(t.data.value)),i}br(t,i,s){return X.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return X.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(t,i,s,l){this.targetId=t,this.fromCache=i,this.Es=s,this.ds=l}static As(t,i){let s=Ot(),l=Ot();for(const c of i.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Zm(t,i.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return u1()?8:QR(Je())>0?6:4})()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,s,l){const c={result:null};return this.ys(t,i).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(t,i,l,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new v2;return this.Ss(t,i,d).next((g=>{if(c.result=g,this.Vs)return this.bs(t,i,d,g.size)}))})).next((()=>c.result))}bs(t,i,s,l){return s.documentReadCount<this.fs?(Ba()<=Dt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",qa(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Ba()<=Dt.DEBUG&&rt("QueryEngine","Query:",qa(i),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Ba()<=Dt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",qa(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,wi(i))):X.resolve())}ys(t,i){if(Kv(i))return X.resolve(null);let s=wi(i);return this.indexManager.getIndexType(t,s).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=th(i,null,"F"),s=wi(i)),this.indexManager.getDocumentsMatchingTarget(t,s).next((c=>{const d=Ot(...c);return this.ps.getDocuments(t,d).next((g=>this.indexManager.getMinOffset(t,s).next((y=>{const _=this.Ds(i,g);return this.Cs(i,_,d,y.readTime)?this.ys(t,th(i,null,"F")):this.vs(t,_,i,y)}))))})))))}ws(t,i,s,l){return Kv(i)||l.isEqual(_t.min())?X.resolve(null):this.ps.getDocuments(t,s).next((c=>{const d=this.Ds(i,c);return this.Cs(i,d,s,l)?X.resolve(null):(Ba()<=Dt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),qa(i)),this.vs(t,d,i,qR(l,Nl)).next((g=>g)))}))}Ds(t,i){let s=new Ve(ZT(t));return i.forEach(((l,c)=>{vh(t,c)&&(s=s.add(c))})),s}Cs(t,i,s,l){if(t.limit===null)return!1;if(s.size!==i.size)return!0;const c=t.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(t,i,s){return Ba()<=Dt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",qa(i)),this.ps.getDocumentsMatchingQuery(t,i,Zr.min(),s)}vs(t,i,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next((c=>(i.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LocalStore",T2=3e8;class A2{constructor(t,i,s,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new le(Nt),this.xs=new Ys((c=>Hm(c)),Gm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new c2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>t.collect(i,this.Ms)))}}function S2(r,t,i,s){return new A2(r,t,i,s)}async function T0(r,t){const i=Et(r);return await i.persistence.runTransaction("Handle user change","readonly",(s=>{let l;return i.mutationQueue.getAllMutationBatches(s).next((c=>(l=c,i.Bs(t),i.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],g=[];let y=Ot();for(const _ of l){d.push(_.batchId);for(const A of _.mutations)y=y.add(A.key)}for(const _ of c){g.push(_.batchId);for(const A of _.mutations)y=y.add(A.key)}return i.localDocuments.getDocuments(s,y).next((_=>({Ls:_,removedBatchIds:d,addedBatchIds:g})))}))}))}function b2(r,t){const i=Et(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const l=t.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,y,_,A){const S=_.batch,D=S.keys();let H=X.resolve();return D.forEach(($=>{H=H.next((()=>A.getEntry(y,$))).next((W=>{const Z=_.docVersions.get($);Gt(Z!==null,48541),W.version.compareTo(Z)<0&&(S.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),A.addEntry(W)))}))})),H.next((()=>g.mutationQueue.removeMutationBatch(y,S)))})(i,s,t,c).next((()=>c.apply(s))).next((()=>i.mutationQueue.performConsistencyCheck(s))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let y=Ot();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(y=y.add(g.batch.mutations[_].key));return y})(t)))).next((()=>i.localDocuments.getDocuments(s,l)))}))}function A0(r){const t=Et(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>t.Pi.getLastRemoteSnapshotVersion(i)))}function w2(r,t){const i=Et(r),s=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const g=[];t.targetChanges.forEach(((A,S)=>{const D=l.get(S);if(!D)return;g.push(i.Pi.removeMatchingKeys(c,A.removedDocuments,S).next((()=>i.Pi.addMatchingKeys(c,A.addedDocuments,S))));let H=D.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(S)!==null?H=H.withResumeToken(Ke.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):A.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(A.resumeToken,s)),l=l.insert(S,H),(function(W,Z,ct){return W.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=T2?!0:ct.addedDocuments.size+ct.modifiedDocuments.size+ct.removedDocuments.size>0})(D,H,A)&&g.push(i.Pi.updateTargetData(c,H))}));let y=nr(),_=Ot();if(t.documentUpdates.forEach((A=>{t.resolvedLimboDocuments.has(A)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(c,A))})),g.push(R2(c,d,t.documentUpdates).next((A=>{y=A.ks,_=A.qs}))),!s.isEqual(_t.min())){const A=i.Pi.getLastRemoteSnapshotVersion(c).next((S=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));g.push(A)}return X.waitFor(g).next((()=>d.apply(c))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,y,_))).next((()=>y))})).then((c=>(i.Ms=l,c)))}function R2(r,t,i){let s=Ot(),l=Ot();return i.forEach((c=>s=s.add(c))),t.getEntries(r,s).next((c=>{let d=nr();return i.forEach(((g,y)=>{const _=c.get(g);y.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(g)),y.isNoDocument()&&y.version.isEqual(_t.min())?(t.removeEntry(g,y.readTime),d=d.insert(g,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(y),d=d.insert(g,y)):rt(Jm,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",y.version)})),{ks:d,qs:l}}))}function I2(r,t){const i=Et(r);return i.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Bm),i.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function C2(r,t){const i=Et(r);return i.persistence.runTransaction("Allocate target","readwrite",(s=>{let l;return i.Pi.getTargetData(s,t).next((c=>c?(l=c,X.resolve(l)):i.Pi.allocateTargetId(s).next((d=>(l=new Hr(t,d,"TargetPurposeListen",s.currentSequenceNumber),i.Pi.addTargetData(s,l).next((()=>l)))))))})).then((s=>{const l=i.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(s.targetId,s),i.xs.set(t,s.targetId)),s}))}async function Em(r,t,i){const s=Et(r),l=s.Ms.get(t),c=i?"readwrite":"readwrite-primary";try{i||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!oo(d))throw d;rt(Jm,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function aE(r,t,i){const s=Et(r);let l=_t.min(),c=Ot();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,_,A){const S=Et(y),D=S.xs.get(A);return D!==void 0?X.resolve(S.Ms.get(D)):S.Pi.getTargetData(_,A)})(s,d,wi(t)).next((g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next((y=>{c=y}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,t,i?l:_t.min(),i?c:Ot()))).next((g=>(D2(s,dI(t),g),{documents:g,Qs:c})))))}function D2(r,t,i){let s=r.Os.get(t)||_t.min();i.forEach(((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(t,s)}class oE{constructor(){this.activeTargetIds=vI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class N2{constructor(){this.Mo=new oE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,s){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,s){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new oE,Promise.resolve()}handleUserChange(t,i,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="ConnectivityMonitor";class uE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){rt(lE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){rt(lE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc=null;function Tm(){return Nc===null?Nc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nc++,"0x"+Nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="RestConnection",M2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class V2{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Zc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,i,s,l,c){const d=Tm(),g=this.zo(t,i.toUriEncodedString());rt(Yd,`Sending RPC '${t}' ${d}:`,g,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:_}=new URL(g),A=no(_);return this.Jo(t,g,y,s,A).then((S=>(rt(Yd,`Received RPC '${t}' ${d}: `,S),S)),(S=>{throw $a(Yd,`RPC '${t}' ${d} failed with error: `,S,"url: ",g,"request:",s),S}))}Ho(t,i,s,l,c,d){return this.Go(t,i,s,l,c)}jo(t,i,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+so})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,c)=>t[c]=l)),s&&s.headers.forEach(((l,c)=>t[c]=l))}zo(t,i){const s=M2[t];return`${this.Uo}/v1/${i}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe="WebChannelConnection";class U2 extends V2{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,s,l,c){const d=Tm();return new Promise(((g,y)=>{const _=new bT;_.setWithCredentials(!0),_.listenOnce(wT.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Uc.NO_ERROR:const S=_.getResponseJson();rt(Xe,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(S)),g(S);break;case Uc.TIMEOUT:rt(Xe,`RPC '${t}' ${d} timed out`),y(new nt(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Uc.HTTP_ERROR:const D=_.getStatus();if(rt(Xe,`RPC '${t}' ${d} failed with status:`,D,"response text:",_.getResponseText()),D>0){let H=_.getResponseJson();Array.isArray(H)&&(H=H[0]);const $=H?.error;if($&&$.status&&$.message){const W=(function(ct){const lt=ct.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(lt)>=0?lt:Q.UNKNOWN})($.status);y(new nt(W,$.message))}else y(new nt(Q.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new nt(Q.UNAVAILABLE,"Connection failed."));break;default:gt(9055,{l_:t,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{rt(Xe,`RPC '${t}' ${d} completed.`)}}));const A=JSON.stringify(l);rt(Xe,`RPC '${t}' ${d} sending request:`,l),_.send(i,"POST",A,s,15)}))}T_(t,i,s){const l=Tm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=CT(),g=IT(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,s),y.encodeInitMessageHeaders=!0;const A=c.join("");rt(Xe,`Creating RPC '${t}' stream ${l}: ${A}`,y);const S=d.createWebChannel(A,y);this.I_(S);let D=!1,H=!1;const $=new x2({Yo:Z=>{H?rt(Xe,`Not sending because RPC '${t}' stream ${l} is closed:`,Z):(D||(rt(Xe,`Opening RPC '${t}' stream ${l} transport.`),S.open(),D=!0),rt(Xe,`RPC '${t}' stream ${l} sending:`,Z),S.send(Z))},Zo:()=>S.close()}),W=(Z,ct,lt)=>{Z.listen(ct,(dt=>{try{lt(dt)}catch(jt){setTimeout((()=>{throw jt}),0)}}))};return W(S,yl.EventType.OPEN,(()=>{H||(rt(Xe,`RPC '${t}' stream ${l} transport opened.`),$.o_())})),W(S,yl.EventType.CLOSE,(()=>{H||(H=!0,rt(Xe,`RPC '${t}' stream ${l} transport closed`),$.a_(),this.E_(S))})),W(S,yl.EventType.ERROR,(Z=>{H||(H=!0,$a(Xe,`RPC '${t}' stream ${l} transport errored. Name:`,Z.name,"Message:",Z.message),$.a_(new nt(Q.UNAVAILABLE,"The operation could not be completed")))})),W(S,yl.EventType.MESSAGE,(Z=>{if(!H){const ct=Z.data[0];Gt(!!ct,16349);const lt=ct,dt=lt?.error||lt[0]?.error;if(dt){rt(Xe,`RPC '${t}' stream ${l} received error:`,dt);const jt=dt.status;let Wt=(function(b){const R=Ie[b];if(R!==void 0)return u0(R)})(jt),Mt=dt.message;Wt===void 0&&(Wt=Q.INTERNAL,Mt="Unknown error status: "+jt+" with message "+dt.message),H=!0,$.a_(new nt(Wt,Mt)),S.close()}else rt(Xe,`RPC '${t}' stream ${l} received:`,ct),$.u_(ct)}})),W(g,RT.STAT_EVENT,(Z=>{Z.stat===um.PROXY?rt(Xe,`RPC '${t}' stream ${l} detected buffering proxy`):Z.stat===um.NOPROXY&&rt(Xe,`RPC '${t}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{$.__()}),0),$}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((i=>i===t))}}function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(r){return new zI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(t,i,s=1e3,l=1.5,c=6e4){this.Mi=t,this.timerId=i,this.d_=s,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-s);l>0&&rt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="PersistentStream";class b0{constructor(t,i,s,l,c,d,g,y){this.Mi=t,this.S_=s,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new S0(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===Q.RESOURCE_EXHAUSTED?(er(i.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,l])=>{this.D_===i&&this.G_(s,l)}),(s=>{t((()=>{const l=new nt(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)}))}))}G_(t,i){const s=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{s((()=>this.z_(l)))})),this.stream.onMessage((l=>{s((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return rt(cE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget((()=>this.D_===t?i():(rt(cE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class L2 extends b0{constructor(t,i,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,l,d),this.serializer=c}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=jI(this.serializer,t),s=(function(c){if(!("targetChange"in c))return _t.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?_t.min():d.readTime?Ri(d.readTime):_t.min()})(t);return this.listener.H_(i,s)}Y_(t){const i={};i.database=vm(this.serializer),i.addTarget=(function(c,d){let g;const y=d.target;if(g=mm(y)?{documents:FI(c,y)}:{query:QI(c,y).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=f0(c,d.resumeToken);const _=pm(c,d.expectedCount);_!==null&&(g.expectedCount=_)}else if(d.snapshotVersion.compareTo(_t.min())>0){g.readTime=nh(c,d.snapshotVersion.toTimestamp());const _=pm(c,d.expectedCount);_!==null&&(g.expectedCount=_)}return g})(this.serializer,t);const s=YI(this.serializer,t);s&&(i.labels=s),this.q_(i)}Z_(t){const i={};i.database=vm(this.serializer),i.removeTarget=t,this.q_(i)}}class k2 extends b0{constructor(t,i,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Gt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Gt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Gt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=GI(t.writeResults,t.commitTime),s=Ri(t.commitTime);return this.listener.na(s,i)}ra(){const t={};t.database=vm(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map((s=>HI(this.serializer,s)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{}class z2 extends P2{constructor(t,i,s,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new nt(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(t,ym(i,s),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new nt(Q.UNKNOWN,c.toString())}))}Ho(t,i,s,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,g])=>this.connection.Ho(t,ym(i,s),l,d,g,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new nt(Q.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class B2{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(er(i),this.aa=!1):rt("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="RemoteStore";class q2{constructor(t,i,s,l,c){this.localStore=t,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Xs(this)&&(rt(Ks,"Restarting streams for network reachability change."),await(async function(y){const _=Et(y);_.Ea.add(4),await Kl(_),_.Ra.set("Unknown"),_.Ea.delete(4),await bh(_)})(this))}))})),this.Ra=new B2(s,l)}}async function bh(r){if(Xs(r))for(const t of r.da)await t(!0)}async function Kl(r){for(const t of r.da)await t(!1)}function w0(r,t){const i=Et(r);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),ng(i)?eg(i):uo(i).O_()&&tg(i,t))}function Wm(r,t){const i=Et(r),s=uo(i);i.Ia.delete(t),s.O_()&&R0(i,t),i.Ia.size===0&&(s.O_()?s.L_():Xs(i)&&i.Ra.set("Unknown"))}function tg(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(_t.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}uo(r).Y_(t)}function R0(r,t){r.Va.Ue(t),uo(r).Z_(t)}function eg(r){r.Va=new UI({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),uo(r).start(),r.Ra.ua()}function ng(r){return Xs(r)&&!uo(r).x_()&&r.Ia.size>0}function Xs(r){return Et(r).Ea.size===0}function I0(r){r.Va=void 0}async function j2(r){r.Ra.set("Online")}async function H2(r){r.Ia.forEach(((t,i)=>{tg(r,t)}))}async function G2(r,t){I0(r),ng(r)?(r.Ra.ha(t),eg(r)):r.Ra.set("Unknown")}async function F2(r,t,i){if(r.Ra.set("Online"),t instanceof h0&&t.state===2&&t.cause)try{await(async function(l,c){const d=c.cause;for(const g of c.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))})(r,t)}catch(s){rt(Ks,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await rh(r,s)}else if(t instanceof zc?r.Va.Ze(t):t instanceof c0?r.Va.st(t):r.Va.tt(t),!i.isEqual(_t.min()))try{const s=await A0(r.localStore);i.compareTo(s)>=0&&await(function(c,d){const g=c.Va.Tt(d);return g.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const A=c.Ia.get(_);A&&c.Ia.set(_,A.withResumeToken(y.resumeToken,d))}})),g.targetMismatches.forEach(((y,_)=>{const A=c.Ia.get(y);if(!A)return;c.Ia.set(y,A.withResumeToken(Ke.EMPTY_BYTE_STRING,A.snapshotVersion)),R0(c,y);const S=new Hr(A.target,y,_,A.sequenceNumber);tg(c,S)})),c.remoteSyncer.applyRemoteEvent(g)})(r,i)}catch(s){rt(Ks,"Failed to raise snapshot:",s),await rh(r,s)}}async function rh(r,t,i){if(!oo(t))throw t;r.Ea.add(1),await Kl(r),r.Ra.set("Offline"),i||(i=()=>A0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{rt(Ks,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await bh(r)}))}function C0(r,t){return t().catch((i=>rh(r,i,t)))}async function wh(r){const t=Et(r),i=es(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Bm;for(;Q2(t);)try{const l=await I2(t.localStore,s);if(l===null){t.Ta.length===0&&i.L_();break}s=l.batchId,K2(t,l)}catch(l){await rh(t,l)}D0(t)&&N0(t)}function Q2(r){return Xs(r)&&r.Ta.length<10}function K2(r,t){r.Ta.push(t);const i=es(r);i.O_()&&i.X_&&i.ea(t.mutations)}function D0(r){return Xs(r)&&!es(r).x_()&&r.Ta.length>0}function N0(r){es(r).start()}async function Y2(r){es(r).ra()}async function X2(r){const t=es(r);for(const i of r.Ta)t.ea(i.mutations)}async function $2(r,t,i){const s=r.Ta.shift(),l=Qm.from(s,t,i);await C0(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await wh(r)}async function Z2(r,t){t&&es(r).X_&&await(async function(s,l){if((function(d){return MI(d)&&d!==Q.ABORTED})(l.code)){const c=s.Ta.shift();es(s).B_(),await C0(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l))),await wh(s)}})(r,t),D0(r)&&N0(r)}async function hE(r,t){const i=Et(r);i.asyncQueue.verifyOperationInProgress(),rt(Ks,"RemoteStore received new credentials");const s=Xs(i);i.Ea.add(3),await Kl(i),s&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await bh(i)}async function J2(r,t){const i=Et(r);t?(i.Ea.delete(2),await bh(i)):t||(i.Ea.add(2),await Kl(i),i.Ra.set("Unknown"))}function uo(r){return r.ma||(r.ma=(function(i,s,l){const c=Et(i);return c.sa(),new L2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:j2.bind(null,r),t_:H2.bind(null,r),r_:G2.bind(null,r),H_:F2.bind(null,r)}),r.da.push((async t=>{t?(r.ma.B_(),ng(r)?eg(r):r.Ra.set("Unknown")):(await r.ma.stop(),I0(r))}))),r.ma}function es(r){return r.fa||(r.fa=(function(i,s,l){const c=Et(i);return c.sa(),new k2(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Y2.bind(null,r),r_:Z2.bind(null,r),ta:X2.bind(null,r),na:$2.bind(null,r)}),r.da.push((async t=>{t?(r.fa.B_(),await wh(r)):(await r.fa.stop(),r.Ta.length>0&&(rt(Ks,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t,i,s,l,c){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,i,s,l,c){const d=Date.now()+s,g=new ig(t,i,d,l,c);return g.start(s),g}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(Q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(r,t){if(er("AsyncQueue",`${t}: ${r}`),oo(r))return new nt(Q.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{static emptySet(t){return new Ya(t.comparator)}constructor(t){this.comparator=t?(i,s)=>t(i,s)||ft.comparator(i.key,s.key):(i,s)=>ft.comparator(i.key,s.key),this.keyedMap=_l(),this.sortedSet=new le(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((i,s)=>(t(i),!1)))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Ya)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach((i=>{t.push(i.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const s=new Ya;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=i,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.ga=new le(ft.comparator)}track(t){const i=t.doc.key,s=this.ga.get(i);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(i,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(i,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(i):t.type===1&&s.type===2?this.ga=this.ga.insert(i,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):gt(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal(((i,s)=>{t.push(s)})),t}}class eo{constructor(t,i,s,l,c,d,g,y,_){this.query=t,this.docs=i,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(t,i,s,l,c){const d=[];return i.forEach((g=>{d.push({type:0,doc:g})})),new eo(t,i,Ya.emptySet(i),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_h(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,s=t.docChanges;if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==s[l].type||!i[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class tC{constructor(){this.queries=dE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,s){const l=Et(i),c=l.queries;l.queries=dE(),c.forEach(((d,g)=>{for(const y of g.Sa)y.onError(s)}))})(this,new nt(Q.ABORTED,"Firestore shutting down"))}}function dE(){return new Ys((r=>$T(r)),_h)}async function sg(r,t){const i=Et(r);let s=3;const l=t.query;let c=i.queries.get(l);c?!c.ba()&&t.Da()&&(s=2):(c=new W2,s=t.Da()?0:1);try{switch(s){case 0:c.wa=await i.onListen(l,!0);break;case 1:c.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=rg(d,`Initialization of query '${qa(t.query)}' failed`);return void t.onError(g)}i.queries.set(l,c),c.Sa.push(t),t.va(i.onlineState),c.wa&&t.Fa(c.wa)&&og(i)}async function ag(r,t){const i=Et(r),s=t.query;let l=3;const c=i.queries.get(s);if(c){const d=c.Sa.indexOf(t);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=t.Da()?0:1:!c.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}}function eC(r,t){const i=Et(r);let s=!1;for(const l of t){const c=l.query,d=i.queries.get(c);if(d){for(const g of d.Sa)g.Fa(l)&&(s=!0);d.wa=l}}s&&og(i)}function nC(r,t,i){const s=Et(r),l=s.queries.get(t);if(l)for(const c of l.Sa)c.onError(i);s.queries.delete(t)}function og(r){r.Ca.forEach((t=>{t.next()}))}var Am,mE;(mE=Am||(Am={})).Ma="default",mE.Cache="cache";class lg{constructor(t,i,s){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new eo(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const s=i!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=eo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t){this.key=t}}class M0{constructor(t){this.key=t}}class iC{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ot(),this.mutatedKeys=Ot(),this.eu=ZT(t),this.tu=new Ya(this.eu)}get nu(){return this.Ya}ru(t,i){const s=i?i.iu:new fE,l=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal(((A,S)=>{const D=l.get(A),H=vh(this.query,S)?S:null,$=!!D&&this.mutatedKeys.has(D.key),W=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let Z=!1;D&&H?D.data.isEqual(H.data)?$!==W&&(s.track({type:3,doc:H}),Z=!0):this.su(D,H)||(s.track({type:2,doc:H}),Z=!0,(y&&this.eu(H,y)>0||_&&this.eu(H,_)<0)&&(g=!0)):!D&&H?(s.track({type:0,doc:H}),Z=!0):D&&!H&&(s.track({type:1,doc:D}),Z=!0,(y||_)&&(g=!0)),Z&&(H?(d=d.add(H),c=W?c.add(A):c.delete(A)):(d=d.delete(A),c=c.delete(A)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),c=c.delete(A.key),s.track({type:1,doc:A})}return{tu:d,iu:s,Cs:g,mutatedKeys:c}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,s,l){const c=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort(((A,S)=>(function(H,$){const W=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt(20277,{Rt:Z})}};return W(H)-W($)})(A.type,S.type)||this.eu(A.doc,S.doc))),this.ou(s),l=l??!1;const g=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,_=y!==this.Za;return this.Za=y,d.length!==0||_?{snapshot:new eo(this.query,t.tu,c,d,t.mutatedKeys,y===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),t.modifiedDocuments.forEach((i=>{})),t.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ot(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const i=[];return t.forEach((s=>{this.Xa.has(s)||i.push(new M0(s))})),this.Xa.forEach((s=>{t.has(s)||i.push(new O0(s))})),i}cu(t){this.Ya=t.Qs,this.Xa=Ot();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return eo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ug="SyncEngine";class rC{constructor(t,i,s){this.query=t,this.targetId=i,this.view=s}}class sC{constructor(t){this.key=t,this.hu=!1}}class aC{constructor(t,i,s,l,c,d){this.localStore=t,this.remoteStore=i,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ys((g=>$T(g)),_h),this.Iu=new Map,this.Eu=new Set,this.du=new le(ft.comparator),this.Au=new Map,this.Ru=new Xm,this.Vu={},this.mu=new Map,this.fu=to.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oC(r,t,i=!0){const s=P0(r);let l;const c=s.Tu.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await V0(s,t,i,!0),l}async function lC(r,t){const i=P0(r);await V0(i,t,!0,!1)}async function V0(r,t,i,s){const l=await C2(r.localStore,wi(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,i);let g;return s&&(g=await uC(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&i&&w0(r.remoteStore,l),g}async function uC(r,t,i,s,l){r.pu=(S,D,H)=>(async function(W,Z,ct,lt){let dt=Z.view.ru(ct);dt.Cs&&(dt=await aE(W.localStore,Z.query,!1).then((({documents:w})=>Z.view.ru(w,dt))));const jt=lt&&lt.targetChanges.get(Z.targetId),Wt=lt&&lt.targetMismatches.get(Z.targetId)!=null,Mt=Z.view.applyChanges(dt,W.isPrimaryClient,jt,Wt);return pE(W,Z.targetId,Mt.au),Mt.snapshot})(r,S,D,H);const c=await aE(r.localStore,t,!0),d=new iC(t,c.Qs),g=d.ru(c.documents),y=Ql.createSynthesizedTargetChangeForCurrentChange(i,s&&r.onlineState!=="Offline",l),_=d.applyChanges(g,r.isPrimaryClient,y);pE(r,i,_.au);const A=new rC(t,i,d);return r.Tu.set(t,A),r.Iu.has(i)?r.Iu.get(i).push(t):r.Iu.set(i,[t]),_.snapshot}async function cC(r,t,i){const s=Et(r),l=s.Tu.get(t),c=s.Iu.get(l.targetId);if(c.length>1)return s.Iu.set(l.targetId,c.filter((d=>!_h(d,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await Em(s.localStore,l.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(l.targetId),i&&Wm(s.remoteStore,l.targetId),Sm(s,l.targetId)})).catch(ao)):(Sm(s,l.targetId),await Em(s.localStore,l.targetId,!0))}async function hC(r,t){const i=Et(r),s=i.Tu.get(t),l=i.Iu.get(s.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),Wm(i.remoteStore,s.targetId))}async function fC(r,t,i){const s=vC(r);try{const l=await(function(d,g){const y=Et(d),_=ne.now(),A=g.reduce(((H,$)=>H.add($.key)),Ot());let S,D;return y.persistence.runTransaction("Locally write mutations","readwrite",(H=>{let $=nr(),W=Ot();return y.Ns.getEntries(H,A).next((Z=>{$=Z,$.forEach(((ct,lt)=>{lt.isValidDocument()||(W=W.add(ct))}))})).next((()=>y.localDocuments.getOverlayedDocuments(H,$))).next((Z=>{S=Z;const ct=[];for(const lt of g){const dt=II(lt,S.get(lt.key).overlayedDocument);dt!=null&&ct.push(new ss(lt.key,dt,jT(dt.value.mapValue),Jn.exists(!0)))}return y.mutationQueue.addMutationBatch(H,_,ct,g)})).next((Z=>{D=Z;const ct=Z.applyToLocalDocumentSet(S,W);return y.documentOverlayCache.saveOverlays(H,Z.batchId,ct)}))})).then((()=>({batchId:D.batchId,changes:WT(S)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),(function(d,g,y){let _=d.Vu[d.currentUser.toKey()];_||(_=new le(Nt)),_=_.insert(g,y),d.Vu[d.currentUser.toKey()]=_})(s,l.batchId,i),await Yl(s,l.changes),await wh(s.remoteStore)}catch(l){const c=rg(l,"Failed to persist write");i.reject(c)}}async function x0(r,t){const i=Et(r);try{const s=await w2(i.localStore,t);t.targetChanges.forEach(((l,c)=>{const d=i.Au.get(c);d&&(Gt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Gt(d.hu,14607):l.removedDocuments.size>0&&(Gt(d.hu,42227),d.hu=!1))})),await Yl(i,s,t)}catch(s){await ao(s)}}function gE(r,t,i){const s=Et(r);if(s.isPrimaryClient&&i===0||!s.isPrimaryClient&&i===1){const l=[];s.Tu.forEach(((c,d)=>{const g=d.view.va(t);g.snapshot&&l.push(g.snapshot)})),(function(d,g){const y=Et(d);y.onlineState=g;let _=!1;y.queries.forEach(((A,S)=>{for(const D of S.Sa)D.va(g)&&(_=!0)})),_&&og(y)})(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function dC(r,t,i){const s=Et(r);s.sharedClientState.updateQueryState(t,"rejected",i);const l=s.Au.get(t),c=l&&l.key;if(c){let d=new le(ft.comparator);d=d.insert(c,Ze.newNoDocument(c,_t.min()));const g=Ot().add(c),y=new Ah(_t.min(),new Map,new le(Nt),d,g);await x0(s,y),s.du=s.du.remove(c),s.Au.delete(t),cg(s)}else await Em(s.localStore,t,!1).then((()=>Sm(s,t,i))).catch(ao)}async function mC(r,t){const i=Et(r),s=t.batch.batchId;try{const l=await b2(i.localStore,t);L0(i,s,null),U0(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),await Yl(i,l)}catch(l){await ao(l)}}async function gC(r,t,i){const s=Et(r);try{const l=await(function(d,g){const y=Et(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let A;return y.mutationQueue.lookupMutationBatch(_,g).next((S=>(Gt(S!==null,37113),A=S.keys(),y.mutationQueue.removeMutationBatch(_,S)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,A,g))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,A))).next((()=>y.localDocuments.getDocuments(_,A)))}))})(s.localStore,t);L0(s,t,i),U0(s,t),s.sharedClientState.updateMutationState(t,"rejected",i),await Yl(s,l)}catch(l){await ao(l)}}function U0(r,t){(r.mu.get(t)||[]).forEach((i=>{i.resolve()})),r.mu.delete(t)}function L0(r,t,i){const s=Et(r);let l=s.Vu[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(i?c.reject(i):c.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function Sm(r,t,i=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),i&&r.Pu.yu(s,i);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach((s=>{r.Ru.containsKey(s)||k0(r,s)}))}function k0(r,t){r.Eu.delete(t.path.canonicalString());const i=r.du.get(t);i!==null&&(Wm(r.remoteStore,i),r.du=r.du.remove(t),r.Au.delete(i),cg(r))}function pE(r,t,i){for(const s of i)s instanceof O0?(r.Ru.addReference(s.key,t),pC(r,s)):s instanceof M0?(rt(ug,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||k0(r,s.key)):gt(19791,{wu:s})}function pC(r,t){const i=t.key,s=i.path.canonicalString();r.du.get(i)||r.Eu.has(s)||(rt(ug,"New document in limbo: "+i),r.Eu.add(s),cg(r))}function cg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const i=new ft(ee.fromString(t)),s=r.fu.next();r.Au.set(s,new sC(i)),r.du=r.du.insert(i,s),w0(r.remoteStore,new Hr(wi(yh(i.path)),s,"TargetPurposeLimboResolution",mh.ce))}}async function Yl(r,t,i){const s=Et(r),l=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,y)=>{d.push(s.pu(y,t,i).then((_=>{if((_||i)&&s.isPrimaryClient){const A=_?!_.fromCache:i?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,A?"current":"not-current")}if(_){l.push(_);const A=Zm.As(y.targetId,_);c.push(A)}})))})),await Promise.all(d),s.Pu.H_(l),await(async function(y,_){const A=Et(y);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>X.forEach(_,(D=>X.forEach(D.Es,(H=>A.persistence.referenceDelegate.addReference(S,D.targetId,H))).next((()=>X.forEach(D.ds,(H=>A.persistence.referenceDelegate.removeReference(S,D.targetId,H)))))))))}catch(S){if(!oo(S))throw S;rt(Jm,"Failed to update sequence numbers: "+S)}for(const S of _){const D=S.targetId;if(!S.fromCache){const H=A.Ms.get(D),$=H.snapshotVersion,W=H.withLastLimboFreeSnapshotVersion($);A.Ms=A.Ms.insert(D,W)}}})(s.localStore,c))}async function yC(r,t){const i=Et(r);if(!i.currentUser.isEqual(t)){rt(ug,"User change. New user:",t.toKey());const s=await T0(i.localStore,t);i.currentUser=t,(function(c,d){c.mu.forEach((g=>{g.forEach((y=>{y.reject(new nt(Q.CANCELLED,d))}))})),c.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Yl(i,s.Ls)}}function _C(r,t){const i=Et(r),s=i.Au.get(t);if(s&&s.hu)return Ot().add(s.key);{let l=Ot();const c=i.Iu.get(t);if(!c)return l;for(const d of c){const g=i.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function P0(r){const t=Et(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=x0.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_C.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=dC.bind(null,t),t.Pu.H_=eC.bind(null,t.eventManager),t.Pu.yu=nC.bind(null,t.eventManager),t}function vC(r){const t=Et(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gC.bind(null,t),t}class sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Sh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return S2(this.persistence,new E2,t.initialUser,this.serializer)}Cu(t){return new E0($m.mi,this.serializer)}Du(t){return new N2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sh.provider={build:()=>new sh};class EC extends sh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Gt(this.persistence.referenceDelegate instanceof ih,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new s2(s,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new E0((s=>ih.mi(s,i)),this.serializer)}}class bm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>gE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=yC.bind(null,this.syncEngine),await J2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new tC})()}createDatastore(t){const i=Sh(t.databaseInfo.databaseId),s=(function(c){return new U2(c)})(t.databaseInfo);return(function(c,d,g,y){return new z2(c,d,g,y)})(t.authCredentials,t.appCheckCredentials,s,i)}createRemoteStore(t){return(function(s,l,c,d,g){return new q2(s,l,c,d,g)})(this.localStore,this.datastore,t.asyncQueue,(i=>gE(this.syncEngine,i,0)),(function(){return uE.v()?new uE:new O2})())}createSyncEngine(t,i){return(function(l,c,d,g,y,_,A){const S=new aC(l,c,d,g,y,_);return A&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const s=Et(i);rt(Ks,"RemoteStore shutting down."),s.Ea.add(5),await Kl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bm.provider={build:()=>new bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):er("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout((()=>{this.muted||t(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="FirestoreClient";class TC{constructor(t,i,s,l,c){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=l,this.user=$e.UNAUTHENTICATED,this.clientId=zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{rt(ns,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(rt(ns,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const s=rg(i,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function $d(r,t){r.asyncQueue.verifyOperationInProgress(),rt(ns,"Initializing OfflineComponentProvider");const i=r.configuration;await t.initialize(i);let s=i.initialUser;r.setCredentialChangeListener((async l=>{s.isEqual(l)||(await T0(t.localStore,l),s=l)})),t.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=t}async function yE(r,t){r.asyncQueue.verifyOperationInProgress();const i=await AC(r);rt(ns,"Initializing OnlineComponentProvider"),await t.initialize(i,r.configuration),r.setCredentialChangeListener((s=>hE(t.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,l)=>hE(t.remoteStore,l))),r._onlineComponents=t}async function AC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){rt(ns,"Using user provided OfflineComponentProvider");try{await $d(r,r._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!(function(l){return l.name==="FirebaseError"?l.code===Q.FAILED_PRECONDITION||l.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;$a("Error using user provided cache. Falling back to memory cache: "+i),await $d(r,new sh)}}else rt(ns,"Using default OfflineComponentProvider"),await $d(r,new EC(void 0));return r._offlineComponents}async function z0(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(rt(ns,"Using user provided OnlineComponentProvider"),await yE(r,r._uninitializedComponentsProvider._online)):(rt(ns,"Using default OnlineComponentProvider"),await yE(r,new bm))),r._onlineComponents}function SC(r){return z0(r).then((t=>t.syncEngine))}async function ah(r){const t=await z0(r),i=t.eventManager;return i.onListen=oC.bind(null,t.syncEngine),i.onUnlisten=cC.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=lC.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=hC.bind(null,t.syncEngine),i}function bC(r,t,i={}){const s=new Zi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,y,_){const A=new hg({next:D=>{A.Nu(),d.enqueueAndForget((()=>ag(c,S)));const H=D.docs.has(g);!H&&D.fromCache?_.reject(new nt(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&D.fromCache&&y&&y.source==="server"?_.reject(new nt(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(D)},error:D=>_.reject(D)}),S=new lg(yh(g.path),A,{includeMetadataChanges:!0,qa:!0});return sg(c,S)})(await ah(r),r.asyncQueue,t,i,s))),s.promise}function wC(r,t,i={}){const s=new Zi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,g,y,_){const A=new hg({next:D=>{A.Nu(),d.enqueueAndForget((()=>ag(c,S))),D.fromCache&&y.source==="server"?_.reject(new nt(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(D)},error:D=>_.reject(D)}),S=new lg(g,A,{includeMetadataChanges:!0,qa:!0});return sg(c,S)})(await ah(r),r.asyncQueue,t,i,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="firestore.googleapis.com",vE=!0;class EE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new nt(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q0,this.ssl=vE}else this.host=t.host,this.ssl=t.ssl??vE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=v0;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<i2)throw new nt(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B0(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new nt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new nt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new nt(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,l){return s.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Rh{constructor(t,i,s,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new nt(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new DR;switch(s.type){case"firstParty":return new VR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new nt(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const s=_E.get(i);s&&(rt("ComponentProvider","Removing Datastore"),_E.delete(i),s.terminate())})(this),Promise.resolve()}}function RC(r,t,i,s={}){r=Sn(r,Rh);const l=no(t),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${i}`;l&&(LE(`https://${g}`),kE("Firestore",!0)),c.host!==q0&&c.host!==g&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:g,ssl:l,emulatorOptions:s};if(!Hs(y,d)&&(r._setSettings(y),s.mockUserToken)){let _,A;if(typeof s.mockUserToken=="string")_=s.mockUserToken,A=$e.MOCK_USER;else{_=t1(s.mockUserToken,r._app?.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new nt(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new $e(S)}r._authCredentials=new NR(new NT(_,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new rr(this.firestore,t,this._query)}}class fe{constructor(t,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fe(this.firestore,t,this._key)}toJSON(){return{type:fe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,s){if(Gl(i,fe._jsonSchema))return new fe(t,s||null,new ft(ee.fromString(i.referencePath)))}}fe._jsonSchemaVersion="firestore/documentReference/1.0",fe._jsonSchema={type:De("string",fe._jsonSchemaVersion),referencePath:De("string")};class Xr extends rr{constructor(t,i,s){super(t,i,yh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fe(this.firestore,null,new ft(t))}withConverter(t){return new Xr(this.firestore,t,this._path)}}function zs(r,t,...i){if(r=Pe(r),OT("collection","path",t),r instanceof Rh){const s=ee.fromString(t,...i);return Vv(s),new Xr(r,null,s)}{if(!(r instanceof fe||r instanceof Xr))throw new nt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ee.fromString(t,...i));return Vv(s),new Xr(r.firestore,null,s)}}function Pl(r,t,...i){if(r=Pe(r),arguments.length===1&&(t=zm.newId()),OT("doc","path",t),r instanceof Rh){const s=ee.fromString(t,...i);return Mv(s),new fe(r,null,new ft(s))}{if(!(r instanceof fe||r instanceof Xr))throw new nt(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ee.fromString(t,...i));return Mv(s),new fe(r.firestore,r instanceof Xr?r.converter:null,new ft(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="AsyncQueue";class AE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new S0(this,"async_queue_retry"),this._c=()=>{const s=Xd();s&&rt(TE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const i=Xd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=Xd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Zi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!oo(t))throw t;rt(TE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const i=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,er("INTERNAL UNHANDLED ERROR: ",SE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=i,i}enqueueAfterDelay(t,i,s){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=ig.createAndSchedule(this,t,i,s,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&gt(47125,{Pc:SE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((i,s)=>i.targetTimeMs-s.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function SE(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(r){return(function(i,s){if(typeof i!="object"||i===null)return!1;const l=i;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1})(r,["next","error","complete"])}class is extends Rh{constructor(t,i,s,l){super(t,i,s,l),this.type="firestore",this._queue=new AE,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new AE(t),this._firestoreClient=void 0,await t}}}function IC(r,t){const i=typeof r=="object"?r:qE(),s=typeof r=="string"?r:Zc,l=Nm(i,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=JS("firestore");c&&RC(l,...c)}return l}function Ih(r){if(r._terminated)throw new nt(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||CC(r),r._firestoreClient}function CC(r){const t=r._freezeSettings(),i=(function(l,c,d,g){return new ZR(l,c,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,B0(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new TC(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new kn(Ke.fromBase64String(t))}catch(i){throw new nt(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new kn(Ke.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Gl(t,kn._jsonSchema))return kn.fromBase64String(t.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:De("string",kn._jsonSchemaVersion),bytes:De("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new nt(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new nt(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new nt(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ii._jsonSchemaVersion}}static fromJSON(t){if(Gl(t,Ii._jsonSchema))return new Ii(t.latitude,t.longitude)}}Ii._jsonSchemaVersion="firestore/geoPoint/1.0",Ii._jsonSchema={type:De("string",Ii._jsonSchemaVersion),latitude:De("number"),longitude:De("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(t){this._values=(t||[]).map((i=>i))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Gl(t,Ci._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((i=>typeof i=="number")))return new Ci(t.vectorValues);throw new nt(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ci._jsonSchemaVersion="firestore/vectorValue/1.0",Ci._jsonSchema={type:De("string",Ci._jsonSchemaVersion),vectorValues:De("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=/^__.*__$/;class NC{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return this.fieldMask!==null?new ss(t,this.data,this.fieldMask,i,this.fieldTransforms):new Fl(t,this.data,i,this.fieldTransforms)}}class j0{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return new ss(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function H0(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt(40011,{Ac:r})}}class fg{constructor(t,i,s,l,c,d){this.settings=t,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new fg({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.gc(t),s}yc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return oh(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((i=>t.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>t.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(H0(this.Ac)&&DC.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class OC{constructor(t,i,s){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=s||Sh(t)}Cc(t,i,s,l=!1){return new fg({Ac:t,methodName:i,Dc:s,path:Qe.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nh(r){const t=r._freezeSettings(),i=Sh(r._databaseId);return new OC(r._databaseId,!!t.ignoreUndefinedProperties,i)}function G0(r,t,i,s,l,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,t,i,l);mg("Data must be an object, but it was:",d,s);const g=F0(s,d);let y,_;if(c.merge)y=new An(d.fieldMask),_=d.fieldTransforms;else if(c.mergeFields){const A=[];for(const S of c.mergeFields){const D=wm(t,S,i);if(!d.contains(D))throw new nt(Q.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);K0(A,D)||A.push(D)}y=new An(A),_=d.fieldTransforms.filter((S=>y.covers(S.field)))}else y=null,_=d.fieldTransforms;return new NC(new hn(g),y,_)}class Oh extends Dh{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Oh}}class dg extends Dh{_toFieldTransform(t){return new SI(t.path,new Ul)}isEqual(t){return t instanceof dg}}function MC(r,t,i,s){const l=r.Cc(1,t,i);mg("Data must be an object, but it was:",l,s);const c=[],d=hn.empty();rs(s,((y,_)=>{const A=gg(t,y,i);_=Pe(_);const S=l.yc(A);if(_ instanceof Oh)c.push(A);else{const D=Xl(_,S);D!=null&&(c.push(A),d.set(A,D))}}));const g=new An(c);return new j0(d,g,l.fieldTransforms)}function VC(r,t,i,s,l,c){const d=r.Cc(1,t,i),g=[wm(t,s,i)],y=[l];if(c.length%2!=0)throw new nt(Q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<c.length;D+=2)g.push(wm(t,c[D])),y.push(c[D+1]);const _=[],A=hn.empty();for(let D=g.length-1;D>=0;--D)if(!K0(_,g[D])){const H=g[D];let $=y[D];$=Pe($);const W=d.yc(H);if($ instanceof Oh)_.push(H);else{const Z=Xl($,W);Z!=null&&(_.push(H),A.set(H,Z))}}const S=new An(_);return new j0(A,S,d.fieldTransforms)}function xC(r,t,i,s=!1){return Xl(i,r.Cc(s?4:3,t))}function Xl(r,t){if(Q0(r=Pe(r)))return mg("Unsupported field value:",t,r),F0(r,t);if(r instanceof Dh)return(function(s,l){if(!H0(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,l){const c=[];let d=0;for(const g of s){let y=Xl(g,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}})(r,t)}return(function(s,l){if((s=Pe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return EI(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ne.fromDate(s);return{timestampValue:nh(l.serializer,c)}}if(s instanceof ne){const c=new ne(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:nh(l.serializer,c)}}if(s instanceof Ii)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof kn)return{bytesValue:f0(l.serializer,s._byteString)};if(s instanceof fe){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ym(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Ci)return(function(d,g){return{mapValue:{fields:{[BT]:{stringValue:qT},[Jc]:{arrayValue:{values:d.toArray().map((_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return Fm(g.serializer,_)}))}}}}}})(s,l);throw l.Sc(`Unsupported field value: ${dh(s)}`)})(r,t)}function F0(r,t){const i={};return xT(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rs(r,((s,l)=>{const c=Xl(l,t.mc(s));c!=null&&(i[s]=c)})),{mapValue:{fields:i}}}function Q0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ne||r instanceof Ii||r instanceof kn||r instanceof fe||r instanceof Dh||r instanceof Ci)}function mg(r,t,i){if(!Q0(i)||!MT(i)){const s=dh(i);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function wm(r,t,i){if((t=Pe(t))instanceof Ch)return t._internalPath;if(typeof t=="string")return gg(r,t);throw oh("Field path arguments must be of type string or ",r,!1,void 0,i)}const UC=new RegExp("[~\\*/\\[\\]]");function gg(r,t,i){if(t.search(UC)>=0)throw oh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Ch(...t.split("."))._internalPath}catch{throw oh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function oh(r,t,i,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${s}`),d&&(y+=` in document ${l}`),y+=")"),new nt(Q.INVALID_ARGUMENT,g+r+y)}function K0(r,t){return r.some((i=>i.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,i,s,l,c){this._firestore=t,this._userDataWriter=i,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new LC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(Mh("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class LC extends Y0{data(){return super.data()}}function Mh(r,t){return typeof t=="string"?gg(r,t):t instanceof Ch?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new nt(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pg{}class yg extends pg{}function Bc(r,t,...i){let s=[];t instanceof pg&&s.push(t),s=s.concat(i),(function(c){const d=c.filter((y=>y instanceof _g)).length,g=c.filter((y=>y instanceof Vh)).length;if(d>1||d>0&&g>0)throw new nt(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const l of s)r=l._apply(r);return r}class Vh extends yg{constructor(t,i,s){super(),this._field=t,this._op=i,this._value=s,this.type="where"}static _create(t,i,s){return new Vh(t,i,s)}_apply(t){const i=this._parse(t);return $0(t._query,i),new rr(t.firestore,t.converter,gm(t._query,i))}_parse(t){const i=Nh(t.firestore);return(function(c,d,g,y,_,A,S){let D;if(_.isKeyField()){if(A==="array-contains"||A==="array-contains-any")throw new nt(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if(A==="in"||A==="not-in"){IE(S,A);const $=[];for(const W of S)$.push(RE(y,c,W));D={arrayValue:{values:$}}}else D=RE(y,c,S)}else A!=="in"&&A!=="not-in"&&A!=="array-contains-any"||IE(S,A),D=xC(g,d,S,A==="in"||A==="not-in");return Ce.create(_,A,D)})(t._query,"where",i,t.firestore._databaseId,this._field,this._op,this._value)}}function kC(r,t,i){const s=t,l=Mh("where",r);return Vh._create(l,s,i)}class _g extends pg{constructor(t,i){super(),this.type=t,this._queryConstraints=i}static _create(t,i){return new _g(t,i)}_parse(t){const i=this._queryConstraints.map((s=>s._parse(t))).filter((s=>s.getFilters().length>0));return i.length===1?i[0]:Wn.create(i,this._getOperator())}_apply(t){const i=this._parse(t);return i.getFilters().length===0?t:((function(l,c){let d=l;const g=c.getFlattenedFilters();for(const y of g)$0(d,y),d=gm(d,y)})(t._query,i),new rr(t.firestore,t.converter,gm(t._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vg extends yg{constructor(t,i){super(),this._field=t,this._direction=i,this.type="orderBy"}static _create(t,i){return new vg(t,i)}_apply(t){const i=(function(l,c,d){if(l.startAt!==null)throw new nt(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new nt(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xl(c,d)})(t._query,this._field,this._direction);return new rr(t.firestore,t.converter,(function(l,c){const d=l.explicitOrderBy.concat([c]);return new lo(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(t._query,i))}}function wE(r,t="asc"){const i=t,s=Mh("orderBy",r);return vg._create(s,i)}class Eg extends yg{constructor(t,i,s){super(),this.type=t,this._limit=i,this._limitType=s}static _create(t,i,s){return new Eg(t,i,s)}_apply(t){return new rr(t.firestore,t.converter,th(t._query,this._limit,this._limitType))}}function Rm(r){return BR("limit",r),Eg._create("limit",r,"F")}function RE(r,t,i){if(typeof(i=Pe(i))=="string"){if(i==="")throw new nt(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XT(t)&&i.indexOf("/")!==-1)throw new nt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const s=t.path.child(ee.fromString(i));if(!ft.isDocumentKey(s))throw new nt(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return qv(r,new ft(s))}if(i instanceof fe)return qv(r,i._key);throw new nt(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dh(i)}.`)}function IE(r,t){if(!Array.isArray(r)||r.length===0)throw new nt(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function $0(r,t){const i=(function(l,c){for(const d of l)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(i!==null)throw i===t.op?new nt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new nt(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${i.toString()}' filters.`)}class PC{convertValue(t,i="none"){switch(ts(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ye(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Wr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw gt(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const s={};return rs(t,((l,c)=>{s[l]=this.convertValue(c,i)})),s}convertVectorValue(t){const i=t.fields?.[Jc].arrayValue?.values?.map((s=>ye(s.doubleValue)));return new Ci(i)}convertGeoPoint(t){return new Ii(ye(t.latitude),ye(t.longitude))}convertArray(t,i){return(t.values||[]).map((s=>this.convertValue(s,i)))}convertServerTimestamp(t,i){switch(i){case"previous":const s=ph(t);return s==null?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(Ol(t));default:return null}}convertTimestamp(t){const i=Jr(t);return new ne(i.seconds,i.nanos)}convertDocumentKey(t,i){const s=ee.fromString(t);Gt(_0(s),9688,{name:t});const l=new Ml(s.get(1),s.get(3)),c=new ft(s.popFirst(5));return l.isEqual(i)||er(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(r,t,i){let s;return s=r?i&&(i.merge||i.mergeFields)?r.toFirestore(t,i):r.toFirestore(t):t,s}class El{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class qs extends Y0{constructor(t,i,s,l,c,d){super(t,i,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new qc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const s=this._document.data.field(Mh("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=qs._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",qs._jsonSchema={type:De("string",qs._jsonSchemaVersion),bundleSource:De("string","DocumentSnapshot"),bundleName:De("string"),bundle:De("string")};class qc extends qs{data(t={}){return super.data(t)}}class js{constructor(t,i,s,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new El(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach((i=>t.push(i))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach((s=>{t.call(i,new qc(this._firestore,this._userDataWriter,s.key,s,new El(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new nt(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((g=>{const y=new qc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new El(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((g=>c||g.type!==3)).map((g=>{const y=new qc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new El(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,A=-1;return g.type!==0&&(_=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),A=d.indexOf(g.doc.key)),{type:zC(g.type),doc:y,oldIndex:_,newIndex:A}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=js._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],s=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(i.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function zC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(r){r=Sn(r,fe);const t=Sn(r.firestore,is);return bC(Ih(t),r._key).then((i=>W0(t,r,i)))}js._jsonSchemaVersion="firestore/querySnapshot/1.0",js._jsonSchema={type:De("string",js._jsonSchemaVersion),bundleSource:De("string","QuerySnapshot"),bundleName:De("string"),bundle:De("string")};class Tg extends PC{constructor(t){super(),this.firestore=t}convertBytes(t){return new kn(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new fe(this.firestore,null,i)}}function qC(r){r=Sn(r,rr);const t=Sn(r.firestore,is),i=Ih(t),s=new Tg(t);return X0(r._query),wC(i,r._query).then((l=>new js(t,s,r,l)))}function J0(r,t,i){r=Sn(r,fe);const s=Sn(r.firestore,is),l=Z0(r.converter,t,i);return Ag(s,[G0(Nh(s),"setDoc",r._key,l,r.converter!==null,i).toMutation(r._key,Jn.none())])}function jC(r,t,i,...s){r=Sn(r,fe);const l=Sn(r.firestore,is),c=Nh(l);let d;return d=typeof(t=Pe(t))=="string"||t instanceof Ch?VC(c,"updateDoc",r._key,t,i,s):MC(c,"updateDoc",r._key,t),Ag(l,[d.toMutation(r._key,Jn.exists(!0))])}function Zd(r,t){const i=Sn(r.firestore,is),s=Pl(r),l=Z0(r.converter,t);return Ag(i,[G0(Nh(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,Jn.exists(!1))]).then((()=>s))}function Jd(r,...t){r=Pe(r);let i={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||bE(t[s])||(i=t[s++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(bE(t[s])){const y=t[s];t[s]=y.next?.bind(y),t[s+1]=y.error?.bind(y),t[s+2]=y.complete?.bind(y)}let c,d,g;if(r instanceof fe)d=Sn(r.firestore,is),g=yh(r._key.path),c={next:y=>{t[s]&&t[s](W0(d,r,y))},error:t[s+1],complete:t[s+2]};else{const y=Sn(r,rr);d=Sn(y.firestore,is),g=y._query;const _=new Tg(d);c={next:A=>{t[s]&&t[s](new js(d,_,y,A))},error:t[s+1],complete:t[s+2]},X0(r._query)}return(function(_,A,S,D){const H=new hg(D),$=new lg(A,H,S);return _.asyncQueue.enqueueAndForget((async()=>sg(await ah(_),$))),()=>{H.Nu(),_.asyncQueue.enqueueAndForget((async()=>ag(await ah(_),$)))}})(Ih(d),g,l,c)}function Ag(r,t){return(function(s,l){const c=new Zi;return s.asyncQueue.enqueueAndForget((async()=>fC(await SC(s),l,c))),c.promise})(Ih(r),t)}function W0(r,t,i){const s=i.docs.get(t._key),l=new Tg(r);return new qs(r,l,t._key,s,new El(i.hasPendingWrites,i.fromCache),t.converter)}function Tl(){return new dg("serverTimestamp")}(function(t,i=!0){(function(l){so=l})(io),Xa(new Gs("firestore",((s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),g=new is(new OR(s.getProvider("auth-internal")),new xR(d,s.getProvider("app-check-internal")),(function(_,A){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new nt(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(_.options.projectId,A)})(d,l),d);return c={useFetchStreams:i,...c},g._setSettings(c),g}),"PUBLIC").setMultipleInstances(!0)),Qr(Cv,Dv,t),Qr(Cv,Dv,"esm2020")})();/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),GC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,s)=>s?s.toUpperCase():i.toLowerCase()),CE=r=>{const t=GC(r);return t.charAt(0).toUpperCase()+t.slice(1)},tA=(...r)=>r.filter((t,i,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===i).join(" ").trim(),FC=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=zt.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...g},y)=>zt.createElement("svg",{ref:y,...QC,width:t,height:t,stroke:r,strokeWidth:s?Number(i)*24/Number(t):i,className:tA("lucide",l),...!c&&!FC(g)&&{"aria-hidden":"true"},...g},[...d.map(([_,A])=>zt.createElement(_,A)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=(r,t)=>{const i=zt.forwardRef(({className:s,...l},c)=>zt.createElement(KC,{ref:c,iconNode:t,className:tA(`lucide-${HC(CE(r))}`,`lucide-${r}`,s),...l}));return i.displayName=CE(r),i};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],XC=as("arrow-right",YC);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],ZC=as("bot",$C);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],eA=as("loader-circle",JC);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tD=as("pen-line",WC);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],nD=as("save",eD);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],rD=as("send",iD);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],aD=as("user",sD);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lD=as("x",oD),uD={apiKey:"AIzaSyDB1B2CXLf-M09XGRMXHL9epRsIruGmKBo",authDomain:"aiwebapp-4360c.firebaseapp.com",projectId:"aiwebapp-4360c",storageBucket:"aiwebapp-4360c.firebasestorage.app",messagingSenderId:"747863823395",appId:"1:747863823395:web:140f06b29fd4bb5f5b0d96"},nA=BE(uD),Wd=IR(nA),Tn=IC(nA),cD=20,hD="https://communalistic-donita-nonethnic.ngrok-free.dev/v1/chat/completions",fD=r=>!r||!r.toDate?null:r.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}),tm=[{bg:"bg-red-600/60",text:"text-red-300"},{bg:"bg-green-600/60",text:"text-green-300"},{bg:"bg-blue-600/60",text:"text-blue-300"},{bg:"bg-yellow-600/60",text:"text-yellow-300"},{bg:"bg-indigo-600/60",text:"text-indigo-300"},{bg:"bg-pink-600/60",text:"text-pink-300"},{bg:"bg-teal-600/60",text:"text-teal-300"},{bg:"bg-orange-600/60",text:"text-orange-300"}],dD=r=>{let t=0;if(r.length===0)return t;for(let i=0;i<r.length;i++){const s=r.charCodeAt(i);t=(t<<5)-t+s,t|=0}return Math.abs(t)},iA=r=>{if(!r)return tm[0];const t=dD(r);return tm[t%tm.length]},mD=({onSetUsername:r,db:t,userId:i})=>{const[s,l]=zt.useState(""),[c,d]=zt.useState(!1),[g,y]=zt.useState(""),_=async A=>{if(A.preventDefault(),!i){y("Connecting... Please try again in a moment.");return}if(s.trim().length<3){y("Username must be at least 3 characters long.");return}if(s.trim().length>15){y("Username must be 15 characters or less.");return}y(""),d(!0);try{const S=zs(t,"users"),D=Bc(S,kC("username","==",s.trim()),Rm(1));if(!(await qC(D)).empty){y("This username is already taken. Please choose another one."),d(!1);return}const $=Pl(t,"users",i);await J0($,{username:s.trim(),lastSeen:Tl()}),r(s.trim())}catch(S){console.error("Error setting username:",S),y("An error occurred. Please try again."),d(!1)}};return st.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-md",children:st.jsxs("form",{onSubmit:_,className:"w-full max-w-sm rounded-2xl bg-gray-800/60 backdrop-blur-lg border border-white/10 shadow-2xl p-6 sm:p-8",children:[st.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-4",children:"Welcome!"}),st.jsx("p",{className:"text-center text-gray-300 mb-6",children:"Please choose a username to join the chat."}),st.jsxs("div",{className:"relative",children:[st.jsx("input",{type:"text",value:s,onChange:A=>l(A.target.value),placeholder:"Enter your username...",className:"w-full pl-10 pr-4 py-3 rounded-xl border border-white/20 bg-black/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-400",disabled:c}),st.jsx(aD,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),g&&st.jsx("p",{className:"text-red-400 text-sm text-center mt-3",children:g}),st.jsxs("button",{type:"submit",className:"w-full mt-6 py-3 rounded-xl bg-purple-600 text-white font-bold flex items-center justify-center gap-2 transition hover:bg-purple-500 disabled:opacity-50",disabled:c||!i,children:[c?st.jsx(eA,{className:"w-5 h-5 animate-spin"}):"Join Chat",st.jsx(XC,{className:"w-5 h-5"})]})]})})},gD=({users:r})=>{const t=s=>s?ne.now().seconds-s.seconds<300:!1,i=r.filter(s=>s.username);return st.jsxs("div",{className:"flex-shrink-0 w-full h-auto rounded-2xl bg-black/20 backdrop-blur-lg border border-white/10 p-4 flex flex-col",children:[st.jsxs("h2",{className:"text-lg font-bold text-white mb-3",children:["Active Users (",i.length,")"]}),st.jsxs("div",{className:"flex flex-row gap-4 overflow-x-auto pb-2 -mb-2 -mr-2 pr-2",children:[" ",i.sort((s,l)=>s.username.localeCompare(l.username)).map(s=>{const l=t(s.lastSeen),c=iA(s.id).text;return st.jsxs("div",{className:"flex flex-col items-center p-3 rounded-lg transition hover:bg-white/10 w-24 flex-shrink-0",children:[st.jsx("div",{className:`w-3 h-3 rounded-full ${l?"bg-green-400":"bg-gray-500"} mb-2 flex-shrink-0`}),st.jsx("span",{className:`truncate text-sm w-full text-center ${l?"opacity-100":"opacity-60"} ${c}`,children:s.username})]},s.id)})]})]})},pD=({msg:r,isMe:t,isAI:i,username:s,db:l,chatType:c,showUsername:d})=>{const[g,y]=zt.useState(!1),[_,A]=zt.useState(r.text),[S,D]=zt.useState(!1),H=zt.useRef(null),$=iA(r.userId),W=()=>{y(!0),A(r.text)},Z=()=>{y(!1)},ct=async()=>{if(_.trim()===""||_.trim()===r.text){y(!1);return}try{const lt=Pl(l,c,r.id);await jC(lt,{text:_.trim(),edited:!0}),y(!1)}catch(lt){console.error("Error updating message:",lt)}};return zt.useEffect(()=>{g&&(H.current?.focus(),H.current?.select())},[g]),st.jsx("div",{className:`flex flex-col group ${t?"items-end":"items-start"}`,children:st.jsxs("div",{className:`flex max-w-xs md:max-w-md lg:max-w-lg flex-col rounded-xl px-4 py-2 backdrop-blur-sm border border-white/10 ${t?"bg-purple-600/50 rounded-br-none":i?"bg-gray-700/50 rounded-bl-none":`${$.bg} rounded-bl-none`}`,children:[st.jsxs("div",{className:"flex justify-between items-center mb-1 gap-3 w-full",children:[st.jsx("div",{className:"flex-shrink-0",children:t?!i&&!g&&st.jsx("button",{onClick:W,className:"text-xs text-purple-200 opacity-0 group-hover:opacity-100 transition",title:"Edit message",children:st.jsx(tD,{className:"w-3 h-3"})}):d&&st.jsx("span",{className:`text-xs font-bold ${i?"text-purple-300":$.text}`,children:r.username})}),st.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[t&&d&&st.jsx("span",{className:"text-xs font-bold text-purple-300",children:r.username}),st.jsxs("span",{className:"text-xs text-gray-300/70",children:[fD(r.createdAt),r.edited&&" (edited)"]})]})]}),i&&r.thoughtMetric&&st.jsxs("p",{className:"text-xs text-gray-400 opacity-70 cursor-pointer hover:opacity-100",onClick:()=>D(!S),children:["> ",r.thoughtMetric]}),i&&S&&r.thinking&&st.jsxs("div",{className:"my-2 p-3 rounded-lg bg-black/30 text-xs text-gray-300 whitespace-pre-wrap",children:[st.jsx("p",{className:"font-bold mb-1 text-gray-200",children:"Thinking Process:"}),r.thinking]}),g?st.jsxs("div",{className:"w-full",children:[st.jsx("textarea",{ref:H,value:_,onChange:lt=>A(lt.target.value),onKeyDown:lt=>{lt.key==="Enter"&&!lt.shiftKey&&(lt.preventDefault(),ct()),lt.key==="Escape"&&Z()},className:"w-full rounded-md border border-white/20 bg-black/20 p-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-400 text-sm",rows:3}),st.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[st.jsx("button",{onClick:Z,className:"text-xs text-gray-300 px-2 py-1 rounded hover:bg-white/10",children:st.jsx(lD,{className:"w-4 h-4"})}),st.jsx("button",{onClick:ct,className:"text-xs text-white bg-purple-500 px-3 py-1 rounded hover:bg-purple-400",children:st.jsx(nD,{className:"w-4 h-4"})})]})]}):st.jsx("p",{className:"text-white whitespace-pre-wrap break-words mt-1",children:r.text}),i&&r.otherMetrics&&st.jsx("p",{className:"mt-2 pt-2 border-t border-gray-500/50 text-xs text-gray-400 opacity-70 whitespace-pre-wrap",children:r.otherMetrics})]})},r.id)},DE=({title:r,messages:t,onSendMessage:i,inputValue:s,onInputChange:l,disabled:c=!1,disabledText:d="Sending...",username:g,db:y,chatType:_})=>{const A=zt.useRef(null);zt.useEffect(()=>{A.current?.scrollIntoView({behavior:"smooth"})},[t]);const S=D=>{D.preventDefault(),c||i()};return st.jsxs("div",{className:"w-full h-[50vh] md:h-full md:flex-1 rounded-2xl bg-black/20 backdrop-blur-lg border border-white/10 p-4 sm:p-6 flex flex-col",children:[st.jsx("h2",{className:"text-xl font-bold text-white mb-4 flex-shrink-0",children:r}),st.jsxs("div",{className:"flex-1 overflow-y-auto mb-4 pr-2 space-y-4",children:[t.map((D,H)=>{const $=D.username===g,W=D.userId==="AI";return st.jsx(pD,{msg:D,isMe:$,isAI:W,username:g,db:y,chatType:_,showUsername:!0},D.id)}),st.jsx("div",{ref:A})]}),st.jsxs("form",{onSubmit:S,className:"flex-shrink-0 flex gap-3",children:[st.jsx("input",{type:"text",value:s,onChange:D=>l(D.target.value),placeholder:c?d:"Type your message...",className:"flex-1 rounded-xl border border-white/20 bg-black/20 px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-400 disabled:opacity-60",disabled:c}),st.jsx("button",{type:"submit",className:"w-12 h-12 rounded-xl bg-purple-600 text-white flex items-center justify-center transition hover:bg-purple-500 disabled:opacity-50",disabled:c||s.trim()==="",children:c?st.jsx(eA,{className:"w-5 h-5 animate-spin"}):st.jsx(rD,{className:"w-5 h-5"})})]})]})};function yD(){const[r,t]=zt.useState(null),[i,s]=zt.useState(null),[l,c]=zt.useState([]),[d,g]=zt.useState([]),[y,_]=zt.useState([]),[A,S]=zt.useState(""),[D,H]=zt.useState(""),[$,W]=zt.useState(!1),[Z,ct]=zt.useState(0),lt=zt.useRef(null);zt.useEffect(()=>{mw(Wd,mT).then(()=>yw(Wd,async w=>{if(w){t(w.uid);const b=Pl(Tn,"users",w.uid),R=await BC(b);R.exists()&&s(R.data().username)}else await cw(Wd)})).catch(w=>{console.error("Error setting auth persistence:",w)})},[]);const dt=async()=>{if(r)try{const w=Pl(Tn,"users",r);await J0(w,{lastSeen:Tl()},{merge:!0})}catch(w){console.error("Error updating lastSeen:",w)}};zt.useEffect(()=>{if(r){dt();const w=setInterval(dt,6e4);return()=>clearInterval(w)}},[r]),zt.useEffect(()=>{const w=Bc(zs(Tn,"users")),b=Jd(w,R=>{const V=[];R.forEach(N=>{V.push({id:N.id,...N.data()})}),c(V)});return()=>b()},[]),zt.useEffect(()=>{const w=Bc(zs(Tn,"generalChat"),wE("createdAt","asc"),Rm(50)),b=Jd(w,R=>{const V=[];R.forEach(N=>{V.push({id:N.id,...N.data()})}),g(V)});return()=>b()},[]),zt.useEffect(()=>{const w=Bc(zs(Tn,"aiChat"),wE("createdAt","asc"),Rm(50)),b=Jd(w,R=>{const V=[];R.forEach(N=>{V.push({id:N.id,...N.data()})}),_(V)});return()=>b()},[]),zt.useEffect(()=>($&&Z>0?lt.current=setTimeout(()=>{ct(Z-1)},1e3):Z===0&&(W(!1),lt.current&&clearTimeout(lt.current)),()=>{lt.current&&clearTimeout(lt.current)}),[$,Z]);const jt=()=>{ct(cD),W(!0)},Wt=async()=>{if(!(A.trim()===""||!Tn||!r||!i))try{await Zd(zs(Tn,"generalChat"),{text:A.trim(),createdAt:Tl(),userId:r,username:i,edited:!1}),S(""),dt()}catch(w){console.error("Error sending general message: ",w)}},Mt=async()=>{if(D.trim()===""||!Tn||!r||!i||$)return;jt();const w=D.trim();H("");let b={text:w,createdAt:Tl(),userId:r,username:i,role:"user",edited:!1};try{await Zd(zs(Tn,"aiChat"),b),dt()}catch(q){console.error("Error saving user AI message:",q)}const R=[...y,b].slice(-10).map(q=>({role:q.role||(q.userId==="AI"?"assistant":"user"),content:q.text})),V=[{role:"system",content:"You are a helpful assistant. You are running on a local LMStudio server."},...R],N=performance.now();let x="",I="",Yt="",ue=null;try{const q=await fetch(hD,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"qwen/qwen3-4b-thinking-2507",messages:V,temperature:.7,stream:!1})});if(!q.ok)throw new Error(`API request failed with status ${q.status}: ${await q.text()}`);const tt=await q.json();x=tt.choices[0].message.content;const ut=x.match(/<think>([\s\S]*?)<\/think>/);ut&&ut[1]&&(ue=ut[1].trim(),x=x.replace(/<think>[\s\S]*?<\/think>/,"").trim());const Vt=tt.usage,M=((performance.now()-N)/1e3).toFixed(2),K=Vt.completion_tokens||0,et=(Math.random()*.5+.1).toFixed(2),it=(K/(M-et)||0).toFixed(2);I=`Thought for ${M} seconds`,Yt=[`${it} tok/sec  ${K} tokens  ${et}s to first token`,`Stop reason: ${tt.choices[0].finish_reason}`].join(`
`)}catch(q){console.error("Error calling LMStudio API:",q),x="Sorry, I encountered an error trying to connect to the AI model. Please check the console and ensure the LMStudio server is running and CORS is enabled.",Yt=`Error: ${q.message}`}try{await Zd(zs(Tn,"aiChat"),{text:x,thinking:ue,thoughtMetric:I,otherMetrics:Yt,createdAt:Tl(),userId:"AI",username:"LMStudio AI",role:"assistant"})}catch(q){console.error("Error saving AI response to Firestore:",q)}};return i?st.jsxs("main",{className:"min-h-screen w-full h-screen flex flex-col bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-9S00 font-sans text-white p-4 sm:p-6 gap-4 sm:gap-6",children:[st.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center",children:[st.jsxs("div",{className:"flex items-center gap-3",children:[st.jsx(ZC,{className:"w-8 h-8 text-purple-300"}),st.jsx("h1",{className:"text-2xl font-bold text-white hidden sm:block",children:"Local AI Chat"})]}),st.jsxs("div",{className:"text-right",children:[st.jsx("span",{className:"text-gray-300 text-sm",children:"Signed in as:"}),st.jsx("span",{className:"font-bold text-white ml-2",children:i})]})]}),st.jsx("aside",{className:"w-full flex-shrink-0",children:st.jsx(gD,{users:l})}),st.jsxs("section",{className:"flex-1 flex flex-col md:flex-row gap-4 sm:gap-6 md:h-full md:min-h-0",children:[st.jsx(DE,{title:"Chat with Others",messages:d,onSendMessage:Wt,inputValue:A,onInputChange:S,username:i,db:Tn,chatType:"generalChat"}),st.jsx(DE,{title:"Chat with AI",messages:y,onSendMessage:Mt,inputValue:D,onInputChange:H,disabled:$,disabledText:$?`AI cooling down... (${Z}s)`:"AI is thinking...",username:i,db:Tn,chatType:"aiChat"})]})]}):st.jsx("main",{className:"min-h-screen w-full bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 font-sans text-white",children:st.jsx(mD,{onSetUsername:s,db:Tn,userId:r})})}HS.createRoot(document.getElementById("root")).render(st.jsx(zt.StrictMode,{children:st.jsx(yD,{})}));
